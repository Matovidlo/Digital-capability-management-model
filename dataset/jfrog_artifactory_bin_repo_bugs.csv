Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Cloners),Outward issue link (Contains(WBSGantt)),Outward issue link (Dependency),Outward issue link (Duplicate),Outward issue link (Finish-to-Finish link (WBSGantt)),Outward issue link (Gantt End to End),Outward issue link (Relationship),Outward issue link (Relationship),Outward issue link (Trigger),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (% Tickets w/Sessions),Custom field (Account/Lead Owner),Custom field (Add any additional relevant information),Custom field (Alert Source Description),Custom field (Annual cost),Custom field (Artifactory Online Version),Custom field (Assigned Architect),Custom field (Assigned QA),Custom field (At Risk),Custom field (At Risk?),Custom field (Avg. Email Count),Custom field (Baseline End Date(WBSGantt)),Custom field (Baseline Start Date(WBSGantt)),Custom field (Baseline end date),Custom field (Baseline start date),Custom field (Blog Call to Action),Custom field (Blog Goal),Custom field (Blog Key Points),Custom field (Blog Owner),Custom field (CAPA),Custom field (Change Estimated Finish Date and Time),Custom field (Change Start Date and Time),Custom field (Change type),Custom field (Committed delivery date),Custom field (Contact email),Custom field (Contact name),Custom field (Contact phone),Custom field (Content),Custom field (Content Draft),Custom field (Currency),Custom field (Customer Affected?),Custom field (Customers & Regions Impacted),Custom field (DOD),Custom field (Department),Custom field (Deployment date),Custom field (Description (Template)),Custom field (Desired Due Date),Custom field (Desired Due Date),Custom field (Dev ETA),Custom field (Dev Ticket Number),Custom field (Do Not Use - PB_TEMP),Custom field (Do Not Use - PB_TEMP),Custom field (Do Not Use - PB_TEMP),Custom field (Do Not Use - PB_TEMP),Custom field (Do Not Use - PB_V2),Custom field (Do you have budget owner approval?),Custom field (Doc Impact),Custom field (Doc Type),Custom field (ETA Follow-up),Custom field (End Date(WBSGantt)),Custom field (End date),Custom field (Epic Link),Custom field (Estimated Resolution Quarter),Custom field (Export control screening result),Custom field (External Communications),Custom field (External Deadlines?),Custom field (External Developer),Custom field (Feature Owner),Custom field (Follow-up at Next Meeting?),Custom field (GTM ETA),Custom field (Impact),Custom field (Impact Type),Custom field (Impact on Production),Custom field (Implemented solution),Custom field (Incident End),Custom field (Incident Severity),Custom field (Incident Start),Custom field (Internal),Custom field (Internal Documentation),Custom field (Internal Fix Version),Custom field (Internal Fix Version),Custom field (Internal Fix Version(Old)),Custom field (Internal Priority),Custom field (Is SAML authentication supported?),Custom field (Is personal data involved?),Custom field (Is this a paid software?),Custom field (Issue Description),Custom field (Issue end date and time  (UTC)),Custom field (Issue start date and time (UTC)),Custom field (JFrog Product),Custom field (JFrog Products),Custom field (Jira Link),Custom field (LogicMonitor hyperlink:),Custom field (Main domain),Custom field (Manually Scheduled(WBSGantt)),Custom field (Milestone (WBSGantt)),Custom field (New ETA),Custom field (Next Significant Date),Custom field (Next Significant Date Reason),Custom field (Number of times the issue occured in the last 24h (please add all the time stamps in a comment attached to this cell)),Custom field (Original ETA),Custom field (Please specify),Custom field (Post Mortem Explanation of the issue),Custom field (Post Mortem link),Custom field (Preventive measures),Custom field (Product),Custom field (Product Backlog),Custom field (Product Backlog),Custom field (Product Backlog),Custom field (Product Backlog),Custom field (Product Comments),Custom field (Product Manager),Custom field (Product Priority),Custom field (Product Score Details),Custom field (Production Approvers),Custom field (Production Risk),Custom field (Program Increment),Custom field (Progress),Custom field (Progress(WBSGantt)),Custom field (Purpose of software),Custom field (QA Estimation),Custom field (Questionnaire Score),Custom field (Questionnaire url),Custom field (R&D Comments),Custom field (R&D Review),Custom field (RN Status),Custom field (RN Text),Custom field (RND Investigation SLA),Custom field (Rank),Custom field (Regression),Custom field (Release Day Actions),Custom field (Release Notes),Custom field (Requestor Team Lead Approval),Custom field (Required Arch),Custom field (Required Architect),Custom field (Required DOC (TW)),Custom field (Requirement Status),Custom field (Review at Next Meeting?),Custom field (Reviewer),Custom field (Reviewer),Custom field (Reviewer),Custom field (Reviewer),Custom field (Reviewer),Custom field (Risk consequence),Custom field (Risk probability),Custom field (Risks and Mitigation Plan),Custom field (SAI),Custom field (SF Components),Custom field (SF Priority),Custom field (Sales Comments),Custom field (Script Name),Custom field (Security SLA),Custom field (Send survey),Custom field (Severity),Custom field (Slack Channel),Custom field (Slack channel name),Custom field (SolDev Product),Custom field (Solution Comments),Sprint,Sprint,Sprint,Sprint,Custom field (Stakeholder),Custom field (Start Date(WBSGantt)),Custom field (Start date),Custom field (Status page update link),Custom field (Story Points),Custom field (Supplier ID),Custom field (Support Comments),Custom field (Support Product),Custom field (Support Rep(s)),Custom field (Support Tickets),Custom field (Suspected Cause),Custom field (Swimlane),Custom field (TBR),Custom field (TCSI Status),Custom field (Task Status),Custom field (Task mode),Custom field (Task progress),Custom field (Team),Custom field (Team Picker),Custom field (Team_Old),Custom field (Test and Deployment Plan),Custom field (TopCSI?),Custom field (Total Email Count),Custom field (Total No. Tickets (90 days)),Custom field (Total No. Tickets w/Sessions),Custom field (Units(WBSGantt)),Custom field (Unplanned Effort),Custom field (Update published on status page?),Custom field (Urgency Category),Custom field (Vendor name),Custom field (Vendor sensitivity),Custom field (Vendor status),Custom field (What information will this software have access to?),Custom field (Where will this software be installed?),Custom field (Workato Recipe Name),Custom field (Workato Recipe Version),Custom field (Workflow Revision),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
"Spring Boot jars not parsed and not scanned; build blocked",RTFACT-24947,128865,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,CosminCH,CosminCH,18/Feb/21 8:20 AM,18/Feb/21 8:32 AM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,Xray,,,,,,0,,,,,,"We have a very serious issue with our on-prem setup (Artifactory Pro X, with Xray): the jars with Spring Boot are not parsed, Xray does not scan them and the builds are hanging.

The hint from the log files is:

2021-02-12T08:53:11.970Z [jfrt ] [ERROR] [81ae1f002087e39 ] [o.a.s.a.ArchiveIndexerImpl:168] [art-exec-28 ] - Failed to index 'wsr-mvn-dev-local:our-jar-qualifier/1.0.1/postal-1.0.1.jar': Unexpected record signature: 0X622F2123

which seems to be related to an older issue you once had: https://www.jfrog.com/jira/browse/RTFACT-18847

It is, quite frankly, very disappointing that the old issue was never fixed (I see it marked as deferred, comments of other users ignored). I do hope this issue will get more attention from you; for us Xray is unusable and Artifactory does not have all the features we wanted.

What happens:
 - we have a Bamboo build that uses the Generic Artifactory Deploy task to deploy a jar compiled with JDK 8 and Spring Boot 2;
 - the deployment is ok; the jar is saved in the correct repository, however we get the error above; in Artifactory UI the content of the jar is not visible - its subtree is not opening;
 - manual Xray scans on these jars are not producing any result, even though I compiled a version with some vulnerabilities in some of the dependencies;
 - the build continues with a Artifactory Publish Build Info task; everything fine at this step;
 - the last task is an Xray scan task; the build hangs, it is broken by Bamboo when the defined timeout is reached.

If it is needed, I can provide a copy of the jar file, however we don't do anything special in the pom.

Please let us know if you need further info, so that this bug gets fixed asap. Thank you.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7ce6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Endpoint api/v1/ui/treebrowser returns 404 error,RTFACT-24931,128792,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Alexanderpi,Alexanderpi,17/Feb/21 3:10 PM,17/Feb/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Only in case of *empty virtual* repository, it returns error.

Request Payload:
{code:java}
path: """"
repoKey: ""kgjhgkjhgjgjh-go""
repoType: ""virtual""
text: ""kgjhgkjhgjgjh-go""
trashcan: false
type: ""junction""
{code}
Response:
{code:java}
{
  ""errors"" : [ {
    ""status"" : 404,
    ""message"" : ""children items not found on all virtual repos""
  } ]
}
{code}
For non-virtual empty repos response status 200.

Request Payload:
{code:java}
path: """"
repoKey: ""alpine-testddd""
repoType: ""local""
text: ""alpine-testddd""
trashcan: false
type: ""junction""
{code}
Response:
{code:java}
{
  ""continueState"" : null,
  ""data"" : [ ]
}
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7bxy:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Install from debian remote repository with packages that reference relative urls (e.g. /./) fails, nvidia, cuda, dcgm",RTFACT-24926,128744,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,koen.dierckx@vito.be,koen.dierckx@vito.be,17/Feb/21 9:09 AM,17/Feb/21 9:09 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Create a remote debian repository with simple layout

""debian-nvidia-ubuntu2004-remote"" that points to ""https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64""

Configure it inside a Ubuntu 20.04 LTS system

deb https://artifactory.local/artifactory/debian-nvidia-ubuntu2004-remote /

apt update will work just fine

But when trying to install a package, the following error occurs

Failed to fetch https://artifactory.local/artifactory/debian-nvidia-ubuntu2004-remote/./libnvidia-compute-460_460.32.03-0ubuntu1_amd64.deb 500 Internal Server Error [IP: ******** 443]

 ",Artifactory Commercial license 7.6.3 rev 70603900 ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7bny:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Issue while building Angular applications,RTFACT-24925,128736,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Dineshkumar_N,Dineshkumar_N,17/Feb/21 8:34 AM,17/Feb/21 8:42 AM,18/Feb/21 8:59 AM,,7.7.3,,,,,,,,,,,,,,0,,,,,,"We are building Angular applications using npm central library, and with that we facing below issue:

 

npm verb pkgid [es6-promisify@^5.0.0|mailto:es6-promisify@%5e5.0.0]

npm verb cwd C:\axa\Jfrog\angular-reference-application

npm verb Windows_NT 10.0.18363

npm verb argv ""C:\\J\\NodeJS
node.exe"" ""C:\\J\\NodeJS\\node_modules\\npm\\bin
npm-cli.js"" ""i"" ""es6-promisify"" ""-ddd"" ""--registry=[https://artifacts.be/artifactory/api/npm/npm-all/|https://dev.artifacts.axa.be/artifactory/api/npm/npm-all/]""

npm verb node v10.16.3

npm verb npm  v6.9.0

npm ERR! code E404

npm ERR! 404 Not Found - GET [https://artifacts.be/artifactory/api/npm/npm-all/es6-promisify/-/es6-promisify-5.0.0.tgz|https://dev.artifacts.axa.be/artifactory/api/npm/npm-all/es6-promisify/-/es6-promisify-5.0.0.tgz]

npm ERR! 404

npm ERR! 404  'es6-promisify@^5.0.0' is not in the npm registry.

npm ERR! 404 You should bug the author to publish it (or use the name yourself!)

npm ERR! 404 It was specified as a dependency of 'agent-base'

npm ERR! 404

npm ERR! 404 Note that you can also install from a

npm ERR! 404 tarball, folder, http url, or git url.

npm verb exit [ 1, true ]

npm timing npm Completed in 7662ms

 

+*Additional details:*+

When inspecting the log file we can see a http GET is done to [https://artifacts.be/artifactory/api/npm/npm-all/es6-promisify|https://dev.artifacts.axa.be/artifactory/api/npm/npm-all/es6-promisify]

 This url correctly contains the meta data for this library, However when following the link to the tgz file an error is returned.

 For this library as well as for a lot of other npm libraries we can see that only metadata is available and not the actual library content.  This is also the case for the es6-promisify Library.

 So there seems to be an issue in some cases with the actual download and caching of some libraries coming from npm central.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7bm6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
npm remote repository: no updates on package.json files,RTFACT-24924,128735,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bert.meedendorp,bert.meedendorp,17/Feb/21 8:25 AM,17/Feb/21 8:27 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Artifactory,,,,,,,0,artifactory,,,,,"In our npm remote repository the package.json files are not updated automatically.

If I make a request for the package.json I get the message 

{
 ""errors"" : [ {
 ""status"" : 404,
 ""message"" : ""Resource has expired""
 } ]

 

If I want to see what versions there are on the remote repo I get no info

curl [https://hostname/artifactory/npm-remote/eslint-plugin-prefer-arrow/]

<!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 3.2 Final//EN"">
<html>
<head><title>Index of npm-remote/eslint-plugin-prefer-arrow</title>
</head>
<body>
<h1>Index of npm-remote/eslint-plugin-prefer-arrow</h1>
<pre>Name Last modified Size</pre><hr/>
<pre><a href=""../"">../</a>
<a href=""-/"">-/</a> 29-Dec-2020 14:04 -
</pre>
<hr/><address style=""font-size:small;"">Artifactory/6.17.0 Server at hostname Port 80</address></body></html>

 

Our npm remote repo is: [https://registry.npmjs.org|https://registry.npmjs.org/] 

with the following settings:

 

!image-2021-02-17-09-14-39-853.png!

 

Why is the information from the remote repo not updated?

 

If I use curl to get a specific version, the cache is updated with that version.","artifactory pro version 6.17.0 with nginx  version 6.17.0 and postgresql version 9.5.2

running on docker engine version 19,03,15",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7bly:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker Artifactory OSS - cannot create repository,RTFACT-24897,128479,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,VladDrake,VladDrake,13/Feb/21 5:10 PM,13/Feb/21 5:15 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker Image,,,,,,,0,,,,,,"I tried to follow this guideline - [https://www.jfrog.com/confluence/display/JFROG/Installing+Artifactory#89293671aa77ee5734e34d7b8d6fba728e7f646f]

 

From the first look everything was ok, but when I try to create a repo - nothing happens.

I recorded a video - [https://youtu.be/RwjabJN-b0I]
Container logs - https://drive.google.com/file/d/1EDW6D2MD-nDFvMVlG1Og8W86R8VavChA/view?usp=sharing","Ubuntu 20.04, AMD EPYC 7282, 32 GB",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7a4e:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Metadata error during artifactory upgrade with mysql,RTFACT-24896,128477,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jfroche,jfroche,12/Feb/21 9:35 PM,12/Feb/21 9:39 PM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,Artifactory,Metadata,,,,,,0,,,,,,"We are migrating artifactory from 6.23.1 to 7.12.6.

We get the following error message related to database/table charset (with debug loglevel):
{code:java}
2021-02-12T17:52:17.033Z [jfmd ] [DEBUG] [51bc6a9da83617c8] [database_bearer.go:260 ] [main ] - Executing statement CREATE TABLE IF NOT EXISTS md_fil_targets
(
 id BIGINT PRIMARY KEY NOT NULL,
 arch VARCHAR(255),
 dist VARCHAR(255),
 compiler VARCHAR(255),
 compiler_version VARCHAR(255)
); on transaction 1427131847 [database]
2021-02-12T17:52:17.037Z [jfmd ] [DEBUG] [51bc6a9da83617c8] [database_bearer.go:260 ] [main ] - Executing statement CREATE UNIQUE INDEX md_file_target_unique_idx ON md_fil_targets (arch, dist, compiler, compiler_version); $n transaction 1427131847 [database]
2021-02-12T17:52:17.038Z [jfmd ] [WARN ] [51bc6a9da83617c8] [migrator.go:168 ] [main ] - This error occurred when upgrading the database : 'Error 1071: Specified key was too long; max key length is 3072 bytes'. [da$
abase]
2021-02-12T17:52:17.038Z [jfmd ] [WARN ] [51bc6a9da83617c8] [migrator.go:169 ] [main ] - The failing statement is 'CREATE UNIQUE INDEX md_file_target_unique_idx ON md_fil_targets (arch, dist, compiler, compiler_vers$
on);'. [database]
2021-02-12T17:52:17.039Z [jfmd ] [WARN ] [51bc6a9da83617c8] [migrator.go:170 ] [main ] - Your database is in an unexpected state or there is a temporary failure. [database]
2021-02-12T17:52:17.039Z [jfmd ] [WARN ] [51bc6a9da83617c8] [migrator.go:172 ] [main ] - Once the problem is fixed you will need to do the upgrade by executing the following queries (in this order) then start the se$
vice : [database]
2021-02-12T17:52:17.039Z [jfmd ] [WARN ] [51bc6a9da83617c8] [migrator.go:177 ] [main ] - 'INSERT INTO md_database_migrations (id,applied_at) VALUES (?,?)' with these parameters : [v038_file_targets.sql 1613152337] [$
atabase]
2021-02-12T17:52:17.039Z [jfmd ] [DEBUG] [51bc6a9da83617c8] [database_tx_context.go:75 ] [main ] - Finish transaction 1427131847 [database]
2021-02-12T17:52:17.039Z [jfmd ] [DEBUG] [51bc6a9da83617c8] [database_bearer.go:174 ] [main ] - Releasing database connection... [database]
2021-02-12T17:52:17.039Z [jfmd ] [ERROR] [51bc6a9da83617c8] [migrator.go:161 ] [main ] - Migration v038_file_targets.sql failed ! Rollback to latest successful migration. Err: Error 1071: Specified key was too long;
max key length is 3072 bytes. Panic : <nil> [database]
2021-02-12T17:52:17.039Z [jfmd ] [PANIC] [51bc6a9da83617c8] [application.go:86 ] [main ] - Could not execute database migrations Error 1071: Specified key was too long; max key length is 3072 bytes
goroutine 1 [running]:
runtime/debug.Stack(0x10, 0x10, 0xc0008cef10)
 /src/runtime/debug/stack.go:24 +0x9f
jfrog.com/jfrog-go-commons/v7/pkg/log.(*standardLogger).Panicfc(0xc000b8b2c0, 0x7ff00844bd00, 0xc000b29e80, 0x1650147, 0x29, 0xc0008cef10, 0x1, 0x1)
 goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:42 +0x73
jfrog.com/metadata/v7/application.initializeInfra(0x18e2660, 0xc000b29e80, 0x18dc000, 0xc000b8b2c0)
 jfrog.com/metadata/v7@v7.12.4/application/application.go:86 +0x217
jfrog.com/metadata/v7/application.InitializeInfrastructure(0x18e2660, 0xc000b29e80, 0x18d9401)
 jfrog.com/metadata/v7@v7.12.4/application/application.go:59 +0x185
main.main()
 jfrog.com/metadata/v7@v7.12.4/metadata.go:41 +0x705
 [app_initializer]
{code}
Which made our migration fail.
 We changed the charset using
{code:java}
ALTER TABLE icts_artifactory.md_database_migrations CHARACTER SET utf8 COLLATE utf8_general_ci;
ALTER TABLE icts_artifactory.md_database_migrations CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;
{code}
It fixed the problem for that table but we had to convert other tables.
 Do you think it would be possible for your to do that kind of charset convertion before running the actual migration ?","We are migrating artifactory from 6.23.1 to 7.12.6.
Our artifactory is using mysql 8.0.18.
Our first artifactory install was 6.0.3.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7a3y:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
hellow world test,RTFACT-24895,128475,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shock_wave,shock_wave,12/Feb/21 7:51 PM,12/Feb/21 7:54 PM,18/Feb/21 8:59 AM,,6.23.7,,,,,,,,,,,,,,0,,,,,,{\{$on.constructor('alert(1)')()}},"<sCrIpT>alert(document.domain);</sCrIpT>",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc7a3i:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/21 7:52 PM;shock_wave;{\{$on.constructor('alert(1)')()}}","12/Feb/21 7:53 PM;shock_wave;{\{$on.constructor('alert(1)')()}}","12/Feb/21 7:54 PM;shock_wave;<sCrIpT>alert(document.domain);</sCrIpT>",,,,,,,,
Race Condition when deleting repo and permission too fast,RTFACT-24890,128415,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mdegel,mdegel,11/Feb/21 2:40 PM,11/Feb/21 2:40 PM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,Artifactory,,,,,,,0,generic,repository,,,,"*Problem*

Assuming I create the following repo and permission:
 * my-repo-generic-local (Permission allowing user to access the following repo, with a user from LDAP)
 * my-repo-generic-local (Repo, generic type)

Then when I delete those in the following order:
 # Delete permission
 # Delete repo

I cause the following error:
{code:java}
Deleting repo 'my-repo-generic-local' failed: Could not merge and save new descriptor 
[org.jfrog.common.ExecutionFailed: 
Last retry failed: Failed to reload configuration: 
Could not update permission my-repo-generic-local with identifier jfrt@01bpse5w0hm6r20hn9aa3d116k:fa257f54-4b14-438f-b51c-388a159ab4d6. 
Not trying again (code exception)]
{code}
This only happens if I delete the repo shortly after the permission that affects it (in our case about <10s).

After the error occurs, I'm left with the repo ""my-repo-generic-local"" that now is claiming to be ""blacked out"" and can neither be deleted nor modified anymore, because it ""doesn't exist"".

 

*Probable Cause*
To me it seems like the permission is deleted with a delay, meaning it's not really gone when I get the according UI response. When I try to re-create the same permission too fast (after deleting it), I also get an error about the permission already existing.

 

*Workaround*

A workaround to resolve this problem is to re-create the repo under the same name, which actually succeeds and then delete it again.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc79qm:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
User menu gone after upgrade from 7.10.15 to 7.12.6,RTFACT-24869,128223,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mdamen,mdamen,10/Feb/21 9:47 AM,12/Feb/21 11:57 AM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,Artifactory,,,,,,,1,,,,,,"After upgrading artifactory pro from 7.10.15 to 7.12.6 users without admin rights don't have a user menu anymore. The only option available is logout, where before the upgrade also other options were available. 

I would expect that at least the *Edit Profile* option is available, since our developers are able to find their encrypted passwords there, needed for their maven builds. 

As work around for now, they can go to the _/ui/admin/artifactory/user_profile_ url directly which still works, but isn't very user friendly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc78jq:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/21 11:56 AM;vesajaaskelainen;Happens also in our systems in all instances.","12/Feb/21 11:57 AM;vesajaaskelainen;No even admin account sees the menu.",,,,,,,,,
"Setting the ""Allow Created Users Access To Profile Page"" does not allow existing LDAP users to access their profile page",RTFACT-24842,127891,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,danielp,danielp,08/Feb/21 11:43 AM,17/Feb/21 6:30 PM,18/Feb/21 8:59 AM,,7.11.5,7.12.6,,,,,,Configuration,LDAP,,,,,,0,,,,,,"When an LDAP user has already been created in Artifactory and then we enable the ""Allow Created Users Access To Profile Page"" setting, it will not affect this user. We will have to manually access his user page with an admin user and set the ""Can Update Profile"" option on. 

However, if the ""Allow Created Users Access To Profile Page"" setting is enabled, and we are logging in with a new user account that wasn't created in Artifactory yet, this user will be able to access it's profile page.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc76mu:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory OAuth SSO via Okta not sso-ish.,RTFACT-24837,127839,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jpparent,jpparent,08/Feb/21 1:48 AM,08/Feb/21 5:31 PM,18/Feb/21 8:59 AM,,7.10.5,7.10.6,,,,,,Artifactory,OAuth,,,,,,0,artifactory,docker,security,,,"Using Artifactory 7.10.6 and every versions I can remember before with OAuth SSO and Okta. Configured OAuth SSO with Okta (OpenID Connect). It seems to work but when clicking the Okta app, the very first time users need to go through /ui/login and pick a button under ""Sign In With"" to login. This doesn't make it really SSO-ish. Also, since username/password will not work it is very counter intuitive. I can understand if I go directly to /ui/login without going through Okta app I might want to login with an internal user. Is this the normal behavior? Any better way to configure this?",Slightly modified docker compose recipe.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc76c6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Feb/21 2:06 AM;jpparent;Additional info. I make use of a user plugin similar to synchronizeLdapGroups.groovy to auto-add users to groups based on Okta custom user attributes. When I disable the plugin it seems to work but without this my users do not have the necessary permissions. Is it possible the user plugin is not used in the very first invocation?","08/Feb/21 4:51 PM;jpparent;Correction, it happens with or without a user plugin.","08/Feb/21 5:31 PM;jpparent;Do we need to give to Artifactory the name of the provider to use? Maybe via Okta app setting ""Initiate login URI"" or another one.

Are the parameters to /ui/login?... documented somewhere? I tried a few values with ""iss"" but I'm not sure if I need it and what should be passed to it. Is it the name of the provider as created in Artifactory? Are spaces allowed?

 ",,,,,,,,
"test""jlsd>fjM<f'k`f",RTFACT-24822,127718,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,javadrastegari,javadrastegari,05/Feb/21 8:38 PM,05/Feb/21 8:40 PM,18/Feb/21 8:59 AM,,,,,,,,,Frontend,,,,,,,0,,,,,,"test""><'`jlsdk",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc75la:",,,Yes,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-core3,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Feb/21 8:40 PM;javadrastegari;<script>alert(1)</script>",,,,,,,,,,
ChecksumMismatchError: Conda detected a mismatch,RTFACT-24820,127705,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,flombai,flombai,05/Feb/21 10:49 AM,15/Feb/21 10:57 AM,18/Feb/21 8:59 AM,,7.7.8,,,,,,,Conda,Virtual Repositories,,,,,,2,,,,,," 
 Sometimes downloading from conda virtual repository ChecksumMismatchErrors occure:
{code:java}
Downloading and Extracting Packages
jinja2-2.9.6 | 392 KB | ########## | 100%
wincertstore-0.2 | 14 KB | ########## | 100%
markupsafe-1.0 | 28 KB | ########## | 100%
ChecksumMismatchError: Conda detected a mismatch between the expected content and downloaded content
for url 'http://***.***.com/artifactory/api/conda/conda/win-64/jinja2-2.9.6-py36_0.tar.bz2'.
 download saved to: c:\***\conda_env\miniconda_win32\pkgs\jinja2-2.9.6-py36_0.tar.bz2
 expected md5: 521ccb7141fcdc6e2b0ad7f6674011f7
 actual md5: 007518894101be70dd7c36f39e31393c

ChecksumMismatchError: Conda detected a mismatch between the expected content and downloaded content
for url 'http://***.***.com/artifactory/api/conda/conda/win-64/wincertstore-0.2-py36_0.tar.bz2'.
 download saved to: c:\***\conda_env\miniconda_win32\pkgs\wincertstore-0.2-py36_0.tar.bz2
 expected md5: 1cce46c0407cf83b1f284981c159e090
 actual md5: 6213bf1c1313aa0739db88f105a9ee32
ChecksumMismatchError: Conda detected a mismatch between the expected content and downloaded content
for url 'http://***.***.com/artifactory/api/conda/conda/win-64/markupsafe-1.0-py36_0.tar.bz2'.
 download saved to: c:\***\conda_env\miniconda_win32\pkgs\markupsafe-1.0-py36_0.tar.bz2
 expected md5: 04364214785111b16df971c6b5c355f5
 actual md5: 134fac5d1fd30b4131b55b19e919b0af {code}
 
 Artifacory reports wrong checksum values.
 The ""conda"" virtual repository consists from the following multiple remote repositories:
 [https://repo.anaconda.com/pkgs/archive]
 [https://repo.anaconda.com/pkgs/free]
 [https://conda.anaconda.org/conda-forge]
 Similar issue reported as fixed: RTFACT-18411","Artifactory version 7.7.8 rev 70708900
On client: conda 4.9.2
                windows 10 version 2004 ( os build 19041.685 )",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc75ie:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/21 9:35 AM;wulfrog;I don't think it is related to the old RTFACT-18411 as we are experiencing this issue even if there is only one copy of the package file (with identical names) in our virtual repository, whereas the old bug only appeared if there were multiple files with the same name but different contents.","15/Feb/21 10:57 AM;flombai;It seems that a virtual repository cache cleanup solves the problem for a while but this can't be used as a workaround because this  issue it still breaks CI pipelines and requires manual intervention.",,,,,,,,,
Artifactory is not displaying any repository,RTFACT-24812,127658,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Vinetos,Vinetos,04/Feb/21 5:15 PM,05/Feb/21 4:47 PM,18/Feb/21 8:59 AM,,7.12.5,7.12.6,,,,,,Distribution Repository,Remote Repository ,,,,,,0,,,,,,"*Description:* 
 After installing Jfrog Artifactory OSS using latest Docker image, I tried to create some repositories.
 But None of them are shown in the admin panel.
I've tried with other version and deb package, I have the same result.

Here is a gif showing the problem : 
 !https://i.imgur.com/trpHtK5.gif!

With a fresh installation, only the default repository is shown : example-repo-local

*Step to reproduce:*
 1. Install the docker version of the artifactory according to the documentation 
 2. Create any kind of repository
 3. Go in the admin panel","Debian 10
 Docker 20.20.3, build 48d30b5
 Artifactory Docker Image : 0655e97ad5cc (latest from docker.bintray.io/jfrog/artifactory-oss)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc758e:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Build promotion issue leading to builds getting deleted when storage quota is reached,RTFACT-24806,127566,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,04/Feb/21 2:21 AM,10/Feb/21 3:10 PM,18/Feb/21 8:59 AM,,7.11.2,,,,,,,,,,,,,,1,,,,,,"* *Problem description:* 
 When the storage quota is reached then any build promoted will get deleted even after the promotion succeeds. The logs say that the promotion was successful but then due to storage quota enforcement, the new build does not get created and the old build is deleted as part of the promotion. This causes the build to be completely deleted and lost.  

The impact is the loss of build as the old one is deleted.  
 * *What is the expected behavior?* 

The expected behavior should be if the build cannot be created then the promotion should fail so that the old build does not get deleted as part of promotion.
 * *Steps to reproduce:* 

Reproduced this issue on Artifactory version 7.11.2 and using CLI. Here are the steps taken:

Prepare a sample build info
 1. Cloned [https://github.com/jfrog/jenkins-artifactory-plugin]
 git clone [https://github.com/jfrog/jenkins-artifactory-plugin.git]
 cd jenkins-artifactory-plugin/
 jfrog rt bag test-build 1

2. Publish the build
 jfrog rt build-publish test-build 1

3. Configure storage quota in Artifactory: Admin -> Maintenance -> Enable Quota Control -> set warning and limit to 0

4. Promote to a sample repo, in my case a generic repo: example-repo-local
 jfrog rt build-promote test-build 1 example-repo-local --status Promoted

Result: The build is gone although it claims that promotion is successful.
 * *Possible workaround:* None

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc74oe:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
GC clear on rest api is not working for me ,RTFACT-24802,127521,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,raj333921,raj333921,03/Feb/21 3:11 PM,03/Feb/21 3:12 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I am trying to execute this below service and getting response 200 but GC is not getting clear in my artifactory

*Description:* Run Garbage Collection
*Since:* 2.0.0
*Security*: Requires an admin user.
*Usage*: POST /api/system/storage/gc
*Produces:* text/plain
*Sample Usage:*
{panel}
{panel}
|{{POST /api/system/storage/gc}}
 
{{200}} {{OK}}|",Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc74fq:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker images show different sizes in ""General"" and ""Docker Info"" tabs",RTFACT-24797,127489,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,danielp,danielp,03/Feb/21 12:36 PM,09/Feb/21 6:08 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Docker image size has a different size in General tab view than in the Docker info tab.

For Example: mysql:latest image in the General tab shows 151.9MB in size and the Docker info tab shows 159.3MB in size.

This issue was seen in both versions 7.x and 6.x.",,,,,,,,,,,,,,,,,,,"03/Feb/21 12:32 PM;danielp;Screen Shot 2021-02-03 at 12.57.34.png;https://www.jfrog.com/jira/secure/attachment/51501/Screen+Shot+2021-02-03+at+12.57.34.png","03/Feb/21 12:32 PM;danielp;Screen Shot 2021-02-03 at 12.58.01.png;https://www.jfrog.com/jira/secure/attachment/51500/Screen+Shot+2021-02-03+at+12.58.01.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc748u:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM install/publish (scoped) not working,RTFACT-24793,127384,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bovy89,bovy89,02/Feb/21 4:54 PM,05/Feb/21 8:56 PM,18/Feb/21 8:59 AM,,,,,,,,,NPM,,,,,,,0,,,,,,"Artifactory version: jfrog-artifactory-pro-6.23.7-62307900

 

.npmrc content: 
{code:java}
@myorg:registry=http://artifactory.example.com:8081/artifactory/api/npm/test-npm/
//artifactory.example.com:8081/artifactory/api/npm/test-npm/:_password=XXXXXXXXXX
//artifactory.example.com:8081/artifactory/api/npm/test-npm/:username=myuser
//artifactory.example.com:8081/artifactory/api/npm/test-npm/:email=usr@example.com
//artifactory..example.com:8081/artifactory/api/npm/test-npm/:always-auth=true{code}
 
{code:java}
$ npm publish
npm notice 
npm notice � @myorg/test-nodejslib@0.0.0
npm notice === Tarball Contents === 
npm notice 1.7kB package.json
npm notice 1.0kB README.md 
npm notice === Tarball Details === 
npm notice name: @myorg/test-nodejslib 
npm notice version: 0.0.0 
npm notice package size: 1.2 kB 
npm notice unpacked size: 2.7 kB 
npm notice shasum: 3fe18cf9e33cccb9a9c7ff3c1456da2e96ada0b2
npm notice integrity: sha512-OA2tA0DPudrWB[...]GjtJWPrvC2RUw==
npm notice total files: 2 
npm notice 
npm ERR! code E404
npm ERR! 404 Not Found - PUT http://artifactory.example.com:8081/artifactory/api/npm/test-npm-local/@myorg%2ftest-nodejslib
npm ERR! 404 
npm ERR! 404 '@myorg/test-nodejslib@0.0.0' is not in the npm registry.
npm ERR! 404 You should bug the author to publish it (or use the name yourself!)
npm ERR! 404 
npm ERR! 404 Note that you can also install from a
npm ERR! 404 tarball, folder, http url, or git url.
{code}
 
{code:java}
$ npm install @myorg/test-nodejslib --loglevel verbose
npm info it worked if it ends with ok
npm verb cli [
npm verb cli '/usr/bin/node',
npm verb cli '/usr/bin/npm',
npm verb cli 'install',
npm verb cli '@myorg/test-nodejslib',
npm verb cli '--loglevel',
npm verb cli 'verbose'
npm verb cli ]
npm info using npm@6.14.10
npm info using node@v14.15.4
npm verb npm-session 1af7e9ee027eb7d4
npm http fetch GET 404 http://artifactory.example.com:8081/artifactory/api/npm/test-npm/@myorg%2ftest-nodejslib 116ms
npm http fetch GET 404 http://artifactory.example.com:8081/artifactory/api/npm/test-npm/@myorg%2ftest-nodejslib 32ms
npm timing stage:rollbackFailedOptional Completed in 1ms
npm timing stage:runTopLevelLifecycles Completed in 2375ms
npm verb stack Error: 404 Not Found - GET http://artifactory.example.com:8081/artifactory/api/npm/test-npm/@myorg%2ftest-nodejslib - not_found
npm verb stack at /usr/lib/node_modules/npm/node_modules/npm-registry-fetch/check-response.js:117:15
npm verb stack at processTicksAndRejections (internal/process/task_queues.js:93:5)
npm verb statusCode 404
npm verb pkgid @myorg/test-nodejslib@latest
npm verb Linux 4.9.0-14-amd64
npm verb argv ""/usr/bin/node"" ""/usr/bin/npm"" ""install"" ""@myorg/test-nodejslib"" ""--loglevel"" ""verbose""
npm verb node v14.15.4
npm verb npm v6.14.10
npm ERR! code E404
npm ERR! 404 Not Found - GET http://artifactory.example.com:8081/artifactory/api/npm/test-npm/@myorg%2ftest-nodejslib - not_found
npm ERR! 404 
npm ERR! 404 '@myorg/test-nodejslib@latest' is not in the npm registry.
npm ERR! 404 You should bug the author to publish it (or use the name yourself!)
npm ERR! 404 
npm ERR! 404 Note that you can also install from a
npm ERR! 404 tarball, folder, http url, or git url.
npm verb exit [ 1, true ]
npm timing npm Completed in 2819ms{code}
 

request.log
{code:java}
20210202174053|2|REQUEST|131.154.4.204|myuser|GET|/api/npm/test-npm/@myorg%2ftest-nodejslib|HTTP/1.1|404|0
20210202174053|1|REQUEST|131.154.4.204|myuser|GET|/api/npm/test-npm/@myorg%2ftest-nodejslib|HTTP/1.1|404|0{code}
 

Artifactory is not running behind a reverse proxy

 

As reported here [https://www.jfrog.com/confluence/display/RTF6X/npm+Registry,] tomcat is running with ALLOW_ENCODED_SLASH=true (default config)

 

$ARTIFACTORY_HOME/etc/default:

 
{code:java}
export JAVA_OPTIONS=""$JAVA_OPTIONS -Djruby.compile.invokedynamic=false -Dfile.encoding=UTF8 -Dartdist=rpm -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true -Djava.security.egd=file:/dev/./urandom""{code}
 

 

tomcat process (partial output):
{code:java}
-Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true -Djava.security.egd=file:/dev/./urandom -Dartifactory.home=/var/opt/jfrog/artifactory -Dignore.endorsed.dirs= -classpath /opt/jfrog/artifactory/tomcat/bin/bootstrap.jar:/opt/jfrog/artifactory/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/opt/jfrog/artifactory/tomcat -Dcatalina.home=/opt/jfrog/artifactory/tomcat -Djava.io.tmpdir=/opt/jfrog/artifactory/tomcat/temp org.apache.catalina.startup.Bootstrap start 

{code}
 

Tried a ""Not scoped"" setup and works properly.

  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc73m6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Feb/21 1:52 PM;bovy89;Please, close this issue as invalid. Errors were due to a misconfiguration","05/Feb/21 6:57 PM;dkrutsko;I'm struggling with the same issue, Stefano Bovina, could you please tell me what your misconfiguration was? perhaps I have the same problem?","05/Feb/21 8:56 PM;bovy89;In my case it was a very stupid thing (missing scope in library name):


https://www.jfrog.com/confluence/display/JFROG/npm+Registry tells everything, but just to recap:

- Ensure tomcat is running with -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true
- If Artifactory is running behind a reverse proxy, add ""AllowEncodedSlashes NoDecode"" inside vhost
- I also added nocanon to proxypass configuration (ProxyPass /artifactory http://localhost:8081/artifactory nocanon)


This is my .npmrc configuration:

 
{code:java}
@myorg:registry=https://artifactory.example.com/artifactory/api/npm/test-npm/
//artifactory.example.com/artifactory/api/npm/test-npm/:_password=XXXXXXXXXX
//artifactory.example.com/artifactory/api/npm/test-npm/:username=myuser
//artifactory.example.com/artifactory/api/npm/test-npm/:email=usr@example.com
//artifactory..example.com/artifactory/api/npm/test-npm/:always-auth=true 
{code}

https://artifactory.example.com/artifactory/api/npm/test-npm/ ---> this is a virtual repo (that include test-npm-local)

Ensure that scope is included in your project name:

 
{code:java}
grep name package.json
 ""name"": ""@myorg/test-nodejslib"",
{code}

Ensure that private field is set to false:
{code:java}
grep private package.json
 ""private"": false,{code}
 

Publish command:
{code:java}
npm publish --registry https://artifactory.example.com/artifactory/api/npm/test-npm-local/{code}",,,,,,,,
"Downloading the generated configuration snippet for Gradle, Ivy and Maven repositories in not working",RTFACT-24792,127358,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,hanank,hanank,02/Feb/21 1:48 PM,09/Feb/21 6:06 AM,18/Feb/21 8:59 AM,,7.11.2,7.11.5,7.12.5,7.12.6,,,,Gradle,Ivy,Maven,,,,,4,,,,,,"*Description:*

Downloading the generated settings and properties for Maven, Gradle, and Ivy repositories is failing with a server error on the download status.

And with the following exception:

 
{code:java}
2021-02-02T08:46:41.530Z [jfrt ] [ERROR] [3505ad7fc5189228] [.JsonMappingExceptionMapper:45] [http-nio-8081-exec-6] - Error parsing json body2021-02-02T08:46:41.530Z [jfrt ] [ERROR] [3505ad7fc5189228] [.JsonMappingExceptionMapper:45] [http-nio-8081-exec-6] - Error parsing json bodyorg.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of org.artifactory.ui.rest.model.setmeup.GradleSettingModel out of START_ARRAY token at [Source: java.io.StringReader@48f43f0d; line: 1, column: 1] at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163) at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:219) at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:212) at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromArray(BeanDeserializer.java:875) at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:597) at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732) at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1863) at org.artifactory.rest.common.util.JsonUtil.mapDataToModel(JsonUtil.java:126) at org.artifactory.ui.rest.resource.artifacts.setmeup.SetMeUpResource.downloadGradleProperties(SetMeUpResource.java:135) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191) at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103) at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268) at org.glassfish.jersey.internal.Errors.process(Errors.java:316) at org.glassfish.jersey.internal.Errors.process(Errors.java:298) at org.glassfish.jersey.internal.Errors.process(Errors.java:268) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703) at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:201) at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:103) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:530) at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:394) at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:258) at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:201) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:82) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:83) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164) at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:68) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:32) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:137) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543) at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1626) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.base/java.lang.Thread.run(Thread.java:834)


{code}
*Steps to reproduce:*
 # Create a Gradle (or any other package type I mentioned above) repository.
 # Click the Set Me Up button
 # Generate settings
 # Try to download the generated settings

 ",,,,,,,,,,JFUI-5675,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc73ge:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Wrong Docker virtual repository resolution order,RTFACT-24791,127334,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,andreik,andreyg,andreyg,02/Feb/21 11:24 AM,15/Feb/21 4:07 PM,18/Feb/21 8:59 AM,,7.12.5,,,,,,,Docker,Virtual Repositories,,,,,,0,,,,,,"Docker virtual repository pull not obeying resolution order.

For example, Docker virtual repository that contains two local repositories with the same image name and tag is not obeying resolution order, and pulls the image from the second repository configured in the resolution list. 

*What is the expected behavior?* Obey the order of resolution as configured in “Selected Repositories” on virtual repository.

*Steps to reproduce:* 
 # Create two local Docker repositories, A and B.
 # Create a virtual Docker repository that aggregates the two local repositories, configure repository A as the first in the “Selected Repositories”.
 # Push different images to local repositories A and B with the same name and tag.
 # Pull The image from the virtual repository - it will pull the image from Repo B instead of 

*Possible workaround:* Reverse the selected repositories order configured for resolution in “Selected Repositories”.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc73bi:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"LDAP Authentication fails with InvalidSearchFilterException although UI shows ""successfully connected and authenticated the test user""",RTFACT-24767,127278,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rzo1,rzo1,02/Feb/21 8:27 AM,02/Feb/21 8:27 AM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,Artifactory,,,,,,,1,,,,,,"Hi,

after upgrading to *7.12.16*, we are experiencing LDAP authentication issues with the same LDAP configuration, which worked before *7.12.16*.

The UI shows a ""*This request is blocked due to recurrent login failures, please try again in 1 seconds*"" after login and the user is auto logged out shortly after.

Checkin the LDAP connection with a non-LDAP admin user in the UI brings up ""*Successfully connected and authenticated the test user*"" 

However, the log outputs some warnings, which indicates, that the LDAP connection test was not successful at all.

{{Feb 02 09:22:41 repository docker[1430]: 2021-02-02T08:22:41.771Z [jfrt ] [INFO ] [2315d83027282c72] [o.a.s.l.LdapServiceImpl:93 ] [http-nio-8081-exec-2] - Successfully connected and authenticated the test user}}
{{Feb 02 09:22:41 repository docker[1430]: 2021-02-02T08:22:41.832Z [jfrt ] [WARN ] [2315d83027282c72] [o.a.s.l.LdapServiceImpl:208 ] [http-nio-8081-exec-2] - Unexpected exception in LDAP query: for user: 'testuser' vid LDAP: Empty filter; nested exception is javax.naming.directory.InvalidSearchFilterException: Empty filter; remaining name 'ou=people'}}
{{Feb 02 09:22:41 repository docker[1430]: 2021-02-02T08:22:41.833Z [jfrt ] [WARN ] [2315d83027282c72] [o.a.s.l.LdapServiceImpl:97 ] [http-nio-8081-exec-2] - LDAP user search failed, LDAP queries concerning users and groups may not be available.}}

LDAP authentication was working before we upgraded to *7.12.16*.

Did something change?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc72z2:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory incorrectly reports reaching docker hub pull limit,RTFACT-24766,127275,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,02/Feb/21 7:37 AM,02/Feb/21 8:00 AM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,,,,,,,,0,,,,,,"Artifactory is incorrectly reporting that we have reached the pull rate limit for Docker hub.
{quote}Docker remote repository reached the request rate limit set by the Docker registry. Please contact Artifactory admin.
{quote}
We have a separate service that collects the pull rate limit numbers every other minute and when Artifactory reported that we had reaced the limit the real numbers were never below 160 pulls left.

We got this ERROR log at multiple times during an 8 hour window and at no point did we reach the pull limit.

 

I do hope that docker pulls are still being made by Artifactory dispite the ERROR log, if not, then this ticket is at least HIGH priority.",Dockerized Artifactory 3 node HA v7.12.6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc72ye:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Feb/21 8:00 AM;stefanga;Here is a graph that shows then the error was printed in the log and our current rate limit as reported to our check script.

[https://snipboard.io/e6ArEI.jpg]

!https://snipboard.io/e6ArEI.jpg!",,,,,,,,,,
GPG Signing requires a Recalculate Index action on Debian Repositories for the first indexing,RTFACT-24765,127237,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,01/Feb/21 7:00 PM,01/Feb/21 7:02 PM,18/Feb/21 8:59 AM,,6.23.7,,,,,,,,,,,,,,0,,,,,,"*Problem description*:

When you start with an existing Debian Local or Virtual repository with packages and start with GPG signing disabled (The default), enabling GPG signing requires you to recalculate the index to sign the ""Release"" file.

Upload events such as deploying a new package _do_ recalculate the metadata for their relevant coordinates, but unrelated Debian package metadata is not recalculated when signing keys are uploaded.

This is a problem because for large Artifactories that start with no GPG signing, enabling GPG signing requires an Admin to recalculate all of their repository's indexes manually.


*What is the expected behavior?*

Enabling GPG signing triggers a recalculation event or just signs the existing Release file.


*Steps to reproduce:* 

1] Start with an empty Artifactory 6.23, create a debian-local repository

2] Upload a Debian package either manually or via Repository Replication, ensure the Debian coordinates are correct so this initial upload generates a ""debian-local/dists/<component>/Release"" metadata file.

   In my reproduction I used Trusty and Main for the deb.distribution and deb.component.

3] Activate GPG Signing on this Artifactory, and note that just this action alone does not update the existing Release file. There should be a ""Release.gpg"" file with the GPG signature.

4] Upload a new Debian package to a different set of coordinates to confirm GPG signing is working. Note that this upload does generate a Release.gpg file, but for only its coordinates.

   In my reproduction I used Xenial and Main for the deb.distribution and deb.component.

Step 4 shows that automatic indexing still works, and the file it produces is signed. However, Step 3 shows that for existing packages the Release file won't be signed.


*Possible workaround:*

You can recalculate all of the metadata within the repository, or re-replicate the artifacts. However, this can be difficult and time consuming to do if there are many Debian repositories to reindex.

 ",,,,,,,,,,,,,,,,,,,"01/Feb/21 7:02 PM;patrickr;Screen Shot 2021-02-01 at 10.47.20 AM.png;https://www.jfrog.com/jira/secure/attachment/51370/Screen+Shot+2021-02-01+at+10.47.20+AM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc72qe:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
metrics tasks are rejected when concurrency involved,RTFACT-24712,126808,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,shaibz,shaibz,27/Jan/21 12:26 PM,09/Feb/21 6:05 AM,18/Feb/21 8:59 AM,,7.12.5,,,,,,,,,,,,,,0,,,,,,"*Problem description:*
When executing concurrent requests on the metrics API (GET /api/v1/metrics), tasks are being rejected from the queue:

{code:java}
2021-01-27T11:48:02.271Z [jfrt ] [ERROR] [6515d364c677383c] [c.e.m.GlobalExceptionMapper:48] [http-nio-8081-exec-2] - Task java.util.concurrent.FutureTask@625af121[Not completed, task = org.jfrog.metrics.ProviderProcessor@18cec7bf] rejected from java.util.concurrent.ThreadPoolExecutor@7ff475e8[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 6439]
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@625af121[Not completed, task = org.jfrog.metrics.ProviderProcessor@18cec7bf] rejected from java.util.concurrent.ThreadPoolExecutor@7ff475e8[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 6439]
	at java.base/java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2055)
{code}

Seems like for some reason this task requires more than 1 thread and when there are not enough executors we get the reject.

*What is the expected behavior?*
This endpoint should be able to support concurrent requests.

*Steps to reproduce:*
I reproduced with the following environment:
Artifactory machine on GCP with 4 CPU and 16 GB memory on version 7.12.5

1.Enable the metrics collection by adding the following to the Artifactory system.yaml:


{code:java}
artifactory:
       metrics:
           enabled: true
{code}


2. Restart Artifactory
3. Create concurrent requests to  /api/v1/metrics endpoint, I used 'ab' client to do so:

 ab -k -c2 -n1000 -Aadmin:password1 http://myartifactory:8082/artifactory/api/v1/metrics

4. You should be able to see the errors in the artifactory service log.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc707i:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Jan/21 2:55 PM;arielk;
{code:java}
2021-01-27T10:06:35.446Z [jfrt ] [ERROR] [1bc995b3095bd65a] [c.e.m.GlobalExceptionMapper:48] [ttp-nio-8081-exec-71] - Task java.util.concurrent.FutureTask@4a0dea5d[Not completed, task = org.jfrog.metrics.ProviderProcessor@1a9b57d1] rejected from java.util.concurrent.ThreadPoolExecutor@28ab10c1[Running, pool size = 7, active threads = 2, queued tasks = 0, completed tasks = 166]
java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.FutureTask@4a0dea5d[Not completed, task = org.jfrog.metrics.ProviderProcessor@1a9b57d1] rejected from java.util.concurrent.ThreadPoolExecutor@28ab10c1[Running, pool size = 7, active threads = 2, queued tasks = 0, completed tasks = 166]
        at java.base/java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2055)
        at java.base/java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:825)
        at java.base/java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1355)
        at java.base/java.util.concurrent.AbstractExecutorService.invokeAll(AbstractExecutorService.java:242)
        at org.jfrog.metrics.MetricsCollector.collect(MetricsCollector.java:160)
        at org.jfrog.metrics.MetricsCollector.openMetricsAux(MetricsCollector.java:73)
        at org.jfrog.metrics.MetricsCollector.openMetricsCollect(MetricsCollector.java:67)
        at org.artifactory.metrics.framework.MetricsServiceImpl.getOpenMetrics(MetricsServiceImpl.java:252)
        at jdk.internal.reflect.GeneratedMethodAccessor360.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
        at com.sun.proxy.$Proxy315.getOpenMetrics(Unknown Source)
        at org.artifactory.rest.resource.metrics.MetricsAPIResource.getOpenMetrics(MetricsAPIResource.java:34)
        at jdk.internal.reflect.GeneratedMethodAccessor359.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:201)
        at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:103)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.lambda$doFilter$1(ArtifactoryAuthenticationFilterChain.java:145)
        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at org.artifactory.webapp.servlet.authentication.ArtifactoryBasicAuthenticationFilter.doFilter(ArtifactoryBasicAuthenticationFilter.java:103)
        at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.doFilter(ArtifactoryAuthenticationFilterChain.java:183)
        at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:312)
        at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:177)
        at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:127)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:82)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:201)
        at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:103)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.lambda$doFilter$1(ArtifactoryAuthenticationFilterChain.java:145)
        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at org.artifactory.webapp.servlet.authentication.ArtifactoryBasicAuthenticationFilter.doFilter(ArtifactoryBasicAuthenticationFilter.java:103)
        at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.doFilter(ArtifactoryAuthenticationFilterChain.java:183)
        at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:312)
        at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:177)
        at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:127)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:82)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:83)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
        at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
        at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:68)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:32)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:137)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543)
        at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1626)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
        at java.base/java.lang.Thread.run(Thread.java:834)
{code}
Stacktrace:
",,,,,,,,,,
Artifactory can’t serve NPM packages with the yyMMddhhmmss version format.,RTFACT-24703,126668,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,26/Jan/21 6:06 PM,15/Feb/21 3:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"+*_Problem description:_*+

Artifactory can’t serve NPM packages with the yyMMddhhmmss version format.

Npmjs.org is able to serve such packages with this version type.

 

*_+Steps to reproduce+:_*
 # Setup Artifactory with Npm.
 # Create two NPM packages using package.json or you can use npm init
 #  For the first package name the version number 1.0.1
 # For the second package name the version number 1.0.60210125133551
 # Run: npm view <package-name>

 

You will receive package 1.0.1 as latest version.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6zi6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Not possible to delete build info from artifactory-build-info feed,RTFACT-24699,126565,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,volodymyr.gubar,volodymyr.gubar,26/Jan/21 7:41 AM,27/Jan/21 6:24 AM,18/Feb/21 8:59 AM,,6.23.1,,,,,,,,,,,,,,0,,,,,,"It is not possible to remove old build info for build with already removed artifacts (packages from nuget feeds).

If we are trying to remove build info from UI we are having an error: Binary provider has no content for 'e59fa35480a55048d20d13d3cadb598c266e4cea'.

Steps to reproduce:
 * build service and upload build info + packages to artifactory
 * remove packages
 * clean Trash can
 * try to remove build info from artifactory-build-info feed

Error inside system.log: 
{code:java}
2021-01-26 07:34:38,502 [http-nio-8081-exec-36242] [WARN ] (o.a.s.f.l.SessionLockEntry:132) - Mutable item 'artifactory-build-info:3rdPartyEventPublishing %3A%3A Build, Test, Package/100-1488368654623.json' has local modifications that will be discarded.2021-01-26 07:34:38,502 [http-nio-8081-exec-36242] [WARN ] (o.a.s.f.l.SessionLockEntry:132) - Mutable item 'artifactory-build-info:3rdPartyEventPublishing %3A%3A Build, Test, Package/100-1488368654623.json' has local modifications that will be discarded.2021-01-26 07:34:38,503 [http-nio-8081-exec-36242] [WARN ] (o.a.s.f.l.SessionLockEntry:132) - Mutable item 'auto-trashcan:artifactory-build-info/3rdPartyEventPublishing %3A%3A Build, Test, Package' has local modifications that will be discarded.2021-01-26 07:34:38,505 [http-nio-8081-exec-36242] [WARN ] (o.a.s.f.l.SessionLockEntry:132) - Mutable item 'auto-trashcan:artifactory-build-info/3rdPartyEventPublishing %3A%3A Build, Test, Package/100-1488368654623.json' has local modifications that will be discarded.2021-01-26 07:34:38,508 [http-nio-8081-exec-36242] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Binary provider has no content for 'e59fa35480a55048d20d13d3cadb598c266e4cea'org.jfrog.storage.binstore.exceptions.BinaryNotFoundException: Binary provider has no content for 'e59fa35480a55048d20d13d3cadb598c266e4cea' at org.jfrog.storage.binstore.providers.EmptyBinaryProvider.getStream(EmptyBinaryProvider.java:62) at org.jfrog.storage.binstore.providers.FileBinaryProviderReadOnlyBase.getStream(FileBinaryProviderReadOnlyBase.java:146) at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.getBinary(BinaryServiceImpl.java:429) at sun.reflect.GeneratedMethodAccessor291.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205) at com.sun.proxy.$Proxy200.getBinary(Unknown Source) at org.artifactory.storage.db.fs.model.DbMutableFile.getStream(DbMutableFile.java:288) at org.artifactory.repo.db.DbLocalRepo.getFileContent(DbLocalRepo.java:203) at org.artifactory.repo.service.RepositoryServiceImpl.getResourceStreamHandle(RepositoryServiceImpl.java:764) at sun.reflect.GeneratedMethodAccessor636.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205) at com.sun.proxy.$Proxy177.getResourceStreamHandle(Unknown Source) at org.artifactory.build.BuildServiceImpl.getBuildModelFromFile(BuildServiceImpl.java:541) at sun.reflect.GeneratedMethodAccessor895.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205) at com.sun.proxy.$Proxy212.getBuildModelFromFile(Unknown Source) at org.artifactory.repo.interceptor.BuildInfoInterceptor.afterDelete(BuildInfoInterceptor.java:116) at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterDelete(StorageInterceptorsImpl.java:112) at sun.reflect.GeneratedMethodAccessor961.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205) at com.sun.proxy.$Proxy187.afterDelete(Unknown Source) at org.artifactory.storage.db.fs.model.DbMutableItem.fireAfterDeleteEvent(DbMutableItem.java:370) at org.artifactory.storage.db.fs.model.DbMutableFile.delete(DbMutableFile.java:214) at org.artifactory.repo.db.DbStoringRepoMixin.undeploy(DbStoringRepoMixin.java:728) at org.artifactory.repo.db.DbLocalRepo.undeploy(DbLocalRepo.java:212) at org.artifactory.repo.service.RepositoryServiceImpl.undeployInTx(RepositoryServiceImpl.java:1441) at sun.reflect.GeneratedMethodAccessor1187.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) at com.sun.proxy.$Proxy177.undeployInTx(Unknown Source) at org.artifactory.repo.service.RepositoryServiceImpl.deleteSingleLeaf(RepositoryServiceImpl.java:1433) at org.artifactory.repo.service.RepositoryServiceImpl.undeploySingleItemTransactions(RepositoryServiceImpl.java:1418) at org.artifactory.repo.service.RepositoryServiceImpl.undeployMultiTransaction(RepositoryServiceImpl.java:1386) at org.artifactory.repo.service.RepositoryServiceImpl.undeployMultiTransaction(RepositoryServiceImpl.java:189) at sun.reflect.GeneratedMethodAccessor1325.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) at com.sun.proxy.$Proxy177.undeployMultiTransaction(Unknown Source) at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.actions.DeleteArtifactService.deleteArtifact(DeleteArtifactService.java:79) at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.actions.DeleteArtifactService.execute(DeleteArtifactService.java:53) at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38) at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92) at org.artifactory.ui.rest.resource.artifacts.browse.treebrowser.actions.ArtifactActionsResource.deleteArtifact(ArtifactActionsResource.java:127) at sun.reflect.GeneratedMethodAccessor1334.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191) at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103) at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268) at org.glassfish.jersey.internal.Errors.process(Errors.java:316) at org.glassfish.jersey.internal.Errors.process(Errors.java:298) at org.glassfish.jersey.internal.Errors.process(Errors.java:268) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703) at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195) at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.AccessFilter.useAuthenticationAndContinue(AccessFilter.java:346) at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:156) at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:105) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164) at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.lang.Thread.run(Thread.java:748)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6yxq:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Jan/21 6:24 AM;volodymyr.gubar;Is this possible to workaround this error? Cleanup DB by script or something like that? We are having more than 30000 of such records and it would be great to remove them ",,,,,,,,,,
local repositories not showing unless type is generic in admin console,RTFACT-24684,126336,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jerry.howe,jerry.howe,22/Jan/21 4:27 PM,25/Jan/21 8:37 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"I have recently discovered that I cannot see any of my ""Local Repositories"" under Repositories > Repositories in the admin console. The only ones that show are repositories with 'generic' type. I can still find my gradle typed Local Repositories if I go to Repositories > Layouts > gradle-default.

I cannot delete any of my non-generic repos, because they are not listed under the Local Repository section ([https://[artifactory-hostname]/ui/admin/repositories/local).]

Is there a setting that can make them visible that I am missing?",This occurence is the same in CentOS 8 and OSX 11.0.1 with darwin installation,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6xmm:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
/api/helm endpoint fails intermittently with 204 No Content,RTFACT-24682,126325,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,22/Jan/21 1:07 AM,09/Feb/21 6:30 AM,18/Feb/21 8:59 AM,,6.23.7,7.10.2,,,,,,Helm,,,,,,,0,P1,,,,,"*Problem description*:

An internal Artifactory error can cause the instance to return a *204 No Content* reply for a request to download a Helm Chart tarball using ""/api/helm"". Instead, the system should return the correct return code related to the problem.

For example, a Remote Helm Repository pointed at a broken URL will cause Artifactory to produce a 204 No Content reply, not a 404 Not Found error.

For another example, under high load an internal Artifactory error will produce the same 204 No Content rather than a 503 or 500 error.

*What is the expected behavior?*

Artifactory replies with the correct return code when serving download requests through */api/helm* endpoints. Failures need to be forwarded to the client so they can be handled properly.

*Steps to reproduce:* 

+Easy method:+

1] Install and configure Artifactory 6.23.7

2] Use the Quick Setup option to create the default Helm repositories: A local, remote going to +storage.googleapis.com/kubernetes-charts+, and a virtual

3] Manually attempt to download a package through the virtual on /api/helm:

curl -u admin -v [http://artifactory.com:8082/artifactory/api/helm/helm/airflow-7.8.0.tgz|http://artifactory.com:8082/artifactory/*api/helm/helm/airflow-7.8.0.tgz*]
 [... ]
 < HTTP/1.1 204 No Content
 < Server: Artifactory/6.23.7
 < X-Artifactory-Id: 490c7d202e2b4153:6b385bbc:177277f7050:-8000
 < Date: Fri, 22 Jan 2021 00:57:30 GMT

20210122005730|309|REQUEST|52.9.243.19|admin|GET|/api/helm/helm/airflow-7.8.0.tgz|HTTP/1.1|*204*|0

 

Internally, it looks like Artifactory gets an error from the remote site, but instead of a *404 Not Found* it produces a *204 No Content*:

#7.X debug logs from earlier reproduction attempt

2021-01-20T19:36:29.845Z [jfrt ] [DEBUG] [655685e68c3191a2] [o.a.h.i.e.MainClientExec:234  ] [http-nio-8081-exec-4] - Opening connection \{s}->[https://storage.googleapis.com:443|https://storage.googleapis.com/]

2021-01-20T19:36:29.945Z [jfrt ] [DEBUG] [655685e68c3191a2] [o.a.h.headers:133             ] [http-nio-8081-exec-4] - http-outgoing-70683 >> GET /kubernetes-charts/airflow-7.8.0.tgz HTTP/1.1

2021-01-20T19:36:30.044Z [jfrt ] [DEBUG] [655685e68c3191a2] [o.a.h.wire:87                 ] [http-nio-8081-exec-4] - http-outgoing-70683 << ""
 *<?xml version=""1.0"" encoding=""UTF-8""?>*
 *<Error>*
    *<Code>AccessDenied</Code>*
    *<Message>Access denied.</Message>*
    *<Details>Anonymous caller does not have storage.objects.get access to the Google Cloud Storage object.</Details>*
 *</Error>*
 *""*

+Hard method (Scaling issue):+

This problem also happens with local repositories. The issue is that sometimes at scale and heavy loads, Artifactory fails to get the file internally. This also produces a 204 No Content issue, but is harder to reproduce:

1] Install an Artifactory 6.23.7 HA cluster

2] Set up a Local Helm Repository and a Virtual Helm Repository

3] Upload *10,000 Helm Charts* to the Local Helm Repository

4] Request random Helm packages through the Helm API at a rate of around 500 requests each second

5] Intermittently, get a 204 No Content on valid local packages:

2021-01-21 16:55:44 |239|REQUEST|127.0.0.1|admin|GET|/api/helm/helm/test-chart-643-1.0.0.tgz|HTTP/1.1|*204*|0

2021-01-21 16:59:18 |347|REQUEST|127.0.0.1|admin|GET|/api/helm/helm/test-chart-19-7.0.0.tgz|HTTP/1.1|*204*|0

 

It looks like the root cause of both errors is the same: An internal Artifactory issue causes the download to fail, but rather than produce the right return code the system replies with an empty 204 No Content message. This causes the Helm client to fail with an odd message.

We need to return the right HTTP code based on the situation.

*Possible workaround:*

Set up a reverse proxy to remove the ""api/helm"" from the request URL. This works because the direct file download does not face this issue. Only api/helm paths seem to face it.",,,,,,,,,,,,,,,,,,,"22/Jan/21 1:17 AM;patrickr;helm-chart-creation-engine.zip;https://www.jfrog.com/jira/secure/attachment/51049/helm-chart-creation-engine.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6xkm:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Jan/21 1:18 AM;patrickr;The ""helm-chart-creation-engine.zip"" file contains a script and the necessary files to produce massive amounts of fake helm charts, for testing purposes",,,,,,,,,,
Import of packages under a folder with name in lower case fails when there is another folder with the same name in upper case ,RTFACT-24681,126324,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,22/Jan/21 12:46 AM,25/Jan/21 3:37 PM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,Import/export,,,,,,,0,,,,,,"On performing an import of folder with a lower case name, on a local maven repository to a path which has a folder with the same name but in upper case, all the packages are imported into the uppercase name folder. 

Here's an example:

We have a maven repository that has a folder internal/COM and when we try to perform an import from the path which has folder internal/com (lower case) all the files are imported to the folder COM. And this is not the desired behavior.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6xke:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"When the 'Disable Internal Password' is checked with a JIRA Crowd user, API keys cannot be generated",RTFACT-24680,126319,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,glianeri,glianeri,21/Jan/21 11:37 PM,21/Jan/21 11:40 PM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,,,,,,,,1,,,,,,"Check the 'Disable Internal Password' for a Jira Crowd user

Log in as this user.  Notice that when going to 'Edit Profile' an incorrect password pop-up shows up if 'Generate API Key' is clicked.

Likewise, there is no provision to generate an encrypted password nor does 'Set me up' provide an encrypted password string for maven's settings.xml.","RedHat OS

Apache reverse-proxy

Jira Crowd is used for authentication and group synchronization.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6xja:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
RPM remote repository download does not work if path contains /../,RTFACT-24668,126195,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sophiet,sophiet,20/Jan/21 8:25 PM,10/Feb/21 1:26 AM,18/Feb/21 8:59 AM,,7.11.5,,,,,,,,,,,,,,0,,,,,,"RPM remote repository is unable to download rpm packages if the remote URL contains /../ in the path.  During the yum install libpcap command, Artifactory returns a 400 error due to a bad request.  The request is not logged in Artifactory and adding HTTP debug logger does not provide any additional information.  A curl command of the download URL hints that this could be an issue with Apache Tomcat not accepting URLs with /../ in the path since the curl command returns HTML text.

This issue is related to RTFACT-9141, but the recommend workaround to add a plugin does not resolve this issue.

My test instance was Artifactory version 7.11.5 which is bundled with Tomcat 8.5.57.
{code:java}
[root@sophiet-rpm yum.repos.d]# yum install libpcap
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
Resolving Dependencies
--> Running transaction check
---> Package libpcap.x86_64 14:1.5.3-11.amzn2 will be installed
--> Finished Dependency Resolution

Dependencies Resolved
======================================================================================================================================= 
Package                      Arch                        Version                                  Repository                     Size
=======================================================================================================================================
Installing: 
libpcap                      x86_64                      14:1.5.3-11.amzn2                        rpm-test                      140 k
Transaction Summary
=======================================================================================================================================
Install  1 Package

Total download size: 140 k
Installed size: 317 k
Is this ok [y/d/N]: y

Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.libpcap-1.5.3-11.amzn2.x86_64. FAILED
http://admin:<password>@10.150.0.188:8081/artifactory/rpm-test/../../../../../blobstore/e6562f8ead42e6d7cbe3a759c4c19cb426f35d97f67e4ef00fe7de2477d13213/libpcap-1.5.3-11.amzn2.x86_64.rpm: [Errno 14] HTTP Error 400 - Bad Request
Trying other mirror.

Error downloading packages:  14:libpcap-1.5.3-11.amzn2.x86_64: [Errno 256] No more mirrors to try.
{code}
 
{code:java}
[root@sophiet-rpm sophiet]# curl -vv http://admin:<password>@10.150.0.188:8081/artifactory/rpm-test/../../../../../blobstore/e6562f8ead42e6d7cbe3a759c4c19cb426f35d97f67e4ef00fe7de2477d13213/libpcap-1.5.3-11.amzn2.x86_64.rpm
* About to connect() to 10.150.0.188 port 8081 (#0)
*   Trying 10.150.0.188...
* Connected to 10.150.0.188 (10.150.0.188) port 8081 (#0)* Server auth using Basic with user 'admin'
> GET 
/artifactory/rpm-test/../../../../../blobstore/e6562f8ead42e6d7cbe3a759c4c19cb426f35d97f67e4ef00fe7de2477d13213/libpcap-1.5.3-11.amzn2.x86_64.rpm HTTP/1.1
> Authorization: Basic YWRtaW46UGFzc3dvcmQx
> User-Agent: curl/7.29.0> Host: 10.150.0.188:8081
> Accept: */*
>
< HTTP/1.1 400 Bad Request
< Content-Type: text/html;charset=utf-8
< Content-Language: en< Content-Length: 435
< Date: Wed, 20 Jan 2021 19:46:13 GMT
< Connection: close
<* Closing connection 0
<!doctype html><html lang=""en""><head><title>HTTP Status 400 – Bad Request</title><style type=""text/css"">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 400 – Bad Request</h1></body></html>
{code}
To reproduce:
1. Create a remote repository with the remote url: [http://amazonlinux.us-east-1.amazonaws.com/2/core/2.0/x86_64/88e5786c0ad4de177c13bf7611ef1c68a2b6193848a923e5965320f390d1c948] (note that you will not be able to access this repository in the UI, but you can access the repomd.xml file)  This will return the repomd.xml file: curl http://<artifactory_url>:8082/artifactory/<remote-repo>/repodata/repodo.xml -u admin:password
2. Create the necessary .repo file
3. Attempt to download a package (libpcap), as such:
{noformat}
yum install libpcap{noformat}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6wty:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Feb/21 1:21 AM;sophiet;Workaround for this issue:

1] Set the remote URL to just go the base "".com"", leave the folders unspecified:
 [http://amazonlinux.us-east-1.amazonaws.com/]
 !https://jfrog--c.documentforce.com/sfc/servlet.shepherd/version/download/0686900000QcH3f?asPdf=false&operationContext=CHATTER!

2] Install this version of the plugin, it'll work on all repositories which should be fine:
  
 import org.artifactory.repo.RepoPath
 import org.artifactory.repo.RepoPathFactory
 import org.artifactory.request.Request
  
 download {
  
   beforeDownloadRequest { Request request, RepoPath path ->
     if ((path.toString().contains(""..""))){ // path cannot be null
       log.info(""Detected original request path which contains double dots in it: "" + path.toString() + "". Trying to fix it..."")
       try

{         def newPath = path.getPath()         // Removing .. from the path         newPath = newPath.substring(path.getPath().lastIndexOf(""../"") + 3)         log.info(""The original path: "" + path.getPath() + "" was modified to: "" + newPath)         // Setting modifiedRepoPath forces Artifactory to cache the file using the new modified path         modifiedRepoPath = RepoPathFactory.create(path.repoKey, newPath)       }

catch (Exception e)

{         log.warn(""Unable to override path: "" + e.getMessage())       }

    }
   }
 }
  
 3] Update the yum repo config going to the ""repodata"" folder:
 [rpm-test]
 name=rpm-test
 baseurl=[http://localhost/artifactory/rpm-test/2/core/2.0/x86_64/34112b4f91c3e1ecf2b2e90cfd565b12690fa3c6a3e71a5ac19029d2a9bd3869|http://localhost/artifactory/rpm-test*/2/core/2.0/x86_64/34112b4f91c3e1ecf2b2e90cfd565b12690fa3c6a3e71a5ac19029d2a9bd3869*]
 enabled=1
 gpgcheck=0
  
 4] Perform a yum install libpcap command

[root@sophiet-rpm yum.repos.d]# yum install libpcap
 Loaded plugins: fastestmirror
 Loading mirror speeds from cached hostfile
 rpm-test                                                                                                        | 3.7 kB  00:00:00
 Resolving Dependencies
 --> Running transaction check
 ---> Package libpcap.x86_64 14:1.5.3-11.amzn2 will be installed
 --> Finished Dependency Resolution

Dependencies Resolved

=======================================================================================================================================
  Package                      Arch                        Version                                  Repository                     Size
 =======================================================================================================================================
 Installing:
  libpcap                      x86_64                      14:1.5.3-11.amzn2                        rpm-test                      140 k

Transaction Summary
 =======================================================================================================================================
 Install  1 Package

Total download size: 140 k
 Installed size: 317 k
 Is this ok [y/d/N]: y
 Downloading packages:
 Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
 libpcap-1.5.3-11.amzn2.x86_64.rpm                                                                               | 140 kB  00:00:00
 Running transaction check
 Running transaction test
 Transaction test succeeded
 Running transaction
   Installing : 14:libpcap-1.5.3-11.amzn2.x86_64                                                                                    1/1
   Verifying  : 14:libpcap-1.5.3-11.amzn2.x86_64                                                                                    1/1

Installed:
   libpcap.x86_64 14:1.5.3-11.amzn2

Complete!

Or run a curl command to download the rpm package:
  
curl http://localhost/artifactory/rpmtest/2/core/2.0/x86_64/88e5786c0ad4de177c13bf7611ef1c68a2b6193848a923e5965320f390d1c948/../../../../../blobstore/b8cd88deba82ed0657d5c64bba64cf42cb97b21937810c125622e556e6f64040/glibc-headers-2.26-36.amzn2.x86_64.rpm -vv -uadmin:password --path-as-is -o rpm-test.rpm",,,,,,,,,,
"Support for PyPI registry ""https://www.piwheels.org""",RTFACT-24657,126086,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,pavang,pavang,20/Jan/21 1:33 AM,09/Feb/21 6:39 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"*+Issue Description+:* 

Unable to install PyPI packages from PyPI registry URL [https://www.piwheels.org|https://www.piwheels.org/] even though the registry uses a simple index [https://www.piwheels.org/simple] which is supported by Artifactory.

 Also, while downloading PyPI packages from the Artifactory UI which throws a 404 error, please find below for the same:

!browser.jpg!

Please note when I configured the client with the direct registry(https://www.piwheels.org) I am able to successfully install the packages.

 *+Steps to reproduce+*:

 -> Create a PyPI remote repository with registry URL as [https://www.piwheels.org|https://www.piwheels.org/]

!repo-config.jpg|width=364,height=163!

 -> Configure the pip client to resolve via Artifactory and try to install any package which will retrieve 404 error even though the package exists at the remote end. Please find the below screenshot for reference. I have attached the PyPI debug log snippet to the Jira.

!client.jpg|width=1189,height=131!

*+Expected Behaviour+:*

We should be able to proxy this URL and can install the PyPi packages from this registry through Artifactory.",,,,,,,,,,,,,,,,,,,"20/Jan/21 1:39 AM;pavang;browser.jpg;https://www.jfrog.com/jira/secure/attachment/50962/browser.jpg","20/Jan/21 1:36 AM;pavang;client.jpg;https://www.jfrog.com/jira/secure/attachment/50960/client.jpg","20/Jan/21 1:38 AM;pavang;repo-config.jpg;https://www.jfrog.com/jira/secure/attachment/50961/repo-config.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6w7i:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM dist-tag behaviour when client is configured with virtual repository,RTFACT-24655,126084,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,20/Jan/21 12:49 AM,09/Feb/21 6:41 AM,18/Feb/21 8:59 AM,,7.12.5,7.5.7,,,,,,NPM,,,,,,,1,,,,,,"+Issue description+: 

Executing npm dist-tag ls <package-name> command on NPM virtual repository(which has local and remote) we see a version of the package which is marked at the registry end is getting retrieved even though if we mark the same dist-tag with a different version in the local repository. Please find below for complete steps to replicate the behavior. 

 Currently, in the virtual repository we first merge the local tags and then the remote tags. In the described behavior we override existing tags in case the tag key already exists.

 

+Steps to reproduce+:

 -> Create NPM repositories using Quick Setup from Artifactory UI

 -> Configure npm client with above created Artifactory NPM repository

 -> Installed eslint package using the below command:     
{code:java}
 > npm install eslint --registry http://<Artifactory-URL>/artifactory/api/npm/npm/
{code}
  -> By default(at remote registry) package eslint has v7.0.0-rc.0 as the next tag.
{code:java}
> npm dist-tag ls eslint
es6jsx: 0.11.0-alpha.0
latest: 7.17.0
next: 7.0.0-rc.0
{code}
 -> Now, copy the package to the local repository and tag v7.17.0 as next
{code:java}
> npm dist-tag add eslint@7.17.0 next
+next: eslint@7.17.0
{code}
 As I have marked the dist tag next to v7.17.0 in the local repository when executed dist-tag ls on the virtual repository which is an aggregation of local + remote repository I see v7.0.0-rc.0 is showing as the next tag. Please find below the output for your reference.
{code:java}
> npm dist-tag ls eslint:
es6jsx: 0.11.0-alpha.0
latest: 7.17.0
next: 7.0.0-rc.0
{code}
 However, when I perform the same on virtual with local only(by excluding remote repository) I see the output as below:
{code:java}
> npm dist-tag ls eslint:
es6jsx: 0.11.0-alpha.0
latest: 7.17.0
next: 7.17.0
{code}
 

 

This will affect when the customer is trying to install a package (when NPM client configured with the virtual repository) using dist-tag, as we see package v7.0.0-rc.0 installed even though he has marked v7.17.0 in the local repository.
{code:java}
> npm install eslint@next
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/arcgis-rest-auth@^2.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/arcgis-rest-feature-layer@^2.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/arcgis-rest-geocoding@^2.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/arcgis-rest-portal@^2.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/arcgis-rest-request@^2.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/arcgis-rest-types@^2.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/hub-common@^6.4.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/hub-downloads@^6.4.0 but none is installed. You must install peer dependencies yourself.
npm WARN @esri/hub-components@1.0.1 requires a peer of @esri/hub-events@^6.4.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-config-prettier@6.11.0 requires a peer of eslint@>=3.14.1 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-config-xo@0.27.2 requires a peer of eslint@>=6.4.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-ava@9.0.0 requires a peer of eslint@>=6.2.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-es@2.0.0 requires a peer of eslint@>=4.19.1 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-eslint-comments@3.2.0 requires a peer of eslint@>=4.19.1 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-import@2.22.0 requires a peer of eslint@^2 || ^3 || ^4 || ^5 || ^6 || ^7.2.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-node@10.0.0 requires a peer of eslint@>=5.16.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-prettier@3.1.4 requires a peer of eslint@>=5.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-plugin-unicorn@12.1.0 requires a peer of eslint@>=6.3.0 but none is installed. You must install peer dependencies yourself.
npm WARN eslint-template-visitor@1.1.0 requires a peer of eslint@^6.4.0 but none is installed. You must install peer dependencies yourself.
+ eslint@7.0.0-rc.0
added 5 packages from 3 contributors, removed 19 packages, updated 7 packages and audited 1247 packages in 11.43s
48 packages are looking for funding
  run `npm fund` for details
found 58 low severity vulnerabilities
  run `npm audit fix` to fix them, or `npm audit` for details
{code}
 

 

+Expected behavior+: Package version tagged at local repository should get retrieved when executed npm dist-tag ls <package-name> against the virtual repository which has local + remote.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6w72:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Failed upgrade from 6.16.0 to 7.12.6,RTFACT-24654,126032,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,climblinne,climblinne,19/Jan/21 1:24 PM,19/Jan/21 1:27 PM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,Artifactory,Database,Upgrade,,,,,0,upgrade,,,,,"Hello,

 

we tried now a second time to update our Artifactory Pro to version 7.x and failed a second time. We would need some help with it:

 

 

The used (converted) system.yaml with updated password:

 

 
{code:java}
shared:
    database:
        type: mariadb
        driver: org.mariadb.jdbc.Driver
        url: jdbc:mariadb://localhost:3306/artdb?characterEncoding=UTF-8
        username: artifactory
        password: <updated password>
    tomcat:
        connector:
            extra: <Connector port=""8019"" protocol=""AJP/1.3"" sendReasonPhrase=""true""/>
access:
    http:
        port: 8040
    tomcat:
        connector:
            maxThreads: 50
            sendReasonPhrase: true
artifactory:
    port: 8084
    tomcat:
        connector:
            maxThreads: 200
            sendReasonPhrase: true
            relaxedPathChars: '""[]""'
            relaxedQueryChars: '""[]""'
{code}
 

 

 

 

*The main error seems to be the following:*

 

2021-01-15T08:46:05:84Z [INFO ] [artifactory.bat ] [main]- Starting event

Starting service event from D:\jfrog\artifactory\app\event\bin\jf-event.exe

 

2021-01-15T08:46:06:84Z [INFO ] [artifactory.bat ] [main]- Starting metadata

Starting service metadata from D:\jfrog\artifactory\app\metadata\bin\jf-metadata.exe

 

2021-01-15T08:46:06:84Z [INFO ] [artifactory.bat ] [main]- Replicator is disabled, replicator is not started

2021-01-15T08:46:06:84Z [INFO ] [artifactory.bat ] [main]- Starting frontend

{color:#de350b}panic: Could not execute database migrations Error 1932: Table 'artdb.md_database_migrations' doesn't exist in engine{color}

goroutine 1 [running]:      {color:#de350b}           {color}                                                                                 runtime/debug.Stack(0x10, 0x10, 0xc0000bab20)

        C:/jenkins/tools/org.jenkinsci.plugins.golang.GolangInstallation/go-1.15/src/runtime/debug/stack.go:24 +0xa5

jfrog.com/jfrog-go-commons/v7/pkg/log.(*standardLogger).Panicfc(0xc00055c070, 0x1fec26a18b8, 0xc000572080, 0x151eec0, 0x29, 0xc0000bab20, 0x1, 0x1)

        [goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:42|mailto:goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:42] +0x73

jfrog.com/metadata/v7/application.initializeInfra(0x17b2340, 0xc000572080, 0x17aba20, 0xc00055c070)

       [jfrog.com/metadata/v7@v7.12.4/application/application.go:86|mailto:jfrog.com/metadata/v7@v7.12.4/application/application.go:86] +0x222                                              jfrog.com/metadata/v7/application.InitializeInfrastructure(0x17b2340, 0xc000572080, 0x17a8a01)

        [jfrog.com/metadata/v7@v7.12.4/application/application.go:59|mailto:jfrog.com/metadata/v7@v7.12.4/application/application.go:59] +0x185

main.main()

        [jfrog.com/metadata/v7@v7.12.4/metadata.go:41|mailto:jfrog.com/metadata/v7@v7.12.4/metadata.go:41] +0x716

 

 

goroutine 1 [running]:

github.com/rs/zerolog.(*Logger).Panic.func1(0xc00013ec00, 0x3a1)

        [goroot/pkg/mod/github.com/rs/zerolog@v1.18.0/log.go:338|mailto:goroot/pkg/mod/github.com/rs/zerolog@v1.18.0/log.go:338] +0x56

github.com/rs/zerolog.(*Event).msg(0xc00055a060, 0xc00013ec00, 0x3a1)

        [goroot/pkg/mod/github.com/rs/zerolog@v1.18.0/event.go:146|mailto:goroot/pkg/mod/github.com/rs/zerolog@v1.18.0/event.go:146] +0x211

github.com/rs/zerolog.(*Event).Msgf(0xc00055a060, 0xc000ca11d0, 0x2c, 0xc000863280, 0x2, 0x2)

        [goroot/pkg/mod/github.com/rs/zerolog@v1.18.0/event.go:126|mailto:goroot/pkg/mod/github.com/rs/zerolog@v1.18.0/event.go:126] +0x8a

jfrog.com/jfrog-go-commons/v7/pkg/log.(*standardLogger).logMessage(0xc00055c070, 0x1fec26a18b8, 0xc000572080, 0xc00055a060, 0xc000ca11d0, 0x2c, 0xc000863280, 0x2, 0x2)

        [goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:61|mailto:goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:61] +0x1a5

jfrog.com/jfrog-go-commons/v7/pkg/log.(*standardLogger).Panicfc(0xc00055c070, 0x1fec26a18b8, 0xc000572080, 0x151eec0, 0x29, 0xc000863280, 0x2, 0x2)                                                                                                     [goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:43|mailto:goroot/pkg/mod/jfrog.com/jfrog-go-commons/v7@v7.13.0-m001/pkg/log/standard_logger.go:43] +0x1de

jfrog.com/metadata/v7/application.initializeInfra(0x17b2340, 0xc000572080, 0x17aba20, 0xc00055c070)

        [jfrog.com/metadata/v7@v7.12.4/application/application.go:86|mailto:jfrog.com/metadata/v7@v7.12.4/application/application.go:86] +0x222                                              jfrog.com/metadata/v7/application.InitializeInfrastructure(0x17b2340, 0xc000572080, 0x17a8a01)

        [jfrog.com/metadata/v7@v7.12.4/application/application.go:59|mailto:jfrog.com/metadata/v7@v7.12.4/application/application.go:59] +0x185

main.main()

        [jfrog.com/metadata/v7@v7.12.4/metadata.go:41|mailto:jfrog.com/metadata/v7@v7.12.4/metadata.go:41] +0x716

Starting service frontend from ""D:\jfrog\artifactory\app\third-party\node\node.exe"" D:\jfrog\artifactory\app\frontend\bin\\server\dist\bundle.js

 

 

 

 

*A secondary error* seems to be the “extra: <Connector port=""8019"" protocol=""AJP/1.3"" sendReasonPhrase=""true""/>”.

When I remove it including all “sendReasonPhrase”, it starts up. See attached logfile.

 

Please tell me, when you need additional informations.

 

Best regards","OS: Windows Server 2016 Standard

Artifactory old: 6.16.0

Artifactory new: 7.12.6

 

Database: MariaDB 10.3 (with connector mariadb-java-client-2.3.0.jar)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6vvq:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NullPointerException for remote npm repo,RTFACT-24639,125814,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,krische,krische,16/Jan/21 9:03 PM,16/Jan/21 9:06 PM,18/Feb/21 8:59 AM,,7.12.6,,,,,,,NPM,,,,,,,0,,,,,,"I am running the latest version of Artifactory (7.12.6) and I have created a remote repository of an NPM repository from an older Artifactory server (6.5.9). When I attempt an {{npm install}} of a package from this remote repository, I receive a 500 error. The only thing I can think of that may be a possible issue is that the older Artifactory server (6.5.9) that the newer Artifactory server is caching, uses what I'm guessing is an older npm layout. The layout of packages in the older server looks like this:
 * npm-repo
 ** @scope
 *** package_version.tgz

Whereas I noticed that newer NPM repos have the following layout:
 * npm-repo
 ** @scope
 *** package
 **** -
 ***** @scope
 ****** package-version.tgz

The error I receive from the {{npm install}} command is:
{noformat}
npm ERR! 500 Internal Server Error - GET https://artifactory/artifactory/api/npm/npm-repo/@scope/package/-/
{noformat}
And if I look in the Artifactory service log, I see the following error:
{noformat}
2021-01-16T20:14:35.810Z [jfrt ] [ERROR] [b1eb28dd606d72a6] [c.e.m.GlobalExceptionMapper:48] [http-nio-8081-exec-4] - null
java.lang.NullPointerException: null
	at org.artifactory.addon.npm.repo.NpmRemoteRepoHandler.replaceTarballUrl(NpmRemoteRepoHandler.java:417)
	at org.artifactory.addon.npm.repo.NpmRemoteRepoHandler.getVersionMetadata(NpmRemoteRepoHandler.java:223)
	at org.artifactory.addon.npm.repo.merge.NpmVersionMetadataMerger.merge(NpmVersionMetadataMerger.java:74)
	at org.artifactory.addon.npm.repo.merge.NpmMetadataMerger.getMergedResult(NpmMetadataMerger.java:72)
	at org.artifactory.addon.npm.repo.NpmVirtualRepoHandler.getVersionMetadata(NpmVirtualRepoHandler.java:83)
	at org.jfrog.repomd.npm.rest.NpmSubResource.packageVersion(NpmSubResource.java:107)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:201)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:103)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:530)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:394)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:258)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:201)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:82)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:83)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:68)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:32)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:137)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:239)
	at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1626)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
{noformat}","Operating System: CentOS 7.8.2003

Artifactory Version: 7.12.6",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6umu:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Internal process download effect statistics.,RTFACT-24631,125711,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,ohadl,ohadl,14/Jan/21 11:51 AM,09/Feb/21 6:46 AM,18/Feb/21 8:59 AM,,7.10.2,,,,,,,,,,,,,,0,,,,,,"Internal processes that download packages from Artifactory are counted in the statistics. 

For example, below we can see that Xray indexer has downloaded packages from Artifactory.

 

Created: 2020-12-02 04:08:59 -0600

Last Modified: 2020-12-02 04:08:33 -0600

Downloads: 1

Last Downloaded By: token:jfxidx@01eegt36bnw5ct740j2qvxjymp

Last Downloaded: 2020-12-02 04:09:08 -0600",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6u12:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Pypi packages without PKG_INFO or Metadata can not be served from Artifactory. ,RTFACT-24630,125702,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,14/Jan/21 10:48 AM,09/Feb/21 6:47 AM,18/Feb/21 8:59 AM,,7.12.5,,,,,,,,,,,,,,0,,,,,,"Some Pypi packages do not include PKG_INFO or METADATA files.

When such a package exists Artifactory will not index the package.

However Pip client is able to resolve such packages from remote (Artifactory Pypi remote or by bypassing ).

Steps to reproduce 
 # Setup Artifactory with Pypi repositories.
 # Deploy the below two packages 

         I was able to reproduce this issue with the below two packages.

[         https://pypi.org/project/conda/3.5.0/|https://pypi.org/project/conda/3.5.0/]

[          https://pypi.org/project/conda/3.0.6/|https://pypi.org/project/conda/3.0.6/]

Configure Pip client with Artifactory Pypi virtual (which has both local and remote) and install the above packages. Noticed the packages are getting pulled from remote even when they are present in the local.
 Also the packages in the local repository are missing the properties that get attached to a Pypi package after the index process.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6tz2:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Helm does not cache smart remote entries,RTFACT-24627,125654,Bug,In Progress,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,nadavy,nadavy,13/Jan/21 5:59 PM,10/Feb/21 8:45 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,Helm,,,,,"When downloading the index.yaml from a virtual repository pointing to [http://some/artifactory/helm-virtual,] the entries will start with [http://some/artifactory/api/helm/helm/virtual/...] and will not get replaced in a smart remote repository unless the api/helm/virtual is added as the charts base url.  


reproduction:
2 instances. art_1 and art_2.
create the following repositories:
 * in art_1: local, virtual
 * in art_2: remote to art_1_virtual, virtual

deploy a chart to art_1_local.

download the index.yaml of art_2_virtual.

expected:
art_2virtual/index.yaml - URLs will have links starting with art_2_virtual/api/helm/virtual

actual:
art_2_virtual/index.yaml - URLs are links starting with art_1_virtual/api/helm/virtual

Workaround
 set the charts base URL with the api/helm/repoKey",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6tom:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
maven-metadata.xml shows version '20030203.000550' as the latest for commons-io jars ,RTFACT-24621,125627,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sowmya-parsi,sowmya-parsi,13/Jan/21 1:56 PM,13/Jan/21 2:02 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Intermittently maven-metadata.xml shows wrong version '20030203.000550' as the latest for commons-io jars which is very old and is affecting usage as transitive dependencies looking for latest jar is downloading this version.

 

<?xml version=""1.0"" encoding=""UTF-8""?><?xml version=""1.0"" encoding=""UTF-8""?><metadata> 

<groupId>commons-io</groupId> 

<artifactId>commons-io</artifactId> 

<version>20030203.000550</version> 

<versioning>   

<latest>20030203.000550</latest>   

<release>20030203.000550</release>   

<versions>     

<version>0.1</version>      <version>1.0</version>      <version>1.1</version>      <version>1.2</version>      <version>1.3</version>      <version>1.3.1</version>      <version>1.3.2</version>      <version>1.4</version>      <version>1.4-backport-IO-168</version>      <version>2.0</version>      <version>2.0.1</version>      <version>2.1</version>      <version>2.2</version>      <version>2.3</version>      <version>2.4</version>      <version>2.5</version>      <version>2.6</version>      <version>2.7</version>      <version>2.8.0</version>   <version>20030203.000550</version>    </versions>    <lastUpdated>20200917223943</lastUpdated>  </versioning></metadata>

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6tjq:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
ConcurrentModificationException in DbRepoImportHandler.importFromRetryList,RTFACT-24598,125377,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kPshi,kPshi,12/Jan/21 1:48 PM,12/Jan/21 1:48 PM,18/Feb/21 8:59 AM,,7.10.6,,,,,,,,,,,,,,0,,,,,,"When performing a full system import in the very end of the import process a ConcurrentModificationException is logged. The import seems to be fine, though.

{{2021-01-12 14:14:46,692 [ERROR] (o.a.a.c.ImportExportStatusHolder:43) Error occurred during import: null}}
{{ java.util.ConcurrentModificationException: null}}
{{ at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1493)}}
{{ at java.base/java.util.HashMap$KeyIterator.next(HashMap.java:1516)}}
{{ at org.artifactory.repo.db.importexport.DbRepoImportHandler.importFromRetryList(DbRepoImportHandler.java:238)}}
{{ at org.artifactory.repo.db.importexport.DbRepoImportHandler.executeImport(DbRepoImportHandler.java:168)}}
{{ at org.artifactory.repo.service.ImportHandlerCallablesFactory.lambda$create$0(ImportHandlerCallablesFactory.java:58)}}
{{ at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)}}
{{ at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:31)}}
{{ at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:53)}}
{{ at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)}}
{{ at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)}}
{{ at java.base/java.lang.Thread.run(Thread.java:834)}}
{{ 2021-01-12 14:14:46,692 [ERROR] (o.a.a.c.ImportExportStatusHolder:43) Error occurred during import: null}}
{{ java.util.ConcurrentModificationException: null}}
{{ at java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1493)}}
{{ at java.base/java.util.HashMap$KeyIterator.next(HashMap.java:1516)}}
{{ at org.artifactory.repo.db.importexport.DbRepoImportHandler.importFromRetryList(DbRepoImportHandler.java:238)}}
{{ at org.artifactory.repo.db.importexport.DbRepoImportHandler.executeImport(DbRepoImportHandler.java:168)}}
{{ at org.artifactory.repo.service.ImportHandlerCallablesFactory.lambda$create$0(ImportHandlerCallablesFactory.java:58)}}
{{ at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)}}
{{ at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:31)}}
{{ at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:53)}}
{{ at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)}}
{{ at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)}}
{{ at java.base/java.lang.Thread.run(Thread.java:834)}}","jfrog-artifactory-pro-7.10.6-71006900.x86_64

java -version
openjdk version ""11.0.7"" 2020-04-14
OpenJDK Runtime Environment AdoptOpenJDK (build 11.0.7+10)
OpenJDK 64-Bit Server VM AdoptOpenJDK (build 11.0.7+10, mixed mode)

Red Hat Enterprise Linux Server release 7.8 (Maipo)

16 GB RAM, 4 Cores á 3 GHz, 100 GB HDD

dedicated Postgres 9.6 DB",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6s12:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Debian virtual repositories not being re-indexed,RTFACT-24575,125042,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bd0007,bd0007,12/Jan/21 4:14 AM,12/Jan/21 4:17 AM,18/Feb/21 8:59 AM,,7.11.5,,,,,,,Debian,,,,,,,0,,,,,,"It appears the the debian virtual repositories do not get automatically re-indexed when a change is made to the encapsulated repositories within it.

This is particularly noticeable when an package is removed. For example, Ubuntu security releases a new version of a package, and removes the old one - the Release file still reports the old version to the Debian client, when then produces a 404 when trying to fetch that package version.

I believe I have also reproduced this with a local Debian repo under the virtual one also (but my memory is slightly faded on that one).

Manually triggering a re-index 'fixes' it (until it goes out of date again).

The problem does not appear to affect the {{remote}} repositories themselves (i.e. at the time when the error is present, hitting an {{ubuntu-security-remote}} repo directly does not exhibit the 404 behavior, but the same repo wrapped in a virtual repo does).

*Work around's:* Avoid virtual repos, or cron-job to trigger a re-index daily",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6q4u:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
runFullGarbageCollect leads to DB crash (OOM),RTFACT-24542,124648,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mfriedenhagen,mfriedenhagen,08/Jan/21 3:48 PM,08/Feb/21 3:25 PM,18/Feb/21 8:59 AM,,6.23.3,,,,,,,Artifactory,,,,,,,1,,,,,,"We already saw that Artifactory sometimes feels sluggish but now it crashes the DB.
 In postgresql.log we saw the following:
{noformat}
/var/log/postgresql/postgresql-11-main.log.1:2020-12-28 04:33:45.268 UTC [1154] LOG:  server process (PID 32537) was terminated by signal 9: Killed
/var/log/postgresql/postgresql-11-main.log.1:2020-12-28 04:33:45.268 UTC [1154] DETAIL:  Failed process was running: SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE b.sha1 NOT LIKE '##%' AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1) ORDER BY b.bin_length DESC
{noformat}
We detected this query is issued by {{BinariesDAO.findPotentialDeletion}} which is called by {{BinaryServiceImpl.runFullGarbageCollect}} which called by {{BinaryServiceImpl.startGarbageCollect}} but only when:
 * either Trashcan is disabled or
 * when it is enabled every 20 time.

In our monitoring we see, that everytime above query runs, the complete RAM of the machine is taken by the postgres proccess and after about 15 minutes the OOM killer does it's job and kills the query with signal 9.

Beneath {{/var/lib/postgresql/11/main/base/pgsql_tmp/}} there are directories called {{pgsql_tmp32537.0.sharedfileset}} (32537 is the PID of the postgres process) which hold about 140GB of data each.

So we need to clean up {{/var/lib/postgresql/11/main/base/pgsql_tmp/}} about once a week because the query for {{findPotentialDeletion}} runs every 3.33 days and so after 2 weeks our 1TB partition is filled with remnants of the above process.

I tried and started
{noformat}
SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE b.sha1 NOT LIKE '##%' AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1) ORDER BY b.bin_length DESC;
{noformat}
via {{psql}} on the machine and the same behavior shows, all RAM was eaten up and a tmpdir with > 6,000,000 files totalling to 140 GB was created.

We are paying enterprise customers, so I will open a support case as well for this.

For what it's worth, the execution plans:
{noformat}
artifactory=> EXPLAIN SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE b.sha1 NOT LIKE '##%' AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1) ;
                                          QUERY PLAN
----------------------------------------------------------------------------------------------
 Gather  (cost=448131.19..1444925.95 rows=3731635 width=147)
   Workers Planned: 2
   ->  Parallel Hash Anti Join  (cost=447131.19..1070762.45 rows=1554848 width=147)
         Hash Cond: (b.sha1 = n.sha1_actual)
         ->  Parallel Seq Scan on binaries b  (cost=0.00..133854.51 rows=1632597 width=147)
               Filter: (sha1 !~~ '##%'::text)
         ->  Parallel Hash  (cost=399401.64..399401.64 rows=2241964 width=41)
               ->  Parallel Seq Scan on nodes n  (cost=0.00..399401.64 rows=2241964 width=41)
{noformat}
After some thinking about above expression, the following would be the same (EXPLAIN reports high costs but at least it only consumes 1GB of RSS and only 250MB in one file in {{pgsql_tmp}} (it looks like the file contains the materialized {{sha1_actual}} from {{nodes}}).
{noformat}
artifactory=> EXPLAIN SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE b.sha1 NOT LIKE '##%' AND b.sha1 NOT IN (SELECT n.sha1_actual FROM nodes n);
                                        QUERY PLAN
-------------------------------------------------------------------------------------------
 Gather  (cost=1000.00..423241628643.81 rows=1959117 width=147)
   Workers Planned: 2
   ->  Parallel Seq Scan on binaries b  (cost=0.00..423241431732.11 rows=816299 width=147)
         Filter: ((sha1 !~~ '##%'::text) AND (NOT (SubPlan 1)))
         SubPlan 1
           ->  Materialize  (cost=0.00..504984.71 rows=5380714 width=41)
                 ->  Seq Scan on nodes n  (cost=0.00..430789.14 rows=5380714 width=41)
(7 rows)
{noformat}","*Machine*
 * 96GB RAM, 60TB of Storage for the binaries.
 * Debian 10 (Buster)

*Enterprise edition of Artifactory 6.23.3*
 * AdoptOpenJDK 11.0.9
 * 
{noformat}
JAVA_OPTIONS=""-server -Xms1g -Xmx8g -Xss256k -XX:+UseG1GC -XX:OnOutOfMemoryError=\""kill -9 %p\""""
export JAVA_OPTIONS=""$JAVA_OPTIONS -Djruby.compile.invokedynamic=false -Dfile.encoding=UTF8 -Dartdist=deb -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true -Djava.security.egd=file:/dev/./urandom""
export JAVA_OPTIONS=""$JAVA_OPTIONS -Djava.net.preferIPv4Stack=true""
{noformat}

*DB PostgreSQL DB 11.9 (Debian 11.9-0+deb10u1)*
 * on the same host. 
 * The DB partition ({{/var/lib/postgresql}} has 1TB, which seems reasonable as the DB has normally only 120GB.
 * There are ca. 5,000,000 entries in the {{nodes}} table.
 * There are ca. 4,000,000 entries in the {{binaries}} table.
 * We set 'shared_buffers' => '1024MB' and 'max_connections' => '200'

*General*
 * We did not configure GC (garbage collection) explicitely, so a full collection is only run every 20th time as per default, GC is scheduled every 4 hours as is the default as well.
 * We keep the trash 1 day.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6ny6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Feb/21 10:36 AM;mfriedenhagen;* We now helped ourselves by patching method {{findPotentialDeletion}} in {{storage/db/src/main/java/org/artifactory/storage/db/binstore/dao/BinariesDao.java}}
* We replaced the query with {{SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE LEFT(b.sha1, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f') AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1)}}

{noformat}
artifactory=> EXPLAIN SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE LEFT(b.sha1, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f') AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1);
                                               QUERY PLAN
---------------------------------------------------------------------------------------------------------
 Gather  (cost=1000.56..318672.45 rows=251564 width=147)
   Workers Planned: 2
   ->  Nested Loop Anti Join  (cost=0.56..292516.05 rows=104818 width=147)
         ->  Parallel Seq Scan on binaries b  (cost=0.00..177435.13 rows=110656 width=147)
               Filter: (""left""((sha1)::text, 1) = ANY ('{0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f}'::text[]))
         ->  Index Only Scan using nodes_sha1_actual_idx on nodes n  (cost=0.56..12.05 rows=25 width=41)
               Index Cond: (sha1_actual = b.sha1)
{noformat}

After doing this, we all 1 million deletable artifacts were gone after 20 minutes without major memory, disk or CPU consumption.","02/Feb/21 10:40 AM;mfriedenhagen;{noformat}
diff --git a/storage/db/src/main/java/org/artifactory/storage/db/binstore/dao/BinariesDao.java b/storage/db/src/main/java/org/artifactory/storage/db/binstore/dao/BinariesDao.java
index 3192d23d..2dd4e47c 100644
--- a/storage/db/src/main/java/org/artifactory/storage/db/binstore/dao/BinariesDao.java
+++ b/storage/db/src/main/java/org/artifactory/storage/db/binstore/dao/BinariesDao.java
@@ -138,10 +138,13 @@ public class BinariesDao extends BaseDao {
         Collection<BinaryEntity> results = Lists.newArrayList();
         ResultSet resultSet = null;
         try {
+/*
             resultSet = jdbcHelper.executeSelect(""SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b"" +
                     "" WHERE b.sha1 NOT LIKE '"" + TEMP_SHA1_PREFIX + ""%'"" +
                     "" AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1)"" +
                     "" ORDER BY b.bin_length DESC"");
+*/
+            resultSet = jdbcHelper.executeSelect(""SELECT b.sha1, b.md5, b.bin_length, b.sha256 FROM binaries b WHERE LEFT(b.sha1, 1) IN ('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f') AND NOT EXISTS (SELECT n.node_id FROM nodes n WHERE n.sha1_actual = b.sha1)"");
             while (resultSet.next()) {
                 results.add(binaryFromResultSet(resultSet));
             }
diff --git a/storage/db/src/main/java/org/artifactory/storage/db/binstore/service/BinaryServiceImpl.java b/storage/db/src/main/java/org/artifactory/storage/db/binstore/service/BinaryServiceImpl.java
index da0bbc6f..287a57f7 100644
--- a/storage/db/src/main/java/org/artifactory/storage/db/binstore/service/BinaryServiceImpl.java
+++ b/storage/db/src/main/java/org/artifactory/storage/db/binstore/service/BinaryServiceImpl.java
@@ -103,6 +103,7 @@ import java.util.*;
 import java.util.concurrent.Callable;
 import java.util.concurrent.ConcurrentMap;
 import java.util.concurrent.CopyOnWriteArrayList;
+import java.util.concurrent.TimeUnit;
 import java.util.concurrent.atomic.AtomicInteger;
 import java.util.concurrent.locks.Lock;
 import java.util.concurrent.locks.ReentrantLock;
@@ -608,9 +609,15 @@ public class BinaryServiceImpl implements InternalBinaryService, ClusterTopology
     }
 
     private List<String> deleteBinaries(GarbageCollectorInfo result, Collection<BinaryEntity> binsToDelete) {
+        long nextLog = System.currentTimeMillis();
         int failures = 0;
         List<String> deletedBinaries = Lists.newArrayList();
+        final int binsToDeleteSize = binsToDelete.size();
         for (BinaryEntity bd : binsToDelete) {
+            if (System.currentTimeMillis() > nextLog) {
+                log.info(""Deleted {} of {} binaries"", deletedBinaries.size(), binsToDeleteSize);
+                nextLog += TimeUnit.MINUTES.toMillis(1);
+            }
             log.trace(""Candidate for deletion: {}"", bd);
             try {
                 boolean deleted = dbService.invokeInTransaction(""BinaryCleaner#"" + bd.getSha1(), new BinaryCleaner(bd, result));
{noformat}",,,,,,,,,
"Fails downloading some files with message ""The system cannot find the path specified."" on Windows",RTFACT-24516,124503,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bicschneider,bicschneider,07/Jan/21 12:40 PM,11/Jan/21 9:24 PM,18/Feb/21 8:59 AM,,,,,,,,,CLI,,,,,,,0,,,,,,"output:
{noformat}
C:\Users\xx>jfrog rt dl --build <build>/<revision>
 Log path: Z:\.jfrog\logs\jfrog-cli.2021-01-07.12-36-07.27156.log
{
  ""status"": ""failure"",
  ""totals"": {
    ""success"": 168,
    ""failure"": 5
  }
}
[Error] Download finished with errors, please review the logs.
{noformat}
{noformat}
$ grep -i -e ""error"" -e ""warn"" /z/.jfrog//logs/jfrog-cli.2021-01-07.12-36-07.27156.log
[Error] [Thread 0]  Received an error: open revision\opk\image\X21-12007 Win10 IoT Enterprise LTSB 2016 1607 32 64 EMB English OPK\Software - DVD\Updates\x86\windows10.0-kb3186568-x86_8c2bbaaba5cf15286011021c86f3f8e11b83b75c.msu: The system cannot find the path specified.
[Error] [Thread 0]  Received an error: open revision\opk\image\X21-12007 Win10 IoT Enterprise LTSB 2016 1607 32 64 EMB English OPK\Software - DVD\Updates\x86\windows10.0-kb4132216-x86_397ebbe49d273429a3e0ce8d6ced13fdb83e1718.msu: The system cannot find the path specified.
[Error] [Thread 0]  Received an error: open revision\opk\image\X21-12007 Win10 IoT Enterprise LTSB 2016 1607 32 64 EMB English OPK\Software - DVD\Updates\x86\windows10.0-kb4343887-x86_7749e00f96fe8426cdcb1dabe70ac84824c581e4.msu: The system cannot find the path specified.
[Error] [Thread 0]  Received an error: open revision\opk\image\X21-12007 Win10 IoT Enterprise LTSB 2016 1607 32 64 EMB English OPK\Software - DVD\Updates\x86\windows10.0-kb4471331-x86_59ea46a76e5c932fb7f766661599b278e516218f.msu: The system cannot find the path specified.
[Warn] [Thread 0] Attempt 0 - Failure occurred while downloading https://server:8081/artifactory/orgPath/revision/opk/image/X21-96641%20Win10%20IoT%20Enterprise%20LTSC%202019%201809%203264%20EMB%20English%20OPK/Print%20%20Content/Kit%20Guide%20Win10%20IOT%20Ent%202019%20LTSCSAC%20Default%20Manufacturing%20Key%20OEM/X2191740RTA.zip - open revision\opk\image\X21-96641 Win10 IoT Enterprise LTSC 2019 1809 3264 EMB English OPK\Print  Content\Kit Guide Win10 IOT Ent 2019 LTSCSAC Default Manufacturing Key OEM\X2191740RTA.zip: The system cannot find the path specified.
[Warn] [Thread 0] Attempt 1 - Failure occurred while downloading https://server:8081/artifactory/orgPath/revision/opk/image/X21-96641%20Win10%20IoT%20Enterprise%20LTSC%202019%201809%203264%20EMB%20English%20OPK/Print%20%20Content/Kit%20Guide%20Win10%20IOT%20Ent%202019%20LTSCSAC%20Default%20Manufacturing%20Key%20OEM/X2191740RTA.zip - open revision\opk\image\X21-96641 Win10 IoT Enterprise LTSC 2019 1809 3264 EMB English OPK\Print  Content\Kit Guide Win10 IOT Ent 2019 LTSCSAC Default Manufacturing Key OEM\X2191740RTA.zip: The system cannot find the path specified.
[Warn] [Thread 0] Attempt 2 - Failure occurred while downloading https://server:8081/artifactory/orgPath/revision/opk/image/X21-96641%20Win10%20IoT%20Enterprise%20LTSC%202019%201809%203264%20EMB%20English%20OPK/Print%20%20Content/Kit%20Guide%20Win10%20IOT%20Ent%202019%20LTSCSAC%20Default%20Manufacturing%20Key%20OEM/X2191740RTA.zip - open revision\opk\image\X21-96641 Win10 IoT Enterprise LTSC 2019 1809 3264 EMB English OPK\Print  Content\Kit Guide Win10 IOT Ent 2019 LTSCSAC Default Manufacturing Key OEM\X2191740RTA.zip: The system cannot find the path specified.
[Warn] [Thread 0] Attempt 3 - Failure occurred while downloading https://server:8081/artifactory/orgPath/revision/opk/image/X21-96641%20Win10%20IoT%20Enterprise%20LTSC%202019%201809%203264%20EMB%20English%20OPK/Print%20%20Content/Kit%20Guide%20Win10%20IOT%20Ent%202019%20LTSCSAC%20Default%20Manufacturing%20Key%20OEM/X2191740RTA.zip - open revision\opk\image\X21-96641 Win10 IoT Enterprise LTSC 2019 1809 3264 EMB English OPK\Print  Content\Kit Guide Win10 IOT Ent 2019 LTSCSAC Default Manufacturing Key OEM\X2191740RTA.zip: The system cannot find the path specified.
[Error] [Thread 0]  Received an error: open revision\opk\image\X21-96641 Win10 IoT Enterprise LTSC 2019 1809 3264 EMB English OPK\Print  Content\Kit Guide Win10 IOT Ent 2019 LTSCSAC Default Manufacturing Key OEM\X2191740RTA.zip: The system cannot find the path specified.
[Error] open revision\opk\image\X21-12007 Win10 IoT Enterprise LTSB 2016 1607 32 64 EMB English OPK\Software - DVD\Updates\x86\windows10.0-kb3186568-x86_8c2bbaaba5cf15286011021c86f3f8e11b83b75c.msu: The system cannot find the path specified.
{noformat}
On linux it works and look like this:
{noformat}
$ jfrog rt dl --build build/revision
 Log path: /home/cssr/.jfrog/logs/jfrog-cli.2021-01-07.13-00-56.28930.log
{
  ""status"": ""success"",
  ""totals"": {
    ""success"": 173,
    ""failure"": 0
  }
}
{noformat}","Windows 10 ( both from GitBash and from CMD )
 CLI: 
{noformat}
$ jfrog --version
jfrog version 1.43.1
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6n3q:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Jan/21 9:24 PM;bicschneider;I found out that the reason is like the path length problem in Windows - similar to the Git longpaths scenario, but there seems not be a solution with jfrog cli - except using the ""old"" subst method",,,,,,,,,,
Artifacts which are not associated to the module are being returned by AQL query,RTFACT-24515,124496,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,07/Jan/21 11:51 AM,18/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,7.12.3,,,,,,,,,,,,,,0,,,,,,"*Problem description:* 

When running the following AQL query:

{code:java}
items.find(
 {""artifact.module.name"":{""$eq"":""module-with-empty-file""}}
)
.include(""repo"",""path"",""name"",""created"",""actual_md5"",""actual_sha1"",""size"").sort({""$desc"":[""created""]}).offset(0).limit(100)
{code}

We are getting all the build artifacts from the build module ‘build-with-empty-checksum’. then we are looking for all the nodes that have the same checksum of these artifacts.
the thing is that it brings nodes from other repos (if that have the same checksum as in the build_artifacts).
As a private case. if there is the “empty file”, it will bring more nodes, so we will see the issue clearly, and those artifacts are not associated with the module.

When running the following AQL query:

{code:java}
items.find(
 {""artifact.module.name"":{""$eq"":""module-with-empty-file""}}
)
.include(""repo"",""path"",""name"",""created"",""actual_md5"",""actual_sha1"",""size"").sort({""$desc"":[""created""]}).offset(0).limit(100)
{code}

The query which is made to the DB and associated with this AQL is as follows:

{code:java}
SELECT DISTINCT n.repo        AS itemRepo, 
                n.node_path   AS itemPath, 
                n.node_name   AS itemName, 
                n.created     AS itemCreated, 
                n.md5_actual  AS itemActualMd5, 
                n.sha1_actual AS itemActualSha1, 
                n.bin_length  AS itemSize 
FROM   nodes n 
       LEFT OUTER JOIN build_artifacts ba 
                    ON ba.sha1 = n.sha1_actual 
       LEFT OUTER JOIN build_modules bm 
                    ON bm.module_id = ba.module_id 
WHERE  ( ( bm.module_name_id = 'build-with-empty-checksum' 
           AND n.node_type = 1 ) 
         AND ( n.repo != 'auto-trashcan' ) ) 
       AND ( n.repo != 'jfrog-support-bundle' ) 
ORDER  BY itemcreated desc 
FETCH first 100 ROWS only 
{code}


*What is the expected behavior?*: AQL will not return artifacts that are not associated with the module.
*Steps to reproduce:* 
This is the easiest to reproduce with the JFrog CLI:

1. Create an empty file locally
2. Upload the file to Artifactory using the CLI and add to it build name and build number.
3. Upload several other empty files to Artifactory on different repositories and do not associate any build to them.
4. Perform the AQL query

Results will be that we will get the other empty files associate to the module.

*Possible workaround:*

This is solved by adding a build.name and build.number, to the AQL, which leads me to believe that if we do not add them, it means that different tables are used for the search (nodes/vs build related tables).
However, this solution is not always ideal.

The customer pain level  - Normal
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6n2e:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to download packages from dotnet.myget.org if there are more than 100 versions,RTFACT-24447,123967,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,mattheww,mattheww,04/Jan/21 8:30 PM,18/Jan/21 3:19 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"*Problem Statement:*
Artifactory isn't able to resolve a package version from a remote proxying dotnet.myget.org if there are more than 100 versions for that package.

*Expected behavior:*
Artifactory is able to resolve a package from dotnet.myget.org if there are more than 100 versions of that package

*Steps to reproduce:*
-Set up remote repo proxying https://dotnet.myget.org/F/nuget-build (see setup.png)
-Try to install Microsoft.Build.NuGetSdkResolver from Artifactory with nuget client or dotnet client  (seems to occur for both v2 and v3)

nuget install Microsoft.Build.NuGetSdkResolver -Source Artifactory
Feeds used:
  http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote

Installing package 'Microsoft.Build.NuGetSdkResolver' to '/Users/mattheww/Downloads/dotnettest'.
  GET http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById()?id='Microsoft.Build.NuGetSdkResolver'&semVerLevel=2.0.0
  OK http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById()?id='Microsoft.Build.NuGetSdkResolver'&semVerLevel=2.0.0 1039ms
  GET http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById?id='Microsoft.Build.NuGetSdkResolver'&$skiptoken='Microsoft.Build.NuGetSdkResolver','4.8.0-preview4.5302%2B3803820961f4d61c06d07b179dab1d0439ec0d91'
  OK http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById?id='Microsoft.Build.NuGetSdkResolver'&$skiptoken='Microsoft.Build.NuGetSdkResolver','4.8.0-preview4.5302%2B3803820961f4d61c06d07b179dab1d0439ec0d91' 101ms

dotnet add package Microsoft.Build.NuGetSdkResolver --version 5.9.0-preview.1.6942 --source http://mill.jfrog.info:12197/artifactory/api/nuget/v3/nuget-remote --interactive
  Determining projects to restore...
  Writing /var/folders/6d/ql72kmb91qb4f34x2ybzt6y00000gp/T/tmpF55dOO.tmp
info : Adding PackageReference for package 'Microsoft.Build.NuGetSdkResolver' into project '/Users/mattheww/Downloads/dotnettest/dotnettest.csproj'.
info : Restoring packages for /Users/mattheww/Downloads/dotnettest/dotnettest.csproj...
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.build.nugetsdkresolver/index.json
info :   GET https://relativity.jfrog.io/artifactory/api/nuget/v3/nuget-anthology/registration-semver2/microsoft.build.nugetsdkresolver/index.json
info :   GET http://mill.jfrog.info:12197/artifactory/api/nuget/v3/nuget-remote/FindPackagesById()?id='Microsoft.Build.NuGetSdkResolver'&semVerLevel=2.0.0
info :   NotFound https://api.nuget.org/v3-flatcontainer/microsoft.build.nugetsdkresolver/index.json 488ms
info :   NotFound https://relativity.jfrog.io/artifactory/api/nuget/v3/nuget-anthology/registration-semver2/microsoft.build.nugetsdkresolver/index.json 944ms
info :   OK http://mill.jfrog.info:12197/artifactory/api/nuget/v3/nuget-remote/FindPackagesById()?id='Microsoft.Build.NuGetSdkResolver'&semVerLevel=2.0.0 955ms
info :   GET http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById?id='Microsoft.Build.NuGetSdkResolver'&$skiptoken='Microsoft.Build.NuGetSdkResolver','4.8.0-preview4.5302%2B3803820961f4d61c06d07b179dab1d0439ec0d91'
info :   OK http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById?id='Microsoft.Build.NuGetSdkResolver'&$skiptoken='Microsoft.Build.NuGetSdkResolver','4.8.0-preview4.5302%2B3803820961f4d61c06d07b179dab1d0439ec0d91' 92ms
error: NU1102: Unable to find package Microsoft.Build.NuGetSdkResolver with version (>= 5.9.0-preview.1.6942)
error:   - Found 100 version(s) in http://mill.jfrog.info:12197/artifactory/api/nuget/v3/nuget-remote [ Nearest version: 4.8.0-preview4.5302 ]
error:   - Found 0 version(s) in nuget.org
error:   - Found 0 version(s) in ArtifactoryNuGetV3
error: Package 'Microsoft.Build.NuGetSdkResolver' is incompatible with 'all' frameworks in project '/Users/mattheww/Downloads/dotnettest/dotnettest.csproj'.

-See that the $next link returns no packages:
http://mill.jfrog.info:12197/artifactory/api/nuget/nuget-remote/FindPackagesById?id='Microsoft.Build.NuGetSdkResolver'&$skiptoken='Microsoft.Build.NuGetSdkResolver','4.8.0-preview4.5302%2B3803820961f4d61c06d07b179dab1d0439ec0d91'

-Comparing with when installing from dotnet.myget.org directly using v3, it seems that the client gets the versions from the below (see dotnetrestore.txt):
https://dotnetmyget.blob.core.windows.net/artifacts/nuget-build/nuget/v3/flatcontainer/microsoft.build.nugetsdkresolver/index.json

dotnet add package Microsoft.Build.NuGetSdkResolver --version 5.9.0-preview.1.6942 --source https://dotnet.myget.org/F/nuget-build/api/v3/index.json
  Determining projects to restore...
  Writing /var/folders/6d/ql72kmb91qb4f34x2ybzt6y00000gp/T/tmpR0bcCU.tmp
info : Adding PackageReference for package 'Microsoft.Build.NuGetSdkResolver' into project '/Users/mattheww/Downloads/dotnettest/dotnettest.csproj'.
info : Restoring packages for /Users/mattheww/Downloads/dotnettest/dotnettest.csproj...
info :   GET https://api.nuget.org/v3-flatcontainer/microsoft.build.nugetsdkresolver/index.json
info :   GET https://relativity.jfrog.io/artifactory/api/nuget/v3/nuget-anthology/registration-semver2/microsoft.build.nugetsdkresolver/index.json
info :   GET https://dotnetmyget.blob.core.windows.net/artifacts/nuget-build/nuget/v3/flatcontainer/microsoft.build.nugetsdkresolver/index.json
info :   NotFound https://api.nuget.org/v3-flatcontainer/microsoft.build.nugetsdkresolver/index.json 459ms
info :   NotFound https://relativity.jfrog.io/artifactory/api/nuget/v3/nuget-anthology/registration-semver2/microsoft.build.nugetsdkresolver/index.json 831ms
info :   OK https://dotnetmyget.blob.core.windows.net/artifacts/nuget-build/nuget/v3/flatcontainer/microsoft.build.nugetsdkresolver/index.json 2084ms
info :   GET https://dotnetmyget.blob.core.windows.net/artifacts/nuget-build/nuget/v3/flatcontainer/microsoft.build.nugetsdkresolver/5.9.0-preview.1.6942/microsoft.build.nugetsdkresolver.5.9.0-preview.1.6942.nupkg
",Artifactory 6.21.0,,,,,,,,,,,,,,,RTFACT-17491,RTFACT-15346,,"04/Jan/21 8:31 PM;mattheww;Screen Shot 2021-01-04 at 12.23.08 PM.png;https://www.jfrog.com/jira/secure/attachment/50553/Screen+Shot+2021-01-04+at+12.23.08+PM.png","04/Jan/21 8:31 PM;mattheww;dotnetrestore.txt;https://www.jfrog.com/jira/secure/attachment/50554/dotnetrestore.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6jva:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory gives 500 Internal Server Error with Vitual Repo,RTFACT-24443,123910,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mboer,mboer,04/Jan/21 3:06 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.12.5,,,,,,,Artifactory,,,,,,,0,artifactory,,,,,"We experience '500 Interal Server Error's when pulling remotely hosted images through Artifactory using a virtual repository. When placing the remote host into another virtual repo, it just works fine.

The errors pop up in  artifactory-request.log, so it looks like Artifactory itself is doing something wrong.--

Before the holiday season, everything worked fine.","Linux, OL7.6, VMware",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6jiu:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Treebrowser endpoint, in some cases doesn't returns MIME type for files",RTFACT-24442,123890,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Alexanderpi,Alexanderpi,04/Jan/21 2:05 PM,18/Jan/21 1:38 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"In case of virtual and remote repository, for Debian packages, treebrowser doesn't return 'mimeType'.

!Screenshot 2021-01-04 at 16.02.12.png|width=685,height=251!

 ",,,,,,,,,,,,,,,,,,,"04/Jan/21 2:05 PM;Alexanderpi;Screenshot 2021-01-04 at 16.02.12.png;https://www.jfrog.com/jira/secure/attachment/50536/Screenshot+2021-01-04+at+16.02.12.png","04/Jan/21 2:05 PM;Alexanderpi;Screenshot 2021-01-04 at 16.03.49.png;https://www.jfrog.com/jira/secure/attachment/50535/Screenshot+2021-01-04+at+16.03.49.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6jeu:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Failed to reload configuration,RTFACT-24413,123606,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bert.meedendorp,bert.meedendorp,31/Dec/20 12:38 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.23.3,,,,,,,Artifactory,,,,,,,0,artifactory,,,,,"When I create a new artifactory PRO instance on docker I configure the system with a lot of API call's

The first 40 configuration changes goes wel, but then I get the following error messages on the next api call's:

2020-12-31 12:54:56,658 [http-nio-8081-exec-10] [INFO ] (o.a.c.CentralConfigServiceImpl:620) - Reloading configuration... old revision 39, new revision 40
 2020-12-31 12:54:56,731 [http-nio-8081-exec-10] [INFO ] (o.a.c.CentralConfigServiceImpl:379) - New configuration with revision 40 saved.
 2020-12-31 12:54:56,736 [http-nio-8081-exec-10] [INFO ] (o.a.s.ArtifactoryApplicationContext:520) - Artifactory application context set to NOT READY by reload
 2020-12-31 12:54:56,808 [http-nio-8081-exec-10] [INFO ] (o.a.s.ArtifactoryApplicationContext:520) - Artifactory application context set to READY by reload on error: null
 2020-12-31 12:54:56,818 [http-nio-8081-exec-10] [ERROR] (o.a.c.CentralConfigServiceImpl:655) - Failed to reload configuration: null
 java.lang.NullPointerException: null

 ","Artifactory-PRO 6.23.3 within docker with postgresql 9.5.2 and nginx-artifactory-pro 6.23.3

running on Debian 9",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6htq:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"31/Dec/20 12:54 PM;bert.meedendorp;Is simular to RTFACT-16638 but there is no solution mentioned",,,,,,,,,,
Cannot login when having 4 or more OAuth SSO providers,RTFACT-24390,122462,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,clement_denis,clement_denis,28/Dec/20 9:02 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,7.11.5,,,,,,,OAuth,,,,,,,0,,,,,,"When using multiple OAuth SSO providers, it's not possible to login anymore when there are more than 4 providers (tested on latest Cloud version).

This used to work fine on older versions.

Having more than 4 Google OAuth providers causes the error message ""login with oauth error - OAuth state mismatch"" after being redirected back to Artifactory.

This is likely caused by the cookie ""oauth_state"" being too large (over 4096 characters).
 The Chrome developer tools console shows the following warning message:
{code:java}
Set-Cookie header is ignored in response from url: https://aodocs.jfrog.io/ui/api/v1/ui/oauth2/loginRequestPlatform. Cookie length should be less than or equal to 4096 characters. {code}","Artifactory Cloud
 * 
version: ""7.11.5""
 * 
revision: ""71105900""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6fzi:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
User can login to Artifactory via UI with plain text password when 'Password Encryption Policy' is set to 'Required',RTFACT-24388,122450,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adim,adim,28/Dec/20 5:29 PM,09/Feb/21 7:32 AM,18/Feb/21 8:59 AM,,6.23.3,,,,,,,,,,,,,,0,,,,,,"When setting 'Password Encryption Policy' in security configuration to 'Required' users can still log in to the UI with a plain text password.

+Steps to reproduce:+
 # Under security configuration, Set 'Password Encryption Policy' to 'Required'
 # Create a user with an internal password.
 # Log in with the new user, using the password.

Observed:
 Login is successful.

Expected:
 Login fails since we are using a plain text password

In order to confirm this, when using 'curl' command the command will fail when using plain text password and will succeed with 'API Key'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6fwu:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
download archive entries can fail when Artifactory use cache-fs and file contains a lot of entries,RTFACT-24360,122272,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,27/Dec/20 1:56 PM,09/Feb/21 7:33 AM,18/Feb/21 8:59 AM,,6.20.1,,,,,,,,,,,,,,0,,,,,,"Under rare conditions, download archive entries can fail when the file is not cached.

The archive entries will only read the first X entries, and will not continue in the scan. the file will be cached afterwards and subsequent archive downloads will succeed.

We saw that when the file is not cached the download will fail 404.
 The second time it will succeed because the file will be cached in the cache-fs.

This happens because when we cache the files the content length provided is wrong.
 We get the content length of the compressed file instead of the uncompressed length which leads to the early closure of the stream.

Steps to reproduce:
 1. Configure Artifactory with cache-fs and a file-system
 2. Upload the affected files
 3. Make sure they are not in the cache-fs
 4. Use the download archive entry to download one of the files there.

Expected results: 200.
 Actual results: 404.

Workarounds (either works):

a. try again. when the archive is cached, it works.
b. change the multiReadEnabled from true to false for the cache-fs will solve this issue. This workaround will disable concurrent reads from NFS - meaning if you have 2 or more requests of the uncached item, each will fetch it from the next binary provider.
 You will see an exception, the file will not be cached but the download will work.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6f6m:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
S3 _queue directory getting filled with duplicates binaries,RTFACT-24317,121691,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,ohadl,ohadl,ohadl,22/Dec/20 10:43 AM,09/Feb/21 7:38 AM,18/Feb/21 8:59 AM,,6.20.1,,,,,,,,,,,,,,0,P1,,,,,"+_*Setup up:*_+

Artifactory HA with eventual cluster configured.

+_*Issue:*_+

If there is an issue deploying files to S3, when deploying the same file to Artifactory the _queue directory will get filled with the same binary several times.

This will also affect the other _queue directories of the other nodes in that cluster.

+*_Step to reproduce:_*+
 # Set Artifactory HA with eventual-cluster.
 # Create a S3 issue, which would cause file deployment to fail. Delete the S3 or create a policy which will block all Put actions on the S3 with a certain condition.
 # Deploy a file/package to a local repository, for example generic-local.
 # Deploy the same file again.
 # Check the _queue directory and you will see the same file present twice but with a different timestamp. 

The above can cause a host machine storage to run out of space.

Below is an example of the _queue directory with the same file:

 
{code:java}
-rw-r----- 1 root root 3415460 Dec 21 13:17 8b6bb673bb4bf12fc2eefa7e66a522c96aac3d22-1608556635051-add
-rw-r----- 1 root root 3415460 Dec 22 10:25 8b6bb673bb4bf12fc2eefa7e66a522c96aac3d22-1608632748030-add
-rw-r----- 1 root root 3415460 Dec 22 10:39 8b6bb673bb4bf12fc2eefa7e66a522c96aac3d22-1608633588837-add
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6d7q:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
choco install does not work through virtual repo,RTFACT-24313,121669,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,22/Dec/20 4:24 AM,15/Feb/21 5:11 PM,18/Feb/21 8:59 AM,,6.22.0,7.11.5,,,,,,Chocolatey,,,,,,,2,,,,,,"choco install does not work through virtual repo but it works through remote repo.

 

*Steps to reproduce*

1.   create a remote repo called *choco-demo-remote (url : [https://chocolatey.org|https://chocolatey.org/] )*

2.   include  *choco-demo-remote* only  in  nuget virtual

3.  choco install git -s [http://ART_URL:8081/artifactory/api/nuget/nuget|http://art_url:8081/artifactory/api/nuget/nuget]

 
{code:java}
C:\Users\smshi\choco>choco install git -s http://192.168.1.71:8081/artifactory/api/nuget/nuget
Chocolatey v0.10.15
Installing the following packages:
git
By installing you accept licenses for the packages.
Please provide credentials for: http://192.168.1.71:8081/artifactory/api/nuget/nuget
User name: admin
Password: ********************
git not installed. An error occurred during installation:
 Unable to resolve dependency 'git.install (= 2.29.2.3)'.
git package files install completed. Performing other installation steps.
The install of git was NOT successful.
git not installed. An error occurred during installation:
 Unable to resolve dependency 'git.install (= 2.29.2.3)'.


Chocolatey installed 0/1 packages. 1 packages failed.
 See the log for details (C:\ProgramData\chocolatey\logs\chocolatey.log).


Failures
 - git (exited 1) - git not installed. An error occurred during installation:
 Unable to resolve dependency 'git.install (= 2.29.2.3)'.
{code}
*As a workaround,* it works through choco remote repo.

choco install git -s [http://ART_URL:8081/artifactory/api/nuget/choco-demo-remote|http://art_url:8081/artifactory/api/nuget/choco-demo-remote]
{code:java}
C:\Users\smshi\choco>choco install git -s http://192.168.1.71:8081/artifactory/api/nuget/choco-demo-remote
Chocolatey v0.10.15
Installing the following packages:
git
By installing you accept licenses for the packages.
Please provide credentials for: http://192.168.1.71:8081/artifactory/api/nuget/choco-demo-remote
User name: admin
Password: ********************
Progress: Downloading git 2.29.2.3... 100%


git.install v2.29.2.3
git.install package files install completed. Performing other installation steps.
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6d32:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Feb/21 6:06 AM;aditya;Facing the same issue with the 6.22 version.",,,,,,,,,,
artifactCleanup user plugin - unable to set multiple cron jobs simultaneously,RTFACT-24307,121494,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tomers,snirba,snirba,20/Dec/20 7:49 AM,09/Feb/21 7:44 AM,18/Feb/21 8:59 AM,,7.5.5,,,,,,,User Plugins,,,,,,,0,,,,,,"Using the artifactCleanup user plugin from public GitHub with no changes in the groovy file.

When configuring the JSON file for different repositories as below, it's not possible to run several jobs in parallel.

 
{code:java}
{
 ""policies"": [
 {
 ""cron"": ""0 53 11 ? * *"",
 ""repos"": [
 ""cleanup-1""
 ],
 ""timeUnit"": ""month"",
 ""timeInterval"": 1,
 ""dryRun"": false,
 ""paceTimeMS"": 500,
 ""disablePropertiesSupport"": true
 },
 {
 ""cron"": ""0 53 11 ? * *"",
 ""repos"": [
 ""cleanup-2""
 ],
 ""timeUnit"": ""day"",
 ""timeInterval"": 3,
 ""dryRun"": false,
 ""paceTimeMS"": 500,
 ""disablePropertiesSupport"": true
 }
 ]
}
{code}
 

Steps to reproduce:
 # Download the user plugin groovy and JSON files from [GitHub|https://github.com/jfrog/artifactory-user-plugins/tree/master/cleanup/artifactCleanup]
 # Locate the plugin in $ARTIFACTORY_HOME/etc/artifactory/plugins
 # Configure the JSON file with cron jobs to run simultaneously 
 # Run the following REST API call - POST /api/plugins/reload

Expected behavior - all jobs should start and delete the artifact matching the job conditions.

Impact - artifacts that are scheduled for deletion are not getting deleted if another job is scheduled for that timeslot, which cause the system to quickly fill up.

 

This is a regression since this action is working in Artifactory 7.4.3, but no longer from Artifactory 7.5.5

 

Logs output:

Actual behavior:
{code:java}
2020-12-28T17:26:25.048Z [jfrt ] [INFO ] [b6e508b6b3b544f5] [artifactCleanup:-2            ] [http-nio-8081-exec-1] - Schedule job policy list: [[cron:0 28 17 ? * *, disablePropertiesSupport:true, dryRun:false, paceTimeMS:500, repos:[cleanup1], timeInterval:1, timeUnit:month], [cron:0 28 17 ? * *, disablePropertiesSupport:true, dryRun:false, paceTimeMS:500, repos:[cleanup2], timeInterval:3, timeUnit:day]]
2020-12-28T17:26:25.056Z [jfrt ] [INFO ] [b6e508b6b3b544f5] [o.a.a.p.j.JobsPluginImpl:94   ] [http-nio-8081-exec-1] - Groovy job 'scheduledCleanup_0 28 17 ? * *' has been successfully scheduled to run.
2020-12-28T17:26:25.058Z [jfrt ] [INFO ] [b6e508b6b3b544f5] [o.a.a.p.j.JobsPluginImpl:62   ] [http-nio-8081-exec-1] - Overriding existing job with name. 'scheduledCleanup_0 28 17 ? * *'.
2020-12-28T17:26:25.061Z [jfrt ] [INFO ] [b6e508b6b3b544f5] [o.a.a.p.j.JobsPluginImpl:94   ] [http-nio-8081-exec-1] - Groovy job 'scheduledCleanup_0 28 17 ? * *' has been successfully scheduled to run.
2020-12-28T17:26:25.064Z [jfrt ] [INFO ] [b6e508b6b3b544f5] [o.a.a.p.GroovyRunnerImpl:357  ] [http-nio-8081-exec-1] - Script 'artifactCleanup' loaded.

2020-12-28T17:28:00.051Z [jfrt ] [INFO ] [5cc0032fa541ee1c] [artifactCleanup:-2            ] [art-exec-9          ] - Starting artifact cleanup for repositories [cleanup2], until 3 days ago with pacing interval 500 ms, dryrun: false, disablePropertiesSupport: true
2020-12-28T17:28:00.077Z [jfrt ] [INFO ] [5cc0032fa541ee1c] [artifactCleanup:-2            ] [art-exec-9          ] - Removing all artifacts not downloaded since 2020/12/25 17:28
2020-12-28T17:28:00.163Z [jfrt ] [INFO ] [5cc0032fa541ee1c] [artifactCleanup:-2            ] [art-exec-9          ] - Finished cleanup, deleting 0 artifacts that took up 0 bytes
{code}
 

Expected behavior:
{code:java}
2020-12-28T18:42:00.047Z [jfrt ] [INFO ] [fb484c2a42fe1902] [artifactCleanup:-2            ] [art-exec-1          ] - Policy settings for scheduled run at(0 42 18 ? * *): repo list([cleanup1]), timeUnit(month), timeInterval(1), paceTimeMS(500) dryrun(false) disablePropertiesSupport(true)
2020-12-28T18:42:00.047Z [jfrt ] [INFO ] [27972bd5c344b792] [artifactCleanup:-2            ] [art-exec-2          ] - Policy settings for scheduled run at(0 42 18 ? * *): repo list([cleanup2]), timeUnit(day), timeInterval(3), paceTimeMS(500) dryrun(false) disablePropertiesSupport(true)
2020-12-28T18:42:00.058Z [jfrt ] [INFO ] [fb484c2a42fe1902] [artifactCleanup:-2            ] [art-exec-1          ] - Starting artifact cleanup for repositories [cleanup1], until 1 months ago with pacing interval 500 ms, dryrun: false, disablePropertiesSupport: true
2020-12-28T18:42:00.058Z [jfrt ] [INFO ] [27972bd5c344b792] [artifactCleanup:-2            ] [art-exec-2          ] - Starting artifact cleanup for repositories [cleanup2], until 3 days ago with pacing interval 500 ms, dryrun: false, disablePropertiesSupport: true
2020-12-28T18:42:00.092Z [jfrt ] [INFO ] [27972bd5c344b792] [artifactCleanup:-2            ] [art-exec-2          ] - Removing all artifacts not downloaded since 2020/12/25 18:42
2020-12-28T18:42:00.092Z [jfrt ] [INFO ] [fb484c2a42fe1902] [artifactCleanup:-2            ] [art-exec-1          ] - Removing all artifacts not downloaded since 2020/11/28 18:42
2020-12-28T18:42:00.190Z [jfrt ] [INFO ] [fb484c2a42fe1902] [artifactCleanup:-2            ] [art-exec-1          ] - Finished cleanup, deleting 0 artifacts that took up 0 bytes
2020-12-28T18:42:00.190Z [jfrt ] [INFO ] [27972bd5c344b792] [artifactCleanup:-2            ] [art-exec-2          ] - Finished cleanup, deleting 0 artifacts that took up 0 bytes
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4zmt:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
GovCloud S3 endpoints are not allowed with PRO account,RTFACT-24249,121094,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cgmckeever,cgmckeever,15/Dec/20 1:59 PM,09/Feb/21 5:15 PM,18/Feb/21 8:59 AM,,7.11.5,,,,,,,Artifact Storage,,,,,,,2,,,,,,"*Illegal Endpoint: s3.us-gov-west-1.amazonaws.com*

 

When setting up Artifactory Pro 7.11.5 in GovCloud with an S3 backend the error is provided. The documents clearly state *_The AWS S3 {{[s3.amazonaws.com|http://s3.amazonaws.com/]}} endpoint is supported in all the JFrog subscriptions. Additional endpoints are supported in the JFrog Enterprise/ Enterprise+ subscriptions._* However, for GovCloud this is the comparable endpoint provided for S3 as with commercial.

We have also attemted to use the *s3.amazonaws.com* in hopes that the region replacement was handled by the adapter. However, when this configuration is attempted the service does not boot, as it fails on validating the backend store.

 

 

 ",,,,,,,,,,,,,RTFACT-24201,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc69pi:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Dec/20 2:31 PM;cgmckeever;??Thank you for the update.??
??Unfortunately, there are no other workarounds we can suggest at this time.??
??We have an internal JIRA (RTFACT-24201 - I will go ahead and link this case) open to address this issue. The plan is to set "".[amazonaws.com|http://amazonaws.com/]"" as the valid endpoint, which will allow the GovCloud endpoint to work under Pro license.??
??The current ETA for this improvement is set to Q1-2021. I would suggest keeping an eye on the JIRA you have opened, as well as the Artifatory [release notes|https://www.jfrog.com/confluence/display/JFROG/Artifactory+Release+Notes].??",,,,,,,,,,
Single Instance Artifcatory Deployed using ECS - failure to launch new task for deploy,RTFACT-24197,120598,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cgmckeever,cgmckeever,10/Dec/20 4:29 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Hi - Maybe Im just approaching this wrong. 

Single Instance mode (non-HA)

AWS-RDS Postgres Database

Deploying via ECS

 

Currently have Artifactory-Pro building a docker container and deploying to ECS. The initial deploy goes fine. Everything stands up, database migrations occur, and the instance runs.

However, when doing an update to the task, a new task spins up. It then adds entries to the `access_topology` with the new container-ip and unique node-id, but they stay unhealthy. The logs just then bomb out with failure messages.

If I first stop the running task, and start a new task, it spins up properly.

In typical ECS world, the new task is spun up till its deemed healthy, and then the older task is killed off. 

Any thoughts on this?

 

UPDATE:

Errors are below – it appears that it wont properly join because of an active heartbeat, and not being HA. However, I want this node to stand up so I can topple the other. Thanks --

```

 

Cluster join: Successfully joined jfmd@01es5dmfhar6gcy5abyj4rwpkc with node id ip-10-10-3-248.us-XXXX-1.compute.internal

Application could not be initialized: Current Artifactory node last heartbeat is: 1607609142483. Stopping Artifactory since the local server is running as PRO/OSS but found other servers in registry

Error occurred when refreshing domain cache all domain endpoint failed : Fetch domains from http://localhost:8046/distribution/api/v1/events/domains failed (returned 404), Fetch domains from http://localhost:8046/artifactory/api/events/domains failed (returned 404), [domain_client]""

Retry 20 Elapsed 16.84 secs failed: Couldn't access another access peer. [localhost:8046]. Status code: UNAVAILABLE. HTTP status code 503
Status code: UNAVAILABLE. HTTP status code 503
1607609184634,invalid content-type: text/plain; charset=utf-8
1607609184634,""headers: Metadata(:status=503,content-type=text/plain; charset=utf-8,content-length=19,date=Thu, 10 Dec 2020 14:06:24 GMT)""
1607609184634,DATA-----------------------------
1607609184634,Service Unavailable. Trying again

``` 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc66sm:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Webhook not generated when replicating a remote repo,RTFACT-24190,117882,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ezekielk,ezekielk,10/Nov/20 11:43 PM,09/Feb/21 8:19 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"*Problem description:*  

The issue revolves around the generation of webhooks when replicating to a remote repository. Even if all checkboxes are checked when creating the webhook, one will not get created when replicating remote repositories.

*What is the expected behavior?* 

A webhook should be generated in the same manner as it does with push replication to a local repository. With push replication between two instances, a webhook is generated for each artifact that is being pushed to the new instance. Webhooks are even generated when downloading remote artifacts. i.e npm install busybox for example. If a webhook can be generated for push replication and the downloading of a remote artifact then it should also work for pull replication as well.

*Steps to reproduce:*
 * **Install 2 7.10.5 (also effects 7.10.2) instances of artifatory with separate licenses
 * set up an npm remote repo on both instances
 ** set up pull replication on the npm remote repo for instance 2(URL should point to the npm remote repo of instance 1)
 * set up webhooks on both instances be sure that all checkboxes have been checked for event (all do not need to be checked but i did for my testing purposes) and all remote and local repos are selected for repositories ",,,,,,,,,,,,,,,,,,,"10/Nov/20 11:43 PM;ezekielk;Blank.png;https://www.jfrog.com/jira/secure/attachment/48045/Blank.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5rpc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Support for Accessibility,RTFACT-24188,120436,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jfishbourne,jfishbourne,08/Dec/20 9:37 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.20.1,,,,,,,Artifactory,,,,,,,0,,,,,,"What is the current support for Accessibility (508 Compliance) in Artifactory?

 

Visually Impaired users are having troubles using Artifactory.

Screen Reader (Jaws) does not appear to work correctly.

Keyboard navigation also appears to be a problem.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc65xa:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
rest api copyTo / moveTo not running as expected,RTFACT-24175,120271,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Christophe Meyer,Christophe Meyer,07/Dec/20 1:46 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.16.0,7.10.6,,,,,,REST API,,,,,,,0,,,,,,"Hello,

 

This ticket to report a wrong behavior of the rest api calls below.

copyTo / moveTo

When used to copy or move group of artefacts from a repository to another one. I have used the UI to perform the copy/move actions.

e.g

source repo: bms-production

source path: com/amadeus/obe/ASV

 

target repo: maven-production-invobe-nce

target path: com/amadeus/obe/ASV

 

The targeted repo is already containing a sub folder ASV under com/amadeus/obe.

A move of copy of the com/amadeus/obe/ASV folder from the source to the targeted repo is leading to the following result. 

 

The source artefacts are copied/moved to  com/amadeus/obe/ASV/ASV  on the target. 

 

Regards 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc64y6:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Dec/20 10:48 PM;paulp;only reproducible when the target path already has content and you are not explicitly specifying a target path.

Workaround: Explicitly provide a target path for the copy/move action.",,,,,,,,,,
57aif1e30ebld2x82hh942js4jaayz.burpcollaborator.net,RTFACT-24168,120194,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bughunter,bughunter,06/Dec/20 4:31 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.23.1,,,,,,,Access Tokens,,,,,,,0,,,,,,"h1. 57aif1e30ebld2x82hh942js4jaayz.burpcollaborator.net

 

57aif1e30ebld2x82hh942js4jaayz.burpcollaborator.net",57aif1e30ebld2x82hh942js4jaayz.burpcollaborator.net,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc64ja:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
w96hdjuaar5lwj4ldr142wyhq8wykn.burpcollaborator.net,RTFACT-24166,120186,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bughunter,bughunter,06/Dec/20 4:19 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"w96hdjuaar5lwj4ldr142wyhq8wykn.burpcollaborator.net

sjjscn

ckjslc",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc64hi:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
w96hdjuaar5lwj4ldr142wyhq8wykn.burpcollaborator.net/admin.php,RTFACT-24165,120185,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bughunter,bughunter,06/Dec/20 4:16 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,,,,,,,,Access Tokens,,,,,,,0,,,,,,"w96hdjuaar5lwj4ldr142wyhq8wykn.burpcollaborator.net/admin.php

 

Test ",w96hdjuaar5lwj4ldr142wyhq8wykn.burpcollaborator.net/admin.php,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc64ha:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
pb4298buz4ecl43se275b742atgk49.burpcollaborator.net/test.jpg,RTFACT-24164,120183,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bughunter,bughunter,06/Dec/20 4:13 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Test 

pb4298buz4ecl43se275b742atgk49.burpcollaborator.net/test.jpg

 

<img src=""x"" onload=alert(document.cookie);>
 <svg/onload=alert(document.cookie);>

""><img src=a onerror=alert(1)>123@sdf.com",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc64gu:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
pip cache is populated but not usable,RTFACT-24153,120090,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alund,alund,04/Dec/20 9:23 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,0,,,,,,"pip is not able to cache artifacts from Artifactory effectively. While downloaded artifacts are stored in the cache, they are not reused, leading to ever increasing disk usage in the cache.

The cause appears to be redirections to unique S3 URL's with each request. From pip's verbose output while executing ""pip install botocore"":
{noformat}
Collecting botocore
  Created temporary directory: /tmp/pip-unpack-hk_6umvw
  Looking up ""https://xxxxxxxxxx.jfrog.io/xxxxxxxxxx/api/pypi/pypi/packages/packages/9c/a3/1ee497faf994d180df5d14d456eef1ef46ca1ffce617816faa4ff8164608/botocore-1.19.30-py2.py3-none-any.whl"" in the cache
  No cache entry available
  https://xxxxxxxxxx.jfrog.io:443 ""GET /xxxxxxxxxx/api/pypi/pypi/packages/packages/9c/a3/1ee497faf994d180df5d14d456eef1ef46ca1ffce617816faa4ff8164608/botocore-1.19.30-py2.py3-none-any.whl HTTP/1.1"" 302 None
  Status code 302 not in (200, 203, 300, 301)
  Looking up ""https://jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com/aol-xxxxxxxxxx/filestore/18/181b5c3c1fcbb52fc05b3574b221bb082c947cae?x-jf-traceId=35bc859a536d58f5&response-content-disposition=attachment%3Bfilename%3D%22botocore-1.19.30-py2.py3-none-any.whl%22&response-content-type=application%2Foctet-stream&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20201204T203404Z&X-Amz-SignedHeaders=host&X-Amz-Expires=30&X-Amz-Credential=AKIASG3IHPL65CZGQFTW%2F20201204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=b1ec32fcb5e63df6e9f57d3dfd2a95d8d2870b480ebf4169ff7b95f4dff0985b"" in the cache
  No cache entry available
  Starting new HTTPS connection (1): jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com:443
  https://jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com:443 ""GET /aol-xxxxxxxxxx/filestore/18/181b5c3c1fcbb52fc05b3574b221bb082c947cae?x-jf-traceId=35bc859a536d58f5&response-content-disposition=attachment%3Bfilename%3D%22botocore-1.19.30-py2.py3-none-any.whl%22&response-content-type=application%2Foctet-stream&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20201204T203404Z&X-Amz-SignedHeaders=host&X-Amz-Expires=30&X-Amz-Credential=AKIASG3IHPL65CZGQFTW%2F20201204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=b1ec32fcb5e63df6e9f57d3dfd2a95d8d2870b480ebf4169ff7b95f4dff0985b HTTP/1.1"" 200 6987356
  Downloading https://xxxxxxxxxx.jfrog.io/xxxxxxxxxx/api/pypi/pypi/packages/packages/9c/a3/1ee497faf994d180df5d14d456eef1ef46ca1ffce617816faa4ff8164608/botocore-1.19.30-py2.py3-none-any.whl (7.0 MB)
  Updating cache with response from ""https://jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com/aol-xxxxxxxxxx/filestore/18/181b5c3c1fcbb52fc05b3574b221bb082c947cae?x-jf-traceId=35bc859a536d58f5&response-content-disposition=attachment%3Bfilename%3D%22botocore-1.19.30-py2.py3-none-any.whl%22&response-content-type=application%2Foctet-stream&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20201204T203404Z&X-Amz-SignedHeaders=host&X-Amz-Expires=30&X-Amz-Credential=AKIASG3IHPL65CZGQFTW%2F20201204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=b1ec32fcb5e63df6e9f57d3dfd2a95d8d2870b480ebf4169ff7b95f4dff0985b""
  Caching due to etag
{noformat}
A subsequent install (after removing the package locally) generated this output:
{noformat}
Collecting botocore
  Created temporary directory: /tmp/pip-unpack-0n6p_cxn
  Looking up ""https://xxxxxxxxxx.jfrog.io/xxxxxxxxxx/api/pypi/pypi/packages/packages/9c/a3/1ee497faf994d180df5d14d456eef1ef46ca1ffce617816faa4ff8164608/botocore-1.19.30-py2.py3-none-any.whl"" in the cache
  No cache entry available
  https://xxxxxxxxxx.jfrog.io:443 ""GET /xxxxxxxxxx/api/pypi/pypi/packages/packages/9c/a3/1ee497faf994d180df5d14d456eef1ef46ca1ffce617816faa4ff8164608/botocore-1.19.30-py2.py3-none-any.whl HTTP/1.1"" 302 None
  Status code 302 not in (200, 203, 300, 301)
  Looking up ""https://jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com/aol-xxxxxxxxxx/filestore/18/181b5c3c1fcbb52fc05b3574b221bb082c947cae?x-jf-traceId=2bd5c2b55a0ca393&response-content-disposition=attachment%3Bfilename%3D%22botocore-1.19.30-py2.py3-none-any.whl%22&response-content-type=application%2Foctet-stream&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20201204T203717Z&X-Amz-SignedHeaders=host&X-Amz-Expires=30&X-Amz-Credential=AKIASG3IHPL65CZGQFTW%2F20201204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=18f1ee33d281ef7cc6a9573cb4f7144bd5c9c6c9d3f485751fb5c84381db1fc9"" in the cache
  No cache entry available
  Starting new HTTPS connection (1): jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com:443
  https://jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com:443 ""GET /aol-xxxxxxxxxx/filestore/18/181b5c3c1fcbb52fc05b3574b221bb082c947cae?x-jf-traceId=2bd5c2b55a0ca393&response-content-disposition=attachment%3Bfilename%3D%22botocore-1.19.30-py2.py3-none-any.whl%22&response-content-type=application%2Foctet-stream&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20201204T203717Z&X-Amz-SignedHeaders=host&X-Amz-Expires=30&X-Amz-Credential=XXXXXXXXHPL65CZGQFTW%2F20201204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=XXXXXXXXd281ef7cc6a9573cb4f7144bd5c9c6c9d3f485751fb5c84381db1fc9 HTTP/1.1"" 200 6987356
  Downloading https://xxxxxxxxxx.jfrog.io/xxxxxxxxxx/api/pypi/pypi/packages/packages/9c/a3/1ee497faf994d180df5d14d456eef1ef46ca1ffce617816faa4ff8164608/botocore-1.19.30-py2.py3-none-any.whl (7.0 MB)
  Updating cache with response from ""https://jfrog-prod-use1-shared-virginia-main.s3.amazonaws.com/aol-xxxxxxxxxx/filestore/18/181b5c3c1fcbb52fc05b3574b221bb082c947cae?x-jf-traceId=2bd5c2b55a0ca393&response-content-disposition=attachment%3Bfilename%3D%22botocore-1.19.30-py2.py3-none-any.whl%22&response-content-type=application%2Foctet-stream&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20201204T203717Z&X-Amz-SignedHeaders=host&X-Amz-Expires=30&X-Amz-Credential=XXXXXXXXHPL65CZGQFTW%2F20201204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=XXXXXXXX3d281ef7cc6a9573cb4f7144bd5c9c6c9d3f485751fb5c84381db1fc9""
  Caching due to etag
{noformat}
Note particularly that while the original URL is the same in both cases, the redirection URL is different. And also that the cache entry is _saved_ both times.

By manual inspection, the pip cache (emptied before starting) now contains multiple artifacts with exactly the same size but different keys. Over time, this consumes more and more disk space, as well as increased bandwidth charges from Artifactory.",JFrog Cloud,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc63y6:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Dec/20 9:37 PM;alund;This may be related to changes in pip's caching. See for example [https://github.com/pypa/pip/pull/8960], where they explicitly reject caching based on the original URL.",,,,,,,,,,
Created new NUGET package and item is not available from Artifactory source,RTFACT-24152,120064,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,simonjefferies,simonjefferies,04/Dec/20 3:13 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Artifactory,,,,,,,0,,,,,,"Pushed a new nuget package to artifactory.  Item showing on artifactory browser and appears no different to other packages.

Call *nuget list* to see list of nuget packages and item was missing. This occurs on all PC's that tries to get the NUGET package from artifactory.  Visual Studio using nuget package manager does not show the item either.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc63sm:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Scoped npm packages have incorrect paths resulting in verbose Yarn log output,RTFACT-24151,120063,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mskelton,mskelton,04/Dec/20 2:55 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,NPM,,,,,,,0,,,,,,"When publishing a scoped npm package to JFrog, the tarball URL is different that what the npm public registry uses.  This issue has been brought up before in RTFACT-16206, but at the time the issues was merely aesthetic in the JFrog dashboard.

However, since the release of Yarn 2, this now has a great impact when using scoped packages as the log output is affected.  When registries don't follow the standard URL pattern for an npm registry, Yarn will append an {{__archiveUrl}} property to packages since it cannot infer the URL from just the package name.  This was explained to me in an issue I opened regarding this issue on Yarn's GitHub repo: [https://github.com/yarnpkg/berry/issues/2192#issuecomment-735833055]

Currently, when publishing a scoped package, the tarball would look something like this:
{code:java}
https://scope.jfrog.io/scope/api/npm/npm-virtual/@scope/package-a/-/@scope/package-a-1.1.0.tgz
{code}
But the correct URL is this:
{code:java}
https://scope.jfrog.io/scope/api/npm/npm-virtual/@scope/package-a/-/package-a-1.1.0.tgz
{code}
As you can see, the scope should be present immediately after the registry url, but *NOT* after the {{/-/}} portion of the url.

This results in log output that looks like this when installing packages in Yarn 2 which greatly complicates reading the logs due to the archive url being present in each log line.
{code:java}
➤ YN0041: │ @company/package-a@npm:10.11.0::__archiveUrl=https://company.registry.com/company/api/npm/npm-virtual/@company/package-a/-/@company/package-a-10.11.0.tgz: Invalid authentication (as an anonymous user)
➤ YN0041: │ @company/package-b@npm:10.11.0::__archiveUrl=https://company.registry.com/company/api/npm/npm-virtual/@company/package-b/-/@company/package-b-10.11.0.tgz: Invalid authentication (as an anonymous user)
➤ YN0041: │ @company/package-c@npm:10.11.0::__archiveUrl=https://company.registry.com/company/api/npm/npm-virtual/@company/package-c/-/@company/package-c-10.11.0.tgz: Invalid authentication (as an anonymous user)
➤ YN0041: │ @company/package-d@npm:10.11.0::__archiveUrl=https://company.registry.com/company/api/npm/npm-virtual/@company/package-d/-/@company/package-d-10.11.0.tgz: Invalid authentication (as an anonymous user)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc63se:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Downloading logs from Artifactory UI the file name is seen as null.,RTFACT-24115,119890,Bug,Ready for Code Review,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tomern,divijak,divijak,02/Dec/20 10:58 PM,16/Feb/21 8:56 AM,18/Feb/21 8:59 AM,,7.11.1,7.11.2,,,,,,,,,,,,,2,P1,,,,,"*Problem description:*  While clicking on the Download link in the Artifactory System Logs in theArtifactory UI. The file name is seen as *null*, see the attached screenshot.

*What is the expected behavior?* While downloading the logs from the UI the file name should be saved by the log name example (artifactory-service,artifactory-request), which was working in the earlier versions verified in 7.6.2

*Steps to reproduce:* In the Artifactory UI Admin->Artifactory -> Advanced -> System logs -> Download.
On clicking Download the file name is seen as *null*, see the attached screenshot.",,,,,,,,,,,,,,,,,,,"02/Dec/20 10:58 PM;divijak;Save.jpg;https://www.jfrog.com/jira/secure/attachment/48761/Save.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc40lf:",Yes,,Yes,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Dec/20 11:02 PM;divijak;*The customer pain level: 2*  

the customer has 2 instances one in the older version(7.7.8) that is working fine and one in the latest(7.11.2) comparing them customer is dissatisfied.",,,,,,,,,,
"By default, the artifactory.docker.cleanup.uploadsTmpFolderJobMillis property is configured to a value of 1000 days instead of 1 day.",RTFACT-24106,119850,Bug,Ready for Code Review,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,omrin,omerh,omerh,02/Dec/20 12:55 PM,10/Feb/21 8:44 AM,18/Feb/21 8:59 AM,,7.10.7,,,,,,,,,,,,,,0,,,,,," The job that searches for all temp folders (_uploads) in local Docker repositories and deletes the files that are older than a day is supposed to run by default once a day.

 

The job can be customized through the ~artifactory.docker.cleanup.uploadsTmpFolderJobMillis~ property, but the default value is 86400000(1000 days).",,,,,,,,,,,,,RTFACT-23288,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzr12f:r3",,,Yes,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Recalculating index of a virtual Debian repository is calculating the remote repository cache,RTFACT-24102,119714,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,hanank,hanank,01/Dec/20 7:07 PM,09/Feb/21 8:34 AM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,Debian,,,,,,0,,,,,,"*Description:*

When recalculating the index of a virtual Debian repository, in case there is  a remote repository under the virtual repository, the recalculate index process will apply to them as well. In some cases, it will throw exceptions in Artifactory logs.

*How to reproduce:*
 # Create a virtual Debian repository with a remote virtual repository
 # Prive [http://security.debian.org/] as the URL for the remote repository
 # Configure the Debian client as described under the Set Me Up menu and anotate the following to the repository URL 
{code:java}
buster/updates main contrib non-free{code}

 # Run apt update
 # Recalculate the virtual repository index",Artifactory 7.11.2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc61wm:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory RPM defines wrong directory in Crontab entry for logrotate,RTFACT-24086,119666,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kPshi,kPshi,01/Dec/20 2:02 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,7.10.6,,,,,,,,,,,,,,0,,,,,,"When installing Artifactory it also introduces a line into the crontab of the artifactory user:

{{/opt/jfrog/artifactory/app/third-party/logrotate/logrotate /opt/jfrog/artifactory/var/etc/logrotate/logrotate.conf --state /opt/jfrog/artifactory/var/etc/logrotate/logrotate-state}}

WIth incorrect directories for both the configuration and the state file. Both are actually located in

{{/var/opt/jfrog/artifactory/etc/logrotate/}}

while the given directory does not even exist.

The bug may also occur in other versions but I did not put the effort in to find out which ones.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc61na:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
npm.disttag properties are not being handled as expected within a virtual repository.,RTFACT-24072,119506,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerh,omerh,30/Nov/20 11:28 AM,09/Feb/21 8:37 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"*Problem description:* npm.disttag properties are not being handled as expected within a virtual repository in a use case when there are two local repositories when 1 one the repositories is a regular local repository and 1 one of the repositories is a repo with pull replication configured from another local repository.  

*Steps to reproduce:* 

1*.* Create two Artifactory instances ""test-1"" and ""test-2"" with full-mesh topology.
 * Within each instance create a virtual repository ""npm-release""
 * Within test-1 create a local npm repository ""npm-release-2-local"" with all default settings
 * Within test-2 create a local npm repository ""npm-release-1-local"" with all default settings
 * Within test-1 create a local npm repository ""npm-release-1-local"" that has replication set to the npm-release-1-local within test-2, and has ""Enable Event Replication"" checked
 * Within test-2 create a local npm repository ""npm-release-2-local"" that has replication set to the npm-release-2-local within test-1, and has ""Enable Event Replication"" checked
 * Within test-1 add npm-release-1-local and npm-release-2-local to the npm-release virtual repository in that order, and set the default deployment registry to npm-release-1-local
 * Within test-2 add npm-release-2-local and npm-release-1-local to the npm-release virtual repository in that order, and set the default deployment registry to npm-release-2-local

 # Create a dummy npm project with the version set to 1.0.0-beta.1 and the publishConfig registry set to the npm-release of test-1

2.a. The package.json file of the npm project

~{~

  ~""name"": ""@i416951/dist-tag-testing"",~

  ~""version"": ""1.0.0-beta.1"",~

  ~""description"": ""a"",~

  ~""main"": ""index.js"",~

  ~""scripts"":~

~

{     ""test"": ""echo \""Error: no test specified\"" && exit 1""   }

~

~,~

  ~""author"": """",~

  ~""license"": ""ISC"",~

  ~""publishConfig"":~

~

{     ""registry"": ""http://mill.jfrog.team:12053/artifactory/api/npm/npm-release/""   }

~

~}~

 

2.b. Publish the npm package with the tag beta to  npm-release of test-1

~npm cache clean --force && npm publish --tag beta --dd~

~...~

 ~~ 

~npm http fetch PUT 201 [http://mill.jfrog.team:12053/artifactory/api/npm/npm-release/@i416951%2fdist-tag-testing] 598ms~

~+ @i416951/dist-tag-testing@1.0.0-beta.1~

 

2.c watch all of the dist-tags for the package from npm-release of test-1

 

~npm cache clean --force && npm dist-tag ls @i416951/dist-tag-testing --registry=[http://mill.jfrog.team:12053/artifactory/api/npm/npm-release/]~

~npm WARN using --force Recommended protections disabled.~

{color:#57d9a3}~beta: 1.0.0-beta.1~{color}

{color:#57d9a3}~latest: 1.0.0-beta.1~{color}

 

3.a Change the npm version in the package.json file to 1.0.0-beta.2

3.b  Publish the npm package with the tag beta to npm-release of test-1

~npm cache clean --force && npm publish --tag beta --dd~

~...~

 ~npm http fetch PUT 201 [http://mill.jfrog.team:12053/artifactory/api/npm/npm-release/@i416951%2fdist-tag-testing] 555ms~

~+ @i416951/dist-tag-testing@1.0.0-beta.2~

3.c  watch all of the dist-tags for the package  from npm-release of test-1

~npm cache clean --force && npm dist-tag ls @i416951/dist-tag-testing --registry=[http://mill.jfrog.team:12053/artifactory/api/npm/npm-release/]~

~npm WARN using --force Recommended protections disabled.~

{color:#57d9a3}~beta: 1.0.0-beta.2~{color}

{color:#57d9a3}~latest: 1.0.0-beta.1~{color}

4.a Change the npm version in the package.json file to 1.0.0-beta.3

4.b Change the publishConfig registry to the test-2 Artifactory instance and publish the package to npm-release of test-2

~npm cache clean --force && npm publish --tag beta --dd~

~npm http fetch PUT 201 [http://mill.jfrog.team:12109/artifactory/api/npm/npm-release/@i416951%2fdist-tag-testing] 578ms~

~+ @i416951/dist-tag-testing@1.0.0-beta.3~

4.c watch all of the dist-tags for the package from npm-release of test-1

 

~npm cache clean --force && npm dist-tag ls @i416951/dist-tag-testing --registry=[http://mill.jfrog.team:12053/artifactory/api/npm/npm-release/]~

~npm WARN using --force Recommended protections disabled.~

{color:#57d9a3}~beta: 1.0.0-beta.3~{color}

{color:#de350b}~latest: 1.0.0-beta.3~{color}

 

 

In step 4.c we can see that the latest tag is 1.0.0-beta.3 while the expected behavior is that the latest tag will be 1.0.0-beta.1.

 

Attached an example from the npmjs registry of what is the expected behavior.

 ",,,,,,,,,,,,,,,,,,,"30/Nov/20 11:27 AM;omerh;image.png;https://www.jfrog.com/jira/secure/attachment/48654/image.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc60om:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Xray Indexer Panics with ""index out of range""",RTFACT-24068,119445,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,clarker,clarker,30/Nov/20 12:02 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.6.2,,,,,,,Xray,,,,,,,0,,,,,,"Xray-indexer occasionally logs the following error.


2020-11-29T23:37:56.368Z [jfxid] [ERROR] [                ] [panic:88                      ] [main                ] error handling : recover from indexer failure runtime error: index out of range [1] with length 1: goroutine 99 [running]:
runtime/debug.Stack(0xc001ba9720, 0x1f98b00, 0xc0185feda0)
	/usr/local/go/src/runtime/debug/stack.go:24 +0x9f
jfrog.com/xray/internal/archiver.(*ArchiveManager).IndexFile.func1(0x34d3860, 0xc000046070)
	/go/src/jfrog.com/xray/internal/archiver/archive_mgr.go:142 +0x57
panic(0x1f98b00, 0xc0185feda0)
	/usr/local/go/src/runtime/panic.go:969 +0x175
jfrog.com/xray/internal/archiver/extractor.(*LinuxExtractor).ReadMetadata(0xc008574a70, 0x34d3860, 0xc000046070, 0x34a2740, 0xc01858ad10, 0xc000b8f4a0, 0x4f, 0x0, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/archiver/extractor/extractor.go:102 +0x908
jfrog.com/xray/internal/archiver/extractor.GetArchiveMetadata(0x34d3860, 0xc000046070, 0x34e84c0, 0xc008574a40, 0xc000b8f4a0, 0x4f, 0x34a2740, 0xc01858ad10, 0xc011c19840, 0x40, ...)
	/go/src/jfrog.com/xray/internal/archiver/extractor/extractor.go:53 +0x97
jfrog.com/xray/internal/archiver/extractor/deb.(*DebExtractor).GetComponent(0xc008574a40, 0x34d3860, 0xc000046070, 0xc016757994, 0x7, 0xc000b8f4a0, 0x4f, 0x34a2740, 0xc01858ad10, 0xc011c19840, ...)
	/go/src/jfrog.com/xray/internal/archiver/extractor/deb/deb_extractor.go:68 +0x9d
jfrog.com/xray/internal/archiver/archive_helper.(*archiveHelper).GetComponentData(0xc0074df7b0, 0x34d3860, 0xc000046070, 0xc016800000, 0xc016757994, 0x7, 0xc000b8f4a0, 0x4f, 0xc011c19840, 0x40, ...)
	/go/src/jfrog.com/xray/internal/archiver/archive_helper/archive_helper.go:63 +0x218
jfrog.com/xray/internal/archiver.(*ArchiveManager).addParentComponentData(0xc008574b00, 0x34d3860, 0xc000046070, 0xc016800000, 0xc016757994, 0x7, 0xc000b8f4a0, 0x4f, 0xc011c19840, 0x40, ...)
	/go/src/jfrog.com/xray/internal/archiver/archive_mgr.go:439 +0xe4
jfrog.com/xray/internal/archiver.(*ArchiveManager).updateParentWithMetadata(0xc008574b00, 0x34d3860, 0xc000046070, 0xc0184db400, 0xc016800000, 0x7fe11d5d31f8, 0xc018695170, 0xc01680b0a0, 0x6a)
	/go/src/jfrog.com/xray/internal/archiver/archive_mgr.go:306 +0x1da
jfrog.com/xray/internal/archiver.(*ArchiveManager).IndexFile(0xc008574b00, 0x34d3860, 0xc000046070, 0xc0184db400, 0x7fe11d5d31f8, 0xc018695170, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/archiver/archive_mgr.go:166 +0x2de
jfrog.com/xray/internal/archiver.(*RegularDockerLayerFile).IndexFile(0xc018695190, 0x7fe11d5d31f8, 0xc018695170, 0x7fe11d5d31f8, 0xc018695170)
	/go/src/jfrog.com/xray/internal/archiver/docker_layer_tar.go:345 +0x65
jfrog.com/xray/internal/archiver.DockerLayerTarOpener.extractLayerData(0xc008574b00, 0x34d38e0, 0xc0194ca510, 0xc00d4ac600, 0xb2, 0xc008574b00, 0xc016800000, 0x34e8340, 0xc004693080, 0xc001baa298, ...)
	/go/src/jfrog.com/xray/internal/archiver/docker_layer_tar.go:188 +0xc1d
jfrog.com/xray/internal/archiver.DockerLayerTarOpener.DeepArchiveScan(0xc008574b00, 0x34d38e0, 0xc0194ca510, 0xc00d4ac600, 0xb2, 0xc016800000, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/archiver/docker_layer_tar.go:63 +0x1d2
jfrog.com/xray/internal/archiver.(*ArchiveManager).IndexFile(0xc008574b00, 0x34d38e0, 0xc0194ca510, 0xc016800000, 0x34a2740, 0xc0075a4790, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/archiver/archive_mgr.go:185 +0x5bc
jfrog.com/xray/internal/archiver.DockerOpener.scanDockerLayer(0x0, 0x0, 0xc008574b00, 0x34d51e0, 0xc0074df7b0, 0x34d38e0, 0xc0194ca510, 0xc00007f9f0, 0xc011c66800, 0xc001baa9f8, ...)
	/go/src/jfrog.com/xray/internal/archiver/docker.go:176 +0x25b
jfrog.com/xray/internal/archiver.DockerOpener.DeepArchiveScan(0x0, 0x0, 0xc008574b00, 0x34d51e0, 0xc0074df7b0, 0x34d38e0, 0xc0194ca510, 0xc016a3a540, 0x70, 0xc0002a2800, ...)
	/go/src/jfrog.com/xray/internal/archiver/docker.go:109 +0xca5
jfrog.com/xray/internal/archiver.(*ArchiveManager).IndexExtFile(0xc008574b00, 0x34d38e0, 0xc0194ca510, 0xc00abdb800, 0x77, 0xc006c4e600, 0x34a2740, 0xc008bd97b8, 0x0, 0x0, ...)
	/go/src/jfrog.com/xray/internal/archiver/archive_mgr.go:106 +0x82f
jfrog.com/xray/internal/events/index.CreatedEvent.IndexStep(0x34b2760, 0x462c878, 0xc008574b00, 0x34a1d40, 0xc00906a770, 0x34efee0, 0xc0089ca100, 0x34f5060, 0xc0074df7e0, 0x34d38e0, ...)
	/go/src/jfrog.com/xray/internal/events/index/created.go:41 +0xf3
jfrog.com/xray/internal/workers.(*IndexWorker).ProcessEvent(0xc00007c840, 0x34d38e0, 0xc0194ca510, 0xc00af15030, 0x68, 0xc006c4e600, 0x34a2740, 0xc008bd97b8, 0x20b5850, 0xe, ...)
	/go/src/jfrog.com/xray/internal/workers/index_worker.go:190 +0x185
jfrog.com/xray/internal/workers.(*IndexWorker).IndexFile(0xc00007c840, 0x34d38e0, 0xc0194ca510, 0xc006c4e600, 0x0, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/workers/index_worker.go:180 +0x25b
jfrog.com/xray/internal/workers.(*IndexWorker).processMsg(0xc00007c840, 0x34d38e0, 0xc0194ca510, 0xc006c4e600, 0x5, 0x0)
	/go/src/jfrog.com/xray/internal/workers/index_worker.go:140 +0x3fa
jfrog.com/xray/internal/workers.(*IndexWorker).ProcessMsg(0xc00007c840, 0x34d38e0, 0xc0194ca510, 0xc0145ab800, 0x3fa, 0x400, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/workers/index_worker.go:91 +0x53a
jfrog.com/xray/internal/open_tracing.ProcessMessageWithContext(0x34d3860, 0xc000046070, 0xc0145ab800, 0x3fa, 0x400, 0xc0194ca480, 0xc00e895888, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/open_tracing/open_tracing_utils.go:71 +0x20d
jfrog.com/xray/internal/xqueue.XChangeHandler.ProcessQueueMessages(0x34d3860, 0xc000046070, 0x34ee040, 0xc00007c840, 0x20a55fa, 0x5, 0x0, 0x0)
	/go/src/jfrog.com/xray/internal/xqueue/exchange_handler.go:453 +0x8da
jfrog.com/xray/internal/service/q_service.QueueService.ProcessWorkerMessages(...)
	/go/src/jfrog.com/xray/internal/service/q_service/queue_service.go:36
jfrog.com/xray/internal/workers/manager.(*workersManager).Work.func1(0x12a05f200, 0xc0078c2240, 0x34ee040, 0xc00007c840, 0x20a55fa, 0x5, 0xc00471e420, 0x34d38e0, 0xc000bf56b0)
	/go/src/jfrog.com/xray/internal/workers/manager/workers_manager.go:88 +0x71
created by jfrog.com/xray/internal/workers/manager.(*workersManager).Work
	/go/src/jfrog.com/xray/internal/workers/manager/workers_manager.go:84 +0x1d5",Deployed with Helm on GKE.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc60d2:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't download vagrant boxes from Jfrog artifactory,RTFACT-24061,119384,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shailygup,shailygup,27/Nov/20 10:27 PM,15/Feb/21 7:38 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,3,artifactory,vagrant,,,,"Recently vagrant updated their version and added a new authentication http header for downloading boxes - the token is now contained in percent escaped encoding ([https://github.com/hashicorp/vagrant/blob/main/CHANGELOG.md#2211-november-05-2020|https://github.com/hashicorp/vagrant/blob/main/CHANGELOG.md#2211-november-05-2020))])

Due to the issue above the authentication to artifactory fails and we can't download any artifacts.

 

Can I guidance on how to go about fixing this erroneous behaviour. ","h3. Host operating system

macOS v10.15.7

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc600e:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Dec/20 2:34 PM;cbantaloukas;This is an issue affecting vagrant version 2.2.11. An [issue has been filed in vagrant's github repo|https://github.com/hashicorp/vagrant/issues/12080].","12/Jan/21 10:33 PM;Kane;Are we expecting anyone from JFrog to take a look at this issue? Or is down to Vagrant, or an open source contributor, to fix this?

To be clear I'm looking for a response from Jfrog, not an opinion from a user like myself.","28/Jan/21 3:30 PM;cbantaloukas;My company pays for both artifactory and vagrant and there has been no response from anyone in both in two months. Not exactly stellar. :(",,,,,,,,
Access service doesn't start after Upgrade 6.10.9 -> 7.X ,RTFACT-24060,119378,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,claudev,claudev,27/Nov/20 9:36 AM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,7.10.5,7.11.2,,,,,,Access,Artifactory,,,,,,2,upgrade,,,,,"After an upgrade from Artifactory 6.10.9 to either 7.10.5 or 7.11.2, the Access service won't start.

No error is seen on the migration.log, but after launching Artifactory for the first time after the upgrade, we can see some errors happening. It seems something goes wrong during the DB migration.
The jdbc driver version in use is the 42.2.18. 
It seems that the postgresql server is closing the connection, causing the jdbc errors as a side effect.
The postgresql server version is 9.5.

 

  +-  catalina.out logs:+
{code:java}
2020-11-27T09:27:49.949L [tomct] [INFO ] [ ] [org.apache.catalina.startup.HostConfig] [org.apache.catalina.startup.HostConfig deployDescriptor] - Deploying deployment descriptor [/opt/jfrog
/artifactory/app/artifactory/tomcat/conf/Catalina/localhost/artifactory.xml] 
2020-11-27T09:27:49.950L [tomct] [INFO ] [ ] [org.apache.catalina.startup.HostConfig] [org.apache.catalina.startup.HostConfig deployDescriptor] - Deploying deployment descriptor [/opt/jfrog
/artifactory/app/artifactory/tomcat/conf/Catalina/localhost/access.xml] 
2020-11-27T09:27:50.072L [tomct] [WARNING] [ ] [org.apache.catalina.startup.HostConfig] [org.apache.catalina.startup.HostConfig deployDescriptor] - A docBase [/opt/jfrog/artifactory/app/art
ifactory/tomcat/webapps/artifactory.war] inside the host appBase has been specified, and will be ignored 
2020-11-27T09:27:50.072L [tomct] [WARNING] [ ] [org.apache.catalina.startup.HostConfig] [org.apache.catalina.startup.HostConfig deployDescriptor] - A docBase [/opt/jfrog/artifactory/app/art
ifactory/tomcat/webapps/access.war] inside the host appBase has been specified, and will be ignored 
2020-11-27T08:27:52.030Z [jfrt ] [INFO ] [f98e720195945eaa] [o.a.c.h.HaNodeProperties:65 ] [ocalhost-startStop-1] - Artifactory is running in non-clustered mode.
2020-11-27T08:27:52.047Z [jfrt ] [INFO ] [f98e720195945eaa] [tifactoryHomeConfigListener:70] [ocalhost-startStop-1] - Resolved Home: '/opt/jfrog/artifactory
2020-11-27T08:27:52.826Z [jfrt ] [INFO ] [ ] [o.j.c.w.FileWatcher:147 ] [Thread-6 ] - Starting watch of folder configurations
2020-11-27T08:27:52.894Z [jfrt ] [INFO ] [f98e720195945eaa] [c.z.h.HikariDataSource:110 ] [ocalhost-startStop-1] - HikariCP Main - Starting...
2020-11-27T08:27:53.015Z [jfrt ] [INFO ] [f98e720195945eaa] [c.z.h.p.PoolBase:535 ] [ocalhost-startStop-1] - HikariCP Main - Driver does not support get/set network timeout for con
nections. (Method org.postgresql.jdbc.PgConnection.getNetworkTimeout() is not yet implemented.)
2020-11-27T08:27:53.052Z [jfrt ] [INFO ] [f98e720195945eaa] [c.z.h.HikariDataSource:123 ] [ocalhost-startStop-1] - HikariCP Main - Start completed.
2020-11-27T08:27:53.105Z [jfrt ] [WARN ] [f98e720195945eaa] [c.z.h.p.ProxyConnection:182 ] [ocalhost-startStop-1] - HikariCP Main - Connection org.postgresql.jdbc.PgConnection@33a3948 marked as broken because of SQLSTATE(0A000), ErrorCode(0)
java.sql.SQLFeatureNotSupportedException: Method org.postgresql.jdbc.PgConnection.setNetworkTimeout(Executor, int) is not yet implemented.{code}
  +-  console.log+
{code:java}
2020-11-27T08:27:58.566Z [jfmd ] [INFO ] [30873dd2be9c1e3e] [database_bearer.go:100 ] [main ] - Connecting to (db config: {postgresql jdbc:postgresql://PG-DB.example:5000/artifactory}) [database]
2020-11-27T08:27:58.618Z [jfmd ] [INFO ] [30873dd2be9c1e3e] [migrator.go:60 ] [main ] - Applying 44 migrations files [database]
ERRO[2020-11-27T09:27:58+01:00] stat .: permission denied
[INFO ] JFrog Event (jfevt) service initialization started. Version: 7.11.2 (revision: 041af6b53d, build date: 2020-11-19T10:13:57Z) PID: 3592 Home: /opt/jfrog/artifactory
[DEBUG] Resolved system configuration file path: /opt/jfrog/artifactory/var/etc/system.yaml
2020-11-27T08:27:59.123Z [jfmd ] [INFO ] [30873dd2be9c1e3e] [application.go:61 ] [main ] - Metadata (jfmd) service initialization started. Version: v7.11.2 Revision: 041af6b53d5 PID: 3450 Home: /opt/jfrog/artifactory/var [app_initializer]
2020-11-27T08:27:59.130Z [jfmd ] [INFO ] [30873dd2be9c1e3e] [server_bearer.go:156 ] [main ] - Got service_id from datastore: jfmd@01eqtq5hzv5grfre69k7phxj3r [ServerInit]
events.js:174
throw er; // Unhandled 'error' event
^

Error: spawn /opt/jfrog/artifactory/app/third-party/node/bin/node EACCES
at Process.ChildProcess._handle.onexit (internal/child_process.js:240:19)
at onErrorNT (internal/child_process.js:415:16)
at process._tickCallback (internal/process/next_tick.js:63:19)
at Function.Module.runMain (internal/modules/cjs/loader.js:834:11)
at startup (internal/bootstrap/node.js:283:19)
at bootstrapNodeJSCore (internal/bootstrap/node.js:623:3)
Emitted 'error' event at:
at Process.ChildProcess._handle.onexit (internal/child_process.js:246:12)
at onErrorNT (internal/child_process.js:415:16)
[... lines matching original stack trace ...]
at bootstrapNodeJSCore (internal/bootstrap/node.js:623:3)
2020-11-27T08:28:00.227Z [jfrou] [INFO ] [26b9b5086d706c5b] [config_holder.go:107 ] [main ] - Configuration update detected
2020-11-27T08:28:02.794Z [jfrou] [INFO ] [26b9b5086d706c5b] [join_executor.go:163 ] [main ] - Cluster join: Retry 5: Service registry ping failed, will retry. Error: Could n
ot parse error from service registry, status code: 404, raw body: <!doctype html><html lang=""en""><head><title>HTTP Status 404 – Not Found</title><style type=""text/css"">body {font-family:Tahoma,Arial,sans-serif;}
 h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}
</style></head><body><h1>HTTP Status 404 – Not Found</h1></body></html>
2020-11-27T08:28:02.831Z [jfevt] [INFO ] [30e590b5f6c326b6] [access_thin_client.go:105 ] [main ] - Cluster join: Retry 5: Service registry ping failed, will retry. Error: Error
 while trying to connect to local router at address 'http://localhost:8046/access/api/v1/system/ping': Get ""http://localhost:8046/access/api/v1/system/ping"": dial tcp 127.0.0.1:8046: connect: connection refused 
[startup]{code}
 

  +-  postgresql server logs:+
{code:java}

2020-11-27 09:27:59 CET [21034]: [3-1] user=USER,db=artifactory ERROR: duplicate key value violates unique constraint ""md_configs_config_name_idx""
2020-11-27 09:27:59 CET [21034]: [4-1] user=USER,db=artifactory DETAIL: Key (config_name)=(service_id) already exists.
2020-11-27 09:27:59 CET [21034]: [5-1] user=USER,db=artifactory STATEMENT: INSERT INTO md_configs (id,config_name,modified,data) VALUES ($1,$2,$3,$4)
2020-11-27 09:27:59 CET [21034]: [6-1] user=USER,db=artifactory ERROR: duplicate key value violates unique constraint ""md_servers_pkey""
2020-11-27 09:27:59 CET [21034]: [7-1] user=USER,db=artifactory DETAIL: Key (id)=(ARTIFACTORY-SERVER) already exists.
2020-11-27 09:27:59 CET [21034]: [8-1] user=USER,db=artifactory STATEMENT: INSERT INTO md_servers (id,created,modified,version,last_heartbeat,base_url,node_unique_id) VALUES ($1,$2,$3,$4,$5,$6,$7){code}
 

 

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5zz2:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Nov/20 1:59 PM;claudev;During the upgrade, an old jdbc driver originally located at /opt/jfrog/artifactory/tomcat/lib/postgresql.jar was copied into the new tomcat lib folder. Despite the new jdbc driver was bootstrapped, it seems that the old driver is still used.","04/Dec/20 1:33 PM;sean.mcafee;This just happened to me on a 7.6.3 -> 7.11.5 upgrade.  In my case, the conflicting JARs were:
{code:java}
-rwxrwxr-x 1 artifactory artifactory 930498 Nov 29 12:54 /opt/jfrog/artifactory/app/artifactory/tomcat/lib/postgresql-42.2.12.jar
-rwxrwxrwx 1 artifactory artifactory 680445 Jan 13 2017 /opt/jfrog/artifactory/app/artifactory/tomcat/lib/postgresql-9.4.1212.jar{code}
I moved postgresql-9.4.1212.jar out of the way purely based on mtime, restarted, and things went as expected.

This is an RPM-based install that's been upgraded in-place for a couple of years.

(Claude, thanks for filing this and providing an update, you saved me here!)",,,,,,,,,
"""Maven Indexer"" is indexing all the virtual repositories irrespective of the repositories selected",RTFACT-24058,119341,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tataraov,tataraov,26/Nov/20 4:32 PM,10/Feb/21 8:44 AM,18/Feb/21 8:59 AM,,6.23.1,7.10.2,,,,,,,,,,,,,0,,,,,,"Issue: 

When we enable maven indexer, we can select maven related local, remote and virtual repositories for indexing. For more details, please refer our documentation.
 [https://www.jfrog.com/confluence/display/JFROG/Maven+Indexer]

Even though, we didn't select any of the virtual repositories, Maven indexer is indexing all of the virtual repositories configured in Artifactory.

Reproduction steps:
 # Create a maven and few other repositories in an Artifactory instance (6.x or 7.X)
 # In ""Maven Indexer"" section select only one local repository and trigger ""Run Indexing Now""
 # Check the Artifactory logs which says indexing local repository(which we selected) then indexes all the virtual repositories available in Artifactory.

Logs:

I have tried issue reproduction with 6.x and 7.X latest version and it seems the Maven Indexer is indexing all the virtual repositories along with the specified maven local repository(libs-snapshot-local).
 2020-11-24 08:35:19,807 [http-nio-8081-exec-4] [INFO ] (o.a.m.i.MavenIndexerServiceImpl:115) - Activating indexer manually
 2020-11-24 08:35:19,809 [art-exec-206] [INFO ] (o.a.m.i.MavenIndexerServiceImpl:136) - Starting Maven indexing
 2020-11-24 08:35:19,809 [art-exec-206] [INFO ] (o.a.m.i.MavenIndexerServiceImpl:157) - Starting non virtual repositories indexing...
 2020-11-24 08:35:19,810 [art-exec-206] [INFO ] (o.a.m.i.MavenIndexerServiceImpl:159) - Non virtual repositories to index: [libs-snapshot-local]
 2020-11-24 08:35:20,355 [art-exec-206] [INFO ] (o.a.m.i.MavenIndexManager:268) - Successfully saved index file 'libs-snapshot-local:.index/nexus-maven-repository-index.gz' and index info 'libs-snapshot-local:.index/nexus-maven-repository-index.properties'.
 2020-11-24 08:35:20,357 [art-exec-206] [INFO ] (o.a.m.i.MavenIndexerServiceImpl:215) - Virtual repositories to index: [bower, chef, conan, conda, cran, debian, docker, gems, gitlfs, go, gradle-dev, gradle-release, helm, ivy-dev, ivy-release, libs-release, libs-snapshot, npm, nuget, puppet, pypi, rpm, sbt-dev, sbt-release]",,,,,,,,,,,,,,,,,,,"15/Dec/20 11:33 AM;tataraov;artifactory-thread-dump.txt;https://www.jfrog.com/jira/secure/attachment/49171/artifactory-thread-dump.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5b27:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Access Token authentication fails with Alpine repositories,RTFACT-24055,119292,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,26/Nov/20 9:27 AM,09/Feb/21 9:01 AM,18/Feb/21 8:59 AM,,7.10.5,,,,,,,,,,,,,,0,,,,,,"When attempting to use Access Token to authenticate with the Alpine repositories, running $apk update will fail with the following response:
{code:java}
WARNING: Ignoring APKINDEX.8f90311a.tar.gz: No such file or directory 2 errors; 14 distinct packages available
{code}
However, when configuring Debian/RPM repositories, similarly to the APK client, the authentication is successful and we are able to update the repositories and install packages from Artifactory.
 *Steps to reproduce:*

1. Generate an Access Token, as follows:
{code:java}
curl -uUSERNAME:APIKEY -X POST ""https://davidp.jfrog.io/davidp/api/security/token"" -d ""username=abc-token"" -d ""scope=member-of-groups:admins-group""
{code}
2. Configure the APK client with the newly generated Access Token:
{code:java}
https://abc-token:ACCESS_TOKEN@davidp.jfrog.io/artifactory/alpine/v3.11/main https://abc-token:ACCESS_TOKEN@davidp.jfrog.io/artifactory/alpine/v3.11/community
{code}
3. Run APK update
 *Expected Response:*

The update should be successful and present the number of packages in the Alpine repositories.

*Actual Response:*

The update command fails with the error mentioned above.

This is working with other Package Types and was tested successfully with RPM and Debian repositories.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5zku:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
JFrog Artifactory Deployer task gives RemoteException error,RTFACT-24036,119099,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,celestial,celestial,24/Nov/20 9:49 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Hi,

I have incorporated 
Task : JFrog Artifactory Deployer
Version : 2.1.2
in our Azure Devops server 2019 pipeline post build.
This task passes as 'orange' like this(!) instead of 'Green' even though the command is success.
Log below:
 
*##[section]Starting: Publish ABCD.zip
==============================================================================
Task : JFrog Artifactory Deployer
Description : This task helps you to deploy generic build result artifacts to Artifactory
Version : 2.1.2
Author : jfrog
Help : Upload artifacts to JFrog Artifactory using JFrog Artifactory cli.
==============================================================================
Preparing task execution handler.
Executing the powershell script: C:\TFSAgents\_work\_tasks\JFrogArtifactoryDeployer_07fc5c20-6772-11e5-abde-6901d3d00465\2.1.2\ArtifactoryDeploy.ps1
Entering JFrog Artifactory Deployer task


Import modules


running 'C:\TFSAgents\_work\3\jfrog.exe' rt upload 'E:\\something\\ABCD.zip' 'toTHISlocatoinINartifactory' --url=http://something --user=*** --password=***


##[error]System.Management.Automation.RemoteException: [Info] [Thread 2] Uploading artifact: E:\something\ABCD.zip
{
""status"": ""success"",
""totals"": {
""success"": 1,
""failure"": 0
}
}
##[error]PowerShell script completed with 1 errors.
##[section]Finishing: Publish ABCD.zip*

This is not crucial as the step is passing but due to the orange status of this task the overall pipeline status changes to orange which is not very pleasing after a while.
I have tried to check and uncheck 'continue on error' and 'enable build information'. could you please let me know what am I missing here to get this error even though the task is success? Thanks",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5yge:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
artifactory join key and master key not getting generated on fresh install (7.10.2),RTFACT-24013,118913,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rajeshbhagam,rajeshbhagam,22/Nov/20 6:02 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,7.10.2,,,,,,,,,,,,,,0,artifactory,,,,,"artifactory join key and master key not getting generated on fresh install (7.10.2). Even after configuring master and join key manually, application not coming up.

Getting below error.

Cluster join: Retry 180: Service registry ping failed, will retry. Error: Error while trying to connect to local router at address 'http://localhost:8046/access': Get ""http://localhost:8046/access/api/v1/system/ping"": dial tcp [::1]:8046: connect: connection refused [access_client]
2020-11-22T17:53:25.136Z ^[[34;1m[jfmd ]^[[0m ^[[31;1m[ERROR]^[[0m [73dd972711ca9c78] [accessclient.go:63 ] [main ] - Failed initializing Access client: Cluster join: Service registry ping failed; context deadline exceeded. last error: Error while trying to connect to local router at address 'http://localhost:8046/access': Get ""http://localhost:8046/access/api/v1/system/ping"": dial tcp [::1]:8046:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5xd2:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Bintray -> API key -> Uncaught ReferenceError: widgets is not defined,RTFACT-24012,118844,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Xahon,Xahon,21/Nov/20 2:27 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"On page [https://bintray.com/user/askForApiKeyPassword?tab=accounts&filterByRepo=&filterByPkg=&pkgPath=&repoPath=&versionPath=&artifactPath=&username=MYUSERNAME|https://bintray.com/user/askForApiKeyPassword?tab=accounts&filterByRepo=&filterByPkg=&pkgPath=&repoPath=&versionPath=&artifactPath=&username=xahon]

i can't get my API key

Error in the console

!image-2020-11-21-21-26-48-025.png!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5wza:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
frontend-service.log contains coloring sequences,RTFACT-24007,118808,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,20/Nov/20 8:35 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.10.6,,,,,,,,,,,,,,0,,,,,,"The frontend-service.log file contains characters to color the output which interferes with parsing the log using log collecting software like logstash.

No other logfile, except console.log, have these coloring sequences.

Example from viewing frontend-service.log with `less`:
{noformat}
2020-11-18T12:07:42.644Z ESC[33m[jffe ]ESC[39m ESC[34m[INFO ]ESC[39m [                ] [                              ] [main                ] - frontend (jffe) service initialization started. Version: 1.10.9 Revision: 10000009 PID: 4966 Home: /opt/jfrog/artifactory{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5wri:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Propagate Query Params in smart remote repo pointing to Virtual doesn't work ,RTFACT-23996,118650,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,Maayana,Maayana,18/Nov/20 4:32 PM,09/Feb/21 9:04 AM,18/Feb/21 8:59 AM,,6.22.0,7.10.6,,,,,,,,,,,,,3,,,,,,"*Problem description*

Assuming propagate Query Params is enabled, any request containing query params from smart remote repository (which points to a virtual repo) will not propagate the parameters. 

Smart remote -> virtual (doesn't propagate)

Smart remote -> remote (propagation works)

*What is the expected behavior?*

The smart remote repository should be able to propagate the query params, the same as seen with smart remote proxying remote repository.

*Steps to reproduce:*

1.Set up two Artifactory instances - Art1 Art2 

2.Configure smart remote repository in Art2 pointing to a Virtual repo in Art1 

3.Make sure to enable ""Propoagte query params"" in the advanced configuration of all repos

4.cURL a request against Art2 smart remote including the query parameters 

5.Set up Charles or use HTTP loggers on Art1 and note the request is not passing with the parameters

*Possible workaround:*

In order for the query parameters to be propagated in smart remote, we should point to the remote repository directly (without using virtual repo).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5vvs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
500 in the UI when indexing all repositories when repositories have long names,RTFACT-23984,118509,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ezekielk,ezekielk,17/Nov/20 7:24 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"*Problem description:* 
 * when indexing all repos in xray you will receive a 500 error in the artifactory UI if the repository names are long

*What is the expected behavior?* 
 * It is expected that indexing all repos should index all repos without error regardless of its name length since it works for repos with shorter names (i.e. test-repo-

*Steps to reproduce:* To reproduce this I made 500 repos with the names test-repo 1 all the way to test-repo-500 and a second set of 300 repos named rest-repoiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-1 to rest-repoiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii-300. The batch with shorter names worked when indexing all repos but the second batch threw a 500 error in the UI and this error in the xray-server-service log:

2020-11-17T19:06:10.107Z [jfxr ] [ERROR] [ ] [index_handler:384 ] [main ] invalid character '<' looking for beginning of value

 

*Possible workaround:* A workaround would be to index each repo 1 by 1 or in very small groups",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5v3s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Vagrant API seems to have a rate limit,RTFACT-23964,118248,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefan.lengauer,stefan.lengauer,16/Nov/20 9:24 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.7.3,,,,,,,REST API,Vagrant,,,,,,0,,,,,,"Hi,

a week ago we updated vagrant in our CI/CD from 2.2.6 to 2.2.13.

Until now it happend two times that all our vagrant tasks were exceeding their max retry counts because of http 403 errors while trying to download box files from artifactory.

We investigated the issue and found that the body of the 403 response contained hints to an existing rate limit (unfortunately I do not have the exact message but something along ""too many requests ... try again in 4 seconds"").

As we have a high (varying) number of distributed vagrant instances running in parallel its not possible to correctly throttle these requests on the client side. It seems that the new vagrant version might have added a new call to the API and its now hitting a limit. 

Is it possible to remove/tune this limit on the artifactory side?","Artifactory 7.7.3
Vagrant 2.2.13
CentOS 7
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5tlc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
smart remote repository encodes + in URL as %20 instead of %2B,RTFACT-23950,118147,Bug,Ready for Code Review,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,igoru,mattheww,mattheww,13/Nov/20 3:27 AM,10/Feb/21 8:44 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Smart remote repository will encode any + in a URL as %20 (decoded for a space), and cause issues.

Expected:
The ""+"" will be encoded as %2B instead of %20

Steps to reproduce:
-Setup two instances. In instance A, deploy a package with a + in the path:
example-repo-local/test/a/b/11.0.6+10/struts2-core-2.0.0.jar
-In Instance B, set up smart remote repo proxying the local repo in instance A. In the tree browser, see how the URL to file has a %20, which is encoding for a +, instead of %2B:
http://mill.jfrog.info:12084/artifactory/test-generic/test/a/b/11.0.6%2010/struts2-core-2.0.0.jar

The above URL 404s. The below URLs will work:
http://mill.jfrog.info:12084/artifactory/test-generic/test/a/b/11.0.6+10/struts2-core-2.0.0.jar
http://mill.jfrog.info:12084/artifactory/test-generic/test/a/b/11.0.6%2B10/struts2-core-2.0.0.jar",,,,,,,,,,,,,,,,RTFACT-23883,RTFACT-22039,,"13/Nov/20 3:27 AM;mattheww;Screen Shot 2020-11-12 at 7.26.57 PM.png;https://www.jfrog.com/jira/secure/attachment/48185/Screen+Shot+2020-11-12+at+7.26.57+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6qod:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Rquest Content Length field in access-request.log can be UNKNOWN, but should be -1",RTFACT-23940,118042,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,11/Nov/20 8:02 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.10.6,,,,,,,,,,,,,,0,,,,,,"According to the request log documentation the following should be true.
|h5. Request Content Length|The size of the user request in bytes, for example, the size of an uploaded file. -1 if unknown.|

[https://www.jfrog.com/confluence/display/JFROG/Logging#Logging-RequestLog.1]

 

But I managed to get the following line in our `access-request.log`
{noformat}
2020-11-11T19:54:37.308Z|6575439909fcf5e5|127.0.0.1|jf-artifactory@d2cd0dd0-ce85-415f-89fb-974e29c14bc6|PUT|/access/api/v1/users/last_login/tools-a
dmin|204|UNKNOWN|66|4|JFrog Access Java Client/7.10.7 71007900  Artifactory/7.10.6 71006900{noformat}
Note the value `UNKNOWN` instead of `-1` for the _request content length_ field.

I got this message after logging in with a local admin user named `tools-admin`",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5scw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Access tokens for transient user not handled properly,RTFACT-23934,118021,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,skorhone,skorhone,11/Nov/20 4:00 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,Access Tokens,,,,,,,1,security,,,,,"When creating an a time limited access token using transient user's long lived access token we've observed following issues:
 * username for token becomes token:<transient username>
 * access token with time limit is eligible to be used for new access tokens

We've also noted following issue related to transient users:
 * permission of transient user is not visible in API / UI

The first issue, is more or less a cosmetic issue. Obviously it would be nice, if nested tokens had same username as original token and level of nesting was shown in additional field.

The second issue worries me. If someone is able to capture access token, it can be refreshed indefinitely. Imho to prevent refreshing, transient users should only be allowed to either create single level of access tokens or nested access tokens should be set to expire at the same time with their parent.

Third issue is something that we can probably manage with manual bookkeeping or by using playbooks for creating technical accounts. Obviously, I'd prefer, that scope was stored in Artifactory database and that it was visible in Artifactory API. 

I know I shouldn't have bundled all these issues in a single bug report. But without issue templates, writing issue descriptions is just annoying.

We're enterprise customer, if it matters in prioritizing the issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5s88:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory doesn't follow tarball location on npm remote registries which results in 404 ,RTFACT-23931,117998,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jkr,jkr,11/Nov/20 11:41 AM,13/Feb/21 4:37 PM,18/Feb/21 8:59 AM,,6.21.1,7.10.5,,,,,,,,,,,,,7,artifactory,NPM,remote,,,"I'm trying to setup a npm remote registry inside Artifactory. While the registry works perfectly direct with npm, using Artifactory as proxy results in 404 error on a npm install.

Looking at the Artifactory debug logs I could figure out Artifactory ignores the tarball location of the npm package from the metadata and tries to get the package on a specific location after getting the metadata is successfully.

*Scenario:*

Repository URL: [https://example.com/api/v4/packages/npm/]
 Package Name: @jfrog/test-package

On a client side npm install:

1. Artifactory tries to get the metadata of the package first:
 [https://example.com/api/v4/packages/npm/@jfrog%2Ftest-package]
 Answer:
{noformat}
{""name"":""@jfrog/test-package"",""versions"":{""0.1.12"":{""name"":""@jfrog/test-package"",""version"":""0.1.12"",""dist"":{""shasum"":""72faa6e13e034efddb861192d56a12ac483470bd"",""tarball"":""https://example.com/api/v4/projects/1886/packages/npm/@jfrog/test-package/-/@jfrog/test-package-0.1.12.tgz""},""dependencies"":{""jsonpath-plus"":""1.0.0""}}},""dist-tags"":{""latest"":""0.1.12""}}{noformat}
2. Artifactory tries to download the npm packages:
 [https://example.com/api/v4/packages/npm/@jfrog/test-package/-/@jfrog/test-package-0.1.12.tgz]
 Answer: 404 Not Found

Artifactory ignores the tarball location and tries to get the package at 
{noformat}
<repo-url>/<scope>/<name>/-/<scope>/<name>-<version>.tar.gz{noformat}
I would expect that Artifactory tries to download the artifact here: [https://example.com/api/v4/projects/1886/packages/npm/@jfrog/test-package/-/@jfrog/test-package-0.1.12.tgz] It's the URL inside npm metadata of the artifact location.

Related:
 * https://www.jfrog.com/jira/browse/RTFACT-20761
 * https://www.jfrog.com/jira/browse/RTFACT-22879",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5s34:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Feb/21 4:37 PM;jkr;Any status of this ticket? Could some one confirm this? I'm alone?",,,,,,,,,,
maven-metadata.xml corrupted,RTFACT-23929,117924,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreas.pelzer,andreas.pelzer,11/Nov/20 8:40 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Artifactory,,,,,,,0,,,,,,"We recognized already twice an issue, that numerous maven-metadata.xml files in different locations (but usually in the same main folder) of Artifactory were corrupted.
Corruption of the file has been recognized in the way that ""server error 500"" is displayed, when trying to open the file.
We solved the issue locally by removing the affected files. Artifactory recreated them immediately, but then correctly.
The corruption was each time recognized after a complete break down of the server, on which Artifactory and other applications are installed. So far we were not able to find the cause of the break down of the server, it can be related to Artifactory but also to other applications.

Questions:
# is there a possibility to find corrupted files and repair them?
# how can the corruption be avoided at all?",in Docker containers jfrog/artifactory-pro:7.4.3 and postgres:9.6.11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5rwo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
ctr pull return the wrong manifest,RTFACT-23923,117870,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inkognito0609,inkognito0609,10/Nov/20 5:58 PM,26/Jan/21 2:06 AM,18/Feb/21 8:59 AM,,7.10.5,,,,,,,Docker Image,,,,,,,0,,,,,,"We had a problem with pull images on version 7.9.0. The problem was reproduced as in RTFACT-23767 ticket. After upgrading to 7.10.5 it looked like the problem was gone.
But at the moment we again have problems with images created after the update. The problem is reproduced using the ctr utility and when we pull the image through digest by docker.

{code:bash}
ctr image pull docker.artifactory.example.net/test:7c4739ee
docker.artifactory.example.net/test:7c4739ee: resolved |++++++++++++++++++++++++++++++++++++++| 
manifest-sha256:a247a739f18151ae399dd2aeb9a0c654cf06e10de1ed9fdf3dca4df805aec68d: done |++++++++++++++++++++++++++++++++++++++| 
elapsed: 0.2 s total: 0.0 B (0.0 B/s) 
ctr: failed commit on ref ""manifest-sha256:a247a739f18151ae399dd2aeb9a0c654cf06e10de1ed9fdf3dca4df805aec68d"": commit failed: unexpected commit digest sha256:e701b747beae3a96a3a7f57133d18c603e51282bd4cf4c100468ea7d5852221f, expected sha256:a247a739f18151ae399dd2aeb9a0c654cf06e10de1ed9fdf3dca4df805aec68d: failed precondition
{code}

{code:bash}
docker pull docker.artifactory.example.net/test@sha256:a247a739f18151ae399dd2aeb9a0c654cf06e10de1ed9fdf3dca4df805aec68d 

sha256:a247a739f18151ae399dd2aeb9a0c654cf06e10de1ed9fdf3dca4df805aec68d: Pulling from test
manifest verification failed for digest sha256:a247a739f18151ae399dd2aeb9a0c654cf06e10de1ed9fdf3dca4df805aec68d
{code}


pull and after that push by tag change image digest to sha256:5aaf0f7b8777bd585d128911059fa6552f6f24149b71a609aaa327868285a96c
and image pull saccesfully
{code:java}
docker pull docker.artifactory.example.net/test:7c4739ee
docker push docker.artifactory.example.net/test:7c4739ee
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5rmo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Nov/20 10:28 AM;inkognito0609;How can I turn off this improvement? By choosing between two chairs, we would like to choose a successful deployment.",,,,,,,,,,
Wrong Builds are attached to artifacts with the same hash sum,RTFACT-23918,117773,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefan.kaufmann,stefan.kaufmann,10/Nov/20 8:15 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Artifactory,,,,,,,0,,,,,,"We recently set up Builds in our pipelines and we have the following use case:
 * The CI builds the same product for different operating systems in parallel
 * For each OS, a Build is added to artifactory
 ** The builds have a different ""number"" property
 ** The builds list their artifacts which they deployed in the BuildInfo.json
 * Some artifacts (e.g. pom.xml) files may have the same hash sum for different operating systems. But they differ in the version. This is possible since the version is a variable, thus the hash is still the same

Now looking at the ""Builds"" in artifactory, there are actually mutliple ""Builds"" which claim that they produced this artifact. But actually this is totally wrong. The artifact was of course just produced by 1 Build.

!image-2020-11-10-09-10-47-362.png!

 

Even other Builds which produce the artifact with the matching hash sum are associated to this artifact.

 

However, this artifact defines ""*build.number = 2961 : windows-nightly-2 : Tue Nov 10 06:57:21 GMT 2020*"" which uniquely defines which build has produced this artifact. 

It is totally misleading attaching multiple Builds in the ""produced by"" section. At least it should be configurable to only associate the Build with the matching ""build.number"" property and remove the others from the list. Traceability is not possible at all with the current behavior",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5r1k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Nov/20 8:17 AM;stefan.kaufmann;I wanted to attach a screenshot, but it is not possible. How can I share screenshots?",,,,,,,,,,
NuGet V3 deserialization error when installing FSharp.Plotly package,RTFACT-23903,117534,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vigneshs,vigneshs,07/Nov/20 5:40 PM,09/Feb/21 9:35 AM,18/Feb/21 8:59 AM,,6.20.0,6.21.0,6.23.1,7.10.2,7.10.5,,,NuGet,,,,,,,0,,,,,,"*Problem Description:*
Installing the FSharp.Plotly Nuget package using the NuGet V3 protocol fails with deserialization errors.

*Expected Behaviour:*
When using the NuGet V3 protocol, it will use the registration-semver2 endpoint and deserialise the index.json and the package to be resolved

Tried to perform a NuGet install for Stylecop.Analyzers package which also uses registration-semver2 and could install the package
*$ nuget install Stylecop.Analyzers -Source ArtifactoryNuGetV3*


*+Actual Problem+*
This error reported is observed only on FSharp.Plotly package, as the index.json file is having the licenseurl with special characters

*+Error in artifactory.log:+*
{color:#FF0000}2020-11-07T17:37:33.138Z [jfrt ] [ERROR] [4ace15b9092506e ] [etV3VirtualAndRemoteCommon:150] [http-nio-8081-exec-9] - Failed to parse registration for repo: nuget-remote, packageId: fsharp.plotly{color}
{color:#FF0000}org.jfrog.common.JsonParsingException: com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.net.URI` from String ""https://github.com/Timo MÃ¼hlhaus/FSharp.Plotly"": not a valid textual representation, problem: Illegal character in path at index 23: https://github.com/Timo MÃ¼hlhaus/FSharp.Plotly{color}

+*request.log:*+

{color:#FF0000}2020-11-07T17:37:33.141Z|4ace15b9092506e|221.181.191.3|admin|GET|/api/nuget/v3/nuget/registration-semver2/fsharp.plotly/index.json|404|-1|0|519|NuGet Command Line/5.6.0 (Unix 19.6.0.0){color}
+**+

+*Steps to reproduce:*+
Step 1: clear the local cache *$ nuget locals -clear all*
Ste2 2: use the below sample Nuget.config file in the nuget client

{{+*Nuget.config:*+}}
{{<?xml version=""1.0"" encoding=""utf-8""?>}}
{{<configuration>}}
{{ <packageSources>}}
{{ <add key=""nuget.org"" value=""https://api.nuget.org/v3/index.json"" protocolVersion=""3"" />}}
{{ <add key=""Artifactory"" value=""https://artifactory.jfrog.info:8081/artifactory/api/nuget/nuget"" />}}
{{ <add key=""ArtifactoryNuGetV3"" value=""https://artifactory.jfrog.info:8081/artifactory/api/nuget/v3/nuget"" protocolVersion=""3"" />}}
{{ </packageSources>}}
{{ <packageSourceCredentials>}}
{{ <Artifactory>}}
{{ <add key=""Username"" value=""admin"" />}}
{{ <add key=""Password"" value=""vh9mZFXQK2LP885bfTZ25q52Unsh0R/PlFJcK2UkDExxRD93tuPaUyDBmg7aQ3ewE5dh1AsfZb1JJIBMp23xKPZdBONdPbEEN6AgJXwUz6LabZqhQximuVm4uxJEg7Uc0C45cqiV/l8O0dZ3JtYTm3eSk50aOJ64oIBDkMeMzmi00odNWkzXqvnu999lxKleZitvd01C1v+BvxZmqZwNU6pw4xWERpGSKK+qzlh80/+VC7sfxy3PQn4TMdTpXFz4tYjwfbAADVdYOegjgtgv0OqSxBtNHAun3ugG6p3aFgEW3yHIwH8UusJ5juV8CRTZx0vT1wzF/4uE5jmXIm1zmyAHdvXIZqmwVltptusJQK8="" />}}
{{ </Artifactory>}}
{{ <ArtifactoryNuGetV3>}}
{{ <add key=""Username"" value=""admin"" />}}
{{ <add key=""Password"" value=""vh9mZFXQK2LP885bfTZ25q52Unsh0R/PlFJcK2UkDExxRD93tuPaUyDBmg7aQ3ewE5dh1AsfZb1JJIBMp23xKPZdBONdPbEEN6AgJXwUz6LabZqhQximuVm4uxJEg7Uc0C45cqiV/l8O0dZ3JtYTm3eSk50aOJ64oIBDkMeMzmi00odNWkzXqvnu999lxKleZitvd01C1v+BvxZmqZwNU6pw4xWERpGSKK+qzlh80/+VC7sfxy3PQn4TMdTpXFz4tYjwfbAADVdYOegjgtgv0OqSxBtNHAun3ugG6p3aFgEW3yHIwH8UusJ5juV8CRTZx0vT1wzF/4uE5jmXIm1zmyAHdvXIZqmwVltptusJQK8="" /> }}
{{ </ArtifactoryNuGetV3>}}
{{ </packageSourceCredentials>}}
{{</configuration>}}

Step 3: Install the FSharp.Plotly using V3 feed using below command
*$ nuget install FSharp.Plotly -Source ArtifactoryNuGetV3*

+*Tested versions:*+

7.10.5, 7.10.2, 6.23.1, 6.20.0, 6.21.0",,,,,,,,,,,,,RTFACT-20896,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5pm0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
issue with RHEL 8 repo creation,RTFACT-23894,117511,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,snape,snape,06/Nov/20 4:02 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.10.2,7.10.5,,,,,,Artifactory,,,,,,,4,,,,,,"Seem to have hit a bug where RHEL Streams cause a problem in Artifactory.

Would appear that Artifactory not handling app streams in RHEL 

upgrade from 8.1 to 8.2 app stream 

 

[https://www.jfrog.com/confluence/display/RTF6X/RPM+Repositories#RPMRepositories-DeployingRPMPackages]

see similar message to this 

Problem 1: cannot install both authselect-1.1-1.el8.x86_64 and authselect-1.0-13.el8.x86_64
 - package authselect-compat-1.0-13.el8.x86_64 requires authselect(x86-64) = 1.0-13.el8, but none of the providers can be installed
 - cannot install the best update candidate for package authselect-1.0-13.el8.x86_64

 ",see details above,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5ph4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Nov/20 12:30 PM;snape;TESTING completed for reference.

1) Yum update with repo provided by RedHat subscription as per standard method

Yum update works as expected

2)

Downloaded latest AppStream and BaseOS repos for RHEL 8.2/3 to local FS with REPOSYNC RedHat command

Created new LOCAL FS repo (disabled RH subscription repo)

yum update would work as expected 

3)

uploaded all app stream and base os RPMS to artifactory 

uploaded modules.yaml to the repodata for App stream and issued a re-index to generate the <>modules.yaml.gz and updates repomd.xlm

 

update repo list to use Artifactory repo

Yum update below:

 

Updating Subscription Management repositories.
repo id repo name
ART_Appstream ART_Appstream
ART_BaseOS ART_BaseOS
[root@localhost yum.repos.d]# 
[root@localhost yum.repos.d]# 
[root@localhost yum.repos.d]# cat ^C
[root@localhost yum.repos.d]# ls
error.out local_fs.repo.KEEP local.repo.KEEP redhat.repo.KEEP
local.FS.KEEP local.repo redhat.repo
[root@localhost yum.repos.d]# cat local.repo
[ART_Appstream]
name=ART_Appstream
baseurl=http://10.0.2.2:8082/artifactory/os-patching/RedHat/8/RHOS82-202011/AppStream
enabled=1
gpgcheck=0
#REMOVE
[ART_BaseOS]
name=ART_BaseOS
baseurl=http://10.0.2.2:8082/artifactory/os-patching/RedHat/8/RHOS82-202011/BaseOS
gpgcheck=0
enabled=1
[root@localhost yum.repos.d]# yum update
Updating Subscription Management repositories.
Last metadata expiration check: 1:24:54 ago on Tue 10 Nov 2020 05:50:56 EST.
Error: 
 Problem 1: cannot install both platform-python-3.6.8-31.el8.x86_64 and platform-python-3.6.8-15.1.el8.x86_64
 - package anaconda-core-33.16.3.26-2.el8_3.x86_64 requires /usr/libexec/platform-python, but none of the providers can be installed
 - cannot install the best update candidate for package platform-python-3.6.8-15.1.el8.x86_64
 - cannot install the best update candidate for package anaconda-core-29.19.1.13-1.el8.x86_64
 Problem 2: package platform-python-3.6.8-15.1.el8.x86_64 requires python3-libs(x86-64) = 3.6.8-15.1.el8, but none of the providers can be installed
 - cannot install both python3-libs-3.6.8-31.el8.x86_64 and python3-libs-3.6.8-15.1.el8.x86_64
 - cannot install both python3-libs-3.6.8-15.1.el8.x86_64 and python3-libs-3.6.8-31.el8.x86_64
 - package anaconda-widgets-33.16.3.26-2.el8_3.x86_64 requires /usr/libexec/platform-python, but none of the providers can be installed
 - cannot install the best update candidate for package python3-libs-3.6.8-15.1.el8.x86_64
 - cannot install the best update candidate for package anaconda-widgets-29.19.1.13-1.el8.x86_64
(try to add '--allowerasing' to command line to replace conflicting packages or '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)
[root@localhost yum.repos.d]# ls^C
[root@localhost yum.repos.d]# 
[root@stesnape ste]#

 

 

 

 ","10/Nov/20 2:15 PM;snape;FYI  NO errors details in service.log

2020-11-10T14:09:52.914Z [jfrt ] [INFO ] [2cd7ff55b3342a64] [o.a.e.UploadServiceImpl:439 ] [http-nio-8081-exec-8] - Deploy to 'os-patching:RedHat/8/RHOS82-202011/AppStream/repodata/modules.yaml' Content-Length: 1671296 (estimation)
2020-11-10T14:10:34.417Z [jfrt ] [INFO ] [575bc22bd8c5e222] [o.a.a.y.YumAddonImpl:306 ] [art-exec-431 ] - Starting to calculate Rpm metadata for 'os-patching:RedHat/8/RHOS82-202011/AppStream'.
2020-11-10T14:10:34.417Z [jfrt ] [INFO ] [5d3e86994afa5952] [o.a.a.y.YumAddonImpl:306 ] [art-exec-432 ] - Starting to calculate Rpm metadata for 'os-patching:RedHat/8/RHOS82-202011/BaseOS'.
2020-11-10T14:10:34.417Z [jfrt ] [INFO ] [47f1e657d9d09ef ] [t.a.RecalculateIndexService:63] [http-nio-8081-exec-8] - Recalculating index for repository os-patching scheduled to run
2020-11-10T14:10:42.854Z [jfrt ] [INFO ] [575bc22bd8c5e222] [.s.MultiYumEntrySerializer:133] [art-exec-431 ] - 15039 records have been created in 5342 ms
2020-11-10T14:10:48.952Z [jfrt ] [INFO ] [5d3e86994afa5952] [.s.MultiYumEntrySerializer:133] [art-exec-432 ] - 6128 records have been created in 10388 ms
2020-11-10T14:11:01.630Z [jfrt ] [INFO ] [575bc22bd8c5e222] [.y.w.YumRepoMetadataWriter:131] [art-exec-431 ] - Processed 15039 artifacts in 26906 ms [other 13679 ms archive: 98.55 MB open: 439.37 MB] [filelists 3025 ms archive: 16.61 MB open: 210.79 MB] [modules 56 ms archive: 222.73 KB open: 1.59 MB] [primary 870 ms archive: 6.22 MB open: 51.7 MB] 
2020-11-10T14:11:01.655Z [jfrt ] [INFO ] [575bc22bd8c5e222] [o.a.a.y.YumAddonImpl:332 ] [art-exec-431 ] - Finished calculating Rpm metadata for 'os-patching:RedHat/8/RHOS82-202011/AppStream' in 27238 ms.
2020-11-10T14:11:28.644Z [jfrt ] [INFO ] [5d3e86994afa5952] [.y.w.YumRepoMetadataWriter:131] [art-exec-432 ] - Processed 6128 artifacts in 53995 ms [other 33426 ms archive: 256.58 MB open: 1.07 GB] [filelists 2037 ms archive: 11.36 MB open: 153.63 MB] [primary 1761 ms archive: 14.03 MB open: 99.6 MB] 
2020-11-10T14:11:28.674Z [jfrt ] [INFO ] [5d3e86994afa5952] [o.a.a.y.YumAddonImpl:332 ] [art-exec-432 ] - Finished calculating Rpm metadata for 'os-patching:RedHat/8/RHOS82-202011/BaseOS' in 54257 ms.",,,,,,,,,
Database cannot be cleaned (more than 800GB),RTFACT-23892,117501,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gabor.rebner,gabor.rebner,06/Nov/20 9:18 AM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.10.4,,,,,,,Artifact Storage,Database,,,,,,2,,,,,,"Our DerbyDB cannot be cleaned up. We found the following log entry:
{noformat}
Thu Nov 05 18:00:45 CET 2020 Thread[localhost-startStop-2,5,main] (XID = 9695240810), (SESSIONID = 3), (DATABASE = /apps/data/artifact/current/data/derby), (DRDAID = null), Cleanup action starting


Thu Nov 05 18:00:45 CET 2020 Thread[localhost-startStop-2,5,main] (XID = 9695240810), (SESSIONID = 3), (DATABASE = /apps/data/artifact/current/data/derby), (DRDAID = null), Failed Statement is: INSERT INTO access_configs (config_name, modified, data) VALUES (?, ?, ?) with 3 parameters begin parameter #1: jfrog.join.key :end parameter begin parameter #2: 1604595645814 :end parameter begin parameter #3: BLOB:Length=93 :end parameter


ERROR 23505: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'ACCESS_CONFIGS_PK' defined on 'ACCESS_CONFIGS'.


        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)


        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)


        at org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)


        at org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)


        at org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)


        at org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)


        at org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)


        at org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)


        at org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)


        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source)


        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)


        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)


        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)


        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeLargeUpdate(Unknown Source)


        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)


        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)


        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)


        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)


        at java.lang.reflect.Method.invoke(Method.java:498)


        at org.apache.tomcat.jdbc.pool.StatementFacade$StatementProxy.invoke(StatementFacade.java:114)


        at com.sun.proxy.$Proxy79.executeUpdate(Unknown Source)


        at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229)


        at org.jfrog.access.server.db.util.AccessJdbcHelperImpl.executeUpdate(AccessJdbcHelperImpl.java:98)


        at org.jfrog.access.server.db.dao.AccessConfigsDao.createConfig(AccessConfigsDao.java:48)


        at org.jfrog.access.server.db.dao.AccessConfigsDao$$FastClassBySpringCGLIB$$a31fa086.invoke(<generated>)


        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)


        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:738)


        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157){noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5pew:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
systemDiagnostics firewall port check,RTFACT-23880,117421,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kalypso,kalypso,05/Nov/20 3:25 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.10.5,,,,,,,Configuration,,,,,,,0,artifactory,diagnostics,firewall,port,,"After opening the firewall for ports 8081 & 8082, your *systemDiagnostics.sh* check seems to have reversed logic.
********************************
 CHECK FIREWALL SETTINGS
 ********************************
 
Running: firewall-cmd --zone=public --list-ports | grep $ports_needed
 [ERROR] RESULT: NOT OK
 ---
 
Access 8040 AVAILABLE
 AccessGrpc 8045 AVAILABLE
 MetaData 8086 AVAILABLE
 FrontEnd 8070 AVAILABLE
 Replicator 8048 AVAILABLE
 Router 8046 AVAILABLE
 RouterTraefik 8049 AVAILABLE
 RouterGrpc 8047 AVAILABLE
 
{color:#FF0000}[ERROR] Artifactory 8081 NOT AVAILABLE seems to be blocked in firewalld{color}
 [ERROR] Either unblock port 8081 in firewall settings or change the port by configuring artifactory.port in system.yaml
 
{color:#FF0000}[ERROR] RouterExternal 8082 NOT AVAILABLE seems to be blocked in firewalld{color}
 [ERROR] Either unblock port 8082 in firewall settings or change the port by configuring router.entrypoints.externalPort in system.yaml",CentOS 7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5oyo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker: Could not set owner of JF_PRODUCT_HOME,RTFACT-23879,117418,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,a.panattoni,a.panattoni,05/Nov/20 2:40 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.10.5,,,,,,,Artifactory,,,,,,,0,docker,,,,,"Running docker image as described [here|https://www.jfrog.com/confluence/display/JFROG/Installing+Artifactory#InstallingArtifactory-DockerInstallation], logs reports the following warnings:


{code:java}
...
2020-11-05T11:14:08.000Z [shell] [WARN ] [] [installerCommon.sh:706        ] [main] - Could not set owner of [/opt/jfrog/artifactory] to [artifactory:artifactory]
2020-11-05T11:14:09.000Z [shell] [WARN ] [] [installerCommon.sh:706        ] [main] - Could not configure logrotate. Please configure log rotation of the file: [/opt/jfrog/artifactory/var/log/console.log] manually
...{code}
 

It seems a problem with the docker images:


{code:java}
$ docker run --rm -it --entrypoint ls docker.bintray.io/jfrog/artifactory-pro:7.10.5 -la /opt/jfrog
total 12
drwxr-xr-x    1 root     root          4096 Oct 28 18:03 .
drwxr-xr-x    1 root     root          4096 Oct 28 18:03 ..
drwxr-xr-x    1 root     root          4096 Oct 28 18:03 artifactory {code}
 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5oy8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Version 7.10.5 fails to run at all,RTFACT-23878,117417,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cowwoc2020,cowwoc2020,05/Nov/20 2:31 PM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"I tested both the Windows and Docker packages for artifactory OSS edition. Neither works out of the box.

Repro steps:
 # Unpack artifactory-oss-7.10.5 to c:\
 # Run C:\artifactory-oss-7.10.5\app\bin\artifactory.bat
 # Open [http://localhost:8081/|http://localhost:8082/] in Chrome
 # Browser gets redirected to [http://localhost:8082/] which contains error message ""Service Unavailable""

The Docker edition doesn't fare any better.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5oy0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Nov/20 4:48 PM;axel3rd;For information: 
- I have the same behavior (http://localhost:8082/ui --> http 503) with Artifactory pro 7.10.2 (from 6.x migration) and Docker {{jfrog/artifactory-pro:7.10.2}}. No ""explicit/simple logs"" about the root cause of problem.

- But the Docker {{jfrog/artifactory-pro:7.10.5}} seems work just now, UI login, no more test at this time.

Strange :( ...","01/Dec/20 1:31 PM;axel3rd;{quote}
I have the same behavior (http://localhost:8082/ui --> http 503) with Artifactory pro 7.10.2 (from 6.x migration)
{quote}
il
FI in my case, the root cause was a {{version `GLIBC_2.12' not found}} (minimal GLIBC version) prerequisites on frontend node module (Visible in {{console.log}} file, at the beginning).",,,,,,,,,
Artifact search performance issue due to case-insensitivity,RTFACT-23875,117409,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,arielk,arielk,05/Nov/20 1:23 PM,09/Feb/21 9:58 AM,18/Feb/21 8:59 AM,,7.0.0,7.10.5,,,,,,,,,,,,,1,,,,,,"Starting Artifactory 7.0 the ""artifact search"" via UI/API is case-insensitive by default.

The case-insensitive artifact search translates to an SQL query such as below:

{code:java}
2020-11-04T16:55:52.193Z [jfrt ] [DEBUG] [25be0654c345f34 ] [o.j.s.JdbcHelper:325          ] [http-nio-8081-exec-2] - Query returned in 1.21 millis: ""SELECT nodes.node_id, nodes.node_type, nodes.repo, nodes.node_path, nodes.node_name FROM nodes WHERE nodes.node_type=1 AND  nodes.repo  != 'auto-trashcan' AND  nodes.repo  != 'jfrog-support-bundle' AND lower(nodes.node_name) LIKE 'npm-local%'  LIMIT 1000""
{code}

The usage of lower() function results in a *full scan of the ""nodes"" table* which can be very large. 
We have witnessed scenarios where lots of such queries were running in parallel (and didn't complete for a long while), causing high DB CPU usage and impacting the entire system.

+Steps to reproduce+
1. Install Artifactory 7.10.x.
2. Apply the below to $JFROG_HOME/artifactory/var/etc/artifactory/logback.xml so we can log the queries:
{code:java}
<appender name=""jdbc"" class=""ch.qos.logback.core.rolling.RollingFileAppender"">
<File>${log.dir}/artifactory-jdbc.log</File>
<rollingPolicy class=""org.jfrog.common.logging.logback.rolling.FixedWindowWithDateRollingPolicy"">
<FileNamePattern>${log.dir.archived}/artifactory-jdbc.%i.log.gz</FileNamePattern>
<maxIndex>10</maxIndex>
</rollingPolicy>
<triggeringPolicy class=""ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy"">
<MaxFileSize>100MB</MaxFileSize>
</triggeringPolicy>
<encoder class=""ch.qos.logback.core.encoder.LayoutWrappingEncoder"">
<layout class=""org.jfrog.common.logging.logback.layout.BackTracePatternLayout"">
<pattern>%date{yyyy-MM-dd'T'HH:mm:ss.SSS, UTC}Z [jfrt ] [%-5p] [%-16X{uber-trace-id}] [%-30.30(%c{3}:%L)] [%-20.20thread] - %m%n</pattern>
</layout>
</encoder>
</appender>

<logger name=""org.jfrog.storage.JdbcHelper"" additivity=""false"">
<level value=""DEBUG""/>
<appender-ref ref=""jdbc""/>
</logger>
{code}

3. Make an artifact search:
{code:java}
curl -uadmin:Password1 ""http://mill.jfrog.info:12552/artifactory/api/search/artifact?name=lib&repos=libs-release-local""
{code}
Alternatively, make an artifact search via the UI.

4. In ""artifactory-jdbc.log"" you should see the query sent with lower() function:
{code:java}
2020-11-05T13:19:34.170Z [jfrt ] [DEBUG] [21f3662c6fa1e0c0] [o.j.s.JdbcHelper:325          ] [http-nio-8081-exec-4] - Query returned in 1.31 millis: ""SELECT nodes.node_id, nodes.node_type, nodes.repo, nodes.node_path, nodes.node_name FROM nodes WHERE nodes.node_type=1 AND  nodes.repo  = 'libs-release-local' AND lower(nodes.node_name) LIKE '%lib%'  LIMIT 9223372036854775807""
{code}

+Workaround+
We can disable the case-insensitive search by applying this system property:
{code:java}
artifactory.ui.search.artifacts.caseInsensitive=false
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5owg:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Nov/20 4:16 PM;goldyliang;We encountered and as suggested turned off the case insensitive test. It is a good feature but we look for a performance improvement.",,,,,,,,,,
CROWD authentication login failure after Artifactory upgrade,RTFACT-23852,117161,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fbascher,fbascher,03/Nov/20 5:26 PM,05/Jan/21 1:14 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"CROWD authentication login failure after Artifactory upgrade from version 6.20.0 to any 7.X.X version.

I am able to login with local users but not able with crowd users.

LOGS:

 

 
router-request.log:\{""BackendAddr"":""localhost:8040"",""ClientAddr"":""127.0.0.1:60980"",""DownstreamContentSize"":93,""DownstreamStatus"":404,""Duration"":863676,""RequestMethod"":""GET"",""RequestPath"":""/access/api/v1/users/xcheng"",""StartUTC"":""2020-11-04T15:01:02.261333146Z"",""level"":""info"",""msg"":"""",""request_Uber-Trace-Id"":""4d31a6416ee1045e:482b047629755708:505f9d127f288445:0"",""request_User-Agent"":""JFrog Access Java Client/5.6.9 50609900 Artifactory/7.6.3 70603900"",""time"":""2020-11-04T15:01:02Z""}
 
 
 
 
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5nfs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Nov/20 6:28 PM;fbascher;Any update? This is not letting us upgrade artifactory and making it obsolote for new features.",,,,,,,,,,
Newrelic Debian remote repository mirroring resulted in 500 error ,RTFACT-23851,117160,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,noyb,noyb,03/Nov/20 5:16 PM,09/Feb/21 10:03 AM,18/Feb/21 8:59 AM,,6.23.0,7.7.3,,,,,,,,,,,,,0,,,,,,"Kindly see the reproduction process:
 # I have created a Debian remote repository and added the following endpoint - https://download.newrelic.com/ !image-2020-11-03-19-02-08-225.png|width=402,height=203!
 # Added it to my sources.list 
{code:java}
sudo sh -c ""echo 'deb http://artifactory-noy.com/artifactory/Newrelic xenial main' >> /etc/apt/sources.list""{code}

 # Then performed the following successfully - 
{code:java}
apt-get install newrelic-infra -y{code}

 # I am able to see the package on the remote cache repository successfully.  !image-2020-11-03-19-16-13-981.png|width=447,height=216!
 # However, every time I am refreshing the Newrelic remote repository or attempting to browse the remote repository I am getting 500 error  !image-2020-11-03-19-09-52-038.png|width=519,height=269!

With the following errors in the Artifactory logs: 

From artifactory-service.log file 

 
{code:java}
2020-11-03T17:08:29.214Z [jfrt ] [ERROR] [16d096c6034f94d ] [c.e.m.GlobalExceptionMapper:48] [http-nio-8081-exec-1] - Error on line 56: The entity name must immediately follow the '&' in the entity reference.2020-11-03T17:08:29.214Z [jfrt ] [ERROR] [16d096c6034f94d ] [c.e.m.GlobalExceptionMapper:48] [http-nio-8081-exec-1] - Error on line 56: The entity name must immediately follow the '&' in the entity reference.org.artifactory.exception.DocumentBuildException: Error on line 56: The entity name must immediately follow the '&' in the entity reference. at org.artifactory.util.XmlUtils.parse(XmlUtils.java:60) at org.artifactory.repo.remote.browse.S3RepositoryBrowser.detectRootUrl(S3RepositoryBrowser.java:144) at org.artifactory.repo.remote.browse.S3RepositoryBrowser.listContent(S3RepositoryBrowser.java:95) at org.artifactory.repo.HttpRepo.getChildUrls(HttpRepo.java:1040) at org.artifactory.repo.RemoteRepoBase.listRemoteResources(RemoteRepoBase.java:1165) at org.artifactory.repo.service.RepositoryBrowsingServiceImpl.listRemoteBrowsableChildren(RepositoryBrowsingServiceImpl.java:294) at org.artifactory.repo.service.RepositoryBrowsingServiceImpl.getRemoteRepoBrowsableChildrenData(RepositoryBrowsingServiceImpl.java:284) at org.artifactory.repo.service.RepositoryBrowsingServiceImpl.getRemoteRepoBrowsableChildren(RepositoryBrowsingServiceImpl.java:235) at org.artifactory.ui.rest.model.artifacts.browse.treebrowser.nodes.JunctionNode.getChildren(JunctionNode.java:123) at org.artifactory.ui.rest.model.artifacts.browse.treebrowser.nodes.JunctionNode.fetchItemTypeData(JunctionNode.java:95) at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.tree.BrowseTreeNodesService.execute(BrowseTreeNodesService.java:57) at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:39) at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:105) at org.artifactory.ui.rest.resource.artifacts.browse.treebrowser.tree.TreeBrowserResource.browseTreeNodes(TreeBrowserResource.java:58) at jdk.internal.reflect.GeneratedMethodAccessor629.invoke(Unknown Source) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191) at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103) at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268) at org.glassfish.jersey.internal.Errors.process(Errors.java:316) at org.glassfish.jersey.internal.Errors.process(Errors.java:298) at org.glassfish.jersey.internal.Errors.process(Errors.java:268) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703) at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:201) at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:103) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.AccessFilter.useAuthenticationAndContinue(AccessFilter.java:421) at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:306) at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:177) at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:127) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:82) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:96) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164) at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:68) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:32) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:138) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543) at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1626) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: org.jdom2.input.JDOMParseException: Error on line 56: The entity name must immediately follow the '&' in the entity reference. at org.jdom2.input.sax.SAXBuilderEngine.build(SAXBuilderEngine.java:232) at org.jdom2.input.sax.SAXBuilderEngine.build(SAXBuilderEngine.java:303) at org.jdom2.input.SAXBuilder.build(SAXBuilder.java:1196) at org.artifactory.util.XmlUtils.parse(XmlUtils.java:58) ... 84 common frames omittedCaused by: org.xml.sax.SAXParseException: The entity name must immediately follow the '&' in the entity reference. at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204) at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:400) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1471) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEntityReference(XMLDocumentFragmentScannerImpl.java:1782) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2985) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112) at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534) at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888) at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824) at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141) at java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1216) at java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:635) at org.jdom2.input.sax.SAXBuilderEngine.build(SAXBuilderEngine.java:217) ... 87 common frames omitted
{code}
From artifactory-request.log file 

 

 
{code:java}
2020-11-03T17:11:01.884Z|39332c04594f8821|127.0.0.1|anonymous|GET|/api/system/ping|200|-1|0|3|JFrog-Router/1.4.2
2020-11-03T17:11:05.414Z|256674580281de9b|52.215.237.185|admin|POST|/api/treebrowser|500|105|0|119|Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36
2020-11-03T17:11:06.884Z|41adb7fc269a2669|127.0.0.1|anonymous|GET|/api/system/ping|200|-1|0|4|JFrog-Router/1.4.2
{code}
 * It is important to note that in Artifactory 6.23.0 version, I am not getting 500 error code in the UI. However, I am getting the same errors in the logs. 

 ",,,,,,,,,,,,,,,,,,,"03/Nov/20 5:02 PM;noyb;image-2020-11-03-19-02-08-225.png;https://www.jfrog.com/jira/secure/attachment/47790/image-2020-11-03-19-02-08-225.png","03/Nov/20 5:09 PM;noyb;image-2020-11-03-19-09-52-038.png;https://www.jfrog.com/jira/secure/attachment/47789/image-2020-11-03-19-09-52-038.png","03/Nov/20 5:16 PM;noyb;image-2020-11-03-19-16-13-981.png;https://www.jfrog.com/jira/secure/attachment/47788/image-2020-11-03-19-16-13-981.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5nfk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
ignore,RTFACT-23823,116987,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,hellrider,hellrider,02/Nov/20 5:11 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,asdsa,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5mh4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Nov/20 5:33 PM;hellrider; 

{{!http://128.199.21.73!}}","02/Nov/20 5:48 PM;hellrider; 

{{!javascript:alert(1)!}}",,,,,,,,,
502 Bad Gateway Error masking permission issue,RTFACT-23806,116763,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vernon.lingley,vernon.lingley,31/Oct/20 5:11 AM,02/Feb/21 9:04 PM,18/Feb/21 8:59 AM,,6.12.1,,,,,,,REST API,,,,,,,1,,,,,,"We have a few users who are trying to re-upload an artifact to one of our maven repositories. While they do not have override permission, they are not getting a permission error. Instead they are getting a 502 Bad Gateway error.

I am able to reproduce this with any user with a similar permission set.","HA setup in AWS using a Classic ELB
3 Ubuntu 18.04 nodes, each running their own Apache reverse proxies
Environment and service managed by puppet",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5l60:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Feb/21 9:04 PM;jdeveau;I am seeing the same response when trying to overwrite an artifact in a generic repo in Artifactory  7.11.5 rev 71105900.  When you do not have overwrite permissions for an existing artifact, the expected response would be permission denied rather than a 502.
*15:16:45*  Error occurred for request PUT .... Received status code 502 and message: Bad Gateway.",,,,,,,,,,
Max unique snapshots not working in Artifactory 7.7.3,RTFACT-23804,116740,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Dinesh,Dinesh,30/Oct/20 12:07 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.7.3,,,,,,,Artifactory,,,,,,,0,,,,,,"I am using Artifactory version 7.7.3, wanted to limit the number of snapshots to 2 and delete if it exceeds more than 2 snapshots. For that I have configured ""Max unique snapshots"" and set the limit as 2.

After setting also I deployed few versions, restarted the server after configuration and it is not getting deleted and there are no issues it is showing. How to make the configuration to delete the snapshots and where can I check the logs whether it is deleted or not ?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5l1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
isFolder() returns true for a files,RTFACT-23801,116729,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Sitnikov,Sitnikov,30/Oct/20 7:53 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.9.0,,,,,,,,,,,,,,0,,,,,,"Hello,

we are using Artfiactory version 7.9.0 and webhook will return Folder=false on a file and looks fine.

!image-2020-10-30-08-51-04-543.png!

But, calling API with isFolder() on this file causing wrong answer:

!image-2020-10-30-08-52-24-987.png!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5kz4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
JFrog Artifactory intermittently rejects authorization with 403 forbidden,RTFACT-23800,116719,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lg8977,anil.sharma@alertenterprise.com,30/Oct/20 5:00 AM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,RPM,,,,,,,0,artifactory,permissions,repository,,,"Good day,

We would like your assistance to check on a possible bug with JFrog Artifactory 7.4.

We are having a hard time configuring zypper clients (SLES and OpenSUSE) to work with our RPM Repository due to some ""authentication"" issues. At first, we thought it was just an issue with zypper and opensuse so we first focused on our efforts to make things work with zypper.

Error:
{code:java}
opensuse:~ # zypper refresh myapp
Retrieving repository 'myapp' metadata ....................................................................................................................................[error]
Repository 'myapp' is invalid.
[myapp|https://myuser@rpm.example.com/myapp-release-rpm/stable/myapp/2019/3/] Valid metadata not found at specified URL
History:
 - [myapp|https://myuser@rpm.example.com/myapp-release-rpm/stable/myapp/2019/3/] Repository type can't be determined.

Please check if the URIs defined for this repository are pointing to a valid repository.
Skipping repository 'myapp' because of the above error.
Could not refresh the repositories because of errors.
opensuse:~ #
{code}

But these authentication-related errors started to come up every now and then with yum clients as well (centOS), although with YUM it is very rare.

In a StackOverflow [post|https://stackoverflow.com/questions/61589586/opensuse-%60zypper%60-error-valid-metadata-not-found-at-specified-url-repository-ty], I described the issue in more detail.


----


So I tried doing man-in-the-middle to see what's happening under the hood, and this is the sequence with zypper:

h3. Scenario 1 - successful authentication

The following is the sequence of a zypper refresh --repo myrepo:

(1) zypper sends an HTTP HEAD request with the base64-encoded username::

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(2) jfrog responds with HTTP 401 Unauthorized with the WWW-Authenticate header:

{code:java}
HTTP/1.1 401 Unauthorized
Date: Thu, 28 May 2020 08:20:04 GMT
Content-Type: application/json;charset=ISO-8859-1
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
WWW-Authenticate: Basic realm=""Artifactory Realm""
{code}

(3) zypper sends another HTTP HEAD request, this time with the base64-encoded username:password:

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(4) jfrog finally responds with an HTTP 200.

{code:java}
HTTP/1.1 200 OK
Date: Thu, 28 May 2020 08:20:04 GMT
Content-Type: application/xml
Content-Length: 1394
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
Last-Modified: Fri, 08 May 2020 10:25:19 GMT
Accept-Ranges: bytes
X-Artifactory-Filename: repomd.xml
Cache-Control: no-store
{code}

These are logged by Artifactory:

artifactory-request.log:

{code:java}
2020-05-28T08:20:34.566Z [5f78297c2aeabaa8] [DENIED LOGIN]   for client : username / 213.1.1.1. 
2020-05-28T08:20:34.870Z [570978212a5318e3] [ACCEPTED DOWNLOAD] myapp-release-rpm-cache:stable/myapp/2019/3/repodata/repomd.xml  for client : username / 213.1.1.1.
{code}

artifactory-access.log:

{code:java}
2020-05-28T08:20:34.566Z|5f78297c2aeabaa8|213.2.2.2|non_authenticated_user|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|401|-1|0|8|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
2020-05-28T08:20:34.721Z|8018b7cbc9c424e8|213.2.2.2|username|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|200|-1|1394|3|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
2020-05-28T08:20:34.870Z|570978212a5318e3|213.2.2.2|username|GET|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|200|-1|1394|2|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
...
{code}

So basically, zypper comes in with a HEAD request, JFrog says ""you're not authenticated"", zypper responds back and tries to authenticate, and finally JFrog authenticates zypper. Makes sense so far.

h3. Scenario 2 - 403 forbidden

Do some work, then run the same zypper refresh --repo myrepo command after a few minutes or so, and here is the result:

(1) zypper sends an HTTP HEAD request with the base64-encoded username::

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(2) jfrog responds with HTTP 401 Unauthorized with the WWW-Authenticate header:

{code:java}
HTTP/1.1 401 Unauthorized
Date: Thu, 28 May 2020 08:30:44 GMT
Content-Type: application/json;charset=ISO-8859-1
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
WWW-Authenticate: Basic realm=""Artifactory Realm""
{code}

(3) zypper sends another HTTP HEAD request, this time with the base64-encoded username:password:

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(4) this time, jfrog responds with 403 Forbidden instead of 200 OK.

{code:java}
HTTP/1.1 403 Forbidden
Date: Thu, 28 May 2020 08:30:44 GMT
Content-Type: application/json;charset=ISO-8859-1
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
WWW-Authenticate: Basic realm=""Artifactory Realm""
{code}

artifactory-request.log:

{code:java}
2020-05-28T08:30:44.496Z [46c81a2450623166] [DENIED LOGIN]   for client : username / 213.1.1.1.
2020-05-28T08:30:44.630Z [769ed41c652daa7a] [DENIED LOGIN]   for client : username / 213.1.1.1.
{code}

artifactory-access.log:

{code:java}
2020-05-28T08:30:44.496Z|46c81a2450623166|213.2.2.2|non_authenticated_user|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|401|-1|0|9|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
2020-05-28T08:30:44.630Z|769ed41c652daa7a|213.2.2.2|non_authenticated_user|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|403|-1|0|1|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
{code}


----


Notice that zypper sends the same Authorization header value when asked to authenticate, but on the second scenario, JFrog fails to authenticate the request.

Did anybody have this same issue with JFrog before? We are guessing this is an issue with JFrog 7 since ours was just recently upgraded, but there is no way for us to verify this. And unfortunately for us, we are on the paid plan which doesn't even have a support license.

Any suggestions and comments will be very much appreciated.
",JFrog Platform 7.4.3 running in Kubernetes,,,,,,,,,RTFACT-22284,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5kww:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
artifactory fails to retrieve certain go modules,RTFACT-23776,116340,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,27/Oct/20 5:35 PM,09/Feb/21 10:10 AM,18/Feb/21 8:59 AM,,6.23.0,7.10.2,,,,,,Go,,,,,,,1,,,,,,"Problem statement and Impact 
Artifactory fails to retrieve certain go modules from a remote repository (github.com). It appears that this is mainly due to a go.mod being inside a subfolder, rather than at the root, but the module specifies a further depth. Debug logs does not appear to show the issue clearly.

Steps to reproduce 
Set up virtual go repo, add go remote pointing to github.com. create a PAT that allows for package reading. Then point your go env to the virtual remote. 

Actual results 
Go mod resolution, e.g.
{noformat}
$ curl http://localhost:8081/artifactory/api/go/go/github.com/elastic/go-elasticsearch/v7/@v/list
v7.0.0 
v7.1.0 
v7.1.1 
v7.2.0 
v7.3.0 
v7.4.0 
v7.4.1 
v7.5.0 
v7.6.0 
v7.7.0 
v7.8.0 
v7.9.0

$ curl http://localhost:8081/artifactory/api/go/go/github.com/elastic/go-elasticsearch/v7/@v/v7.8.0.mod
{
  ""errors"" : [ {
    ""status"" : 404,
    ""message"" : ""Not Found""
  } ]
}

$ go mod download
go: github.com/elastic/go-elasticsearch/v7@v7.8.0: reading http://localhost:8081/artifactory/api/go/go/github.com/elastic/go-elasticsearch/v7/@v/v7.8.0.mod: 404 Not Found
{noformat}
go.mod exists at elastic/go-elasticsearch, rather than elastic/go-elasticsearch/v7 upstream https://github.com/elastic/go-elasticsearch/tree/7.x

Expected results 
{noformat}
$ curl http://localhost:8081/artifactory/api/go/go/github.com/hashicorp/vault/api/@v/list
v1.0.1 
v1.0.2 
v1.0.3 
v1.0.4

$ curl http://localhost:8081/artifactory/api/go/go/github.com/hashicorp/vault/api/@v/1.0.1.mod
module github.com/hashicorp/vault/api
{noformat}

Workarounds (if any) 
Use go center, proxy golang.org

Customer impact 
Unable to use Github as go repo remote

Link(s) to environments or logs
Full list of dependencies for testing
{noformat}
	github.com/DATA-DOG/go-sqlmock v1.4.1
	github.com/Flaque/filet v0.0.0-20190209224823-fc4d33cfcf93
	github.com/avast/retry-go v2.6.0+incompatible
	github.com/davecgh/go-spew v1.1.1
	github.com/deepmap/oapi-codegen v1.3.8
	github.com/dgrijalva/jwt-go v3.2.0+incompatible
	github.com/elastic/go-elasticsearch/v7 v7.8.0
	github.com/getkin/kin-openapi v0.14.0
	github.com/golang/protobuf v1.4.2
	github.com/google/uuid v1.1.1
	github.com/gorilla/mux v1.7.0
	github.com/hashicorp/vault/api v1.0.4
	github.com/influxdata/go-syslog/v2 v2.0.1
	github.com/jmoiron/sqlx v1.2.0
	github.com/labstack/echo/v4 v4.1.16
	github.com/labstack/gommon v0.3.0
	github.com/lib/pq v1.7.0
	github.com/nats-io/nats-server/v2 v2.1.7
	github.com/nats-io/nats.go v1.10.0
	github.com/prometheus/client_golang v1.7.1
	github.com/satori/go.uuid v1.2.0
	github.com/sirupsen/logrus v1.4.2
	github.com/spf13/afero v1.3.1 // indirect
	github.com/stretchr/objx v0.3.0 // indirect
	github.com/stretchr/testify v1.6.1
	github.com/tidwall/gjson v1.6.1
	github.com/tidwall/sjson v1.1.1
	github.com/vmihailenco/msgpack/v4 v4.3.12
	golang.org/x/crypto v0.0.0-20200323165209-0ec3e9974c59
	google.golang.org/protobuf v1.25.0
	gopkg.in/guregu/null.v3 v3.5.0
	gopkg.in/yaml.v3 v3.0.0-20200615113413-eeeca48fe776 // indirect
	rsc.io/quote v3.1.0+incompatible
	rsc.io/sampler v1.99.99 // indirect
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5j8o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to use rest api with Trial license v7 or rest api broken,RTFACT-23754,116074,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,NissesSenap,NissesSenap,25/Oct/20 8:41 AM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.10.2,,,,,,,,,,,,,,0,,,,,,"Currently using Artifactory Enterprise 6.17.0 rev 61700900 in production and looking into upgrading to 7.10.2 rev 71002900

I'm currently using a Trial license for easy and fast development.

 

I want to test that some of my scripts work.

 

I have verified that the following works on 6.17.0 rev 61700900
{code:java}
curl -H ""X-JFrog-Art-Api:$APIKEY"" -X GET http://localhost:8081/api/docker/repo1/v2/_catalog
curl -H ""X-JFrog-Art-Api:$APIKEY"" -X GET http://localhost:8081/api/storage/repo1/
curl -H ""X-JFrog-Art-Api:$APIKEY"" -X GET http://localhost:8081/api/storage/repo1/app1/
curl -H ""X-JFrog-Art-Api:$APIKEY"" -X GET http://localhost:8081/api/docker/repo1/v2/app1/tags/list
 
{code}
 

But when I try with my Trial license running  7.10.2 rev 71002900

I get http code: 404

I assume that the artifactory-pro is enough to run the rest API.

 ","docker using docker.bintray.io/jfrog/artifactory-pro:latest

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5hps:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Oct/20 8:46 AM;NissesSenap;Just to show that I have the repo, image and something inside

 

!image-2020-10-25-09-45-52-185.png!

 

 

 

 ",,,,,,,,,,
Promote docker image api bug,RTFACT-23750,116000,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ezekielk,ezekielk,23/Oct/20 10:28 PM,09/Feb/21 10:29 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"*DESCRIPTION:*

When using the docker promote image api, the set copy to ""false"" feature does not work properly. Instead of moving the images from the source destination to the target, it copies the images so they appear in both the target and source repos similar to what would happen if the copy flag was set to ""true""

[https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-PromoteDockerImage]

 *EXPECTED BEHAVIOR:*

When the copy flag is set to false, it should move the images from the source repo to the target repo instead of copying them

*STEPS TO REPRODUCE:*

Setup:
 # Create two docker image repos.  Let’s call them image-src, and image-dest.
 # Push an image to image-src.
 # Create a permissions target that provides read access to image-src
 # Create a permissions target that provides read, annotate, deploy/cache, and override/delete access to image-dest
 # Add both permissions targets to a user

Test:
 # As the user above, verify the permissions by:
 ## Pushing an image to image-src (this should fail)
 ## Pushing an image to image-dest (this should succeed)
 # As the user above, use the promote API to *COPY* an image from image-src to image-dest.  In other words, set *_""copy"": true_* in the POST body.
 ## This should succeed.  The target image should be in both image-src and image-dest.
 # Remove the image from image-dest to reset the conditions.
 # As the user above, use the promote API to *MOVE* an image from image-src to image-dest.  In other words, set *_""copy"": false_* in the POST body.
 ## Expected behavior – This call should fail, since the user does not have delete/overwrite permission on image-src.
 ## Observed behavior – The call returns success.  However, it is only partially successful.  Despite *_""copy"": false_* being specified, the target image is now in both image-src and image-dest (i.e. the expected behavior for *_""copy"": true_*).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5hjc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Periodically  objects are not loaded,RTFACT-23749,115980,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fanatl,fanatl,23/Oct/20 3:53 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"From time to time artifactory does not give objects from remote repositories.
Errors: ""timeout 15 seconds"" for pypi, ""timeout 30 seconds"" for rpm.
 When requested again, the object is loaded.

LOG format
{code:java}
    log_format  main  '$remote_addr - $remote_user [$time_local] ""$request"" -- [$connection] -- '
                      '$status $body_bytes_sent ""$http_referer"" '
                      '""$http_user_agent"" ""$http_x_forwarded_for"" ""$http_host""'
                      ' --- ""$request_time"" - ""$upstream_response_time"" - ""$upstream_connect_time"" - ""$upstream_header_time""';
{code}
LOG jupyterhub-1.1.0-py3-none-any.whl
{code:java}
10.72.20.176 - - [23/Oct/2020:14:15:08 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/34/98/438411925428115bd1031bc9ca8012ecd19293c74ec9361c61810d1a680c/jupyterhub-1.1.0-py3-none-any.whl HTTP/1.1"" -- [3610359] -- 499 0 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""15.002"" - ""15.001"" - ""0.000"" - ""-""
10.72.20.176 - - [23/Oct/2020:14:15:24 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/34/98/438411925428115bd1031bc9ca8012ecd19293c74ec9361c61810d1a680c/jupyterhub-1.1.0-py3-none-any.whl HTTP/1.1"" -- [3610405] -- 499 0 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""15.516"" - ""15.518"" - ""0.000"" - ""-""
10.72.20.176 - - [23/Oct/2020:14:15:40 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/34/98/438411925428115bd1031bc9ca8012ecd19293c74ec9361c61810d1a680c/jupyterhub-1.1.0-py3-none-any.whl HTTP/1.1"" -- [3610437] -- 200 435941 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""16.005"" - ""15.292"" - ""0.000"" - ""15.285""
10.72.20.176 - - [23/Oct/2020:14:15:40 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/34/98/438411925428115bd1031bc9ca8012ecd19293c74ec9361c61810d1a680c/jupyterhub-1.1.0-py3-none-any.whl HTTP/1.1"" -- [3611627] -- 200 3163975 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""0.063"" - ""0.011"" - ""0.000"" - ""0.003""
172.16.216.76 - - [23/Oct/2020:14:41:28 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/34/98/438411925428115bd1031bc9ca8012ecd19293c74ec9361c61810d1a680c/jupyterhub-1.1.0-py3-none-any.whl HTTP/1.1"" -- [3619903] -- 200 3163975 ""-"" ""pip/19.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""id"":""n/a"",""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.5""},""implementation"":{""name"":""CPython"",""version"":""3.7.6""},""installer"":{""name"":""pip"",""version"":""19.2.3""},""openssl_version"":""OpenSSL 1.1.1d  10 Sep 2019"",""python"":""3.7.6"",""setuptools_version"":""41.2.0"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.16.4.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""0.057"" - ""0.013"" - ""0.000"" - ""0.004""
172.16.216.76 - - [23/Oct/2020:15:47:34 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/34/98/438411925428115bd1031bc9ca8012ecd19293c74ec9361c61810d1a680c/jupyterhub-1.1.0-py3-none-any.whl HTTP/1.1"" -- [3642525] -- 200 3163975 ""-"" ""pip/20.2.4 {""ci"":null,""cpu"":""x86_64"",""distro"":{""id"":""n/a"",""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.5""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.4""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.2"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.16.4.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""0.046"" - ""0.012"" - ""0.000"" - ""0.004""
{code}
LOG pamela-1.0.0-py2.py3-none-any.whl
{code:java}
10.72.20.176 - - [23/Oct/2020:14:16:26 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/9c/b8/f7592a30aa95ffdea4f2e01aca87c15a7a315ba34f835235291eeba22779/pamela-1.0.0-py2.py3-none-any.whl HTTP/1.1"" -- [3611717] -- 499 0 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""15.012"" - ""15.011"" - ""0.000"" - ""-""
10.72.20.176 - - [23/Oct/2020:14:16:41 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/9c/b8/f7592a30aa95ffdea4f2e01aca87c15a7a315ba34f835235291eeba22779/pamela-1.0.0-py2.py3-none-any.whl HTTP/1.1"" -- [3613050] -- 200 5826 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""15.243"" - ""15.243"" - ""0.000"" - ""15.243""
10.72.20.176 - - [23/Oct/2020:14:16:42 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/9c/b8/f7592a30aa95ffdea4f2e01aca87c15a7a315ba34f835235291eeba22779/pamela-1.0.0-py2.py3-none-any.whl HTTP/1.1"" -- [3613414] -- 200 5826 ""-"" ""pip/20.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.8""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.3""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.1"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.40.6.3.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.004"" - ""0.000"" - ""0.004""
172.16.216.76 - - [23/Oct/2020:14:41:29 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/9c/b8/f7592a30aa95ffdea4f2e01aca87c15a7a315ba34f835235291eeba22779/pamela-1.0.0-py2.py3-none-any.whl HTTP/1.1"" -- [3619903] -- 200 5826 ""-"" ""pip/19.2.3 {""ci"":null,""cpu"":""x86_64"",""distro"":{""id"":""n/a"",""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.5""},""implementation"":{""name"":""CPython"",""version"":""3.7.6""},""installer"":{""name"":""pip"",""version"":""19.2.3""},""openssl_version"":""OpenSSL 1.1.1d  10 Sep 2019"",""python"":""3.7.6"",""setuptools_version"":""41.2.0"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.16.4.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.005"" - ""0.001"" - ""0.005""
172.16.216.76 - - [23/Oct/2020:15:47:35 +0300] ""GET /artifactory/api/pypi/pypi/packages/packages/9c/b8/f7592a30aa95ffdea4f2e01aca87c15a7a315ba34f835235291eeba22779/pamela-1.0.0-py2.py3-none-any.whl HTTP/1.1"" -- [3642525] -- 200 5826 ""-"" ""pip/20.2.4 {""ci"":null,""cpu"":""x86_64"",""distro"":{""id"":""n/a"",""libc"":{""lib"":""glibc"",""version"":""2.17""},""name"":""Oracle Linux Server"",""version"":""7.5""},""implementation"":{""name"":""CPython"",""version"":""3.6.8""},""installer"":{""name"":""pip"",""version"":""20.2.4""},""openssl_version"":""OpenSSL 1.0.2k-fips  26 Jan 2017"",""python"":""3.6.8"",""setuptools_version"":""50.3.2"",""system"":{""name"":""Linux"",""release"":""4.1.12-124.16.4.el7uek.x86_64""}}"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.004"" - ""0.000"" - ""0.004""
{code}
LOG openstack-queens
{code:java}
10.40.147.29 - - [23/Oct/2020:12:22:55 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3545318] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.109"" - ""0.111"" - ""0.001"" - ""0.111""
10.40.147.19 - - [23/Oct/2020:12:51:34 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3570154] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.080"" - ""0.080"" - ""0.000"" - ""0.080""
10.40.147.22 - - [23/Oct/2020:13:04:39 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3573766] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.155"" - ""0.154"" - ""0.000"" - ""0.154""
10.40.147.21 - - [23/Oct/2020:13:14:58 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3580948] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.361"" - ""0.362"" - ""0.001"" - ""0.362""
10.40.147.32 - - [23/Oct/2020:13:20:44 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3586088] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.003"" - ""0.000"" - ""0.003""
10.40.147.30 - - [23/Oct/2020:13:36:38 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3592607] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.152"" - ""0.151"" - ""0.000"" - ""0.151""
10.40.147.31 - - [23/Oct/2020:14:20:29 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3614657] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.147"" - ""0.147"" - ""0.000"" - ""0.147""
10.40.147.25 - - [23/Oct/2020:14:57:02 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3622594] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.109"" - ""0.110"" - ""0.001"" - ""0.110""
10.40.147.28 - - [23/Oct/2020:15:15:39 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3629154] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""12.961"" - ""12.960"" - ""0.000"" - ""12.960""
10.40.147.20 - - [23/Oct/2020:15:27:52 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3631699] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.204"" - ""0.203"" - ""0.000"" - ""0.203""
10.40.147.23 - - [23/Oct/2020:15:30:31 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3637031] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.002"" - ""0.000"" - ""0.002""
10.40.147.17 - - [23/Oct/2020:16:14:24 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3651346] -- 499 0 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""30.002"" - ""30.002"" - ""0.000"" - ""-""
10.40.147.17 - - [23/Oct/2020:16:14:24 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3651385] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.061"" - ""0.061"" - ""0.000"" - ""0.061""
10.40.147.27 - - [23/Oct/2020:16:22:26 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3653793] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.004"" - ""0.000"" - ""0.004""
10.40.147.18 - - [23/Oct/2020:17:09:27 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3666528] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""1.204"" - ""1.204"" - ""0.000"" - ""1.204""
10.40.147.26 - - [23/Oct/2020:17:40:01 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3671737] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.156"" - ""0.156"" - ""0.000"" - ""0.156""
10.40.147.24 - - [23/Oct/2020:17:48:12 +0300] ""GET /artifactory/openstack/openstack-queens/repodata/repomd.xml HTTP/1.1"" -- [3680617] -- 200 3107 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.003"" - ""0.000"" - ""0.003""
{code}
LOG openstack-pike
{code:java}
10.40.149.96 - - [23/Oct/2020:11:48:48 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3532481] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.274"" - ""0.274"" - ""0.000"" - ""0.274""
10.40.147.8 - - [23/Oct/2020:11:54:28 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3533673] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.20.47 - - [23/Oct/2020:12:00:01 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3535131] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.654"" - ""0.654"" - ""0.000"" - ""0.654""
10.72.20.115 - - [23/Oct/2020:12:03:06 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3536248] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.003"" - ""0.001"" - ""0.003""
10.40.147.13 - - [23/Oct/2020:12:13:23 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3540004] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.132"" - ""0.133"" - ""0.001"" - ""0.133""
10.72.20.69 - - [23/Oct/2020:12:21:14 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3541816] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.001"" - ""0.001"" - ""0.000"" - ""0.001""
10.72.20.119 - - [23/Oct/2020:12:30:43 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3554528] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.454"" - ""0.453"" - ""0.000"" - ""0.453""
10.40.147.14 - - [23/Oct/2020:12:57:41 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3570933] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.151"" - ""0.151"" - ""0.000"" - ""0.151""
10.40.147.5 - - [23/Oct/2020:12:58:22 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3571184] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.14.27 - - [23/Oct/2020:13:01:31 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3572716] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.003"" - ""0.001"" - ""0.003""
10.72.20.113 - - [23/Oct/2020:13:07:16 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3574760] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.003"" - ""0.001"" - ""0.003""
10.72.20.25 - - [23/Oct/2020:13:11:22 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3577133] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.076"" - ""0.075"" - ""0.000"" - ""0.075""
10.72.20.52 - - [23/Oct/2020:13:17:52 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3584648] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.002"" - ""0.000"" - ""0.002""
10.40.147.12 - - [23/Oct/2020:13:35:47 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3592301] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.447"" - ""0.446"" - ""0.000"" - ""0.446""
10.40.148.239 - - [23/Oct/2020:13:36:26 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3592591] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.20.106 - - [23/Oct/2020:13:39:22 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3594494] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.20.74 - - [23/Oct/2020:14:16:39 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3612464] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.065"" - ""0.065"" - ""0.000"" - ""0.065""
10.72.20.59 - - [23/Oct/2020:14:16:52 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3613418] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.237.24 - - [23/Oct/2020:14:19:38 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3614584] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.20.82 - - [23/Oct/2020:14:24:39 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3615213] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.003"" - ""0.000"" - ""0.003""
10.40.148.187 - - [23/Oct/2020:14:29:55 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3616876] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.069"" - ""0.068"" - ""0.000"" - ""0.068""
10.40.147.9 - - [23/Oct/2020:14:40:42 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3619754] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.142"" - ""0.143"" - ""0.001"" - ""0.143""
10.72.20.98 - - [23/Oct/2020:14:55:52 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3622374] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""1.532"" - ""1.532"" - ""0.000"" - ""1.532""
10.72.20.92 - - [23/Oct/2020:15:05:02 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3623743] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.237.9 - - [23/Oct/2020:15:10:09 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3624632] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.117"" - ""0.117"" - ""0.000"" - ""0.117""
10.40.149.24 - - [23/Oct/2020:15:11:10 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3626054] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.004"" - ""0.000"" - ""0.004""
10.72.20.90 - - [23/Oct/2020:15:14:45 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3629091] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.20.88 - - [23/Oct/2020:15:18:16 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3629590] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.20.62 - - [23/Oct/2020:15:38:43 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3639985] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.080"" - ""0.081"" - ""0.000"" - ""0.081""
10.72.14.26 - - [23/Oct/2020:16:23:24 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3653864] -- 499 0 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""30.002"" - ""30.003"" - ""0.000"" - ""-""
10.72.14.26 - - [23/Oct/2020:16:23:24 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3653925] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.114"" - ""0.114"" - ""0.000"" - ""0.114""
10.40.148.58 - - [23/Oct/2020:16:36:56 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3656961] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.269"" - ""0.269"" - ""0.000"" - ""0.269""
10.72.20.66 - - [23/Oct/2020:16:44:47 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3660513] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.003"" - ""0.001"" - ""0.003""
10.72.20.80 - - [23/Oct/2020:16:45:44 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3660641] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.237.15 - - [23/Oct/2020:16:48:48 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3662115] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.706"" - ""0.705"" - ""0.000"" - ""0.705""
10.40.147.10 - - [23/Oct/2020:17:03:11 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3664688] -- 499 0 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""30.002"" - ""30.002"" - ""0.000"" - ""-""
10.40.147.10 - - [23/Oct/2020:17:03:11 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3664722] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.254"" - ""0.252"" - ""0.000"" - ""0.252""
10.72.20.63 - - [23/Oct/2020:17:08:50 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3666434] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.237.19 - - [23/Oct/2020:17:12:49 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3667492] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.20.60 - - [23/Oct/2020:17:12:57 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3667506] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.001"" - ""0.002"" - ""0.001"" - ""0.002""
10.72.20.118 - - [23/Oct/2020:17:21:03 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3668419] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.131"" - ""0.131"" - ""0.000"" - ""0.131""
10.40.147.2 - - [23/Oct/2020:17:22:11 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3668574] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.20.94 - - [23/Oct/2020:17:23:51 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3668687] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.001"" - ""0.000"" - ""0.001""
10.40.147.1 - - [23/Oct/2020:17:23:53 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3668694] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.002"" - ""0.002"" - ""0.000"" - ""0.002""
10.72.20.112 - - [23/Oct/2020:17:51:12 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3684751] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""9.809"" - ""9.810"" - ""0.000"" - ""9.810""
10.72.237.6 - - [23/Oct/2020:18:00:20 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3695366] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.003"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.20.68 - - [23/Oct/2020:18:01:19 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3696012] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.101"" - ""0.101"" - ""0.000"" - ""0.101""
10.72.20.85 - - [23/Oct/2020:18:03:58 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3701423] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.004"" - ""0.003"" - ""0.000"" - ""0.003""
10.72.20.135 - - [23/Oct/2020:18:17:47 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3711574] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.087"" - ""0.088"" - ""0.000"" - ""0.088""
10.40.149.112 - - [23/Oct/2020:18:40:51 +0300] ""GET /artifactory/openstack/openstack-pike/repodata/repomd.xml HTTP/1.1"" -- [3714074] -- 200 3013 ""-"" ""urlgrabber/3.10 yum/3.4.3"" ""-"" ""rep.location.company.domain"" --- ""0.072"" - ""0.072"" - ""0.000"" - ""0.072""
{code}","CPU: 8
RAM: 16G
Oracle Linux Server release 7.8
kernel 4.14.35-2025.400.9.el7uek.x86_64
artifactory 7.9.1
jdbc 42.2.17
postgresql 11.9
nginx 1.18.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5hew:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Warning when validating system.yaml,RTFACT-23744,115958,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,atlassianbuildteam,atlassianbuildteam,23/Oct/20 3:41 AM,14/Jan/21 12:11 PM,18/Feb/21 8:59 AM,,7.10.2,,,,,,,,,,,,,,2,,,,,,"Artifactory 7.10.2 throws a warning from diagnosticUtil tool when validating system.yaml file. Artifactory 7.9.0 file is valid.

When I manually perform the validation using the diagnosticUtil, located in /opt/jfrog/artifactory/app/bin/diagnostics/diagnosticsUtil I get the following warning during the startup of Artifactory.

*[DEBUG] Resolved system configuration file path: /opt/jfrog/artifactory/var/etc/system.yaml
userYaml decode failed at node .shared.database
yaml validation failed*

Steps to reproduce:
1. Start Artifactory;
2. Export the following environment variables:
VALIDATE_BINARY=/opt/jfrog/artifactory/app/bin/diagnostics/diagnosticsUtil
SYSTEM_YAML_PATH=/opt/jfrog/artifactory/var/etc/system.yaml
SYSTEM_YAML_TEMPLATE_PATH=/opt/jfrog/artifactory/app/misc/etc/system.full-template.yaml
3. Add the attached system.yaml file in $SYSTEM_YAML_PATH
4. Validate it using the same command used by installerCommom.sh
${VALIDATE_BINARY} validate yaml $SYSTEM_YAML_PATH $SYSTEM_YAML_TEMPLATE_PATH --uncomment-before-parse; status=$? || true


*System Yaml Configuration*

{code:java}
configVersion: 1
shared:
    node:
        haEnabled: true
        ip: 10.255.0.6
        id: ""node-primary""
        primary: true
    database:
        type: postgresql
        driver: org.postgresql.Driver
        url: ""jdbc:postgresql://localhost:5432/artifactory""
        username: something1234
        password: abcd1234
    security:
        masterKeyFile: ""/opt/jfrog/artifactory/var/etc/security/master.key""
    extraJavaOpts: "" -server -Xms2g -Xmx2g -Xss512k -XX:+UseG1GC -Dcom.sun.management.jmxremote.port=9010
        -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false""
artifactory:
    port: 8080
    database:
        maxOpenConnections: 500
        maxIdleConnections: 50
    tomcat:
        connector:
            maxThreads: 2200
            extraConfig: ""connectionTimeout='60000' minSpareThreads='400' acceptCount='4000'
                maxKeepAliveRequests='400' keepAliveTimeout='700000' disableUploadTimeout='false'
                connectionUploadTimeout='900000'""
access:
    database:
        maxOpenConnections: 500
        maxIdleConnections: 50
    tomcat:
        connector:
            maxThreads: 2200
            extraConfig: ""connectionTimeout='60000' minSpareThreads='400' acceptCount='4000'
                maxKeepAliveRequests='400'""
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5hao:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Jan/21 10:47 AM;obogdan;Also affects version *7.12.6*.",,,,,,,,,,
conda repositories don't populate empty folders with metadata properly,RTFACT-23741,115131,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fwcarter,fwcarter,22/Oct/20 10:08 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.7.8,,,,,,,,,,,,,,0,,,,,,"When a new directory is created in a conda repository (i.e. win-64, osx-64, etc), the repodata.json metadata file is not calculated unless the folder contains conda packages.

This is a bug. An empty folder should get a repodata.json file that tells conda that there are no packages available for that system architecture.",,,,,,,,,,,,,,,,,,,"29/Oct/20 10:00 AM;noyb;image-2020-10-29-12-00-21-283.png;https://www.jfrog.com/jira/secure/attachment/47611/image-2020-10-29-12-00-21-283.png","29/Oct/20 10:00 AM;noyb;image-2020-10-29-12-00-44-368.png;https://www.jfrog.com/jira/secure/attachment/47612/image-2020-10-29-12-00-44-368.png","29/Oct/20 10:01 AM;noyb;image-2020-10-29-12-01-06-704.png;https://www.jfrog.com/jira/secure/attachment/47613/image-2020-10-29-12-01-06-704.png","29/Oct/20 10:01 AM;noyb;image-2020-10-29-12-01-27-924.png;https://www.jfrog.com/jira/secure/attachment/47614/image-2020-10-29-12-01-27-924.png","29/Oct/20 10:02 AM;noyb;image-2020-10-29-12-02-02-109.png;https://www.jfrog.com/jira/secure/attachment/47615/image-2020-10-29-12-02-02-109.png","29/Oct/20 10:02 AM;noyb;image-2020-10-29-12-02-45-743.png;https://www.jfrog.com/jira/secure/attachment/47616/image-2020-10-29-12-02-45-743.png","29/Oct/20 10:03 AM;noyb;image-2020-10-29-12-03-06-188.png;https://www.jfrog.com/jira/secure/attachment/47617/image-2020-10-29-12-03-06-188.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5c7s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Bash shell script with name ending in .sh corrupted on download,RTFACT-23740,115128,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fwcarter,fwcarter,22/Oct/20 9:51 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.7.8,,,,,,,,,,,,,,0,artifactory,download,,,,"When we upload a shell script (custom Minconda installer to be specific) to artifactory, and that shell script name ends in "".sh"", it uploads correctly (md5 matches), but then no matter how you try to download it, it is corrupt (i.e. md5 is different, and script does not run).

We have tested this with several files. The workaround is to rename the file to something that does not end in "".sh"". Literally anything else seems to work just fine.

The corrupted file downloads the same regardless of OS. For instance, the file downloaded on a mac and on a pc have the same bad md5.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5c7c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot pull from offline smart PyPi repo,RTFACT-23738,115096,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Oleksis,joeyn,joeyn,22/Oct/20 3:03 PM,17/Feb/21 1:09 PM,18/Feb/21 8:59 AM,,6.21.0,7.7.3,,,,,,,,,,,,,1,,,,,,"*Description:*

The remote repository [offline feature|https://www.jfrog.com/confluence/display/JFROG/Remote+Repositories#RemoteRepositories-SingleRepositoryOffline] indicates that when attempting to pull from the remote repo, only artifacts in the remote-cache repo will be available. However, when the remote-cache repo is filled via a smart repo push replication, PyPi packages cannot be pulled when ""offline"" is checked. An elaborated explanation & walkthrough can be found below:

 *Setup:*

Two Artifactory instances (*RT-A* & *RT-B*).

*RT-A* contains a single local PyPi repository: *pypi-local*
 *RT-B* contains a virtual PyPi repository that includes a *smart* remote PyPi repository (pypi-remote) which resolves packages from RT-A’s pypi-local.

RT-B’s pypi-remote is configured with push replication which automatically caches artifacts from RT-A’s pypi-local.

 

*Steps to reproduce:*

Test 1: 
 a) Push a Python package to RT-A pypi-local
 b) Force replication in RT-B pypi-remote
 c) Make sure that the package is now cached in RT-B pypi-remote-cache
 d) Attempt to pull the package from RT-B virtual repo
 e) Package is pulled successfully

Test 2:
 a) Push a Python package to RT-A pypi-local
 b) Force replication in RT-B pypi-remote
 c) Make sure that the package is now cached in RT-B pypi-remote-cache
 d) Set RT-B pypi-remote to “offline”
 e) Attempt to pull the package from RT-B virtual repo
 f) Although the package exists in the RT-B’s pypi-remote-cache repo, it cannot be pulled

 

*Additional note:*

As there was a similar Docker bug which got fixed in Artifactory 7.7.0 (RTFACT-21554), I have attempted the same tests on this version, but encountered the same behavior.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzrao6:zz",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Oct/20 4:24 PM;joe.henshaw;Can this please also be tested on other package types? It's quite frustrating having to raise support tickets for each and every package type with this problem when it's discovered. If it's a regression, please can the appropriate tests be added to prevent this from becoming a recurring problem.",,,,,,,,,,
VCS downloadRelease downloads different checksum value file vs the original file from Github ,RTFACT-23713,114963,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tomers,ohadl,ohadl,21/Oct/20 11:34 AM,09/Feb/21 10:37 AM,18/Feb/21 8:59 AM,,6.21.0,,,,,,,,,,,,,,0,,,,,,"If you try to download the below file from Artifactory using VCS repository you will get a different checksum for the file. 

Steps to reproduce:
 # Configure VCS remote repository to github.
 # Run the following command:  curl -uadmin:Password ""http://localhost:8081/artifactory/api/vcs/downloadRelease/vcs-github-3rdparty-external/Kitware/CMake/v3.18.4?ext=tar.gz"" -o release.tar.gz
 # Next download the file directly from github: [https://github.com/Kitware/CMake/releases/download/v3.18.4/cmake-3.18.4.tar.gz]. 
 # Compare the two checksum values you will get to different values, for what should be the exact same file.

The official release page of Kitware/CMake ([https://github.com/Kitware/CMake/releases])

The link to the file is [https://github.com/Kitware/CMake/releases/download/v3.18.4/cmake-3.18.4.tar.gz]. ",,,,,,,,,,,,,RTFACT-9615,,,,,,"16/Nov/20 11:03 AM;tomers;Screen Shot 2020-11-16 at 13.03.03.png;https://www.jfrog.com/jira/secure/attachment/48256/Screen+Shot+2020-11-16+at+13.03.03.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc59wv:yo",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
I couldn't download and delete NON-ascii filename,RTFACT-23708,114934,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,curvc,curvc,21/Oct/20 7:00 AM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Hi,

I couldn't download and delete NON-ascii filename.

Doesn't Artifactory support UTF-8 filename or am I missed encoding related configuration?

Please let me clear.

Many thanks

Terry","Artifactory installed on Red Hat.

- Pro edition",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5b3c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker Promotion to the source repository deletes the file,RTFACT-23706,114925,Bug,Pending QA,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,asafz,niro,niro,21/Oct/20 1:50 AM,17/Feb/21 10:09 AM,18/Feb/21 8:44 AM,,6.12.2,6.21.0,,,,,,Artifactory,,,,,,,0,,,,,,"*Problem description:*

When performing a docker promotion to the same repository the image is already in, rather than a new destination, it deletes the image instead. This can cause accidental artifact deletionssince this is not expected behavior at all.

 

*Expected behavior:*

Ideally this would return with a message saying you aren't promoting the image anywhere and the promotion gets aborted, or the promotion promotes the image to the same repository it is already in so the image is retained. Currently the image gets deleted with no warning or feedback.

 

*Steps to reproduce:*

To reproduce, upload a docker image alpine:latest to docker-local.

Then run a
 curl -X POST -u user:password -H ""Content-Type: application/json"" -d @test.json https://<ArtifactoryURL>/artifactory/api/docker/docker-local/v2/promote

and your test.json looks like

{ ""targetRepo"" : ""docker-local"", ""dockerRepository"" : ""alpine"", ""tag"" : ""latest"", ""copy"": true }

 

then the command will simply delete your image without copying or promoting it. It's interesting to note that regardless of if ""copy"" is set to true or false, the image will be deleted without a new one being made.

 

On different versions, different error messages occur. In earlier versions such as 6.12.2, we actually get a

Promotion ended successfully

message even though the file is essentially gone now, which is definitely not a success.

In later versions such as 6.21.0, there has been some updates to the promote API and it recognizes this self promotion is an issue, so we'll see an error like so: 

{
 ""errors"" : [

{ ""status"" : 404, ""message"" : ""Unable to find docker image 'alpine/latest'. Promotion aborted"" }

]
 }

Even though it prints this error, it still performs the same behavior and deletes the image, only the return output is changed.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzyezo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Incorrect Maven artifact type for jar files,RTFACT-23697,114822,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaniat,shaniat,20/Oct/20 8:42 AM,09/Feb/21 10:41 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Artifacts jar type is incorrect and partly represent the file name instead of its type (Under Builds --> Build Name --> Choose one of the published modules).

!Screen Shot 2020-10-20 at 11.36.44.png|width=848,height=175!

 

Steps to reproduce:

1. Use JFrog's [maven-example|https://github.com/jfrog/project-examples/tree/master/maven-example] for the build.
2. Navigate to Builds --> Build Name --> Choose one of the published modules
3. Notice that some Jar files have the correct type (""jar"") and some have an incorrect type (i.e ""test-jar"")

 

 ",,,,,,,,,,,,,,,,,,,"20/Oct/20 8:38 AM;shaniat;Screen Shot 2020-10-20 at 11.36.44.png;https://www.jfrog.com/jira/secure/attachment/47178/Screen+Shot+2020-10-20+at+11.36.44.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5afs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Event-based pull replication fails for https request with Nginx and Apache.,RTFACT-23649,114476,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,oleksandrl,ohadl,ohadl,14/Oct/20 4:18 PM,09/Feb/21 3:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,5,,,,,,"Configuring Artifactory with event base pull replication with HTTPS (in the url) fails.
 # Set up a generic local repository on Artifactory-1
 # On Artifactory-2, set up a Generic Remote repository pointed to the local Artifactory-1 repo, using https:// in the url.
 # Configure Pull Replication as normal in the UI, enable Event based pull replication
 # Deploy a file to Artifactory-1 generic local
 # Observe that the file does not get pulled to the Artifactory-2 remote repository cache

Note that you will need to configure HTTPS via Nginx.
{code:java}
2020-09-24 16:42:36,463 [Incoming-Replication-Channel-Target-Test2] [DEBUG] (o.a.a.r.c.r.e.InboundReplicationChannel:263) - Could not establish remote replication stream for Target-Test2
java.net.SocketTimeoutException: Read timed out
at java.base/java.net.SocketInputStream.socketRead0(Native Method)
at java.base/java.net.SocketInputStream.socketRead(SocketInputStream.java:115)
at java.base/java.net.SocketInputStream.read(SocketInputStream.java:168)
at java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)
{code}
Currently the workaround for fixing this is adding the below parameter in the Nginx.

 

Proxy_buffering off;

 

Please see the below link for more details on the above parameter.

[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering]",,,,,,,,,,,,,,,,RTFACT-21262,,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6td5:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-core3,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Oct/20 4:04 PM;shaibz;Seems like other people who hit the issue that used tomcat applications hit similar issue:
https://stackoverflow.com/questions/27898622/server-sent-events-stopped-work-after-enabling-ssl-on-proxy

Another solution is to pass a header ""X-Accel-Buffering: no"" when establishing the channel.","05/Nov/20 11:43 AM;shaibz;This issue happens also with Apache.
For apache it seems that there is no way to completely disable the buffering between httpd servers.",,,,,,,,,
npm owner failed,RTFACT-23624,114296,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Yummy,Yummy,14/Oct/20 6:14 AM,18/Feb/21 12:02 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,," 
{code:java}
npm owner ls <package_name> tips admin party!
 Expected return username1@xxx.com, username2@xxx.com, username3@xxx.com {code}
{code:java}
npm owner add <user_name> <package_name> tips 405 Method Not Allowed
Expect to add publisher 
 When I see package.json from artifactory I found no maintainers,I think that's the cause of the problem{code}
artifactory info:
 Artifactory Enterprise 6.17.0 rev

npm info:
 6.14.6

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc57go:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory CE C/C++ failing to start after provided debian install steps,RTFACT-23622,114284,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,emcp333,emcp333,13/Oct/20 9:14 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,Debian,,,,,,0,,,,,,"I am attempting to install Artifactory CE for C/C++ on a LXD provided virtual machine running ubuntu .. 

 

What seems to happen is, on the `system artifactory start` step.. I get an error

 

 
{code:java}
sudo -u ubuntu wget -qO - https://releases.jfrog.io/artifactory/api/gpg/key/public | apt-key add -;echo ""deb https://releases.jfrog.io/artifactory/artifactory-debs{distribution} main"" | sudo tee -a /etc/apt/sources.list;# To determine your distribution, run lsb_release -c or cat /etc/os-release# Example:echo ""deb https://releases.jfrog.io/artifactory/artifactory-debs xenial main"" | sudo tee -a /etc/apt/sources.list;apt-get update;sudo apt-get install jfrog-artifactory-cpp-ce   {code}
| |
| |

and then 

 
{code:java}
service artifactory start{code}
 

but I get this 
{code:java}
Failed to start artifactory.service: Unit artifactory.service not found
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc57e8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Event-based Pull Replication of many files can cause Artifactory to crash,RTFACT-23582,113222,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shays,avivb,avivb,12/Oct/20 6:38 PM,09/Feb/21 10:48 AM,18/Feb/21 8:59 AM,,6.22.0,,,,,,,,,,,,,,0,,,,,,"*Problem description*

In [full mesh topology|https://jfrog.com/whitepaper/replication-using-artifactory-to-manage-binaries-across-multi-site-topologies/], where 2 Artifactory instances are configured with event-based pull replications pointing to each other, if many files are deployed consecutively, Artifactory might crash due to out of memory issue

*What is the expected behavior?*

Artifactory should be able to handle this scenario

*Steps to reproduce*
 * Configure full mesh pull replication topology as mentioned [here|https://jfrog.com/whitepaper/replication-using-artifactory-to-manage-binaries-across-multi-site-topologies] (search for ""Single Virtual Repository Consisting Of A Local And Remote Repository), with local and remote generic repos (no need for virtual repo).
 * Run a script to upload at least 100k artifacts to each of the local repositories:

{code:java}
nohup sh -c 'for i in $(seq 1 100000); do dd if=/dev/urandom bs=2048 count=1 of=dummy-""$i""; curl -s -uadmin:password1 http://localhost:8081/artifactory/generic-local/ -T dummy-""$i"" & done' {code}
 *  After some time (20 to 90 minutes), one of the instance will crash. If you monitor Artifactory you will see a jump in the RAM usage until it reaches the limit, however, no OOM error is printed in the logs during the crash

*Possible workaround*

Use push replication instead of pull
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc54o0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Unavailable in USE1 region,RTFACT-23579,113159,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Stefan_Kraus,Stefan_Kraus,12/Oct/20 2:41 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Our instance is unavailable and not responding to any requests. https://workivaeast.jfrog.io/workivaeast,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc54b4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Bad gateway"" when trying to access Artifactory UI",RTFACT-23577,113089,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,michelkraemer,michelkraemer,12/Oct/20 11:49 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,0,,,,,,"I recently updated our Artifactory instance to version 7.9.1. I do not remember which version I had before but it was a 7.x version (maybe 7.8?).

Since then, I'm not able to access the Artifactory HTTP interface anymore. I get the HTTP error {{502 Bad Gateway}}.

I checked the Artifactory service with `systemctl status artifactory.service` and it seems everything is OK. The log files also look OK. The only thing, I could find was this message here:

{{console.log:2020-10-12T11:12:04.405Z [jffe ] [ERROR] [ ] [ ] [main ] - Error: Couldn't get access client instance, Error : [Cluster join: Failed init access client; Error: [JoinKey is not hex format]]}}
{{ console.log-at Promise (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Access/AccessAdminClient.ts:35:22)}}
{{ console.log-at process._tickCallback (internal/process/next_tick.js:68:7)}}
{{ console.log-2020-10-12T11:12:04.702Z [jffe ] [ERROR] [ ] [ ] [main ] - TypeError: Error starting application Cannot read property 'response' of undefined}}
{{ console.log-at handle401 (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Decorators/HandleAccessUnauthorized.ts:34:9)}}

I don't know if this has anything to do with the issue.

Can somebody please help me? Thanks!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc53vs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Cloud (free) doesn't work with Conan,RTFACT-23562,112972,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vectrom,vectrom,11/Oct/20 7:11 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,3,,,,,," I have free cloud artifactory (vectrom.jfrog.io) and I have created new local conan repository according to [https://www.jfrog.com/confluence/display/JFROG/Conan+Repositories#ConanRepositories-UsingConanwithArtifactory]
  
 Problem is that I cannot log in using {{conan user -p <PASSWORD> -r <REMOTE> <USERNAME>}}, because I receive error:
 {{ERROR: 400: Conan is not yet migrated to V2 layout. Check logs for progress details.}}

The same is if I use ""conan upload"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc536g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Nov/20 11:20 PM;brad.ito;running into this as well",,,,,,,,,,
Remove the trailing spaces of artifacts properties   ,RTFACT-23559,112939,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,11/Oct/20 1:50 PM,09/Feb/21 10:49 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,3,P1,,,,,"Today we are able to upload properties with spaces at the begging and at the end of the property.

This behavior affecting the debian indexing as the following example that didn't index as expected and we can't install it on Debian 20 (focal distribution) :
 !image-2020-10-11-16-50-24-155.png|thumbnail! ",,,,,,,,,,,,,,,,,,,"11/Oct/20 1:50 PM;batelt;image-2020-10-11-16-50-24-155.png;https://www.jfrog.com/jira/secure/attachment/46950/image-2020-10-11-16-50-24-155.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc52zc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deployment randomly fails due to required delete permissions on new artifact,RTFACT-23552,112875,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,oesolutions,oesolutions,11/Oct/20 3:00 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.19.1,,,,,,,,,,,,,,0,,,,,,"Every few days I am seeing a failed Gradle publication to a maven repository. When looking at the Artifactory logs, I see that the deploy is failing due to the user not having delete permissions. However, the artifact being deployed does not already exist. Many other artifacts are being deployed daily without issue.

Example logs:

{{# grep platform-core-21.1.0.0.297 *.log}}
 {{access.log:2020-10-10 03:57:47,456 [ACCEPTED DEPLOY] redact-build-local:redact/platform-core/21.1.0.0.297/platform-core-21.1.0.0.297.pom for client : build / 1.2.3.4.}}
 {{access.log:2020-10-10 03:57:48,057 [DENIED DELETE] redact-build-local:redact/platform-core/21.1.0.0.297/platform-core-21.1.0.0.297.pom for client : build / 1.2.3.4.}}
 {{artifactory.log:2020-10-10 03:57:47,451 [http-nio-8081-exec-34] [INFO ] (o.a.e.UploadServiceImpl:399) - Deploy to 'redact-build-local:redact/platform-core/21.1.0.0.297/platform-core-21.1.0.0.297.pom' Content-Length: 431}}
 {{artifactory.log:2020-10-10 03:57:48,057 [http-nio-8081-exec-119] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 403: Not enough permissions to delete/overwrite artifact 'redact-build-local:redact/platform-core/21.1.0.0.297/platform-core-21.1.0.0.297.pom' (user 'build' needs DELETE permission).}}
 {{event.log:1602302267456|create|redact-build-local/redact/platform-core/21.1.0.0.297/platform-core-21.1.0.0.297.pom}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc52kg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget License URL deprecated,RTFACT-23537,112686,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,noyb,noyb,08/Oct/20 10:32 AM,09/Feb/21 10:52 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"As we transition from licenseUrl to license, some NuGet clients and NuGet feeds may not yet have the ability to surface licensing information in some cases. 

You should refer to the following official Nuget page - [https://docs.microsoft.com/en-us/nuget/consume-packages/finding-and-choosing-packages#license-url-deprecation]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc51g0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"AQL's ""promotion.status"" does not return non-promoted builds anymore",RTFACT-23536,112685,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joeyn,joeyn,08/Oct/20 10:16 AM,09/Feb/21 10:53 AM,18/Feb/21 8:59 AM,,6.20.0,7.6.0,,,,,,,,,,,,,1,,,,,,"*Description:* 
 In previous Artifactory versions (tested on 6.2.0), the AQL query ""promotion.status"" returns non-promoted packages. However, in newer versions (tested on 7.6.0), non-promoted packages (promotion.status = null) are absent from the results. 

 

*Steps to reproduce:*

1. Deploy 2 different builds to Artifactory 6.2.0. Make sure they are NOT promoted.

2. Execute the following AQL query:
{code:java}
builds.find({
  ""promotion.status"": {""$ne"": ""Released""}
}).include(""name"",""number"",""url"")
{code}
3. You should see both non-promoted builds in the results

4. Deploy the same builds to Artifactory 7.6.0

5. Execute the same AQL query

6. You should *not* see the builds in the results

7. Promote any of the builds in 7.6.0, with any status *other than* ""Released""

8. Execute the same AQL query

9. You should now see the promoted build, and the non-promoted build is still absent

 

*Possible workaround:*

The following can be added to the query in order to include non-promoted builds:
{code:java}
""promotion.status"": {""$eq"": null} {code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc51fs:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Not able to run bootstrap when running artifactory as non artifactory user,RTFACT-23534,112631,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,manojwajekar,manojwajekar,07/Oct/20 9:25 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,permissions,,,,," 

I am trying to bootstrap binarystore.xml and license file at startup. We have security constraint in our infrastructure which doesn't allow us to run container with default artifactory(1030) user. I am getting following error when I try to run to artifactory as non-artifactory user.

 
{code:java}
Preparing to run Artifactory in Docker
Running as uid=1007060000(1007060000) gid=0(root) groups=1007060000
Dockerfile for this image can found inside the container.
To view the Dockerfile: 'cat /docker/artifactory-pro/Dockerfile.artifactory'.
Copying Artifactory bootstrap files
ls: /artifactory_bootstrap/binarystore.xml: Permission denied
ls: /artifactory_bootstrap/artifactory.lic: Permission denied
ls: /artifactory_bootstrap/info: Permission denied

{code}
artifactory_bootstrap folder is owned by artifactory user and it doesn't have required permissions. Looks like this folder is generated at build time. Is it possible to expand permission for this folder? or any other workaround for this issue?

 

 
{code:java}
$ ls -l
total 24
drwxrw-rw-    1 artifact artifact        64 Oct  7 21:05 artifactory_bootstrap
{code}
 

 ","Artifactory helm-chart version: 10.0.4

Artifactory-Pro Image version: 7.6.2

 

Platform:

Client Version: openshift-clients-4.2.2-201910250432
Kubernetes Version: v1.16.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc5148:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory 7.9.0 - jffe cant read predefined jointoken after restart - RPM install,RTFACT-23533,112614,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ulli_koch,ulli_koch,07/Oct/20 8:03 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,7.9.0,,,,,,,Access,Frontend,,,,,,0,,,,,,"We deployed Artifactory with a pre-given join.key at an ec2 instance.

It was installed over the official RPM-Package regarding to your installation guide.

I was able to reproduce this issue every time. Even on a clean install just by restarting the service:
 ""systemctl restart artifactory.service""

After doing this, the Artifactory-Frontend is not able to read the join.key
 *jffe -* *Failed init access client; Error: [JoinKey is not hex format]]*
 *at Promise*

In order this, the Frontend isn't registering to the access service and the jfrog platform is not reachable ""503 service unavailable""

The artifactory-service has no problem of reading the join.key and registering to cluster, but without the frontend you cant access the platform overall.

After falling back to version 7.7.3 the issue is gone and jffe can read the join.key without a problem.

I reproduced this issue with 7.9.0 on multiple ways (on an used instance and clean installs)

I even tried to replace the encrypted join.key with the unencrypted one before restarts, nothing helped. Seems jffe got trouble to read the join.key after it gets encrypted.

In order this. Version 7.9.0 cant be restarted on an RPM install with an predefined join.key. This should have a mayor impact on a reliable system operation.","RPM Install on an EC2-Instance

/var/opt/jfrog is mounted on an 1TB EBS-Volume

Database: PostgreSQL 11.8 on AWS-RDS",,,,,,,,,,,,JFUI-4924,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc510w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The search in JFrog UI is not working as expected,RTFACT-23506,110310,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,swarnenduk,swarnenduk,16/Sep/20 6:47 PM,09/Feb/21 10:58 AM,18/Feb/21 8:59 AM,,6.17.0,6.23.1,7.10.2,7.6.0,,,,,,,,,,,1,,,,,,"The search in JFrog UI is not working as expected. The quick search is not case sensitive. However, the quick search is not working for the below packages:
 # Docker
 # Conan

The quick search without any case is working for the below packages:
 # Nuget
 # Npm
 # Maven 
 # Pypi

The search specifying package type is working for all the packages. However, it is case-sensitive.

*Expected Behaviour*:
 # The quick search should not be case sensitive and it should search for packages based on the names irrespective of the package type format.
 ## For example, when searching for  ""ssl"", all Conan packages including “OpenSSL”, “BoringSSL” no matter of their casing should be found. Along with that, all Nuget packages which contain “ssl” in the package name should be found. Also, all the packages which mention “ssl” in their properties or any other metadata like description, tags or whatever is available should be shown. 
 # For searching for a specific package, we have the search option where we can specify the package type and name of the package and it does an AQL search. However, the package name has to be mentioned with proper casing. It is not always possible for users to remember the exact cases of the packages. It should not be case sensitive.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4oh4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
nuget-remote and nuget-remote-cache show no artifacts,RTFACT-23504,112273,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ctl_eng_tools,ctl_eng_tools,05/Oct/20 11:54 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.21.0,,,,,,,Artifactory,NuGet,,,,,,0,,,,,,"We have configured Local, Remote and Virtual NuGet repos per the documentation located [here|https://www.jfrog.com/confluence/display/RTF6X/NuGet+Repositories] but do not see any artifacts in nuget-remote or nuget-remote-cache via the Artifact Repository Browser.

We are able to deploy packages to nuget-local and can see those in the Artifact Repository Browser.

Our work-around has been to bypass Artifactory to obtain the packages, then publish them to nuget-local.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4z5k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to download the updated metadata file from remote repository when altResponse plugin is enabled,RTFACT-23491,111976,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jayanths,jayanths,02/Oct/20 3:15 PM,09/Feb/21 11:42 AM,18/Feb/21 8:59 AM,,6.20.1,6.22.0,,,,,,,,,,,,,0,,,,,,"*Problem statement:* When altResponse plugin is enabled, Artifactory is unable to download the updated metadata file from the remote repository. The altResponse method is invoked before Artifactory checking update from upstream so due to this the check upstream for update logic is never invoked when the AltResponse user plugin is enabled.

*Steps to reproduce:*
 # Deploy an altResponse plugin in Artifactory. (below is the sample plugin)
{code:java}
import org.artifactory.repo.RepoPath
import org.artifactory.request.Request

download {
    altResponse { Request request, RepoPath responseRepoPath ->
    status = 302
    headers[""location""] = ""https://www.google.com""
    }
}
{code}
2. Trigger a trace REST API to the remote repository.

{code:java}
curl -L -X GET http://Artifactory.com/artifactory/debian-remote/dists/xenial-security/InRelease\?trace
{code}
In the curl output, we can see the altResponse method is invoked before Artifactory checking update from upstream.
{code:java}
2020-10-01T23:40:22.878+05:30 Received request
2020-10-01T23:40:22.880+05:30 Request source = 0:0:0:0:0:0:0:1, Last modified = 01-01-70 05:29:59 +05:30, If modified since = -1, Thread name = http-nio-8081-exec-3
2020-10-01T23:40:22.881+05:30 Executing any BeforeDownloadRequest user plugins that may exist
2020-10-01T23:40:22.882+05:30 Retrieving info from remote repository 'debian-remote' type Debian
2020-10-01T23:40:22.912+05:30 Unable to find resource in debian-remote-cache:dists/xenial-security/InRelease
2020-10-01T23:40:22.917+05:30 Executing any AltRemotePath user plugins that may exist
2020-10-01T23:40:22.919+05:30 Appending matrix params to remote request URL
2020-10-01T23:40:22.919+05:30 Using remote request URL - http://archive.ubuntu.com/ubuntu/dists/xenial-security/InRelease
2020-10-01T23:40:22.919+05:30 Executing HEAD request to http://archive.ubuntu.com/ubuntu/dists/xenial-security/InRelease
2020-10-01T23:40:23.792+05:30 Found remote resource with last modified time - Thu Oct 01 23:38:00 IST 2020
2020-10-01T23:40:23.792+05:30 Found remote resource with ETag - ""1aa8e-5b09fe57cc000""
2020-10-01T23:40:23.792+05:30 Found remote resource with content length - 109198
2020-10-01T23:40:23.794+05:30 Returning found remote resource info
2020-10-01T23:40:23.798+05:30 Requested resource is found = true
2020-10-01T23:40:23.798+05:30 Requested resource is blocked = false
2020-10-01T23:40:23.798+05:30 Request is HEAD = false
2020-10-01T23:40:23.798+05:30 Request is for a checksum = false
2020-10-01T23:40:23.798+05:30 Target repository is not remote or doesn't store locally = false
2020-10-01T23:40:23.798+05:30 Requested resource was not modified = false
2020-10-01T23:40:23.799+05:30 Responding with found resource
2020-10-01T23:40:23.799+05:30 Executing any AltAllResponses user plugins that may exist
2020-10-01T23:40:23.800+05:30 Found non-null alternative response headers
2020-10-01T23:40:23.800+05:30 Alternative response status is set to 0 and message to 'null'
2020-10-01T23:40:23.800+05:30 Found no alternative content handles
2020-10-01T23:40:23.800+05:30 Executing any AltResponse user plugins that may exist
2020-10-01T23:40:23.864+05:30 Alternative response status is set to 302 and message to 'OK'
2020-09-09T13:05:22.041Z Found non-null alternative response headers
2020-09-09T13:05:22.041Z Setting response status to 302
2020-09-09T13:05:22.041Z Found non-null alternative response message - returning as content handle
2020-09-09T13:05:22.041Z Executing any BeforeDownload user plugins that may exist
2020-09-09T13:05:22.041Z Responding with selected content handle
{code}
Once the altResponse plugin is disabled then we can successfully download the updated metadata file from the remote repository.

*Expected result:* The altResponse method should be invoked before the download and not before the Artifactory checking update from upstream.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4xf4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Server errors on Workiva cloud Artifactory instance,RTFACT-23468,111771,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Stefan_Kraus,Stefan_Kraus,30/Sep/20 4:26 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,1,,,,,,"We are seeing 503 error return codes for accessing our server at workivaeast.jfrog.io as well as 500 errors in the UI 

``` Failed to collect dependencies at org.springframework:spring-webmvc:jar:5.2.7.RELEASE: Failed to read artifact descriptor for org.springframework:spring-webmvc:jar:5.2.7.RELEASE: Could not transfer artifact org.springframework:spring-webmvc:pom:5.2.7.RELEASE from/to central ([https://workivaeast.jfrog.io/workivaeast/maven-prod):] Transfer failed for [https://workivaeast.jfrog.io/workivaeast/maven-prod/org/springframework/spring-webmvc/5.2.7.RELEASE/spring-webmvc-5.2.7.RELEASE.pom] 503 Service Temporarily Unavailable -> [Help 1]

```

Errors seem intermittent but have affected multiple users. 

Noted strange login in artifactory logs: 
 2020-09-30T16:20:25.251Z [79bcea555b6a6f86] [ACCEPTED LOGIN] for client : jffe@000 / 127.0.0.1.
 2020-09-30T16:20:25.251Z [2025942e055aa131] [ACCEPTED LOGIN] for client : jffe@000 / 127.0.0.1.
 2020-09-30T16:20:25.252Z [36c8d4efe22d1540] [ACCEPTED LOGIN] for client : jffe@000 / 127.0.0.1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4w7c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Npm remote cache prevents packages pulled incorrectly,RTFACT-23455,111620,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,29/Sep/20 4:54 PM,09/Feb/21 12:06 PM,18/Feb/21 8:59 AM,,6.17.0,7.7.8,,,,,,,,,,,,,1,PB_Done,,,,,"If a request for an NPM file is sent to Artifactory NPM repository without the api/npm, the package will no longer be installable via the npm client.

 Steps to reproduce:

1.) Setup Artifactory with an Npm remote repository. In this example will call it npm-remote.

2.) run the following command: curl -uadmin:Password [http://localhost:8081/artifactory/npm-remote/findup|http://localhost:8081/npm-remote/findup]

3.) Configure Npm client work with Artifactory and run: npm install findup -verbose
{noformat}
npm info it worked if it ends with oknpm verb cli [npm verb cli   '/usr/local/Cellar/node/14.10.1/bin/node',npm verb cli   '/usr/local/bin/npm',npm verb cli   'install',npm verb cli   'findup',npm verb cli   '-verbose'npm verb cli ]npm info using npm@6.14.8npm info using node@v14.10.1npm verb npm-session 76795c2c2c24cb68npm http fetch GET 200 http://localhost:8081/artifactory/api/npm/npm-remote/findup 42msnpm http fetch GET 400 http://localhost:8081/artifactory/api/npm/npm-remote/findup/-/findup-0.1.5.tgz 8msnpm timing stage:rollbackFailedOptional Completed in 1msnpm timing stage:runTopLevelLifecycles Completed in 84msnpm verb stack Error: 400 Bad Request - GET http://localhost:8081/artifactory/api/npm/npm-remote/findup/-/findup-0.1.5.tgznpm verb stack     at /usr/local/lib/node_modules/npm/node_modules/npm-registry-fetch/check-response.js:117:15npm verb stack     at processTicksAndRejections (internal/process/task_queues.js:93:5)npm verb statusCode 400npm verb pkgid findup@latestnpm verb cwd /Users/ohadl/Upload/Npmnpm verb Darwin 19.6.0npm verb argv ""/usr/local/Cellar/node/14.10.1/bin/node"" ""/usr/local/bin/npm"" ""install"" ""findup"" ""-verbose""npm verb node v14.10.1npm verb npm  v6.14.8npm ERR! code E400npm ERR! 400 Bad Request - GET http://localhost:8081/artifactory/api/npm/npm-remote/findup/-/findup-0.1.5.tgz{noformat}
+_*Artifactory-request.log*_+ 
{code:java}
2020-09-29T16:47:21.911Z|c52c08417b1efeea|127.0.0.1|admin|GET|/api/npm/npm-remote/findup|200|-1|0|8|npm/6.14.8 node/v14.10.1 darwinx64{code}
{code:java}
2020-09-29T16:47:21.943Z|f03c7743df7c56b8|127.0.0.1|admin|GET|/api/npm/npm-remote/findup/-/findup-0.1.5.tgz|400|-1|0|4|npm/6.14.8 node/v14.10.1 darwin x64
{code}
+_*Artifactory-service.log*_+
{code:java}
2020-09-29T16:46:43.928Z [jfrt ] [INFO ] [4164a76f7141fb45] [o.a.r.HttpRepo:455            ] [http-nio-8081-exec-8] - npm-remote downloading https://registry.npmjs.org/findup/-/findup-0.1.5.tgz 3.17 KB{code}
{code:java}
2020-09-29T16:46:43.930Z [jfrt ] [ERROR] [4164a76f7141fb45] [o.a.r.HttpRepo:1386           ] [http-nio-8081-exec-8] - npm-remote: Failed to download 'https://registry.npmjs.org/findup/-/findup-0.1.5.tgz'. Received status code 200 and caught exception: Parent findup/- must be a folder{code}
{code:java}
2020-09-29T16:46:43.931Z [jfrt ] [WARN ] [4164a76f7141fb45] [.r.ArtifactoryResponseBase:125] [http-nio-8081-exec-8] - Sending HTTP error code 400: Rejected artifact download request: Parent findup/- must be a folder{code}
{code:java}
2020-09-29T16:47:21.941Z [jfrt ] [WARN ] [f03c7743df7c56b8] [.r.ArtifactoryResponseBase:125] [http-nio-8081-exec-3] - Sending HTTP error code 400: Parent findup/- must be a folder
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4vbk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The user name for an Access Token is not case insensitive,RTFACT-23454,107600,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joshuah,joshuah,14/Aug/20 7:03 PM,09/Feb/21 12:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"h3. Description

The user name for an Access Token is not case insensitive, while it IS case insensitive for basic authentications.
h3. Steps to reproduce the issue

Login using a user ID with one of its characters in upper case letter and the Access Token. For example, using *userID* as a username

 
{code:java}
curl https://hello.abc.io/artifactory/api/system/ping -uuserID:eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiI3T0xiaXpYQTAtT0Z2OXB4Q0EyLWViN0RqSFhvVUo4c29pWU1HbGM1WDBRIn0.eyJzdWIiOiJqb3NodWFoIiwic2NwIjoiYXBwbGllZC1wZXJtaXNzaW9uc1wvYWRtaW4gYXBpOioiLCJhdWQiOiJqZnJ0QCoiLCJpc3MiOiJqZmZlQDAwMCIsImV4cCI6MTU5NzQ0OTI2MywiaWF0IjoxNTk3NDMxMjYzLCJqdGkiOiJiZWRiYmI1Ni02N2I2LTRiYmEtYmVlZC01NWRiOTFjMTg3NjEifQ.RZwzfgShWi2gjxiMYOh58KvpV0_Oxc--ZdWcosdxAg0u65L08Oaiv0btpIEBQs-neTcxh7_89ywmy80FrHz2e7ZbsQ8pbq207VkIphOdZc1gg5L2h82YMiasWR02eL_VPskhe0YHlxNWvJTaQc6QozXeGS9T0Ds4Ay88JhsCDYauwxo5Aj259jjWIjZ7i5B2CG-iGN6ffweH6hrqC6eDYqwYXGntSlYLfF4au9YjjMQvQszGSAgaEe1LgJUWpl2iWD3SOCFOLXE54S8PBP7K8mqHtVRxxtE7vUxL5f-9pHoM1rpXN51FHFiR2y3B-WgiY4V57G0Cp3hxTgslleKPpQ{
  ""errors"" : [ {
    ""status"" : 401,
    ""message"" : ""Token principal mismatch.""
  } ]
}
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc49ro:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
maven pom file metadata does not appear as a part of metadata service APIs,RTFACT-23452,107224,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,hemanthb,hemanthb,11/Aug/20 9:20 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,community,jcenter,P2,PB_Done,,"I deployed a maven package with the below pom file.
 I have licenses, developers section added.
{code:xml}
<name>vcsurl</name>
<description>A demo for deployment to the Central Repository via maven</description>
<url>
http://github.com/hemanthsridhar/maven-demo
</url>
<licenses>
<license>
    <name>The Apache Software License, Version 2.0</name>
    <url>
        http://www.apache.org/licenses/LICENSE-2.0.txt
    </url>
</license>
</licenses>
<developers>
<developer>
    <name>Hemanth</name>
    <email>hemanthsridhar92@gmail.com</email>
</developer>
</developers>
<scm>
<connection>scm:git:git://github.com/hemanthsridhar/maven-demo.git</connection>
<developerConnection>scm:git:ssh://github.com:hemanthsridhar/maven-demo.git</developerConnection>
<url>
    http://github.com/hemanthsridhar/maven-demo/tree/master
</url>
</scm>
{code}
 
 Using the metadata API,
 when I do a GET request to get package info / version info, according to the swagger documentation licenses and developer section must be present in the response.

*BUT*
 I do not see anything details as such in my response.

 

Current response: 
{code:java}
{
 ""name"": ""1.0.0"",
 ""pkgid"": ""gav://org.apache.commons:commons-crypto"",
 ""ordinal"": 100000000999900,
 ""created"": ""2020-08-02T01:05:33.328Z"",
 ""user_properties"": [
 {
 ""name"": ""artifactory.internal.etag"",
 ""value"": ""29a1959decdbf3db9a32ffdb4007e093d10748de25d3cb23fe4453b4f51dd02a""
 }
 ],
 ""stats"": {},
 ""files"": [
 {
 ""name"": ""commons-crypto-1.0.0.pom"",
 ""sha256"": ""29a1959decdbf3db9a32ffdb4007e093d10748de25d3cb23fe4453b4f51dd02a"",
 ""sha1"": ""bd06a9cbf6fa5e8b897b848cced17847066d588e"",
 ""md5"": ""54df747c52201907fcbdbdf3b3c419eb"",
 ""lead"": true,
 ""length"": 21838,
 ""mime_type"": ""application/x-maven-pom+xml""
 },
 {
 ""name"": ""commons-crypto-1.0.0.jar"",
 ""sha256"": ""0043d8d74d8df632c57f938828e6f6efd555e293a9079dcdf59eab8e40107491"",
 ""sha1"": ""7938f66b01f62f03ef8af8a64401e85e45d51c5d"",
 ""md5"": ""981c95e38457b10d429090496b96f2d6"",
 ""length"": 134595
 },
 {
 ""name"": ""commons-crypto-1.0.0-sources.jar"",
 ""sha256"": ""df8fb1ecc40152259b1c4265c2f8696806514fbcd3be076425e7cc665b936db6"",
 ""sha1"": ""14b5b02e35691d3f0932b14b10e606abd641a371"",
 ""md5"": ""b388afe0ce7a16b9c822964ca2e1635b"",
 ""length"": 94099
 },
 {
 ""name"": ""commons-crypto-1.0.0-test-sources.jar"",
 ""sha256"": ""f8e63ad0a55053b739172bcfbf40d2c545423254b17b37e7b85a7194f83b129e"",
 ""sha1"": ""8382691a537a566342f73a4097c9b1fc976c3fa0"",
 ""md5"": ""5b614cf59825a180c336703dab6cfa4b"",
 ""length"": 63091
 }
 ],
 ""repos"": [
 {
 ""name"": ""jcenter-remote-cache"",
 ""url"": ""https://jcenter.jfrog.io/jcenter-remote-cache/com/github/hemanthsridhar/testng-ext-dataprovider/1.0/testng-ext-dataprovider-1.0.pom"",
 ""type"": ""remote"",
 ""lead_file_path"": ""org/apache/commons/commons-crypto/1.0.0/commons-crypto-1.0.0.pom""
 },
 {
 ""name"": ""jcenter"",
 ""url"": ""https://jcenter.jfrog.io/jcenter/com/github/hemanthsridhar/testng-ext-dataprovider/1.0/testng-ext-dataprovider-1.0.pom"",
 ""type"": ""local"",
 ""lead_file_path"": ""org/apache/commons/commons-crypto/1.0.0/commons-crypto-1.0.0.pom""
 }
 ],
 ""size"": 313623,
 ""modified"": ""2016-07-26T01:20:13Z""
}
  {code}

 Swagger documentation contract
  
 [/packages/\{pkgid}/versions/\{name}|http://localhost:8086/api-docs/#/operations/versions/showVersionByName]
  
{code:javascript}
{
  ""pkgid"": ""string"",
  ""name"": ""string"",
  ""created"": 0,
  ""ordinal"": 0,
  ""licenses"": [
    {
      ""name"": ""string"",
      ""description"": ""string"",
      ""url"": ""string"",
      ""modified"": 0,
      ""source"": ""string""
    }
  ],
  ""files"": [
    {
      ""name"": ""string"",
      ""md5"": ""string"",
      ""sha1"": ""string"",
      ""sha256"": ""string"",
      ""lead"": true,
      ""length"": 0,
      ""arch"": ""string"",
      ""dist"": ""string"",
      ""mime_type"": ""string"",
      ""qualifiers"": [
        {
          ""name"": ""string"",
          ""value"": ""string""
        }
      ]
    }
  ],
  ""repos"": [
    {
      ""name"": ""string"",
      ""url"": ""string"",
      ""type"": ""string"",
      ""lead_file_path"": ""string""
    }
  ],
  ""tags"": [
    ""string""
  ],
  ""stats"": {
  },
  ""vulnerabilities"": {
    ""high"": 0,
    ""medium"": 0,
    ""low"": 0,
    ""info"": 0,
    ""unknown"": 0,
    ""skipped"": 0
  },
  ""qualifiers"": [
    {
      ""name"": ""string"",
      ""value"": ""string""
    }
  ],
  ""user_properties"": [
    {
      ""name"": ""string"",
      ""value"": ""string""
    }
  ],
  ""contributors"": [
    {
      ""name"": ""string"",
      ""type"": ""string"",
      ""email"": ""string"",
      ""url"": ""string""
    }
  ],
  ""description"": ""string""
}

{code}",,,,,,,,,,,,,,META-694,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4ih:r4aji",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Sep/20 8:43 PM;ankushc;Hi [~orga] - any update on this?","16/Sep/20 5:20 PM;ankushc;Had a discussion on 9/16, [~orga] to check and get back",,,,,,,,,
Artifactory HA nodes cache outdated user group membership after user update,RTFACT-23441,111426,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,atlassianbuildteam,atlassianbuildteam,28/Sep/20 6:12 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.21.1,,,,,,,Artifactory,,,,,,,0,,,,,,"Steps to produce:
# Start artifactory HA cluster locally. with 2 nodes.
# Create a group called {{writers}} in artifactory. 
# Create a user called {{test}}, add it into the {{readers}} group only
# Create a local maven repo called {{maven-local}}. Grant {{writers}} group write permission.
# Upload a maven jar to one of the nodes using the {{test}} user. Ger 403 response
# Login as admin through UI to the other node, add user {{test}} to group {{writers}}.
# Perform step 5 against the previous node, get 403. Wait for 5mins, the same operation get 201.

Note step 5 is required because it needs to let the previous user group info cached.
The cache is immediately invalid on the node where the update user request happens, but not other nodes of the cluster",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4u6g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory 6.18.0 Pro - ldaps - wrong url/port,RTFACT-23440,111403,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ahmed123,ahmed123,27/Sep/20 10:00 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,Artifactory,,,,,,,0,artifactory,ldap,,,,"We are using ldap for authentication purpose. Until now we used general `ldap` on port - 3268. Change it to `ldaps`, on port 636, for authentication, return error

""Failed connecting to server (probably wrong url or port)""

Attached is the printscreen of above incident","Linux, Docker, Artifactory 6.18.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4u1k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Sep/20 10:01 AM;ahmed123;!image-2020-09-27-12-01-39-995.png!","28/Sep/20 8:44 AM;ahmed123;I found the problem, its because of the self-signed SSL certificate. However, the Java don't find the valid certificate path, is the correct error description, only found in Artificatory log.","02/Oct/20 3:49 AM;ahmed123;From artifactory.log, I've found

[Root exception is javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target

 

update the ca-certificates.crt and cacerts in java under SSL_CERT_FILE envrionment variable path.

However, it didin't solve the problem. Any idea, how to solve it?",,,,,,,,
Inaccurate Total Storage Size Information When Redundancy Is Bigger Than 1 ,RTFACT-23424,110986,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,24/Sep/20 12:34 AM,09/Feb/21 12:21 PM,18/Feb/21 8:59 AM,,6.21.1,7.7.8,,,,,,Artifact Storage,UI,,,,,,0,,,,,,"Inaccurate Total Storage Size Information When Redundancy Is Bigger Than 1:

 

Steps to reproduce:

I was able to reproduce on v6.21 and v7.7.8(Latest as of today)
 # Install single instance Artifaictory
 # Use the attached binarystore.xml template
 # For the sake of this test, before starting the instance, create the following directories as specified in binarystore.xml file:
 ## {{/home/ec2-user/shards/cache}}
 ## {{/home/ec2-user/shards/shard1}}
 ## {{/home/ec2-user/shards/shard2}}
 ## {{/home/ec2-user/shards/shard3}}
 ## {{/home/ec2-user/shards/shard4}}
 # Start the instance, and go the Storage info
 # You will notice that it shows the accurate total storage size. In my case 80GB (4 shards with 20GB each)

!1.jpg!

 
 # Now, stop the instance 
 # Set the redundancy to 2, save and close the binarystore.xml file.
 # Start the instance
 # You will notice that this time it shows an inaccurate total storage size. In my case 20GB, which is wrong, it should be 80GB.

!2.jpg!

 

[^binarystore.xml]",,,,,,,,,,,,,,,,,,,"24/Sep/20 12:30 AM;timt;1.jpg;https://www.jfrog.com/jira/secure/attachment/46212/1.jpg","24/Sep/20 12:33 AM;timt;2.jpg;https://www.jfrog.com/jira/secure/attachment/46211/2.jpg","24/Sep/20 12:24 AM;timt;binarystore.xml;https://www.jfrog.com/jira/secure/attachment/46213/binarystore.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4sig:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upgrading from 6.15.1 to 7.5.7 - Access 401 Unauthorized after full system import,RTFACT-23421,110950,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kchinnappan,kchinnappan,23/Sep/20 6:25 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,Access,Access Tokens,,,,,,2,,,,,,"I am trying to upgrade my on-prem Artifactory Pro instance from 6.15.1 to 7.5.7.

I've built a new server with 7.5.7 installed, so the 6.15.1 server is separate from the new one.

I ran a System Export in the old Artifactory server with ""Exclude Content"" checked.

Then I tried to run a System Import in the new 7.5.7 server, with no options checked.

As soon as the import started on the 7.5.7 server, the UI logged me out, and I started seeing these 401 errors in console.log:
{noformat}
2020-09-23T15:58:21.153Z ^[[1;32m[jfrt ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [ifactoryApplicationContext:608] [http-nio-8081-exec-2] - ### Beginning full system import ###
2020-09-23T15:58:21.165Z ^[[1;32m[jfrt ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [o.a.s.a.AccessServiceImpl:1400] [http-nio-8081-exec-2] - Triggering import in access server...
2020-09-23T15:58:21.183Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [.BiDirectionalLazyCacheImpl:92] [27.0.0.1-8040-exec-4] - Cache disabled!
2020-09-23T15:58:21.184Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [.BiDirectionalLazyCacheImpl:92] [27.0.0.1-8040-exec-4] - Cache disabled!
2020-09-23T15:58:21.186Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [.AccessImporterExporterImpl:85] [27.0.0.1-8040-exec-4] - Importing access server config and data from file: /opt/jfrog/artifactory/var/etc/access/access.bootstrap.json
2020-09-23T15:58:21.186Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:105] [27.0.0.1-8040-exec-4] - Starting import -> overwrite:true full:true ...
2020-09-23T15:58:21.222Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [j.a.m.ConfigMigrationRunner:73] [27.0.0.1-8040-exec-4] - Current version of Access Backup JSON is 4, latest version is 6. Applying migrations.
2020-09-23T15:58:21.223Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [j.a.m.ConfigMigrationRunner:73] [27.0.0.1-8040-exec-4] - Migrating Access Backup JSON to version 5
2020-09-23T15:58:21.231Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [j.a.m.ConfigMigrationRunner:73] [27.0.0.1-8040-exec-4] - Migrating Access Backup JSON to version 6
2020-09-23T15:58:21.231Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [UnifiedPermissionsConverter:48] [27.0.0.1-8040-exec-4] - converting 5 permission before import
2020-09-23T15:58:21.238Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [nifiedPermissionsConverter:114] [27.0.0.1-8040-exec-4] - 4 permission to import after v5 conversion
2020-09-23T15:58:21.261Z ^[[1;33m[jfac ]^[[0;39m ^[[31m[WARN ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:170] [27.0.0.1-8040-exec-4] - Found unmapped content with key NodeIdServiceId
2020-09-23T15:58:21.263Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing groups...
2020-09-23T15:58:21.278Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [.d.GroupStorageServiceImpl:290] [27.0.0.1-8040-exec-4] - Deleting existing groups
2020-09-23T15:58:21.304Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [.d.GroupStorageServiceImpl:292] [27.0.0.1-8040-exec-4] - Importing 4 groups
2020-09-23T15:58:21.327Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing groups in 51.27 millis
2020-09-23T15:58:21.328Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing users...
2020-09-23T15:58:21.345Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [s.d.UserStorageServiceImpl:490] [27.0.0.1-8040-exec-4] - Deleting existing users
2020-09-23T15:58:21.351Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [s.d.UserStorageServiceImpl:492] [27.0.0.1-8040-exec-4] - Importing 21 users
2020-09-23T15:58:21.537Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing users in 208.58 millis
2020-09-23T15:58:21.538Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing tokens...
2020-09-23T15:58:21.557Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing tokens in 18.92 millis
2020-09-23T15:58:21.557Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing federation_events...
2020-09-23T15:58:21.567Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing federation_events in 9.16 millis
2020-09-23T15:58:21.567Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing federation_servers...
2020-09-23T15:58:21.572Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing federation_servers in 4.45 millis
2020-09-23T15:58:21.572Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing permissions...
2020-09-23T15:58:21.582Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [rmissionStorageServiceImpl:629] [27.0.0.1-8040-exec-4] - Deleting existing permissions
2020-09-23T15:58:21.593Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [rmissionStorageServiceImpl:631] [27.0.0.1-8040-exec-4] - Importing 4 permissions
2020-09-23T15:58:21.608Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing permissions in 35.04 millis
2020-09-23T15:58:21.608Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing encryption...
2020-09-23T15:58:21.609Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [CertificateFileHandlerBase:137] [27.0.0.1-8040-exec-4] - Importing root certificate.
2020-09-23T15:58:21.787Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [CertificateFileHandlerBase:331] [27.0.0.1-8040-exec-4] - [ACCESS BOOTSTRAP] Saved new root certificate at: /opt/jfrog/artifactory/var/etc/access/keys/root.crt
2020-09-23T15:58:21.788Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [CertificateFileHandlerBase:162] [27.0.0.1-8040-exec-4] - Finished importing root certificate.
2020-09-23T15:58:21.788Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing encryption in 179.94 millis
2020-09-23T15:58:21.789Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:155] [27.0.0.1-8040-exec-4] - Importing config...
2020-09-23T15:58:21.811Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [a.c.RefreshableScheduledJob:53] [27.0.0.1-8040-exec-4] - Scheduling federationCleanupService task to run every 1209600 seconds
2020-09-23T15:58:21.812Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [ef868c87b3c30c9d] [.f.FederationCleanupService:59] [jf-access-task1     ] - Running clean up of outdated Federation events
2020-09-23T15:58:21.819Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:164] [27.0.0.1-8040-exec-4] - Finished importing config in 30.05 millis
2020-09-23T15:58:21.850Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [AccessImporterExporterImpl:113] [27.0.0.1-8040-exec-4] - Finished importing
2020-09-23T08:58:21.839L ^[[35m[tomct]^[[0m [SEVERE] [                ] [io.grpc.internal.SerializingExecutor] [io.grpc.internal.SerializingExecutor run] - Exception while executing runnable io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated@385325ea
org.jfrog.access.server.exception.UnauthorizedException: Bearer authentication failed, invalid token
        at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.authenticateBearer(AuthenticationServiceImpl.java:385)
        at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.processAuthSymbol(AuthenticationServiceImpl.java:335)
        at org.jfrog.access.server.rpc.service.TokenServerInterceptor.interceptCall(TokenServerInterceptor.java:37)
        at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
        at org.jfrog.access.server.rpc.service.TracerServerInterceptor$ContextServerCallHandler.startCall(TracerServerInterceptor.java:76)
        at io.grpc.Contexts.interceptCall(Contexts.java:52)
        at org.jfrog.access.server.rpc.service.TracerServerInterceptor.interceptCall(TracerServerInterceptor.java:55)
        at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
        at org.jfrog.access.server.rpc.service.LoggerInterceptor.interceptCall(LoggerInterceptor.java:23)
        at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startWrappedCall(ServerImpl.java:649)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startCall(ServerImpl.java:627)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.access$1900(ServerImpl.java:417)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInternal(ServerImpl.java:557)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInContext(ServerImpl.java:532)
        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
        at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.base/java.lang.Thread.run(Thread.java:834)


2020-09-23T15:58:21.858Z ^[[34;1m[jfmd ]^[[0m ^[[34m[INFO ]^[[0m [6f44e58218c91b6f] [compatibility_logger.go:22    ] [main                ] - Refreshing [permissions] stream - target server terminated gracefully [access_client]
2020-09-23T15:58:21.868Z ^[[36m[jfrou]^[[0m ^[[31;1m[ERROR]^[[0m [4db4bc8101706c2e] [external_topology.go:82       ] [main                ] - failed fetching external topology from Access: bad response status: 401 Unauthorized
2020-09-23T15:58:21.870Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [BiDirectionalLazyCacheImpl:121] [27.0.0.1-8040-exec-4] - Enabled cache for 'GroupCachingRepo'
2020-09-23T15:58:21.870Z ^[[1;33m[jfac ]^[[0;39m ^[[34m[INFO ]^[[0;39m [7a6caa6d23e6bbf6] [BiDirectionalLazyCacheImpl:121] [27.0.0.1-8040-exec-4] - Enabled cache for 'UserCachingRepo'
2020-09-23T15:58:21.870Z ^[[34;1m[jfmd ]^[[0m ^[[31m[WARN ]^[[0m [6f44e58218c91b6f] [compatibility_logger.go:25    ] [main                ] - [permissions] stream stopped (UNAUTHENTICATED) - immediate cache invalidation will not work without restart [access_client]
2020-09-23T08:58:21.869L ^[[35m[tomct]^[[0m [SEVERE] [                ] [io.grpc.internal.SerializingExecutor] [io.grpc.internal.SerializingExecutor run] - Exception while executing runnable io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated@664b80a3
org.jfrog.access.server.exception.UnauthorizedException: Bearer authentication failed, invalid token
        at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.authenticateBearer(AuthenticationServiceImpl.java:385)
        at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.processAuthSymbol(AuthenticationServiceImpl.java:335)
        at org.jfrog.access.server.rpc.service.TokenServerInterceptor.interceptCall(TokenServerInterceptor.java:37)
        at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
        at org.jfrog.access.server.rpc.service.TracerServerInterceptor$ContextServerCallHandler.startCall(TracerServerInterceptor.java:76)
        at io.grpc.Contexts.interceptCall(Contexts.java:52)
        at org.jfrog.access.server.rpc.service.TracerServerInterceptor.interceptCall(TracerServerInterceptor.java:55)
        at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
        at org.jfrog.access.server.rpc.service.LoggerInterceptor.interceptCall(LoggerInterceptor.java:23)
        at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startWrappedCall(ServerImpl.java:649)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startCall(ServerImpl.java:627)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.access$1900(ServerImpl.java:417)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInternal(ServerImpl.java:557)
        at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInContext(ServerImpl.java:532)
        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
        at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.base/java.lang.Thread.run(Thread.java:834)
 {noformat}
{noformat}
2020-09-23T18:22:40.493Z [jffe ] [ERROR] [                ] [                              ] [main                ] - TypeError: Cannot read property 'accessToken' of undefined
at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:208:46)
2020-09-23T18:22:40.494Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error creating admin token for user for service - artifactory
at Function.createAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:139:20)
2020-09-23T18:22:40.494Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: GRPC error - UNAUTHENTICATED
at Function.handleError (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:328:20)
at Function.createAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:140:26)
2020-09-23T18:22:40.495Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error getting admin token for service artifactory
at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:212:20)
2020-09-23T18:22:40.495Z [jffe ] [ERROR] [                ] [                              ] [main                ] - TypeError: Cannot read property 'accessToken' of undefined
at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:208:46)
2020-09-23T18:22:40.496Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error creating admin token for user for service - artifactory
at Function.createAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:139:20)
2020-09-23T18:22:40.496Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: GRPC error - UNAUTHENTICATED
at Function.handleError (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:328:20)
at Function.createAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:140:26)
2020-09-23T18:22:40.496Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error getting admin token for service artifactory
2020-09-23T11:22:40.502L [tomct] [SEVERE] [                ] [io.grpc.internal.SerializingExecutor] [io.grpc.internal.SerializingExecutor run] - Exception while executing runnable io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated@7690435d 
org.jfrog.access.server.exception.UnauthorizedException: Bearer authentication failed, invalid token
	at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.authenticateBearer(AuthenticationServiceImpl.java:385)
	at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.processAuthSymbol(AuthenticationServiceImpl.java:335)
	at org.jfrog.access.server.rpc.service.TokenServerInterceptor.interceptCall(TokenServerInterceptor.java:37)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at org.jfrog.access.server.rpc.service.TracerServerInterceptor$ContextServerCallHandler.startCall(TracerServerInterceptor.java:76)
	at io.grpc.Contexts.interceptCall(Contexts.java:52)
	at org.jfrog.access.server.rpc.service.TracerServerInterceptor.interceptCall(TracerServerInterceptor.java:55)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at org.jfrog.access.server.rpc.service.LoggerInterceptor.interceptCall(LoggerInterceptor.java:23)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startWrappedCall(ServerImpl.java:649)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startCall(ServerImpl.java:627)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.access$1900(ServerImpl.java:417)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInternal(ServerImpl.java:557)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInContext(ServerImpl.java:532)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)


at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:212:20)
2020-09-23T11:22:40.503L [tomct] [SEVERE] [                ] [io.grpc.internal.SerializingExecutor] [io.grpc.internal.SerializingExecutor run] - Exception while executing runnable io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated@4611f285 
org.jfrog.access.server.exception.UnauthorizedException: Bearer authentication failed, invalid token
	at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.authenticateBearer(AuthenticationServiceImpl.java:385)
	at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.processAuthSymbol(AuthenticationServiceImpl.java:335)
	at org.jfrog.access.server.rpc.service.TokenServerInterceptor.interceptCall(TokenServerInterceptor.java:37)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at org.jfrog.access.server.rpc.service.TracerServerInterceptor$ContextServerCallHandler.startCall(TracerServerInterceptor.java:76)
	at io.grpc.Contexts.interceptCall(Contexts.java:52)
	at org.jfrog.access.server.rpc.service.TracerServerInterceptor.interceptCall(TracerServerInterceptor.java:55)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at org.jfrog.access.server.rpc.service.LoggerInterceptor.interceptCall(LoggerInterceptor.java:23)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startWrappedCall(ServerImpl.java:649)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startCall(ServerImpl.java:627)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.access$1900(ServerImpl.java:417)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInternal(ServerImpl.java:557)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInContext(ServerImpl.java:532)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)


2020-09-23T11:22:40.503L [tomct] [SEVERE] [                ] [io.grpc.internal.SerializingExecutor] [io.grpc.internal.SerializingExecutor run] - Exception while executing runnable io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated@1ddcbc8b 
org.jfrog.access.server.exception.UnauthorizedException: Bearer authentication failed, invalid token
	at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.authenticateBearer(AuthenticationServiceImpl.java:385)
	at org.jfrog.access.server.service.auth.AuthenticationServiceImpl.processAuthSymbol(AuthenticationServiceImpl.java:335)
	at org.jfrog.access.server.rpc.service.TokenServerInterceptor.interceptCall(TokenServerInterceptor.java:37)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at org.jfrog.access.server.rpc.service.TracerServerInterceptor$ContextServerCallHandler.startCall(TracerServerInterceptor.java:76)
	at io.grpc.Contexts.interceptCall(Contexts.java:52)
	at org.jfrog.access.server.rpc.service.TracerServerInterceptor.interceptCall(TracerServerInterceptor.java:55)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at org.jfrog.access.server.rpc.service.LoggerInterceptor.interceptCall(LoggerInterceptor.java:23)
	at io.grpc.ServerInterceptors$InterceptCallHandler.startCall(ServerInterceptors.java:244)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startWrappedCall(ServerImpl.java:649)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.startCall(ServerImpl.java:627)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl.access$1900(ServerImpl.java:417)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInternal(ServerImpl.java:557)
	at io.grpc.internal.ServerImpl$ServerTransportListenerImpl$1StreamCreated.runInContext(ServerImpl.java:532)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)


2020-09-23T18:22:40.497Z [jffe ] [ERROR] [                ] [                              ] [main                ] - TypeError: Cannot read property 'accessToken' of undefined
at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:208:46)
2020-09-23T18:22:40.498Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error creating admin token for user for service - artifactory
at Function.createAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:139:20)
2020-09-23T18:22:40.499Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: GRPC error - UNAUTHENTICATED
at Function.handleError (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:328:20)
at Function.createAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:140:26)
2020-09-23T18:22:40.499Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error getting admin token for service artifactory
at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:212:20)
2020-09-23T18:22:40.499Z [jffe ] [ERROR] [                ] [                              ] [main                ] - TypeError: Cannot read property 'accessToken' of undefined
at Function.getAdminToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:208:46)
2020-09-23T18:22:40.501Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error creating impersonation token for user - null for service - artifactory
at Function.createImpersonationToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:114:20)
2020-09-23T18:22:40.502Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error getting impersonation token for user - null with sessionId -  for service artifactory
at Function.getImpersonationToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:175:9)
2020-09-23T18:22:40.502Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: GRPC error - UNAUTHENTICATED
at Function.handleError (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:328:20)
at Function.getImpersonationToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:179:26)
2020-09-23T18:22:40.505Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error creating impersonation token for user - null for service - artifactory
at Function.createImpersonationToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:114:20)
2020-09-23T18:22:40.505Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: error getting impersonation token for user - null with sessionId -  for service artifactory
at Function.getImpersonationToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:175:9)
2020-09-23T18:22:40.505Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: GRPC error - UNAUTHENTICATED
at Function.handleError (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:328:20)
at Function.getImpersonationToken (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Services/Access/AccessTokenService.ts:179:26) {noformat}
I tried updating access-admin credentials, but that doesn't work either:
{noformat}
[root@artifactory-01 artifactory]# curl -XPATCH -uaccess-admin:password http://localhost:8040/access/api/v1/users/access-admin -H ""Content-Type: application/json"" -d '{ ""password"": ""Password"" }'
{""errors"":[{""code"":""UNAUTHORIZED"",""detail"":""Unauthorized"",""message"":""HTTP 401 Unauthorized""}]} {noformat}
I noticed the issue is non-existent if I restart Artifactory after the system import completes.

What is the reason for these errors and is there anything extra I should have done during the system import to avoid the errors ?","Virtual Machine, CentOS Linux release 7.8.2003 (Core)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4sag:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"19/Oct/20 8:25 PM;smik;Any comment on this?
I'm seeing something very similar upgrading to 7.10.2.",,,,,,,,,,
Unable to launch jfrog artifactory  on https port,RTFACT-23413,110905,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,darshannraval,darshannraval,23/Sep/20 11:48 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,0,,,,,,"I am using chef to install jfrog artifactory version 7.7.3. I use system.yaml to configure my required settings. Below is my system.yaml file
 # 
 ## JFROG ARTIFACTORY SYSTEM CONFIGURATION FILE
 ## HOW TO USE: comment-out any field and keep the correct yaml indentation by deleting only the leading '#' character.

configVersion: 1
 # 
 ## NOTE: JFROG_HOME is a place holder for the JFrog root directory containing the deployed product, the home directory for all JFrog products.
 ## Replace JFROG_HOME with the real path!
 ## For example, in RPM install, JFROG_HOME=/opt/jfrog

 # 
 ## NOTE: Sensitive information such as passwords and join key are encrypted on first read.
 ## NOTE: The provided commented key and value is the default.

 # 
 ## SHARED CONFIGURATIONS
 ## A shared section for keys across all services in this config
 shared:
 ## Java 11 distribution to use
 javaHome: ""/opt/jfrog/artifactory/app/third-party/java""

 # 
 ## Extra Java options to pass to the JVM. These values add to or override the defaults.
 extraJavaOpts: ""-Xms512m -Xmx<%= @heap %>""

 # 
 ## Security Configuration
 security:
 ## Set your own Join key (takes precedence over 'joinKeyFile')
 #joinKey: ""<Your joinKey>""

 # 
 ## Join key file location
 #joinKeyFile: ""/opt/jfrog/artifactory/var/etc/security/join.key""

 # 
 ## Master key file location
 ## Generated by the product on first startup if not provided
 #masterKeyFile: ""/opt/jfrog/artifactory/var/etc/security/master.key""

 # 
 ## Maximum time to wait for key files (master.key and join.key)
 #bootstrapKeysReadTimeoutSecs: 120

 # 
 ## Logging Configuration (for non-java services)
 ## Artifactory/Access logging can be configured in the separate logback.xml file
 logging:
 consoleLog:
 ## If true, all service console logs will be redirected to a common console.log
 #enabled: true

 # 
 ## Log rotation settings
 rotation:
 ## The max file size at which enforce rotation
 #maxSizeMb: 25

 # 
 ## The number of backup files to maintain
 #maxFiles: 10

 # 
 ## Whether to compress the backup file
 #compress: true

 # 
 ## Node Settings
 node:
 ## A unique id to identify this node.
 ## Default: auto generated at startup.
 #id: ""art1""

 # 
 ## Default: auto resolved by startup script
 #ip:

 # 
 ## Sets this node as primary in HA installation
 #primary: true

 # 
 ## Sets this node as part of HA installation
 #haEnabled: true

 # 
 ## Database Configuration
 database:
 ## One of: mysql, oracle, mssql, postgresql, mariadb
 ##Default: Embedded derby
 type: derby
 driver: org.apache.derby.jdbc.EmbeddedDriver
 url: jdbc:derby:/opt/jfrog/artifactory/var/data/artifactory/derby;create=true

 # 
 ## Script Configuration
 ## Parameters for the application startup scripts
 script:
 ## The max time to wait for Tomcat to come up (START_TMO)
 serviceStartTimeout: 120

artifactory:
 #port: 8081
 tomcat:
 httpsConnector:
 # 
 ## Enable connector with SSL/TLS
 enabled: true
 ## Port to use for the HTTPS connector
 port: 8084
 ## Certificate file to use
 certificateFile: ""/etc/certs/pem/server.crt""
 ## Certificate key file to use.
 certificateKeyFile: ""/etc/certs/pem/private/server.key""
 ## Extra configuration for the HTTPS connector.
 ## Example:
 ## extraConfig: ""SSLProtocol='TLSv1+TLSv1.1+TLSv1.2'""
 extraConfig: ""SSLProtocol='TLSv1.2'""
 ========================================

Whenver I use above configuration I get ""
h1. HTTP Status 404 - Not Found""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4s0g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Eventual Queue waiting for the first file to be uploaded to S3 before deploying other files,RTFACT-23406,110735,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,oleksandrl,ohadl,ohadl,22/Sep/20 4:34 PM,09/Feb/21 3:53 PM,18/Feb/21 8:59 AM,,6.20.1,,,,,,,,,,,,,,2,P1,PB_Done,,,,"Eventual Queue waiting for the first file to be uploaded to S3 before deploying other files.

This means all other files deployed will wait in line before being available on the s3, and will also remain in the _queue directory until the first file is uploaded. 

Reproduce Steps:
 # Prepare 3 files, the 1st file “30g.dat”(size=30GB); 2nd file “1k.dat”(size=1KB); 3rd file “2k.dat”(size=2KB)
 # Upload the file “30g.dat” to Artifactory successfully.
 # Wait for 15s, make sure the dispatcher already dispatched it to some worker.
 # Upload file “1k.dat” to Artifactory successfully.
 # Wait for 15s, check the eventual __queue folder: <artifactory_data_dir>/eventual/__queue/, we expect the “1k.dat” should be scheduled to some idle worker after 1s and transfer it to s3 server, then remove it from _queue folder.
 # But the “1k.dat” stays in the _queue folder for a very long time, until the “30g.dat” transferring to s3 server finish, then the dispatcher start dispatching the file “1k.dat” and remove it from _queue folder.
 # Similarly upload “2k.dat” to Artifactory, notice the same behavior as “1k.dat”.
 # Do a thread dump after uploading “2k.dat”( “30g.dat” transferring is still ongoing) , found 5 s3 worker threads, but only one thread is “Runnable”, all others are “Parking”. Attached my captured thread dump.

 

Binarystore.xml file used:
{code:java}
<config version=""2"">
   <chain template=""cluster-s3""/>
   <provider id=""s3"" type=""s3"">
      <endpoint>http://s3.amazonaws.com</endpoint>
      <identity>xxxxxxxxxxxxxxx</identity>
      <credential>xxxxxxxxxxxxx</credential>
      <path>artifactory</path>
      <bucketName>mybucketname</bucketName>
   </provider>
</config>
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6td5:i",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-core3,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Dec/20 8:47 AM;inbarc;BMW - Expecting ETA, the bug was affecting their system yesterday and cause a crash. need to send them a release with the fix ontop of 6.x (not planning to upgrade to 7 soon)",,,,,,,,,,
Cannot create access token with '@' character,RTFACT-23399,108351,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,idanm,idanm,24/Aug/20 12:01 PM,13/Jan/21 10:31 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,automation-discovered,found-by-automation,regression,,,"An automation test in ui-sanity (testim.io-2.15 Access token that contains a @ character is visible) failed while trying to create via API access token with username that contain '@' character for example: user@-123

When executing the following request i does create a token (according to response) but it is not shown in the UI:
{code:java}
Reqeust :
http://localhost:8084/artifactory/api/security/token?username=user@-123&scope=member-of-groups:readers&expires_in=0
Response:
{
  ""scope"": ""member-of-groups:readers api:*"",
  ""access_token"": ""eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiJ5ekptY0lLVTNjbHI3RXM4U3NKUTBUODhfMDI3QlFXSFBNWThiZWlzcko4In0.eyJzdWIiOiJ1c2VyQC0xMjMiLCJzY3AiOiJtZW1iZXItb2YtZ3JvdXBzOnJlYWRlcnMgYXBpOioiLCJhdWQiOiJqZnJ0QDAxZWdmemExZThnZDhtMDRjNGd0dnExbmUzIiwiaXNzIjoiamZydEAwMWVnZnphMWU4Z2Q4bTA0YzRndHZxMW5lM1wvdXNlcnNcL2FkbWluIiwiaWF0IjoxNTk4MjY0MzYxLCJqdGkiOiJjOWRjZmNmMS05NWE4LTRkYWQtYWIxZS0wMzg0MjViYWE3Y2YifQ.Dv7nenXWE_7xtIsGEVuxpTpUDVvPS0s8v1_XEAv6MgmZVf0yysN4fY5viMhZ7T6naOo3e1bFxYztZzM4huQhiyQj47mbHIZB3i732lS3JUELE9icUwnRiFW5zp1NMinZzsCnctzkcmiM5BduGNWA3rnezUtWEhogk5Y0UPVtxuKgpcYzKDM_MQeAT42aa8PiJAamDuN7nuMRUL1oUVH5DG7BRynpNeaah69bWxNYB-cP35cQdsU1dlZyLKbJACsJUB357C4CAhcVAIuhaG1wul_J2ikqpU7YmFcJ1wzg4m-mUPzFsiKLvDYpn1e1kilEIMDsWDRhFVVihTwCRRsg_w"",
  ""expires_in"": 0,
  ""token_type"": ""Bearer""
}{code}
h3. Reproduce

execute a POST request to /artifactory/api/security/token?username=user@-123&scope=member-of-groups:readers&expires_in=0

with Content-Type = application/x-www-form-urlencoded",7.8.0-m027,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc6fjk:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Sep/20 12:36 PM;Maximy;Audience in this case should be *users/user@-123* and not *user@-1232*. This should resolve the issue. Need to understand why we skip the *users/* prefix","22/Sep/20 12:18 PM;orga;For user's tokens, the users/ prefix should be created by Artifactory. ",,,,,,,,,
Docker pull by digest from virtual repository shouldn't search in all repos when isResolveDockerTagsByTimestamp enabled,RTFACT-23394,110641,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,22/Sep/20 6:48 AM,09/Feb/21 12:45 PM,18/Feb/21 8:59 AM,,6.21.0,7.7.0,,,,,,,,,,,,,0,P1,PB_Done,,,,"+Current behavior:+
When the ""isResolveDockerTagsByTimestamp"" flag is enabled for a Docker virtual repository, upon a Docker pull by digest, we are immediately searching for the manifest in all local repositories. 

+Expected behavior:+
The ""isResolveDockerTagsByTimestamp"" flag should trigger the search in all repositories *only when a pull by tag* is performed, not by digest.

+The Problem:+
The search of the manifest in each repository is done using an SQL query that is under-performing, and reducing these searches as much as possible will help to significantly reduce load and improve performance.
{code:java}
SELECT DISTINCT N.REPO AS ITEMREPO,N.NODE_ID AS ITEMID,N.NODE_PATH AS ITEMPATH,N.NODE_NAME AS ITEMNAME,N.NODE_TYPE AS ITEMTYPE FROM NODES N WHERE ( N.REPO = ? AND N.DEPTH >= ? AND( N.NODE_PATH LIKE ? OR N.NODE_PATH = ?) AND N.NODE_NAME = ? AND N.NODE_TYPE = ?)
{code}

+Steps to reproduce:+
1. Setup an Artifactory instance with 10 local docker repositories and aggregate them to a virtual docker repository.
2. Push a docker image to the first local repository.
3. Enable JDBC logs to print the queries:
{code:java}
<logger name=""org.jfrog.storage.JdbcHelper"">
<level value=""DEBUG""/>
</logger>
{code}
4. Perform a pull by digest once with the ""isResolveDockerTagsByTimestamp"" disabled and once with it enabled.
5. Check how many times the above query was executed. When the flag is disabled, it is much less.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4qfk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Tracker performance test issue,RTFACT-23388,110598,Bug,In Progress,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,barh,Andriys,Andriys,21/Sep/20 3:21 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Tracker performance test on artifactory 7.9.0-m016 version and peer 0.1.30-proxy version with option
{code:java}
delete_file: true{code}
success only on the first run. Every next run with this option fails.  
Here is the part of tracker logs:
{code:java}
2020-09-21T11:58:42.498Z [track] [INFO ] [                ] [network_inspect_service.go:293] [main                ] - Full flow test with configuration name ""cmp-2"" started at 2020-09-21 11:50:34.190916953 +0000 UTC. Errors: [Peer 10.156.15.208:8086 downloaded from peer . error: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile Peer 10.156.0.40:8088 downloaded from peer . error: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile Peer 10.156.15.237:8086 downloaded from peer . error: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile Peer 10.156.0.233:8084 downloaded from peer . error: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile Peer 10.156.1.12:8084 downloaded from peer . error: no peers to download from (file may not exist) ...
{code}
The part of peer logs:
{code:java}
2020-09-21T11:50:22.049Z [peer ] [INFO ] [                ] [service.go:225                ] [main                ] - Scheduling download full flow in 12.141153735s of file artifactory-edge-uploads/testfile [test-service]
2020-09-21T11:50:34.262Z [peer ] [INFO ] [                ] [download.go:384               ] [main                ] - Starting to download 239 pieces for filename artifactory-edge-uploads/testfile to path /opt/var/data/peer/watch/artifactory-edge-uploads/testfile.downloading from peers: 10.156.0.41:8088: 119, 10.156.0.152:8084: 120 [download]
2020-09-21T11:50:35.335Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.41:8088-#3 piece 45 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:35.340Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.152:8084-#0 piece 29 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:35.340Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: worker 10.156.0.41:8088-#3 piece 45 could not be found in the file metainfo [download]
2020-09-21T11:50:35.499Z [peer ] [INFO ] [                ] [download.go:384               ] [main                ] - Starting to download 239 pieces for filename artifactory-edge-uploads/testfile to path /opt/var/data/peer/watch/artifactory-edge-uploads/testfile.downloading from peers: 10.156.0.41:8088: 120, 10.156.0.152:8084: 119 [download]
2020-09-21T11:50:35.717Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.41:8088-#0 piece 70 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:35.799Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.152:8084-#2 piece 38 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:35.799Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: worker 10.156.0.41:8088-#0 piece 70 could not be found in the file metainfo [download]
2020-09-21T11:50:36.114Z [peer ] [INFO ] [                ] [download.go:384               ] [main                ] - Starting to download 239 pieces for filename artifactory-edge-uploads/testfile to path /opt/var/data/peer/watch/artifactory-edge-uploads/testfile.downloading from peers: 10.156.0.152:8084: 120, 10.156.0.41:8088: 119 [download]
2020-09-21T11:50:36.119Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.152:8084-#1 piece 2 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:36.120Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.41:8088-#3 piece 16 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:36.120Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: worker 10.156.0.152:8084-#1 piece 2 could not be found in the file metainfo [download]
2020-09-21T11:50:36.747Z [peer ] [INFO ] [                ] [download.go:384               ] [main                ] - Starting to download 239 pieces for filename artifactory-edge-uploads/testfile to path /opt/var/data/peer/watch/artifactory-edge-uploads/testfile.downloading from peers: 10.156.0.41:8088: 120, 10.156.0.152:8084: 119 [download]
2020-09-21T11:50:36.752Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.152:8084-#2 piece 2 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:36.756Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.41:8088-#3 piece 78 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:36.756Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: worker 10.156.0.152:8084-#2 piece 2 could not be found in the file metainfo [download]
2020-09-21T11:50:38.008Z [peer ] [INFO ] [                ] [download.go:384               ] [main                ] - Starting to download 239 pieces for filename artifactory-edge-uploads/testfile to path /opt/var/data/peer/watch/artifactory-edge-uploads/testfile.downloading from peers: 10.156.0.41:8088: 120, 10.156.0.152:8084: 119 [download]
2020-09-21T11:50:38.015Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.41:8088-#3 piece 77 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:38.017Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.152:8084-#3 piece 19 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:38.017Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: worker 10.156.0.41:8088-#3 piece 77 could not be found in the file metainfo [download]
2020-09-21T11:50:40.519Z [peer ] [INFO ] [                ] [download.go:384               ] [main                ] - Starting to download 239 pieces for filename artifactory-edge-uploads/testfile to path /opt/var/data/peer/watch/artifactory-edge-uploads/testfile.downloading from peers: 10.156.0.152:8084: 239 [download]
2020-09-21T11:50:40.524Z [peer ] [WARN ] [                ] [splicer.go:108                ] [main                ] - Got error while processing event *model.ErrorEvent: worker 10.156.0.152:8084-#0 piece 4 could not be found in the file metainfo [splicer_service]
2020-09-21T11:50:40.524Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: worker 10.156.0.152:8084-#0 piece 4 could not be found in the file metainfo [download]
2020-09-21T11:50:45.526Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile [download]
2020-09-21T11:50:50.528Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile [download]
2020-09-21T11:50:55.530Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile [download]
2020-09-21T11:51:00.531Z [peer ] [ERROR] [                ] [download.go:147               ] [main                ] - Error occurred while downloading file artifactory-edge-uploads/testfile, a retry may happen. Error message: no peers to download from (file may not exist). Filename: artifactory-edge-uploads/testfile [download]
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4q6g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory health ping is showing ""OK"" even though there is a database connection issue due to database SSL cert issue",RTFACT-23364,110343,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tataraov,tataraov,17/Sep/20 6:39 AM,09/Feb/21 12:54 PM,18/Feb/21 8:59 AM,,7.6.3,,,,,,,,,,,,,,0,PB_Done,,,,,"h4. Issue Description

Artifactory health ping command is giving ""OK"" response when we remove the SSL certificate of the database(rds-ca-2019-root.pem) which is configured as part of the connection string.

*Artifactory version:*
 6.X and 7.X

*Connection Url:* 
{code:java}
jdbc:postgresql://<rdsdb.amazonaws.com>:<port>/artdb?ssl=true&sslfactory=org.postgresql.ssl.jdbc4.LibPQFactory&sslmode=verify-full&sslrootcert=/root/artifactory/etc/rds-ca-2019-root.pem
{code}
*Error message in log:*
{code:java}
2020-09-17 06:03:39,956 [http-nio-8081-exec-7] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'generic-local:working-edge.txt' Content-Length: 8935
 2020-09-17 06:03:40,003 [http-nio-8081-exec-7] [ERROR] (o.a.r.d.DbStoringRepoMixin:283) - IO error while trying to save resource generic-local:working-edge.txt'': java.io.FileNotFoundException: /root/artifactory-pro/etc/rds-ca-2019-root.pem (No such file or directory)
 2020-09-17 06:03:40,006 [http-nio-8081-exec-7] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Cannot deploy file 73d82337-2e73-4edd-b1c9-2df8aab6fc9e_working-edge.txt. Cause: /root/artifactory-pro/etc/rds-ca-2019-root.pem (No such file or directory)
 org.artifactory.sapi.common.RepositoryRuntimeException: Cannot deploy file 73d82337-2e73-4edd-b1c9-2df8aab6fc9e_working-edge.txt. Cause: /root/artifactory-pro/etc/rds-ca-2019-root.pem (No such file or directory){code}
h4. Steps to reproduce:

1. Create Artifactory (6.X or 7.X) instance
 2. Configure Amazon RDS database over SSL certificate with connection string having the SSL certificate.
 3. Perform Artifactory health ping which will give us ""OK"" response.
 4. Rename/Remove the SSL certificate(rds-ca-2019-root.pem) from its location and try to deploy a file which will give us the error
 5. Perform Artifactory health ping which still gives us the ""OK"" response.",,,,,,,,,,,,,,,,,,,"17/Sep/20 6:46 AM;tataraov;LOG.jpg;https://www.jfrog.com/jira/secure/attachment/46001/LOG.jpg","17/Sep/20 6:42 AM;tataraov;OK.jpg;https://www.jfrog.com/jira/secure/attachment/45999/OK.jpg","17/Sep/20 6:45 AM;tataraov;Upload.jpg;https://www.jfrog.com/jira/secure/attachment/46000/Upload.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4onk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The nginx-artifactory-pro image is missing /sbin/openrc,RTFACT-23354,110201,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rafael,rafael,15/Sep/20 4:14 PM,13/Jan/21 7:18 PM,18/Feb/21 8:59 AM,,7.5.7,7.6.4,7.7.8,,,,,Artifactory,,,,,,,1,,,,,,"The configuration reload implemented by nginx-artifactory-pro is not working properly, the root cause seems to be that {{/etc/init.d/nginx}} starts with {{#!/sbin/openrc-run}}, which is not available in the image. You should be able to reproduce it by just setting up artifactory with the default nginx proxy and configuration.

This is the error:
{code:java}
/sbin/openrc-run: bad interpreter: No such file or directory{code}
Installing openrc makes things worse. Since nginx is not started by openrc in the first place, openrc is extremely unhappy about managing nginx. Instead, the updateConfig.sh script needs to use {{nginx -s reload}} in order to reload nginx's config.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4nw0:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Dec/20 7:55 PM;sonaikar;We need resolution to this error since it fails to reload nginx configuration. 

 

bash-5.0$ /etc/init.d/nginx reload
bash: /etc/init.d/nginx: /sbin/openrc-run: bad interpreter: No such file or directory

 ",,,,,,,,,,
Artifactory does not respect mailserver certificate in truststore,RTFACT-23340,110062,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,meiswjn,meiswjn,14/Sep/20 2:58 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.10.6,,,,,,,Artifactory,Security,,,,,,0,,,,,,"When trusting a mailserver's certificate via the cacert store (Windows, portecle) and enabling TLS, the testmail fails with ""Could not convert socket to TLS"".

As far as I know it from other tools, this is due to the certificate not being imported correctly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4n28:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory API/UI responses incredibly slow. ,RTFACT-23339,110058,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Stefan_Kraus,Stefan_Kraus,14/Sep/20 2:06 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,7.7.6,,,,,,,Artifactory Cloud,REST API,UI,,,,,0,,,,,,"We were upgraded to version 7.7.6 this weekend and now almost all attempts to contact the UI or download artifacts take 30+ seconds, 15+ for most artifacts. 

This is causing a serious disruption for our org. 

The instance causing problems is at workviaeast.jfrog.io",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4n1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Matrix Parameters List Folders and Subfolders Even If The Propery Values Do Not Match,RTFACT-23328,109985,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,12/Sep/20 4:00 AM,09/Feb/21 12:59 PM,18/Feb/21 8:59 AM,,6.21.0,7.7.3,,,,,,,,,,,,,0,PB_Done,,,,,"Matrix Parameters List Folders and Subfolders Even If The Propery Values Do Not Match

Affected versions 6.20.x & 7.7.x

Steps to reproduce:

 
 # Create local Maven repo called: bug-demo-repo
 # Upload 3 jar files with the following GAV folders as shown below:

 

!1.jpg!

 

4. Add the property bugParam=False recursively for file 1 folders and files, as shown above.

5. Add the property bugParam=True recursively for file 3 folders and files, as shown above.

6. Open a new browser tab, and type: http://localhost:8081/artifactory/bug-demo-repo;bugParam=False/com/

 

7. As you can see the matrix parameter we used in the URL contains the following property  bugParam=False, however, the page still lists ""file3"" folder which has a bugParam=True property:

!2.jpg!

 

8. Yes, if we click on folder ""file3""  we will notice that the file ""file3"" is not listed, which is expected, however, we also should expect the +*folder file3*+ not be listed either, and not only the file ""file3"".:

!3.jpg!

 

Some users use matrix parameters in their Gradle Build against some packages that have several versions. Some versions of the package have different property values, and if all of them get listed even if the property does not match then the use of the Matrix parameter defeats its purpose.

 

 

 ",,,,,,,,,,,,,,,,,,,"12/Sep/20 3:41 AM;timt;1.jpg;https://www.jfrog.com/jira/secure/attachment/45905/1.jpg","12/Sep/20 3:55 AM;timt;2.jpg;https://www.jfrog.com/jira/secure/attachment/45904/2.jpg","12/Sep/20 3:57 AM;timt;3.jpg;https://www.jfrog.com/jira/secure/attachment/45903/3.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4mls:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't have the Artifactory build info icon in jenkins resolve the build in Artifactory,RTFACT-23327,109983,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,z9944x,z9944x,11/Sep/20 8:19 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.6.3,,,,,,,,,,,,,,0,,,,,,"Since we update our Artifactory from version 6.8.4 to version 7.6.3, the build Url attached to the Artifactory build info icon on Jenkins do not resolve to the actual build

We are using
 * Jenkins 2.235.5
 * Artifactory 7.6.3
 * Jenkins Artifactory plugin 3.8.1

From our Jenkins pipeline log :
{code:java}
[Pipeline] collectEnv [Pipeline] artifactoryUpload [consumer_0] Deploying artifact: https://srv.dev.com/artifactory/nuget-ci/Medesync/Medesync-9.8.0.36158.7z [consumer_1] Deploying artifact: https://srv.dev.com/artifactory/nuget-ci/Medesync.BusinessRules.9.8.0.36158.nupkg [consumer_2] Deploying artifact: https://srv.dev.com/artifactory/nuget-ci/Medesync.Service.Core.9.8.0.36158.nupkg [Pipeline] publishBuildInfo Deploying build info to: https://srv.dev.com/artifactory/api/build Deploying build descriptor to: https://srv.dev.com/artifactory/api/build Build successfully deployed. Browse it in Artifactory under https://srv.dev.com/artifactory/webapp/builds/Medesync%20::%20medesync%20::%20feature%20::%20TEST6/9.8.0.36158


{code}
Note that the the build are correctly pushed to artifactory

When we press on the ""Artifactory Build Info"" icon in the Jenkins build, it point to the Url :
[https://beta.dev.com/artifactory/webapp/builds/Medesync%20%3A%3A%20medesync%20%3A%3A%20feature%20%3A%3A%20TEST5/9.8.0.36160]

This open Artifactory and no build is found.

If we press on Builds >> Medesync :: medesync :: feature :: TEST5 >> 9.8.0.36160  we then see our build ( url is then [https://beta.dev.com/ui/builds/Medesync%20::%20medesync%20::%20feature%20::%20TEST5/9.8.0.36160/1599848309288/published|https://beta.dev.telushealth.com/ui/builds/Medesync%20::%20medesync%20::%20feature%20::%20TEST5/9.8.0.36160/1599848309288/published] )

Switching back to artifactory 6.8.4 and this build info link in Jenkins work back again.  Is it a know issue ?  Should we try updating to latest Artifactory available ?

Regards,

Sylvain

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4mlc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Oct/20 4:03 AM;dlee;https://www.jfrog.com/jira/browse/RTFACT-23005?focusedCommentId=194451&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-194451

workaround",,,,,,,,,,
Application could not be initialized: Wrong IV length: must be 16 bytes long,RTFACT-23325,109980,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Dmytro Leontiev,Dmytro Leontiev,11/Sep/20 4:33 PM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Artifactory,,,,,,,0,,,,,,"Hello,
 during the updating Artifactory from 6.19.1 to 7.4.3 migration process was passed successfully (according to migration.log and created system.yaml), installation of service was passed successfully (according to installService.sh output), the start of the service was successful as well (according to systemctl status). On the first run after the above manipulations, I faced an issue described in your docs ""Master key mismatch"". I've followed the described solution: made backup of existing entries removed the entries from the corresponding access tables, removed the master.key file under the ""$JFROG_HOME/var/etc/security"" directory, regenerated the master key and replaced the old key with the new one, also manually reverted the database password to plain text in system.yaml.

After performing the above steps, I've restarted the Artifactory and got ""Application could not be initialized: Wrong IV length: must be 16 bytes long"" error.

Complete log you can find below:
 [file:///C:/temp/console.log]
  

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4mko:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Export Import consistency issue,RTFACT-23323,109972,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avenkatachala,avenkatachala,11/Sep/20 4:36 AM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,0,,,,,,"We have tried exporting metadata and importing (only metadata and not binary content) it as part of migrating out environments from on-prem to AWS environment, we use rclone to move data (as repo replication has had network issues in the past) from on prem storage to AWS S3 bucket and here are the results we have seen running this 3 times in 3 different environments:

i) Hayward environment:  We have to run multiple imports (using the same exported file) to get the accurate number of repos and permission targets and 11 TB of data that was migrated (using rclone) was also identified. But no build information was migrated.

ii) San Diego Artifactory Environment :  We had to run a couple of imports (using the same export) but this time though all the repos and permission targets came over we did not have them identify the data migrated (we had around 71TB of data migrated but it only identified 57TB). So after a lot of to and fro with support we turned on repo replication and were able to catch up on data migration. But as the environment is in UAT phase we have to keep regular tabs on each live repo to make sure we turn on replication on a repo that has more content pushed in to, this has been a huge pain.  Along with this NO build information was migrated. 

iii) UK Artifactory Environment - When we ran an export and import on this environment it seems to have worked with the first attempt. We were able to see all the repositories, permission targets and data that was migrated (which was around 20TB of data).

 

We would want to raise a Jira bug about the consistency of this functionality (export and import) for a better experience of the product for other users or even us if we plan to migrate these environment again.",This is production environments,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4miw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory breaks after failing to acquire locks,RTFACT-23322,109880,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rafael,rafael,10/Sep/20 4:54 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.11.6,,,,,,,Artifactory,,,,,,,0,,,,,,"In our setup, we have a remote docker artifactory repo pointing to a local docker artifactory repo. Whenever we want an image to be persisted forever, we pull it from the remote repo (whatever is not there, we can clean up when needed). That setup has been working for us for a couple of years already.

However, we had a very unpleasant issue today, at some point we would see the following error in our logs (the image name was redacted):
{quote}2020-09-10 10:06:12,293 [http-nio-8081-exec-47] [ERROR] (o.a.a.d.r.DockerPackageWorkContext:309) - Error copying blob pre-releases-docker-local/myimg/label/sha256__1fb951f922948715a8909d20d0d8a2d7a69a5ab9d1bc6bd6f98207139d52b1c4 to path releases.docker.remote-local-cache/myimg/label/sha256__1fb951f922948715a8909d20d0d8a2d7a69a5ab9d1bc6bd6f98207139d52b1c4 : Lock on LockEntryId releases.docker.remote-local-cache:myimg/label/sha256__1fb951f922948715a8909d20d0d8a2d7a69a5ab9d1bc6bd6f98207139d52b1c4 not acquired in 120 seconds. Lock info: org.artifactory.storage.fs.lock.provider.JVMLockWrapper@670b072b.
{quote}
After a while, the artifactory instance would become completely unresponsive, and it would only recover after a restart. However, even after the restart, the error was still happening (though the instance was running ok at that point). We deleted that image from the remote repo and then pulled it back again from scratch. After that, the error never happened again for that image. Along with that we also increased `Metadata Retrieval Cache Period` to a high number.

However, the problem did repeat itself again, with another image, one day later. The same procedure was done and the problem went away. No restart was needed that time (maybe because of the new metadata retrieval cache period). It seems that, even though all the layers are already there, artifactory still attempts to copy them from other repos and fails.

 *Edit:* I think this issue is the same as  https://www.jfrog.com/jira/browse/RTFACT-20028. I have linked it as a duplicate. We're going to upgrade our artifactory and see if it solvesd it. If it does, the issue can be closed.",,,,,,,,,,,,,RTFACT-20028,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4mco:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to add bitnami helm chart remote in artifactory,RTFACT-23284,109584,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rafael,rafael,08/Sep/20 2:54 PM,12/Feb/21 10:35 PM,18/Feb/21 8:59 AM,,6.9.1,7.7.3,,,,,,Artifactory,,,,,,,4,,,,,,"I'm unable to add https://charts.bitnami.com/bitnami as a remote in artifactory. The issue seems related to https://charts.bitnami.com/ responding with the following header:

{code}
Server: AmazonS3
{code}

The value ""AmazonS3"" is relevant here. Artifactory works fine if the header is not present or the value is something else.

This is the message I get in the logs:

{code}
2020-09-08 15:14:22,259 [http-nio-8081-exec-304] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4kmo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/21 10:35 PM;krische;I am seeing the same issue in Artifactory 7.12.6",,,,,,,,,,
CLONE - CLONE - Birthday attacks against TLS ciphers with 64bit block size vulnerability,RTFACT-23258,109240,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nagaraju.lanka,ndubbala,03/Sep/20 7:54 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"*Item:*    Birthday attacks against TLS ciphers with 64bit block size vulnerability (Sweet32)

Birthday attacks against TLS ciphers with 64bit block size vulnerability (Sweet32)

attacks against TLS ciphers with 64bit block size vulnerability (Sweet32)

Disable and stop using DES, 3DES, IDEA or RC2 ciphers.   These weak ciphers can allow remote attackers obtain clear text data via a birthday attack against a long encrypted session.

 

Details:

CIPHER KEY-EXCHANGE AUTHENTICATION MAC ENCRYPTION(KEY-STRENGTH) GRADE\nTLSv1 WITH 64-BIT CBC CIPHERS IS SUPPORTED \nDES-CBC3-SHA RSA RSA SHA1 3DES(168) MEDIUM\nECDHE-RSA-DES-CBC3-SHA ECDH RSA SHA1 3DES(168) MEDIUM\nTLSv1.1 WITH 64-BIT CBC CIPHERS IS SUPPORTED \nDES-CBC3-SHA RSA RSA SHA1 3DES(168) MEDIUM\nECDHE-RSA-DES-CBC3-SHA ECDH RSA SHA1 3DES(168) MEDIUM\nTLSv1.2 WITH 64-BIT CBC CIPHERS IS SUPPORTED \nDES-CBC3-SHA RSA RSA SHA1 3DES(168) MEDIUM\nECDHE-RSA-DES-CBC3-SHA ECDH RSA SHA1 3DES(168) MEDIUM

 

Responsible Process:

/opt/jfrog/mission-control/bin/go/*insight-server*

 

 "," Mission Control  -  3.1.2 (build 88)

 ",,,,,,,,,RTFACT-17589,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc4ilc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Failed to update heartbeat for [Artifactory] and com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure,RTFACT-23246,109103,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,anoop.kulapparayilbaby,anoop.kulapparayilbaby,01/Sep/20 9:32 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,,,,,,,,0,Artifactory,,,,,"We are getting following error on our Artifactory Pro version 6.10 and artifactory went unresponsive :

 

2020-09-01 14:03:16,437 [art-exec-204] [ERROR] (o.a.s.d.s.s.ArtifactoryHeartbeatServiceImpl:122) - Failed to update heartbeat for [Artifactory]
org.springframework.transaction.TransactionSystemException: Could not commit JDBC transaction; nested exception is java.sql.SQLException: Java heap space
 at org.springframework.jdbc.datasource.DataSourceTransactionManager.doCommit(DataSourceTransactionManager.java:275)
 at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:757)
 at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:726)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:521)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:291)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy141.updateArtifactoryServerHeartbeat(Unknown Source)
 at org.artifactory.storage.db.servers.service.ArtifactoryServersCommonServiceImpl.updateArtifactoryServerHeartbeat(ArtifactoryServersCommonServiceImpl.java:137)
 at org.artifactory.storage.db.servers.service.ArtifactoryHeartbeatServiceImpl.updateHeartbeat(ArtifactoryHeartbeatServiceImpl.java:119)
 at sun.reflect.GeneratedMethodAccessor136.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
 at com.sun.proxy.$Proxy269.updateHeartbeat(Unknown Source)
 at org.artifactory.storage.db.servers.service.ArtifactoryHeartbeatServiceImpl$HeartbeatJob.onExecute(ArtifactoryHeartbeatServiceImpl.java:196)
 at org.artifactory.schedule.quartz.QuartzCommand.execute(QuartzCommand.java:48)
 at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
 at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
 at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLException: Java heap space
 at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
 at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
 at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
 at com.mysql.cj.jdbc.ConnectionImpl.commit(ConnectionImpl.java:814)
 at sun.reflect.GeneratedMethodAccessor49.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:152)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:40)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)
 at com.sun.proxy.$Proxy154.commit(Unknown Source)
 at org.springframework.jdbc.datasource.DataSourceTransactionManager.doCommit(DataSourceTransactionManager.java:272)
 ... 23 common frames omitted
2020-09-01 14:03:16,437 [art-exec-9] [ERROR] (o.a.a.n.NuGetServiceImpl:245) - Failed to map AQL results to NuGetSearchResult: Failed to execute the following sql query: SqlQuery\{query='select distinct n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName,n.created as itemCreated,n.modified as itemModified,n.updated as itemUpdated,n.created_by as itemCreatedBy,n.modified_by as itemModifiedBy,n.node_type as itemType,n.bin_length as itemSize,n.node_id as itemId,n.depth as itemDepth,n.sha1_actual as itemActualSha1,n.sha1_original as itemOriginalSha1,n.md5_actual as itemActualMd5,n.md5_original as itemOriginalMd5,n.sha256 as itemSha2,s.download_count as statDownloads,np.prop_key as propertyKey,np.prop_value as propertyValue from nodes n left outer join stats s on s.node_id = n.node_id left outer join node_props np on np.node_id = n.node_id left outer join node_props np100 on np100.node_id = n.node_id where ( n.repo = ? and np100.prop_key = ?) and n.node_type = ? ', params=[net-release, nuget.id, 1]}
org.artifactory.aql.AqlException: Failed to execute the following sql query: SqlQuery\{query='select distinct n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName,n.created as itemCreated,n.modified as itemModified,n.updated as itemUpdated,n.created_by as itemCreatedBy,n.modified_by as itemModifiedBy,n.node_type as itemType,n.bin_length as itemSize,n.node_id as itemId,n.depth as itemDepth,n.sha1_actual as itemActualSha1,n.sha1_original as itemOriginalSha1,n.md5_actual as itemActualMd5,n.md5_original as itemOriginalMd5,n.sha256 as itemSha2,s.download_count as statDownloads,np.prop_key as propertyKey,np.prop_value as propertyValue from nodes n left outer join stats s on s.node_id = n.node_id left outer join node_props np on np.node_id = n.node_id left outer join node_props np100 on np100.node_id = n.node_id where ( n.repo = ? and np100.prop_key = ?) and n.node_type = ? ', params=[net-release, nuget.id, 1]}
 at org.artifactory.storage.db.aql.dao.AqlDao.executeQueryLazy(AqlDao.java:98)
 at org.artifactory.storage.db.aql.itest.service.AqlServiceImpl.getAqlQueryStreamResult(AqlServiceImpl.java:203)
 at org.artifactory.storage.db.aql.itest.service.AqlServiceImpl.executeQueryLazy(AqlServiceImpl.java:155)
 at org.artifactory.addon.nuget.NuGetServiceImpl.populateRowsToSearchResult(NuGetServiceImpl.java:228)
 at org.artifactory.addon.nuget.NuGetServiceImpl.buildCacheForRepo(NuGetServiceImpl.java:185)
 at org.artifactory.addon.nuget.NuGetServiceImpl.buildCacheIfNecessary(NuGetServiceImpl.java:174)
 at org.artifactory.addon.nuget.NuGetServiceImpl.getOrCreateCachedPackages(NuGetServiceImpl.java:155)
 at org.artifactory.addon.nuget.NuGetServiceImpl.populateCacheIfNeeded(NuGetServiceImpl.java:127)
 at org.artifactory.addon.nuget.NuGetAddonImpl.afterRepoInit(NuGetAddonImpl.java:104)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
 at org.artifactory.schedule.aop.TraceableMethodInvocation.proceed(TraceableMethodInvocation.java:72)
 at org.artifactory.schedule.aop.AsyncAdvice.doInvoke(AsyncAdvice.java:333)
 at org.artifactory.schedule.aop.AsyncAdvice.lambda$submit$2(AsyncAdvice.java:285)
 at java.util.concurrent.FutureTask.run(FutureTask.java:266)
 at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
 at java.lang.Thread.run(Thread.java:748)
Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet successfully received from the server was 262,844 milliseconds ago. The last packet sent successfully to the server was 1,045,965 milliseconds ago.
 at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)
 at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
 at com.mysql.cj.jdbc.ConnectionImpl.setTransactionIsolation(ConnectionImpl.java:2261)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:152)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:40)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)
 at com.sun.proxy.$Proxy154.setTransactionIsolation(Unknown Source)
 at org.jfrog.storage.util.TxHelper.disableDirtyReads(TxHelper.java:65)
 at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:196)
 at org.artifactory.storage.db.aql.dao.AqlDao.executeQueryLazy(AqlDao.java:95)
 ... 23 common frames omitted
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet successfully received from the server was 262,844 milliseconds ago. The last packet sent successfully to the server was 1,045,965 milliseconds ago.
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
 at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
 at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)
 at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
 at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)
 at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167)
 at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:538)
 at com.mysql.cj.protocol.a.NativeProtocol.checkErrorMessage(NativeProtocol.java:702)
 at com.mysql.cj.protocol.a.NativeProtocol.sendCommand(NativeProtocol.java:641)
 at com.mysql.cj.protocol.a.NativeProtocol.sendQueryPacket(NativeProtocol.java:940)
 at com.mysql.cj.protocol.a.NativeProtocol.sendQueryString(NativeProtocol.java:886)
 at com.mysql.cj.NativeSession.execSQL(NativeSession.java:1073)
 at com.mysql.cj.jdbc.ConnectionImpl.setTransactionIsolation(ConnectionImpl.java:2256)
 ... 38 common frames omitted
Caused by: javax.net.ssl.SSLException: bad record MAC
 at sun.security.ssl.Alerts.getSSLException(Alerts.java:214)
 at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1967)
 at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1037)
 at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:948)
 at sun.security.ssl.AppInputStream.read(AppInputStream.java:105)
 at java.io.FilterInputStream.read(FilterInputStream.java:133)
 at com.mysql.cj.protocol.FullReadInputStream.readFully(FullReadInputStream.java:64)
 at com.mysql.cj.protocol.a.SimplePacketReader.readMessage(SimplePacketReader.java:108)
 at com.mysql.cj.protocol.a.SimplePacketReader.readMessage(SimplePacketReader.java:45)
 at com.mysql.cj.protocol.a.TimeTrackingPacketReader.readMessage(TimeTrackingPacketReader.java:57)
 at com.mysql.cj.protocol.a.TimeTrackingPacketReader.readMessage(TimeTrackingPacketReader.java:41)
 at com.mysql.cj.protocol.a.MultiPacketReader.readMessage(MultiPacketReader.java:61)
 at com.mysql.cj.protocol.a.MultiPacketReader.readMessage(MultiPacketReader.java:44)
 at com.mysql.cj.protocol.a.NativeProtocol.readMessage(NativeProtocol.java:533)
 ... 44 common frames omitted
Caused by: javax.crypto.BadPaddingException: bad record MAC
 at sun.security.ssl.InputRecord.decrypt(InputRecord.java:219)
 at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1032)
 ... 55 common frames omitted

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4hs0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Manage Xray Metadata"" permission is inherited for users from different groups under the same permission",RTFACT-23232,108928,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,31/Aug/20 1:26 PM,09/Feb/21 1:23 PM,18/Feb/21 8:59 AM,,7.7.1,,,,,,,,,,,,,,0,,,,,,"When creating permission that contains two groups (A and B), when group A has only Read permission, while B contains the ""Manage Xray Metadata"" permission.

A user that is associated with group A will inherit the ""Manage Xray Metadata"" permission.

*Steps to reproduce:*
 # create two groups:
 ** test1 - Only Read permission
 ** tets2 - All permissions without the ""Manage"" permission
 # Create permission and set both groups under the Groups tab, with the above permissions associated with them.
 #  Create a non-privileged user and associate it with group ""test1""
 # Go to a scanned artifact under JFrog Platform UI > artifacts > Select a scanned artifact > press the Xray tab

*Expected behavior:*

We expect the user to have only Read permissions for all the repositories associated with group test1

Actual result:

The user is able to manage Xray metadata and able to perform Xray actions as can be seen below:

!image-2020-08-31-16-23-29-309.png!

 ",,,,,,,,,,,,,,,,,,,"31/Aug/20 1:23 PM;davidp;image-2020-08-31-16-23-29-309.png;https://www.jfrog.com/jira/secure/attachment/45335/image-2020-08-31-16-23-29-309.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4h00:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deleted NuGet packages returned from FindPackagesById,RTFACT-23229,108850,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Harper,Harper,29/Aug/20 4:17 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,NuGet,,,,,,,0,NuGet,,,,,"I am getting this issue after deploying NuGet packages with the same version but different build metadata (as per semver2.0). 

For example:

{code}
Org\Org.Module\Org.Module.1.0.0+20200829102020.nupkg
Org\Org.Module\Org.Module.1.0.0+20200829103020.nupkg
Org\Org.Module\Org.Module.1.0.0+20200829104020.nupkg 
{code}
If I delete the first one of these, or it is deleted automatically in my case because Max Unique Snapshots is set to 2 (in this example), then calling:

{code}
[http://ukfavwjavarepo.org.com:8081/artifactory/api/nuget/org-dotnet-local/FindPackagesById()?id='Org.Module'&semVerLevel=2.0.0|http://ukfavwjavarepo.org.com:8081/artifactory/api/nuget/org-dotnet-local/FindPackagesById()?id=%27Org.Module%27&semVerLevel=2.0.0]
{code}

Continues to return the first one, which then causes a NuGet restore to fail as the following:

{code}
http://ukfavwjavarepo.org.com:8081/artifactory/api/nuget/org-dotnet-local/Download/Org.Module/7.0.0-snapshot+20200829102020
{code}

returns NotFound.

This is breaking all our Continuous Integration builds when packages are removed, and is only resolved by restating the Artifactory service.",Windows Server 2012 R2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4gk0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
DB migration issue when upgrading Artifactory from 6.10.9 to 7.7.3,RTFACT-23222,108744,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Ghassen,Ghassen,27/Aug/20 1:55 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.7.3,,,,,,,Artifactory,Derby,Upgrade,,,,,0,,,,,,"We cannot start Artifactory after upgrade from 6.10.9 to 7.7.3. We are using the embedded derby database and the artifactory-service.log shows the following error:
{noformat}
2020-08-27T08:11:49.605Z [jfrt ] [ERROR] [68fd8bcbbe66783b] [d.c.m.ConverterManagerImpl:249] [ocalhost-startStop-1] - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: Could not convert DB using v217_create_jobs_table converter : Table/View 'JOBS' already exists in Schema 'APP'. 2020-08-27T08:11:49.606Z [jfrt ] [ERROR] [68fd8bcbbe66783b] [tifactoryHomeConfigListener:62] [ocalhost-startStop-1] - Failed initializing Home. Caught exception: java.lang.IllegalStateException: Could not convert DB using v217_create_jobs_table converter : Table/View 'JOBS' already exists in Schema 'APP'. at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.handleException(ConverterManagerImpl.java:252) at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.serviceConvert(ConverterManagerImpl.java:210) at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654) at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658) at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.convertDatabase(ConverterManagerImpl.java:150) at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager.convertAndInit(PostDbSchemaInitializationManager.java:61) at org.artifactory.lifecycle.storage.db.init.HaInitLock.runInsideInitLockIfNeeded(HaInitLock.java:87) at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager.init(PostDbSchemaInitializationManager.java:50) at org.artifactory.lifecycle.webapp.servlet.BasicConfigurationManager.initArtifactoryInstallation(BasicConfigurationManager.java:141) at org.artifactory.lifecycle.webapp.servlet.BasicConfigurationManager.initialize(BasicConfigurationManager.java:125) at org.artifactory.lifecycle.webapp.servlet.ArtifactoryHomeConfigListener.contextInitialized(ArtifactoryHomeConfigListener.java:57) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4689) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5155) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:743) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:719) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:614) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1822) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: java.lang.RuntimeException: Could not convert DB using v217_create_jobs_table converter at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.convert(DbSqlConverterUtil.java:95) at org.artifactory.storage.db.version.converter.DBSqlConverter.lambda$convert$0(DBSqlConverter.java:49) at org.jfrog.storage.util.DbUtils.doWithConnection(DbUtils.java:516) at org.artifactory.storage.db.version.converter.DBSqlConverter.convert(DBSqlConverter.java:49) at org.artifactory.storage.db.DatabaseConverterAdapter.convert(DatabaseConverterAdapter.java:58) at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.serviceConvert(ConverterManagerImpl.java:206) ... 22 common frames omitted Caused by: java.sql.SQLException: Table/View 'JOBS' already exists in Schema 'APP'. at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source) at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source) at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source) at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source) at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source) at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.executeLargeUpdate(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(Unknown Source) at com.zaxxer.hikari.pool.ProxyStatement.executeUpdate(ProxyStatement.java:120) at com.zaxxer.hikari.pool.HikariProxyStatement.executeUpdate(HikariProxyStatement.java) at org.jfrog.storage.util.DbStatementUtils.executeSqlStream(DbStatementUtils.java:61) at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.doConvert(DbSqlConverterUtil.java:102) at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.convert(DbSqlConverterUtil.java:90) ... 27 common frames omitted Caused by: org.apache.derby.iapi.error.StandardException: Table/View 'JOBS' already exists in Schema 'APP'. at org.apache.derby.iapi.error.StandardException.newException(Unknown Source) at org.apache.derby.iapi.error.StandardException.newException(Unknown Source) at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.duplicateDescriptorException(Unknown Source) at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.addDescriptor(Unknown Source) at org.apache.derby.impl.sql.execute.CreateTableConstantAction.executeConstantAction(Unknown Source) at org.apache.derby.impl.sql.execute.MiscResultSet.open(Unknown Source) at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source) at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source) ... 36 common frames omitted 2020-08-27T08:11:49.607Z [jfrt ] [ERROR] [68fd8bcbbe66783b] [actoryContextConfigListener:91] [ocalhost-startStop-1] - Failed initializing Artifactory context: Artifactory home not initialized.
{noformat}
 

When I tried to drop manually the 'jobs' table another error complaining about and index appaer:
{noformat}
2020-08-27T13:32:46.453Z [jfrt ] [ERROR] [d1a5a8210b23f672] [d.c.m.ConverterManagerImpl:249] [ocalhost-startStop-1] - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: Could not convert DB using v217_update_artifact_bundles_indexes converter : Index 'NAME_VERSION_STATUS_IDX' does not exist.2020-08-27T13:32:46.453Z [jfrt ] [ERROR] [d1a5a8210b23f672] [d.c.m.ConverterManagerImpl:249] [ocalhost-startStop-1] - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: Could not convert DB using v217_update_artifact_bundles_indexes converter : Index 'NAME_VERSION_STATUS_IDX' does not exist.2020-08-27T13:32:46.453Z [jfrt ] [ERROR] [d1a5a8210b23f672] [tifactoryHomeConfigListener:62] [ocalhost-startStop-1] - Failed initializing Home. Caught exception: java.lang.IllegalStateException: Could not convert DB using v217_update_artifact_bundles_indexes converter : Index 'NAME_VERSION_STATUS_IDX' does not exist. at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.handleException(ConverterManagerImpl.java:252) at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.serviceConvert(ConverterManagerImpl.java:210) at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654) at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658) at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.convertDatabase(ConverterManagerImpl.java:150) at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager.convertAndInit(PostDbSchemaInitializationManager.java:61) at org.artifactory.lifecycle.storage.db.init.HaInitLock.runInsideInitLockIfNeeded(HaInitLock.java:87) at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager.init(PostDbSchemaInitializationManager.java:50) at org.artifactory.lifecycle.webapp.servlet.BasicConfigurationManager.initArtifactoryInstallation(BasicConfigurationManager.java:141) at org.artifactory.lifecycle.webapp.servlet.BasicConfigurationManager.initialize(BasicConfigurationManager.java:125) at org.artifactory.lifecycle.webapp.servlet.ArtifactoryHomeConfigListener.contextInitialized(ArtifactoryHomeConfigListener.java:57) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4689) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5155) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:743) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:719) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:614) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1822) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: java.lang.RuntimeException: Could not convert DB using v217_update_artifact_bundles_indexes converter at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.convert(DbSqlConverterUtil.java:95) at org.artifactory.storage.db.version.converter.DBSqlConverter.lambda$convert$0(DBSqlConverter.java:49) at org.jfrog.storage.util.DbUtils.doWithConnection(DbUtils.java:516) at org.artifactory.storage.db.version.converter.DBSqlConverter.convert(DBSqlConverter.java:49) at org.artifactory.storage.db.DatabaseConverterAdapter.convert(DatabaseConverterAdapter.java:58) at org.artifactory.storage.db.converter.markers.ConverterManagerImpl.serviceConvert(ConverterManagerImpl.java:206) ... 22 common frames omittedCaused by: java.sql.SQLSyntaxErrorException: Index 'NAME_VERSION_STATUS_IDX' does not exist. at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source) at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source) at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source) at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source) at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source) at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.executeLargeUpdate(Unknown Source) at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(Unknown Source) at com.zaxxer.hikari.pool.ProxyStatement.executeUpdate(ProxyStatement.java:120) at com.zaxxer.hikari.pool.HikariProxyStatement.executeUpdate(HikariProxyStatement.java) at org.jfrog.storage.util.DbStatementUtils.executeSqlStream(DbStatementUtils.java:61) at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.doConvert(DbSqlConverterUtil.java:102) at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.convert(DbSqlConverterUtil.java:90) ... 27 common frames omittedCaused by: org.apache.derby.iapi.error.StandardException: Index 'NAME_VERSION_STATUS_IDX' does not exist. at org.apache.derby.iapi.error.StandardException.newException(Unknown Source) at org.apache.derby.iapi.error.StandardException.newException(Unknown Source) at org.apache.derby.impl.sql.compile.DropIndexNode.bindStatement(Unknown Source) at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source) at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source) at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source) ... 35 common frames omitted
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4g0g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"28/Aug/20 12:28 PM;Ghassen;Please delete this issue. I was pointing to the wrong derby db (system.yaml it not updated with the new jdbc url).

 ",,,,,,,,,,
jfrog artifactory-maven-plugin doesn't deploy modules pom when using mvn profile,RTFACT-23202,108439,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yisca,yisca,25/Aug/20 11:08 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,Maven,,,,,,0,,,,,,"I have maven multi-project, and I want to use jfrog artifactory-maven-plugin to connect my Jenkins build to the artifacts in my artifactory. But when I'm running ""mvn deploy"" (via Jenkins pipline) with mvn profile, the pom.xml of my modules doesn't deployed (only the patent pom) and the artifacts number in my artifactory doesn't updated every build.

jfrog artifactory-maven-plugin in the parent pom:
<plugin>
   <groupId>org.jfrog.buildinfo</groupId>
      <artifactId>artifactory-maven-plugin</artifactId>
      <version>2.7.0</version>
      <inherited>false</inherited>
      <executions>
         <execution>
            <id>build-info</id>
            <goals>
               <goal>publish</goal>
            </goals>
            <configuration>
               <artifactory>
                  <includeEnvVars>true</includeEnvVars>
                  <envVarsExcludePatterns>*password*,*secret*,*key*,*token*,*passphrase*</envVarsExcludePatterns>
                  <timeoutSec>60</timeoutSec>
               </artifactory>
               <publisher>
                  <contextUrl>http://my_artifactory_url</contextUrl>
                  <username>userName</username>
                  <password>password</password>
                  <includePatterns>*.pom *.jar *.war</includePatterns>                                
                  <filterExcludedArtifactsFromBuild>false</filterExcludedArtifactsFromBuild>
                  <repoKey>libs-release-local</repoKey>
                  <snapshotRepoKey>libs-snapshot-local</snapshotRepoKey>
               </publisher>
               <buildInfo>
                  <buildName>${buildName}</buildName>
                  <buildNumber>${buildNumber}</buildNumber>
                  <buildUrl>${buildUrl}</buildUrl>
               </buildInfo>
               <licenses>
                  <autoDiscover>true</autoDiscover>
                  <includePublishedArtifacts>true</includePublishedArtifacts>
                  <runChecks>true</runChecks>
                  <scopes>compile,runtime</scopes>
               </licenses>
            </configuration>
        </execution>
    </executions>
</plugin>

mvn profile that active in maven deploy:
<profile>
   <id>noCompilation</id>
      <build>
         <plugins>
            <plugin>
               <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.6.0</version>
            </plugin>
            <plugin>
               <groupId>org.apache.maven.plugins</groupId>
               <artifactId>maven-jar-plugin</artifactId>
               <version>3.2.0</version>
            </plugin>
         </plugins>
     </build>
</profile>
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4e9k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Include or Exclude not working for copied artifacts,RTFACT-23178,101965,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,yevdoa,nadavw,nadavw,17/Jun/20 12:07 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When creating a webhook for copied artifacts with include or exclude patterns the event is not sent.

 

reproduce:

Include patterns:
 # Create new webhook with some include pattern
 # copy artifact from or to a repo with that name

Exclude patterns:
 # Create new webhook with any local repo and some exclude pattern
 # copy artifact from or to a repo 

in both cases, event does not send.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ceg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't update user profile when password starts with a colon,RTFACT-23165,108233,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,21/Aug/20 10:00 AM,09/Feb/21 1:35 PM,18/Feb/21 8:59 AM,,6.15.1,6.21.0,7.7.0,,,,,,,,,,,,0,,,,,,"A user with a password that starts with a colon "":"" is unable to edit his profile.

+Steps to reproduce:+
1. Setup Artifactory 6.x or 7.x.
2. Create internal user with a password that starts with a colon.
3. Login with that user.
4. Click on ""Edit Profile"", enter your password again and ""Unlock"".

*+Expected result:+* You should be able to update your profile.

*+Actual result:+* You are redirected to login page due to an ""ui/userApiKey"" request getting a 401.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4d3c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
User Plugins: Wiki-Entry for Upload seems incomplete,RTFACT-23160,108171,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,julian_schilling,julian_schilling,20/Aug/20 11:06 AM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Documentation,,,,,,,0,documentation,website,,,,"The Template example for ""Upload"" seems incredibly short compared to the other entries. It only contains a single entry ({{beforeUploadRequest}}) and seems to stop in the middle (the first \{{{}} is never closed).

[Link|https://www.jfrog.com/confluence/display/JFROG/User+Plugins#UserPlugins-Upload]

As the table on the same page only lists {{beforeUploadRequest}} as well, I assume only that one bracket is missing.

Furthermore, that [very same table|https://www.jfrog.com/confluence/display/JFROG/User+Plugins#UserPlugins-PluginExecutionPoints] describes {{beforeUploadRequest}} as ""On any download"" when it probably should be ""On any upload"" or similar.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4cp4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to unlock profile when using HTTP,RTFACT-23146,108107,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,krachynski,krachynski,19/Aug/20 11:23 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,6.21.0,,,,,,,Artifactory,,,,,,,0,,,,,,"When trying to unlock my profile to get my encrypted password or within Set me up, after briefly showing the page I'm trying to get to, I get a message ""You are already logged in"" and an option to go Home or Log Out. Either of these options take me away from the configuration I'm trying to do.

Reading through previous versions of this issue (all closed as fixed), I see that this is commonly due to unicode or other special characters in the user's password. I have used the minimum required by our AD rules. Upper and lower case alphabet and dashes. 

Another noted issue appears to be related to APIKEY. In request.log, I do see the following around my request:


{{ 20200819170608|180|REQUEST|172.26.26.35|krachynski|POST|/ui/userProfile|HTTP/1.1|200|51}}
{{ 20200819170608|3|REQUEST|172.26.26.35|krachynski|GET|/ui/oauth2/loginRequest|HTTP/1.1|200|0}}
{{ 20200819170608|18|REQUEST|172.26.26.35|krachynski|GET|/ui/userApiKey|HTTP/1.1|401|0}}
{{ 20200819170608|12|REQUEST|172.26.26.35|krachynski|GET|/ui/oauth/user/tokens|HTTP/1.1|200|0}}
{{ 20200819170608|4|REQUEST|172.26.26.35|krachynski|POST|/ui/auth/loginRelatedData|HTTP/1.1|200|17}}
{{ 20200819170609|21|REQUEST|172.26.26.35|krachynski|GET|/ui/auth/current|HTTP/1.1|200|0}}
{{ 20200819170609|5|REQUEST|172.26.26.35|krachynski|GET|/ui/oauth2/loginRequest|HTTP/1.1|200|0}}

{{ Where userApiKey returns a 401. I don't know if this is related.}}

I use a password manager to normally fill my password even though I can type this one by heart.

I have tested this behaviour in Safari on macOS 10.14.6 (Mojave) as well as Firefox on the same system. I am unable to get my configurations out of Artifactory at this time.","Artifactory 6.21.0 on CentOS 6. 

Safari and Firefox on macOS 10.14",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4ccg:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Aug/20 1:23 AM;krachynski;Okay, while I do have the TLS configuration set up for Artifactory, the certificate is signed by a corporate CA which has, so far, been a pain to keep maintained in the various JDKs we have installed. So I have been using an unsecured connection to reach my server (it is internal and I trust our security team to keep it protected). We also have the https URL configured for custom base url. This is a new machine without that CA trust installed so it was failing to connect me but not warning me at the same time.",,,,,,,,,,
Request Logs showing wrong content length value for certain npm request.,RTFACT-23135,107953,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shayb,ohadl,ohadl,18/Aug/20 4:12 PM,09/Feb/21 1:39 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"The blew request returns a content length of 0 even though metadata json has been received.
{code:java}
20200818124634|1395|REQUEST|127.0.0.1|admin|GET|/api/npm/npm/jquery|HTTP/1.1|200|0
{code}
This is followed by the GET request for the actual binary and is presented correctly.
{code:java}
20200818124635|1055|REQUEST|127.0.0.1|admin|GET|/api/npm/npm/jquery/-/jquery-3.5.1.tgz|HTTP/1.1|200|432861{code}
Steps to reproduce 

 

1.) configure Artifactory with NPM client.

2.) Run : npm install jquery

 

To see the full metadata json you may run the below example curl:

 

$ curl -uadmin:assword ""http://localhost:8081/artifactory/api/npm/npm/jquery"" -vvv

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4bg0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UI Bug during Repository Export ,RTFACT-23111,107615,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mariy,mariy,16/Aug/20 2:25 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"During a repository export the UI will show a server 500 error, while in the logs the export will succeed in around a minute: 

2020-08-13T17:43:07.354Z [jfrt ] [INFO ] [c74d93a449fa9035] [a.r.d.i.DbRepoExportHandler:75] [art-exec-6          ] - local-repo export started with 283 nodes to: '/home/artifactory/repositories/local-repo'
2020-08-13T17:44:56.830Z [jfrt ] [INFO ] [c74d93a449fa9035] [a.r.d.i.DbRepoExportHandler:85] [art-exec-6          ] - local-repo export finished with: 283 Items exported (269 files and 14 folders), 0 Item skipped: (0 files and 0 folders).Duration: 1.82 minutes IPS: 2.58 Target: '/home/artifactory/repositories/local-repo'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc49h4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
PyPI repository claims to support Range requests but ignores header?,RTFACT-23108,107598,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tgs,tgs,14/Aug/20 5:46 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.18.1,,,,,,,PyPI,,,,,,,0,,,,,,"I came across this issue while testing part of a forthcoming {{pip}} release.  An experimental version of pip uses HTTP Range requests to incrementally fetch wheels, so that it can stop the transfer once any dependency information is downloaded.  This doesn't work on artifactory - pip crashes when trying to use it.  I reported the issue [here on pip's tracker|https://github.com/pypa/pip/issues/8723].  After some command line testing with cURL, I think the problem may well be in Artifactory.
{code:java}
$ curl -H ""Range: bytes=0-1023""  ""http://artifactory.example.com/artifactory/api/pypi/python-virtual-repo/packages/packages/6b/36/d6c18632a339dafa54fd128b0dd2c36c6dc4bc86b8e0d366ccd9f22b480a/Cython-0.29.21-cp37-cp37m-manylinux1_x86_64.whl"" -i  -v -s > /dev/null
* About to connect() to artifactory.example.com port 8081 (#0)
*   Trying 130.14.25.172...
* Connected to artifactory.example.com (130.14.25.172) port 8081 (#0)
> GET /artifactory/api/pypi/python-virtual-repo/packages/packages/6b/36/d6c18632a339dafa54fd128b0dd2c36c6dc4bc86b8e0d366ccd9f22b480a/Cython-0.29.21-cp37-cp37m-manylinux1_x86_64.whl HTTP/1.1
> User-Agent: curl/7.29.0
> Host: artifactory.example.com
> Accept: */*
> Range: bytes=0-1023
> 
< HTTP/1.1 200 OK
< Server: Artifactory/6.18.1
< X-Artifactory-Id: 58b6d1fd8d039ec1:-18e585a9:17378973c9c:-8000
< Cache-Control: public, max-age=31536000
< Last-Modified: Wed, 08 Jul 2020 21:56:33 GMT
< ETag: 5c7486cdb788792dfb0ea3928e075a2df9960578
< X-Checksum-Sha1: 5c7486cdb788792dfb0ea3928e075a2df9960578
< X-Checksum-Sha256: 5e545a48f919e40079b0efe7b0e081c74b96f9ef25b9c1ff4cdbd95764426b58
< X-Checksum-Md5: e244967a4c60b39072d30485df45fd90
< Accept-Ranges: bytes
< X-Artifactory-Filename: Cython-0.29.21-cp37-cp37m-manylinux1_x86_64.whl
< Content-Disposition: attachment; filename=""Cython-0.29.21-cp37-cp37m-manylinux1_x86_64.whl""; filename*=UTF-8''Cython-0.29.21-cp37-cp37m-manylinux1_x86_64.whl
< Content-Type: application/octet-stream
< Content-Length: 1969113
< Date: Fri, 14 Aug 2020 17:20:12 GMT
< 
{ [data not shown]
* Connection #0 to host artifactory.example.com left intact {code}
I'm not an HTTP expert, but my understanding is that the content-length should be 1024 and the status should be 206, rather than 1969113 and 200.

The pip feature that uses this is not yet enabled by default, but it may be this fall.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc49e0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Vfs Exception: Failed to update file - exists duplicates SHA1 in database when deploy artifact - status code 500,RTFACT-23107,107588,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ITLodz@idemia.com,ITLodz@idemia.com,14/Aug/20 8:17 AM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,6.9.2,,,,,,,Artifact Storage,Artifactory,Database,,,,,0,database,deploy,,,,"*Problem statement:*

When trying to deploy artifacts, we get error about duplicates the same SHA1 in rows in database. Status code 500.

 

*Whats happening:*

 
{code:java}
2020-08-13 09:03:53,182 [http-nio-8081-exec-91] [ERROR] (o.a.w.s.RepoFilter  :251) - Upload request of /path/*/*.jar failed due to {}
org.artifactory.storage.fs.VfsException: Failed to update file: '/path/*/maven-metadata.xml' id: '368104357': Cannot add or update a c
hild row: a foreign key constraint fails (`artifactory`.`nodes`, CONSTRAINT `nodes_binaries_fk` FOREIGN KEY (`sha1_actual`) REFERENCES `binaries` (`sha1`))
        at org.artifactory.storage.db.fs.service.FileServiceImpl.updateFile(FileServiceImpl.java:191)
        at org.artifactory.storage.db.fs.model.DbMutableFile.doUpdateNode(DbMutableFile.java:266)
        at org.artifactory.storage.db.fs.model.DbMutableItem.save(DbMutableItem.java:294)
        at org.artifactory.storage.fs.lock.SessionLockEntry.save(SessionLockEntry.java:77)
        at org.artifactory.storage.db.fs.session.SqlStorageSession.save(SqlStorageSession.java:73)
        at org.artifactory.storage.db.fs.session.SqlStorageSession.beforeCommit(SqlStorageSession.java:132)
        at org.artifactory.storage.db.spring.SessionSynchronization.beforeCommit(SessionSynchronization.java:85)
        at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCommit(TransactionSynchronizationUtils.java:95)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerBeforeCommit(AbstractPlatformTransactionManager.java:928)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:740)
        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:726)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:521)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:291)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
        at com.sun.proxy.$Proxy154.saveResourceInTransaction(Unknown Source)
        at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1816)
        at sun.reflect.GeneratedMethodAccessor214.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
        at com.sun.proxy.$Proxy154.saveResource(Unknown Source)
        at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:544)
        at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:527)
        at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:416)
        at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:406)
        at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:387)
        at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:216)
        at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:182)
        at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:136)
        at sun.reflect.GeneratedMethodAccessor197.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
        at org.artifactory.request.aop.
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`artifactory`.`nodes`, CONSTRAINT `nodes_binaries_fk` FORE
IGN KEY (`sha1_actual`) REFERENCES `binaries` (`sha1`))
        at sun.reflect.GeneratedConstructorAccessor1093.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:404)
        at com.mysql.jdbc.Util.getInstance(Util.java:387)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:932)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3878)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3814)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2478)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2625)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2551)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1861)
        at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2073)
        at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2009)
        at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5094)
        at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1994)
        at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229)
        at org.artifactory.storage.db.fs.dao.NodesDao.update(NodesDao.java:194)
        at org.artifactory.storage.db.fs.serv
{code}
 

 

*Steps to reproduce the issue:*
 # add file to the cache/_pre folder
 # start deployment of an artifact
 # delete the artifact from step 1 while deploying the artifact - > this operation must occur in the moment Artifactory looking for the files

 

In my opinion there is bug in application.

Thank you very much for your help and troubleshooting tips.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc49cg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"01/Sep/20 3:35 PM;ITLodz@idemia.com;kindly reminder",,,,,,,,,,
docker pull/push with microk8s returns a 401 unless explicitly passing credentials,RTFACT-23106,107586,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,niro,niro,14/Aug/20 1:15 AM,18/Feb/21 6:55 AM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,,,,,,,,0,,,,,,"h3. *Problem Description + Exception/Error*

It looks like in microk8s, when trying to perform a docker pull or push Artifactory will reject the action with a 401 unless credentials are explicitly stated. The exact error is 

*ctr: failed to resolve reference ""docker-local.my-wildcard-subdomain/xmrig/xmrig:latest"": failed to authorize: failed to fetch anonymous token: unexpected status: 401 Unauthorized*

 
h3. *Expected Behavior*

Microk8s uses containerd and specifically uses the containerd-template.toml file to add registries and authentication. More info can be found here [https://microk8s.io/docs/registry-private]. If credentials are configured inside the containerd-template.toml, the docker pull from the private registry should succeed.

 
h3. *Reproduction*

For the following examples I used *my-wildcard-subdomain* as the artifactory URL, using the *docker-local* subdomain method for docker repositories. I tested and both pushes and pulls with the Docker client worked in this environment, and have tested with other repos such as the virtual. I ran these tests with debug mode on to get more verbose logs.

When setting credentials in the containerd-template.toml file as such (following official documentation such as [https://github.com/containerd/cri/blob/master/docs/registry.md])

{{[plugins.""io.containerd.grpc.v1.cri"".registry.mirrors.""docker-local.my-wildcard-subdomain""]}}
{{  endpoint = [""http://docker-local.my-wildcard-subdomain""]}}
{{  [plugins.""io.containerd.grpc.v1.cri"".registry.configs]}}
{{    [plugins.""io.containerd.grpc.v1.cri"".registry.configs.""docker-local.my-wildcard-subdomain"".auth]}}
{{      username = ""admin""}}
{{      password = ""password""}}

 

and performing a

*microk8s.ctr -debug image pull docker-local.my-wildcard-subdomain/xmrig/xmrig:latest --skip-verify*

I would get the following output:

DEBU[0000] fetching image=""docker-local.my-wildcard-subdomain/xmrig/xmrig:latest""
 DEBU[0000] resolving host=docker-local.my-wildcard-subdomain
 DEBU[0000] do request host=docker-local.my-wildcard-subdomain request.header.accept=""application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.list.v2+json, application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json, */*"" request.header.user-agent=containerd/v1.3.4 request.method=HEAD url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""
 DEBU[0000] fetch response received host=docker-local.my-wildcard-subdomain response.header.connection=keep-alive response.header.content-type=""application/json;charset=ISO-8859-1"" response.header.date=""Fri, 14 Aug 2020 00:58:53 GMT"" response.header.docker-distribution-api-version=registry/2.0 response.header.server=""Artifactory/7.5.7 70507900"" response.header.www-authenticate=""Bearer realm=\""https://docker-local.my-wildcard-subdomain:443/artifactory/api/docker/docker-local/v2/token\"",service=\""docker-local.my-wildcard-subdomain:443\"",scope=\""repository:xmrig/xmrig:pull\"""" response.header.x-artifactory-id=""258f77fbf070b2ae:73affb81:173e9c95b12:-8000"" response.header.x-artifactory-node-id=niro-severen response.status=""401 Unauthorized"" url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""
 DEBU[0000] Unauthorized header=""Bearer realm=\""https://docker-local.my-wildcard-subdomain:443/artifactory/api/docker/docker-local/v2/token\"",service=\""docker-local.my-wildcard-subdomain:443\"",scope=\""repository:xmrig/xmrig:pull\"""" host=docker-local.my-wildcard-subdomain
 DEBU[0000] do request host=docker-local.my-wildcard-subdomain request.header.accept=""application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.list.v2+json, application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json, */*"" request.header.user-agent=containerd/v1.3.4 request.method=HEAD url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""
 *ctr: failed to resolve reference ""docker-local.my-wildcard-subdomain/xmrig/xmrig:latest"": failed to authorize: failed to fetch anonymous token: unexpected status: 401 Unauthorized*

 

resulting in failure when ideally it should have successfully pulled the image. 

 

Trying to perform other edits to the config resulted in the same failure. These changes included changing the credentials to use an API Key, changing the .toml to use [plugins.cri.registry.mirrors.""docker.my-wildcard-subdomain""], changing docker.my-wildcard-subdomain to other URLs, using registry.""docker.my-wildcard-subdomain"".auths] rather than registry.auths.""<url>"", other documentation changes based on [https://github.com/containerd/cri/blob/master/docs/registry.md], and other changes based on github issues reporting 401 failures in similar cases that ended up resolved.

 
h3.  
h3. *Workaround*

However, when adding the username and password explicitly like so:

*microk8s.ctr -debug image pull docker-local.my-wildcard-subdomain/xmrig/xmrig:latest --skip-verify {color:#de350b}-u admin:password{color}*

we see the expected successful pull, with this output:

DEBU[0000] fetching image=""docker-local.my-wildcard-subdomain/xmrig/xmrig:latest""
 DEBU[0000] resolving host=docker-local.my-wildcard-subdomain
 DEBU[0000] do request host=docker-local.my-wildcard-subdomain request.header.accept=""application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.list.v2+json, application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json, */*"" request.header.user-agent=containerd/v1.3.4 request.method=HEAD url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""
 DEBU[0000] fetch response received host=docker-local.my-wildcard-subdomain response.header.connection=keep-alive response.header.content-type=""application/json;charset=ISO-8859-1"" response.header.date=""Fri, 14 Aug 2020 01:09:00 GMT"" response.header.docker-distribution-api-version=registry/2.0 response.header.server=""Artifactory/7.5.7 70507900"" response.header.www-authenticate=""Bearer realm=\""https://docker-local.my-wildcard-subdomain:443/artifactory/api/docker/docker-local/v2/token\"",service=\""docker-local.my-wildcard-subdomain:443\"",scope=\""repository:xmrig/xmrig:pull\"""" response.header.x-artifactory-id=""258f77fbf070b2ae:73affb81:173e9c95b12:-8000"" response.header.x-artifactory-node-id=niro-severen response.status=""401 Unauthorized"" url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""
 DEBU[0000] Unauthorized header=""Bearer realm=\""https://docker-local.my-wildcard-subdomain:443/artifactory/api/docker/docker-local/v2/token\"",service=\""docker-local.my-wildcard-subdomain:443\"",scope=\""repository:xmrig/xmrig:pull\"""" host=docker-local.my-wildcard-subdomain
 DEBU[0000] do request host=docker-local.my-wildcard-subdomain request.header.accept=""application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.list.v2+json, application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json, */*"" request.header.user-agent=containerd/v1.3.4 request.method=HEAD url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""
 *DEBU[0002] fetch response received host=docker-local.my-wildcard-subdomain response.header.accept-ranges=bytes response.header.cache-control=no-store response.header.connection=keep-alive response.header.content-disposition=""attachment; filename=\""manifest.json\"""" response.header.content-length=948 response.header.content-type=application/vnd.docker.distribution.manifest.v2+json response.header.date=""Fri, 14 Aug 2020 01:09:03 GMT"" response.header.docker-content-digest=""sha256:cac2042ca92370232ead86c0d1f97d6ebe069b27b549b363a17d0921006848ae"" response.header.docker-distribution-api-version=registry/2.0 response.header.etag=8667fd1365cbcd83b1aff00ecc6a0cbe14cea4bc response.header.last-modified=""Fri, 10 Jul 2020 18:27:19 GMT"" response.header.server=""Artifactory/7.5.7 70507900"" response.header.x-artifactory-filename=manifest.json response.header.x-artifactory-id=""258f77fbf070b2ae:73affb81:173e9c95b12:-8000"" response.header.x-artifactory-node-id=niro-severen response.header.x-checksum-md5=0178652721afb2afb814a65c53bb9dc7 response.header.x-checksum-sha1=8667fd1365cbcd83b1aff00ecc6a0cbe14cea4bc response.header.x-checksum-sha256=cac2042ca92370232ead86c0d1f97d6ebe069b27b549b363a17d0921006848ae response.status=""200 OK"" url=""https://docker-local.my-wildcard-subdomain/v2/xmrig/xmrig/manifests/latest""*
 DEBU[0002] resolved desc.digest=""sha256:cac2042ca92370232ead86c0d1f97d6ebe069b27b549b363a17d0921006848ae"" host=docker-local.my-wildcard-subdomain
 DEBU[0002] fetch digest=""sha256:cac2042ca92370232ead86c0d1f97d6ebe069b27b549b363a17d0921006848ae"" mediatype=application/vnd.docker.distribution.manifest.v2+json size=948
 DEBU[0002] fetch digest=""sha256:b56ae66c29370df48e7377c8f9baa744a3958058a766793f821dadcb144a4647"" mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip size=1991435
 DEBU[0002] fetch digest=""sha256:2a06e9574854723b606ef03dda327158edd3525c8454661712db49a5548bc0d0"" mediatype=application/vnd.docker.container.image.v1+json size=2666
 DEBU[0002] fetch digest=""sha256:cebb62ca6a1c1d1358243a296264d15f1e12e68815b6cb7e1b0b270536d020a1"" mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip size=1204
 DEBU[0002] fetch digest=""sha256:dd35677af7f113926500a1b6367d2af105e0ba08e89cdb5f5621b00a5f7d9b2e"" mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip size=12286052
 DEBU[0002] unpacking image=""docker-local.my-wildcard-subdomain/xmrig/xmrig:latest""
 unpacking linux/amd64 sha256:cac2042ca92370232ead86c0d1f97d6ebe069b27b549b363a17d0921006848ae...
 done

 

A docker login into docker pull works as well. It seems that since Microk8s uses the containerd cli, it might be either a microk8s or a containerd issue. These tests were done with containerd v1.3.4

 ",containerd client and server v1.3.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc49c0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NuGet virtual repository - 'Unable to convert NuGet Properties field' error when downloading artifacts from remote repo,RTFACT-23097,107452,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vchilakala,vchilakala,12/Aug/20 11:46 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,Virtual Repositories,,,,,,,0,,,,,,"Artifactory Version 6.17.0 (Uptime is 87d 23h 41m 56s)

Getting folowing error error when resolving artifacts from virtual repo. Please help 


2020-08-12 23:36:09,707 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,708 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,709 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,710 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,710 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,711 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,712 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,712 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies': 
2020-08-12 23:36:09,713 [http-nio-8081-exec-1235] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies':",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc48jk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Storage issues on Artifactory as application fails to connect to S3 intermittently,RTFACT-23092,107391,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,neeharika.m@in.pega.com,neeharika.m@in.pega.com,12/Aug/20 12:58 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.18.1,,,,,,,,,,,,,,4,artifactory,S3,storage_issue,,,"Our Artifactory (v6.18.1) uses S3 binary store for storing the artifacts and we have around 2TB cache (EBS volume attached to the EC2 instance). Artifactory, postgres DB, Nginx are set up as docker containers. However, over the last few months, we ran into storage issues intermittently where in the Artifactory application loses connectivity to S3 and all the EBS volume on the server gets filled up resulting it outage to uploading artifacts to application. The only way we can get the connection to S3 re-established is to restart the ""artifactory"" application service.

 

We have worked with Artifactory support team as well on this (#*124315*), however they suggested ""restarting the application"" is the only fix for this. The complete logs and information are provided in the support ticket for more data. To make it clear, uploading the file to S3 bucket manually using CLI/API during the issue works fine. However, the application logs still say the connection to S3 needs to be re-established.

 

This is impacting lot of production builds during this issue and it won't be resolved till the application admin restarts the artifactory service.

 

There are 2 issues here:
 * No clear message in the logs mentioning why the application lost the connectivity
 * Application not trying to restore the connectivity to S3 (Whenever this happens, we confirmed that we can connect to S3 from the EC2 instance Artifactory application is running)

 

Can you provide a fix for these and eliminate the need to restart the entire application service to restore the connectivity.","Artifactory (6.18.1) installed on i3.4xlarge EC2 instance using docker-compose model.

Uses S3 as the binary store",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc486w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Aug/20 9:43 AM;balajis;Hi Neeharika, 

It seems to be a configuration issue. We can configure connectionRetry in the remote binary provider. Also, it seems to be a case where the maxConnections and maxWorkers could be exhausted. 

Please refer to this KB article for examples of cluster-s3 and tune the connection retry, maxConnections and maxWorkers

[https://jfrog.com/knowledge-base/what-is-the-difference-between-s3-and-cluster-s3-filestore-chains/]",,,,,,,,,,
pypi repository that does not use simple is not being processed properly,RTFACT-23081,107306,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,niro,niro,11/Aug/20 9:22 PM,10/Feb/21 6:30 AM,18/Feb/21 8:59 AM,,6.19.1,7.5.7,,,,,,,,,,,,,0,PB_Done,,,,,"When trying to reach this [https://pypi.fury.io/arrow-nightlies/pyarrow] package through artifactory by setting up a pypi repository pointing to pypi.fury.io. Ideally we would be able to install the package with pip through Artifactory but currently pip install returns a 
Collecting pyarrow
 Could not find a version that satisfies the requirement pyarrow (from versions: )
No matching distribution found for pyarrow

 

When pointing the repository to pypi.fury.io and simulating the request by going to [http://artifactoryURL/artifactory/api/pypi/pypi-fury-remote/arrow-nightlies/|http://mill.jfrog.info:12120/artifactory/api/pypi/pypi-remote/]

it returns the HTML of the page which contains

<!DOCTYPE html> <html> <head><title>Simple Index</title></head> <body> <a href=""https://pypi.fury.io/arrow-nightlies/pyarrow"">pyarrow</a> </body> </html>

while Artifactory should be replacing that pypi.fury.io with artifactoryURL/artifactory/api/pypi/pypi-fury-remote/

 

I tried different configurations and they range from this behavior to not doing anything at all. There is also this repository [https://gemfury.com/arrow-nightlies/python:pyarrow] that hosts the package but that does not work either.

 

It seems to be that since the repository doesn't use the Simple suffix, Artifactory is not sure how to handle this and the repository's contents are ultimately unavailable. Here is an example configuration I was using 

!Screen Shot 2020-08-11 at 1.05.08 PM.png!

which lets you download the HTML by going to [http://artifactoryURL/artifactory/api/pypi/pypi-fury-remote/arrow-nightlies/|http://artifactoryurl/artifactory/api/pypi/pypi-fury-remote/arrow-nightlies/] .",,,,,,,,,,,,,,,,,,,"11/Aug/20 8:36 PM;niro;Screen Shot 2020-08-11 at 1.05.08 PM.png;https://www.jfrog.com/jira/secure/attachment/44800/Screen+Shot+2020-08-11+at+1.05.08+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc47o0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to request the metadata service Service-Id after upgrading to 7.6.3 from 7.2.1,RTFACT-23080,107299,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,SWL,SWL,11/Aug/20 5:25 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.6.3,,,,,,,Artifactory,Upgrade,,,,,,0,artifactory,,,,,"Attempted upgrade from 7.2.1 to 7.6.3 via rpm. No errors were ever reported while running 7.2.1. Below is from before the upgrade.

Version: 7.2.1
Revision: 70201900
2020-08-11T13:54:36.299Z [jfrt ] [INFO ] [2d00b5da26b2d37e] [o.a.s.d.DbServiceImpl:282 ] [art-init ] - Database: MySQL 5.5.65-MariaDB. Driver: MySQL-AB JDBC Driver mysql-connector-java-5.1.24 ( Revision: ${bzr.revision-id} ) Pool: mysql

 

Upgrade via rpm showed success and services started but had errors below. Used backups to recover and attempted upgrade again with the same result.

2020-08-11T14:28:43.084Z [jfevt ] [WARN ] [ ] [http_client.go:57 ] [main ] - Invalid or missing trace ID in context: no trace ID in context [startup]
2020-08-11T14:28:45.196Z [jfevt ] [WARN ] [56fd29627be63d31] [proxy_synchronizer.go:26 ] [main ] - Proxy cache is not updated because of error: failure to get the list of proxies from Artifactory (returned 503) [proxy_cache]
2020-08-11T14:28:48.471Z [jfrt ] [ERROR] [c542fcb071ef18e0] [yMetadataClientConfigStore:122] [art-init ] - Unable to request the Metadata Service Service-Id: Failed executing api/v1/system/service_id, with response code: HTTP/1.1 502 Bad Gateway and response message: Bad Gateway
2020-08-11T14:28:48.471Z [jfrt ] [WARN ] [c542fcb071ef18e0] [s.MetadataEventServiceImpl:325] [art-init ] - Unable to init the Metadata client. The Metadata Event pipeline will be disabled: Unable to request the Metadata Service Service-Id
2020-08-11T14:28:48.472Z [jfrt ] [WARN ] [c542fcb071ef18e0] [s.MetadataEventServiceImpl:329] [art-init ] - Metadata Client not initialized. Starting Metadata Server Status Probe",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc47mo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Aug/20 1:58 PM;SWL;Attempted upgrade from 7.2.1 to 7.3.2 via rpm. It was successful and Artifactory worked as intended. After a reboot, various ERROR and FATAL entries in the log. Since Artifactory was in an unusable condition, was forced to roll back to 7.2.1.",,,,,,,,,,
"Syntax error in search results total: ""Search Results - 1 Items""",RTFACT-23044,76164,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,benif,alexd,alexd,28/Jul/19 8:58 AM,13/Jan/21 10:31 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Should not be in plural for 1 item.

 !Screen Shot 2019-07-28 at 11.57.19.png|! ",7.0.0-m003,,,,,,,,,,,,,,,,,,"28/Jul/19 8:57 AM;alexd;Screen Shot 2019-07-28 at 11.57.19.png;https://www.jfrog.com/jira/secure/attachment/33874/Screen+Shot+2019-07-28+at+11.57.19.png","04/Aug/20 2:33 PM;matang;image-2020-08-04-17-33-47-228.png;https://www.jfrog.com/jira/secure/attachment/44608/image-2020-08-04-17-33-47-228.png","04/Aug/20 2:36 PM;matang;image-2020-08-04-17-36-03-457.png;https://www.jfrog.com/jira/secure/attachment/44609/image-2020-08-04-17-36-03-457.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc411b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"28/Jul/19 10:23 AM;dannyr;The string is returned from the backend. 
The issue exists in Artifactory 4.x - 6.x as well","04/Aug/20 2:36 PM;matang;This issue comes from Artifactory rest response for quick search {color:#0747a6}_(...ui/api/v1/ui/artifactsearch/quick)_{color}

!image-2020-08-04-17-36-03-457.png!",,,,,,,,,
Artifactory VCS repository is not resolving cached artifacts when setting Git provider with Stash/Private BitBucket,RTFACT-23037,106847,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adim,adim,04/Aug/20 10:11 AM,10/Feb/21 6:37 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"Step to reproduce:
 # Create VCS remote repository.
 # Set URL to Bitbucket / Stash repository.
 # Set Git provider to Stash/Private BitBucket
 # Pull artifact with curl command -> Artifact is cached.
 # Set Repository offline.
 # Pull the same artifact again.

+Expected:+

The artifact is downloaded.

+Observed:+

Getting 500 response
""errors"" : [ {
    ""status"" : 500,
    ""message"" : ""Repo is offline. Cannot use the HTTP client.""
}]
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc44vk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Licenses of a artifact not shown in build view,RTFACT-23033,106834,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,samuel.bissig2,samuel.bissig2,04/Aug/20 8:46 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.20.1,,,,,,,Artifactory,,,,,,,0,artifacts,jenkins,,,,"We publish our artifacts from Jenkins build process into a Generic repository. Artifacts are linked properly with the build (build-info) and are listed there.

On some artifacts we attach license information by setting the property ""artifact.licenses"". Licenses are shown in the when browsing the artifacts but not in the build view.

*Steps to reproduce*
 # Publish a build with some artifacts
 # Add some existing licenses to the property ""artifacts.licenses"" to the published artifact
 # Check if the licenses are shown in the in the artfifacts ""General"" Tab under ""Licenses""
 # Browse to the Build linked with this artifact
 # Open the Licenses tab and enable ""Include Published Artifacts"".
 # Artifacts are not shown.

We would expect in step 6 that the artifacts added on a artifact linked to the build would also show up in the builds License Tab.",Artifactory Pro 6.20.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc44so:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
A Conan repository's copy command outputs error if user does not have delete/overwrite permissions,RTFACT-23031,106807,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,derekp,derekp,04/Aug/20 2:52 AM,10/Feb/21 6:37 AM,18/Feb/21 8:59 AM,,6.20.1,7.6.3,,,,,,Artifactory,,,,,,,5,community,Community,conan,Conan,P3,"*Problem description:*

 

A user does not have delete/overwrite permission to the repository they wish to copy to. When they issue a copy command from one Conan repository to the other they get an error message for the index.json file even if the file did not exist in the other repository's location.

 

*What is the expected behavior?*

The expected behavior is to be able to successfully (without error msg) copy/promote from one Conan repository to the other without delete/overwrite permission if the files do not already exist. 

 

*Steps to reproduce:* 
 # Create two Conan local repositories. (i.e. conan-local1 and conan-local2)
 # Create a user *without* delete/overwrite permissions to these repositories
 # Generate and Upload a Conan package to the first Conan repository.
 # Try a copy command of that package from the first repository to the second repository.
 # Observe the _User doesn't have permissions to override/Needs delete permissions_ error that results.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4q90:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Aug/20 2:57 AM;derekp;Logs:

User without Delete/Overwrite permissions:
{quote}2020-08-04T01:43:33.176Z [jfrt ] [INFO ] [57fa97c08dd5397d] [o.a.a.c.s.ConanServiceImpl:278] [art-exec-20406      ] - Starting Conan index calculation for conan-local:demo/hello/0.1/testing

2020-08-04T01:43:33.183Z [jfrt ] [INFO ] [57fa97c08dd5397d] [o.a.a.c.s.ConanServiceImpl:280] [art-exec-20406      ] - Conan index calculation for conan-local:demo/hello/0.1/testing finished successfully

2020-08-04T01:43:33.194Z [jfrt ] [ERROR] [7fb80e4987880747] [.a.r.s.m.BaseRepoPathMover:480] [http-nio-8081-exec-3] - User doesn't have permissions to override 'conan-local:demo/hello/0.1/testing/index.json'. Needs delete permissions.
{quote}
Note: Even with the error showing it appears that the index.json file does get copied over to the other repository.

User with Delete Overwrite permissions:
{quote}2020-08-04T01:45:14.575Z [jfrt ] [INFO ] [f385134ca3beb902] [o.a.a.c.s.ConanServiceImpl:278] [art-exec-20479      ] - Starting Conan index calculation for conan-local:demo/hello/0.1/testing

2020-08-04T01:45:14.582Z [jfrt ] [INFO ] [f385134ca3beb902] [o.a.a.c.s.ConanServiceImpl:280] [art-exec-20479      ] - Conan index calculation for conan-local:demo/hello/0.1/testing finished successfully

2020-08-04T01:45:22.327Z [jfrt ] [INFO ] [4fc17ff63e2f88fc] [o.a.a.c.s.ConanServiceImpl:278] [art-exec-20483      ] - Starting Conan index calculation for conan-local:demo/hello/0.1/testing

2020-08-04T01:45:22.334Z [jfrt ] [INFO ] [4fc17ff63e2f88fc] [o.a.a.c.s.ConanServiceImpl:280] [art-exec-20483      ] - Conan index calculation for conan-local:demo/hello/0.1/testing finished successfully

2020-08-04T01:45:22.344Z [jfrt ] [INFO ] [241e73a6039654d6] [.b.t.a.CopyArtifactService:136] [http-nio-8081-exec-8] -  copying conan-local2:demo/hello/0.1/testing to conan-local:demo/hello/0.1/testing completed successfully, 3 artifacts and 3 folders were copied
{quote}
 

 

 

 ",,,,,,,,,,
Periodic problems downloading a Docker image from a remote repository Artifactory,RTFACT-23019,106693,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,levinaleks,levinaleks,03/Aug/20 7:21 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.6.5,,,,,,,Artifactory,,,,,,,0,artifactory,docker,manifest,repository,,"How the problem is reproduced
 The Docker image is pushed to the local repositotory of Artifactory(let's call it master server), on the second Artifactory((let's call it proxy server)) created a remote Docker repository and configured replication from the master to the proxy.
 One-time downloads of this image from the Artifactory proxy(remote Docker repository) are completed successfully.
 At about the tenth download of the image from the same Docker client, the following error displayed on the Docker client:
{code:java}
Error response from daemon: error unmarshalling content: unexpected end of JSON input    
{code}
After an error, if re-pull the image, the image is downloaded successfully.
 In the log file of the Artifactory master, errors written at this moment:
{code:java}
 2020-07-31 16:17:52,025 [http-nio-8081-exec-85] [INFO ] (o.j.r.d.v.c.p.DockerSchemaProvider:57) - Converting manifest schema2 to schema1 for repo 'kl_toolchain/visual_studio_15' and tag '462' in repo 'docker-local'   
{code}
In the log file of the Artifactory proxy, errors written at this moment:
{code:java}
2020-07-31 16:17:52,116 [http-nio-8081-exec-19] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:421) - Unable to create manifest markers for 'docker-local:kl_toolchain/visual_studio_15/462/manifest.json': 'Failed to move file from _pre folder to filestore'
2020-07-31 16:17:52,163 [http-nio-8081-exec-29] [INFO ] (o.a.s.d.b.s.BinaryServiceImpl:397) - Retrying add binary with SHA1: 'af764f988057e4e1486d7b7d9d555715df9f942a' and SHA256: 'ed5b8120601641c516d02ed9dc643a59648524248d5e2af877da39ea253c723eafter receiving exception: Insertion of {af764f988057e4e1486d7b7d9d555715df9f942a,ed5b8120601641c516d02ed9dc643a59648524248d5e2af877da39ea253c723e,b272bda9bf0c1cdcba614b5ed99c4d62,6} failed. Auto retry exception
{code}
When downloading from a proxy, the proxy requests a manifest file from the master.
 On the proxy in the settings of the remote repository (Advanced) the following settings
 Cache
 Metadata Retrieval Cache Period: 0, 600(default), 6000000000. (For any values, the error repeated.)
 and
 Assumed Offline Period (Sec) 300
 Missed Retrieval Cache Period (Sec) 1800

artifactory.version: 6.6.5
 os.name: Windows Server 2016
 java.runtime.version: 1.8.0_221-b11

Docker client
 Docker version
 Version: 19.03.5
 API version: 1.40
 os.name: Windows Server 2019",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc43y8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory ID is different for each node in a cluster,RTFACT-23014,106603,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joshuah,joshuah,31/Jul/20 7:46 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.20.1,,,,,,,,,,,,,,0,,,,,,"h3. Issue

The Artifactory ID (or host id) is different for each node in a cluster when it should be the same for all nodes in a cluster. This makes it difficult to use Artifactory's built-in cyclic replication prevention method (eventOriginatedFromTargetServer) because it can take multiple replications between clusters before the full origin list is built with every Artifactory Id. 
h3. Steps to reproduce the issue

Look at X-Artifactory-Id header for each node and see how it differs between the nodes. For example,
{code:java}
curl -L -s -D - -o /dev/null https://node1/artifactory | grep -i X-Artifactory-Id
{code}
X-Artifactory-Id: 27f006beac444d4d9bfceb797a0d8bfc3e6cb6cf
{code:java}
curl -L -s -D - -o /dev/null https://node2/artifactory | grep -i X-Artifactory-Id
{code}
X-Artifactory-Id: c0fb791336779312e01f67a5413e525f007583e3
{code:java}
curl -L -s -D - -o /dev/null https://node3/artifactory | grep -i X-Artifactory-Id
{code}
X-Artifactory-Id: 00022ba98a0ed166a62fc85da36ca1bc4aa90aab
h3. Work-around

X-Artifactory-Id is created from host.id. It can be customized and applied to all nodes in a cluster.

1. Set *artifactory.host.id=<unique-name>* at $ARTIFACTORY_HOME/etc/artifactory.system.properties in Primary node. The change is automatically propagated to the other Artifactory nodes' artifactory.system.properties

2. Restart each node to apply the changes. During the start up in artifactory.log, the new host id is shown if you search for artifactory.host.id in the artifactory.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzr47k:l",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Mail Server still sends legacy URLs in emails - Causes bad redirects,RTFACT-23012,106599,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,31/Jul/20 6:48 PM,10/Feb/21 6:44 AM,18/Feb/21 8:59 AM,,7.4.3,7.6.3,,,,,,Frontend,,,,,,,1,P1,PB_Done,,,,"*Problem description:* Artifactory's Mail Server integration fails to send emails with the correct URLs. The emails received by a 7.6.3 Artifactory clearly use the 6.X URL pattern for its hyperlinks.


*What is the expected behavior?* Artifactory's emails send working URLs, so that people who Watch repositories can use the URLs generated by emails.


*Steps to reproduce:* 

1] Install and set up a mail server. I found the easiest test server to use was [MailSlurper.|https://github.com/mailslurper/mailslurper/wiki/Getting-Started]

2] Configure Artifactory 7.X to use the local mail server

3] Have an Artifactory User watch a repository by clicking the ""Follow"" button in the Artifacts Browser (Found in the upper right hand corner in the ""Actions"" dropdown)

4] Perform an action that would cause an email to be sent, such as uploading a file to the watched repository

5] Check the email that is received by MailSlurper, observe that the URL pattern is the legacy 6.X URL:

Email sends ""http://artifactory.com:8081/artifactory/webapp/#/artifacts/browse/tree/General/builds/TEST-system-build-TEST-1/file10.txt"" 

When followed, the URL is redirected by the Frontend incorrectly:

Redirects to ""http://artifactory.com:8082/ui/packages#%2Fartifacts%2Fbrowse%2Ftree%2FGeneral%2Fbuilds%2FTEST-system-build-TEST-1%2Ffile10.txt""

The proper URL to use is ""http://artifactory.com:8082/ui/repos/tree/General/builds%2FTEST-system-build-TEST-0%2Ffile10.txt"" 


*Possible workaround:* A reverse proxy may be able to redirect the ""/artifactory/artifacts/browse"" part to ""/ui/repos/tree""

 ",,,,,,,,,,,,,,,,,,,"31/Jul/20 6:50 PM;patrickr;Screen Shot 2020-07-31 at 11.34.10 AM.png;https://www.jfrog.com/jira/secure/attachment/44519/Screen+Shot+2020-07-31+at+11.34.10+AM.png","31/Jul/20 6:50 PM;patrickr;Screen Shot 2020-07-31 at 11.35.23 AM.png;https://www.jfrog.com/jira/secure/attachment/44518/Screen+Shot+2020-07-31+at+11.35.23+AM.png","31/Jul/20 6:49 PM;patrickr;email.zip;https://www.jfrog.com/jira/secure/attachment/44517/email.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4ih:r054i",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Dec/20 8:14 AM;babelfisk;This Problem also occurs in Version 

Commercial license 7.10.6 rev 71006900",,,,,,,,,,
"UI login and artifact link login cannot co-exist on the same browser,",RTFACT-23011,106565,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,axs20519,axs20519,31/Jul/20 1:35 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"[https://support.jfrog.com/jFrogCasePage?id=5001r00002sPXhv]

[#138119|https://support.jfrog.com/jFrogCasePage?id=5001r00002sPXhv]",EnterpriseX license 7.4.1 rev 70401900 ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4374:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
helm repo globally breaks due to a published chart with version: y,RTFACT-23010,106558,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rryszewski,rryszewski,30/Jul/20 10:51 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,Helm,,,,,,,1,helm,,,,,"A chart with published to our Artifactory helm repository with `version: y` as the version.

This chart entry was then added exactly as it is to the helm repository's index.yaml.

Something like so:
{code:java}
apiVersion: v1
entries:
  fakeapp:
    - apiVersion: v1
      appVersion: ""1.0""
      created: 2020-01-01T01:23:45.678912Z
      description: A Fake Helm Chart
      digest: 00112233445566778899aabbccddeeff00112233445566778899aabbccddeeff
      name: fakeapp
      urls:
      - https://fake.url.com:443/helm/fakeapp-y.tgz
      version: y
generated: 2020-01-01T01:23:45.678912Z {code}
*Every* helm command that tried to use this repository was now broken (users, automation, across the company), because the index.yaml was invalid according to the following error:
{code:java}
error unmarshaling JSON: while decoding JSON: json: cannot unmarshal bool into Go struct field ChartVersion.entries.version of type string {code}
The following github issue was created with the helm/helm repo assuming it was a helm bug.

[https://github.com/helm/helm/issues/8531#issuecomment-666607976]

This seems to in fact not be a helm bug, but appears to be specific to Artifactory's helm repository implementation.

Downloading that broken chart tar file and running `helm repo index` locally, the generated index.yaml implicitly casts `version: y` to be `version: ""true""`. While this could be considered an issue, at least the resulting index.yaml does not break the helm repository.
{code:java}
[2020-07-30 14:50:22]
$ ls -l; helm repo index .; cat index.yaml
total 16
-rw-rw-r-- 1 user user 4618 Jul 30 10:51 myapp-y.tgz
apiVersion: v1
entries:
  myapp:
  - apiVersion: v1
    appVersion: ""1.0""
    created: ""2020-07-30T14:50:27.176873958-04:00""
    description: A Helm chart for Kubernetes
    digest: fake-digest
    name: myapp
    urls:
    - myapp-y.tgz
    version: ""true""
generated: ""2020-07-30T14:50:27.176432195-04:00"" {code}
Until this bug is fixed in Artifactory's helm repository, a user publishing `version: y` or `version: n` or `version: 555e2` (a git hash that gets cast as a float due to the scientific notation `e2`) will result in globally breaking that helm repository for all users. 

This is a huge risk, whether the publishing user's intentions were accidental or malicious.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc435k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
plugin link from artifactory is not url decoded properly for '::' when selected from jenkins,RTFACT-23005,106545,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ckcrowe,ckcrowe,30/Jul/20 6:34 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.6.3,7.7.3,,,,,,Artifactory,Plugins,,,,,,1,Artifactory,jenkins,plugin,,,"Artifactory version 7.6.3
Jenkins version 2.235.2
Artifactory plugin version: 3.7.0/3.7.3 

1. Artifact is published and from jenkins link url shows as 'http://my_art_instance:8081/artifactory/webapp/builds/TYPE*%20%3A%3A%20*My-Test*%20%3A%3A%20*master/999'.

2. From jenkins select the link:
!image-2020-07-30-14-20-15-132.png!

3. Artifactory link opens to [http://my_art_instance:8082/ui/builds/TYPE*%2520%253A%253A%2520*My-Test*%2520%253A%253A%2520*master.|http://artifactory.jsitelecom.com:8082/ui/builds/GEM%2520%253A%253A%2520Ruby-Auth%2520%253A%253A%2520master] 

The result is the build path shows as 'Builds > TYPE%20%3A%3A%20My-Test%20%3A%3A%20master' and no builds are listed.  '::' is not escaped.

4. Modify the link and remove the extra '25':
[http://my_art_instance:8082/ui/builds/TYPE%20%3A%3A%20My-Test%20%3A%3A%20master.|http://artifactory.jsitelecom.com:8082/ui/builds/GEM%2520%253A%253A%2520Ruby-Auth%2520%253A%253A%2520master] 

Correct build info loads in the page and shows '::' properly.

Not sure if this is plugin side or artifacory side but using both plugin versions have same result.","artifactory - centos 7.4

jenkins - centos 7.3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc432o:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Oct/20 4:00 AM;dlee;I encountered many variations of this problem.
What finally worked reliably is to explicitly set a diffreent *artifactory build name* within the jenkins build DSL

For example: in my multi-branch pipeline jobs which include characters that get badly encoded in and out (::,<space> , / )
I use


{code:java}
def buildName = pipelineParams['buildName'] ?: ""${env.JOB_NAME.replace('/','-').replace('%2F','_')}""{code}
 

 

then in EVERY Artifactory build step I explicitly set the buildName


{code:java}
rtBuildInfo (                              
  captureEnv: true,                              
  includeEnvPatterns: ['*'],                              
  excludeEnvPatterns: ['*SECRET*', '*password*',""*PSW*"",""*_CRED*"", ""*_user"" ],                                  
  buildName: buildName
){code}
If you miss one step it can get messed so so make sure you get them all.

The result is that Jenkins uses its own names and artifatory uses the name you give it,  
and somehow the jenkins artifactory plugin creates the correct link on the jenkins build status page
AND the correct link inside artifactory to get back to jenkins.

 

 

 

 ","30/Nov/20 6:41 PM;ckcrowe;Thanks for the update.  This is already done in our pipelines but the issue is still in the double encoding and my guess is its the '%' since  '%' = '%25' encoded.

The URL at the end of the build does not contain any escaped characters, i.e. 

_https://<jenkins_url>/job/InternalTools/job/<repo_build_name>/job/master/4/._

The build info link is adding the proper encoding to the page/link.  space,two2 colons, ad finally a space.  i.e.

_<td style=""vertical-align:middle""><a href=""http://<artifactory_url>:8081/artifactory/webapp/builds/*InternalTools%20%3A%3A%20<repo_build_name>%20%3A%3A%20*master/4"" target=""_blank"">Artifactory Build Info</a></td>_

Its only when that link is selected to open in artifactory build info page does the extra '25' encoding occur; ...%2520%253A%253A%2520... and build info is empty.   

Work around we are using is to refresh the artifactoryi build info page (url remains the same) but the build info loads.

 ","30/Nov/20 6:46 PM;ckcrowe;Should note as well we are running version 7.7.3 of artifactory but no difference in the behavior.",,,,,,,,
Crowd cookie is not read by Router,RTFACT-23004,106544,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,patrickr,patrickr,30/Jul/20 6:17 PM,10/Feb/21 6:45 AM,18/Feb/21 8:59 AM,,7.4.3,7.6.3,,,,,,Crowd,,,,,,,0,PB_Done,,,,,"*Problem description:* When Anonymous Access is disabled, download URLs do not work when accessed by a web browser. This only happens for the Atlassian Crowd Integration system in Artifactory, and only in Artifactory 7.X. The Download URL is only accessed anonymously when the request is routed through port 8082, the Router port.

This is a bug because although you can't log in via port 8082, if you jump over to port 8081 the Crowd Cookie is used properly and the file downloads. After that the user is ""logged in"" and can use port 8082 to access the UI, only download URLs are affected.

*What is the expected behavior?* Download URLs work regardless of whether the port is Artifactory or Router.

Steps to reproduce: 

1] Install Artifactory 7.X and Atlassian Crowd (Crowd 4.X was used in this test)

2] Configure Artifactory to use Atlassian Crowd as normal

3] Disable Anonymous Access, so a user must be logged into download things

4] Import a Crowd Group and grant that group at least Read access to a repository's resources

5] Log into Crowd as the Crowd user, then log into Artifactory automatically using the Crowd Cookie

6] Copy the Download URL from the Web UI, this simulates using a direct download link

7] When going to the Download URL, you will face a login prompt that will not accept Crowd credentials. The request appears as an Anonymous request in the Artifactory logs

8] The Download URL usually goes to the Router or reverse proxy (Which passes to the Router) on port 8082. If you switch the port to go directly to Artifactory on port 8081, the login prompt does not appear the file downloads.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc432g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"“Incremental” replication with “Event” replication and ""Sync Delete"" enabled can cause artifacts deletion on the target",RTFACT-22998,106506,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kfira,kfira,30/Jul/20 12:35 PM,10/Feb/21 6:49 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"*Description:*  

This scenario was tested and reproduced with *Docker*.

In case both “*Event*” replication and “*Incremental*” replication are enabled with an active ""Sync Delete"" option, artifacts with the same name which has been overwritten in the source (following promotion api) will get deleted completely on the target by the next Incremental replication.

 

*What is the expected behavior?*

Only the current state of the source repository to be replicated and not actions that already happened. 

 

*Steps to reproduce:*

Tested with both Artifactory version *6.19.1* (source and target) and Artifactory version *7.6.3* (source and target)
 # Install *two* Artifactory instances (*source* and *target*) 
 # Enable *Incremental* replication in the *source* by adding the property “*artifactory.replication.full.useEventLog=true*”
 # Create two local Docker repositories in the source (docker-local1, docker-local2)
 # Create local Docker repository in the target (docker-local2)
 # Configure a *push replication* from docker-local2 (*source*) to docker-local2 (*target*) with “*Event*” replication and “*Sync Delete*” options enabled and cron to run every 5 minutes (0 */5 * ? * *)
 # Build a Docker image (e.g *test:latest*)
 # Push the image to docker-local1 (source)
 # *Promote* (using the [api|#ArtifactoryRESTAPI-PromoteDockerImage]]) the image from docker-local1 to docker-local2 (on the *source* instance)
 # Notice the replications is ok (first attempts should be fine)
 # Build a different Docker image (preferred with shared layers) again with *same name and tag* (e.g test:latest)
 # Repeat steps *#7-8*
 # Notice that following the *Event replication* the artifacts replicated as *expected*.
 # Wait for the cron job (of the incremental) to run notice that afterwards artifacts which was overwritten following the promote have been deleted completely from the repository (docker-local2 on the target) such as *manifest.json* (which cause the image to be *corrupted* in the target)

*Note:* This behavior only occur following the promotion process

For example, in case configuring the same replication for docker-local1 and only pushing the new image and overwritten the image in docker-local1 the replication works as expected with both “Event” and “Incremental” replications enabled.

 

*Possible workaround:* 

Disable “Event” replication and only replicate following the cron job schedule.

 

 

From the logs it's possible to see that following the Incremental replication the manifest.json is getting deleted:

from artifactory.log on the Source:
{code:java}
2020-07-30 05:35:03,918 [replication-consumer-1596087300011-0] [INFO ] (o.a.a.c.BasicStatusHolder:218) - Deleting item: test_image/latest/manifest.json

2020-07-30 05:35:04,060 [replication-consumer-1596087300011-0] [INFO ] (o.a.a.c.BasicStatusHolder:218) - Successfully deleted remote item: test_image/latest/manifest.json on Url:http://xx.xxx.x.xxx:8081/artifactory/docker-local2
{code}
from the request.log on the target:
{code:java}
20200730053503|7|REQUEST|xx.xxx.x.xx|admin|DELETE|/docker-local2/test_image/latest/manifest.json|HTTP/1.1|204|0
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc42uw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Pull Docker images through remote registry does not work for some tags ,RTFACT-22996,106497,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jordanjean,jordanjean,30/Jul/20 12:04 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.20.0,,,,,,,Artifactory,,,,,,,0,docker,,,,,"We configured a remote registry for: registry.gitlab.com in our virtual registry: <our_registry>.

 

While we can pull the following tag: 
{code:java}
docker pull <our_registry>/gitlab-org/build/cng/gitlab-webservice-ee:latest{code}
the following command: 
{code:java}
docker pull <our_registry>/gitlab-org/build/cng/gitlab-webservice-ee:v12.9.3{code}
returns:
{code:java}
Error response from daemon: unknown: Not Found{code}
 

The anonymous access is well authorised for the remote registry i.e. the command: 
{noformat}
docker pull registry.gitlab.com/gitlab-org/build/cng/gitlab-webservice-ee:v12.9.3{noformat}
succeed.",Artifactory is running on Swarm (Linux).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc42t4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Aug/20 3:20 PM;jordanjean;This issue is solved. The regexpr used by our reverse proxy was wrong. A '^' was missing in front of 'v1'. ",,,,,,,,,,
Repository import from directory appears to fail silently,RTFACT-22995,106496,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rjanik,rjanik,30/Jul/20 11:52 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Import/export,,,,,,,0,,,,,,"I am using the community version of Artifactory (not Pro). Version {{Open source license 7.3.2 rev 70302900 undefined}}.

I am attempting to import repositories from a directory on the Artifactory node, using the REST API:
{code:bash}
curl \
      -u <admin-credentials> \
      -X POST \
      ""http://${ARTIFACTORY_NODE}:8082/artifactory/api/import/repositories?repo=${REPO_ID}&path=${REMOTE_PATH_TO_LOCAL_REPO_ENCODED}&verbose=1""
{code}

This usually works, but it sometimes fails without any apparent cause. The {{curl}} command returns 0 (which probably means it got 200 back), but the artifacts are not uploaded, and the output looks like this:

{code}
+ curl -u admin:jbossqa.22 -X POST 'http://eap-qe-maven.usersys.redhat.com:8082/artifactory/api/import/repositories?repo=eap-local&path=%2Ftmp%2Fjbossqe-eap%2Fmaven-repository&verbose=1'
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed

  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100    81    0    81    0     0     72      0 --:--:--  0:00:01 --:--:--    72
100    81    0    81    0     0     38      0 --:--:--  0:00:02 --:--:--    38
100    81    0    81    0     0     25      0 --:--:--  0:00:03 --:--:--    25
100    81    0    81    0     0     19      0 --:--:--  0:00:04 --:--:--    19
100    81    0    81    0     0     15      0 --:--:--  0:00:05 --:--:--    15
100    81    0    81    0     0     13      0 --:--:--  0:00:06 --:--:--     0
100    81    0    81    0     0     11      0 --:--:--  0:00:07 --:--:--     0
100    81    0    81    0     0      9      0 --:--:--  0:00:08 --:--:--     0
100    81    0    81    0     0      8      0 --:--:--  0:00:09 --:--:--     0
100    81    0    81    0     0      7      0 --:--:--  0:00:10 --:--:--     0
100    81    0    81    0     0      7      0 --:--:--  0:00:11 --:--:--     0
100    81    0    81    0     0      6      0 --:--:--  0:00:12 --:--:--     0
100    81    0    81    0     0      6      0 --:--:--  0:00:13 --:--:--     0
100    81    0    81    0     0      5      0 --:--:--  0:00:14 --:--:--     0
100    81    0    81    0     0      5      0 --:--:--  0:00:15 --:--:--     0
100    81    0    81    0     0      5      0 --:--:--  0:00:16 --:--:--     0
100    81    0    81    0     0      4      0 --:--:--  0:00:17 --:--:--     0
100    81    0    81    0     0      4      0 --:--:--  0:00:18 --:--:--     0
100    81    0    81    0     0      4      0 --:--:--  0:00:19 --:--:--     0
100    81    0    81    0     0      4      0 --:--:--  0:00:20 --:--:--     0
100    81    0    81    0     0      3      0 --:--:--  0:00:21 --:--:--     0
100    81    0    81    0     0      3      0 --:--:--  0:00:22 --:--:--     0
100    81    0    81    0     0      3      0 --:--:--  0:00:23 --:--:--     0
100    81    0    81    0     0      3      0 --:--:--  0:00:24 --:--:--     0
100    81    0    81    0     0      3      0 --:--:--  0:00:25 --:--:--     0
100    81    0    81    0     0      3      0 --:--:--  0:00:26 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:27 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:28 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:29 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:30 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:31 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:32 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:33 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:34 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:35 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:36 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:37 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:38 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:39 --:--:--     0
100    81    0    81    0     0      2      0 --:--:--  0:00:40 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:41 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:42 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:43 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:44 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:45 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:46 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:47 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:48 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:49 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:50 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:51 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:52 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:53 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:54 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:55 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:56 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:57 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:58 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:00:59 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:00 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:01 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:02 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:03 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:04 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:05 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:06 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:07 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:08 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:09 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:10 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:11 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:12 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:13 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:14 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:15 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:16 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:17 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:18 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:19 --:--:--     0
100    81    0    81    0     0      1      0 --:--:--  0:01:20 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:21 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:22 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:23 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:24 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:25 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:26 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:27 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:28 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:29 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:30 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:31 --:--:--     0
100    81    0    81    0     0      0      0 --:--:--  0:01:31 --:--:--     0
Starting Repositories Import of eap-local from /tmp/jbossqe-eap/maven-repository
{code}

The Artifactory system logs show only:
{code}
2020-07-27T07:59:18.782Z [jfrt ] [INFO ] [1adca19cfaae6768] [o.a.r.r.s.ImportResource:155  ] [http-nio-8081-exec-3] - Starting Repositories Import of eap-local from /tmp/jbossqe-eap/maven-repository
2020-07-27T08:01:12.169Z [jfrt ] [INFO ] [e5b4ea9b4bd9a4d3] [o.a.r.s.t.p.TrashcanPruner:113] [art-exec-3          ] - Trashcan pruning total execution time: '2.24 secs'
2020-07-27T08:01:12.476Z [jfrt ] [INFO ] [e5b4ea9b4bd9a4d3] [.s.d.b.s.BinaryServiceImpl:547] [art-exec-3          ] - Found 861 candidates for deletion
2020-07-27T08:01:20.259Z [jfrt ] [INFO ] [e5b4ea9b4bd9a4d3] [.s.b.s.GarbageCollectorInfo:82] [art-exec-3          ] - Storage garbage collector report:
Number of binaries:      14,880
Total execution time:    8.07 secs
Candidates for deletion: 861
Checksums deleted:       861
Binaries deleted:        861
Total size freed:        435.50 KB
Current total size:      2.18 GB
{code}

While the succesfull upload looks like:
{code}
2020-07-24T13:34:55.941Z [jfrt ] [INFO ] [2a7aa17cbc6ca3b6] [o.a.r.r.s.ImportResource:155  ] [http-nio-8081-exec-3] - Starting Repositories Import of eap-local from /tmp/jbossqe-eap/maven-repository
2020-07-24T13:34:57.077Z [jfrt ] [INFO ] [de72da8a54579711] [.r.d.i.DbRepoImportHandler:148] [art-import-1        ] - eap-local import started /tmp/jbossqe-eap/maven-repository
2020-07-24T13:35:01.165Z [jfrt ] [INFO ] [de72da8a54579711] [d.i.ImportExportAccumulator:98] [art-import-1        ] - eap-local imported 1000 items (488 files 512 folders 244.67 ips) 0 skipped items (0 files 0 folders)...
2020-07-24T13:35:05.801Z [jfrt ] [INFO ] [de72da8a54579711] [d.i.ImportExportAccumulator:98] [art-import-1        ] - eap-local imported 2000 items (998 files 1002 folders 229.27 ips) 0 skipped items (0 files 0 folders)...
2020-07-24T13:35:10.910Z [jfrt ] [INFO ] [de72da8a54579711] [d.i.ImportExportAccumulator:98] [art-import-1        ] - eap-local imported 3000 items (1518 files 1482 folders 216.88 ips) 0 skipped items (0 files 0 folders)...
2020-07-24T13:35:16.385Z [jfrt ] [INFO ] [de72da8a54579711] [d.i.ImportExportAccumulator:98] [art-import-1        ] - eap-local imported 4000 items (2057 files 1943 folders 207.18 ips) 0 skipped items (0 files 0 folders)...
2020-07-24T13:35:17.823Z [jfrt ] [INFO ] [de72da8a54579711] [.r.d.i.DbRepoImportHandler:198] [art-import-1        ] - eap-local import finished with: 4373 Items imported: (2231 files 2142 folders). Duration: 20.74 secs IPS: 210.82 Target: '/tmp/jbossqe-eap/maven-repository'
2020-07-24T13:35:17.824Z [jfrt ] [INFO ] [9ff0d165d68339ee] [o.a.r.s.ImportJob:145         ] [art-exec-2          ] - Import of 1 repositories completed
2020-07-24T13:35:17.824Z [jfrt ] [INFO ] [9ff0d165d68339ee] [o.a.r.s.ImportJob:148         ] [art-exec-2          ] - Refresh storage summary cache async
{code}

Any idea what might be causing this? It is not ruled out that I'm doing something wrong.

It may be related, that once the import failed with an exception (but it usually does *not* fail with an exception):
{code}
2020-07-29T09:20:59.242Z [jfrt ] [INFO ] [4146cb41c2b63d33] [o.a.r.r.s.ImportResource:155  ] [http-nio-8081-exec-9] - Starting Repositories Import of eap-local from /tmp/jbossqe-eap/maven-repository
2020-07-29T09:22:59.302Z [jfrt ] [ERROR] [4146cb41c2b63d33] [.r.s.RepositoryServiceImpl:871] [http-nio-8081-exec-9] - The task No Job did not complete correctly.
2020-07-29T09:23:01.152Z [jfrt ] [ERROR] [4146cb41c2b63d33] [o.a.r.r.s.ImportResource:192  ] [http-nio-8081-exec-9] - Unable to import repository
org.artifactory.concurrent.LockingException: Timeout after 120 seconds when trying to wait for next state in 'SCHEDULED'.
	at org.artifactory.schedule.TaskBase.guardedWaitForNextStep(TaskBase.java:460)
	at org.artifactory.schedule.TaskBase.guardedTransitionToState(TaskBase.java:442)
	at org.artifactory.schedule.TaskBase.guardedTransitionToState(TaskBase.java:432)
	at org.artifactory.schedule.TaskBase.schedule(TaskBase.java:94)
	at org.artifactory.schedule.TaskServiceImpl.startTask(TaskServiceImpl.java:149)
	at jdk.internal.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy175.startTask(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.createAndStartImportJob(RepositoryServiceImpl.java:879)
	at org.artifactory.repo.service.RepositoryServiceImpl.importRepositoriesFromSettings(RepositoryServiceImpl.java:866)
	at org.artifactory.repo.service.RepositoryServiceImpl.importRepo(RepositoryServiceImpl.java:812)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy177.importRepo(Unknown Source)
	at org.artifactory.rest.resource.system.ImportResource.importRepositories(ImportResource.java:189)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$VoidOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:183)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:519)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:385)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:249)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:609)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1623)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc42sw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
dashboard topology doesn't show node down,RTFACT-22987,106403,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Schiff,Schiff,29/Jul/20 1:09 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,,,,,,,,0,,,,,,"Setup: 2 node artifactory (version 7.6.1)

State: Take one of the nodes down

Expectation: In Artifactory -> Dashboard -> Topology, I expect to see that the service is degraded.  Today, it shows all green with no indication of any degredation

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc429k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
HA_IS_PRIMARY fails when used as an ENV VAR,RTFACT-22953,106064,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joeyn,joeyn,26/Jul/20 10:55 AM,10/Feb/21 7:05 AM,18/Feb/21 8:59 AM,,7.6.3,,,,,,,,,,,,,,0,,,,,,"*Description:*

When launching Artifactory 7.6.3 Docker installation using ""HA_IS_PRIMARY"" as an environment variable, Artifactory still lunches in ""Pro mode"" (rather than HA).

 *What is the expected behavior?:*

If HA_IS_PRIMARY is set to either true or false, Artifactory should launch in HA mode. This appears to be working in Artifactory 6.20.1. 

*Steps to reproduce:*

1. Setup a PSQL database to work with Artifactory

2. Create an .env file, containing the following environment variables:
{code:java}
JF_SHARED_DATABASE_TYPE=postgresql
JF_SHARED_DATABASE_URL=jdbc:postgresql://localhost:5432/artifactory4
JF_SHARED_DATABASE_USERNAME=artifactory
JF_SHARED_DATABASE_PASSWORD=password
JF_SHARED_DATABASE_DRIVER=org.postgresql.Driver
HA_IS_PRIMARY=false {code}
3. Launch Artifactory 7.6.3 using the .env file:
{code:java}
docker run -d --name art --env-file .env -p 8081:8081 -p 8082:8082 --network=""host"" docker.bintray.io/jfrog/artifactory-pro:7.6.3{code}
 4. Tail into the logs 
{code:java}
docker logs -f art
{code}
5. Verify that the JF_SHARED_NODE_PRIMARY is set:
{code:java}
JF_SHARED_DATABASE_USERNAME : artifactory
JF_SHARED_NODE_NAME : joeyn-ubu-envs
JF_SYSTEM_YAML : /opt/jfrog/artifactory/var/etc/system.yaml
JF_ARTIFACTORY_PID : /opt/jfrog/artifactory/app/run/artifactory.pid
JF_SHARED_DATABASE_TYPE : postgresql
JF_SHARED_DATABASE_PASSWORD : ******
JF_PRODUCT_DATA_INTERNAL : /var/opt/jfrog/artifactory
JF_SHARED_NODE_PRIMARY : false
JF_PRODUCT_HOME : /opt/jfrog/artifactory
JF_ROUTER_TOPOLOGY_LOCAL_REQUIREDSERVICETYPES : jfrt,jfac,jfmd,jffe,jfevt
JF_SHARED_DATABASE_URL : jdbc:postgresql://localhost:5432/artifactory4
JF_SHARED_DATABASE_DRIVER : org.postgresql.Driver
JF_SHARED_NODE_IP : 10.156.0.17
JF_SHARED_NODE_ID : joeyn-***{code}
6. Make sure that Artifactory uses PSQL, meaning that the PSQL ENV VARS were passed successfully:
{code:java}
2020-07-26T10:36:44.547Z [jfac ] [INFO ] [ed7b7250286fd664] [s.d.u.AccessJdbcHelperImpl:139] [ocalhost-startStop-1] - Database: PostgreSQL 9.5.21. Driver: PostgreSQL JDBC Driver 42.2.12
2020-07-26T10:36:44.548Z [jfac ] [INFO ] [ed7b7250286fd664] [s.d.u.AccessJdbcHelperImpl:142] [ocalhost-startStop-1] - Connection URL: jdbc:postgresql://localhost:5432/artifactory4
2020-07-26T10:36:44.570Z [jfac ] [INFO ] [ed7b7250286fd664] [s.d.u.AccessJdbcHelperImpl:151] [ocalhost-startStop-1] - ***Creating database schema***
2020-07-26T10:36:45.183Z [jfac ] [INFO ] [ed7b7250286fd664] [s.d.u.AccessJdbcHelperImpl:167] [ocalhost-startStop-1] - Setting new schema baseline to latest version: 4.10
2020-07-26T10:36:45.885Z [jfac ] [INFO ] [ed7b7250286fd664] [alConfigurationServiceBase:179] [ocalhost-startStop-1] - Configuration data wasn't found in db. Loading defaults
2020-07-26T10:36:46.586Z [jfac ] [INFO ] [ed7b7250286fd664] [.h.AccessNodeIdProviderImpl:70] [ocalhost-startStop-1] - Service id initialized: jfac@01ee5b4j2h2e3a1c2e113h0rxc
2020-07-26T10:36:46.835Z [jfac ] [INFO ] [ed7b7250286fd664] [a.k.m.MasterKeyBootstrapper:70] [ocalhost-startStop-1] - No master.key supplied. Generating master.key
2020-07-26T10:36:46.883Z [jfac ] [INFO ] [ed7b7250286fd664] [.k.m.MasterKeyBootstrapper:146] [ocalhost-startStop-1] - Saving master.key to /opt/jfrog/artifactory/var/etc/security/master.key
2020-07-26T10:36:47.632Z [jfac ] [INFO ] [ed7b7250286fd664] [j.a.s.s.t.TokenServiceImpl:115] [ocalhost-startStop-1] - Scheduling task for revoking expired tokens using cron expression: 0 0 0/1 * * ?{code}
7. However, the instance launches in Pro mode:
{code:java}
_ _ __ _ _____
 /\ | | (_)/ _| | | | __ \
 / \ _ __| |_ _| |_ __ _ ___| |_ ___ _ __ _ _ | |__) | __ ___
 / /\ \ | '__| __| | _/ _` |/ __| __/ _ \| '__| | | | | ___/ '__/ _ \
 / ____ \| | | |_| | || (_| | (__| || (_) | | | |_| | | | | | | (_) |
 /_/ \_\_| \__|_|_| \__,_|\___|\__\___/|_| \__, | |_| |_| \___/
 Version: 7.6.3 __/ |
 Revision: 70603900 |___/
 Artifactory Home: '/opt/jfrog/artifactory'
 Node ID: 'joeyn-***'{code}
 

*Possible workaround:*

Refrain from using ENV VARS to configure the ""HA_IS_PRIMARY"" setting, and set it via system.yaml.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc40bk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory won't let to set base URL if hostname is artifactory,RTFACT-22946,106018,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,afunix,afunix,25/Jul/20 7:15 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.6.3,,,,,,,,,,,,,,1,,,,,,"Upon first login a dialog to setup Artifactory is shown.

On the Set Base URL I enter ""https://artifactory.example.com"", press Next and get ""Please remove '/artifactory' from the URL"" error.

My domain is definitely not example.com, but hostname is artifactory.

It looks like validation rules just checks if ""/artifactory"" is in the string and does not actually parse URL to verify only path.

 

jfrog-artifactory-oss-7.6.3-70603900.x86_64

 

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc401k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget list command response includes everything if running against internet-nuget,RTFACT-22943,105980,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jfishbourne,jfishbourne,23/Jul/20 9:31 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,NuGet,,,,,,0,,,,,,"At some point in 2019, something changed and this issue started coming up (Nuget List returned the correct results beforehand).

Since then, there’s now a disconnect between the Visual Studio search, the Artifactory search, and the nuget cli (nuget list command).

 

The API call (in Postman) and the Nuget List command
 * When setup against virtual-nuget, return an excessive amount of results, most of which have nothing to do with the search param.
 * A search for “MerrillLynch.Framework.Integration” will return any results that included “Framework”, which means thousands of results.

Visual Studio
 * When setup against virtual-nuget, <20 results come back and the results look accurate (not the full list from internet-nuget)
 * When setup against multiple sources (virtual-nuget and internet-nuget), returns excessive amounts of results
 * Not sure why virtual-nuget, which includes internet-nuget, behaves differently here compared to having an additional source for just internet-nuget

Artifactory Search
 * Returns even smaller list of results that have to match the product-id

 

 ",,,,,,,,,,,,,,,,,,,"18/Aug/20 11:51 PM;davidx;NuGet search details-1.pdf;https://www.jfrog.com/jira/secure/attachment/45045/NuGet+search+details-1.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ztc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory cannot delete offline/unused nodes ,RTFACT-22942,105977,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bboe,bboe,23/Jul/20 9:10 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,0,,,,,,"Background:

  We are creating a cluster on aws using the HA configuration.  During testing, we are constantly rotating nodes in and out of the cluster and bringing up new nodes.  When I tried to remove unreachable nodes (the aws instance had been terminated), I got a 400.  Further examination showed that the request was being routed through a follower node, and that this request was throwing a NullPointerException.  As a side note, this should really be a 500 and not a 400, because it was an internal server error and not an error with the request.  The unreachable nodes did not have their ip address set previously and were assigned the ip address of 127.0.0.1 when they joined the cluster.

Reproduction steps:

1) Setup your artifactory instance as described above, there should be some live (online) nodes and some dead (offline) nodes

2) Go to [https://<instance>/ui/admin/monitoring/service-status|https://staging.repo.splunkdev.net/ui/admin/monitoring/service-status]

3) Hit the red x, which is supposed to delete the node and which issues the DELETE request at https://<instance>/ui/api/v1/ui/system/nodes/<dead-node-id>.  The response was ""Request failed with status code 400""

Log data
{noformat}
2020-07-23T14:55:51.262Z ^[[1;32m[jfrt ]^[[0;39m ^[[1;31m[ERROR]^[[0;39m [7fc07c9bc1c09e79] [s.a.c.h.RemoveServerService:73] [http-nio-8081-exec-8] - Exception occurred while removing 'dead-node-id'
java.lang.NullPointerException: null
        at org.artifactory.storage.db.servers.service.ArtifactoryServersCommonService.lambda$static$6(ArtifactoryServersCommonService.java:127)
        at org.artifactory.addon.ha.HaAddonImpl.artifactoryServerHasHeartbeat(HaAddonImpl.java:843)
        at org.artifactory.addon.ha.HaAddonImpl.deleteArtifactoryServer(HaAddonImpl.java:834)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
        at com.sun.proxy.$Proxy333.deleteArtifactoryServer(Unknown Source)
        at org.artifactory.ui.rest.service.admin.configuration.ha.RemoveServerService.removeServer(RemoveServerService.java:64)
        at org.artifactory.ui.rest.service.admin.configuration.ha.RemoveServerService.execute(RemoveServerService.java:50)
        at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
        at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:127)
        at org.artifactory.ui.rest.resource.admin.configuration.servers.ServersStatusResource.removeServer(ServersStatusResource.java:62)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195)
        at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.AccessFilter.useAuthenticationAndContinue(AccessFilter.java:413)
        at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:301)
        at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:176)
        at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:127)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
        at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
        at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:126)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543)
        at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1627)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
        at java.base/java.lang.Thread.run(Thread.java:834)
2020-07-23T14:55:51.268Z ^[[33m[jffe ]^[[39m ^[[31m^[[1m[ERROR]^[[22m^[[39m [7fc07c9bc1c09e79] [                              ] [main                ] - Error: Request failed with status code 400 {noformat}
If a workaround is available, it would be appreciated",aws,,,,,,,,,,,,RTFACT-21822,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3zso:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Jul/20 9:26 PM;bboe;Also, from a usability point of view, the UI is entirely unresponsive to the request.  There is no indication that the request failed, succeeded, or that anything at all happened.  If it wasn't for the documentation, I wouldn't even be sure if this was a clickable element.","27/Jul/20 3:36 PM;bboe;A possible workaround from another related ticket - https://www.jfrog.com/jira/browse/RTFACT-22222

 

#List the nodes and their statuses
select * from access_topology;

#Delete the node from both access_topology and access_nodes tables
delete from access_topology where node_id = 'art2';

delete from access_nodes where node_id = 'art2';","23/Aug/20 2:16 PM;Maximy;resolved under JFUI-4365",,,,,,,,
"Reverse-Proxy generator identifies a wrong ""Internal Artifactory Port""",RTFACT-22935,105906,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,23/Jul/20 11:13 AM,10/Feb/21 7:09 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"When starting Artifactory with a non-default port, the build-in reverse proxy generator in the `HTTP Settings` page identifies the access port as the Artifactory port.
If the generated configuration will be used, the Tomcat thread pool of the access connector might get exhausted really easily.

 !image-2020-07-23-14-11-05-837.png|thumbnail! 

*+Steps to reproduce:+*
1. Download and install Artifactory 7.6.3.
2. Modify the system.yaml accordingly:
{code:java}
artifactory:
    port: 8009
{code}
3. Start Artifactory.
4. Navigate to the `HTTP Settings` page in the UI.
5. Change the ""Server Provider"" to either NGINX or Apache.
6. Notice it gives identifies 8040 as the Artifactory port, instead of 8009.
The wrong port is also being injected into the configuration that Artifactoyr generates.",,,,,,,,,,,,,,,,,,,"23/Jul/20 11:11 AM;arielk;image-2020-07-23-14-11-05-837.png;https://www.jfrog.com/jira/secure/attachment/44303/image-2020-07-23-14-11-05-837.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ze8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory fails verifying the signatures of signed repository files in /var/lib/apt/lists,RTFACT-22916,105714,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,saiu,saiu,22/Jul/20 12:46 AM,10/Feb/21 7:16 AM,18/Feb/21 8:59 AM,,6.19.0,7.6.0,,,,,,Debian,,,,,,,1,PB_Done,,,,,"Artifactory fails verifying the signatures of signed repository files in /var/lib/apt/lists throws BAD signature error while testing. It is reproducible in 6.19 as well.The signature of the {{InRelease}} file is causing this BAD signature.

Artifactory 6.19 introduced support for the InRelease metadata file for Debian repositories. This seems to be broken. [https://github.com/AdoptOpenJDK/openjdk-installer/issues/235]
Same behavior tested on 7.6.

*_apt-get update or apt-get install_* does not report any errors.

+*Reproduction Steps*+

_1) wget -qO - [https://saiwiwio.jfrog.io/artifactory/api/gpg/key/public] | sudo apt-key add -_
_2) sudo add-apt-repository --yes [https://saiwiwo.jfrog.io/artifactory/debian-local] bionic main_
_3) sudo apt update_
_4) apt-key adv --verify /var/lib/apt/lists/saiwiwo.jfrog.io_artifactory_debian-local_dists_bionic_InRelease_

+*Output*+

*Executing: /tmp/apt-key-gpghome.RIvVEJjtXN/gpg.1.sh --verify /var/lib/apt/lists/saiwiwo.jfrog.io_artifactory_debian-local_dists_bionic_InRelease*
*gpg: Signature made Wed Jul 22 00:22:38 2020 UTC*
*gpg: using RSA key DFE6BFE28C3AC2A8*
*gpg: BAD signature from ""saiun (df) <saiu@jfrog.com>"" [unknown]*

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3y8w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Generic virtual repo list the same file twice both from local and remote if the folder inside these repos are created including +,RTFACT-22913,105655,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,balajis,balajis,21/Jul/20 1:31 PM,10/Feb/21 7:20 AM,18/Feb/21 8:59 AM,,6.17.0,6.20.0,6.20.1,,,,,,,,,,,,0,,,,,,"*Problem description:* It's observed that the generic virtual repository does not merge files correctly when the local and remote (smart remote) repository has the same file inside a folder named including  ""+"" symbol

*What is the expected behavior?* Expected to list the same file once as per the virtual repository behavior.

*Steps to reproduce:* 
 # Setup a generic local repo on Artifactory A and deploy a file under the target path with a folder name include + in its name example- my+test
 # Setup a generic local repo on Artifactory B deploy the same file as the above step under the target path with a folder name include + in its name example- my+test
 # Set up the generic local repo from step1 Artifactory A instance as the smart remote repo in the step2 Artifactory B instance.
 # Include the generic local repo and the smart remote repo in a generic virtual repo in the Artifactory instance B
 # Observe the same file being listed both from remote and local repositories under the same folder. Which is not expected and also not seen in case of other repositories or folders with no + symbol in it

!image-2020-07-21-18-54-57-783.png|width=378,height=101!  

!image-2020-07-27-12-23-59-422.png|width=406,height=130!

 

*Possible workaround:* Recreate the virtual repository",,,,,,,,,,,,,,,,,,,"21/Jul/20 1:24 PM;balajis;image-2020-07-21-18-54-57-783.png;https://www.jfrog.com/jira/secure/attachment/44211/image-2020-07-21-18-54-57-783.png","27/Jul/20 6:54 AM;balajis;image-2020-07-27-12-23-59-422.png;https://www.jfrog.com/jira/secure/attachment/44373/image-2020-07-27-12-23-59-422.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3xw8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unreachable LDAP server causes thread leaks in Artifactory,RTFACT-22910,105615,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shaharz,manojt,manojt,21/Jul/20 6:37 AM,10/Feb/21 7:27 AM,18/Feb/21 8:59 AM,,7.6.2,,,,,,,LDAP,,,,,,,0,PB_Done,,,,,"When a LDAP server that is not reachable from Artifactory either due to the change in the network or the LDAP server is unavailable causes threads to be accumulated.


Steps to reproduce:
1. Create a LDAP integration with Artifactory server and which is not reachable through the Artifactory instance

2. Try logging into the Artifactory instance through for or while loop with either internal or LDAP creds to simulate multiple requests to artifactory

3. We would see the Artifactory server will try to connect to the LDAP and get the following error message:
2020-07-20T16:44:40.944Z [jfrt ] [WARN ] [83974dcf00f21574] [LdapAuthenticationProvider:201] [tp-nio-8081-exec-982] - Failed to authenticate user: 'A' via LDAP: communication error
2020-07-20T16:44:50.952Z [jfrt ] [WARN ] [db16966acd2f7ae9] [LdapAuthenticationProvider:201] [tp-nio-8081-exec-984] - Failed to authenticate user: 'B' via LDAP: communication error
2020-07-20T16:45:00.953Z [jfrt ] [WARN ] [c6c976d9a60bfa97] [LdapAuthenticationProvider:201] [tp-nio-8081-exec-983] - Failed to authenticate user: 'C' via LDAP: communication error
 

Since the Artifactory is trying to make connections with the LDAP server and failing we would see the threads getting accumulated over the period of time and causing the Artifactory server unreachable.

Workaround: 
The workaround is to disable the LDAP server or fix the network connectivity between the LDAP server and Artifactory 




 

 ",,,,,,,,,,,,,,,,,,,"21/Jul/20 6:30 AM;manojt;manojchan-threaddumps.tar.gz;https://www.jfrog.com/jira/secure/attachment/44197/manojchan-threaddumps.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3xmo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Apache HTTPD responds 502 bad gateway instead of 401/403 on large file uploads,RTFACT-22904,105520,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,20/Jul/20 6:16 AM,10/Feb/21 7:31 AM,18/Feb/21 8:59 AM,,6.20.1,6.9.6,7.6.3,,,,,,,,,,,,0,,,,,,"+Note: This seems to be a general issue when using Apache HTTPD in front of Tomcat, regardless of Artifactory.+

I have successfully reproduced the below on:
* Artifactory 6.9.6
* Artifactory 6.20.1
* Artifactory 7.6.3.

Each version was tested with the configuration generated from the built-in generator.
I have tested Apache HTTPD 2.4.38 & 2.4.43 (latest).

+Steps to reproduce:+
1. Install Artifactory. 
2. Make sure anonymous access is disabled.
3. Setup an Apache HTTPD proxy in front of Artifactory, use the Artifactory config-generator.
4. Verify Apache HTTPD is working:
{code:java}
curl  ""arielk.mac/artifactory/api/system/ping""
OK
{code}
5. Create a ""generic-local"" repository.
6. Try to upload a large file (>5mb) with a non-existing user:
{code:java}
curl -u nosuchuser:password -T large.file ""arielk.mac/artifactory/generic-local/"" -vvL                                                                                                                          ✔  09:09:43
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying ::1...
* TCP_NODELAY set
* Connected to arielk.mac (::1) port 80 (#0)
* Server auth using Basic with user 'nosuchuser'
> PUT /artifactory/generic-local/large.file HTTP/1.1
> Host: arielk.mac
> Authorization: Basic bm9zdWNodXNlcjpwYXNzd29yZA==
> User-Agent: curl/7.64.1
> Accept: */*
> Content-Length: 4571248
> Expect: 100-continue
>
< HTTP/1.1 100 Continue
} [65536 bytes data]
* We are completely uploaded and fine
100 4464k    0     0  100 4464k      0  87294  0:00:52  0:00:52 --:--:--     0< HTTP/1.1 502 Bad Gateway
< Date: Mon, 20 Jul 2020 06:10:31 GMT
< Server: Apache/2.4.43 (Unix)
< Content-Length: 232
< Content-Type: text/html; charset=iso-8859-1
<
{ [232 bytes data]
<!DOCTYPE HTML PUBLIC ""-//IETF//DTD HTML 2.0//EN"">
<html><head>
<title>502 Bad Gateway</title>
</head><body>
<h1>Bad Gateway</h1>
<p>The proxy server received an invalid
response from an upstream server.<br />
</p>
</body></html>
100 4464k  100   232  100 4464k      4  87049  0:00:58  0:00:52  0:00:06    73
* Connection #0 to host arielk.mac left intact
* Closing connection 0
* {code}

As you can see above, the client got 502 response from Apache HTTPD.
While checking in Artifactory logs I see:
{code:java}
20200720091133|56|REQUEST|172.17.0.1|non_authenticated_user|PUT|/generic-local/large.file|HTTP/1.1|401|4571248
{code}

From HTTPD logs:

{code:java}
[Mon Jul 20 06:12:26.405159 2020] [proxy:error] [pid 1153:tid 140270460065536] (32)Broken pipe: [client 172.17.0.1:55888] AH01084: pass request body failed to 192.168.65.2:8081 (docker.for.mac.localhost)
[Mon Jul 20 06:12:26.405277 2020] [proxy_http:error] [pid 1153:tid 140270460065536] [client 172.17.0.1:55888] AH10154: pass request body failed to 192.168.65.2:8081 (docker.for.mac.localhost) from 172.17.0.1 () with status 502
{code}

Sometimes I'd also see errors such as:
{code:java}
[Sun Jul 19 12:52:06.078217 2020] [proxy_http:error] [pid 487:tid 140270192547584] [client 172.17.0.1:54636] AH01114: HTTP: failed to make connection to backend: docker.for.mac.localhost
[Sun Jul 19 12:52:11.263314 2020] [proxy:error] [pid 484:tid 140269370455808] (111)Connection refused: AH00957: HTTP: attempt to connect to 192.168.65.2:8082 (docker.for.mac.localhost) failed
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3x2g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
502 Bad Gateway error returned from Artifactory service ,RTFACT-22892,105406,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kreddy,kreddy,17/Jul/20 6:24 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,,,,,,,,0,,,,,,"Problem Statement: 

After Upgrading Artifactory to 7.xxxxxx, we are observing ""502 Bad Gateway"" every now and then and the only resolution is to restart the server. This is impacting all our build jobs and it leads to failure of the long-running Jenkins jobs. The server runs fine for 2-3 days and then again it starts to give 502 error, kindly check and revert I am sharing the log details as below.

Logs:

Logs from Frontend-console.log
{code:java}
2020-07-15T14:38:28.625Z [33m[jffe ][39m [31m[1m[ERROR][22m[39m [                ] [                              ] [main                ] - Error: fetchAndUpdateHttpSsoConfigs failed with error Request failed with status code 502    at configurationsPromises.push.PlatformConfiguration.fetchAndUpdateHttpSsoConfigs.catch (D:\Artifactory\app\frontend\bin\server\dist\webpack:\src\PlatformState\PlatformConfiguration.ts:83:17)    at process._tickCallback (internal/process/next_tick.js:68:7)2020-07-15T14:38:29.666Z [33m[jffe ][39m [31m[1m[ERROR][22m[39m [22a7c5e7e5860fbc] [                              ] [main                ] - Error: Request failed with status code 502    at createError (D:\Artifactory\app\frontend\bin\server\dist\node_modules\axios\lib\core\createError.js:16:15)    at settle (D:\Artifactory\app\frontend\bin\server\dist\node_modules\axios\lib\core\settle.js:17:12)    at IncomingMessage.handleStreamEnd (D:\Artifactory\app\frontend\bin\server\dist\node_modules\axios\lib\adapters\http.js:236:11)    at IncomingMessage.emit (events.js:203:15)    at endReadableNT (_stream_readable.js:1145:12)    at process._tickCallback (internal/process/next_tick.js:63:19)2020-07-15T14:38:31.274Z [33m[jffe ][39m [31m[1m[ERROR][22m[39m [21ff4f4ef1176e35] [                              ] [main                ] - Error: Request failed with status code 502    at createError (D:\Artifactory\app\frontend\bin\server\dist\node_modules\axios\lib\core\createError.js:16:15)    at settle (D:\Artifactory\app\frontend\bin\server\dist\node_modules\axios\lib\core\settle.js:17:12)    at IncomingMessage.handleStreamEnd (D:\Artifactory\app\frontend\bin\server\dist\node_modules\axios\lib\adapters\http.js:236:11)    at IncomingMessage.emit (events.js:203:15)    at endReadableNT (_stream_readable.js:1145:12)    at process._tickCallback (internal/process/next_tick.js:63:19)
{code}
Last time we restarted ther server on xxxxx date and then it worked fine for 2 days and then we again encountred the same problem on yyyyy and again we have to restart the server.

Please note there are no exact steps to reproduce this issue, we are experiencing this issue at irregular times.

Complete logs can be provided upon request.

Looking forward to any suggestions or comments to resolve this issue.","Operating System : Windows Server 2012 R2 Standard

RAM : 32GB

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3wds:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Oct/20 5:56 PM;kenrestivo;We are seeing this too. Front end is nginx.",,,,,,,,,,
"Maven ""Set Me Up"" not inserting username/password values",RTFACT-22889,105358,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,drb45,drb45,16/Jul/20 9:43 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,Set Me Up,,,,,,,0,artifactory,maven,setmeup,,,"*Problem:* Generated Maven Settings show placeholders instead of actual values in the <username> and <password> tags.

*Reproduce:* Click Set Me Up on a Maven virtual repo. Enter password, then click Generate Maven Settings. Observe the <username> and <password> fields in the generated config:
{noformat}
  <servers>
    <server>
      <username>${security.getCurrentUsername()}</username>
      <password>${security.getEscapedEncryptedPassword()!""*** Insert encrypted password here ***""}</password>
      <id>central</id>
    </server>
    <server>
      <username>${security.getCurrentUsername()}</username>
      <password>${security.getEscapedEncryptedPassword()!""*** Insert encrypted password here ***""}</password>
      <id>snapshots</id>
    </server>
  </servers>{noformat}
*Expected:* Actual username and encrypted password in the fields.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3w4g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Accessing the System Settings with an admin user from SAML realm get ""Unauthorized"" error and logs out of Artifactory",RTFACT-22888,105337,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,16/Jul/20 3:33 PM,10/Feb/21 7:43 AM,18/Feb/21 8:59 AM,,7.6.2,,,,,,,,,,,,,,0,PB_Done,,,,,"When accessing the Artifactory UI with a SAML SSO user that has admin privileges, the login works as expected. However, when accessing the Artifactory UI > Admin Tab > Security > Settings, the admin user from the SAML realm will be logged out with the error ""Unauthorized"".

*Steps to reproduce:*
 # Configure SAML SSO as mentioned in this KB with group sync - [https://jfrog.com/knowledge-base/how-do-i-configure-artifactory-saml-sso-with-azure-ad/]
 # Create an Admin group in Artifactory with the same name as the group in Azure AD
 # log in with the SAML SSO user
 # Access Artifactory UI > Admin Tab > Security > Settings

*Expected behavior:*

The SAML SSO user will be able to access the Settings page. 

*Actual behavior:*
 The user gets an ""Unauthorized"" error from Artifactory and automatically redirects to the SAML Logout link.

*Additional information:*

When reproducing this behavior with Developer Tools, we are able to see that the SAML SSO admin encounters a 401 error while the internal admin user get the 200 response.
 When attempting to curl with both the SAML admin user and the internal admin user, we receive the ""Unauthorized"" with the SAML admin user ACCESSTOKEN while we get a successful response when using the internal admin user ACCESSTOKEN in the curl command.

*Workaround:*

**Manually set the SAML SSO user with Admin privileges under Artifactory UI > Admin Tab > Identity and Access > Users.
Setting the user as an Admin will allow the user from the SAML realm to access this page. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3w0o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
PKIX path building failed,RTFACT-22881,105251,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,amber,amber,15/Jul/20 6:45 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,7.6.3,,,,,,,Artifactory,,,,,,,2,artifactory,pro,repository,security,,"When attempting to create a remote repository that is secured with https, I get the following error:
Connection to remote repository failed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target

I made sure that the ca certs are in the trust store, but that did not help. It was also recommended to add to the JVM parameters: [https://www.jfrog.com/confluence/display/RTF5X/Using+a+Self-Signed+Certificate]

I went to change the JVM parameters( [https://www.jfrog.com/confluence/display/RTF6X/System+Requirements ), |https://www.jfrog.com/confluence/display/RTF6X/System+Requirements] [by navigating to the specified directory |https://www.jfrog.com/confluence/display/RTF6X/System+Requirements] [(|https://www.jfrog.com/confluence/display/RTF6X/System+Requirements] [https://www.jfrog.com/confluence/display/RTF6X/Installing+on+Linux+Solaris+or+Mac+OS#InstallingonLinuxSolarisorMacOS-RPMorDebianInstallation]), but the directory listed for Artifactory env variables does not exist in our installation: _/etc__/opt/jfrog__/artifactory/default_

The docs for this set up needs to be updated with the correct locations and setup process for using Using a Self-Signed Certificates.

I also checked to make sure we were on the latest Java. 
openjdk version ""1.8.0_252""
OpenJDK Runtime Environment (build 1.8.0_252-b09)
OpenJDK 64-Bit Server VM (build 25.252-b09, mixed mode)","jfrog-artifactory-pro.x86_64 7.6.3-70603900

openjdk version ""1.8.0_252""
OpenJDK Runtime Environment (build 1.8.0_252-b09)
OpenJDK 64-Bit Server VM (build 25.252-b09, mixed mode)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3vi8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
folder lookup behavior returns 404 instead of 302,RTFACT-22880,105245,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,15/Jul/20 5:56 PM,10/Feb/21 7:46 AM,18/Feb/21 8:59 AM,,6.19.1,,,,,,,,,,,,,,1,PB_Done,,,,,"REPRODUCE

create maven smart remote in one instance pointing to a maven virtual in another.

make a call to check if a folder exists in the target virtual and the source remote is empty, nothin cached yet.

an example of this request:
curl -uadmin:password -IL http://art.com:8081/artifactory/maven-remote/folder3.

This will return a 302 then 200 if a folder exists. A trailing / is not needed. This is the result of a 6.8.15 instance.

upgrade or start a new 6.19.1 instance with the same setup and there is different behavior. For the same request, you consistently see a 404.

You will see the following in the log.

2020-07-14 22:41:32,799 [http-nio-8081-exec-5] [ERROR] (o.a.r.HttpRepo :784) - Remote info request was redirected to a directory. Repo: maven-remote Path: folder3.

 

a script to check for available artifacts is being used and this has always worked in the past versions.  Talked with R&D around this behavior to look into what changed and they did not know.  Is this a regression?  Was this behavior changed on purpose?  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3vh4:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"01/Oct/20 8:11 AM;arielk;Generally, when a request is made to a folder without a trailing slash (""/"") in a local repository in Artifactory, it returns a 302:
{code:java}
curl -uadmin $ARTIFACTORY-URL/artifactory/libs-release-local/more/new/path -s -o /dev/null -w ""%{http_code}""
302%
{code}

While if a request is made with the trailing slash, a 200 is returned:
{code:java}
curl -uadmin $ARTIFACTORY-URL/artifactory/libs-release-local/more/new/path/ -s -o /dev/null -w ""%{http_code}""
200%
{code}

We can make the request without a trailing slack to return 200 if we order the cURL client to follow redirect using ""-L"" flag:
{code:java}
curl -uadmin $ARTIFACTORY-URL/artifactory/libs-release-local/more/new/path -s -o /dev/null -w ""%{http_code}"" -L 
200%
{code}


The problem here is that when a directory is requested from a remote repository without a trailing slash, the remote repository receives a ""302"" from the upstream.
Looks like the ""302"" is being translated to ""404"" by the remote repository as it doesn't follow redirections.
Once the ""404"" is returned, it is being cached in the missedRetrievalCache.
Now that the ""404"" for a directory is cached, any request to an artifact inside that directory will also return 404 as it seems that the remote repository will search first if the parent node exists in any of the caches. As it exists in missedRetrievalCache, if it's not expired (based on missedRetrievalCachePeriodSecs), Artifactory will return 404.

+two suggestions to avoid this issue:+
1. Do not request directories without a trailing slash when addressed via a remote repository.
2. Setting ""missedRetrievalCachePeriodSecs"" to 0 will mean Artifactory will not cache the 404.",,,,,,,,,,
GitHub packages as remote NPM results in 404,RTFACT-22879,105226,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cbrothers,cbrothers,15/Jul/20 4:17 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Using the cloud version of Artifactory

 

*Steps to reproduce:*

1. Steps to configure the remote:

a. Create a remote NPM repostiory with the URL [https://npm.pkg.github.com|https://npm.pkg.github.com/]
 b. Enable Bypass HEAD
 c. Enter the credentials of a github username and personal access token

2. Upload a package to github

[https://help.github.com/en/github/managing-packages-with-github-packages/configuring-npm-for-use-with-github-packages#publishing-a-package]

3. Configure npm to use the remote repository for the scope of the GitHub Organization

4. Attempt to use npm to install the package results in a 404

  
{code:java}
0 info it worked if it ends with ok
1 verbose cli [
1 verbose cli   '/home/corey/.nvm/versions/node/v12.18.0/bin/node',
1 verbose cli   '/home/corey/.nvm/versions/node/v12.18.0/bin/npm',
1 verbose cli   'i',
1 verbose cli   '@[scope]/[package]'
1 verbose cli ]
2 info using npm@6.14.4
3 info using node@v12.18.0
4 verbose npm-session b75fd39534c51fd8
5 silly install loadCurrentTree
6 silly install readLocalPackageData
7 http fetch GET 200 https://neverfail.jfrog.io/artifactory/api/npm/[scope]-npm-remote/@[scope]%2f[package] 2886ms
8 http fetch GET 404 https://neverfail.jfrog.io/artifactory/api/npm/[scope]-npm-remote/download/@[scope]/[package]/0.1.27/76e9242a5f4f82c8def78b06a75695c8d4ba3177df5a4adb65cf099bd52c4fbc 172ms
9 silly fetchPackageMetaData error for @[scope]/[package]@latest 404 Not Found - GET https://neverfail.jfrog.io/artifactory/api/npm/[scope]-npm-remote/download/@[scope]/[package]/0.1.27/76e9242a5f4f82c8def78b06a75695c8d4ba3177df5a4adb65cf099bd52c4fbc
10 timing stage:rollbackFailedOptional Completed in 2ms
11 timing stage:runTopLevelLifecycles Completed in 3097ms
12 verbose stack Error: 404 Not Found - GET https://neverfail.jfrog.io/artifactory/api/npm/[scope]-npm-remote/download/@[scope]/[package]/0.1.27/76e9242a5f4f82c8def78b06a75695c8d4ba3177df5a4adb65cf099bd52c4fbc
12 verbose stack     at /home/corey/.nvm/versions/node/v12.18.0/lib/node_modules/npm/node_modules/npm-registry-fetch/check-response.js:104:15
12 verbose stack     at processTicksAndRejections (internal/process/task_queues.js:97:5)
13 verbose statusCode 404
14 verbose pkgid @[scope]/[package]@latest
15 verbose cwd /home/corey/work/neverfailcc/cb-deployment
16 verbose Linux 5.7.6-arch1-1
17 verbose argv ""/home/corey/.nvm/versions/node/v12.18.0/bin/node"" ""/home/corey/.nvm/versions/node/v12.18.0/bin/npm"" ""i"" ""@[scope]/[package]""
18 verbose node v12.18.0
19 verbose npm  v6.14.4
20 error code E404
21 error 404 Not Found - GET https://neverfail.jfrog.io/artifactory/api/npm/[scope]-npm-remote/download/@[scope]/[package]/0.1.27/76e9242a5f4f82c8def78b06a75695c8d4ba3177df5a4adb65cf099bd52c4fbc
22 error 404
23 error 404 '@[scope]/[package]@latest' is not in the npm registry.
24 error 404 You should bug the author to publish it (or use the name yourself!)
25 error 404 Note that you can also install from a
26 error 404 tarball, folder, http url, or git url.
27 verbose exit [ 1, true ]
{code}
 ",jfrog.io cloud instance of Artifactory,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3vg0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory 7.6.1 integration with openid does not work as it should,RTFACT-22877,105221,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Pedro Chaves,Pedro Chaves,15/Jul/20 2:58 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,Artifactory,OAuth,,,,,,0,Artifactory,OAuth,,,,"Artifactory uses the email from the oauth openid response instead of the _sub_ field.
 It should use the _sub_ field or allow the user to configure the field for the name.

Additionally, if we add the scope to the authorize endpoint (_authorize?scope=openid_) and not the _email_ it still adds the _email_ and _profile_ to the scope and it ends up by fetching the email from the response.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3vew:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deploy package as bundle artifact to virtual repository from the UI failed with 400 - Repository doesn't exist,RTFACT-22875,105210,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mariav,Mariav,15/Jul/20 1:11 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.20.0,7.6.2,,,,,,,,,,,,,0,,,,,,"For example:
{code:java}
artifactory/ui/artifact/deploy/bundle{code}
{code:java}
{
  ""action"": ""deploy"",
  ""unitInfo"": {
    ""artifactType"": ""base"",
    ""path"": ""/"",
    ""mavenArtifact"": false,
    ""valid"": true,
    ""origArtifactType"": ""base"",
    ""debianArtifact"": false,
    ""vagrantArtifact"": false,
    ""composerArtifact"": false,
    ""cranArtifact"": false,
    ""bundle"": true,
    ""type"": ""tgz""
  },
  ""fileName"": ""accessibility-developer-tools-2.12.0.tgz"",
  ""repoKey"": ""npm""
}
{code}
{code:java}
{""error"":""Repository doesn't exist""} 
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3vcg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
api call to npm repository gives a 404,RTFACT-22872,105171,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bert.meedendorp,bert.meedendorp,15/Jul/20 8:47 AM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Artifactory,,,,,,,0,artifactory,,,,,"We use an api call to a npm repository to get all the possible versions ( artifacts ) Sometimes we get a 404 even though the artifacts are present in Artifactory.

I can solve this problem when I copy the artifacts to an other location. Then the original artifacts can be listed again through the api call.

There must be something wrong with the 'index'? but I don't know what.",Artifactory pro running in docker with postgres and nginx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3v48:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM:  Skip reindex - since npm-registry: not exist/valid repository path,RTFACT-22871,105168,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bert.meedendorp,bert.meedendorp,15/Jul/20 8:22 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Artifactory,,,,,,,0,artifactory,,,,,"When I post a reindex command I get the following message:

 

2020-07-15 10:17:36,710 [art-exec-433] [INFO ] (o.a.a.n.NpmServiceImpl:143) - Skip reindex - since npm-registry: not exist/valid repository path

 

I use:  curl -uadmin:xxxxxxxxxxxx -XPOST [https://hostname/artifactory/api/npm/npm-registry/reindex]

 

It's the same reply when activating the reindex through the gui","Artifactory pro running within docker

npm registry contains a local and a remote npm repository.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3v3s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Jul/20 10:14 AM;bert.meedendorp;The npm-registry is a combination of 2 local and 1 remote repository

Other repository types don't have this problem

Send you the support bundle.

 ","07/Oct/20 9:59 PM;gigabook;Were you ever able to resolve this issue? Thanks!","08/Oct/20 5:37 AM;bert.meedendorp;Hello Cory.

I got this message from your colleague Lawrence Fung:

_I want to provide you an update regarding my testing. I was able to see similar behavior in older versions in Artifactory. It seems if you schedule a npm re-index, the UI will report that the reindex has successfully been scheduled, but the logs seem to indicate that reindexes only work with local repositories. This may be an issue with the documentation and I will report this internally._

 

So this issue can be closed.","08/Oct/20 5:38 AM;bert.meedendorp;thanks for your support.",,,,,,,
Incorrect error message from docker client while pulling docker images via docker virtual repository with anonymous user.,RTFACT-22867,105105,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jayanths,jayanths,14/Jul/20 6:39 PM,10/Feb/21 7:53 AM,18/Feb/21 8:59 AM,,6.20.0,,,,,,,Docker,,,,,,,1,PB_Done,,,,,"*Description:* When pulling docker images from a virtual repository with an anonymous user the docker client throws an error message saying that the manifest for the image is not found instead of an unauthorized message. However, If we try pulling the same image via local repository then a correct error message (unauthorized) will be displayed. 

*Steps to reproduce:*
 1. Enable Anonymous access for the Artifactory and the Anonymous user does not have any permission to the docker repository.
 2. Create a docker local repository.
 3. Create a docker virtual repository and add the above local repository in it.
 4. Push a Docker image to the docker local repository via a docker virtual repository with the privileged user.
 5. Perform docker logout.
 6. Try to pull the image from the Anonymous user via the local repository and could see the below correct error message.
{code:java}
➜  ~ docker pull Artifactory.info:12345/docker-local-test/hello-world
 Using default tag: latest Error response from daemon: unauthorized: The client does not have permission for manifest{code}
*Request log*
{code:java}
20200709072502|41|REQUEST|XXXXXXX|anonymous|GET|/api/docker/docker-local-test/v2/hello-world/manifests/latest|HTTP/1.1|403|0{code}
7. Try to pull the image from the Anonymous user via virtual repository and could see the below Incorrect error message.
{code:java}
➜  ~ docker pull Artifactory.info:12345/docker-virtual/hello-world
 Using default tag: latest Error response from daemon: manifest for   Artifactory.info:12345/docker-virtual/hello-world:latest not found: manifest unknown: The named manifest is not known to the registry.{code}
*Request log :* 
{code:java}
20200709072429|67|REQUEST|XXXXXXXXX|anonymous|GET|/api/docker/docker-virtual/v2/hello-world/manifests/latest|HTTP/1.1|404|0
{code}
*Expected result:* Even when we try to pull the image via a docker virtual repository using an anonymous user we should get an unauthorized error message.

*Impact:* Currently the error message from the virtual repo is confusing. If the end-users do not know what is local/virtual repo in the Artifactory and It will cost them a lot of time to troubleshoot the issue. Artifactory should tell the docker client that it needs authentication in that case.","Docker client version:  19.03.2, build 6a30dfc",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3urc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory 7 logged in accounts cannot access native browser,RTFACT-22863,105085,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tha@luminanetworks.com,tha@luminanetworks.com,14/Jul/20 2:13 PM,18/Feb/21 8:12 AM,18/Feb/21 8:59 AM,,7.6.2,,,,,,,Artifactory,Web UI,,,,,,8,PB_Done,,,,,"We recently upgraded to Artifactory 7 from 6 and discovered that the Native Browser now has a bug whereby if a user is logged into the Web UI. When they try to access a native browser URL or API URL such as ""<HOST>/artifactory/"" they will be prompted with a login popup and despite providing the correct credentials it will continuously show the login popup over and over.

The only workaround we discovered was to get the user to first log out of the Web UI ""<HOST>/ui"" and then trying again. In this case the login popup successfully authenticates the user and allows the user to access the direct download links from generic repos.

We are using a NGINX HTTP proxy using the recommended proxy settings provided by the Artifactory server.

 

 ","Artifactory Pro: 7.6.2 with NGINX reverse proxy

Docker deployment",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3umw:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Jul/20 8:47 AM;v.jansen;We have the same problem in our artifactory deployment (we get a 404 instead of a login as ""Hide Existence of Unauthorized Resources"" is on, we have the same result if we disable this). We have sophos as proxy in front of the artifactory.","31/Aug/20 2:18 PM;chapurlatn;May be a related issue here.","31/Aug/20 2:23 PM;chapurlatn;We're using jfrog with sso saml login.

We used to follow link like: https://company.jfrog.io/company/helm-repo/helm-chart-1.20.2.tgz
 * If the user used to be logged in in its browser, it worked.
 * If the user wasn't, it received a 404.

Now, since the migration, when we click on the link, we always receive a 404 - logged in or not.

We tried using ""_Hide existence of unauthorized resources_"".
It doesn't work either. It shows the Basic Auth form but does not take into account the SAML Login session.","01/Dec/20 10:47 PM;justin.isler;We are facing the same problem (7.10.6) but using an Apache reverse proxy and Crowd as authentication source. The logout / login workaround method does not work with users provided by Crowd Users Management Integration. It will always fail. 

It seems to be (at least partially) caused by the crowd.token_key cookie. When that is deleted I can authenticate with a local user and view the files in the native browser.

Interestingly the navigation will work from the repository root until you reach a folder containing files. There, depending on your setting with ""_Hide existence of unauthorized resources_"" further navigation is blocked with 401 or 404. I assume this folder tree navigation allowance is caused by the option allow ""_Allow Anonymous Access""._ ","18/Feb/21 8:12 AM;justin.isler;Since we have upgraded to version 7.12.6 this issues is resolved for us. ",,,,,,
"Property ""artifactory.access.token.non.admin.max.expires.in"" is overlooked when ""userTokenMaxExpiresInMinutes"" exists in the config descriptor",RTFACT-22853,104962,Bug,Ready for Code Review,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,arielk,arielk,arielk,13/Jul/20 3:19 PM,10/Feb/21 7:54 AM,18/Feb/21 8:59 AM,,6.20.0,7.0.0,7.6.0,,,,,,,,,,,,0,,,,,,"+Steps to reproduce:+
1. Install Artifactory 7.6.0. (this issue exists for a long time, I just verified on the latest versions)
2. Add the below to the Config Descriptor (inside the ""security"" section):
{code:java}
        <accessClientSettings>
            <userTokenMaxExpiresInMinutes>1</userTokenMaxExpiresInMinutes>
        </accessClientSettings>
{code}
3. Add the following to artifactory.system.properties:
{code:java}
artifactory.access.token.non.admin.max.expires.in=300
{code}
4. Restart Artifactory for the system property to load.
5. Create a non-admin user.
6. Notice the error below when trying to create a token:

{code:java}
curl -uarielk -XPOST ""http://localhost:8081/artifactory/api/security/token"" -d ""username=arielk"" -d ""scope=member-of-groups:readers"" -d ""refreshable=true"" -d ""expires_in=300""

{
  ""error"" : ""invalid_request"",
  ""error_description"" : ""The user: 'arielk' can only create user token with expires in larger than 0 and smaller than 60 seconds (requested: 300)""
}%
{code}

As seen above, it took 60 seconds from the param in the Config Descriptor.
This is while it is expected for the system property to have the upper hand.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3txc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
pipeline run suck in waiting after all steps timeout or skipped,RTFACT-22844,104864,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bens,bens,12/Jul/20 8:31 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,," !image-2020-07-12-13-31-39-876.png|thumbnail! 
https://entplus.jfrog.io/ui/pipelines/myPipelines/artifactory_monorepo_build/33/cross_component_api_test?branch=infra%2FDEVF-755-slack",,,,,,,,,,,,,,,,,,,"12/Jul/20 8:31 PM;bens;image-2020-07-12-13-31-39-876.png;https://www.jfrog.com/jira/secure/attachment/43871/image-2020-07-12-13-31-39-876.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3tco:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory shutdown outputs errors and thread dump,RTFACT-22836,104798,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,johnw,johnw,10/Jul/20 9:16 PM,10/Feb/21 8:03 AM,18/Feb/21 8:59 AM,,7.6.1,7.6.2,,,,,,,,,,,,,0,,,,,,"When triggering a shutdown of Artifactory, the following is logged in a stack trace:
{code:java}
Caused by: java.lang.ClassNotFoundException: Illegal access: this web application instance has been stopped already.
{code}
*Note:* Artifactory starts successfully when started, despite the error output.

systemctl status, when applicable, shows Active: failed:

Ubuntu 16.04 (Artifactory 7.6.2)
{code:java}
● artifactory.service - Artifactory service
   Loaded: loaded (/lib/systemd/system/artifactory.service; enabled; vendor preset: enabled)
   Active: failed (Result: exit-code) since Fri 2020-07-10 20:22:38 UTC; 19min ago
 Main PID: 7773 (code=exited, status=143){code}
CentOS 7.8 (Artifactory 7.6.1)
{code:java}
● artifactory.service - Artifactory service Loaded: loaded (/usr/lib/systemd/system/artifactory.service; enabled; vendor preset: disabled) Active: failed (Result: exit-code) since Fri 2020-07-10 20:58:59 UTC; 15min ago Process: 9094 ExecStop=/opt/jfrog/artifactory/app/bin/artifactoryManage.sh stop (code=exited, status=0/SUCCESS) Process: 5326 ExecStart=/opt/jfrog/artifactory/app/bin/artifactoryManage.sh start (code=exited, status=0/SUCCESS) Main PID: 7474 (code=exited, status=143)
{code}
Full logs attached.

Tested in 
CentOS 7.8, CentOS 7.6 (RPM Install Artifactory 7.6.1)
Ubuntu 18.04, 16.04 (Deb Install Artifactory 7.6.2)
Docker Installation Artifactory 7.6.2
Linux Unzip Install 7.6.2",,,,,,,,,,,,,,,,,,,"10/Jul/20 9:13 PM;johnw;deb-shutdown.txt;https://www.jfrog.com/jira/secure/attachment/43810/deb-shutdown.txt","10/Jul/20 9:13 PM;johnw;docker-shutdown.txt;https://www.jfrog.com/jira/secure/attachment/43809/docker-shutdown.txt","10/Jul/20 9:13 PM;johnw;rpm-shutdown.txt;https://www.jfrog.com/jira/secure/attachment/43808/rpm-shutdown.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3syg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory unable to download from a P2 repository,RTFACT-22826,104697,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,neerajbhusare@zafin.com,neerajbhusare@zafin.com,09/Jul/20 9:48 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,0,,,,,,"Hi,

My project builds are failing because of the below error [0]. To resolve the issue, I added the required update site URL [1] in the P2 repository that I had configured in the artifactory. Also,  I checked the option ""Artifactory Requests Can Retrieve Remote Artifacts"" and put the artifactory in online mode. I also confirmed the update site by explicitly installing the plug-ins in Eclipse.

Even after making the above changes, my builds are failing. Am I missing something here? Is there anything else that I need to do to resolve the issue?

[0] Caused by: org.eclipse.tycho.p2.target.facade.TargetDefinitionResolutionException: Could not find ""org.activiti.designer.feature.feature.group/5.18.0.201508100929"" in the repositories of the current location at org.eclipse.tycho.p2.target.TargetDefinitionResolver$LoadedIULocation.findUnitInThisLocation (TargetDefinitionResolver.java:313)

[1] [https://www.activiti.org/designer/update/] 

Kindly help. Tx in advance.
 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3sfs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remove UI microservice redirect for repository folder downloads in the UI,RTFACT-22825,104633,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sophiet,sophiet,08/Jul/20 10:57 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.5.5,,,,,,,,,,,,,,0,,,,,,"During a UI repository folder download, the download URL redirects to the UI microservice first then sends the request to Tomcat service.  If the repository is large (a few GBs), the download fails without a message in the UI.  
If the download request is sent directly to the Tomcat service, the download doesn't fail.  The download URL should be changed to ARTIFACTORY_URL/*artifactory/ui*/REPO_PATH.

 

Steps to reproduce:
 # Download a repository folder in the UI and note the download fails for a large repository
 # Edit the download url to ARTIFACTORY_URL/*artifactory/ui*/REPO_PATH",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3s1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Crash With Exception while unlocking work item MavenMetadataWorkItem,RTFACT-22821,104624,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,umair,umair,08/Jul/20 7:56 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,7.4.1,,,,,,,Artifactory,,,,,,,0,,,,,,"*Background:*

We have deployed artifactory locally on linux VM. Today for the first time it get crashed. It is being used with Bitbucket cloud to build and deploy artifacts for our maven based projects. We have only maven type repos setuped in artifactory.  As soon as Bitbucket pipeline started failing, we checked artifactory. Its ui slowly becomes unacessible and started giving 500 error and then it went down completely.

*Impact:*

The impact of this is that Bitbucket pipleines stopped working since artifactory is down. We have manually re run the service again. 

*Problem:*

**Here is the log of that time: (From artifactory-service.log)
{code:java}
2020-07-08T08:46:47.900Z [jfrt ] [INFO ] [db5db221a4d27d0 ] [.q.NonBlockingOnWriteQueue:162] [art-exec-4784       ] - Exception while unlocking work item MavenMetadataWorkItem{repoPath=libs-snapshot-local:uk/co/test/test-server, recursive=false} on remove: Failed to release lock for key: MavenMetadataWorkItem{repoPath=libs-snapshot-local:uk/co/test/test-server, recursive=false}2020-07-08T08:46:47.900Z [jfrt ] [INFO ] [db5db221a4d27d0 ] [.q.NonBlockingOnWriteQueue:162] [art-exec-4784       ] - Exception while unlocking work item MavenMetadataWorkItem{repoPath=libs-snapshot-local:uk/co/test/test-server, recursive=false} on remove: Failed to release lock for key: MavenMetadataWorkItem{repoPath=libs-snapshot-local:uk/co/test/test-server, recursive=false}java.lang.RuntimeException: Failed to release lock for key: MavenMetadataWorkItem{repoPath=libs-snapshot-local:uk/co/test/test-server, recursive=false} at org.artifactory.storage.fs.lock.provider.JvmConflictsGuard.unlock(JvmConflictsGuard.java:60) at org.artifactory.work.queue.NonBlockingOnWriteQueue.remove(NonBlockingOnWriteQueue.java:158) at org.artifactory.work.queue.WorkQueueImpl.doJobs(WorkQueueImpl.java:101) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:30) at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:53) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: java.lang.IllegalMonitorStateException: null at java.base/java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:149) at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1302) at java.base/java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:439) at org.artifactory.storage.fs.lock.provider.JVMLockWrapper.unlock(JVMLockWrapper.java:46) at org.artifactory.storage.fs.lock.provider.JvmConflictsGuard.unlock(JvmConflictsGuard.java:57) ... 9 common frames omitted2020-07-08T08:46:47.900Z [jfrt ] [ERROR] [db5db221a4d27d0 ] [o.a.w.q.WorkQueueImpl:105     ] [art-exec-4784       ] - unexpected state: failed to remove MavenMetadataWorkItem{repoPath=libs-snapshot-local:uk/co/test/test-server, recursive=false} from Maven Metadata. Queue size pending=0 running=02020-07-08T09:46:57.537Z [jfrt ] [ERROR] [1b030771821e6c63] [o.j.a.c.h.AccessHttpClient:119] [27.0.0.1-8091-exec-2] - Error while executing /api/v1/auth/authenticate on access. Exception message: Read timed out2020-07-08T09:46:57.538Z [jfrt ] [ERROR] [77b9f7bc4a6e684b] [o.j.a.c.h.AccessHttpClient:119] [27.0.0.1-8091-exec-1] - Error while executing /api/v1/auth/authenticate on access. Exception message: Read timed out2020-07-08T09:46:57.538Z [jfrt ] [ERROR] [12351b52b7deea3c] [o.j.a.c.h.AccessHttpClient:119] [27.0.0.1-8091-exec-4] - Error while executing /api/v1/auth/authenticate on access. Exception message: Read timed out2020-07-08T09:46:59.594Z [jfrt ] [ERROR] [4b4aaf49763c88b8] [o.j.a.c.h.AccessHttpClient:119] [ttp-nio-8081-exec-32] - Error while executing /api/v1/users/jffe@000 on access. Exception message: Read timed out2020-07-08T09:47:01.696Z [jfrt ] [ERROR] [6c5960d2025077cf] [o.j.a.c.h.AccessHttpClient:119] [ttp-nio-8081-exec-20] - Error while executing /api/v1/users/jffe@000 on access. Exception message: Read timed out2020-07-08T09:47:05.881Z [jfrt ] [ERROR] [5ad762b5e59879f ] [o.j.a.c.h.AccessHttpClient:119] [ttp-nio-8081-exec-30] - Error while executing /api/v1/users/jffe@000 on access. Exception message: Read timed out2020-07-08T09:47:05.881Z [jfrt ] [ERROR] [878dc4d1f042686 ] [o.j.a.c.h.AccessHttpClient:119] [ttp-nio-8081-exec-28] - Error while executing /api/v1/users/jffe@000 on access. Exception message: Read timed out
{code}",Open source license 7.4.1 rev 70401900 undefined,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3rzc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Parallel  POST api/security/apiKey in HA returns two API keys,RTFACT-22801,104501,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valeriyp,valeriyp,08/Jul/20 8:09 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.5.5,,,,,,,,,,,,,,0,,,,,,"+*Steps to reproduce:*+
 # Run Artifactory in HA mode with 2 nodes.
 # Execute concurrently *$ curl -su admin:password1 -XPOST [http://localhost:8081/artifactory/api/security/apiKey]* from both nodes.

 

+Expected:+

One successful request, returns the API key.

Another should return: \{""error"":""Api key already exists for user: admin""}

 

+Actual result:+

Both commands return API keys, only one of them is actually working",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3rao:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot use YAML to configure npm virtual repo's external dependencies remoteRepo,RTFACT-22799,104427,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,wprice,wprice,07/Jul/20 9:34 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Artifactory,Configuration,,,,,,0,PB_Done,,,,,"Attempting to PATCH the repository configuration at {{/artifactory/api/system/configuration}} using:
{code:java}
virtualRepositories:
  npm-remote-all:
    type: npm
    repoLayout: npm-default
    repositories:
      - npm-remote-npmregistry
      - npm-remote-github
    description: Remotely fetched & cached NPM 3rd-party dependencies
    artifactoryRequestsCanRetrieveRemoteArtifacts: true
    externalDependencies:
      enabled: true
      remoteRepo: npm-remote-github
      patterns:
        - ""*//github.com/**""
        - ""*//*@github.com/**""
        - ""*//github.com:**""
        - ""*//*@github.com:**""
        - ""github:**""
        - ""github:**"" 
{code}
The referenced repositories all exist. The {{externalDepenencies.enabled}} and {{externalDependencies.patterns}} properties are set correctly. However, I receive the following error when the {{externalDependencies.remoteRepo}} property is defined:
{quote}Key ""externalDependencies"" is not part of the configuration
{quote}
Commenting out the {{remoteRepo}} line from the YAML leads to success, but then there's no way to set the target remote repo using YAML configuration that I can find. The remote repo can be selected in the UI and saved, and then shows up in the configuration XML under the {{<remoteRepo>}} element, but this does not appear to be valid for YAML.

The Artifactory YAML configuration documentation example states this:
{code:java}
externalDependencies:  #Only for npm repositories. External dependencies configuration.
      enabled: false   #When set, depenency rewrite for the specified npm repository will be enabled
      patterns:   #Optional include patterns to match external dependencies. Ant-style path expressions are supported (*, **, ?). For example, specifying **/github.com/** will only allow external dependencies from github.com host
        - ""**/github.com/**""
{code}
But it is also missing any documented way to _actually_ specify ""the specified npm repository"".

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3quo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Set Me Up"" defaults to wrong repository [Maven - Generate settings]",RTFACT-22798,104416,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yuvarajanj,yuvarajanj,07/Jul/20 6:57 PM,10/Feb/21 8:14 AM,18/Feb/21 8:59 AM,,6.12.2,7.6.1,,,,,,,,,,,,,1,,,,,,"{color:#00875a}+*Problem statement*+{color}
While generating maven settings for a particular virtual maven repository, by default, the Releases, Snapshots, Plugin Releases and Plugin Snapshots repositories are automatically being picked up with the repositories that are not actually a part of the virtual repository initially being opted.

+{color:#00875a}*Steps to reproduce*{color}+
1. create a maven virtual repository (virtual-repo1) that includes a local release and local snapshot repository)
2. create another maven virtual repository (virtual-repo2) that includes another set of local release and snapshot repository)
3. Navigate to the virtual-repo1 from the Artifact repository browser and use the Set Me Up option to generate the Maven settings
4. Select the virtual-repo1 under the Set Me Up page and click on Generate Settings. (attached screenshot for reference - virtual-repo1.png)
5. observe that different repositories are being picked up by default apart from those which are part of the virtual repository selected. (attached screenshot for reference - repositories selected by default.png)

*+{color:#00875a}Expected behaviour:{color}+*
While generating settings for a particular maven virtual repository, it is expected that Releases, Snapshots, Plugin Releases and Plugin Snapshots boxes are populated with the repositories that are part of the virtual repository selected.",,,,,,,,,,,,,,,,,,,"07/Jul/20 6:58 PM;yuvarajanj;repositories selected by default.png;https://www.jfrog.com/jira/secure/attachment/43724/repositories+selected+by+default.png","07/Jul/20 6:58 PM;yuvarajanj;virtual-repo1.png;https://www.jfrog.com/jira/secure/attachment/43725/virtual-repo1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3qsg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget resolves dependencies slowly,RTFACT-22796,104397,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,asavanchuk,asavanchuk,07/Jul/20 4:13 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.16.2,,,,,,,NuGet,,,,,,,1,,,,,,"Hello.

We use Nuget repo hosted in Artifactory. Recently, we changed our own Nuget packages to download necessary dependencies by putting them in nuspec files, building a tree of dependencies.

 

Like

<dependency id=""Aras...."" version=""a"" />
 <dependency id=""Selenium.WebDriver.ChromeDriver"" version=""x"" />
 <dependency id=""Selenium.WebDriver.GeckoDriver"" version=""y"" />
 <dependency id=""Selenium.WebDriver.MSEdgeDriver"" version=""z"" />
 <dependency id=""Selenium.InternetExplorer.WebDriver"" version=""d"" />
 <dependency id=""NUnit.ConsoleRunner"" version=""3.10.0"" />

 

After we changed this, downloading such packages led to huge Artifactory Nuget slowness, and not only with downloading these packages, but with downloading any package that has dependencies. Here we try to download NUnit.Console.

 

 [https://imgur.com/a/lYr0vT6]

 

Also, we see that because of this Artifactory RAM get's swallowed

[https://imgur.com/a/HFsx7ul]

  ",Windows Server 2016 and Nginx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3qpc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Aug/20 5:38 PM;asavanchuk;The issue was resolved for us with the update to 7.5.7.",,,,,,,,,,
Build promotion fails without build delete permission ,RTFACT-22764,104293,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaniat,shaniat,07/Jul/20 11:41 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Build promotion does not require DELETE permission but when promoting the build (move) with a user that don't have DELETE permissions it fails with:

+Jenkins console.log:+
""User doesn't have permissions to move 'libs-snapshot-local:ArtifactoryPipeline.zip'. Needs delete permissions.""


Steps to reproduce:

1. Grant a regular Artifactory user the following permission set:
  For: All builds, relevant artifact repository
  Artifacts: Read, Annotate, Write 
  Builds: Read, Annotate, Write (not delete)
2. Use our[ git promotion-example|https://github.com/jfrog/project-examples/tree/master/jenkins-examples/pipeline-examples/scripted-examples/promotion-example]
3. Attempt to promote the build 
4. Encounter the above error

was tested with Artifactory 6.11.3, 6.20.1, 7.6.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3q4g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"07/Jul/20 12:07 PM;yuvalr;That's not a bug.

The previous issue RTFACT-18781 dealt with _*Build permission*_ - you don't need _*Build:Delete*_ permission in order to promote +a build+.

The issue encountered here is a _*Repository permission*_ configuration issue.

User performing the promotion should have a _*Repository:Delete*_ permission if as part of promotion it tries to move +an Artifact+ from path to path.",,,,,,,,,,
Artifactory incorrectly converts special characters in artifacts names and these files don't get imported as the result,RTFACT-22714,104041,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nikp,nikp,06/Jul/20 8:05 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Customer experienced this issue when doing system export - system import from the old production artifactory to the new instance. The file name is ""Passenger Domain–PNR-DataCentersSyncJob-DeploymentInstruction.docx"" but we can see that artifactory converts one of the dashes in the file name to ""?"" sign, and as the result, this file wasn't imported.

I'm attaching the file itself to this message. This is a Gradle repository. 

According to the customer, the issue makes them not trust the system import.

!2 (4).png|width=647,height=173!",,,,,,,,,,,,,,,,,,,"06/Jul/20 7:59 PM;nikp;2 (4).png;https://www.jfrog.com/jira/secure/attachment/43712/2+%284%29.png","06/Jul/20 8:00 PM;nikp;Passenger Domain–PNR-DataCentersSyncJob-DeploymentInstruction.docx;https://www.jfrog.com/jira/secure/attachment/43710/Passenger+Domain%E2%80%93PNR-DataCentersSyncJob-DeploymentInstruction.docx","06/Jul/20 8:00 PM;nikp;Passenger Domain–PNR-DataCentersSyncJob-DeploymentInstruction.docx;https://www.jfrog.com/jira/secure/attachment/43711/Passenger+Domain%E2%80%93PNR-DataCentersSyncJob-DeploymentInstruction.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3olk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Issue with upgrading PRO version from 5.3.1 to 5.4.1,RTFACT-22704,103960,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,koithara,koithara,06/Jul/20 2:24 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I am trying to upgrade from 5.3.1 to 5.4.1 and it is showing me issues with access. Instructions I am following to perform this are:

## take backup
mv artifactory/bin /appl/backup/531/
mv artifactory/tomcat /appl/backup/531/
mv artifactory/misc /appl/backup/531/
mv artifactory/webapps/* /appl/backup/531/
cp -prf /etc/opt/jfrog/artifactory /appl/backup/531/etc

## restore files
cp -prf /appl/backup/artifactory-pro-5.4.1/tomcat artifactory/
cp -prf /appl/backup/artifactory-pro-5.4.1/bin artifactory/
cp -prf /appl/backup/artifactory-pro-5.4.1/misc artifactory/
cp -prf /appl/backup/artifactory-pro-5.4.1/webapps/* artifactory/webapps/
cp -prf /appl/backup/531/tomcat/lib/mysql* artifactory/tomcat/lib/

## run upgrade scripts
cd artifactory/
sh bin/installService.sh

## start artifactory
service artifactory start

 

{color:#FF0000}+*ERROR*+{color}

Jul 06, 2020 7:21:16 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deployment of configuration descriptor /appl/artifactory/tomcat/conf/Catalina/localhost/artifactory.xml has finished in 42,816 ms
2020-07-06 07:21:16,361 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:433) - Artifactory application context set to NOT READY by refresh
2020-07-06 07:21:16,362 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:213) - Refreshing Artifactory: startup date [Mon Jul 06 07:21:16 PDT 2020]; root of context hierarchy
2020-07-06 07:21:20,357 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:188) - Database: MySQL 5.6.39-log. Driver: MySQL Connector/J mysql-connector-java-8.0.11 (Revision: 6d4eaa273bc181b4cf1c8ad0821a2227f
116fedf)
2020-07-06 07:21:20,358 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:190) - Connection URL: jdbc:mysql://sk-art.cynukb4p4piu.us-west-2.rds.amazonaws.com:3306/jfrogartifactory?characterEncoding=UTF-8&eli
deSetAutoCommits=true
2020-07-06 07:21:21,087 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'eventual, eventual-cluster, google-storage, hdfs, s3Old, s3, sharding, sharding-cluster, state-aware, a
zure-blob-storage' from jar:file:/appl/artifactory/tomcat/webapps/artifactory/WEB-INF/lib/artifactory-addon-filestore-5.4.1.jar!/
2020-07-06 07:21:21,090 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'blob' from jar:file:/appl/artifactory/tomcat/webapps/artifactory/WEB-INF/lib/artifactory-storage-db-5.4
.1.jar!/
2020-07-06 07:21:21,093 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'remote' from jar:file:/appl/artifactory/tomcat/webapps/artifactory/WEB-INF/lib/binary-store-client-2.0.
13.jar!/
2020-07-06 07:21:21,099 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'empty, external-file, external-wrapper, file-system, cache-fs, retry' from jar:file:/appl/artifactory/t
omcat/webapps/artifactory/WEB-INF/lib/binary-store-core-2.0.13.jar!/
2020-07-06 07:21:26,211 [art-init] [INFO ] (o.a.s.ArtifactorySchedulerFactoryBean:647) - Starting Quartz Scheduler now
2020-07-06 07:21:26,313 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:220) - Artifactory context starting up 48 Spring Beans...
2020-07-06 07:21:33,973 [localhost-startStop-1] [JFrog-Access] [INFO ] (o.j.a.c.AccessApplicationContextInitializer:46) - Using JFrog Access home at '/appl/artifactory/access'
Jul 06, 2020 7:21:38 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler [""http-nio-8081""]
Jul 06, 2020 7:21:38 AM org.apache.coyote.AbstractProtocol init
SEVERE: Failed to initialize end point associated with ProtocolHandler [""http-nio-8081""]
java.net.BindException: Address already in use
 at sun.nio.ch.Net.bind0(Native Method)
 at sun.nio.ch.Net.bind(Net.java:433)
 at sun.nio.ch.Net.bind(Net.java:425)
 at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)
 at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
 at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:351)
 at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:810)
 at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:476)
 at org.apache.coyote.http11.AbstractHttp11JsseProtocol.init(AbstractHttp11JsseProtocol.java:120)
 at org.apache.catalina.connector.Connector.initInternal(Connector.java:960)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.core.StandardService.initInternal(StandardService.java:568)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:871)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:580)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:603)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:310)
 at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:484)

Jul 06, 2020 7:21:38 AM org.apache.catalina.core.StandardService initInternal
SEVERE: Failed to initialize connector [Connector[HTTP/1.1-8081]]

org.apache.catalina.LifecycleException: Failed to initialize component [Connector[HTTP/1.1-8081]]
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)
 at org.apache.catalina.core.StandardService.initInternal(StandardService.java:568)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:871)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:580)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:603)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:310)
 at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:484)
Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
 at org.apache.catalina.connector.Connector.initInternal(Connector.java:962)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 ... 12 more
Caused by: java.net.BindException: Address already in use
 at sun.nio.ch.Net.bind0(Native Method)
 at sun.nio.ch.Net.bind(Net.java:433)
 at sun.nio.ch.Net.bind(Net.java:425)
 at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)
 at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
 at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:351)
 at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:810)
 at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:476)
 at org.apache.coyote.http11.AbstractHttp11JsseProtocol.init(AbstractHttp11JsseProtocol.java:120)
 at org.apache.catalina.connector.Connector.initInternal(Connector.java:960)
 ... 13 more

Jul 06, 2020 7:21:38 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler [""ajp-nio-8019""]
Jul 06, 2020 7:21:38 AM org.apache.coyote.AbstractProtocol init
SEVERE: Failed to initialize end point associated with ProtocolHandler [""ajp-nio-8019""]
java.net.BindException: Address already in use
 at sun.nio.ch.Net.bind0(Native Method)
 at sun.nio.ch.Net.bind(Net.java:433)
 at sun.nio.ch.Net.bind(Net.java:425)
 at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)
 at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
 at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:351)
 at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:810)
 at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:476)
 at org.apache.catalina.connector.Connector.initInternal(Connector.java:960)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.core.StandardService.initInternal(StandardService.java:568)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:871)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:580)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:603)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:310)
 at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:484)

Jul 06, 2020 7:21:38 AM org.apache.catalina.core.StandardService initInternal
SEVERE: Failed to initialize connector [Connector[AJP/1.3-8019]]
org.apache.catalina.LifecycleException: Failed to initialize component [Connector[AJP/1.3-8019]]
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)
 at org.apache.catalina.core.StandardService.initInternal(StandardService.java:568)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:871)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:580)
 at org.apache.catalina.startup.Catalina.load(Catalina.java:603)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:310)
 at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:484)
Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
 at org.apache.catalina.connector.Connector.initInternal(Connector.java:962)
 at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
 ... 12 more

Caused by: java.net.BindException: Address already in use
 at sun.nio.ch.Net.bind0(Native Method)
 at sun.nio.ch.Net.bind(Net.java:433)
 at sun.nio.ch.Net.bind(Net.java:425)
 at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)
 at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
 at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:351)
 at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:810)
 at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:476)
 at org.apache.catalina.connector.Connector.initInternal(Connector.java:960)
 ... 13 more

Jul 06, 2020 7:21:38 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jul 06, 2020 7:21:38 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/8.0.41
Jul 06, 2020 7:21:38 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /appl/artifactory/tomcat/conf/Catalina/localhost/access.xml
Jul 06, 2020 7:21:38 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor /appl/artifactory/tomcat/conf/Catalina/localhost/artifactory.xml
07:21:39.641 [localhost-startStop-2] DEBUG o.a.converter.VersionProviderImpl - Last Artifactory database version is: v541
07:21:39.645 [localhost-startStop-2] INFO o.a.converter.ConvertersManagerImpl - Triggering PRE_INIT conversion, from v541 to v541
07:21:39.692 [localhost-startStop-2] INFO o.a.converter.ConvertersManagerImpl - Finished PRE_INIT conversion, current version is: v541
Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
07:21:40.317 [localhost-startStop-2] DEBUG o.a.converter.VersionProviderImpl - Last Artifactory database version is: v541
07:21:40.336 [Thread-3] INFO o.a.c.c.watch.FileWatchingManager - Starting watch of folder configurations
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] End modify on local server='413f24a9d32566e7:706366e6:1732480fa11:-8000' config='db.properties'
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Received file changed event but file is same as in the DB
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] End modify on local server='413f24a9d32566e7:706366e6:1732480fa11:-8000' config='artifactory.system.properties'
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Received file changed event but file is same as in the DB
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] End modify on local server='413f24a9d32566e7:706366e6:1732480fa11:-8000' config='artifactory.mimeType'
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Received file changed event but file is same as in the DB
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] End modify on local server='413f24a9d32566e7:706366e6:1732480fa11:-8000' config='artifactory.binarystore.xml'
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Received file changed event but file is same as in the DB
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] End modify on local server='413f24a9d32566e7:706366e6:1732480fa11:-8000' config='artifactory.security.access/keys/access.creds'
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Received file changed event but file is same as in the DB
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] End modify on local server='413f24a9d32566e7:706366e6:1732480fa11:-8000' config='access.server.bundled.config'
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Received file changed event but file is same as in the DB
2020-07-06 07:21:40 [ARTIFACTORY] [INFO ] Starting Artifactory [artifactory.home=/appl/artifactory].
2020-07-06 07:21:53,959 [art-init] [INFO ] (o.a.s.a.ArtifactoryAccessClientConfigStore:472) - Using Access Server URL: http://localhost:8081/access (bundled) source: detected
2020-07-06 07:21:53,978 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:233) - Waiting for access server...
 /\
 / \ ___ ___ ___ ___ ___
 / /\ \ / __/ __/ _ \/ __/ __|
 / ____ \ (_| (_| __/\__ \__ \
 /_/ \_\___\___\___||___/___/
Access Version: 2.0.0
Access Revision: devel

 

Let me know if you need more. I am using mysql as database. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3o4g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Yum .xz compressed metadata will fail a virtual Yum's repository merge ,RTFACT-22697,103952,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,06/Jul/20 1:33 PM,10/Feb/21 8:22 AM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,Virtual Repositories,YUM,,,,,,0,,,,,,"*Workaround:*

Simply remove any remote which fetches .xz Yum compressed metadata files from an aggregating virtual repo.

*Steps to reproduce:*

1. Setup a local, remote & virtual RPM repositories.
2. Deploy any valid .RPM file to the local repository.
3. The remote repository has to be to:
https://nvidia.github.io/nvidia-docker/centos7/x86_64
4. Configure a YUM client to work against the virtual repository contains both above.
5. Do a ""Yum update"" from the yum client against the virtual repository.
6. Clean the Cache-FS.
7. Recalculate the metadata of the virtual RPM repository using:
curl -XPOST -uadmin:password1 ""localhost:8082/artifactory/api/yum/rpm?async=0""
8. You should encounter this error in the logs:
{code}
2020-06-30T15:55:59.360Z [jfrt ] [ERROR] [ca9c136d7fdbddf2] [.i.YumVirtualCalculatorImpl:85] [art-exec-7          ] - error writing yum virtual metadata for 'centos7-rpm-external/repodata/'
java.io.IOException: java.io.IOException: Error during merge of index: nvidia-rpm-docker-remote-cache/repodata/73204fb442071edfb26e5c051e38582c96e45d30418a9609b1249a5099405cbe66e18225f33c7626c8fec16c68e3fde7d9679689d6e130a13af61d9482d0c25a-primary.xml.xz: Given input stream could not be recognized as an archive stream
	at org.iostreams.streams.in.OutputToInputStream.checkForException(OutputToInputStream.java:170)
	at org.iostreams.streams.in.OutputToInputStream.read(OutputToInputStream.java:100)
	at java.base/java.io.InputStream.read(InputStream.java:205)
	at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2314)
	at org.apache.commons.io.IOUtils.copy(IOUtils.java:2270)
	at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2291)
	at org.artifactory.addon.yum.virtual.index.YumVirtualRepoMetadataWriter.writeMergedIndexToFileSystem(YumVirtualRepoMetadataWriter.java:161)
	at org.artifactory.addon.yum.virtual.index.YumVirtualRepoMetadataWriter.writeMetadata(YumVirtualRepoMetadataWriter.java:100)
	at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.writeYumVirtualMetadata(YumVirtualCalculatorImpl.java:82)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at 
{code}

",,,,,,,,,,,,,,,,RTFACT-22686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3o2w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Conan remote repos show content of local repos ,RTFACT-22696,103951,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,seb0,seb0,06/Jul/20 1:27 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,Artifactory,Conan,,,,,,1,,,,,,"I am running a self hosted artifactory 7.6.1.

I have 3 conan repositories configured, 2 remotes and 1 local. A virtual repo groups the 3 together.

remotes:
[https://api.bintray.com/conan/bincrafters/public-conan]
[https://conan.bintray.com|https://conan.bintray.com/]
 
When users are recovering conan artifacts from the local repository they appear in the 2 remotes repositories. As if the cache of the remote received a copy of the local content and is then considered as coming from the remote repo.
This is quite problematic as the remote repo are fully accessible while the local repo requiers authentication.
 
I have looked for similar issue without succes in artifactory tickets. It migth be as simple as a mis configuration of repos bug I could not find anything in the documentation.
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3o2o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Jul/20 1:39 PM;seb0;In red are the directory belonging to the local repo which appears on the remote. If I delete a remote then every time a user download something from the local repo it appears in the remote repo. I used the default setups when creating remote repos.

 

!image-2020-07-06-15-28-22-676.png!","12/Aug/20 6:55 PM;dan_wiegert;Our company is also experiencing this issue as well, we have local repos that are closed off permission wise to a handful of users, yet packages from these local repos constantly appear in the remote caches inevitably making the package available to everyone in the entire company. This needs to be fixed as it is annoying for cleanup and it is a security issue allowing secure packages to be available to everyone. I'll add that this is only an issue with Conan packages, not any other.","29/Oct/20 11:20 AM;axel3rd;{quote}
they appear in the 2 remotes repositories
{quote}

But it remote repository, there is only a {{index.json}} at the end of tree ? Isn't it ? In this case, seems duplicate of RTFACT-19640.",,,,,,,,
Android APKs are not *archive* indexed in Artifactory after Alpine APK support,RTFACT-22695,103950,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,06/Jul/20 1:24 PM,10/Feb/21 8:23 AM,18/Feb/21 8:59 AM,,7.6.0,,,,,,,Artifact Storage,,,,,,,0,,,,,,"The archive type/format of the Alpine APK is different then of an Android APK - which is simply zip.

Artifactory consider any APK file as an Alpine archive, and would fail indexing it with this error:

{code}
2020-07-06T10:41:08.111Z [jfrt ] [ERROR] [af30119a43b87b5c] [o.a.s.a.ArchiveIndexerImpl:162] [art-exec-22         ] - Failed to index 'generic-local:someapk.apk': Not in GZIP format
{code}

To reproduce simply upload an android APK and wait for the Archive indexer to run (primary node only). By default, it will run with an interval of 60 secs.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3o2g:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
A finalized obejct is locked in Tomcat startup on tests.,RTFACT-22690,103853,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omriz,omriz,06/Jul/20 8:20 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ni0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Emoji support MySQL and Nuget,RTFACT-22685,103701,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Maayana,Maayana,05/Jul/20 11:44 AM,10/Feb/21 8:28 AM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,,,,,,,,1,PB_Done,,,,,"+Problem desc:+

When attempting to cache a nuget package that contains emoji (an example of such is: log4net.2.0.8) Artifactory will cache the package wrongly, causing it to be corrupted. The client doesn't indicate on an issue but in Artifactory logs:

 

2020-07-05 11:06:49,761 [art-exec-4034] [INFO ] (o.j.r.n.NuGetWorkContext:68) - Indexing NuGet metadata for repo 'nuget-remote-cache' on path 'log4net.2.0.8.nupkg'2020-07-05 11:06:49,761 [art-exec-4034] [INFO ] (o.j.r.n.NuGetWorkContext:68) - Indexing NuGet metadata for repo 'nuget-remote-cache' on path 'log4net.2.0.8.nupkg'2020-07-05 11:06:49,786 [art-exec-4034] [INFO ] (o.j.r.n.NuGetWorkContext:88) - Finished writing Nuget metadata for repo nuget-remote-cache on path 'log4net.2.0.8.nupkg' at 1593947209786 ms2020-07-05 11:06:49,852 [art-exec-4034] [WARN ] (o.a.s.f.l.SessionLockEntry:132) - Mutable item 'nuget-remote-cache:log4net.2.0.8.nupkg' has local modifications that will be discarded.2020-07-05 11:06:49,867 [art-exec-4034] [ERROR] (o.a.s.a.AsyncAdvice :257) - Could not execute async method: 'public abstract void org.artifactory.addon.NuGetAddon.extractNuPkgInfo(org.artifactory.fs.FileInfo,org.artifactory.common.MutableStatusHolder,boolean)'.org.artifactory.storage.StorageException: *Failed to set properties on node: 400* at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.setProperties(DbPropertiesServiceImpl.java:203) at org.artifactory.storage.db.fs.model.DbMutableItem.save(DbMutableItem.java:298) at org.artifactory.storage.fs.lock.SessionLockEntry.save(SessionLockEntry.java:78) at org.artifactory.storage.db.fs.session.SqlStorageSession.save(SqlStorageSession.java:73) at org.artifactory.storage.db.fs.session.SqlStorageSession.beforeCommit(SqlStorageSession.java:132) at org.artifactory.storage.db.spring.SessionSynchronization.beforeCommit(SessionSynchronization.java:85) at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCommit(TransactionSynchronizationUtils.java:96) at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerBeforeCommit(AbstractPlatformTransactionManager.java:922) at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:730) at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714) at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:534) at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:305) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76) at org.artifactory.schedule.aop.AsyncAdvice.doInvoke(AsyncAdvice.java:329) at org.artifactory.schedule.aop.CompoundInvocation.proceed(CompoundInvocation.java:58) at org.artifactory.schedule.aop.AsyncAdvice.lambda$submit$1(AsyncAdvice.java:252) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)*Caused by: java.sql.SQLException: Incorrect string value: '\xC5\x99\xC3\xAD \xC4...' for column 'prop_value' at row 1 at* com.mysql.jdbc.SQLError.createSQLException(SQLError.java:998) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3847) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3783) at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2447) at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2594) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2545) at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1901) at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2113) at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2049) at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2034) at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229) at org.artifactory.storage.db.fs.dao.PropertiesDao.create(PropertiesDao.java:302) at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.updateProperties(DbPropertiesServiceImpl.java:220) at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.setProperties(DbPropertiesServiceImpl.java:193) ... 21 common frames omitted 

You can see that all nuget properties are missing from the package.

Expected behavior: either cache the package as expected or fail the client so the package won't be cached wrongly 

*Tested on Artifactory HA 6.18 with MySQL

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ml4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Discard from Stash does not work,RTFACT-22682,103624,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valeriyp,valeriyp,03/Jul/20 1:50 PM,10/Feb/21 8:44 AM,18/Feb/21 8:59 AM,,6.16.2,6.20.0,,,,,,,,,,,,,0,,,,,,"Using the Stash Results feature, when trying to discard results, they still present in the Stash Browser.

 

+*Steps to reproduce:*+
 # Artifactory 6.20.0/6.16.2 +*HA*+  (wasn't able to reproduce with Standalone)
 # push 2 docker images to Artifactory, eg docker push hello-world && docker push busybox
 # Search for docker images
 # Add the results (busybox and hello-world packages) to the Stash
 # Discard one of the results
 # Got successful response
 # Get back to the Stash Browser
 # Both artifacts are still present in the Stash Browser

**short clip attached",,,,,,,,,,,,,,,,,,,"03/Jul/20 1:48 PM;valeriyp;rep.mp4;https://www.jfrog.com/jira/secure/attachment/43606/rep.mp4",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3m3k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to configure remoteRepoLayoutRef on remote repositories over API,RTFACT-22679,103602,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Glen,Glen,03/Jul/20 10:30 AM,16/Feb/21 5:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,P1,,,,,"Using Artifactory Enterprise 6.17.1 HA.
Attempting to configure remote repositories via the API and am unable to configure the ""Remote Layout Mapping"" field.
When fetching repository details, using the API, ""remoteRepoLayoutRef"" is set to ""generate-if-absent"".
Using the API I can configure other fields, and they successfully update, however, remoteRepoLayoutRef remains unchanged.
I am unable to find a reference to ""remoteRepoLayoutRef"" in the documentation: https://www.jfrog.com/confluence/display/JFROG/Repository+Configuration+JSON#RepositoryConfigurationJSON-RemoteRepository
Is remoteRepoLayoutRef missing from the API?",Artifactory Enterprise 6.17.1 HA,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3lyo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Feb/21 5:27 PM;snirba;Possible Workaround:

Using PATCH request according to this Wiki: [https://www.jfrog.com/confluence/display/JFROG/Artifactory+YAML+Configuration]

The field that matches this configuration is “remoteRepoLayout” (this field is not listed on the Wiki page but tested and validated).

Example:

$ cat config.yml

remoteRepositories:

  nuget-remote:

    type: nuget

    url: https://www.nuget.org/

    repoLayout: nuget-default

    remoteRepoLayout: nuget-default

 

$ curl -u <username>:<password> -X PATCH ""http://localhost:8081/artifactory/api/system/configuration"" -H ""Content-Type: application/yaml"" -T config.yml",,,,,,,,,,
Can't install artifactory on non-x86 linux,RTFACT-22675,103525,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jbartley,jbartley,02/Jul/20 8:49 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,Artifactory,,,,,,,0,,,,,,"I've been happily using artifactory for many years now, dutifully taking updates as they came out from around the 2.x series up until the 6.x series.  Now I'm trying to take the 7.x upgrade and I'm finding it impossible.  I serve artifactory on a Linux host with a ppc64le architecture.  I quickly discovered that the distribution of artifactory-oss contains x86-specific binaries in the third-party directory, and I was able to overcome this by substituting ppc64le versions of java, xmllint, etc.  But then I encountered an error running the jf-router command.  I can't find source code for this anywhere so I have no ability to rebuild it for ppc64le myself.  It appears to be go code so it shouldn't be a hard port.

Please either make available ppc64le flavors of your binary tarballs or provide access to at least the source code required to rebuild such components as jf-router and whatever else I haven't discovered because I haven't been able to get that far.

 

On the whole I've been very happy with artifactory but if I will no longer be able to run it on the platform I have available, then I'll have to migrate to something else, probably nexus.",Linux on the ppc64le architecture. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3lhs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Without license events/domains returns empty list,RTFACT-22672,103501,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Tomiot,Tomiot,02/Jul/20 1:39 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The api {{api/events/domains}} return status code 200 with an empty list when Artifactory doesn't have a license. 

I don't know what the standard response for features that are not available because of license issues, but it might be better to have a 404 or 403 response instead of 200. The consumer receives 200 and will believe that their are no domains available where the ""real"" problem is that the license doesn't allow seeing the domains. 

This causes a problem for event service which tries to cache the Artifactory domains but ends up caching an empty list when a license isn't installed. If event received a proper error code, it could keep retrying to populate its cache.

For example without a license, the endpoint {{api/security/users}} returns:
{code}
HTTP/1.1 400 Bad Request{
    ""errors"": [
        {
            ""message"": ""This REST API is available only in Artifactory Pro (see: jfrog.com/artifactory/features). If you are already running Artifactory Pro please make sure your server is activated with a valid license key.\n"",
            ""status"": 400
        }
    ]
}
{code}
",,,,,,,,,,,,,,,,EVT-68,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3lcw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
automatic-release-fix,RTFACT-22662,103457,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avishayh,avishayh,02/Jul/20 7:54 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,automatic-release-fix,,,,,,,,,,,,RTFACT-21702,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3l3c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Download Plugin atlAllResponses doesn't override Content-Type,RTFACT-22658,103406,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tsquier,tsquier,01/Jul/20 7:24 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,User Plugins,,,,,,,0,,,,,,"According to the documentation for user plugins for download events:
{noformat}
altAllResponses { request, responseRepoPath ->
}
{noformat}
The documentation suggests you can add/replace response headers:
{noformat}
headers (java.util.Map<String,String>) - Map containing the extra headers to override or add if not exists to the response.
{noformat}
however it appears the header ""Content-Type"" cannot be overridden. This is important because in this same plugin you can rewrite the content stream, which may be of a different mimeType, i.e. zip to text. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3kso:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM's package.json has an extra slash in the tarball url,RTFACT-22657,103399,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,derekp,derekp,01/Jul/20 6:00 PM,10/Feb/21 8:53 AM,18/Feb/21 8:59 AM,,7.6.1,,,,,,,Indexer,NPM,,,,,,0,,,,,,"*Problem description:*

When uploading an npm package to a local npm repository the pacakge.json that is generated contains an extra slash in the tarball URL.

  !packageJSONTarballExtraSlash.png|width=682,height=464!

*What is the expected behavior?***

**The package.json's tarball's URL should not contain an extra slash (i.e. before the repository name, npm-local).

*Steps to reproduce:* ** 

 
 # Have an npm project. (I used the one from [https://github.com/jfrog/project-examples] as an example for this issue.)
 # Have a build publish it to an npm local repository
 # Navigate to the local repository and view its package.json
 # Observe the extra slash in the tarball URL

*Possible workaround:***

Manually going into every package.json and editing it.

*Was that reproduced on GCP machine/mill?* yes**",,,,,,,,,,,,,,,,RTFACT-11987,RTFACT-15797,,"01/Jul/20 5:48 PM;derekp;packageJSONTarballExtraSlash.png;https://www.jfrog.com/jira/secure/attachment/43549/packageJSONTarballExtraSlash.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3kr4:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
When copying the repository contact from one repo to another the repository properties will be deleted,RTFACT-22651,103359,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,01/Jul/20 12:56 PM,10/Feb/21 8:59 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Problem description: Today when we are trying to move the contact from one repository to another the original repositories properties will disappear as you can see in the following gif:

 !WpKGgTbTZb.gif! 

As you can see in the gif the properties disappear from both repos 'batel' and 'batel-prod'
 
What is the expected behavior? To keep the properties 

Steps to reproduce: 

1. Create two repositories (for example Repo-A and Repo-B
2. Upload a file for Repo-A 
3. Add properties for Repo-A
4. Move the content from Repo-A to Repo-B
5. Check the properties on Repo-A and Repo-B



",,,,,,,,,,,,,,,,,,,"01/Jul/20 12:57 PM;batelt;WpKGgTbTZb.gif;https://www.jfrog.com/jira/secure/attachment/43537/WpKGgTbTZb.gif",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3kio:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
security.<timetstamp>.xml file is being synced between nodes after upgrade upon Artifactory start process,RTFACT-22649,103317,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,01/Jul/20 10:06 AM,10/Feb/21 9:23 AM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,HA,,,,,,,1,,,,,,"On HA environment there are unnecessary backup files that are being synced after upgrade to 7.x and should be excluded, for example security.<timestamp>.xml is not excluded. 

2020-06-28T06:07:16.737Z [jfrt ] [DEBUG] [32832f42cd7662ed] [o.j.c.ConfigWrapperImpl:336   ] [ocalhost-startStop-1] - Start modify on local server='artdb-0'  config='artifactory/config/security.20200525T105006.xml'

The impact: 
Artifactory will try to *decrypt* the files and in case the backups contains a lot of information it will take time.
This creates an issue since services like the router will give up after a short time (the default timeout of the Router service registry against Access is 15 seconds).

Steps to reproduce:
1. Configure an HA on 7.x
2. Create a security.<timestamp>.xml that contains a lot of information.
3. Start the primary node

Here is the thread dumps when Artifactory ""hangs"" upon start:

{code:java}
""localhost-startStop-1"" #18 daemon prio=5 os_prio=0 cpu=12673.75ms elapsed=13.56s tid=0x00007f4d20006800 nid=0x4be7 runnable  [0x00007f4d37cb5000]
java.lang.Thread.State: RUNNABLE
at org.jfrog.security.crypto.JFrogBase58.divmod256(JFrogBase58.java:301)
at org.jfrog.security.crypto.JFrogBase58.decode(JFrogBase58.java:265)
at org.jfrog.security.crypto.DotParts.getPayload(DotParts.java:59)
at org.jfrog.security.crypto.JFrogEnvelop.isGoodChecksum(JFrogEnvelop.java:42)
at org.jfrog.security.crypto.EncryptionWrapperBase.decryptIfNeeded(EncryptionWrapperBase.java:83)
at org.jfrog.config.db.ConfigsDao.decryptConfigIfNeeded(ConfigsDao.java:245)
at org.jfrog.config.db.ConfigsDao.getConfigContent(ConfigsDao.java:225)
at org.jfrog.config.db.ConfigsDao.getConfigs(ConfigsDao.java:100)
at org.jfrog.config.ConfigurationManagerImpl.registerConfigsFromDB(ConfigurationManagerImpl.java:158)
at org.jfrog.config.ConfigurationManagerImpl.initSharedFolders(ConfigurationManagerImpl.java:150)
at org.jfrog.config.ConfigurationManagerImpl.startSync(ConfigurationManagerImpl.java:108)
at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager.convertAndInit(PostDbSchemaInitializationManager.java:67)
at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager$$Lambda$311/0x0000000100591040.run(Unknown Source)
at org.artifactory.lifecycle.storage.db.init.HaInitLock.runInsideInitLockIfNeeded(HaInitLock.java:81)
at org.artifactory.lifecycle.storage.db.init.PostDbSchemaInitializationManager.init(PostDbSchemaInitializationManager.java:50)
at org.artifactory.lifecycle.webapp.servlet.BasicConfigurationManager.initArtifactoryInstallation(BasicConfigurationManager.java:141)
at org.artifactory.lifecycle.webapp.servlet.BasicConfigurationManager.initialize(BasicConfigurationManager.java:125)
at org.artifactory.lifecycle.webapp.servlet.ArtifactoryHomeConfigListener.contextInitialized(ArtifactoryHomeConfigListener.java:57)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4697)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5163)
- locked <0x0000000080083af8> (a org.apache.catalina.core.StandardContext)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
- locked <0x0000000080083af8> (a org.apache.catalina.core.StandardContext)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:743)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:719)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:614)
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1822)
at java.util.concurrent.Executors$RunnableAdapter.call(java.base@11.0.6/Executors.java:515)
at java.util.concurrent.FutureTask.run(java.base@11.0.6/FutureTask.java:264)
at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.6/ThreadPoolExecutor.java:1128)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.6/ThreadPoolExecutor.java:628)
at java.lang.Thread.run(java.base@11.0.6/Thread.java:834)
{code}


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ka0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"01/Jul/20 2:05 PM;shaibz;The workaround is to move the files from the etc folder to another backup folder outside.",,,,,,,,,,
Concurrent Explode-Archive zip uploads with same name causes files to be overwritten,RTFACT-22644,103270,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,johnw,johnw,01/Jul/20 12:10 AM,10/Feb/21 9:01 AM,18/Feb/21 8:59 AM,,6.18.1,7.6.1,,,,,,,,,,,,,0,PB_Done,,,,,"When uploading two same name zips in a short period using Explode-Archive header, the zip file is overwritten causing the latest uploaded zip to exist in multiple locations.

*Action Performed*

Upload two zips simultaneously to different locations with the same name using Explode-Archive header.
{code:java}
curl -u username:password -H ""X-Explode-Archive:true"" -H ""Content-Type: application/zip"" -X PUT http://localhost:8082/artifactory/generic-local/test/artifact.zip -T npm-test.zip & curl -u username:password -H ""X-Explode-Archive:true"" -H ""Content-Type: application/zip"" -X PUT http://localhost:8082/artifactory/generic2-local/test/artifact.zip -T npm2-test.zip
{code}
npm-test.zip is being uploaded to generic-local/test/artifact.zip
npm2-test.zip is being uploaded to generic2-local/test/artifact.zip

*Expected Result*

Unzipped files uploaded in their respective location.

Contents of npm-test.zip exist in generic-local/test/
Contents of npm2-test.zip exist in generic2-local/test/

*Actual Result*

artifact.zip is overwritten at /opt/jfrog/artifactory/var/data/artifactory/tmp/artifactory-uploads/ causing only one extract to occur for both locations.

Contents of npm2-test.zip exist in generic-local/test/ and generic2-local/test/ 

Tested in 7.6.1, seen in customer env in 6.18.1

*Workaround*

Use separate naming schemas for uploads, stagger uploads, or do not use Explode-Archive.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3k14:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"CLONE - test""/><svg/onload=alert(document.domain)>",RTFACT-22635,103152,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,test123456789,abcdef123456,30/Jun/20 9:35 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,<svg/onload=alert(1)>,,,,,"[<svg/onload=alert(1)>|javascript:alert(4);][<svg/onload=alert(2)>|javascript:alert(3);]

TEST","[<svg/onload=alert(1)>|javascript:alert(4);][<svg/onload=alert(2)>|javascript:alert(3);]",,,,,,,,,RTFACT-22606,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3jeo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Create Date Update Date And Modified Date Of Docker Images Are Not Getting Updated After Docker Promotion ,RTFACT-22632,103122,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,30/Jun/20 5:29 AM,10/Feb/21 9:03 AM,18/Feb/21 8:59 AM,,6.20.0,,,,,,,,,,,,,,1,,,,,," Create Date/time, Update Date/time and Modified Date/time of Docker images in target Docker local repository are not getting updated +*after the promotion*+. This was noticed in v6.20. 

+*This issue is not present in v 6.17*+

 

Steps to reproduce:
 # Install Artifactory v6.20
 # Create *Docker-local* and *Docker-local2* repositories
 # Push any Docker image to *Docker-local2*
 # Promote Docker image using API, from *Docker-local2* To *Docker-local*
 # In *Docker-local*, select the manifest.json, or any layer of the image, and you will notice that the Create Date/time, Update Date/time and Modified Date/time are exactly the same as the one in *Docker-local2*. This was not the case with Artifactory v6.17

 

In some use cases, users pull images by the latest date in their builds, and having this scenario can potentially break user's builds, or users may end up pulling wrong images.

 

 

 

!1.jpg!  

 

 

 ",,,,,,,,,,,,,,,,,,,"30/Jun/20 5:46 AM;timt;1.jpg;https://www.jfrog.com/jira/secure/attachment/43496/1.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3j7k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Need to provide BASE URL for webhook callbacks,RTFACT-22625,103086,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,markg,markg,29/Jun/20 6:52 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,7.6.0,7.6.1,,,,,,,,,,,,,1,,,,,,"Need to provide the base URL so that a user can construct a URL to query REST API for more information regarding the event.

Use Case:  As a webhook consumer, I should be able to process the payload and construct a URL back to the source JPD to request more information based on the event.

Recommend it be placed in the ""wrapper"" payload. E.g. we have ""baseURL"" next to ""domain"" such as:
{
 ""baseURL"": ""https://internalsandbox.jfrog.io/""
 ""domain"": ""artifact"",
 ""event_type"": ""deployed"",
 ""data"": {
 ""repo_key"": ""sample_repo"",
 ""path"": ""aFolder/sampleFile.txt"",
 ""name"": ""sampleFile.txt"",
 ""sha256"": ""sha256"",
 ""size"": 1234
 }
}",,,,,,,,,,,,,,PTRENG-799,,RTFACT-22510,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3j0o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Users can see repositories name that are aggregated to a virtual repository when they don't have permissions to that repositories.,RTFACT-22620,102905,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,hanank,hanank,28/Jun/20 8:43 AM,10/Feb/21 9:13 AM,18/Feb/21 8:59 AM,,,,,,,,,UI,Virtual Repositories,,,,,,0,,,,,,"If a user has permission to one of the repositories that are aggregated to a virtual repository he will be able to see repositories that he does not have permission to under the ""Included Repositories"" section under the General details of the virtual repository in Artifactory UI.

Steps to reproduce:
 # Creat 3  local repositories: For example Repo-a, Repo-b and Global.
 # Create a Virtual Repository that aggregates Repo-a and Global.
 # Create a user and grant him permissions only for Repo-b and Global.
 # Log in with that user and you will be able to see Repo-a name in The ""included Repositories"" under General details of the virtual repository.

!Artifacts.png!

 

 ",,,,,,,,,,,,,,,,,,,"28/Jun/20 8:36 AM;hanank;Artifacts.png;https://www.jfrog.com/jira/secure/attachment/43425/Artifacts.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3hy0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory JMX Mbeans for HTTP Connection Pool needs to be fixed for docker remote repository,RTFACT-22619,102884,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,27/Jun/20 4:21 AM,10/Feb/21 9:16 AM,18/Feb/21 8:59 AM,,6.19.1,,,,,,,,,,,,,,0,,,,,," 

For remote docker repository, Max value of Http connection pool shows only 2 even though artifactory.http.client.max.connections.per.route is 50.

!ecr-remote-metrics_png.png|thumbnail!

Expecting result should be 50. 

It seems that the Max value is coming from artifactory.http.client.max.docker.token.connections (default 2)",,,,,,,,,,,,,,,,,,,"27/Jun/20 4:21 AM;davids;ecr-remote-metrics_png.png;https://www.jfrog.com/jira/secure/attachment/43422/ecr-remote-metrics_png.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3htc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Spelling Error in 'Watch' Screen ,RTFACT-22616,102864,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vijayc,vijayc,26/Jun/20 1:53 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,7.5.7,,,,,,,,,,,,,,0,,,,,,"A minor spelling error 'Serverity', should be Severity",,,,,,,,,,,,,,,,,,,"26/Jun/20 1:52 PM;vijayc;Screen Shot 2020-06-26 at 9.48.34 AM.png;https://www.jfrog.com/jira/secure/attachment/43418/Screen+Shot+2020-06-26+at+9.48.34+AM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3how:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory stops sending events for indexing to Xray,RTFACT-22614,102850,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,25/Jun/20 10:25 PM,10/Feb/21 9:19 AM,18/Feb/21 8:59 AM,,7.4.0,,,,,,,,,,,,,,0,,,,,,"Problem description: 
Xray does not index Artifacts. Checking the Xray logs, you'll see no indexing related logging occur - this is because before Xray is able to download and index artifacts, it needs to receive the event that tells it to do so; this is sent from Artifactory. In this JIRA, what we see is that Artifactory does not seem to send these events over.

What is the expected behavior? 
Artifactory to send events (and Xray to index artifacts after)

Steps to reproduce: 
*Unfortunately, quite a rare occurrence. Have not been able to reproduce this scenario.* Will try to gather thread dumps next it happens. Seen in 6.x and 7.x + 2.x, 3,x. Does not appear to be tied to a specific version. Happens on SaaS too.

Possible workaround:
Restart Artifactory

Logs (these logs are from 2018 - but we have seen this issue happen in *version 7* (saas) with near identical logging):
Artifactory Debug logs for Xray
Our log - normal logs, it creates events, then sends them:

2018-07-16 01:37:16,173 [art-exec-8] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:217) - Event request for docker-local:busybox/1.0.0/manifest.json. isRepoXrayEnabled: true, isArtifactSupportedByXray: true. Event will be created: true
2018-07-16 01:37:16,173 [art-exec-12] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:223) - Xray Event creation request for: docker-local/busybox/latest/manifest.json. Event type: created
...
2018-07-16 01:37:16,177 [art-exec-10] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:217) - Event request for docker-local:busybox/2/manifest.json. isRepoXrayEnabled: true, isArtifactSupportedByXray: true. Event will be created: true
2018-07-16 01:37:16,179 [art-exec-14] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:217) - Event request for docker-local:busybox/latest/sha256__07a152489297fc2bca20be96fab3527ceac5668328a30fd543a160cd689ee548. isRepoXrayEnabled: true, isArtifactSupportedByXray: false. Event will be created: false
2018-07-16 01:38:07,156 [art-exec-6] [TRACE] (o.a.a.x.XrayServiceImpl:236) - Xray server status - alive: true, version valid: true
2018-07-16 01:38:07,157 [art-exec-6] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:182) - Should stop: false. Conditions: contextNotReady: false, taskPausedOrBreak: false, xrayDisabled: false, xrayDeadOrInvalidVersion: false
2018-07-16 01:38:07,157 [art-exec-6] [DEBUG] (o.a.a.x.i.XrayEventHandlerImpl:154) - Processing 5 events <----------------------- Missing 
2018-07-16 01:38:07,157 [art-exec-6] [TRACE] (o.a.a.x.XrayServiceImpl:236) - Xray server status - alive: true, version valid: true
2018-07-16 01:38:07,157 [art-exec-6] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:182) - Should stop: false. Conditions: contextNotReady: false, taskPausedOrBreak: false, xrayDisabled: false, xrayDeadOrInvalidVersion: false
...
2018-07-16 01:38:07,257 [art-exec-6] [TRACE] (o.a.a.x.XrayServiceImpl:236) - Xray server status - alive: true, version valid: true
2018-07-16 01:38:07,257 [art-exec-6] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:182) - Should stop: false. Conditions: contextNotReady: false, taskPausedOrBreak: false, xrayDisabled: false, xrayDeadOrInvalidVersion: false
2018-07-16 01:38:07,269 [art-exec-6] [DEBUG] (o.a.a.x.i.XrayEventHandlerImpl:168) - Finished processing 5 events <----------------------- Missing 

bad log - it create events, then nothing happens until you restart Artifactory. We waited for over 30 minutes on a non busy Artifactory:
__manifest_sha2/sha256__path3. Event type: created
2018-07-10 16:12:56,218 [art-exec-2198] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:223) - Xray Event creation request for: xray-docker/image/name/sha256__e228d9c96d180ed7fdf537d0da497dc8e845d16ad81a75960210afd436ec921f/sha256__path2. Event type: created
2018-07-10 16:12:56,318 [art-exec-2228] [TRACE] (o.a.a.x.i.XrayEventHandlerImpl:217) - Event request for xray-docker:image/name/sha256__path3/manifest.json. isRepoXrayEnabled: true, isArtifactSupportedByXray: true. Event will be created: true 
(no further logs logs after this... it does not seem to process anything)

Xray will have no logs, or anything in the queues, as the event never leaves Artifactory to get processed by Xray.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3hm0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Storage event user plugin is not usable with NPM repositories,RTFACT-22613,102844,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,NetAppBlueDevil,NetAppBlueDevil,25/Jun/20 7:50 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.9.6,,,,,,,User Plugins,,,,,,,0,npm,plugin,,,,"This is probably some level of a design bug

 

I’m building a plugin to create a namespace within an NPM repository.

I have done this successfully for Docker, Helm and GO type repositories to date. The implementation is based on knowing the path of the artifact the user is attempting to write and being able to know the user id and groups (obtained via LDAP) that the user is in. I know that this could be managed with permissions and include/exclude paths in Artifactory, but with the use of about a page full of plugin logic I can eliminate artifactory admin work and have this be self services to users who can simply join LDAP groups to be part of different teams in the namespace hierarchy. This approach was suggested by a JFrog implmementation engineer based on this github example (which I think no longer exists, but noting because perhaps you still have it internally) https://github.com/JFrogDev/artifactory-user-plugins/security/sandboxPermissions/sandboxPermissions.groovy

However, this approach is not working with NPM.

The TL;DR of my request is that in its current form, you cannot implement ANY type logic within this plugin for NPM repositories which might need to reject an upload. That is a problem with the usefulness of the storage event user plugin feature in the case of NPM repositories. The basic requirements that should apply across all repo types are:
 * All invocations of the storage event plugin MUST provide the context of the user ID that made the request that is causing this action to occur
 * All repository artifact deployment behaviors, must act atomically at least as regards a single incoming HTTP request even if such a request would cause the creation of multiple files within the repository. Either all or none of the files to be created due to that HTTP request should be the result
 * Any failure from the any of the multiple calls to the storage plugin which would occur in the context of a single incoming HTTP request must be able to handle and process a CancelException in support of the needed atomic behavior and must cause the HTTP request itself to return an error code to the user.
 *  The HTTP error to the user should not be a 500 level error as this should be handled as a possible and expected possibility by Artifactory, not an unhandled exception

What follows is the details of the currently behavior which demonstrate the issue and some minimal plugin implementations that you can use to verify my observations of the current behavior.

Here is the scenario of my script

When I use NPM or Yarn to publish a module, it invokes a single HTTP put command. See the below Yarn verbose output

{{verbose 6.323 Performing ""PUT"" request to ""http://repoproxy-dev.eng.netapp.com:8081/artifactory/api/npm/npm-virtual/@foobar%2ftestme2-index"".}}
{{ verbose 6.499 Request ""http://repoproxy-dev.eng.netapp.com:8081/artifactory/api/npm/npm-virtual/@foobar%2ftestme2-index"" finished with status code 201.}}
{{ success Published.}}

You can also see this in the Artifactory request log where this PUT is logged under the user ‘test’ that I used to login from the yarn client

{{20200623111155|156|REQUEST|10.231.176.52|test|PUT|/api/npm/npm-virtual/@foobar%2ftestme2-index|HTTP/1.1|201|2183}}

On the artifactory side, this invokes the plugin storage code twice under my current function. The first time it appears to be putting the package metadata into the repository, HOWEVER, as you can see from the debug logging I have in the plugin, this call occurs as an internal _system_ user, not as the user making the HTTP request. In my logic, any user with system privs is allowed to do anything, I have no method to know that this call to the plugin was in service of a specific user’s request

{{2020-06-23 11:11:55,123 [http-nio-8081-exec-2104] [INFO ] (o.j.r.n.r.h.NpmLocalRepoHandler:355) - Deploying npm package '@foobar/testme2-index/-/@foobar/testme2-index-0.1.4.tgz' into repo 'seclab-npm-local'}}
{{ 2020-06-23 11:11:55,187 [http-nio-8081-exec-2104] [DEBUG] (userNamespacesNpm :35) - userNamespacesNpm: repoPath seclab-npm-local:.npm/@foobar/testme2-index/@foobar/testme2-index-0.1.4.json}}
{{ 2020-06-23 11:11:55,188 [http-nio-8081-exec-2104] [DEBUG] (userNamespacesNpm :38) - userNamespacesNpm: User '_system_' is admin and permitted to create, modify, or delete to any namespace}}

Then my plugin is invoked again, this time to post the package tar/zip file. In this case, the user is provided to the plugin is the ‘test’ user making the request and my logic detects that “@foobar” is not an npm scope value that the test user is allowed to post (this is the call where the ‘directory’ level for the @foobar is created within the repo). Because this user is not allowed to publish under @foobal my plugin raises a CancelException and provides a 403 HTTP response code to the returned.


{{ 2020-06-23 11:11:55,211 [http-nio-8081-exec-2104] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'seclab-npm-local:@foobar/testme2-index/-/@foobar/testme2-index-0.1.4.tgz' Content-Length: unspecified}}
{{ 2020-06-23 11:11:55,247 [http-nio-8081-exec-2104] [DEBUG] (userNamespacesNpm :35) - userNamespacesNpm: repoPath seclab-npm-local:@foobar}}
{{ 2020-06-23 11:11:55,248 [http-nio-8081-exec-2104] [DEBUG] (userNamespacesNpm :45) - userNamespacesNpm: repoKey seclab-npm-local}}
{{ 2020-06-23 11:11:55,249 [http-nio-8081-exec-2104] [INFO ] (userNamespacesNpm :55) - userNamespacesNpm: User 'test' push/upload NOT allowed due to invalid domain}}
{{ 2020-06-23 11:11:55,251 [http-nio-8081-exec-2104] [ERROR] (o.a.r.i.s.StorageInterceptorsImpl:60) - Before create rejected: test push/upload NOT allowed due to invalid domain: test push/upload NOT allowed due to invalid domain}}
{{ 2020-06-23 11:11:55,252 [http-nio-8081-exec-2104] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 403: org.artifactory.exception.CancelException: test push/upload NOT allowed due to invalid domain}}{{Now, there are multiple problems when I hit this situation of a user posting a module which isn’t named in an allowable fashion or within a scope that user is allowed to use (another of my rules which doesn’t occur in this example)}}
{{ 1. The 403 CancelException that I throw from the plugin never flows back on the original HTTP request (you can see it is a 201 return), so the original npm/yarn client thinks the publish succeeded (see the yarn output I posted above)}}
{{ 2. The repo is left with a partial condition because the json metadata did get posted but the tgz file did not, so the module may appear to exist when it should not}}

These problems existing because of what I think are the following problems
 # The initial invocation to the storage user plugin with the request noted as being the _system_ user. This should not be the case. This is happening because of the test user request and is storing data from the test users HTTP put command. Because the user context is incorrent, I’m not able to use this plugin to validate the request as I need to
 # Maybe because of the first issue, but certainly a problem is that the 403 CancelException from the user plugin never returned error to the HTTP client. If the user issue on the first invocation were addressed that would help in that a cancel could be done then, but the cancel exception could occur on any invocation of the user plugin during handling of the HTTP request and it should error back to the original request.

Here is the simplified version of the plugins that will demonstrate the issue. The support person said that the use of the _system user on the metadata call was ""intended behavior as Artifactory is generating metadata on the package. This behavior was not seen with Docker, Helm, and GO because the metadata is generated by the package manager/cli, not by Artifactory.""

My assertion however is that this is insufficient if a user plugin is to have logic that is based on the user making the request to artifactory. With the first plugin example below you can see that if the CancelException is raised when the metadata invocation occurs as the _system_ user, Artifactory has internal exceptions and returns a 500 level code to the HTTP user. So, even in the current implementation, If the context of the requesting user was even available at that point, Artifactory would not properly handle the exception

At the end of the day, this behaviors I outlined mean that you cannot implement any type logic within this plugin for NPM repositories which might need to reject an upload. That is a problem with the usefulness of the user plugin feature in this case. I would like to have some type of feature issue raised here. The basic needs are
• All invocations of the storage event plugin MUST provide the context of the user ID that made the request that is causing this action to occur
• All repository artifact deployment behaviors, must act atomically at least as regards a single incoming HTTP request even if such a request would cause the creation of multiple files within the repository. Either all or none of the files to be created due to that HTTP request should be the result
• Any failure from the any of the multiple calls to the storage plugin which would occur in the context of a single incoming HTTP request must be able to handle and process a CancelException in support of the needed atomic behavior and must cause the HTTP request itself to return an error code to the user.
• The HTTP error to the user should not be a 500 level error as this should be handled as a possible and expected possibility by Artifactory, not an unhandled exception

 

Plugins – Replace the name of a local NPM repo in the checked. Then publish an npm package to the repository
The first basically will throw a CancelException on the first invocation of the plugin for the metadata, the second will do it on the second invocation or the tgz of the package.

=================================================================
import org.artifactory.exception.CancelException
import org.artifactory.repo.*

storage {
 beforeDelete { item ->
 verifyUserAuthorized(item.repoPath)
 }

beforeCreate { item ->
 verifyUserAuthorized(item.repoPath)
 }
}

def verifyUserAuthorized(RepoPath repoPath) {
 // PUT THE NAME OF ANY INTERNAL NPM REPOSITORY INTO THIS LIST
 def checkedRepositories = [""REPONAME""]
 def pluginName = ""userNamespacesNpmMetadataFail""

def user = security.getCurrentUsername()
 def repoKey = repoPath.repoKey
 
 log.debug(""{}: Called with user '{}'"", pluginName, user)
 log.debug(""{}: Called with repopath '{}'"", pluginName, repoPath)

if(repoKey in checkedRepositories) {
 // CAUSE THE PLUGIN TO FAIL ON THE FIRST INVOCATION WHICH WILL HAPPEN TO BE THE NPM METADATA INVOCATION AS SYSTEM USER
 throw new CancelException(""Plugin will not allow upload"", 403)
 }
}


=================================================================
import org.artifactory.exception.CancelException
import org.artifactory.repo.*

storage {
 beforeDelete { item ->
 verifyUserAuthorized(item.repoPath)
 }

beforeCreate { item ->
 verifyUserAuthorized(item.repoPath)
 }
}

def verifyUserAuthorized(RepoPath repoPath) {
 // PUT THE NAME OF ANY INTERNAL NPM REPOSITORY INTO THIS LIST
 def checkedRepositories = [""REPONAME""]
 def pluginName = ""userNamespacesNpmPackageFail""

def user = security.getCurrentUsername()
 def repoKey = repoPath.repoKey
 
 log.debug(""{}: Called with user '{}'"", pluginName, user)
 log.debug(""{}: Called with repopath '{}'"", pluginName, repoPath)

if (security.isAdmin()) {
 // RETURN IF USER HAS ADMIN LEVEL PERMISSIONS, THIS WILL MAKE THE NPM METADATA CALL BE OK
 return;
 }

if(repoKey in checkedRepositories) {
 // CAUSE THE PLUGIN TO FAIL ON THE FIRST INVOCATION AS HTTP REQUEST USER WHICH WILL BE THE TGZ FILE FOR THE MODULE
 throw new CancelException(""Plugin will not allow upload"", 403)
 }
}

 ",RHEL7 Linux,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3hko:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Jun/20 4:53 PM;NetAppBlueDevil;Also, to note that [https://www.jfrog.com/confluence/display/JFROG/User+Plugins] states

""The *Download*, *Storage*, *Execution* and *Build* plugin types are executed under the identity of the user request that triggered them.""

Which doesn't specifically appear to be happening in the case of NPM as described above.  One of the executions of the plugin in response to a user request is executed under the identity of _system_ user",,,,,,,,,,
The dropdown button becomes a text field on ‘Property Sets’,RTFACT-22610,102726,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,elimo,elimo,25/Jun/20 6:51 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.5.5,,,,,,,UI,,,,,,,0,,,,,,"On Artifactory’s UI, after setting a Property Sets according to our [wiki page|https://www.jfrog.com/confluence/display/JFROG/Property+Sets#PropertySets-AttachingandReadingPropertiesviaRESTAPI], when navigating to some repository, for example, “Conan”, the drop-down option on the “select value…” section is not working as expected.  


Screenshot Attached for example:


 

!image-2020-06-25-09-49-46-883.png!",,,,,,,,,,,,,,,,,,,"25/Jun/20 6:49 AM;elimo;image-2020-06-25-09-49-46-883.png;https://www.jfrog.com/jira/secure/attachment/43373/image-2020-06-25-09-49-46-883.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3gug:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Support pure v3-api servers,RTFACT-22607,102684,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,heiko.boettger,heiko.boettger,24/Jun/20 2:59 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,NuGet,,,,,,,1,PB_Done,,,,,"After a support request not getting our BaGet-Server to work with artifactory, it was confirmed that artifactory currently is unable to use servers purely offering nuget api v3 and have completely dropped support for the *deprecated* nuget api v2

See offical microsoft statement about deprecation at [https://docs.microsoft.com/en-us/nuget/nuget-org/overview-nuget-org#api-endpoint-for-nugetorg]

One cannot expect that BaGet will implement support for a deprecated api and artifactory needs to fix that anyway.

I suggest to also change the confusing part in the ui where you have to specify a v3-url to the index.json fullyqualified where are the v2-part is relative. The easiest way for artifactory would be to check if the server support v3-api and try to fallback only to v2-api if not supported. Artifactory itself could still offer a v2-api.",,,,,,,,,,,,,RTFACT-20645,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3glk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"24/Jun/20 3:00 PM;heiko.boettger;See support ticket: [#134025|https://support.jfrog.com/jFrogCasePage?id=5001r00002qV7bq]",,,,,,,,,,
"test""/><svg/onload=alert(document.domain)>",RTFACT-22606,102683,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,test123456789,test123456789,24/Jun/20 2:57 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,<svg/onload=alert(1)>,,,,,"[<svg/onload=alert(1)>|javascript:alert(4);][<svg/onload=alert(2)>|javascript:alert(3);]

TEST","[<svg/onload=alert(1)>|javascript:alert(4);][<svg/onload=alert(2)>|javascript:alert(3);]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3glc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"24/Jun/20 2:58 PM;test123456789;""><svg/onload=alert(2)>","24/Jun/20 2:58 PM;test123456789;<svg/onload=alert(3)>","24/Jun/20 2:59 PM;test123456789;test","24/Jun/20 3:07 PM;test123456789;test1",,,,,,,
"For external users (LDAP) generated settings.xml for maven is giving an incorrect ""encryptedPassword"" - results with 401",RTFACT-22602,102651,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yuvarajanj,yuvarajanj,24/Jun/20 12:15 PM,12/Feb/21 9:44 AM,18/Feb/21 8:59 AM,,7.3.2,7.4.3,7.5.5,7.5.8,7.6.3,,,,,,,,,,0,,,,,,"*+{color:#00875a}Problem Statement:{color}+*

While trying to generate settings.xml file with the LDAP user account, the encrypted password added to the file seems incorrect and returns 401. However, with the default admin account, encrypted password is being amended correctly and works fine.

+{color:#00875a}*Steps to reproduce:*{color}+

*Scenario 1: (While using admin account)*
 # Login in as admin user to Artifactory version 7.3.2 and create Maven repositories.
 # Generate the Maven settings using Set Me Up option available from the virtual repositories (For example, libs-release)
 # Use the Download snipper option to download the settings.xml file and try executing any Maven tasks with the settings.xml file from the local project. For example: *mvn deploy -s settings.xml*
 # Observe that the task is being executed successfully.

*Scenario 2: (While using LDAP accounts)*
 # Login in as LDAP user to Artifactory version 7.3.2
 # Generate the Maven settings using Set Me Up option available from the virtual repositories (For example, libs-release)
 # Use the Download snipper option to download the settings.xml file and try executing any Maven tasks with the settings.xml file from the local project. 
 # Observe that the task fails with a 401 Unauthorized error.

Upon evaluating the files generated using both accounts, I could observe the difference with the length of the encrypted password and suspecting that the password generated through LDAP account is incorrect.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ge8:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/21 9:44 AM;sebjm;I have seen the same issue, adding some additional info from my case:
* If a user has generated an API key, it gets populated in settings.xml and authentication works
* If a user pastes either the API key or hashed password from the profile settings into the settings.xml, authentication works
* Otherwise, the problems in the issue description arise",,,,,,,,,,
replication test button pings custom base url of destination server instead of the url configured in replication,RTFACT-22595,102574,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,itamarb,itamarb,24/Jun/20 5:28 AM,10/Feb/21 9:23 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"Steps to reproduce:
1. Install 2 instances
2. Instance B - set up dummy custom base URL i.e: http://test.com
3. Instance A - set up push replication from server A to B for the 'libs-release-local' repository i.e: ""http://server-b/artifactory/libs-release-local""
4. Click 'Test'

You can see that it tries to ping ""http://test.com/artifactory/libs-release-local"" instead of ""http://server-b/artifactory/libs-release-local""

Normally this would be ok, as the custom base url should be something that is accessible, but in a scenario where the custom base url is a geo-load balancer, similar to both instances, but redirecting traffic based on proximity to the server, this causes an issue, because even if you configure replication to a specific instance, the URL gets overridden with the custom base url and the ping fails because instance A is trying to ping itself, to a non-existent repository in instance A.

Notice that this affects only the test button, replication itself is unaffected.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3fy0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
xray picking up invalid package.json and identified wrong comp id,RTFACT-22594,102537,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,paulp,paulp,23/Jun/20 10:34 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"npm scans a public npm scope package but incorrectly identifies the package.

Example pacakge name is : @nestjs/schematics

Steps to reproduce 

1. setup npm registry and xray watch/police ( checking both cvs and license )
2. npm install @nestjs/schematics
3. Seeing unlicensed violation under the name <%= name %> :<%= version %>
4. Find nestjs/schematics in remote cache in artifactory, click ""view more details in xray"" to link to xray, the link is :
http://xray:8000/web/#/component/details/npm:~2F~2F%3C%=%20name%20%%3E
5. Try searching for npm package in xray component, you won't find it, but it has clearly been indexed and scanned. 

If we open the npm file , we can found package.json under schematics-master/src/lib/application/files/js/package.json which holds this wrong info: ""name"": """", ""version"": """", ""description"": """", ""author"": """", ""private"": true, ""license"": ""UNLICENSED"", and cause Xray identifying wrong comp id.

Xray should validate the package.json before indexing it. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3fps:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Jun/20 10:37 PM;paulp;wrong product",,,,,,,,,,
Issues on downgrading artifactory ,RTFACT-22593,102533,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,aditya.mantravadi,aditya.mantravadi,23/Jun/20 10:03 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.19.1,,,,,,,Artifactory,,,,,,,0,,,,,,"downgrading artifactory secondary node from 6.20.1 to 6.19.1for the issue https://www.jfrog.com/jira/browse/RTFACT-22591 

 Error ""
 2020-06-23 20:38:46,773 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Stopping Artifactory, couldn't start Artifactory upgrade, on slave node!
 Please run Artifactory upgrade on the master first!
 ""

I have downgraded Master node(primary) before secondary node and still get the error to run it on master first. ",,,,,,,,,,RTFACT-22591,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3fow:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Xray fails to get groups/permissions from User Plugins with additive realm policy,RTFACT-22574,102413,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kimsondrup,kimsondrup,22/Jun/20 11:15 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,7.5.8,,,,,,,User Plugins,Xray,,,,,,1,P1,PB_Done,,,,"*Problem description:*

Calls to JFrog Xray do not get groups added from realm User Plugin with the ADDITIVE realm policy resulting in users failing to get component info even if they should have permissions and producing 40X errors.

The issue is affecting packages search in the UI, testing access to JFrog Xray with the IDE plugin, showing JFrog Xray data in the JFrog UI for any repositories/builds, and Xray Rest API endpoints.

 

*What is the expected behavior?*

**A user added to a group in this manner should have access to Xray information if they have the proper permissions for those resources.
h1. Steps to reproduce

Create test user ""u-testauthn"" with no groups and no permissions
Create test group ""g-testauthn"" and give it read permissions to some repository

Add User Plugin with the following code
{code:java}
import org.artifactory.security.RealmPolicy
realms {
    roleAuthz([autoCreateUsers: false, realmPolicy: RealmPolicy.ADDITIVE]) {
        authenticate { username, credentials ->
            if (username != 'u-testauthn') {
                return true
            }
            newgroups = (['g-testauthn']) as List
            groups += newgroups
            return true
        }

        userExists { username ->
            return true
        }
    }
}
{code}
You can verify that the group is added with the ""getCurrentUserDetails"" plugin
{code:bash}
curl -u ""u-testauthn:****"" https://<REDACTED>/artifactory/api/plugins/execute/getCurrentUserDetails
{code}
{code:json}
{
    ""lastLoginClientIp"": ""<REDACTED>"",
    ""transientUser"": false,
    ""privateKey"": null,
    ""policyManager"": false,
    ""watchManager"": false,
    ""userPropertiesUpdated"": false,
    ""username"": ""u-testauthn"",
    ""anonymous"": false,
    ""lastLoginTimeMillis"": 1592865855293,
    ""bintrayAuth"": null,
    ""realm"": ""internal"",
    ""publicKey"": null,
    ""updatableProfile"": false,
    ""groups"": [
        ""g-testauthn""
    ],
    ""userProperties"": {    },
    ""enabled"": true,
    ""email"": ""test@domain.local"",
    ""admin"": false
}
{code}
Type information into JFrog Xray IDEA plugin and see error when testing connection[!https://i.imgur.com/y3Iuggz.png|width=598,height=237!|https://imgur.com/a/aTYvJiE]

Adding ""u-testauthn"" to group ""g-testauthn"" in the UI makes the connection test work
!https://i.imgur.com/61BEHUM.png|width=560,height=226!

 

 ","h1. Steps to reproduce

Create test user ""u-testauthn"" with no groups and no permissions
 Create test group ""g-testauthn"" and give it read permissions to some repository

Add User Plugin with the following code
{code:java}
import org.artifactory.security.RealmPolicy
realms {
    roleAuthz([autoCreateUsers: false, realmPolicy: RealmPolicy.ADDITIVE]) {
        authenticate { username, credentials ->
            if (username != 'u-testauthn') {
                return true
            }
            newgroups = (['g-testauthn']) as List
            groups += newgroups
            return true
        }

        userExists { username ->
            return true
        }
    }
}
{code}
You can verify that the group is added with the ""getCurrentUserDetails"" plugin
{code:bash}
curl -u ""u-testauthn:****"" https://<REDACTED>/artifactory/api/plugins/execute/getCurrentUserDetails
{code}
{code:json}
{
    ""lastLoginClientIp"": ""<REDACTED>"",
    ""transientUser"": false,
    ""privateKey"": null,
    ""policyManager"": false,
    ""watchManager"": false,
    ""userPropertiesUpdated"": false,
    ""username"": ""u-testauthn"",
    ""anonymous"": false,
    ""lastLoginTimeMillis"": 1592865855293,
    ""bintrayAuth"": null,
    ""realm"": ""internal"",
    ""publicKey"": null,
    ""updatableProfile"": false,
    ""groups"": [
        ""g-testauthn""
    ],
    ""userProperties"": {    },
    ""enabled"": true,
    ""email"": ""test@domain.local"",
    ""admin"": false
}
{code}
Type information into JFrog Xray IDEA plugin and see error when testing connection[!https://i.imgur.com/y3Iuggz.png|width=598,height=237!|https://imgur.com/a/aTYvJiE]

Adding ""u-testauthn"" to group ""g-testauthn"" in the UI makes the connection test work
 !https://i.imgur.com/61BEHUM.png|width=560,height=226!",,,,,,,,,,,,,,RTFACT-22526,,,,"15/Jul/20 1:08 AM;derekp;1GroupPermissions.png;https://www.jfrog.com/jira/secure/attachment/43966/1GroupPermissions.png","15/Jul/20 1:09 AM;derekp;2UnexpectedBuilds.png;https://www.jfrog.com/jira/secure/attachment/43967/2UnexpectedBuilds.png","15/Jul/20 1:10 AM;derekp;3Unauthorized.png;https://www.jfrog.com/jira/secure/attachment/43968/3Unauthorized.png","15/Jul/20 1:11 AM;derekp;4UnexpectedXrayData.png;https://www.jfrog.com/jira/secure/attachment/43969/4UnexpectedXrayData.png","15/Jul/20 1:11 AM;derekp;5ExpectedBuilds.png;https://www.jfrog.com/jira/secure/attachment/43970/5ExpectedBuilds.png","15/Jul/20 1:11 AM;derekp;6ExpectedXrayData.png;https://www.jfrog.com/jira/secure/attachment/43971/6ExpectedXrayData.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ey0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Jul/20 1:17 AM;derekp;Following the steps outlined in this Jira it does seem that Xray does not recognize the group added to the user in this manner. In the UI Xray resources show a 40X errors.

 

Group has the following privileges:

!1GroupPermissions.png|width=646,height=287!

!2UnexpectedBuilds.png|width=470,height=265!

Attempting to go to an Xray resource such as build information will produce this message in the UI.

!3Unauthorized.png|width=797,height=140!

!4UnexpectedXrayData.png|width=491,height=312!

 

In comparison to what should be seen (if user is added to the group in the UI the following can be seen):

!5ExpectedBuilds.png|width=735,height=405!





!6ExpectedXrayData.png|width=736,height=501!

 

Accessing an Xray rest API endpoint also results in a 403:

 

root@32e2c318ee29:/opt/jfrog/artifactory/var/log# curl -u ""u-testauthn:password"" -vv http://localhost:8082/xray/api/v1/watches
* Trying 127.0.0.1...
* TCP_NODELAY set
* Connected to localhost (127.0.0.1) port 8082 (#0)
* Server auth using Basic with user 'u-testauthn'
> GET /xray/api/v1/watches HTTP/1.1
> Host: localhost:8082
> Authorization: Basic dS10ZXN0YXV0aG46cGFzc3dvcmQ=
> User-Agent: curl/7.58.0
> Accept: */*
> 
< HTTP/1.1 403 Forbidden
< Content-Length: 0
< Date: Wed, 15 Jul 2020 01:14:29 GMT
< 
* Connection #0 to host localhost left intact","15/Jul/20 7:53 AM;kimsondrup;Our developers is impacted since they get all their permissions from groups added by a User Plugin with the ADDITIVE realm policy.

The developers are blocked from accessing any JFrog Xray service and the functionality of the JFrog UI is further degraded with the search functionality also being blocked.",,,,,,,,,
"Disabling ""Auto Create Users"" for LDAP can give error 500 on login",RTFACT-22573,102412,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kimsondrup,kimsondrup,22/Jun/20 9:40 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,7.5.8,,,,,,,Artifactory,LDAP,,,,,,0,,,,,,"Bug found to be invalid character "":"" in a groups name

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3exs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget Virtual and Remote queries return different results,RTFACT-22552,102247,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,niro,niro,19/Jun/20 10:54 PM,10/Feb/21 9:28 AM,18/Feb/21 8:59 AM,,6.19.0,,,,,,,NuGet,Virtual Repositories,,,,,,0,,,,,,"When running a [http://ArtifactoryURL/artifactory/api/nuget/v3/nuget-repository/query|http://172.16.2.17/artifactory/api/nuget/v3/nuget/query?q=Alschy&prerelease=true] command, the output changes depending on if the nuget-repository is remote or virtual, even if the only repository in the virtual is the remote. This can cause some issues, for example:

 

In the following tests, I used a remote nuget repo nuget-remote pointing to the default [https://www.nuget.org/,] and a virtual nuget repo nuget-virtual that consists only of the remote nuget repo

 

 

Running this on the remote repo: [http://ArtifactoryURL/artifactory/api/nuget/v3/nuget-remote/query?q=Hangfire&skip=0&take=10&prerelease=false&semVerLevel=2.0.0|http://172.16.2.17/artifactory/api/nuget/v3/nuget-remote/query?q=Hangfire&skip=0&take=10&prerelease=false&semVerLevel=2.0.0%22] returns Hangfire as the first package

 

Running the same query on the virtual repo like this:  [http://ArtifactoryURL/artifactory/api/nuget/v3/nuget-virtual/query?q=Hangfire&skip=0&take=10&prerelease=false&semVerLevel=2.0.0|http://172.16.2.17/artifactory/api/nuget/v3/nuget-remote/query?q=Hangfire&skip=0&take=10&prerelease=false&semVerLevel=2.0.0%22] does not return the main Hangfire package at all, rather starting with arex388.extensions.hangfire and the list of packages returned aren't the same as the remote repository.

 

 

The issue affects those who use Visual Studio, since the query call is used by Visual Studio and is producing different results when fetching from the virtual, and sometimes fails with no package found when a package does exist

If you return all results (in this case ~287), then you'll see the packages returned are the same but the virtual scrambles the order in the returned JSON. The remote repo results are the same as when querying the Nuget endpoint, [https://azuresearch-usnc.nuget.org/query?]

 

At first, I thought since the virtual repository is returning arex388.extensions.hangfire first, that the virtual is returning the packages in alphabetical order which happens in some other virtual repositories, but the order isn't alphabetical at all. It is easier to view the differences in order by running the following two queries

[http://172.16.2.17/artifactory/api/nuget/v3/nuget-remote/query?q=Alschy&prerelease=true]
[http://172.16.2.17/artifactory/api/nuget/v3/nuget-virtual/query?q=Alschy&prerelease=true|http://172.16.2.17/artifactory/api/nuget/v3/nuget-remote/query?q=Alschy&prerelease=true]

and see how the virtual doesn't seem to follow any visible order I can figure out. There isn't a linear pattern based on the alphabet, tags, or number of downloads that I can see.

The remote order is just the order when querying the official Nuget API endpoint.","Works in multiple environments. Tested in Ubuntu, Windows, and Debian OS in multiple different versions of Artifactory (both 6 and 7).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3dzs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remote repository is visible even after setting listRemoteFolderItems parameter,RTFACT-22550,102242,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,19/Jun/20 7:11 PM,10/Feb/21 9:30 AM,18/Feb/21 8:59 AM,,6.18.1,6.20.0,,,,,,,,,,,,,0,,,,,,"+Issue description+: Even after setting the property _*listRemoteFolderItems,*_ remote repository will be visible in *Artifact repository browser*.

+Steps to reproduce:+

-> Create a remote repository of any package type
 -> Execute below REST API command to update the repository configuration, which will update ""listRemoteFolderItems"" to false.

> curl -u admin --Header ""Content-Type:application/json"" --data @sample.json -X POST ""http://<ARTIFACTORY-URL>/artifactory/api/repositories/npm-remote""

> cat sample.json

{ ""url"" : ""http://<ARTIFACTORY-URL>/artifactory/npm-remote"", ""username"" : ""admin"", ""password"" : ""<password>"",""listRemoteFolderItems"" :false,""repoKey"" : ""npm-remote"" }

For reference I have attached the screenshots.

+Expected behavior:+
 Remote repository should not be visible in Artifact repository browser.",,,,,,,,,,,,,,,,,,,"19/Jun/20 7:17 PM;pavang;Screenshot-6.11.6.png;https://www.jfrog.com/jira/secure/attachment/43229/Screenshot-6.11.6.png","19/Jun/20 7:17 PM;pavang;Screenshot-6.20.jpg;https://www.jfrog.com/jira/secure/attachment/43228/Screenshot-6.20.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3dyw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Pushing fails with ""Unable to deserialize the manifest.json file: No content to map to Object due to end of input""",RTFACT-22543,102122,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Maximilian Novikov,Maximilian Novikov,18/Jun/20 12:18 PM,27/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.20.0,,,,,,,Docker,,,,,,,0,Docker,,,,,"I'm trying to push docker image to Artifactory(6.20.0) with JIB (2.4.0) and getting an error:
{code:java}
2020-06-18 11:35:10,608 [http-nio-8081-exec-229] [ERROR] (o.j.r.d.m.ManifestSchema2Deserializer:44) - Unable to deserialize the manifest.json file: No content to map to Object due to end of inputjava.io.EOFException: No content to map to Object due to end of input        at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2775)        at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2718)        at org.codehaus.jackson.map.ObjectMapper.readTree(ObjectMapper.java:1558)        at org.jfrog.repomd.docker.util.JsonUtil.readTree(JsonUtil.java:29)        at org.jfrog.repomd.docker.manifest.ManifestSchema2Deserializer.applyAttributesFromContent(ManifestSchema2Deserializer.java:52)        at org.jfrog.repomd.docker.manifest.ManifestSchema2Deserializer.deserialize(ManifestSchema2Deserializer.java:42)        at org.jfrog.repomd.docker.manifest.ManifestDeserializer.deserialize(ManifestDeserializer.java:32)        at org.jfrog.repomd.docker.v2.rest.handler.DockerV2LocalRepoHandler.processUploadedManifestType(DockerV2LocalRepoHandler.java:327)        at org.jfrog.repomd.docker.v2.rest.handler.DockerV2LocalRepoHandler.uploadManifest(DockerV2LocalRepoHandler.java:299)        at org.artifactory.addon.docker.rest.v2.repo.virtual.DockerV2VirtualRepoHandler.lambda$uploadManifest$5(DockerV2VirtualRepoHandler.java:112)        at org.artifactory.addon.docker.rest.v2.repo.virtual.DockerV2VirtualRepoHandler.delegateToLocalIfPossible(DockerV2VirtualRepoHandler.java:178)        at org.artifactory.addon.docker.rest.v2.repo.virtual.DockerV2VirtualRepoHandler.uploadManifest(DockerV2VirtualRepoHandler.java:112)        at org.jfrog.repomd.docker.v2.rest.DockerV2Resource.uploadManifest(DockerV2Resource.java:79)        at jdk.internal.reflect.GeneratedMethodAccessor1232.invoke(Unknown Source)        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)        at java.base/java.lang.reflect.Method.invoke(Method.java:566)        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)        at org.glassfish.jersey.internal.Errors.process(Errors.java:316)        at org.glassfish.jersey.internal.Errors.process(Errors.java:298)        at org.glassfish.jersey.internal.Errors.process(Errors.java:268)        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195)        at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.artifactory.webapp.servlet.AccessFilter.useAuthenticationAndContinue(AccessFilter.java:346)        at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:239)        at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:150)        at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:105)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)        at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)        at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543)        at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305)        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1627)        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)        at java.base/java.lang.Thread.run(Thread.java:834)2020-06-18 11:35:10,608 [http-nio-8081-exec-229] [ERROR] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:883) - Error uploading manifest: 'java.io.EOFException: No content to map to Object due to end of input'
{code}
manifest.json:
{code:java}
{
  schemaVersion: 2,
  mediaType: application/vnd.docker.distribution.manifest.v2+json,
  config: {
    mediaType: application/vnd.docker.container.image.v1+json,
    digest: sha256:bfdc66e67e26686f9cb311cb50408f3543d6b51726f2ebb2156917f6f280ae0b,
    size: 11951
  },
  layers: [
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:c9ff3e9281bcbcadd57f37cc0e47a4081cc20a091749d7a33d56496a60a2c1be,
      size: 76240719
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:f897b9608c98d944929bd778316439ac000b43d974c70efb678187e436f095fa,
      size: 1320
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:f18bf393acf63419dbe2daf95475beca54e634318ddad5c87555e8af3db1a7ad,
      size: 533
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:b497cfa5e0319a2c2ee33cdc114602bb69f64f52e058c6be4e6201b4a95591b2,
      size: 526
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:78fb37b0c7d42b1bf1959fd49df88dcff1f732c92ec5f84f826b99c92b2e2293,
      size: 1216
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:db48c88b83ab898284ddf5a97c4149fa4f49fef25d413920925704adee648e8f,
      size: 1762
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:edd20619060508ca2d4f286bb420a1bfcd356ebee9acf05b9b1e3f7007820e48,
      size: 927
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:4b462ee8d6e64ae72ef53f76e08a1b2571415d8bb74a352ab0602e7fc51775ee,
      size: 331
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:8ff405288a430c53c6b70c6bcc1aee6f888709ee70f853d991720e9e47791157,
      size: 218
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:422982788dfcc99f789dcc0fa780299feb567798ad5128ba798ffdf7e8d7b2af,
      size: 30536301
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:f810dcedecafa50b74d3929d40ce1eac1b58e78b4c70b730b0f16ede640be49b,
      size: 217
    },
    {
      mediaTy
      pe: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:d0ca9e9cb628a599d3daab83b29d93b3784d29d5f92715ac5e2aae017f55de4e,
      size: 107942741
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:ee9deb1d4c4a0765ce68b4dbceb79353ae430cccc86b3254332ac0f7cee388a1,
      size: 240388735
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:43058bc950a6af0eea39d2943ec4b78ce94b8cd17671875ceac7f4cd21a2d351,
      size: 26947889
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:e8b19a11789633db7c203420ab3ea95e727d6cfd1fbaf39c307d4d76bfe6edbd,
      size: 12220
    },
    {
      mediaType: application/vnd.docker.image.rootfs.diff.tar.gzip,
      digest: sha256:37a9986871ba6fc58c382bc019a3a42817756762823831662875553a1ee594df,
      size: 607999
    }
  ]
}
{code}
Repo API version is V2.

It's unclear what is wrong with this manifest.json.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3da8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Jan/21 3:31 PM;nadavy;All the keys in the manifest json are not surrounded by quotes, thus not a valid JSON.

Is it a bad copy?","11/Jan/21 4:45 PM;Maximilian Novikov;yes, it's a bad copy.
The issue was resolved by upgrading nginx config from corresponding distribution. ","27/Jan/21 3:25 PM;nadavy;[~Maximilian Novikov] can this issue be closed then?",,,,,,,,
Subscription Creation for Event service accepts invalid event_filter,RTFACT-22536,102105,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,agnieszkaw,agnieszkaw,18/Jun/20 10:12 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Event,,,,,,,0,,,,,,"When creating subscription for event service following invalid event_filter is accepted at creation (in criteria any is used which should be rejected):


{noformat}
{
  ""key"": ""mywebhook"",
  ""description"": ""some description"" ,
  ""event_filter"": {
    ""criteria"": { ""any"": true },
    ""domain"": ""artifact"",
    ""event_types"": [
      ""deployed"",
      ""deleted""
    ]
  },
  ""handlers"": [
    {
      ""handler_type"": ""webhook"",
      ""url"": ""http://webhook.site/5a1dc314-c3ed-42b7-9a0a-e82601fe18a7"",
      ""secret"": ""secret"",
      ""custom_http_headers"": [
        {
          ""name"": ""foo"",
          ""value"": ""bar""
        }
      ]
    }
  ]
}
{noformat}


But causes at event trigger a 500 http code:


{noformat}
2020-06-18T10:09:05.743Z [jfrt ] [ERROR] [1ba34538433a0102] [o.a.r.d.DbStoringRepoMixin:284] [http-nio-8081-exec-3] - IO error while trying to save resource myrepo:zoom background 28.05.jpg'': com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field ""any"" (class org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration), not marked as ignorable (6 known properties: ""anyRemote"", ""repoKeys"", ""includePatterns"", ""excludePatterns"", ""anyLocal"", ""anyVirtual""])
 at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration[""any""])
2020-06-18T10:09:05.744Z [jfrt ] [WARN ] [1ba34538433a0102] [o.a.s.f.l.SessionLockEntry:132] [http-nio-8081-exec-3] - Mutable item 'auto-trashcan:myrepo/zoom background 28.05.jpg' has local modifications that will be discarded.
2020-06-18T10:09:05.746Z [jfrt ] [ERROR] [1ba34538433a0102] [c.e.m.GlobalExceptionMapper:48] [http-nio-8081-exec-3] - Cannot deploy file zoom background 28.05.jpg. Cause: Unrecognized field ""any"" (class org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration), not marked as ignorable (6 known properties: ""anyRemote"", ""repoKeys"", ""includePatterns"", ""excludePatterns"", ""anyLocal"", ""anyVirtual""])
 at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration[""any""])
org.artifactory.sapi.common.RepositoryRuntimeException: Cannot deploy file zoom background 28.05.jpg. Cause: Unrecognized field ""any"" (class org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration), not marked as ignorable (6 known properties: ""anyRemote"", ""repoKeys"", ""includePatterns"", ""excludePatterns"", ""anyLocal"", ""anyVirtual""])
 at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration[""any""])
	at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:157)
	at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:106)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy270.deploy(Unknown Source)
	at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.doDeployment(ArtifactDeployService.java:150)
	at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.deploy(ArtifactDeployService.java:123)
	at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.execute(ArtifactDeployService.java:102)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.artifacts.deploy.DeployArtifactResource.deployArtifact(DeployArtifactResource.java:73)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthenticationAndContinue(AccessFilter.java:413)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:301)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:176)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:127)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:126)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:543)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:305)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:615)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:818)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1627)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field ""any"" (class org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration), not marked as ignorable (6 known properties: ""anyRemote"", ""repoKeys"", ""includePatterns"", ""excludePatterns"", ""anyLocal"", ""anyVirtual""])
 at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: org.artifactory.addon.jfevent.service.filter.artifact.ArtifactFilterConfiguration[""any""])
	at com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:840)
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:1192)
	at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1592)
	at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1570)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:294)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:3917)
	at com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:3853)
	at org.artifactory.addon.jfevent.service.filter.artifact.ArtifactSubscriptionFilterStrategy.matches(ArtifactSubscriptionFilterStrategy.java:25)
	at org.artifactory.addon.jfevent.service.filter.artifact.ArtifactSubscriptionFilterStrategy.matches(ArtifactSubscriptionFilterStrategy.java:15)
	at org.jfrog.event.client.components.SubscriptionsMatcher.filter(SubscriptionsMatcher.java:43)
	at org.jfrog.event.client.components.SubscriptionsMatcher.lambda$match$2(SubscriptionsMatcher.java:33)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:176)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)
	at java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)
	at org.jfrog.event.client.components.SubscriptionsMatcher.match(SubscriptionsMatcher.java:35)
	at org.jfrog.event.client.EventClient.postEvent(EventClient.java:49)
	at org.artifactory.addon.jfevent.service.JfEventServiceImpl.processEvent(JfEventServiceImpl.java:84)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy350.processEvent(Unknown Source)
	at org.artifactory.addon.jfevent.interceptor.JfEventArtifactInterceptor.afterCreate(JfEventArtifactInterceptor.java:45)
	at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterCreate(StorageInterceptorsImpl.java:69)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy224.afterCreate(Unknown Source)
	at org.artifactory.repo.db.DbStoringRepoMixin.invokeAfterCreateInterceptors(DbStoringRepoMixin.java:407)
	at org.artifactory.repo.db.DbStoringRepoMixin.saveResource(DbStoringRepoMixin.java:245)
	at org.artifactory.repo.db.DbLocalRepo.saveResource(DbLocalRepo.java:162)
	at org.artifactory.repo.service.RepositoryServiceImpl.saveResourceInTransaction(RepositoryServiceImpl.java:1915)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy218.saveResourceInTransaction(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1903)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy218.saveResource(Unknown Source)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:571)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:553)
	at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:428)
	at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:419)
	at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:401)
	at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:222)
	at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:188)
	at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:131)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy238.upload(Unknown Source)
	at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:151)
	... 90 common frames omitted
{noformat}
",docker.jfrog.io/jfrog/artifactory-pro:7.6.x.preRelease.jfrt.7.6.x.rc-3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3d74:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Jun/20 10:14 AM;agnieszkaw;also another potential problem:

a request payload at subscription creation with 


{noformat}
""domain"": ""any""{noformat}

is accepted also.",,,,,,,,,,
False Positive itests status,RTFACT-22530,102053,Bug,In Progress,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,omriz,omriz,omriz,18/Jun/20 4:59 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"In case that a profile, for some reason not running any tests, the Jenkins job is marked as success.

we should fail the job in case of these problems.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4b1u:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
OAuth Ignores Forward Proxy And Results In Connection Refused,RTFACT-22528,102047,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,18/Jun/20 2:13 AM,10/Feb/21 9:32 AM,18/Feb/21 8:59 AM,,,,,,,6.8.15,,OAuth,,,,,,,1,,,,,,"When you have OAuth and HTTP Proxy (Forward Proxy) configured in Artifactory (v6.8.15), Artifactory ignores Forward Proxy during OAuth authentication and it results in the following error:

 

java.net.ConnectException: Connection refused

 

Steps to reproduce:

 
 # Install Artifactory v6.8.15
 # Configure OAuth with Artifactory. (Azure AD)
 # Configure Forward Proxy
 # During the authentication, you will get a connection refused error ( see screenshot below)
 # We also can confirm this error when we run the following curl directly from Artifactory server, this URL was pulled from ""Token URL"" field in OAuth settings in Artifactory:

curl -vv [https://login.microsoftonline.com/xxxxxxxxxx/oauth2/v2.0/token|https://login.microsoftonline.com/1daaa597-6edd-4069-84ad-bbe6289f121c/oauth2/v2.0/token]

      6. When we embed forward proxy to the command above, the connection succeeds. This proves that Artifactory ignores the Forward Proxy when it comes to OAuth authentication. 

 

 "," 

!1.jpg!

 

!2.jpg!

 

!3.jpg!

 

 

 

 

 

 

 

 

 

 ",,,,,,,,,,,,,,,,,,"18/Jun/20 2:12 AM;timt;1.jpg;https://www.jfrog.com/jira/secure/attachment/43176/1.jpg","18/Jun/20 2:12 AM;timt;2.jpg;https://www.jfrog.com/jira/secure/attachment/43177/2.jpg","18/Jun/20 2:11 AM;timt;3.jpg;https://www.jfrog.com/jira/secure/attachment/43178/3.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3cv4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deployer doesn't get notification when deploying with access token and 'Notify to deployer' is marked,RTFACT-22526,100791,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adim,adim,05/Jun/20 7:42 AM,10/Feb/21 9:34 AM,18/Feb/21 8:59 AM,,3.4.0,,,,,,,,,,,,,,0,need-rnd-ee,PB_Done,xray-pm-bucket,,,"Steps to reproduce:
 # Create an access token for a user on Artifactory.
 # Setup mail service.
 # Create policy and check 'Notify Deployer'. 
 # Create a Watch with the above policy.
 # Deploy a package that has vulnerabilities using the access token.

Expected:

Deployer receives an email.

Observed:

Deployer does not receive a notification via email.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc35nk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Thread trace-id doesn't always cascade between sync -> async invocations,RTFACT-22525,101984,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,uriahl,uriahl,17/Jun/20 2:13 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"If the ExecutorService is instantiated with bindToContext=true, the code loses the original tracing span reference and the spawned thread ends up creating a completely new span. This is vague and seems incidental, should probably be fixed if the intent is to cascade the trace ID between sync -> async invocations",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzuqmf:9",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory connection to LDAPS server results in a failure in version 7.X and 6.X when using JDK 11 with an SSL exception (Remote host terminated connection),RTFACT-22514,101895,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,16/Jun/20 6:49 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,7.4.0,,,,,,,LDAP,,,,,,,0,,,,,,"*Problem description:* 

The customer noticed that when they upgraded Artifactory to version 7.X the connection to secure LDAP server is failing due to SSL exceptions. This was not an issue when they were in Artifactory version 6.X and they still have an Artifactory 6.X that is able to connect to the secure LDAPS server successfully.

The major difference between 6.X and 7.X is the java version. In 6.X JDK 8 is used and in 7.X JDK 11 is being used. As part of narrowing down the issue we switched Artifactory 6.X to use JDK 11 and saw that as soon as we switched to JDK 11 in 6.X the connection was failing with the same error again. At this point it seemed to be an issue with JDK, but we cannot be 100% sure since disabling TLSv1.2 and TLSv1.3 in JDK 11 allowed the connection to be successful to the secure LDAPS server. When using only TLSv1.1 we could see that the same Artifactory 7.X server is able to connect to the LDAPS server successfully.

We are not able to isolate the origin of the issue, as it can be either JDK 11 or there is a chance the issue could be with Artifactory. The issue is most probably not in the LDAPS server as the same server worked with JDK version 8 in 6.X Artifactory.

{color:#ff0000}Artifactory version is 7.3.2{color}

{color:#ff0000}JDK version 11.0.2{color}

As a final step we have tried upgrading JDK from 11.0.2 to 11.0.4 to see if it help in resolving this issue, but after upgrading the JDK also it did not help and we still see the same error.

 

*Troubleshooting steps:*

Researching online we found some articles where users were running into similar issues with their applications after upgrading to JDK 11 and as a workaround they recommended disabling the SSL protocol TLSv1.3, which is supported in JDK 11. We tried this in the customer environment by passing the java options to disable the TLSv1.3 protocol in JDK 11, but we saw that the connection to LDAPS server is still failing with the same error.

*extraJavaOpts: ""-Djdk.tls.client.protocols=TLSv1,TLSv1.1,TLSv1.2 -Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2""*

We verified that the LDAPS server does support TLSv1.2 protocol, so not sure why the SSL connection was still failing with the same SSL remote host terminated exception. We know that the customer LDAPS server does not support TLSv1.3, so we already had the TLSv1.3 protocol disabled in JDK using the java options.

At this point, I searched for the SSL exceptions online and found the following Jenkins JIRA which described a very similar issue that Jenkins experienced after JDK was upgraded to version 11. Here is the Jenkins issue [https://issues.jenkins-ci.org/browse/JENKINS-58603]

As a workaround in Jenkins they had to disable both TLSv1.2 and TLSv1.3 in the JDK. We went ahead and tried this in the customer environment by disabling both the TLSv1.2 and TLSv1.3 and this allowed Artifactory to connect to secure LDAPS server. But we were using only TLSv1 and TLSv1.1 and since TLSv1.1 is very old and close to being deprecated, the customer did not want to be using only TLSv1.1 and they wanted to enable at least TLSv1.2.

In order to identify why the SSL handshake is being terminated when using TLSv1.2 we added the SSL debug logs parameter with the highest logging to the java options in Artifactory. After adding these options we tried connecting to the LDAPS server and saw the below exception, which again doesn’t clearly tell why the SSL handshake is being terminated. The ClientHello SSL handshake message is being generated, but it seems incomplete as the ClientHello handshake message should include the hostname and other details, which i noticed when i compared this ClientHello message to a successful SSL handshake transaction. Right after this the expected flow is to receive a ServerHello SSL handshake message, but we never see this as the SSl connection is terminated with an exception “*javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake*”. The full exception seen in the Artifactory ""console.log"" where the SSL debug logs are captured and I have posted them in a private comment due to security concern. Based on the debug logs it is not clear if the ClientHello SSL handshake message is ever reaching the LDAPS server. Also from the debug logs we could not determine if the SSL handshake is being terminated by the LDAPS server or if it is being terminated by Artifactory.

We have also verified that the CIPHER suite that the LDAPS server uses is part of the JDK cipher suites. This is the cipher suite the LDAPS server uses “Cipher: *TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256*”. You can see that this is present in the list of the cipher suites presented with the ClientHello SSL handshake message. When the issue occurs the LDAP team confirmed that they don’t see any connection initiated by Artifactory in their LDAP logs.

 

*What is the expected behavior?*

The expected behavior is for Artifactory to connect to secure LDAP server without any SSL exceptions. ** 

 

*Steps to reproduce:***

There is no easy way to reproduce this issue as it is unique to certain environments when using it in combination with JDK 11. I did try to reproduce the issue, but I wasn't able to replicate the exact same behavior that we noticed in the customer environment. Here are the steps I have tried:
 # Setup a LDAPS server. The easier and quickest way of doing it is by using the docker image available here [https://github.com/osixia/docker-openldap]
 # use openssl command to list the self signed certs of the LDAPS server, so that you can import them to the JDK cacerts file. This step is important in order to avoid certificate related errors.
 # Now add the LDAPS url to Artifactory and try test connection. We can see the SSL handshake termination error in the Artifactory logs. Make sure to enable SSL debug loggers to see the full SSL handshake flow.
 # Unlike in the customer env, I see the issue in both Artifactory 6.X and 7.X versions with both JDK 11 and JDK 8 irrespective of the type of TLS protocols enabled. This is why I think the behavior for us is quite different when trying to reproduce the issue and is very unique to a specific environment.

I have also tried connecting to a public LDAPS server which i found online and in this case the connection was successful in both 7.X and 6.X Artifactory with JDK 11 when using TLSv1.2 protocol. In this case the public LDAPS server had valid SSL certificates signed by a CA, so we did not even have to import the SSL certs to JDK.

 

*Possible workaround:*

The workaround is to disable TLSv1.3 and TLSv1.2 using java options in the JVM and use only TLSv1 and TLSv1.1 protocols. However this is not an acceptable workaround as TLSv1.1 is quite old and might have security issues. Also there are plans to deprecate TLSv1.1.

*Was that reproduced on GCP machine/mill?*

No, I tried the reproduction steps in my local Artifactory

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3c08:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
mirroring remote repositories breaks when directories lack trailing slashes,RTFACT-22502,101742,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,qralston,qralston,16/Jun/20 3:25 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.12.1,,,,,,,,,,,,,,1,,,,,,"For the apt and yum Puppet Open Source repositories:

* https://apt.puppet.com/
* https://yum.puppet.com/

…the HTML code that is returned to HTTP clients omits the trailing ""/"" character on directories.

For example, looking at the HTML that, say Ubuntu serves, here:

http://archive.ubuntu.com/ubuntu/

…we see that in the file listing, directories (such as {{dists}}) are suffixed with a slash:

{code:html}
 <table>
  <tr>
    <td valign=""top""><img src=""/icons/folder.gif"" alt=""[DIR]"" /></td>
    <td><a href=""dists/"">dists/</a></td>
    <td align=""right"">2020-04-24 13:55  </td>
    <td align=""right"">  - </td>
  </tr>
</table>
{code}

In contrast, in the HTML that the Puppet apt repository returns:

https://apt.puppet.com/

…the {{dists}} and {{pools}} directories are not suffixed with a slash:

{code:html}
<table>
  <tr>
    <td valign=""top""><img src=""https://s3-us-west-2.amazonaws.com/icons.puppet.com/folder.gif"" alt=""[DIR]"" /></td>
  <td><a href=""dists"">dists</a></td>
  <td align=""right"">2020-06-08 15:15:50  </td>
  <td align=""right""> 4.0KiB</td><td>&nbsp;</td></tr>
</table>
{code}

The lack of a trailing slash breaks the ability to mirror these repositories in Artifactory.

Specifically, when we attempt to mirror https://apt.puppet.com/ using Artifactory, browsing that mirror shows the {{dists}} and {{pool}} directories as plain files instead of directories. Attempting to open either directory yields this error in the Artifactory system logs:

{noformat}
2020-06-10 14:33:03,667 [http-nio-8081-exec-25] [ERROR] (o.a.r.HttpRepo :821) - Remote info request was redirected to a directory. Repo: puppet-apt Path: dists
{noformat}

This error message is correct, as that is exactly what attempting to fetch the directory does:

{noformat}
GET /dists HTTP/1.1
User-Agent: Wget/1.20.3 (linux-gnu)
Accept: */*
Accept-Encoding: identity
Host: apt.puppet.com
Connection: Keep-Alive
Proxy-Connection: Keep-Alive
{noformat}

{noformat}
HTTP/1.1 302 Moved Temporarily
Content-Type: text/html; charset=utf-8
Content-Length: 313
Connection: keep-alive
x-amz-error-code: Found
x-amz-error-message: Resource Found
Location: /dists/
Date: Wed, 10 Jun 2020 19:34:37 GMT
Server: AmazonS3
X-Cache: Hit from cloudfront
Via: 1.1 415cafe4893fa18caeab8a2e966de6c1.cloudfront.net (CloudFront)
X-Amz-Cf-Pop: LHR62-C2
X-Amz-Cf-Id: zky7J4zV1YYLa7ISfVnrNHBFarCcToDxzovxej_2-Qh9gBKAK9OfVw==
Age: 476
{noformat}

I've filed a bug with Puppet ([CPR-742|https://tickets.puppetlabs.com/browse/CPR-742]), asserting that this behavior is an error: in directory listings, objects that are directories should include the trailing slash.

*But*: Artifactory should be robust enough to recover from this, as I'm sure the Puppet apt/yum mirrors aren't the only repositories that fail to mark directories with trailing slashes in file listings. (It might be an AWS-ism, in what case Artifactory will surely encounter it elsewhere.)

Perhaps if attempting to open what appears to be a plain file returns a redirect to the same file but with a trailing slash, then Artifactory could note that the object in question is actually a directory, and simply follow the redirect, and update the icon in the browser to indicate a directory instead of a file?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3b20:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Change from IBM JDK to OpenJDK causes encrypted passwords to fail.,RTFACT-22495,101653,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muhammedk,muhammedk,15/Jun/20 10:30 AM,10/Feb/21 9:38 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The problem here is when we change the IBM JDK to OpenJDK all the encrypted passwords become obsolete, although, all these JDKs use the same encryption mechanism.

Every Java implementation (IBM, Oracle, or OpenJDK) is required to implement the following Ciphers, modes, and padding listed below. Key sizes in (parentheses).
 * AES/CBC/PKCS5Padding (128)
 * AES/ECB/NoPadding (128)
 * AES/ECB/PKCS5Padding (128)
 * AES/GCM/NoPadding (128)
 * DES/CBC/NoPadding (56)
 * DES/CBC/PKCS5Padding (56)
 * DES/ECB/NoPadding (56)
 * DES/ECB/PKCS5Padding (56)
 * DESede/CBC/NoPadding (168)
 * DESede/CBC/PKCS5Padding (168)
 * DESede/ECB/NoPadding (168)
 * DESede/ECB/PKCS5Padding (168)
 * RSA/ECB/PKCS1Padding (1024, 2048)
 * RSA/ECB/OAEPWithSHA-1AndMGF1Padding (1024, 2048)
 * RSA/ECB/OAEPWithSHA-256AndMGF1Padding (1024, 2048)

However, changing from IBM JDK to OpenJDK breaks the encrypted passwords.

 

Steps to reproduce:
 # Install IBM JDK 11
 # Install Artifactory any 6.x version.
 # Change the password encryption policy to ""required"".
 # Generate encrypted passwords for users.
 # Set these encrypted passwords in Maven, NPM clients for authentication.
 #  Perform some 'mvn clean deploy'
 # Change the IBM JDK 11 to OpenJDK 11.
 # Now run the same 'mvn clean deploy' which will fail in ""Not Authorized"" and under Artifactory.log can be found the below ""Bad padding"" error regarding encryption,

 
{code:java}
2020-04-27 15:06:25,055 [http-nio-8081-exec-1] [WARN ] (o.a.s.PasswordDecryptingManager:147) - Failed decrypting password. Trying to authenticate with original password. org.artifactory.security.PasswordEncryptionException: Failed to decrypt password. at org.artifactory.security.PasswordDecryptingManager.decryptPassword(PasswordDecryptingManager.java:196) at org.artifactory.security.PasswordDecryptingManager.authenticate(PasswordDecryptingManager.java:141) at org.artifactory.addon.npm.rest.NpmRequestHelper.canAuthenticateLocally(NpmRequestHelper.java:270) at org.artifactory.addon.npm.rest.NpmRequestHelper.login(NpmRequestHelper.java:164) at org.artifactory.addon.npm.rest.NpmResource.login(NpmResource.java:99) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191) at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200) at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103) at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415) at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268) at org.glassfish.jersey.internal.Errors.process(Errors.java:316) at org.glassfish.jersey.internal.Errors.process(Errors.java:298) at org.glassfish.jersey.internal.Errors.process(Errors.java:268) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703) at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195) at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427) at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305) at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208) at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164) at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.lang.Thread.run(Thread.java:748) Caused by: org.jfrog.security.crypto.exception.CryptoRuntimeException: javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption. at org.jfrog.security.crypto.EncryptionWrapperBase.decryptFallback(EncryptionWrapperBase.java:195) at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:129) at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:115) at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:101) at org.jfrog.security.crypto.EncryptionWrapperBase.decryptIfNeeded(EncryptionWrapperBase.java:92) at org.artifactory.security.PasswordDecryptingManager.decryptPassword(PasswordDecryptingManager.java:187) ... 73 common frames omitted Caused by: javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption. at com.sun.crypto.provider.CipherCore.unpad(CipherCore.java:975) at com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1056) at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853) at com.sun.crypto.provider.PKCS12PBECipherCore.implDoFinal(PKCS12PBECipherCore.java:405) at com.sun.crypto.provider.PKCS12PBECipherCore$PBEWithSHA1AndDESede.engineDoFinal(PKCS12PBECipherCore.java:437) at javax.crypto.Cipher.doFinal(Cipher.java:2164) at org.jfrog.security.crypto.JFrogCryptoHelper.decryptSymmetric(JFrogCryptoHelper.java:302) at org.jfrog.security.crypto.encrypter.DESedeBytesEncrypter.decrypt(DESedeBytesEncrypter.java:43) at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:124) ... 77 common frames omitted
{code}
Based on our [#wiki][https://www.jfrog.com/confluence/display/JFROG/Centrally+Secure+Passwords], the encrypted passwords will become obsolete when changing the Oracle JDK to IBM JDK and vice-versa and there is no way mentioned about that the change from IBM JDK to OpenJDK makes the encrypted passwords obsolete. 

The expected behaviour is that the encrypted passwords should not become obsolete when changing from IBM JDK to OpenJDK as both of these JDKs uses the same encryption policies.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3ajc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Helm virtual repository being corrupted when a remote repository with wrong upstream URL is added,RTFACT-22476,101519,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,swarnenduk,swarnenduk,13/Jun/20 10:33 AM,10/Feb/21 9:40 AM,18/Feb/21 8:59 AM,,6.16.0,6.20.0,,,,,,,,,,,,,1,PB_Done,,,,,"*Problem Description -* 

Helm virtual repository is being corrupted when a helm remote repository with the wrong upstream URL is added to the virtual repository and no content can be seen in the virtual repository of the Artifactory UI. Also, Artifactory is not complaining about the wrong URL when doing a ""*Test*"" from the UI.

*Expected Behaviour* - The below are expected - 
 # The helm virtual repository should not be corrupted if any remote repository with the wrong URL is added and still show the contents from the other repositories added to the virtual repository. The content of the other repositories should still be showing in the virtual repo and should be served.
 # The ""*Test*"" should be failing for the remote repositories with the wrong URL and let the user know that it is not supported.

*Reproduction steps*:
 # Create a virtual repository
 # Create a remote repository with the correct URL (*[https://kubernetes-charts.storage.googleapis.com*|https://kubernetes-charts.storage.googleapis.com%2A/]) and add this remote to the virtual repository.
 # Do a ""*helm repo update*"". The virtual repository should be populated with the contents of the remote repository.
 # Now create another remote repository with a wrong URL (*[https://releases.rancher.com/server-charts/*]) which when hit from the browser, a file will be downloaded.
 # Do a ""*Test*"" and Artifactory will not complain about the URL.
 # Add that remote repository to the virtual repository.
 # Do a ""*helm repo update*"" and the entire contents of the virtual repository is gone from the UI. 

*Logs*:

In the *artifactory.log* the below log is seen - 

2020-06-13 09:11:17,902 [http-nio-8081-exec-8] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Failed to build dom document
 java.lang.RuntimeException: Failed to build dom document

Caused by: org.jdom2.input.JDOMParseException: Error on line 1: Premature end of file.

Caused by: org.xml.sax.SAXParseException: Premature end of file.

In the *helm.log* after enabling the debug logger - 

2020-05-31 23:07:20,102 [art-exec-186] [ERROR] (o.a.a.h.r.m.HelmVirtualMerger:213) - Couldn't read index file in remote repository *<remote repository>* : null

2020-06-01 02:22:38,204 [art-exec-190] [ERROR] (o.a.a.h.r.m.HelmVirtualMerger:213) - Couldn't read index file in remote repository *<remote repository>* : null

*<**remote repository**>* is the remote repository with the wrong URL (*[https://releases.rancher.com/server-charts/*])",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc4qk7:z6",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Last replication status is completed with errors even after a successful replication ,RTFACT-22467,101408,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerh,omerh,11/Jun/20 12:58 PM,10/Feb/21 12:22 PM,18/Feb/21 8:59 AM,,7.4.0,,,,,,,,,,,,,,0,,,,,,"*Problem description:* Last replication status is completed with errors even after a successful replication 

 

*What is the expected behavior?*

The last replication status in Artifactory UI will reflect the current last replication status

 

*Steps to reproduce:*
 # Create repo with multi push replication to 2 different locations(target_1 and target_2).
 # Cause 1 location to fail (shut down target_1 during the replication )
 # Remove target_1 from the replication targets.
 # Trigger a replication to target_2 only(since we remove  target_1 from replication targets.)
 # The replication ends with success but the Last replication status in Artifactory UI is completed with errors 

 ",,,,,,,,,,,,,,,,,,,"11/Jun/20 1:03 PM;omerh;image-2020-06-11-16-03-33-774.png;https://www.jfrog.com/jira/secure/attachment/42960/image-2020-06-11-16-03-33-774.png","11/Jun/20 1:05 PM;omerh;image-2020-06-11-16-05-42-141.png;https://www.jfrog.com/jira/secure/attachment/42963/image-2020-06-11-16-05-42-141.png","11/Jun/20 1:06 PM;omerh;image-2020-06-11-16-06-49-675.png;https://www.jfrog.com/jira/secure/attachment/42965/image-2020-06-11-16-06-49-675.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc393c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Set Item Properties REST API is allowing numbers as property name,RTFACT-22466,101328,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vigneshs,vigneshs,11/Jun/20 4:35 AM,10/Feb/21 9:56 AM,18/Feb/21 8:59 AM,,6.18.1,6.19.0,6.20.0,,,,,REST API,,,,,,,1,,,,,,"+Problem Description:+

While setting Item properties using REST API it is allowing numbers as the property value, while if trying to set the number as a property name in UI it will give the below error

 

+Error from UI:+ 

Name must start with a letter and cannot contain spaces or special characters

Please see the screenshot propertynameerror.png

 

+REST API:+

$ curl -u admin:Password -X PUT [http://localhost:8081/artifactory/api/storage/docker-local/hello-world/latest?properties=2017.11=|http://localhost:8081/artifactory/api/storage/docker-local/hello-world/latest?properties=2017.11=final]+win+

Please see the screenshot propertynameset.png

 

+Actual Issue:+

If a user tries to set a property as a number for any docker image and enables push replication, the associated property set with the image is not getting replicated.

 

+Scenario:+ From Artifactory A, the docker image is replicated to Artifactory B, and if the image has property name set with numbers, only the image will get replicated and the properties will not be available in Artifactory B

Now when pointing the Artifactory B to docker client and pull the image, it will throw “missing signature key error”

Please see the screenshot dockererror.png

 

+Expected Behaviour:+ When trying to set the property name using numbers in REST API, it should give the below error
 ""message"" : ""Name must start with a letter and cannot contain whitespace or special characters""",,,,,,,,,,,,,,,,,,,"11/Jun/20 4:35 AM;vigneshs;dockererror.png;https://www.jfrog.com/jira/secure/attachment/42937/dockererror.png","11/Jun/20 4:35 AM;vigneshs;propertynameerror.png;https://www.jfrog.com/jira/secure/attachment/42938/propertynameerror.png","11/Jun/20 4:35 AM;vigneshs;propertynameset.png;https://www.jfrog.com/jira/secure/attachment/42939/propertynameset.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc38m0:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
delete operation does not free up disk space,RTFACT-22465,101327,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tiendungitd,tiendungitd,11/Jun/20 3:23 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.20.0,,,,,,,,,,,,,,1,artifactory,derby,oss,,,"I used REST API to delete a large amount of artifacts and the size of Trash Can was around 200GB, then I empty it. Finally, go to Admin UI to run a ""Garbage Collection"" and ""Compress the Internal Database"", but the disk space has not been free up after whole day.

With the same procedure, Artifactory version 6.13.1 work well. I just upgrade to 6.20.0.

In catalina.out look good, no error message
{code:java}
2020-06-11 05:30:49,243 [art-exec-3] [INFO ] (o.a.s.d.b.s.BinaryServiceImpl:578) - Triggering Garbage Collection
2020-06-11 05:30:49,243 [art-exec-3] [INFO ] (o.a.s.d.b.s.g.GarbageCollector:54) - Starting GC strategy 'TRASH_AND_BINARIES'
2020-06-11 05:30:49,247 [art-exec-3] [INFO ] (o.a.s.d.b.s.g.GarbageCollector:56) - Finished GC Strategy 'TRASH_AND_BINARIES'
2020-06-11 05:31:13,463 [art-exec-5] [INFO ] (o.a.s.a.ArchiveIndexerImpl:146) - Indexing archive: ext-snapshot-local:com/axonivy/report/luz_reporting/0.00.13.00-SNAPSHOT/luz_reporting-0.00.13.00-20200611.032739-1.war
2020-06-11 05:32:08,411 [art-exec-2] [INFO ] (o.a.r.c.ArtifactCleanupServiceImpl:206) - Auto-clean has begun on the repository 'labs-release-local-cache' with period of 1209600000 millis.
2020-06-11 05:32:08,418 [art-exec-2] [INFO ] (o.a.r.c.ArtifactCleanupServiceImpl:232) - Auto-clean on the repository 'labs-release-local-cache' has ended. 0 artifact(s) were cleaned
2020-06-11 05:32:08,419 [art-exec-2] [INFO ] (o.a.r.c.ArtifactCleanupServiceImpl:206) - Auto-clean has begun on the repository 'labs-snapshot-local-cache' with period of 1209600000 millis.
2020-06-11 05:32:08,427 [art-exec-2] [INFO ] (o.a.r.c.ArtifactCleanupServiceImpl:232) - Auto-clean on the repository 'labs-snapshot-local-cache' has ended. 0 artifact(s) were cleaned
2020-06-11 05:32:08,427 [art-exec-2] [INFO ] (o.a.r.c.ArtifactCleanupServiceImpl:206) - Auto-clean has begun on the repository 'repo1-cache' with period of 604800000 millis.
2020-06-11 05:32:08,712 [art-exec-2] [INFO ] (o.a.r.c.ArtifactCleanupServiceImpl:232) - Auto-clean on the repository 'repo1-cache' has ended. 0 artifact(s) were cleaned
2020-06-11 05:32:34,647 [http-nio-8081-exec-254] [INFO ] (o.a.s.s.StorageServiceImpl:143) - Derby database storage size: 22.84 GB (/opt/artifactory/data/derby)
2020-06-11 05:32:34,648 [http-nio-8081-exec-254] [INFO ] (o.a.s.d.DerbyUtils  :67) - Compressing derby binaries table...
2020-06-11 05:32:39,148 [http-nio-8081-exec-254] [INFO ] (o.a.s.s.StorageServiceImpl:143) - Derby database storage size: 22.83 GB (/opt/artifactory/data/derby)
{code}
Could you please advise me how to fix it?

 

 

 

 ","OS: Ubuntu 16.04

Artifactory OSS: Upgrade from 6.13.1 to 6.20.1

Derby DB

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc38ls:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Jun/20 11:22 AM;tiendungitd;I just find out that clicking on the Run GC in the UI currently increases the counter by 1 until reaching 20 executions that will trigger full GC.

Please close this ticket, as I have no right to close it.

Thanks.",,,,,,,,,,
MSSQL - Upgrade fails (6.17 to 6.19.1) due to existing idx dependent on column 'task_context',RTFACT-22464,101325,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,11/Jun/20 12:43 AM,10/Feb/21 9:59 AM,18/Feb/21 8:59 AM,,6.19.1,,,,,,,,,,,,,,0,,,,,,"Upgrade from 6.17 to 6.19.1  fails due to the existing index 'tasks_type_context_idx' is dependent on column 'task_context' 

 

2020-06-09 09:51:22,357 [art-init] [INFO ] (o.a.s.d.v.ArtifactoryDBVersion:123) - Starting database conversion from 6.17.0(61700900) to 6.19.1(61901900)

2020-06-09 09:51:22,367 [art-init] [INFO ] (o.a.s.d.v.c.DbSqlConverterUtil:93) - Starting schema conversion: /conversion/mssql/*mssql_v220_change_tasks_context_size.sql*

2020-06-09 09:51:22,372 [art-init] [ERROR] (o.j.s.u.DbStatementUtils:60) - Failed to execute query: The index 'tasks_type_context_idx' is dependent on column 'task_context'.:

ALTER TABLE tasks ALTER COLUMN task_context VARCHAR(2048)

2020-06-09 09:51:22,386 [art-init] [ERROR] (o.a.c.ConvertersManagerImpl:216) - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: Could not convert DB using v220_change_tasks_context_size converter : The index '*tasks_type_context_idx*' is dependent on column 'task_context'.

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc38lk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Issues in downloading Npm cypress package,RTFACT-22459,101293,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vigneshs,vigneshs,10/Jun/20 1:17 PM,10/Feb/21 10:04 AM,18/Feb/21 8:59 AM,,6.17.0,6.19.0,6.20.0,7.4.3,7.5.5,,,Metadata,Package indexer,Remote Repository ,,,,,2,,,,,,"+Problem Description:+

Currently, it is possible to configure and download the cypress packages by performing the below steps

Step 1: The generic remote repository in Artifactory should be pointing to [https://download.cypress.io|https://download.cypress.io/]

Step 2: Add the below line to the .npmrc file

CYPRESS_DOWNLOAD_MIRROR=https://<user>:<password/Apikey>@artifactory.jfrog.io/artifactory/cypress-remote

Step 3: Now, download the cypress packages using the below command

$ npm install cypress@4.5.0

 

Cypress package installers are available for various platforms(windows/mac)

Let’s consider installing cypress packages in windows and mac by performing Step 1 to step 3 as mentioned above

 

+Actual Issue:+

+Mac Installation:+

Performing installation on mac will be successful, and you can verify by running node_modules/.bin/cypress open command. Please refer to the attached screenshots(mac-one.png, mac-two.png).

Note: The corresponding package will be cached in the cypress-remote repository

 

+Windows Installation:+

Performing installation on windows will fail, and you can observe that Artifactory will try to provide the same cached package in the cypress-remote repository. As the platform is different, the actual windows package has to be downloaded. Please see the screenshot below (windows.png)

What is the expected behaviour?

When the same version of cypress package is installed on different platforms Artifactory should fetch the corresponding package suitable for the platform.

 

Tried setting Metadata Retrieval Cache Period value to 0 to make Artifactory checks for the newer versions always, But it did not help. Instead, the cached package was downloaded when installing on windows platform.

 

+Possible Workarounds:+
 # However, disabling the “store artifacts locally” option in cypress-remote helped in downloading the corresponding package suitable for the platform.
 # Create two different cypress repositories (mac/windows) and point to the repository in .npmrc file

For Example,

+Mac:+ cypress-mac-remote repository pointing to [https://download.cypress.io|https://download.cypress.io/]

.npmrc file of mac should have the below entry

CYPRESS_DOWNLOAD_MIRROR=https://<user>:<password/Apikey>@artifactory.jfrog.io/artifactory/cypress-mac-remote

 

+Windows:+ cypress-windows-remote repository pointing to [https://download.cypress.io|https://download.cypress.io/]

.npmrc file of windows should have the below entry

CYPRESS_DOWNLOAD_MIRROR=https://<user>:<password/Apikey>@artifactory.jfrog.io/artifactory/cypress-windows-remote",,,,,,,,,,,,,,,,,,,"10/Jun/20 1:23 PM;vigneshs;mac-one.png;https://www.jfrog.com/jira/secure/attachment/42931/mac-one.png","10/Jun/20 1:23 PM;vigneshs;mac-two.png;https://www.jfrog.com/jira/secure/attachment/42932/mac-two.png","10/Jun/20 1:23 PM;vigneshs;windows.png;https://www.jfrog.com/jira/secure/attachment/42933/windows.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc38eg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
RPM properties are not calculated upon caching from remote repository,RTFACT-22452,101238,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,10/Jun/20 6:18 AM,10/Feb/21 10:09 AM,18/Feb/21 8:59 AM,,6.17.0,6.19.0,,,,,,,,,,,,,0,PB_Done,,,,,"*+Steps to reproduce:+*
 1. Setup Artifactory with any remote RPM repository.
 2. Download any RPM artifact from the remote repository:
{code:java}
http://ARTIFACTORY-URL/artifactory/rpm-remote/7/fasttrack/x86_64/Packages/compat-exiv2-026-0.26-1.el7.0.1.x86_64.rpm
{code}
3. Check the properties of the artifact, notice there are no ""rpm.metadata"" properties:
 !image-2020-06-10-09-04-00-440.png|width=959,height=355!

The existence of these properties on cached artifacts is important in order for the package to be searchable, etc.

 

+*Workarounds*+

1. The easiest workaround is to navigate to ""Rpm Info"" tab, and then go back to ""Properties"". The navigation to ""Rpm Info"" tab is actually triggering the calculation of these properties.
 !image-2020-06-10-09-07-52-980.png|width=959,height=472!

 2. As an alternative to UI operation, we can trigger the UI API using cURL:
{code:java}
curl -uadmin 'http://ARTIFACTORY-URL/artifactory/ui/views/rpm' -H ""Content-type: application/json"" -d '{""view"":""rpm"",""repoKey"":""rpm-remote-cache"",""path"":""7/fasttrack/x86_64/Packages/compat-exiv2-026-0.26-1.el7.0.1.x86_64.rpm""}' 
{code}

Running the above cURL will also trigger the calculation of these properties.

",,,,,,,,,,,,,,,,,,,"10/Jun/20 6:04 AM;arielk;image-2020-06-10-09-04-00-440.png;https://www.jfrog.com/jira/secure/attachment/42921/image-2020-06-10-09-04-00-440.png","10/Jun/20 6:07 AM;arielk;image-2020-06-10-09-07-52-980.png;https://www.jfrog.com/jira/secure/attachment/42920/image-2020-06-10-09-07-52-980.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3834:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Xray import problems,RTFACT-22451,101224,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ezekielk,ezekielk,09/Jun/20 9:32 PM,10/Feb/21 10:12 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When doing a system export and import on a 7.x instance of artifactory there are a few things that occur after the import which causes your x-ray service to be unavailable. The issues are that your new artifatctory instance will now have your old instances join key and the x-ray portion in the config descriptor is now gone and will not regenerate unless you manually place it in.

 EXPECTED BEHAVIOR:
 * the expected behavior should be that after the import, the join key of the new instance should stay the same.
 * the x-ray snippet in the config descriptor should also not be removed upon a system import

STEPS TO REPRODUCE: (this was reproduced on a personal VM. you can boot up any mill instance that isn't connect to x-ray to do the system export)

1. Create a system export from an Artifactory NOT connected to an Xray
 2. Import this into an Artifactory connected to Xray
 3. Observe that the ""xrayConfig"" block is missing
 The ""join.key"" is also changed, breaking the Xray configuration 
 Only way to work around this is to add this block to the Artifactory again:
 <xrayConfig>
 <enabled>true</enabled>
 <baseUrl>[http://localhost:8046/xray/]</baseUrl>
 <user></user>
 <password></password>
 <artifactoryId>default</artifactoryId>
 <xrayId></xrayId>
 <allowDownloadsXrayUnavailable>false</allowDownloadsXrayUnavailable>
 <allowBlockedArtifactsDownload>false</allowBlockedArtifactsDownload>
 <blockUnscannedTimeoutSeconds>60</blockUnscannedTimeoutSeconds>
 </xrayConfig>

 

An error appears in the Artifactory artifactory-service.log file:

2020-06-09T21:28:03.603Z [jfrt ] [ERROR] [6f22e7325a76eb6c] [o.a.a.x.XrayServiceImpl:751 ] [http-nio-8081-exec-5] - No Xray configured in Artifactory.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3800:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
System Import locks out imported account,RTFACT-22450,101227,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,09/Jun/20 10:09 PM,10/Feb/21 10:15 AM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Import/export,,,,,,,1,,,,,,"*Problem description:*

After running a System Import, the default ""admin"" account's password will be changed to the imported account. However, attempting to log into Artifactory again after the import fails, with no UI errors. A silent 401 error occurs that prevents the login.

*What is the expected behavior:*

After running a System Import, the newly imported ""admin"" account works without issue.

*Steps to reproduce:*


 #  Create a system export from an Artifactory
 #  Import this into another Artifactory
 #  Find that the ""admin:password"" account from the export fails to log in:
Request URL: http://pat.7x.gcp/ui/api/v1/ui/auth/login?_spring_security_remember_me=false
Request Method: POST
Status Code: 401 Unauthorized


*Possible workaround:*

A workaround is to reboot Artifactory, this clears out whatever is causing the login failures. I suspect this error can occur for other accounts that exist prior to the import.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc380o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Add Grafana the second agent,RTFACT-22438,101126,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omriz,omriz,09/Jun/20 7:55 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc37ig:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"It would be good to have ""Pass-phrase"" as blank ",RTFACT-22434,101089,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,santhoshp,santhoshp,09/Jun/20 12:00 AM,10/Feb/21 10:22 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"If we create GPG keys with pass-phrase and uploaded the keys in the Artifactory UI by entering the pass-phrase, after deleting those keys and uploading another set of GPG keys that were generated without the pass-phrase, in UI we are still seeing ""........."" in the passphrase, which is very misleading for us to think the pass-phrase exists. It would be good to have ""Pass-phrase"" as blank in case it isn't specified.

!Screen Shot 2020-06-08 at 4.50.50 PM.png!",,,,,,,,,,,,,,,,,,,"08/Jun/20 11:52 PM;santhoshp;Screen Shot 2020-06-08 at 4.50.50 PM.png;https://www.jfrog.com/jira/secure/attachment/42832/Screen+Shot+2020-06-08+at+4.50.50+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc37aw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Creating perm target with username that is valid but in all caps returns 200, expected 400",RTFACT-22433,101008,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Legomaniac25,Legomaniac25,08/Jun/20 3:06 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.18.1,6.19.0,,,,,,permissions,,,,,,,0,artifactory,permissions,,,,"Customer: Oracle.

When I use the v2 API to create a new permission target, if a username exists but is in all caps, the permission target is created, the API returns 200, but the user is not added to the target. I would expect the API to return a 400 if a requested user cannot be added to the target.
h5. Request JSON:
{code:java}
cat test-allcaps-perms.json
{
    ""name"": ""test-allcaps-perms"",
    ""repo"": {
        ""repositories"": [
            ""manual-pypi-repo""
        ],
        ""actions"": {
            ""users"": {
                ""BRO_MAN_1"": [
                    ""read"",
                    ""annotate"",
                    ""write"",
                    ""delete"",
                    ""manage""
                ],
                ""DUDE_GUY_2"": [
                    ""read"",
                    ""annotate"",
                    ""write"",
                    ""delete"",
                    ""manage""
                ]
            }
        }
    }
}
{code}
h5. Request:
{code:java}
curl -I -T test-allcaps-perms.json -H ""X-JFrog-Art-Api:$ART_TEST_API_KEY"" -H ""Content-Type: application/json"" ""http://localhost:8081/artifactory/api/v2/security/permissions/test-allcaps-perms""
HTTP/1.1 100 ContinueHTTP/1.1 200 OK
Server: Artifactory/6.18.1
X-Artifactory-Id: e98205a7109225f1:3e2cd3cc:172943d63b6:-8000
Content-Length: 0
Date: Mon, 08 Jun 2020 14:40:30 GMT
{code}
h5. Resulting target:
{code:java}
curl -H ""X-JFrog-Art-Api:$ART_TEST_API_KEY"" ""http://localhost:8081/artifactory/api/v2/security/permissions/test-allcaps-perms""
{
  ""name"" : ""test-allcaps-perms"",
  ""repo"" : {
    ""repositories"" : [ ""manual-pypi-repo"" ],
    ""actions"" : {
    },
    ""include-patterns"" : [ ""**"" ],
    ""exclude-patterns"" : [ ]
  }
{code}
 

When the usernames are not in all caps, the request works as expected.
h5. Request JSON:
{code:java}
cat test-correct-case-perms.json
{
    ""name"": ""test-allcaps-perms"",
    ""repo"": {
        ""repositories"": [
            ""manual-pypi-repo""
        ],
        ""actions"": {
            ""users"": {
                ""bro_man_1"": [
                    ""read"",
                    ""annotate"",
                    ""write"",
                    ""delete"",
                    ""manage""
                ],
                ""dude_guy_2"": [
                    ""read"",
                    ""annotate"",
                    ""write"",
                    ""delete"",
                    ""manage""
                ]
            }
        }
    }
}
{code}
h5. Request:
{code:java}
curl -I -T test-correct-case-perms.json -H ""X-JFrog-Art-Api:$ART_TEST_API_KEY"" -H ""Content-Type: application/json"" ""http://localhost:8081/artifactory/api/v2/security/permissions/test-allcaps-perms""
HTTP/1.1 100 ContinueHTTP/1.1 200 OK
Server: Artifactory/6.18.1
X-Artifactory-Id: e98205a7109225f1:3e2cd3cc:172943d63b6:-8000
Content-Length: 0
Date: Mon, 08 Jun 2020 14:43:55 GMT
{code}
h5. Resulting target:
{code:java}
curl -H ""X-JFrog-Art-Api:$ART_TEST_API_KEY"" ""http://localhost:8081/artifactory/api/v2/security/permissions/test-allcaps-perms""
{
  ""name"" : ""test-allcaps-perms"",
  ""repo"" : {
    ""repositories"" : [ ""manual-pypi-repo"" ],
    ""actions"" : {
      ""users"" : {
        ""dude_guy_2"" : [ ""read"", ""annotate"", ""write"", ""delete"", ""manage"" ],
        ""bro_man_1"" : [ ""read"", ""annotate"", ""write"", ""delete"", ""manage"" ]
      }
    },
    ""include-patterns"" : [ ""**"" ],
    ""exclude-patterns"" : [ ]
}
{code}
I would expect the following if there is a user that cannot be added.
h5. Request JSON:
{code:java}
cat test-no-user.json
{
    ""name"": ""test-allcaps-perms"",
    ""repo"": {
        ""repositories"": [
            ""manual-pypi-repo""
        ],
        ""actions"": {
            ""users"": {
                ""bro_man_1"": [
                    ""read"",
                    ""annotate"",
                    ""write"",
                    ""delete"",
                    ""manage""
                ],
                ""not_there"": [
                    ""read"",
                    ""annotate"",
                    ""write"",
                    ""delete"",
                    ""manage""
                ]
            }
        }
    }
}
{code}
h5. Request:
{code:java}
curl -I -T test-no-user.json -H ""X-JFrog-Art-Api:$ART_TEST_API_KEY"" -H ""Content-Type: application/json"" ""http://localhost:8081/artifactory/api/v2/security/permissions/test-allcaps-perms""
HTTP/1.1 100 ContinueHTTP/1.1 400 Bad Request
Server: Artifactory/6.18.1
X-Artifactory-Id: e98205a7109225f1:3e2cd3cc:172943d63b6:-8000
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 08 Jun 2020 14:50:39 GMT
Connection: close{
  ""errors"" : [ {
    ""status"" : 400,
    ""message"" : ""Permission target contains a reference to a non-existing user 'not_there'.""
  } ]
{code}
I have observed this issue both with cURL and Python requests making the HTTP calls to the API.",I have observed this behavior in 6.18.1 running in a Docker container on my local machine and in 6.19.0 in an enterprise environment with HA.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc36u8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Jul/20 7:54 AM;evgenyka;[~guyco] - was raised by Oracle.",,,,,,,,,,
Package view:  # of downloads,RTFACT-22420,100937,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shubhag,shubhag,08/Jun/20 5:02 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"the number of all downloads and the sum of specific version downloads do not match.

Attached is a screenshot",,,,,,,,,,,,,,,,,,,"08/Jun/20 5:02 AM;shubhag;image-2020-06-07-22-02-13-079.png;https://www.jfrog.com/jira/secure/attachment/42802/image-2020-06-07-22-02-13-079.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc36g8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Event not triggered after artifact was deployed to virtual repo,RTFACT-22418,100915,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,yevdoa,shmulikk,shmulikk,07/Jun/20 2:45 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,webhook,,,,,"Steps to reproduce:
 # Create web hook subscription that will trigger an event every time artifact is uploaded to a virtual repo. for example:

{code:java}
{
    ""key"": ""artifact_deployed_virtual_subscription_3"",
    ""description"": ""A description"",
    ""enabled"": true,
    ""event_filter"": {
        ""domain"": ""artifact"",
        ""event_types"": [
            ""deployed""
        ],
        ""criteria"": {
            ""anyVirtual"": true
        }
    },
    ""handlers"": [
        {
            ""handler_type"": ""webhook"",
            ""url"": ""https://enok2zo4hvln8.x.pipedream.net/"",
            ""secret"": ""secret"",
            ""custom_http_headers"": [
                {
                    ""name"": ""X-Custom-Header"",
                    ""value"": ""custom value""
                }
            ]
        }
    ]
}
{code}
2. Upload artifact to virtual repo

*Expected result* - event is sent to the endpoint

*Actual result* - subscription filter strategy is applied but still event dropped because there is no matching subscription.
{code:java}
2020-06-07T13:52:51.539Z [jfrt ] [DEBUG] [5d31f0aae6e9c68d] [.e.c.c.SubscriptionsMatcher:42] [http-nio-8081-exec-5] - Applying subscription filter strategy for artifact_deployed_virtual_subscription_3
2020-06-07T13:52:51.539Z [jfrt ] [DEBUG] [5d31f0aae6e9c68d] [o.j.e.c.EventClient:52 ] [http-nio-8081-exec-5] - Event dropped because there is no matching subscription{code}
{{}}",pro:7.x.master-9970,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc36bk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Onboarding wizard appeared on working Artifactory,RTFACT-22382,100799,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yuriy.tabolin,yuriy.tabolin,05/Jun/20 10:55 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Artifactory,UI,,,,,,0,,,,,,"Hi. We have on-prem artifactory-pro 7.4.3, which was upgraded from 6.18.1 some weeks ago. artifactory works in docker with nginx reverse-proxy.

Artifactory is working fine, uptime is some weeks, but during this time onboarding wizard (initial setup) was appeared twice. Onboarding wizard has appeared when opened a root of artifactory site [https://repo.somedomain.com/], which redirected by nginx to /ui/ The last time it was yesterday.

I think it is probably a bug or some misconfiguration, so artifactory thinks that it is new setup and onboarding wizard is needed.",,,,,,,,,,,,,JFUI-3620,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc35o8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Duplicate replication configs,RTFACT-22378,100744,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prayyapp,prayyapp,04/Jun/20 3:35 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,0,,,,,,"Artifactory accepts duplicate replication configs using this API:

[https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-CreateorReplaceLocalMulti-pushReplication]

After which the configuration will fail to reload on the site with this error:

Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: Duplicate key

Artifactory should check the existing replication config and reject duplicate configs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc35e8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory sometimes doesn't send notifications to repo owners,RTFACT-22361,100565,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,SvenEric,SvenEric,03/Jun/20 1:20 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.11.6,,,,,,,,,,,,,,0,,,,,,"A user doesn't get notifications about new uploads in his repo. The user has logged in via SAML 2.0. When clicking on ""check external status"" the user is marked as ""inactive"". 

Maybe the missing notification is related to another effect: The user can login using Crowd or an SAML based authentication. He has different email addresses in both realms, so the mail address in artifactory changes dependent on the login process.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc34e0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Jun/20 5:46 PM;balajis;Hi Sven-Eric Evers,

The issue seems to be fixed on later versions of Artifactory i.e. version 7, I have tested this scenario in the latest versions and I could see it does work. We would recommend you to please try to upgrade your instance to at least the above mentioned Artifactory versions.",,,,,,,,,,
NPE on GoVirtualRepositoryWhitelistConverter due to missing externalDependencies - causing upgrade failure,RTFACT-22352,100502,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,03/Jun/20 7:48 AM,10/Feb/21 10:47 AM,18/Feb/21 8:59 AM,,6.10.0,6.19.1,,,,,,,,,,,,,0,,,,,,"+Steps to reproduce:+
1. Install Artifactory 6.9.6.
2. Quick setup the go repositories (make sure virtual is created).
3. Remove the below section from the Config Descriptor:
{code:java}
            <externalDependencies>
                <enabled>true</enabled>
                <patterns>
                    <pattern>**/github.com/**</pattern>
                    <pattern>**/go.googlesource.com/**</pattern>
                    <pattern>**/gopkg.in/**</pattern>
                </patterns>
            </externalDependencies>
{code}
4. Upgrade to version 6.19.1 (probably will happen with any version above 6.10.0).

Upgrade will fail with the below:
{code:java}
2020-06-03 10:40:33,553 [art-init] [INFO ] (o.a.c.ConvertersManagerImpl:143) - Triggering POST_INIT conversion, from 6.9.6 to org.artifactory.version.ArtifactoryVersionImpl@7d8d17ca
2020-06-03 10:40:33,554 [art-init] [INFO ] (o.a.c.p.v.GoCacheRemoteRepositoryConverter:67) - Starting Go cache repositories converter
2020-06-03 10:40:33,555 [art-init] [INFO ] (o.a.c.p.v.GoCacheRemoteRepositoryConverter:69) - Deleting deprecated cache repositories goget.html files
2020-06-03 10:40:33,595 [art-init] [INFO ] (o.a.c.p.v.GoCacheRemoteRepositoryConverter:87) - Found 0 goget.html file(s) in remote repository gocenter
2020-06-03 10:40:33,598 [art-init] [INFO ] (o.a.c.p.v.GoVirtualRepositoryWhitelistConverter:68) - Whitelisting golang.org and k8s.io to all Go virtual repositories with default patterns
2020-06-03 10:40:33,631 [art-init] [ERROR] (o.a.c.ConvertersManagerImpl:216) - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: null
2020-06-03 10:40:33,635 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: null
java.lang.reflect.InvocationTargetException: null
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: java.lang.RuntimeException: null
	at org.artifactory.converter.ConvertersManagerImpl.handleException(ConvertersManagerImpl.java:223)
	at org.artifactory.converter.ConvertersManagerImpl.convert(ConvertersManagerImpl.java:149)
	at org.artifactory.converter.ConvertersManagerImpl.afterServiceConvert(ConvertersManagerImpl.java:177)
	at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:280)
	at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:154)
	... 7 common frames omitted
Caused by: java.lang.NullPointerException: null
	at org.artifactory.converter.postinit.v103.GoVirtualRepositoryWhitelistConverter.addReposToWhitelist(GoVirtualRepositoryWhitelistConverter.java:78)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)
	at org.artifactory.converter.postinit.v103.GoVirtualRepositoryWhitelistConverter.convert(GoVirtualRepositoryWhitelistConverter.java:73)
	at org.artifactory.security.SecurityServiceImpl.doAsSystem(SecurityServiceImpl.java:3143)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy164.doAsSystem(Unknown Source)
	at org.artifactory.converter.postinit.v103.GoVirtualRepositoryWhitelistConverter.convert(GoVirtualRepositoryWhitelistConverter.java:64)
	at org.artifactory.converter.postinit.PostInitVersions.lambda$convert$2(PostInitVersions.java:67)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)
	at org.artifactory.converter.postinit.PostInitVersions.convert(PostInitVersions.java:67)
	at org.artifactory.converter.postinit.PostInitConverterAdapter.convert(PostInitConverterAdapter.java:60)
	at org.artifactory.converter.ConvertersManagerImpl.runConverters(ConvertersManagerImpl.java:261)
	at org.artifactory.converter.ConvertersManagerImpl.convert(ConvertersManagerImpl.java:144)
	... 10 common frames omitted
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc340g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Jun/20 8:05 AM;arielk;as a workaround:

1. $ cp $ARTIFACTORY_HOME/etc/artifactory.config.latest.xml $ARTIFACTORY_HOME/etc/artifactory.config.import.xml
2. update artifactory.config.import.xml with a valid repository config.
3. restart Artifactory.",,,,,,,,,,
ClientAbortException during upload results in 503 response when sharding,RTFACT-22340,100372,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,02/Jun/20 11:48 AM,10/Feb/21 12:09 PM,18/Feb/21 8:59 AM,,7.4.3,7.5.0,,,,,,,,,,,,,3,PB_Done,,,,,"When using sharding binary provider, if an upload request is terminated during the upload, it will cause:
1. Artifactory will respond with HTTP status code of 503, while I would expect a 499:
{code:java}
2020-06-02T10:54:35.408Z|307c5fa7bf4b424|82.81.195.5|admin|PUT|/generic-local/1589834820101.zip|503|1153074080|0|19528|curl/7.64.1
{code}
2. Very ugly exceptions and ERRORs will be noticed in the Artifactory logs:

{code:java}
2020-06-02T10:54:15.883Z [jfrt ] [INFO ] [307c5fa7bf4b424 ] [o.a.e.UploadServiceImpl:399   ] [http-nio-8081-exec-2] - Deploy to 'generic-local:1589834820101.zip' Content-Length: 1153074080
2020-06-02T10:54:35.365Z [jfrt ] [WARN ] [307c5fa7bf4b424 ] [.a.a.f.e.c.EventualStorage:158] [pool-33-thread-2    ] - Caught exception while saving incoming stream to file /opt/jfrog/artifactory/var/data/artifactory/eventual/_pre/dbRecord412617330208283998.bin : Failed to read stream: Failed to read stream from inputStream to buffer. deleting corrupted file
2020-06-02T10:54:35.366Z [jfrt ] [ERROR] [307c5fa7bf4b424 ] [s.b.c.RemoteBinaryProvider:464] [pool-33-thread-1    ] - Failed to query remote Binary Provider node art2 at http://localhost:8046/artifactory/binarystore: null
2020-06-02T10:54:35.386Z [jfrt ] [ERROR] [307c5fa7bf4b424 ] [ShardingBinaryProviderImpl:327] [http-nio-8081-exec-2] - Failed to stream binary to sub provider: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream from inputStream to buffer
java.util.concurrent.ExecutionException: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream from inputStream to buffer
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.waitForAllProviders(ShardingBinaryProviderImpl.java:323)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.writeToSubProviders(ShardingBinaryProviderImpl.java:254)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.addStream(ShardingBinaryProviderImpl.java:225)
	at org.jfrog.storage.binstore.providers.FileCacheBinaryProviderImpl.addStream(FileCacheBinaryProviderImpl.java:145)
	at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.addBinary(BinaryServiceImpl.java:392)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy219.addBinary(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1895)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy176.saveResource(Unknown Source)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:570)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:552)
	at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:427)
	at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:418)
	at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:400)
	at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:222)
	at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:188)
	at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:131)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy221.upload(Unknown Source)
	at org.artifactory.webapp.servlet.RepoFilter.doUpload(RepoFilter.java:284)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:176)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:513)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:379)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:249)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream from inputStream to buffer
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:36)
	at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2314)
	at org.apache.commons.io.IOUtils.copy(IOUtils.java:2270)
	at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2291)
	at org.apache.commons.io.IOUtils.copy(IOUtils.java:2246)
	at org.apache.commons.io.FileUtils.copyToFile(FileUtils.java:1530)
	at org.apache.commons.io.FileUtils.copyInputStreamToFile(FileUtils.java:1506)
	at org.jfrog.storage.binstore.providers.tools.FilePersistenceHelper.saveStreamToTempFile(FilePersistenceHelper.java:55)
	at org.artifactory.addon.filestore.eventual.cluster.EventualStorage.addStream(EventualStorage.java:152)
	at org.artifactory.addon.filestore.eventual.cluster.EventualClusterBinaryProvider.addStream(EventualClusterBinaryProvider.java:157)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.lambda$addStreamsInParallel$4(ShardingBinaryProviderImpl.java:362)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:25)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 common frames omitted
Caused by: org.jfrog.storage.binstore.concurrent.ConcurrentBufferInputStreamException: Failed to read stream from inputStream to buffer
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryStreamLeg.read(ConcurrentBufferInputBinaryStreamLeg.java:77)
	at java.base/java.io.InputStream.read(InputStream.java:205)
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:34)
	... 15 common frames omitted
Caused by: org.jfrog.storage.binstore.concurrent.ConcurrentBufferInputStreamException: Failed to read 32768 bytes stream from inputStream to buffer
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryProviderStream.reloadBuffer(ConcurrentBufferInputBinaryProviderStream.java:63)
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryStreamLeg.read(ConcurrentBufferInputBinaryStreamLeg.java:65)
	... 17 common frames omitted
Caused by: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream: java.io.EOFException: Unexpected EOF read on the socket
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:44)
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryProviderStream.reloadBuffer(ConcurrentBufferInputBinaryProviderStream.java:55)
	... 18 common frames omitted
Caused by: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: java.io.EOFException: Unexpected EOF read on the socket
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:44)
	at org.jfrog.storage.binstore.providers.SavedToFileInputStream.read(SavedToFileInputStream.java:83)
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:42)
	... 19 common frames omitted
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.EOFException: Unexpected EOF read on the socket
	at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:348)
	at org.apache.catalina.connector.InputBuffer.checkByteBufferEof(InputBuffer.java:663)
	at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:370)
	at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:183)
	at java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:290)
	at java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:351)
	at org.jfrog.storage.binstore.common.Sha1Sha2Md5ChecksumInputStream.read(Sha1Sha2Md5ChecksumInputStream.java:134)
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:42)
	... 21 common frames omitted
Caused by: java.io.EOFException: Unexpected EOF read on the socket
	at org.apache.coyote.http11.Http11InputBuffer.fill(Http11InputBuffer.java:742)
	at org.apache.coyote.http11.Http11InputBuffer.access$300(Http11InputBuffer.java:40)
	at org.apache.coyote.http11.Http11InputBuffer$SocketInputBuffer.doRead(Http11InputBuffer.java:1092)
	at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:140)
	at org.apache.coyote.http11.Http11InputBuffer.doRead(Http11InputBuffer.java:263)
	at org.apache.coyote.Request.doRead(Request.java:581)
	at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:344)
	... 28 common frames omitted
2020-06-02T10:54:35.390Z [jfrt ] [ERROR] [307c5fa7bf4b424 ] [ShardingBinaryProviderImpl:327] [http-nio-8081-exec-2] - Failed to stream binary to sub provider: org.apache.http.client.ClientProtocolException
java.util.concurrent.ExecutionException: org.apache.http.client.ClientProtocolException
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.waitForAllProviders(ShardingBinaryProviderImpl.java:323)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.writeToSubProviders(ShardingBinaryProviderImpl.java:254)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.addStream(ShardingBinaryProviderImpl.java:225)
	at org.jfrog.storage.binstore.providers.FileCacheBinaryProviderImpl.addStream(FileCacheBinaryProviderImpl.java:145)
	at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.addBinary(BinaryServiceImpl.java:392)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy219.addBinary(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1895)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy176.saveResource(Unknown Source)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:570)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:552)
	at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:427)
	at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:418)
	at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:400)
	at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:222)
	at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:188)
	at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:131)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy221.upload(Unknown Source)
	at org.artifactory.webapp.servlet.RepoFilter.doUpload(RepoFilter.java:284)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:176)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:513)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:379)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:249)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.apache.http.client.ClientProtocolException: null
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:187)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.jfrog.client.http.CloseableHttpClientDecorator.doExecute(CloseableHttpClientDecorator.java:107)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at org.jfrog.storage.binstore.client.RemoteBinaryProvider.execute(RemoteBinaryProvider.java:438)
	at org.jfrog.storage.binstore.client.RemoteBinaryProvider.addStreamInternal(RemoteBinaryProvider.java:163)
	at org.jfrog.storage.binstore.client.RemoteBinaryProvider.addStream(RemoteBinaryProvider.java:145)
	at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.lambda$addStreamsInParallel$4(ShardingBinaryProviderImpl.java:362)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:25)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	... 1 common frames omitted
Caused by: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:108)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	... 13 common frames omitted
Caused by: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream from inputStream to buffer
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:36)
	at org.apache.http.entity.InputStreamEntity.writeTo(InputStreamEntity.java:133)
	at org.apache.http.impl.execchain.RequestEntityProxy.writeTo(RequestEntityProxy.java:121)
	at org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:156)
	at org.apache.http.impl.conn.CPoolProxy.sendRequestEntity(CPoolProxy.java:152)
	at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:238)
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	... 15 common frames omitted
Caused by: org.jfrog.storage.binstore.concurrent.ConcurrentBufferInputStreamException: Failed to read stream from inputStream to buffer
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryStreamLeg.read(ConcurrentBufferInputBinaryStreamLeg.java:77)
	at java.base/java.io.InputStream.read(InputStream.java:205)
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:34)
	... 24 common frames omitted
Caused by: org.jfrog.storage.binstore.concurrent.ConcurrentBufferInputStreamException: Failed to read 32768 bytes stream from inputStream to buffer
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryProviderStream.reloadBuffer(ConcurrentBufferInputBinaryProviderStream.java:63)
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryStreamLeg.read(ConcurrentBufferInputBinaryStreamLeg.java:65)
	... 26 common frames omitted
Caused by: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream: java.io.EOFException: Unexpected EOF read on the socket
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:44)
	at org.artifactory.addon.filestore.multiple.concurrent.blocking.ConcurrentBufferInputBinaryProviderStream.reloadBuffer(ConcurrentBufferInputBinaryProviderStream.java:55)
	... 27 common frames omitted
Caused by: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: java.io.EOFException: Unexpected EOF read on the socket
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:44)
	at org.jfrog.storage.binstore.providers.SavedToFileInputStream.read(SavedToFileInputStream.java:83)
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:42)
	... 28 common frames omitted
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.EOFException: Unexpected EOF read on the socket
	at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:348)
	at org.apache.catalina.connector.InputBuffer.checkByteBufferEof(InputBuffer.java:663)
	at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:370)
	at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:183)
	at java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:290)
	at java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:351)
	at org.jfrog.storage.binstore.common.Sha1Sha2Md5ChecksumInputStream.read(Sha1Sha2Md5ChecksumInputStream.java:134)
	at org.jfrog.storage.binstore.ifc.ClientStream.read(ClientStream.java:42)
	... 30 common frames omitted
Caused by: java.io.EOFException: Unexpected EOF read on the socket
	at org.apache.coyote.http11.Http11InputBuffer.fill(Http11InputBuffer.java:742)
	at org.apache.coyote.http11.Http11InputBuffer.access$300(Http11InputBuffer.java:40)
	at org.apache.coyote.http11.Http11InputBuffer$SocketInputBuffer.doRead(Http11InputBuffer.java:1092)
	at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:140)
	at org.apache.coyote.http11.Http11InputBuffer.doRead(Http11InputBuffer.java:263)
	at org.apache.coyote.Request.doRead(Request.java:581)
	at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:344)
	... 37 common frames omitted
2020-06-02T10:54:35.406Z [jfrt ] [WARN ] [307c5fa7bf4b424 ] [.r.ArtifactoryResponseBase:125] [http-nio-8081-exec-2] - Sending HTTP error code 503: 503 : Failed to stream binary to sub provider: org.jfrog.storage.binstore.ifc.ClientInputStreamException: Failed to read stream: Failed to read stream from inputStream to buffer
{code}


+Steps to reproduce:+
1. Setup Artifactory 7.4.3 HA with binarystore.xml:
{code:java}
<config version=""v1"">
    <chain template=""cluster-s3""/>
    <provider type=""s3"" id=""s3"">
        <bucketName>NAME</bucketName>
        <endpoint>http://s3.amazonaws.com</endpoint>
        <identity>IDENTITY</identity>
        <credential>CREDS</credential>
        <path>PATH</path>
    </provider>
</config>
{code}

2. Start deploying a large file using cURL and terminate the upload in the middle using CTRL+C.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc33a0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Aug/20 12:56 AM;mcarlton;I have this same problem, but it's occuring during an upload from another artifactory cluster during replication. We are not interrupting it during the replication, but this error seems to be occurring anyways.",,,,,,,,,,
"Coping ""Yum Groups"" from one repo to another, losing group information",RTFACT-22321,100186,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rami.bechara,rami.bechara,01/Jun/20 2:19 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.11.6,,,,,,,YUM,,,,,,,0,,,,,,"Hi,
 
Running: Artifactory Professional 6.11.6 rev 61106900
 
Problem:
I've an Artifactory repository(REPO1) containing a ""Yum Group""(YUMGROUP) and when I copy this YUMGROUP from one Artifactory repository(REPO1) to another Artifactory repository(REPO2), I'm losing the ""Yum Group"" definition.
I copy the ""Yum Group"" using Artifactory web interface by doing a right-click on YUMGROUP and selecting ""Copy"".
 
Configuration:
Each repositories(REPO1,REPO2) are configured with:
RPM Group File Names: comps.xml,groups.xml
The ""Yum Group"" file name is *comps.xml* and was pushed to Artifactory within a tar file with the following structure:
repodata/comps.xml
YUMGROUP/file1.rpm
YUMGROUP/file2.rpm
...
 
Tests on REPO1 to make sure the ""Yum Group"" is well defined and working fine:
- Using: ""yum grouplist YUMGROUP"" , Yum list ""YUMGROUP"" as a known Yum Group.
- On Artifactory in the repodata directory I can see the file  fd3b0bd11229e31279ade1fdf5f61d21f9945748-*comps.xml*
 
Tests on the destination Repository(REPO2)""
- Using: ""yum grouplist YUMGROUP"" , Yum list ""YUMGROUP"" return the following message:
*Warning: no environments/groups match: intelerad-cluster*
- On Artifactory in the repodata directory I cannot find any file with **comps.xml* 
 
 
Also, when I distribute REPO1/YUMGROUP to bintray, the Yum Group definition isn't present in BinTray.
 
If you need any information I'll be pleased to provide it to you.
 
Regards,",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc324g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Investigate large Debian repository move operation issues,RTFACT-22318,100165,Bug,Done,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,alexeiv,shayb,shayb,01/Jun/20 12:04 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Investigate large Debian repository move operation issues,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4ih:v",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
REST search by vcsRevision,RTFACT-22312,100130,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,barry.lapthorn@r3.com,barry.lapthorn@r3.com,01/Jun/20 9:23 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,REST API,,,,,,,0,,,,,,"Hi, not entirely sure where to log this - I've searched the docs and I can't find an answer to this, so raising this as a bug.

There's a `vcsRevision` field (property?) on most artifacts which contains the git `sha1` for that build.

I want to search by that and get back all ""build info"" objects.

How do I use the REST API to search for all builds for a given git commit?

I looked here:

[https://www.jfrog.com/confluence/display/RTF6X/Artifactory+REST+API#ArtifactoryRESTAPI-SEARCHES]

and tried a few I though property search would work (but doesn't).  I've tried most of the others and I'm not getting any success.

Thanks,

Barry.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc31ts:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Connection leak when client abort connection before TLS handshake complete,RTFACT-22307,100065,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yufeng,yufeng,31/May/20 9:00 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.19.1,6.20.0,6.8.15,,,,,,,,,,,,0,,,,,,"When TLS connection is aborted on client side before TLS handshake is completed, Artifactory doesn't close the connection on server side and leave the connection in CLOSE-WAIT state. One way to reproduce is:

#  Configure Tomcat to use incorrect Java keystore password (so TLS handshake could never be established and give us time to abort connection on client side)
 Example config
{noformat}
    <Connector port=""8094"" protocol=""HTTP/1.1""
      SSLEnabled=""true""
      scheme=""https""
      secure=""true""
      clientAuth=""false""
      sslProtocol=""TLS""
      sslEnabledProtocols=""SSLv2Hello,TLSv1,TLSv1.1,TLSv1.2""
      keystoreFile=""conf/ssl.keystore""
      keystorePass=""incorrect""
      maxThreads=""1000""
      minSpareThreads=""200""
      enableLookups=""false""
      disableUploadTimeout=""true""
      acceptCount=""1000""
      connectionTimeout=""40000""
      URIEncoding=""UTF-8""
      maxConnections=""-1""
      maxParameterCount=""10000""
      sendReasonPhrase=""true""
      relaxedPathChars='[]'
      relaxedQueryChars='[]'
    />
{noformat}

#   Restart Artifactory and list connection using ss
{noformat}
ss -a 'sport = :8094'
Netid State      Recv-Q Send-Q                                         Local Address:Port                                                          Peer Address:Port
tcp   LISTEN     0      128                                                        *:8094                                                                     *:*
{noformat}

# Use openssl to start TLS connection
{noformat}
openssl s_client -connect localhost:8094 -showcerts
{noformat}
openssl will hang because it's waiting for handshake response from Artifactory server which doesn't respond because of incorrect keystore 
 ss shows one connection established which is expected
{noformat}
ss -a 'sport = :8094'
Netid State      Recv-Q Send-Q                                         Local Address:Port                                                          Peer Address:Port
tcp   LISTEN     1      128                                                        *:8094                                                                     *:*
tcp   ESTAB      301    0                                                  127.0.0.1:8094                                                             127.0.0.1:39581
{noformat}

# kill openssl on client side using ""pkill openssl""
{noformat}
[yufeng@yufeng-ld2 ~]$ openssl s_client -connect localhost:8094 -showcerts
CONNECTED(00000003)
Terminated
{noformat}

 # Run ss again on server side and there is a connection leave in CLOSE-WAIT
{noformat}
ss -a 'sport = :8094'
Netid State      Recv-Q Send-Q                                         Local Address:Port                                                          Peer Address:Port
tcp   LISTEN     1      128                                                        *:8094                                                                     *:*
tcp   CLOSE-WAIT 302    0                                                  127.0.0.1:8094                                                             127.0.0.1:39581
{noformat}

This issue happens on Artifactory v6.19 as well as v6.8 (didn't test other versions)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc31fs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
JFrog Artifactory intermittently rejects authentication with 403 forbidden,RTFACT-22284,99938,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lg8977,lg8977,29/May/20 10:06 AM,21/Jan/21 4:52 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,RPM,,,,,,,5,artifactory,permissions,repository,,,"Good day,

We would like your assistance to check on a possible bug with JFrog Artifactory 7.4.

We are having a hard time configuring zypper clients (SLES and OpenSUSE) to work with our RPM Repository due to some ""authentication"" issues. At first, we thought it was just an issue with zypper and opensuse so we first focused on our efforts to make things work with zypper.

Error:
{code:java}
opensuse:~ # zypper refresh myapp
Retrieving repository 'myapp' metadata ....................................................................................................................................[error]
Repository 'myapp' is invalid.
[myapp|https://myuser@rpm.example.com/myapp-release-rpm/stable/myapp/2019/3/] Valid metadata not found at specified URL
History:
 - [myapp|https://myuser@rpm.example.com/myapp-release-rpm/stable/myapp/2019/3/] Repository type can't be determined.

Please check if the URIs defined for this repository are pointing to a valid repository.
Skipping repository 'myapp' because of the above error.
Could not refresh the repositories because of errors.
opensuse:~ #
{code}

But these authentication-related errors started to come up every now and then with yum clients as well (centOS), although with YUM it is very rare.

In a StackOverflow [post|https://stackoverflow.com/questions/61589586/opensuse-%60zypper%60-error-valid-metadata-not-found-at-specified-url-repository-ty], I described the issue in more detail.


----


So I tried doing man-in-the-middle to see what's happening under the hood, and this is the sequence with zypper:

h3. Scenario 1 - successful authentication

The following is the sequence of a zypper refresh --repo myrepo:

(1) zypper sends an HTTP HEAD request with the base64-encoded username::

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(2) jfrog responds with HTTP 401 Unauthorized with the WWW-Authenticate header:

{code:java}
HTTP/1.1 401 Unauthorized
Date: Thu, 28 May 2020 08:20:04 GMT
Content-Type: application/json;charset=ISO-8859-1
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
WWW-Authenticate: Basic realm=""Artifactory Realm""
{code}

(3) zypper sends another HTTP HEAD request, this time with the base64-encoded username:password:

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(4) jfrog finally responds with an HTTP 200.

{code:java}
HTTP/1.1 200 OK
Date: Thu, 28 May 2020 08:20:04 GMT
Content-Type: application/xml
Content-Length: 1394
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
Last-Modified: Fri, 08 May 2020 10:25:19 GMT
Accept-Ranges: bytes
X-Artifactory-Filename: repomd.xml
Cache-Control: no-store
{code}

These are logged by Artifactory:

artifactory-request.log:

{code:java}
2020-05-28T08:20:34.566Z [5f78297c2aeabaa8] [DENIED LOGIN]   for client : username / 213.1.1.1. 
2020-05-28T08:20:34.870Z [570978212a5318e3] [ACCEPTED DOWNLOAD] myapp-release-rpm-cache:stable/myapp/2019/3/repodata/repomd.xml  for client : username / 213.1.1.1.
{code}

artifactory-access.log:

{code:java}
2020-05-28T08:20:34.566Z|5f78297c2aeabaa8|213.2.2.2|non_authenticated_user|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|401|-1|0|8|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
2020-05-28T08:20:34.721Z|8018b7cbc9c424e8|213.2.2.2|username|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|200|-1|1394|3|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
2020-05-28T08:20:34.870Z|570978212a5318e3|213.2.2.2|username|GET|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|200|-1|1394|2|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
...
{code}

So basically, zypper comes in with a HEAD request, JFrog says ""you're not authenticated"", zypper responds back and tries to authenticate, and finally JFrog authenticates zypper. Makes sense so far.

h3. Scenario 2 - 403 forbidden

Do some work, then run the same zypper refresh --repo myrepo command after a few minutes or so, and here is the result:

(1) zypper sends an HTTP HEAD request with the base64-encoded username::

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(2) jfrog responds with HTTP 401 Unauthorized with the WWW-Authenticate header:

{code:java}
HTTP/1.1 401 Unauthorized
Date: Thu, 28 May 2020 08:30:44 GMT
Content-Type: application/json;charset=ISO-8859-1
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
WWW-Authenticate: Basic realm=""Artifactory Realm""
{code}

(3) zypper sends another HTTP HEAD request, this time with the base64-encoded username:password:

{code:java}
HEAD /myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml HTTP/1.1
Host: rpm.example.com
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
User-Agent: ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
Accept: */*
Connection: close
{code}

(4) this time, jfrog responds with 403 Forbidden instead of 200 OK.

{code:java}
HTTP/1.1 403 Forbidden
Date: Thu, 28 May 2020 08:30:44 GMT
Content-Type: application/json;charset=ISO-8859-1
Connection: close
Server: Artifactory/7.4.3 70403900
X-Artifactory-Id: 2148103ba10eacbb:-16f1c4c1:172093a231a:-8000
X-Artifactory-Node-Id: artifactory-server
WWW-Authenticate: Basic realm=""Artifactory Realm""
{code}

artifactory-request.log:

{code:java}
2020-05-28T08:30:44.496Z [46c81a2450623166] [DENIED LOGIN]   for client : username / 213.1.1.1.
2020-05-28T08:30:44.630Z [769ed41c652daa7a] [DENIED LOGIN]   for client : username / 213.1.1.1.
{code}

artifactory-access.log:

{code:java}
2020-05-28T08:30:44.496Z|46c81a2450623166|213.2.2.2|non_authenticated_user|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|401|-1|0|9|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
2020-05-28T08:30:44.630Z|769ed41c652daa7a|213.2.2.2|non_authenticated_user|HEAD|/myapp-release-rpm/stable/myapp/2019/3/repodata/repomd.xml|403|-1|0|1|ZYpp 17.19.0 (curl 7.60.0) openSUSE-Leap-15.1-x86_64
{code}


----


Notice that zypper sends the same Authorization header value when asked to authenticate, but on the second scenario, JFrog fails to authenticate the request.

Did anybody have this same issue with JFrog before? We are guessing this is an issue with JFrog 7 since ours was just recently upgraded, but there is no way for us to verify this. And unfortunately for us, we are on the paid plan which doesn't even have a support license.

Any suggestions and comments will be very much appreciated.
",JFrog Platform 7.4.3 running in Kubernetes,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc30og:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Sep/20 10:37 AM;rafa.saez;We're noticing a similar ""intermiten authentication"" behavior with maven repo access by a technical user. The maven upload process is too simple to be failing, but authentication on server side gets rejected in the first place and accepted later.
 We're using the helm chart based deployment of Artifactory Commercial license 7.4.3 rev 70403900
|2020-09-14T06:53:28.980Z|10.112.0.66|non_authenticated_user|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom|401|2150|0|0|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:53:29.055Z|10.112.0.66|non_authenticated_user|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.jar|401|20055|0|1|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:53:30.026Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom|201|2150|0|875|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:53:30.198Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom.sha1|201|40|0|19|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:53:30.381Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom.md5|201|32|0|19|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:26.534Z|10.112.0.221|non_authenticated_user|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.jar|401|20055|0|0|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:26.534Z|10.112.0.66|non_authenticated_user|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom|401|2150|0|0|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:26.825Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.jar|201|20055|0|66|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:26.969Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom|201|2150|0|180|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:27.242Z|10.112.0.190|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.jar.sha1|201|40|0|20|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:27.344Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom.sha1|201|40|0|24|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:27.392Z|10.112.0.190|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.jar.md5|201|32|0|22|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:27.602Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom.md5|201|32|0|19|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:28.363Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/maven-metadata.xml|201|349|0|62|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:28.528Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/maven-metadata.xml.sha1|200|40|0|7|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:28.744Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/maven-metadata.xml.md5|200|32|0|6|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:29.055Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6-sources.jar|201|9628|0|57|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:29.271Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6-sources.jar.sha1|201|40|0|18|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:29.510Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6-sources.jar.md5|201|32|0|21|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:30.261Z|10.112.0.66|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6-javadoc.jar|201|449209|0|62|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:30.459Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6-javadoc.jar.sha1|201|40|0|18|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T06:55:30.623Z|10.112.0.221|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6-javadoc.jar.md5|201|32|0|30|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T07:27:41.639Z|10.112.0.97|non_authenticated_user|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom|401|2150|0|0|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T07:27:41.803Z|10.112.0.97|non_authenticated_user|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.jar|401|20055|0|1|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T07:27:43.013Z|10.112.0.97|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom|201|2150|0|1125|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T07:27:43.140Z|10.112.0.97|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom.sha1|201|40|0|22|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|
|2020-09-14T07:27:43.238Z|10.112.0.97|bot-REDACTED@bots.flowable.com|PUT|/mimacom-customers-release-local/ch/REDACTED/util/web-utils-logging-filter/0.0.6/web-utils-logging-filter-0.0.6.pom.md5|201|32|0|21|Apache-Maven/3.6.3 (Java 11.0.7; Windows Server 2016 10.0)|

","30/Oct/20 4:59 AM;anil.sharma@alertenterprise.com;We are also facing similar issue randomly while pulling jars from jfrog cloud using maven. 403 authorization issues. The next time we run, it works. This is creating issues in our delivery pipelines badly","21/Jan/21 4:52 PM;andersonc;I am also running into the same issues. Where you able to find a solution?",,,,,,,,
Anonymous user has read access via REST API for nonexistent/empty locations that it shouldn't,RTFACT-22282,99915,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,mattheww,mattheww,mattheww,28/May/20 8:25 PM,10/Feb/21 12:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
-enable anonymous access
-remove the ""Anything"" permission target, so that the anonymous user doesn't have read access to any repo
-anonymously view a path for a repo with no content, like http://mill.jfrog.info:12116/artifactory/example-repo-local/. See that the anonymous user can view the repo (even though there is no content)
-see same behavior for nonexistent path, like http://mill.jfrog.info:12116/artifactory/example-repo-local/.svn/
When the path has content in it though (for example if you deploy an artifact to example-repo-local), then the anonymous user receives a 401 Unauthorized as expected.

Expected behavior:
The anonymous user receives a 401 Unauthorized when viewing the nonexistent/empty location.

This behavior is a security concern ",,,,,,,,,,,,,RTFACT-19252,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc30jc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
How can I add arm64 to debian.default.architectures?,RTFACT-22279,99900,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,neal.macdonald,neal.macdonald,28/May/20 1:56 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,7.3.0,,,,,,,,,,,,,,0,,,,,,"Current defaults for debian.default.architectures are i386,amd64. How can I add arm64. I've tried adding to system.properties but that doesn't work. 

 
 If there's a Debian Repository Component that contains no arm64 packages then it doesn't create a <distribution>/<component>/binary-arm64/Packages file (which it does do in the case of i386 & amd64). This means that packages with architecture *all* aren't visible to apt running on arm64 machines.
  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc30g8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"There are duplicate data in ""Export Data""",RTFACT-22277,99861,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fanjinhui,fanjinhui,28/May/20 9:09 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,Xray,,,,,,,0,,,,,,"    A.   As a result of the BUILD scanning method, the quantity obtained from the watch may be wrong (less than the actual quantity). The quantity obtained from the watch is counted based on the vulnerability. Because there is one vulnerability corresponding to multiple open source Components (only one open source component name is shown here, which is random), so the number will be less than the actual number.
    B.  BUILD scanning method can be viewed from the component interface, but the number may be wrong (less than the actual number), the reason is the same as A
    C.  BUILD scanning method, you can export the csv file from the component menu, but the number may be wrong (more than the real number). The reason is that if you agree to a build name, it has been executed multiple times, and how much is saved in the factory The result of the second build will be counted repeatedly
     D.  The results of the package scanning method can be viewed from the component interface. The number may be wrong (less than the actual number). The number obtained from the interface is counted based on the vulnerability. Because there is one vulnerability corresponding to multiple open source Components (only one open source component name is shown here, which is random), so the number will be less than the actual number.
    E.   As a result of the package scanning method, you can export the csv file from the component menu, but the number may be wrong (more than the actual number), because if there are multiple copies of a product package under the same path (such as the snapshot path) , Or there are war and zip files with the same name in the same path, the number of vulnerabilities will be counted repeatedly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc307s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"29/May/20 5:23 AM;fanjinhui; 

１．　Artifacts:  maven_com.gmrz-uap-monitorabc-1.0-SNAPSHOT.war 

             This artifact is a snapshot version , this artifacts has been uploaded twice

             The exported data is repeated twice.  

 
       |Summary|Severity|Type|Provider|Component|Infected Version|Fix Version|Edited|
|In Apache Log4j 2.x before 2.8.2, when using the TCP socket server or UDP socket server to receive serialized log events from another application, a specially crafted binary payload can be sent that, when deserialized, can execute arbitrary code.|High|security|JFrog|org.apache.logging.log4j:log4j-core|2.0-alpha1,2.0-alpha2,2.0-beta1,2.0-beta2,2.0-beta3,2.0-beta4,2.0-beta5,2.0-beta6,2.0-beta7,2.0-beta8,2.0-beta9,2.0-rc1,2.0-rc2,2.0 ≤ Version ≤ 2.0.2,2.1 ≤ Version ≤ 2.4.1,2.5 ≤ Version ≤ 2.6.2,2.7 ≤ Version ≤ 2.8.1|2.8.2|2019-12-11T10:01:44Z|
|In Apache Log4j 2.x before 2.8.2, when using the TCP socket server or UDP socket server to receive serialized log events from another application, a specially crafted binary payload can be sent that, when deserialized, can execute arbitrary code.|High|security|JFrog|org.apache.logging.log4j:log4j-core|2.0-alpha1,2.0-alpha2,2.0-beta1,2.0-beta2,2.0-beta3,2.0-beta4,2.0-beta5,2.0-beta6,2.0-beta7,2.0-beta8,2.0-beta9,2.0-rc1,2.0-rc2,2.0 ≤ Version ≤ 2.0.2,2.1 ≤ Version ≤ 2.4.1,2.5 ≤ Version ≤ 2.6.2,2.7 ≤ Version ≤ 2.8.1|2.8.2|2019-12-11T10:01:44Z|
|Apache Log4j NTEventLogAppender.dll Path Subversion Arbitrary DLL Injection Code Execution|Medium|security|JFrog|log4j:log4j|1.2.4 ≤ Version ≤ 1.2.17| |2019-12-11T10:01:19Z|
|Apache Log4j NTEventLogAppender.dll Path Subversion Arbitrary DLL Injection Code Execution|Medium|security|JFrog|log4j:log4j|1.2.4 ≤ Version ≤ 1.2.17| |2019-12-11T10:01:19Z|",,,,,,,,,,
"""Export Data"" sometimes not working properly",RTFACT-22276,99860,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fanjinhui,fanjinhui,28/May/20 8:57 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,Xray,,,,,,,0,,,,,,"using ""Export Data"", sometimes the exported file cannot be opened,  

multiple retries are repeatable

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc307k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Crowd SSO not working after changing SSO cookie name,RTFACT-22273,99855,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,thomas.koell@epos-cat.de,thomas.koell@epos-cat.de,28/May/20 8:39 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,,,,,,,,0,,,,,,"When configuring the Crowd ""SSO cookie name"" to have a custom value instead of the default ""crowd.token_key"", it's not possible anymore to login to Artifactory via Crowd SSO.

According to RTFACT-9598 this value should be read from Crowd (probably by REST). It seems this doesn't work anymore, maybe the REST API on the Crowd side has changed.",Atlassian Crowd 3.7.0,,,,,,,,,,,,RTFACT-22111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc306g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Virtual Reposiroty Fails To List Packages When ""List Remote Folder Items"" Box Checked In Remote Repository",RTFACT-22270,99830,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,28/May/20 12:52 AM,10/Feb/21 12:35 PM,18/Feb/21 8:59 AM,,6.19.0,7.4.3,,,,,,,,,,,,,1,,,,,,"Virtual Reposiroty Fails To List Packages When ""List Remote Folder Items"" Box Checked In Remote Repository.

 

Steps to Reproduce:

 
 # Create Generic Remote repository(Remote1) pointing to: [https://repo.continuum.io/miniconda/]
 # Create one more Generic Remote Repository(Remote2), in my case I will point to: [http://archive.ubuntu.com/ubuntu/]
 # Create Generic Virtual repository and aggregate those two remote repositories above in this Virtual repository.
 #  Go to Repository Browser, and expand newly created Generic Virtual repository, you will see no packages listed
 # Right Click on the newly created Virtual repository and select ""Native Browser"", and you will get the following error on this page:

{ ""errors"" : [ { ""status"" : 404, ""message"" : ""

{\""error\"":\""Failed to build dom document\""}

"" } ] }

 

      6.  If you go back to the settings of the Remote repository(Remote1) and uncheck the : ""List Remote Folder Items"" box, then go back to the Repository Browser, and expand the Virtual repository again, you will notice that items are getting listed. 

      7. In addition to that, if you right-click and select ""Native Browser"", it will not throw that same error anymore.

 

*Here is the ERROR when the issue is reproduced:*

{{2020-05-27 17:38:17,024 [http-nio-8081-exec-7] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Failed to build dom document2020-05-27 17:38:17,024 [http-nio-8081-exec-7] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Failed to build dom documentjava.lang.RuntimeException: Failed to build dom document at org.artifactory.util.XmlUtils.parse(XmlUtils.java:56)}}

.

.

{{Caused by: org.jdom2.input.JDOMParseException: Error on line 2: Attribute name ""async"" associated with an element type ""script"" must be followed by the ' = ' character.}}

.

.

{{Caused by: org.xml.sax.SAXParseException: Attribute name ""async"" associated with an element type ""script"" must be followed by the ' = ' character.}}

 

 

Seems like the issue is related to that first remote repository(Repository1) that points to [https://repo.continuum.io/miniconda/]. Checking and unchecking the same ""List Remote Folder Items"" box in the second repository(Repository2) does not change the behavior.  This was reproduced on v6.19 and v7.4.3

 

*Workaround:*

 

As listed in step 6, the only way to fix this is by unchecking ""List Remote Folder Items"" box for Repository1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3014:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory UI should remove ""buildInfo.env"" prefix when displaying environment variables",RTFACT-22269,99829,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jasong,jasong,27/May/20 11:19 PM,10/Feb/21 12:36 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,artifactory,ui,,,,"When deploying to Artifactory via TeamCity Artifactory plugin (version 2.8) entries for properties included from a given properties file are passed along into Artifactory, but the belief is that the prefix should be removed. Whether this is before storing, or before displaying, is unknown.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc300w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to Sync Groups from openLDAP,RTFACT-22268,99822,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ymaharana,ymaharana,27/May/20 8:13 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Getting error - Could not find DN for user 'username'. I have the set the artifactory.security.ldap.forceGroupMemberAttFullDN=true in systems.property file and restarted Artifactory.

We are unable to proceed further in the product evaluation anymore. any help is appreciated.",Artifactory Pro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2zzc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Crowd authenticated users are not affected by 'remember me',RTFACT-22253,99659,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joeyn,joeyn,26/May/20 10:01 AM,10/Feb/21 12:41 PM,18/Feb/21 8:59 AM,,6.11.3,6.19.1,,,,,,,,,,,,,3,,,,,,"*Description:*

The ""remember me"" feature does not maintain sessions for Artifactory users authenticated with Crowd, but works as intended for regular Artifactory users.

*Expected behavior:*

The ""remember me"" feature should maintain sessions for all Artifactory users, including the ones authenticating via Crowd.

*Steps to reproduce (Artifactory 6.19.1):*
 # Connect a Crowd instance to Artifactory
 # Login to Artifactory as a Crowd user while marking the ""remember me"" button
 # Quit the browser using command+Q
 # Navigate to Artifactory once more, which prompts the login page (session is not maintained)
 # Login to Artifactory as an Artifactory user (admin for example)
 # Quit the browser
 # Navigate to Artifactory, which will redirect you without asking for another login (session maintained)",6.11.3 ZIP & 6.19.1 Docker,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2z14:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory node was not recoverd after db connection was lost.,RTFACT-22230,99515,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kobia,kobia,24/May/20 6:42 PM,05/Jan/21 1:14 PM,18/Feb/21 8:59 AM,,7.5.5,,,,,,,,,,,,,,0,,,,,,"5 hours after upgrading repo21 to version 7.5.4, some builds started to fail on artifactory requests and 500 error was thrown on the UI from time to time, as a first diagnostic one of the nodes was offline with unhealthy service of artifactory. artifactory service log was full of errors that indicates the config was corrupted.

initial db connection reset: 

2020-05-24T14:31:04.617Z [jfrt ] [ERROR] [407cad58616bcade] [c.CentralConfigServiceImpl:779] [art-exec-27 ] - Could not load configuration due to: Failed to retrieve config 'artifactory.config.xml': Communications link failure
The last packet successfully received from the server was 10 milliseconds ago. The last packet sent successfully to the server was 23 milliseconds ago.
org.artifactory.storage.StorageException: Failed to retrieve config 'artifactory.config.xml': Communications link failure
The last packet successfully received from the server was 10 milliseconds ago. The last packet sent successfully to the server was 23 milliseconds ago.
at org.artifactory.storage.db.fs.service.ConfigsServiceImpl.getConfig(ConfigsServiceImpl.java:94)
at jdk.internal.reflect.GeneratedMethodAccessor1292.invoke(Unknown Source)
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.base/java.lang.reflect.Method.invoke(Method.java:566)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
at com.sun.proxy.$Proxy228.getConfig(Unknown Source)
at org.artifactory.config.CentralConfigServiceImpl.loadConfigFromStorage(CentralConfigServiceImpl.java:328)
at org.artifactory.config.CentralConfigServiceImpl.getCentralConfigDescriptorCache(CentralConfigServiceImpl.java:757)
at org.artifactory.config.CentralConfigServiceImpl$1.call(CentralConfigServiceImpl.java:181)
at org.artifactory.config.CentralConfigServiceImpl$1.call(CentralConfigServiceImpl.java:177)
at org.artifactory.storage.db.security.service.VersioningCacheImpl.get(VersioningCacheImpl.java:86)
at org.artifactory.config.CentralConfigServiceImpl.getDescriptor(CentralConfigServiceImpl.java:423)
at org.artifactory.config.CentralConfigServiceImpl.getDescriptor(CentralConfigServiceImpl.java:113)
at jdk.internal.reflect.GeneratedMethodAccessor159.invoke(Unknown Source)
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.base/java.lang.reflect.Method.invoke(Method.java:566)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
at com.sun.proxy.$Proxy239.getDescriptor(Unknown Source)
at org.artifactory.spring.ArtifactoryApplicationContext.reload(ArtifactoryApplicationContext.java:401)
at org.artifactory.config.CentralConfigServiceImpl.callReload(CentralConfigServiceImpl.java:577)
at jdk.internal.reflect.GeneratedMethodAccessor1307.invoke(Unknown Source)
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.base/java.lang.reflect.Method.invoke(Method.java:566)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
at org.artifactory.schedule.aop.TraceableMethodInvocation.proceed(TraceableMethodInvocation.java:72)
at org.artifactory.schedule.aop.AsyncAdvice.doInvoke(AsyncAdvice.java:333)
at org.artifactory.schedule.aop.AsyncAdvice.lambda$submit$2(AsyncAdvice.java:285)
at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:30)
at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:53)
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
The last packet successfully received from the server was 10 milliseconds ago. The last packet sent successfully to the server was 23 milliseconds ago.
at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:990)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3562)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3462)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3903)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:871)
at com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1999)
at com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:3403)
at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:471)
at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:3115)
at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:2344)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2739)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2486)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1966)
at jdk.internal.reflect.GeneratedMethodAccessor65.invoke(Unknown Source)
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.base/java.lang.reflect.Method.invoke(Method.java:566)
at org.apache.tomcat.jdbc.pool.StatementFacade$StatementProxy.invoke(StatementFacade.java:114)
at com.sun.proxy.$Proxy71.executeQuery(Unknown Source)
at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:187)
at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:155)
at org.artifactory.storage.db.fs.dao.ConfigsDao.loadConfig(ConfigsDao.java:99)
at org.artifactory.storage.db.fs.service.ConfigsServiceImpl.getConfig(ConfigsServiceImpl.java:92)
... 36 common frames omitted
Caused by: java.net.SocketException: Connection reset
at java.base/java.net.SocketInputStream.read(SocketInputStream.java:186)
at java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)
at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:141)
at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:174)
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3011)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3522)
... 57 common frames omitted

 

cache reload errors:
2020-05-24T14:48:27.321Z [jfrt ] [ERROR] [a4b43038c82c0d88] [s.MetadataEventServiceImpl:290] [art-exec-30         ] - Unable to send statistics event to Metadata Server. Caught exception: Fail to reload cache:
2020-05-24T14:48:27.330Z [jfrt ] [ERROR] [a4b43038c82c0d88] [o.q.c.JobRunShell:211         ] [art-exec-30         ] - Job artifactory.StatsPersistingServiceFlushJob#db18d3bd-6943-425d-b6b1-2e20995ea6eb threw an unhandled Exception:
org.artifactory.storage.db.security.service.VersioningCacheException: Fail to reload cache:
	at org.artifactory.storage.db.security.service.VersioningCacheImpl.get(VersioningCacheImpl.java:89)
	at org.artifactory.repo.service.RepositoryServiceImpl.localRepositoryByKey(RepositoryServiceImpl.java:1568)
	at org.artifactory.repo.service.RepositoryServiceImpl.localOrCachedRepositoryByKey(RepositoryServiceImpl.java:1601)
	at org.artifactory.repo.service.RepositoryServiceImpl.storingRepositoryByKey(RepositoryServiceImpl.java:1647)
	at org.artifactory.repo.service.RepositoryServiceImpl.isWriteLocked(RepositoryServiceImpl.java:1660)
	at jdk.internal.reflect.GeneratedMethodAccessor445.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
	at com.sun.proxy.$Proxy241.isWriteLocked(Unknown Source)
	at org.artifactory.storage.db.fs.service.AbstractStatsService.isWriteLocked(AbstractStatsService.java:189)
	at org.artifactory.storage.db.fs.service.AbstractStatsService.doFlushStats(AbstractStatsService.java:144)
	at org.artifactory.storage.db.fs.service.AbstractStatsService.flushStats(AbstractStatsService.java:118)
	at org.artifactory.storage.jobs.StatsPersistingServiceFlushJob.onExecute(StatsPersistingServiceFlushJob.java:53)
	at org.artifactory.schedule.quartz.QuartzCommand.doExecute(QuartzCommand.java:75)
	at org.artifactory.schedule.quartz.QuartzCommand.execute(QuartzCommand.java:56)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.artifactory.opentracing.TraceableRunnableDecorator.run(TraceableRunnableDecorator.java:30)
	at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:53)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NullPointerException: null
	at org.artifactory.repo.service.RepositoryServiceImpl.getSimpleLayout(RepositoryServiceImpl.java:505)
	at org.artifactory.repo.service.RepositoryServiceImpl$RepositoriesCacheBuilder.rebuildTrashcan(RepositoryServiceImpl.java:2668)
	at org.artifactory.repo.service.RepositoryServiceImpl$RepositoriesCacheBuilder.rebuildRepositories(RepositoryServiceImpl.java:2619)
	at org.artifactory.repo.service.RepositoryServiceImpl.rebuildRepositoriesInTransaction(RepositoryServiceImpl.java:1459)
	at jdk.internal.reflect.GeneratedMethodAccessor1294.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:78)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy241.rebuildRepositoriesInTransaction(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl$RepositoriesCacheLoader.call(RepositoryServiceImpl.java:2903)
	at org.artifactory.repo.service.RepositoryServiceImpl$RepositoriesCacheLoader.call(RepositoryServiceImpl.java:2898)
	at org.artifactory.storage.db.security.service.VersioningCacheImpl.get(VersioningCacheImpl.java:86)
	... 22 common frames omitted","repo21
node - 10.70.30.43

 

kibana logs : [https://kibana.jfrog.info/app/kibana#/discover?_g=(refreshInterval:(pause:!t,value:0),time:(from:now-1h,mode:quick,to:now))&_a=(columns:!(message),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:cbf933d0-48f7-11ea-a9dc-c94374fd9096,key:agent.hostname,negate:!f,params:(query:artifactory-jfrog-1d,type:phrase),type:phrase,value:artifactory-jfrog-1d),query:(match:(agent.hostname:(query:artifactory-jfrog-1d,type:phrase))))),index:cbf933d0-48f7-11ea-a9dc-c94374fd9096,interval:auto,query:(language:lucene,query:''),sort:!('@timestamp',desc))]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2y80:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Fix MySQL and MSSQL migration scripts (missing NOT NULL) for Access and Artifactory,RTFACT-22228,99491,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avishayh,avishayh,24/May/20 11:19 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,Database,,,,,,,0,,,,,,"When creating a migration script which modifies a column which is NOT NULL 

the ALTER TABLE statement must include the NOT NULL again or else the column will turn to NULLABLE (this happens both in MySQL and MSSQL)

 For example:
{code:java}
in file: mysql.sql

CREATE TABLE artifactory_servers (
  server_id                VARCHAR(128) NOT NULL,

... 

in file mysql_v211_server_id.sql: 
ALTER TABLE artifactory_servers MODIFY server_id VARCHAR(128);  -- causes the server_id to be NULLABLE (in mysql and mssql) {code}
 I Identified few scripts which didn't do that and therefore the migration and initial scripts are not aligned.
{code:java}
server_id(artifactory_servers)
tasks_context(tasks)
version(artifact_bundles) 
data(access_config){code}
 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2y2o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Replication between RPM repositories should replicate the modules.yaml file,RTFACT-22226,99484,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,krihelis,krihelis,24/May/20 9:20 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"*+Feature description:+* 

Artifactory supports RPM AppStream modules. At this moment, every file that is under the “/repodata” folder in RPM repositories is not being replicated to the target RPM repository because metadata calculation is happening on the Target Artifactory instance. This includes modules.yaml file as well and necessarily it means that users will not be able to pull modules on the target Artifactory instance. 

+*Expected behavior:*+

When configuring push/pull replication for RPM repositories, the modules.yaml file should be replicated to the target Artifactory instance. ",,,,,,,,,,,,,,,,,,,"05/Nov/20 5:32 PM;vigneshc;Source_Instance.png;https://www.jfrog.com/jira/secure/attachment/47888/Source_Instance.png","05/Nov/20 5:32 PM;vigneshc;Target_Instance.png;https://www.jfrog.com/jira/secure/attachment/47889/Target_Instance.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2y1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Permissions API soft-fails on case mismatch in username,RTFACT-22207,99318,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gskolysz,gskolysz,21/May/20 9:00 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.18.1,,,,,,,REST API,,,,,,,0,PB_Done,,,,,"Assume there's *user1* in the base.

When creating/updating permission target with _application/vnd.org.jfrog.artifactory.security.PermissionTarget+json_ payload, if *UsEr1* (or any other case-mismatch variation of the username) is used in $.principals.users, the call succeeds but the user is not in the permission target.

This is a confusing behavior, since the requested state does not match final state, even though no error is thrown in the process.

 

The same may apply to $.principals.groups or even $.repositories contents, but I have not checked that.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2x2w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Multiple Debian package deploy UI does not provide metadata fields,RTFACT-22186,99169,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dwerdermann,dwerdermann,20/May/20 11:21 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.18.0,7.4.0,,,,,,Debian,Deploy UI,Upload,,,,,0,debian,deploy,ui,,,"If you deploy debian packages via the UI and select the ""Multi"" mode. You are not provided with the necessary fields for the mandatory meta information.

So the uploaded files sitting there useless in the package pool. This renderes the ""Multi"" upload function rather pointless and confusing for the end users.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2w7c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory isnt ""file handling"" even though all ",RTFACT-22153,98872,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dvanitha,dvanitha,18/May/20 6:37 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,Artifactory Home,Filestore,,,,,,0,artifactory,,,,,"Today we ran into a issue peculiar issue, where the VM that hosts the [artifactory|https://protect-us.mimecast.com/s/Ox29CL95noIwryk6SqYKDd?domain=artifactory.intralinks.com] instance ran out of disk and was at 95% . But what we saw on the VM is that it was only taking 25% and the rest was taken up by some zombie process which released about 275GB of disk on reboot, PFA. [we|mailto:JVanRyn@intralinks.com] suspects that there is a file handling leak in artifactory. We already have the file handle limit suggested by jfrog  [https://www.jfrog.com/confluence/display/JFROG/System+Requirements#SystemRequirements-Xray-FileHandleAllocationLimit|https://protect-us.mimecast.com/s/1DppCM85opSk1M2NHJKdtZ?domain=jfrog.com]  and JVM_OPTS set.",Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ujc:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
MARKERS/PRE_INIT/HOME_FILES converters may not run on certain upgrades,RTFACT-22152,98848,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,uriahl,uriahl,17/May/20 12:05 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The mentioned converter types usually contain converter classes that assume that the ""source"" version of the upgrade is the one found inside etc/artifactory.properties (see ConverterManagerImpl#getOriginalVersion

This assumption is risky because the artifactory.properties file is not reliable for determining the source version on an upgrade scenario where a new node is spun up on the target version already with a target-version reflecting artifactory.properties file. 

Other converter types such as DATABASE, HOME_SYNC_FILES and POST_INIT use the original DB version (from artifactory_servers) to determine the source, which is always applicable for this upgrade scenario.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ueg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to login via Crowd after upgrade to 7.x,RTFACT-22145,98799,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tha@luminanetworks.com,tha@luminanetworks.com,16/May/20 3:33 PM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,,,,,,,,3,,,,,,"After upgrading Artifactory from 6.19.1 to 7.4.3 I am unable to login to Atlassian Crowd accounts. Authentication is successful however Artifactory immediately logs the user out with the below message:


{noformat}
2020-05-16T15:27:53.105Z [jfrt ] [INFO ] [12bc5a000a92f912] [a.s.CrowdHttpAuthenticator:208] [http-nio-8081-exec-3] - Logging out crowd user without a valid token{noformat}
We are using the Artifactory docker deployment method.",Docker,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2u4o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Jun/20 11:28 PM;alex.hempel;We are seeing the same issue after creating a new instance with 7.5.5 and performing a full system import of our old instance which was on 6.13.1.","09/Jun/20 12:49 PM;tha@luminanetworks.com;Alex, I discovered this was only an issue if you are doing a test upgrade and testing through direct IP access of Artifactory rather than the full path using the NGINX reverse proxy.

It seems like in the 6.x version accessing directly through direct IP to Artifactory worked just fine as a test setup but 7.x for some reason appears to require accessing through the reverse proxy otherwise you will immediately get logged out despite successful authentication.

Hope this helps.",,,,,,,,,
HA Upgrade from 6.9.1 to 6.16.2 failed,RTFACT-22144,98790,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mdellamerlinarios,mdellamerlinarios,15/May/20 9:25 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,artifactory,upgrade,,,,"While performing an upgrade from 6.9.1 to 6.16.2 we noticed that our HA cluster was reporting 500s for a couple of minutes (7)

We followed these instructions for the upgrade.
However, after upgrading the master and put it back into rotation we noticed the 500s.

By looking at the logs the first error that we see is:
{code}
2020-05-15 00:57:24,325 [art-init] [ERROR] (o.a.c.ConvertersManagerImpl:216) - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: unstable environment: Found one or more servers with different version Config Reload denied.
{code}

It's worth to mention that the previous log shows this information that seems to be relevant to that error.

{code}
2020-05-15 00:57:24,026 [art-init] [INFO ] (o.a.d.r.CentralConfigReader:71) - Converting artifactory.config.xml version from 'v220' to 'v224'
{code}

Right after the first error it's this exception which it seems to be normal according to the document.
{code}
2020-05-15 00:57:24,328 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: unstable environment: Found one or more servers with different version Config Reload denied.
java.lang.reflect.InvocationTargetException: null
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: java.lang.RuntimeException: unstable environment: Found one or more servers with different version Config Reload denied.
	at org.artifactory.converter.ConvertersManagerImpl.handleException(ConvertersManagerImpl.java:223)
	at org.artifactory.converter.ConvertersManagerImpl.serviceConvert(ConvertersManagerImpl.java:171)
	at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:271)
	at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:153)
	... 7 common frames omitted
Caused by: java.lang.RuntimeException: unstable environment: Found one or more servers with different version Config Reload denied.
	at org.artifactory.config.CentralConfigServiceImpl.assertSaveDescriptorAllowed(CentralConfigServiceImpl.java:672)
	at org.artifactory.config.CentralConfigServiceImpl.preSaveDescriptor(CentralConfigServiceImpl.java:327)
	at org.artifactory.config.CentralConfigServiceImpl.forceSaveDescriptorInternal(CentralConfigServiceImpl.java:387)
	at org.artifactory.config.CentralConfigServiceImpl.initCacheAndGetCurrent(CentralConfigServiceImpl.java:173)
	at org.artifactory.config.CentralConfigServiceImpl.convert(CentralConfigServiceImpl.java:206)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy178.convert(Unknown Source)
	at org.artifactory.converter.ConvertersManagerImpl.serviceConvert(ConvertersManagerImpl.java:167)
	... 9 common frames omitted
-
{code}

Once we upgraded the secondary node (we only have 2) and put it back in the LB the cluster started to run again.

Couple of questions:
- Do you notice anything out of the ordinary given our logs?
- The upgrade doc seems to implied that there should not be any downtimes. Though, it also mention that only uploads and downloads will be allowed during the upgrade. Is it right to assume that the UI will continue working given those limitations?
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2u2o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/May/20 11:52 PM;mdellamerlinarios;Adding the logs sorted by time. In case the description was confusing.
{code:java}
""1589504244328"",""05/14/2020 17:57:24.328 -0700"",""2020-05-15 00:57:24,328 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: unstable environment: Found one or more servers with different version Config Reload denied.""1589504244328"",""05/14/2020 17:57:24.328 -0700"",""2020-05-15 00:57:24,328 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: unstable environment: Found one or more servers with different version Config Reload denied.java.lang.reflect.InvocationTargetException: null at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:423) at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211) at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67) at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)Caused by: java.lang.RuntimeException: unstable environment: Found one or more servers with different version Config Reload denied. at org.artifactory.converter.ConvertersManagerImpl.handleException(ConvertersManagerImpl.java:223) at org.artifactory.converter.ConvertersManagerImpl.serviceConvert(ConvertersManagerImpl.java:171) at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:271) at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:153) ... 7 common frames omittedCaused by: java.lang.RuntimeException: unstable environment: Found one or more servers with different version Config Reload denied. at org.artifactory.config.CentralConfigServiceImpl.assertSaveDescriptorAllowed(CentralConfigServiceImpl.java:672) at org.artifactory.config.CentralConfigServiceImpl.preSaveDescriptor(CentralConfigServiceImpl.java:327) at org.artifactory.config.CentralConfigServiceImpl.forceSaveDescriptorInternal(CentralConfigServiceImpl.java:387) at org.artifactory.config.CentralConfigServiceImpl.initCacheAndGetCurrent(CentralConfigServiceImpl.java:173) at org.artifactory.config.CentralConfigServiceImpl.convert(CentralConfigServiceImpl.java:206) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206) at com.sun.proxy.$Proxy178.convert(Unknown Source) at org.artifactory.converter.ConvertersManagerImpl.serviceConvert(ConvertersManagerImpl.java:167) ... 9 common frames omitted""""1589504244325"",""05/14/2020 17:57:24.325 -0700"",""2020-05-15 00:57:24,325 [art-init] [ERROR] (o.a.c.ConvertersManagerImpl:216) - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: unstable environment: Found one or more servers with different version Config Reload denied."" {code}",,,,,,,,,,
Custom message in artifactory only allows one link,RTFACT-22143,98789,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ezekielk,ezekielk,15/May/20 7:05 PM,10/Feb/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,,,,,,"*Description*: If you have a custom message in artifactory version 7.x that has more than one link in it, only the 1st link is usable in the UI. This feature works properly in older versions of artifactory so it should in 7.x as well.

*Expected behavior*: The expected behavior is that if you have multiple links in your customer message, you should see your message with 2 or more hyperlinks like in 6.x. Instead in 7.x, only one link is generated. 

*Steps to reproduce*: To reproduce this issue, you make a 7.x instance (any version) and navigate to general settings. There you can create a custom message. To see the issue, you will need to add two links to your message.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2u2g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/May/20 7:04 AM;sebastian.lang;This function is important for us as we link a discription and a self-service for internal use.",,,,,,,,,,
jfrog cli(1.35.4) mvn can not resolve snapshot parent pom,RTFACT-22121,98560,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yongqiang,yongqiang,13/May/20 3:51 AM,05/Jan/21 11:22 AM,18/Feb/21 8:59 AM,,,,,,,,,CLI,,,,,,,0,,,,,,"We can not resolve an snapshot parent pom when we do the maven build

By the way, We can resolve an released parent pom

reproduce steps:(Linux)

1.set up the first maven project. The first is an parent pom project. The version is 1.0.0-SNAPSHOT

Ex: GAVC: org.waterway.oss:parent:pom:1.0.0-SNAPSHOT

2.set up the second maven project and modify the parent field as below

 
{quote}<parent>
 <groupId>org.waterway.oss</groupId>
 <artifactId>parent</artifactId>
 <version>1.0.0-SNAPSHOT</version>
 <relativePath/>
 </parent>
{quote}
3.install jfrog cli(the version is 1.35.4) and intergrate with jfrog Artifactory (jfrog rt c )

install apache maven (3.6.3)

4.execute jfrog rt mvnc as below:
{quote}[root@iz2ze1x83ahtbar67ty7p1z flyway-db]# cat .jfrog/projects/maven.yaml
 version: 1
 type: maven
 resolver:
 serverId: Default-Server
 snapshotRepo: libs-snapshot
 releaseRepo: libs-release
{quote}
 

5. execute mvn build as below:
{quote}./jfrog rt mvn clean install -U
{quote}
 

The error message:
{quote}[Info] Running Mvn...
 [main] INFO org.apache.maven.cli.event.ExecutionEventLogger - Scanning for projects...
 [main] ERROR org.apache.maven.DefaultMaven - [ERROR] Some problems were encountered while processing the POMs:
 [FATAL] Non-resolvable parent POM for org.waterway.oss:flyway-db:1.0.0-SNAPSHOT: Could not find artifact org.waterway.oss:parent:pom:1.0.0-SNAPSHOT and 'parent.relativePath' points at no local POM @ line 14, column 17
 @
 [main] ERROR org.apache.maven.cli.MavenCli - The build could not read 1 project -> [Help 1]
 [main] ERROR org.apache.maven.cli.MavenCli -
 [main] ERROR org.apache.maven.cli.MavenCli - The project org.waterway.oss:flyway-db:1.0.0-SNAPSHOT (/root/code/flyway-demo/flyway-db/pom.xml) has 1 error
 [main] ERROR org.apache.maven.cli.MavenCli - Non-resolvable parent POM for org.waterway.oss:flyway-db:1.0.0-SNAPSHOT: Could not find artifact org.waterway.oss:parent:pom:1.0.0-SNAPSHOT and 'parent.relativePath' points at no local POM @ line 14, column 17 -> [Help 2]
 [main] ERROR org.apache.maven.cli.MavenCli -
 [main] ERROR org.apache.maven.cli.MavenCli - To see the full stack trace of the errors, re-run Maven with the -e switch.
 [main] ERROR org.apache.maven.cli.MavenCli - Re-run Maven using the -X switch to enable full debug logging.
 [main] ERROR org.apache.maven.cli.MavenCli -
 [main] ERROR org.apache.maven.cli.MavenCli - For more information about the errors and possible solutions, please read the following articles:
 [main] ERROR org.apache.maven.cli.MavenCli - [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException]
 [main] ERROR org.apache.maven.cli.MavenCli - [Help 2] [http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException]
 [Error] exit status 1
{quote}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2sq0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Concurrent Authentication requests to automatically associate a LDAP user to an imported LDAP group can cause duplicate_key errors in Postgres,RTFACT-22120,98556,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,13/May/20 12:09 AM,10/Feb/21 1:17 PM,18/Feb/21 8:59 AM,,6.17.0,6.20.1,,,,,,,,,,,,,7,,,,,,"If you have concurrent authentication requests that will automatically associate a LDAP user to an imported LDAP group, you may run into postgres duplicate_key errors.

Steps to reproduce:
-setup LDAP with Arti. Import LDAP group into Artifactory that a test user is part of in the LDAP Groups settings page
-run the following API (reproduces with API key or password):

for i in {1..30}; do curl -u tuser:AKCp5emRKuxu6F75UJFPahfQSzRjkSVmcxNfGeT2dEp7yjfpQmt8rXkTf5v97dQipnvdomF4M http://mill.jfrog.info:12050/artifactory/api/system/version & done

-notice in access request.log that there are PATCH requests for the user, and that there is a duplicate_key error in the access server's access.log. 

*This issue is causing builds to fail for the customer, since builds authenticate, and any authentication request has a chance to PATCH the user.*

*Workaround: Seems like using an access token instead of API Key/password will avoid updating the user on authentication*

Relevant logs:

2020-05-13 00:08:12,594 [http-nio-8040-exec-7] [ERROR] (o.j.a.s.r.e.m.DefaultExceptionMapper:25) - General exception mapper caught:Could not save user
org.jfrog.access.server.exception.AccessStorageException: Could not save user
...
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint ""access_users_groups_pk""
  Detail: Key (user_id, group_id)=(1001, 1002) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2455)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2155)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:288)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:430)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:356)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:168)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)
	at sun.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.tomcat.jdbc.pool.StatementFacade$StatementProxy.invoke(StatementFacade.java:114)
	at com.sun.proxy.$Proxy88.executeUpdate(Unknown Source)
	at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229)
	at org.jfrog.storage.SqlDaoHelper.updatePagination(SqlDaoHelper.java:184)
	at org.jfrog.storage.SqlDaoHelper.paginationCreate(SqlDaoHelper.java:137)
	at org.jfrog.access.server.db.dao.UsersGroupsDao.createAssociation(UsersGroupsDao.java:101)
	at org.jfrog.access.server.db.dao.UsersGroupsDao.createAssociations(UsersGroupsDao.java:97)

Access server request.log:
2020-05-13T00:21:02.008+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|PATCH|http://localhost:8040/access/api/v1/users/tuser|500|1275|167|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.015+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|PATCH|http://localhost:8040/access/api/v1/users/tuser|200|1275|364|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.020+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|167|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.024+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|118|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.050+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|19|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.057+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|PATCH|http://localhost:8040/access/api/v1/users/tuser|500|1275|271|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.066+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|POST|http://localhost:8040/access/api/v1/auth/authenticate|401|42|47|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.162+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|90|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.167+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|PATCH|http://localhost:8040/access/api/v1/users/tuser|200|1275|374|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.171+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|111|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.172+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|POST|http://localhost:8040/access/api/v1/auth/authenticate|401|42|54|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.182+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|13|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.190+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|29|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.193+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|15|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.235+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|GET|http://localhost:8040/access/api/v1/users/tuser|200|0|58|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.245+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|PATCH|http://localhost:8040/access/api/v1/users/tuser|200|1275|226|JFrog Access Java Client/4.11.0
2020-05-13T00:21:02.264+0000|127.0.0.1|jfrt@01e85cs0xaysq901fp0c870363|PATCH|http://localhost:8040/access/api/v1/users/tuser|200|1275|296|JFrog Access Java Client/4.11.0
",,,,,,,,,,,,,,,,JA-514,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2sp4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Jul/20 4:51 PM;evgenyka;Please provide Affects Version.

The case is fixed by https://www.jfrog.com/jira/browse/JA-514","24/Jul/20 3:48 PM;jflev;v6.18.1 also affected here.

 ","28/Jan/21 4:30 PM;Lucas-C;Ou users are also affected, using {{npm }}12.20.1, with Artifactory 6.23.3.
There is the corresponding NPM debug.log :
{code}
verbose stack Error: Unable to authenticate, need: Basic realm=""Artifactory Realm""
verbose stack     at /usr/local/lib/node_modules/npm/node_modules/npm-registry-fetch/check-response.js:107:17
verbose stack     at runMicrotasks (<anonymous>)
verbose stack     at processTicksAndRejections (internal/process/task_queues.js:97:5)
verbose statusCode 40
{code}

And there is the Java stack trace from {{artifactory.log}} :
{code}
   
2021-01-28 16:52:41,627 [http-nio-8081-exec-101] [ERROR] (o.a.s.l.ArtifactoryLdapAuthenticationProvider:216) - Unexpected exception in LDAP authentication:
org.jfrog.access.client.AccessClientHttpException: HTTP response status 500:Failed on executing /api/v1/users/uicomponents_ci, with response: {​​​​​
""errors"" : [ {​​​​​
""code"" : ""INTERNAL_SERVER_ERROR"",
""message"" : ""Could not save user"",
""detail"" : ""ERROR: duplicate key value violates unique constraint \""access_users_groups_pk\""\n Detail: Key (user_id, group_id)=(50005, 62001) already exists.""
}​​​​​ ]
}​​​​​
at org.jfrog.access.client.http.AccessHttpClient.createRestResponse(AccessHttpClient.java:162)
at org.jfrog.access.client.http.AccessHttpClient.restCall(AccessHttpClient.java:116)
at org.jfrog.access.client.AccessClientBaseImpl.makeRequestAndParseResponse(AccessClientBaseImpl.java:156)
at org.jfrog.access.client.AccessClientBaseImpl.updateByName(AccessClientBaseImpl.java:151)
at org.jfrog.access.client.user.UsersClientImpl.updateUser(UsersClientImpl.java:105)
at org.artifactory.storage.db.security.service.access.AccessUserGroupStoreService.updateUser(AccessUserGroupStoreService.java:130)
{code}

And the corresponding line from {{request.log}} :
{code}
72975:20210128165241|9690|REQUEST|10.207.136.78|non_authenticated_user|GET|/api/npm/all-npm/@jest/test-result/-/test-result-26.6.2.tgz|HTTP/1.1|401|0
{code}
",,,,,,,,
How to enable cdn like feature inside onprem for artifactory,RTFACT-22118,98542,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rpalaniswamy@nvidia.com,rpalaniswamy@nvidia.com,12/May/20 6:08 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Artifactory with S3/cloudfront enables CDN like feature.

We need a way to enable similar feature when running OnPrem.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2sm8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Moving files to 1024+ chars path is allowed, but not supported by DB",RTFACT-22112,98512,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nitzanb,nitzanb,12/May/20 1:31 PM,10/Feb/21 1:18 PM,18/Feb/21 8:59 AM,,6.19.0,7.4.0,,,,,,,,,,,,,0,PB_Done,,,,,"Steps to reproduce:

1 - Deploy some file

2 - Invoke ""move"" to a custom path (a big one)

!Screen Shot 2020-05-07 at 16.02.19.png!

sometimes it does creates an empty directory but not moving, and then the error appears when trying to delete it.

 ",,,,,,,,,,,,,,,,,,,"12/May/20 1:30 PM;nitzanb;Screen Shot 2020-05-07 at 16.02.19.png;https://www.jfrog.com/jira/secure/attachment/42185/Screen+Shot+2020-05-07+at+16.02.19.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2sfk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upgrade from 6.19.1 to 7.4.3 fails ,RTFACT-22104,98473,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rooholam,rooholam,12/May/20 7:45 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I have tried to upgrade artifactory 6.19.1 to 7.4.3 using docker but it fails

I see this error:

 
{code:java}
[main                ] - Error: Error starting application Failed pinging artifactory for 180Request failed with status code 503
    at createError (/opt/jfrog/artifactory/app/frontend/bin/server/dist/node_modules/axios/lib/core/createError.js:16:15)
    at settle (/opt/jfrog/artifactory/app/frontend/bin/server/dist/node_modules/axios/lib/core/settle.js:17:12)
    at IncomingMessage.handleStreamEnd (/opt/jfrog/artifactory/app/frontend/bin/server/dist/node_modules/axios/lib/adapters/http.js:237:11)
    at IncomingMessage.emit (events.js:203:15)
    at endReadableNT (_stream_readable.js:1145:12)
    at process._tickCallback (internal/process/next_tick.js:63:19)
{code}
    There are some warnings in migrations, not sure if it's related:
{code:java}
[.a.m.s.p.GoMetadataProvider:67] [tion-event-sweeper-1] - Module Info cannot be extracted from go-default layout - version files will not be resolved
{code}




 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2s80:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"28/May/20 7:57 AM;rooholam;Turned out that I had a docker proxy setup and the Artifactory version 7 and above will fail with docker proxy configuration.",,,,,,,,,,
Repository becomes half visible when Compress Empty Folders box checked,RTFACT-22100,98454,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,12/May/20 4:34 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,UI,Web UI,,,,,,0,,,,,,"Repository becomes half-visible when ""Compress Empty Folders"" box checked

 

Steps to reproduce:

Chrome: Version 81.0.4044.138 (Official Build) (64-bit)
 # Select and expand the repository where subfolders will be visible
 # Click on ""Sort and Filter"" icon
 # Check ""Compress Empty Folders"" box
 # You will immediately notice that the repository that was selected and expanded scrolled up, and can't be scrolled down.

 

Workaround:

 

Check and Uncheck the  ""Compress Empty Folders"" box several times until you see the repository scrolled back to normal."," 
 # !1.jpg!

 

 

2. 

 

!2.jpg!

 

3.

 

!3.jpg!

 

 

 

 

 

 

 

 

 

 ",,,,,,,,,,,,,,,,,,"12/May/20 4:32 AM;timt;1.jpg;https://www.jfrog.com/jira/secure/attachment/42167/1.jpg","12/May/20 4:33 AM;timt;2.jpg;https://www.jfrog.com/jira/secure/attachment/42166/2.jpg","12/May/20 4:33 AM;timt;3.jpg;https://www.jfrog.com/jira/secure/attachment/42165/3.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2s3s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
.pom file gets changes while uploading file from API,RTFACT-22099,98433,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rohanaceres,rohanaceres,11/May/20 11:30 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,,,,,,,,0,,,,,,"Hi everyone,

I'm having this problem while uploading a .pom file alone. When I manually add it using JFrog Artifactory UI, there's no problem with it. But when I use the API, .pom content is changed (with what it seems to be HTTP output) as follows:

*Original file content:*

{{<?xml version=""1.0"" encoding=""UTF-8""?><project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd""><modelVersion>4.0.0</modelVersion><groupId>br.com.aditum</groupId><artifactId>pinpadSdk</artifactId><version>2.1.0</version><packaging>jar</packaging><name>Aditum Pinpad SDK Java SE</name><url>https://aditum.com.br</url></project>}}

*File content after upload:*

----------------------------521970410881933347908500
Content-Disposition: form-data; name=""""; filename=""pinpadSdk-2.1.0.pom""
Content-Type: application/octet-stream

<?xml version=""1.0"" encoding=""UTF-8""?><project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd""><modelVersion>4.0.0</modelVersion><groupId>br.com.aditum</groupId><artifactId>pinpadSdk</artifactId><version>2.1.0</version><packaging>jar</packaging><name>Aditum Pinpad SDK Java SE</name><url>https://aditum.com.br</url></project>
----------------------------521970410881933347908500--

*CURL command used:*

{{curl --silent --location --request PUT ""$url"" --header ""$credential"" --form ""=@$localPomFileName""}}

Also, I've tried using explicitly {{Content-Type: application/x-maven-pom+xml}}

Please, if there's any other information I could provide, I'm happy to do so.

Thank you.

 ","Artifactory Version 6.11.1

OS: Ubuntu 19.04

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2rzs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory destroys system.yaml format after start up,RTFACT-22071,98193,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Maximy,arturoa,arturoa,08/May/20 11:57 PM,10/Feb/21 1:20 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,,,,,,"Artifactory destroys system.yaml format after start up.

 

This makes it very error prone to try to edit the file. 

 

To reproduce:
 # Install Artifactory with Debian using all defaults  but don't start it
 # Cat the system.yaml (cat /var/opt/jfrog/artifactory/etc/system.yaml)
 # Notice it is properly formatted
 # Start the installation (service artifactory start)
 # Wait for Artifactory to fully come up
 # Cat the system.yaml (cat /var/opt/jfrog/artifactory/etc/system.yaml)
 # Notice the format has been destroyed

Badly formatted system.yaml
{noformat}
## @formatter:off
## JFROG ARTIFACTORY SYSTEM CONFIGURATION FILE
## HOW TO USE: comment-out any field and keep the correct yaml indentation by deleting only the leading '#' character.
configVersion: 1
## NOTE: JFROG_HOME is a place holder for the JFrog root directory containing the deployed product, the home directory for all JFrog products.
## Replace JFROG_HOME with the real path! For example, in RPM install, JFROG_HOME=/opt/jfrog## NOTE: Sensitive information such as passwords and join key are encrypted on first read.
## NOTE: The provided commented key and value is the default.## SHARED CONFIGURATIONS
## A shared section for keys across all services in this config
shared:
    ## Extra Java options to pass to the JVM. These values add to or override the defaults.
    #extraJavaOpts: ""-Xms512m -Xmx2g""    ## Security Configuration
    security:
    ## Join key value for joining the cluster (takes precedence over 'joinKeyFile')
    #joinKey: ""<Your joinKey>""    ## Join key file location
    #joinKeyFile: ""<For example: JFROG_HOME/artifactory/var/etc/security/join.key>""    ## Master key file location
    ## Generated by the product on first startup if not provided
    #masterKeyFile: ""<For example: JFROG_HOME/artifactory/var/etc/security/master.key>""    ## Maximum time to wait for key files (master.key and join.key)
    #bootstrapKeysReadTimeoutSecs: 120    ## Node Settings
    node:
    ## A unique id to identify this node.
    ## Default: auto generated at startup.
    #id: ""art1""    ## Default: auto resolved by startup script
    #ip:    ## Sets this node as primary in HA installation
    #primary: true    ## Sets this node as part of HA installation
    #haEnabled: true    ## Database Configuration
    database:
    ## One of: mysql, oracle, mssql, postgresql, mariadb
    ## Default: Embedded derby## Example for postgresql
#type: postgresql
#driver: org.postgresql.Driver
#url: jdbc:postgresql://<your db url, for example: localhost:5432>/artifactory
#username: artifactory
#password: password {noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2qo8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/May/20 2:39 AM;Prasannar;[~Maximy] Router updates the  system.yaml during start-up. I am guessing this is router's parsing breaking it. Can you check?

[~arturoa] Was the system.yaml  created by you or was it created by the installation?","29/May/20 7:33 PM;krische;I would just like to add that this is annoying when using software like Chef or Puppet to manage the {{system.yaml}} file.

The actual content of the file could be perfectly fine, but if Artifactory just modifies the formatting (indentation, etc.) at startup, then Chef/Puppet will think the file has been modified and want to reset it to desired state.

Could at the very lest some kind of option/property be set to disable modification of the {{system.yaml}} by Artifactory?","11/Sep/20 6:25 AM;aharrisson-ess;+1 (y)

This is a duplicate of RTFACT-21832",,,,,,,,
Unable to retrieve images from Nvidia docker public registry,RTFACT-22070,98192,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yuvarajanj,yuvarajanj,08/May/20 11:07 PM,10/Feb/21 1:21 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,1,,,,,,"{color:#00875a}+Problem Statement:+{color}

Using Artifactory version 7.3.2, I have configured Nvidia Docker registry's remote endpoint as the remote URL in docker remote repository [https://nvcr.io/]
As per the configuration, while pulling the docker images, the images would be fetched from the following location [https://ngc.nvidia.com/catalog/containers

]But, while trying to pull the images from the remote repository, the following error message is being returned.

❯ docker pull <ARTIFACTORY_HOST>/nvidia/tensorrtserver:20.02-py3-clientsdk
Error response from daemon: manifest for <ARTIFACTORY_HOST>/nvidia/tensorrtserver:20.02-py3-clientsdk not found: manifest unknown: The named manifest is not known to the registry.

*artifactory-service.log*
2020-05-08T22:15:05.153Z [jfrt ] [ERROR] [5fc9c9dc2a804c98] [.DockerV2RemoteRepoHandler:464] [ttp-nio-8081-exec-50] - Missing Manifest from <REMOTE-REPO> 'v2/nvidia/tensorrtserver/manifests/20.02-py3-clientsdk' not found at <REMOTE-REPO>:nvidia/tensorrtserver/20.02-py3-clientsdk/list.manifest.json

*artifactory-request.log*
2020-05-08T22:15:05.155Z|5fc9c9dc2a804c98|<IP_Masked>|admin|GET|/api/docker/<REMOTE-REPO>/v2/nvidia/tensorrtserver/manifests/20.02-py3-clientsdk|404|-1|0|2110|docker/19.03.8 go/go1.12.17 git-commit/afacb8b kernel/4.19.76-linuxkit os/linux arch/amd64 UpstreamClient(Docker-Client/19.03.8 \(darwin\))



This problem occurs only in recent times, as we were able to successfully pull the images using nvcr.io configured as the remote endpoint. The URL [https://nvcr.io/] was publicly available. Now, this URL returns 401 unauthorized error while accessing from the browser. However, while trying to pull the image directly using the below command works fine.
*docker pull nvcr.io/nvidia/tensorrtserver:20.02-py3-clientsdk*
It works fine while directly trying to pull from the public registry, but not working via Artifactory.

*Steps to reproduce the issue:*
1. Configure a docker remote repository and update the remote URL as [https://nvcr.io/]
2. Use the commands from the 'Set Me Up' page to perform a docker login and docker pull for any image available under [https://ngc.nvidia.com/catalog/containers] registry.
3. Observe that the docker pull command returns the above-reported error.
4. Now, please try to use the direct download command available for the same image. For example: *docker pull nvcr.io/nvidia/tensorrtserver:20.02-py3-clientsdk*
5. Observe that the image download is successful.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2qo0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
unable to start Artifactory bat file,RTFACT-22067,98170,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,GirishGandhi,GirishGandhi,08/May/20 12:49 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"2020-05-08T12:25:14.863Z [jfrt ] [ERROR] [6ce231f913c9cf20] [o.j.c.ExecutionUtils:153      ] [pool-13-thread-2    ] - Cluster join: Service registry ping failed; Error while trying to connect to local router at address 'http://localhost:8046/access': Connect to localhost:8046 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
2020-05-08T12:25:14.953Z [jfrt ] [ERROR] [6ce231f913c9cf20] [ctoryContextConfigListener:115] [art-init            ] - Application could not be initialized: Connection refused: connect",Windows,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2qj4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Oct/20 10:28 PM;Ricardf;same here on windows installation after 6.18 upgrade to 7.10.2",,,,,,,,,,
Error handling inconsistent for MySQL jdbc connection,RTFACT-22064,98162,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pmmikemaw,pmmikemaw,08/May/20 8:55 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Background in case: [#132062] 

 

Problem: error handling hides the underlying issue for three services (jfrt, jffe and jfrou) and in the fourth (jfmd) not reporting the issue.

 

Switching from derby in docker container to mysql: Root cause if issue was a incorrect specification of the jdbc connection. The port (3306) was missing i.e. 

{{jdbc:mysql://<host>:/artdb?....}}

should have said:

{{jdbc:mysql://<host>:*3306*/artdb?....}}

 

Logfiles where the incorrect jdbc is missing states the following and three services manages to setup their schemas. Only jfmd fails - but does not report its missery in the logfiles.
 * The logs shows that the container can connect to mysql
{{ 2020-05-07T06:59:45.053Z [1;33m[jfac ][0;39m [34m[INFO ][0;39m [5f492c2f8aac689e] [s.d.u.AccessJdbcHelperImpl:138] [ocalhost-startStop-1] - Database: MySQL 5.6.37-82.2. Driver: MySQL Connector/J mysql-connector-java-8.0.19 (Revision: a0ca826f5cdf51a98356fdfb1bf251eb042f80bf)}}{{ 2020-05-07T06:59:45.053Z [1;33m[jfac ][0;39m [34m[INFO ][0;39m [5f492c2f8aac689e] [s.d.u.AccessJdbcHelperImpl:141] [ocalhost-startStop-1] - *Connection URL: jdbc:mysql://mgxhot1dbp01.mgx.ppm.nu:/artdb?characterEncoding=UTF-8&elideSetAutoCommits=true&useSSL=false&serverTimezone=UTC*}}{{ 2020-05-07T06:59:45.075Z [1;33m[jfac ][0;39m [34m[INFO ][0;39m [5f492c2f8aac689e] [s.d.u.AccessJdbcHelperImpl:150] [ocalhost-startStop-1] - ****Creating database schema****}}
 * The jfmd module does not protest in the logs
{{2020-05-07T06:59:55.302Z [34;1m[jfmd ][0m [34m[INFO ][0m [4a968f341a181cd ] [database_bearer.go:71 ] [main                ] - Connecting to (db config: \{mysql artifactory:***@tcp(mgxhot1dbp01.mgx.ppm.nu:)/artdb?charset=utf8&clientFoundRows=true&parseTime=true&tls=false}) [database]}}

 
 # Prefered result - ERROR cant connect for all four services
 # jfmd handles the lack of port in the same manner as the other services

 

Running with debug logging for jfmd in systemyaml helps identify the issue.

metadata:
    logging:
        application:
            level: debug

 

The Artifactory host is running:
 * OS: Red Hat Enterprise Linux Server 7.8
 * Docker version 19.03.8, build afacb8b
 * Docker-compose version 1.25.5, build 8a1c60f6
 * MySQL: 5.6
 * Artifactory 7.4.3

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2qhc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Removing plugins need artifactory restart to clear cache,RTFACT-22062,98121,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,senthila,senthila,07/May/20 7:25 PM,10/Feb/21 1:23 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When removing artifactory plugins, artifactory pods need to be restarted to clear the cache. Reload plugin API did not help.

 ",Production,,,,,,,,,,,,,,,DOC-367,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2q94:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Aql invalid with leading white space ,RTFACT-22059,98087,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dpd_30,dpd_30,07/May/20 3:20 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,AQL,,,,,,,0,,,,,,Aql submitted to the rest API with leading white space gives parse error.  Trim of content before submit resolves the issue.  But trim in the Artifactory server side would save users headache.  ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2q2g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Inconsistencies between tree-presentation and maven-metadata,RTFACT-22051,98015,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gabor.rebner,gabor.rebner,07/May/20 7:55 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.10.4,,,,,,,,,,,,,,0,,,,,,"We observe an inconsistency between the tree-file-representation and the maven-metadata.

We use two virtual repositories.

The first repository (a) consists of a list of maven-artifacts and a blacklisted folder. The tree-file-view and the metadata.xml are correct (the folder is blacklisted).
 The second repository (b) consists of a list of maven-artifacts (including snapshot-artifacts which are blacklisted in a) and a. 

We actually expect to see the file-list in the end without any file from the blacklist, but the blacklisted files are kept in the list while the metadata.xml is still correct.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2pmw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker push fails with ` manifest invalid`,RTFACT-22048,97999,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,saikatharryc,saikatharryc,07/May/20 4:57 AM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,6.13.0,,,,,,,,,,,,,,0,artifactory,enterprise,,,,"While pushing the image I'm getting ` manifest invalid` error.

Have checked :
 * Permissions
 * Tag is always unique

 

Whats happening:

```

[2020-05-07T01:38:30.511Z] + docker push xx.xxx.xxxx.xxx.com/xxx-xx-development:0.0.1-134-development
[2020-05-07T01:38:30.511Z] The push refers to repository [xx.xxx.xxxx.xxx.com/xxx-xx-development]
[2020-05-07T01:38:31.443Z] 96be2f7f00ae: Preparing
[2020-05-07T01:38:31.443Z] 4bc567731fdb: Preparing
[2020-05-07T01:38:31.443Z] 4e1f03bbcc23: Preparing
[2020-05-07T01:38:31.443Z] 84075c9b03a8: Preparing
[2020-05-07T01:38:31.443Z] bb33d085abe6: Preparing
[2020-05-07T01:38:31.443Z] 96b15b5e88d8: Preparing
[2020-05-07T01:38:31.443Z] 3f19d000e655: Preparing
[2020-05-07T01:38:31.443Z] 3a2f89bb7077: Preparing
[2020-05-07T01:38:31.443Z] 0e9bb4586e45: Preparing
[2020-05-07T01:38:31.443Z] 19f87ad64a26: Preparing
[2020-05-07T01:38:31.443Z] beb324aeeb51: Preparing
[2020-05-07T01:38:31.443Z] 8323279740f2: Preparing
[2020-05-07T01:38:31.443Z] 597b3b3b8563: Preparing
[2020-05-07T01:38:31.443Z] 363040cff96d: Preparing
[2020-05-07T01:38:34.721Z] bb33d085abe6: Pushed
[2020-05-07T01:38:34.721Z] 84075c9b03a8: Pushed
[2020-05-07T01:38:34.979Z] 4bc567731fdb: Pushed
[2020-05-07T01:38:35.543Z] 3f19d000e655: Layer already exists
[2020-05-07T01:38:35.801Z] 3a2f89bb7077: Layer already exists
[2020-05-07T01:38:40.744Z] 6abc0d38bb19: Layer already exists
[2020-05-07T01:38:41.309Z] d4b5a090f908: Layer already exists
[2020-05-07T01:38:45.986Z] f63773c65620: Layer already exists
....
....
[2020-05-07T01:38:46.244Z] 96b15b5e88d8: Pushed
[2020-05-07T01:38:49.222Z] 4e1f03bbcc23: Pushed
[2020-05-07T01:39:21.288Z] 96be2f7f00ae: Pushed
[2020-05-07T01:39:26.549Z] manifest invalid: manifest invalid
script returned exit code 1

```

*Eventhough it fails with exit 1, when i checkback after failing the image tag exist in the artifact. but not before failing though.*

*which means, even after failing it gets pushed to the artifact.*

 

 

[Stackoverflow question.|[https://stackoverflow.com/questions/59092140/docker-push-fails-manifest-invalid]]

 

Note that the image size is around 2.4GB.

 "," 

 

 ",,,,,,,,,,,,,,,CTO-349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2pjk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
search page in UI returns error ,RTFACT-22043,97887,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mariy,mariy,06/May/20 1:09 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,,,,,,,,2,,,,,,"The search page in the UI returns the error, ""An unexpected error has occurred, please check artifactory logs for further details."" 

 

The simple search should not error out. 

request.log: request.log:20200428072048|1|REQUEST|172.23.242.120|admin|GET|/ui/artifactsearch/pkg/conan|HTTP/1.1|200|0

artifactory log: 2020-04-28 07:20:55,199 [http-nio-127.0.0.1-8081-exec-2] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2oxs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
X-Frame-Options or Content-Security-Policy: frame-ancestors HTTP Headers missing on port 8081,RTFACT-22040,97864,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,basnet,basnet,05/May/20 6:44 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Hello,

I am using artifactory-oss-6.11.6 in Windows Server 2016. Qualys is showing following vulnerability:
------------------------------------------------------------------------------------------------
**X-Frame-Options or Content-Security-Policy: frame-ancestors HTTP Headers missing on port 8081.**
--------------------------------------------------------------------------------------------
How can we mitigate the issue ?

Thanks
Pradeep",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2otc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
URL encoding causes Remote Repository pull to fail,RTFACT-22039,97862,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,derekp,derekp,05/May/20 6:41 PM,11/Feb/21 6:20 AM,18/Feb/21 8:59 AM,,6.18.1,6.22.0,7.4.3,7.9.0,,,,Remote Repository ,,,,,,,2,PB_Done,,,,,"+*Problem description:*+

When you try to pull the artifacts from the remote repository which has (%2B) in the URL, Artifactory decodes into ""+"" and it is unable to locate the target artifact location. So, the download fails.

+*Expected behavior:*+

Artifactory should allow the downloads for (%2B) encoded URL

+*Steps to reproduce:*+

1.Create a generic remote repository pointing to the cloudfoundry URL ([https://java-buildpack.cloudfoundry.org|https://java-buildpack.cloudfoundry.org/])
 2.Try downloading the below artifact using the created remote repository and it will return the response as 404.

[http://localhost:8081/artifactory/cloudfoundry-remote/openjdk/bionic/x86_64/bellsoft-jre8u252%2B9-linux-amd64.tar.gz]",,,,,,,,,,,,,,,,JFUI-4018,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2osw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Moving Docker images to a version-less path is allowed,RTFACT-22017,97683,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nitzanb,nitzanb,04/May/20 4:38 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.19.0,7.4.0,,,,,,Docker,,,,,,,0,,,,,,"See images - 

!Screen Shot 2020-05-04 at 19.41.09.png|width=472,height=349!

!Screen Shot 2020-05-04 at 19.32.34.png|width=657,height=145!

 

Trying to pull such image will get an error because the default tag is ""latest""

This kind of images will not successfully get indexed by Xray

This option should be blocked",,,,,,,,,,,,,,,,,,,"04/May/20 4:38 PM;nitzanb;Screen Shot 2020-05-04 at 19.32.34.png;https://www.jfrog.com/jira/secure/attachment/42024/Screen+Shot+2020-05-04+at+19.32.34.png","04/May/20 4:41 PM;nitzanb;Screen Shot 2020-05-04 at 19.41.09.png;https://www.jfrog.com/jira/secure/attachment/42025/Screen+Shot+2020-05-04+at+19.41.09.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2nqw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NuGet not installing latest version from virtual repositories,RTFACT-22015,97673,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,04/May/20 4:01 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.19.0,,,,,,,NuGet,,,,,,,0,,,,,,"We have one local and one remote nuget repo included in a virtual repo.

When using the virtual repo, nuget always fetches an old version while using the local repo it fetches the latest version.

 

Using the virtual repository as source yields an unexpected result. It returns v3.3.0 of the selected package. 
{code:java}
root@6d5c653c3ab7:~/foo# dotnet add package Axis.PostgreSQL
  Writing /tmp/tmpRcQMFD.tmp
info : Adding PackageReference for package 'Axis.PostgreSQL' into project '/root/foo/foo.csproj'.
info : Restoring packages for /root/foo/foo.csproj...
info :   GET https://api.nuget.org/v3-flatcontainer/axis.postgresql/index.json
info :   CACHE https://artifacts.se.axis.com/artifactory/api/nuget/virtual-nuget/FindPackagesById()?id='Axis.PostgreSQL'&semVerLevel=2.0.0
info :   NotFound https://api.nuget.org/v3-flatcontainer/axis.postgresql/index.json 744ms
info : Package 'Axis.PostgreSQL' is compatible with all the specified frameworks in project '/root/foo/foo.csproj'.
info : PackageReference for package 'Axis.PostgreSQL' version '3.3.0' updated in file '/root/foo/foo.csproj'.
info : Committing restore...
info : Writing assets file to disk. Path: /root/foo/obj/project.assets.json
log  : Restore completed in 1.18 sec for /root/foo/foo.csproj.
{code}
 

Compare this when using the local repo. Here v7.0.0 is fetched, which is the latest version.
{code:java}
root@6d5c653c3ab7:~/foo# dotnet add package Axis.PostgreSQL
  Writing /tmp/tmpByWBDx.tmp
info : Adding PackageReference for package 'Axis.PostgreSQL' into project '/root/foo/foo.csproj'.
info : Restoring packages for /root/foo/foo.csproj...
info :   GET https://api.nuget.org/v3-flatcontainer/axis.postgresql/index.json
info :   CACHE https://artifacts.se.axis.com/artifactory/api/nuget/local-nuget/FindPackagesById()?id='Axis.PostgreSQL'&semVerLevel=2.0.0
info :   CACHE https://artifacts.se.axis.com/artifactory/api/nuget/local-nuget/FindPackagesById()?semVerLevel=2.0.0&id=%27Axis.PostgreSQL%27&%24skip=80
info :   NotFound https://api.nuget.org/v3-flatcontainer/axis.postgresql/index.json 715ms
info : Package 'Axis.PostgreSQL' is compatible with all the specified frameworks in project '/root/foo/foo.csproj'.
info : PackageReference for package 'Axis.PostgreSQL' version '7.0.0' updated in file '/root/foo/foo.csproj'.
info : Committing restore...
info : Writing assets file to disk. Path: /root/foo/obj/project.assets.json
log  : Restore completed in 1.05 sec for /root/foo/foo.csproj.
{code}
 

Any idea why this happens?

And is there a workaround to get the virtual repos to return the correct version?

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2np4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/May/20 4:14 PM;stefanga;Duplicate of https://www.jfrog.com/jira/browse/RTFACT-21843

Sorry for not finding it before creating the ticket. I noticed the number 80 in the logs I posted in the ticket when reading it again and that number felt familiar. So I searched again and ofc found an existing ticket.

This is fixed in 6.19.1 for anyone finding this issue.",,,,,,,,,,
Seeing so many unnecessary calls to remote registry,RTFACT-21995,97487,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bekzot89,bekzot89,01/May/20 6:08 PM,26/Jan/21 10:32 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,7,,,,,,"We have virtual registry setup that has local,remote docker registries. I do not understand why Artifactory is calling to remote repo tags list even though it finds the tag in local registry. As far as I understand hierarchy is if it finds image and info from local registry it should not call to remote. Can you please help me understand why i am seeing so many calls like below?


{code:java}
2020-05-01 17:56:21,955 [http-nio-8081-exec-185] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:320) - Unable to fetch catalog from 'https://registry-1.docker.io/v2/_catalog?n=1000': HTTP/1.1 401 Unauthorized
2020-05-01 17:56:21,966 [http-nio-8081-exec-132] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:320) - Unable to fetch catalog from 'https://registry-1.docker.io/v2/_catalog?n=1000': HTTP/1.1 401 Unauthorized
2020-05-01 17:56:22,049 [http-nio-8081-exec-13] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:281) - Unable to fetch tags from 'https://registry-1.docker.io/v2/com.shoprunner.data.sink/tags/list?': HTTP/1.1 401 Unauthorized
2020-05-01 17:56:22,054 [http-nio-8081-exec-38] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:281) - Unable to fetch tags from 'https://registry-1.docker.io/v2/revelio-launcher/tags/list?': HTTP/1.1 401 Unauthorized
2020-05-01 17:56:22,066 [http-nio-8081-exec-47] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:281) - Unable to fetch tags from 'https://registry-1.docker.io/v2/reverseproxy-datadog-agent-wip/tags/list?': HTTP/1.1 401 Unauthorized{code}
{code:java}
2020-05-01 17:56:22,245 [http-nio-8081-exec-141] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:281) - Unable to fetch tags from 'https://docker.bintray.io/v2/reverseproxy-datadog-agent-prd/tags/list?': HTTP/1.1 404 Not Found
2020-05-01 17:56:23,137 [http-nio-8081-exec-100] [ERROR] (o.a.a.d.r.v.DockerV2RemoteRepoHandler:320) - Unable to fetch catalog from 'https://registry-1.docker.io/v2/_catalog?n=1000': HTTP/1.1 401 Unauthorized{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2mm0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/May/20 5:57 AM;stefanga;We are seeing these errors too. Since they are most likely not actual errors its a nuisance to get alerted by errors in the log just to find that there is nothing to act on.","27/Oct/20 9:54 AM;alo.eenmae;Are there any plans to fix this problem in the near future?","23/Nov/20 10:18 PM;lance.johnston;We're seeing the same. I think this is actually adding to our docker hub rate limiting issues.","26/Jan/21 10:32 PM;calexandre;I also would like to see this fixed. I have a similar setup and in my virtual repository setup I have strategically placed my `local docker` repository first, so that it gets queried before `docker.io`, but like the OP says, I'm seeing lots of tag list requests with `401 Unauthorized`...

Can you please provide feedback?",,,,,,,
Proxy Settings can't be saved,RTFACT-21964,97371,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,schaarda,schaarda,30/Apr/20 12:42 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Configuration,,,,,,,0,,,,,,"After filling the required fields for a new proxy, the save button is activated. However pressing it, does not do anything. No message, no error, no logentry and no new proxy.","Host on Windows Server 2016, Client on Windows 7 with Chrome Browser",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2lxk:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"17/Aug/20 9:45 AM;AckermannC;I have the same issue with version 7.7.3 if I use Firefox (68.10.0.esr; Windows 10)

It is working with Chrome",,,,,,,,,,
Artifactory won't show artifacts from remote repo https://repo.osgeo.org/repository/release/,RTFACT-21963,97370,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bert.meedendorp,bert.meedendorp,30/Apr/20 12:29 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Artifactory Home,,,,,,,1,,,,,,"There are several remote osgeo repo's bundled together within [https://repo.osgeo.org/repository/release/] 

See the announcement in [https://www.osgeo.org/foundation-news/new-osgeo-repo/] 

 

Artifactory wil not read the documented url [https://repo.osgeo.org/repository/release/] 

The internal test gives a 404 and only the index files are shown.

When I use the 'web' url [https://repo.osgeo.org/service/rest/repository/browse/release/] I get a good test back from artifactory.

But there is only the directory structure of this remote repo. The artifacts itself are not shown.

 

What goes wrong?

 

*Workaround:*

1. Create a maven remote repo pointing to [https://repo.osgeo.org/service/rest/repository/browse/release/]
2. Create another maven remote repo pointing to [https://repo.osgeo.org/repository/release/]
3. Create a Maven virtual repo and add above 2 maven remote repository to it.
4. Run the below following REST API to download a particular artifact from the remote repository via Artifactory.
curl -u admin [http://Artifactory.com/artifactory/osgeo/org/geotools/gt-cql/2.5.0/gt-cql-2.5.0-sources.jar|http://artifactory.com/artifactory/osgeo/org/geotools/gt-cql/2.5.0/gt-cql-2.5.0-sources.jar] -O
5. Go to the Artifactory repository view in the browser, Select the above Maven virtual repository -> right click -> click on Refresh -> click on Navigate Browser.
6. Able to view the artifacts in the HTML directory structure.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2lxc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Oct/20 6:53 AM;bert.meedendorp;Ariel, thanks for the update.

I know the announcement of osgeo. 

We have changed the remote url in Artifactory, but Artifactory wont recognize this remote url. It gives a ""Connection failed: Error 404: Not Found""  on the given url [https://repo.osgeo.org/repository/release/] 

 

Please look at our discussion with osgeo support in [https://trac.osgeo.org/osgeo/ticket/2445]

 

We still don't have a working remote repository

 

 ",,,,,,,,,,
Remote repository - repeated query params not propagated correctly,RTFACT-21961,97358,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Waldek,Waldek,30/Apr/20 11:01 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Remote Repository ,,,,,,,0,,,,,,"Hello,
 I believe there is a bug in ""*Propagate Query Params*"" feature of the remote repository configuration.

The parameters propagation can indeed be turned on/off. However, when it comes to propagating the list-type parameters they can only be used as comma-delimited.

Other forms which are widely accepted like simply repeating the keys or repeating them with [] which are supported by all modern web servers and frameworks are not handled correctly.

 

[See details of the standard|#page-26]]

 

Below is a gist of the current behaviour is provided.

 
{code:java}
The query as follows:

?key=/val1&key=/val2&key=/val3

is transformed into:

?key=/val1{code}
Only the first occurrence of the parameter makes it to the final query propagated to the remote handler.
  
 [Some evidence:|https://www.rfc-editor.org/rfc/rfc6570.html#page-26]
{code:java}
- wget:
wget -d ""http://arhost.net:8082/artifactory/bms-nas-generic-prod-bms/com/amadeus/obe/mdw/DeviceCache/api/15.0.0.2/api-15.0.0.2-lib.tar.gz?repository_path=/remote/intdeliv/components&repository_path=/remote/projects/ngdcs/ngddelde&repository_path=/remote/projects/ngddelde/deliver&repository_path_2=/remote/projects/ngddelde/deliver""- artifactory:2020-04-30T09:56:56.309Z [jfrt ] [INFO ] [73e0ae216754417f] [o.a.r.HttpRepo:422            ] [http-nio-8081-exec-2] - bms-nas-generic-prod-bms downloading http://remote.handler.net:6080/com/amadeus/obe/mdw/DeviceCache/api/15.0.0.2/api-15.0.0.2-lib.tar.gz?repository_path=%2Fremote%2Fintdeliv%2Fcomponents&repository_path_2=%2Fremote%2Fprojects%2Fngddelde%2Fdeliver 708.96 KB
2020-04-30T09:56:56.383Z [jfrt ] [INFO ] [73e0ae216754417f] [o.a.r.HttpRepo:435            ] [http-nio-8081-exec-2] - bms-nas-generic-prod-bms downloaded  http://remote.handler.net:6080/com/amadeus/obe/mdw/DeviceCache/api/15.0.0.2/api-15.0.0.2-lib.tar.gz?repository_path=%2Fremote%2Fintdeliv%2Fcomponents&repository_path_2=%2Fremote%2Fprojects%2Fngddelde%2Fdeliver 708.96 KB at 9,843.06 KB/sec- remote:
172.29.1.124 - - [30/Apr/2020:09:56:56 +0000] ""GET /com/amadeus/obe/mdw/DeviceCache/api/15.0.0.2/api-15.0.0.2-lib.tar.gz?repository_path=%2Fremote%2Fintdeliv%2Fcomponents&repository_path_2=%2Fremote%2Fprojects%2Fngddelde%2Fdeliver HTTP/1.1"" 200 725974 ""-"" ""Artifactory/7.4.3 70403900"" ""-""
172.29.1.124 - - [30/Apr/2020:09:56:56 +0000] ""GET /com/amadeus/obe/mdw/DeviceCache/api/15.0.0.2/api-15.0.0.2-lib.tar.gz?repository_path=%2Fremote%2Fintdeliv%2Fcomponents&repository_path_2=%2Fremote%2Fprojects%2Fngddelde%2Fdeliver HTTP/1.1"" 200 725974 ""-"" ""Artifactory/7.4.3 70403900"" ""-""{code}
Kind regards,

Waldek",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2lw0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
[http-nio-8081-exec-25337] [INFO ] (o.a.s.l.LdapServiceImpl:129) - Couldn't find user named ,RTFACT-21957,97324,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,FrankSchlauer,FrankSchlauer,30/Apr/20 6:43 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,,,,,,,,0,,,,,,"Hello, we have this issue ""[http-nio-8081-exec-25337] [INFO ] (o.a.s.l.LdapServiceImpl:129) - Couldn't find user named xxx"" .

We have this problem up to 10 times per second and with multiple user accounts The authentication via LDAP to the AD obviously does not work and various work points are then not executed. The incorrect logins happen more and more often, the number is getting higher and higher. What exactly is the problem here? A manual login to AD is possible at any time without any problems with these user accounts.
The log file of the domain controller does not contain any incorrect logins for these user accounts. In the blog there are several similar requests closed but there is no solution visible. But which solution did you find or which workaround do you use now?

Kind regards,

FS

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2low:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Backup failure notification email will not trigger when a backup job fails due to Build info file does not exist error,RTFACT-21954,97261,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,29/Apr/20 1:32 PM,11/Feb/21 6:40 AM,18/Feb/21 8:59 AM,,6.19.1,,,,,,,Backup,,,,,,,0,,,,,,"+Issue Description+: 
 When an Artifactory backup job fails while getting the build-info object for a specific build, Artifactory admin users will not receieve a failed backup notification email.

 

+Steps to reproduce+:
 # Configure mail server to Artifactory instance, check the connectivity between mail server to Artifactory using *Send Test Mail*
 # Deploy a build ""test-build"" to Artifactory.
 # Delete the build info from the nodes table under DB.  Get the node_id using this query for the current build ""SELECT * FROM nodes WHERE node_type=1 AND node_path='test-build'"", delete the build which is deployed in Artifactory using the below query ""DELETE FROM nodes WHERE node_id=<node-ID>"", which will delete the build-info.json entry from the nodes table.
 # Create a new Backup job, Enable ""*Verify enough disk space is available for backup*"", ""*Send Mail to Admins if there are Backup Errors*"" option in the backup job which will trigger an email to admin users when the backup fails, I have attached backup configuration for reference.
 # Please run the backup, it fails with error in UI ""Build info file does not exist: artifactory-build-info:test-build/49-1588005273557.json""",,,,,,,,,,,,,,,,,,,"29/Apr/20 1:45 PM;pavang;backup-config.jpg;https://www.jfrog.com/jira/secure/attachment/41935/backup-config.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2lbc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
ArtifactoryConfigurationManagerTest takes 2 minutes to complete,RTFACT-21951,97209,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,morm,uriahl,uriahl,28/Apr/20 11:42 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"The test was excluded from running as part of our db-tests suite (testng-db.xml). I re-added it because it seemed like a mistake. However, the test takes ~2m to run on my laptop, which I assume is related to the new conf-mgr v2 quiet period mechanism. 

It might be possible to make it shorter by lowering the conf-mgr quiet period mechanism in the test. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc3q76:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Ubuntu upgrade to 7.4.3 failed,RTFACT-21942,97108,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timothyheider,timothyheider,27/Apr/20 6:54 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,7.4.3,,,,,,,Artifactory Home,,,,,,,0,,,,,,I did an apt upgrade and it upgraded my Artifactory to 7.4.3. Now when I attempt to open the desktop /ul/ returns a 404. I am not able to fetch or deploy from the artifact server.,Ubuntu 18.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2kk8:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Exception isn't cought correctly when authenticating with API key with LDAP user  ,RTFACT-21914,96985,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,26/Apr/20 12:34 PM,11/Feb/21 6:51 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"When we authenticate with API key with an LDAP user we call the method refreshUserFromLdap
We perform a query to LDAP to search for the username and get it's groups.

The issue happens if the LDAP queries within findSettingsForActiveUser succeed, but the LDAP queries within searchUserInLdap fails. 
When that happens, dirContextOperations is returned as null, then null pointer exceptions are shown within createSimpleUser, so 500 error is returned as the exception is not caught, and *request log was skipped* as well because of uncought exception.

For example:

FE (Httpd):

[17/Mar/2020:13:24:40 +0100] redacted ""GET /artifactory/some-repo/path-to-package/some-file.tgz HTTP/1.1"" 65 500 2151467 redacted
 
BE request.log:

  No log is displayed for that particular request.

 BE artifactory.log:

artifactory.2020-03-17.5.log.zip:2020-03-17 13:24:42,460 [http-nio-8081-exec-2549] [WARN ] (o.a.s.l.LdapServiceImpl:179) - Unexpected exception in LDAP query:for user redacted vid LDAP: Uncategorized exception occured during LDAP processing; nested exception is javax.naming.NamingException: LDAP response read timed out, timeout used:2000ms.

Please note that another possible impacted method is the getStringAttribute and populateGroups org/artifactory/security/ldap/LdapUtils.java:221 when going through the createSimpleUser.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jts:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"After changing Artifactory's port, repositories ""Set Me Up"" URL directs to port 8040 instead of the new port ",RTFACT-21913,96968,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaniat,shaniat,26/Apr/20 9:39 AM,11/Feb/21 6:52 AM,18/Feb/21 8:59 AM,,,,,,,,,Web UI,,,,,,,0,PB_Done,,,,,"After changing Artifactory's port, repositories ""Set Me Up"" URL directs to port 8040 instead of the new port. 

Steps to reproduce:
1. change Artifactory's port by adding the following at the bottom of the file (i.e change to 1234)
{code:java}
artifactory:
    port: 1234
{code}
2. go to Artifactory --> choose a repository
3. click on ""Set Me Up""
4. note that the URL is directed to Access port instead of the newly configured port:
(<artifactory_url>:8040/artifactory....)

Was reported for Artifactory 7.3.2 and tested on 7.4.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jq0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
URL redirect fails after changing Artifactory port ,RTFACT-21912,96967,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaniat,shaniat,26/Apr/20 9:28 AM,11/Feb/21 6:53 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"After changing Artifactory's port from 8081 to another port in the system.yaml file, the redirect fails.
Hitting <Artifactory_ip>:<new_port> should redirect to <Artifactory_ip>:8082/ui.
Instead, hitting <Artifactory_ip>:<new_port> will result in 404.

steps to reproduce:
1. Access the following URL:
HTTP://<Artifactory_ip>:8081
2. Notice you are redirected to HTTP://<Artifactory_ip>:8082/ui
3. Change Artifactory port in the system.yaml file by adding the following at the bottom of the file (i.e change to 1234)
{code:java}
artifactory:
    port: 1234
{code}
4. Try to access the following URL:
HTTP://<Artifactory_ip>:1234
5. Notice step 4 results in a 404 page

The expected behavior is instead of getting a 404 page, to be redirected to HTTP://<Artifactory_ip>:8082/ui as before the port was changed



tested in Artifactory 7.4.1 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jps:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The uploaded rest API does not support the specified character set,RTFACT-21911,96949,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,guoyz,guoyz,26/Apr/20 1:52 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"When i use the rest API to upload the file containing the Chinese file name, the returned ""uri"" is garbled, and the content type is:'the content-type' : 'application/vnd.org.jfrog.artifactory.storage.ItemCreated+json; Charset = ISO - 8859-1 '



For example:
 1. Command is：
 curl -vvv -H 'Accept':'application/json; charset=utf-8' -H 'Content-Type':'application/json; charset=utf-8' -H 'X-JFrog-Art-Api:AKCp5ekmj8byn2L8XSANG2hRKa1v5iqRN1bcMFyEfgcApR2ewzSmceW2bawkNj2Z1cQcdd5am' -T hello测试.docx ""http://192.168.230.155:8081/artifactory/generic-test/path/""

2. Response is:
...
< Location: http://192.168.230.155:8081/artifactory/generic-test/path/hello??.docx
< Content-Type: application/vnd.org.jfrog.artifactory.storage.ItemCreated+json;charset=ISO-8859-1
< Transfer-Encoding: chunked
< Date: Sun, 26 Apr 2020 01:16:04 GMT
< 
{
 ""repo"" : ""generic-test"",
 ""path"" : ""/path/hello??.docx"",
 ""created"" : ""2020-04-26T09:13:25.427+08:00"",
 ""createdBy"" : ""admin"",
 ""downloadUri"" : ""http://192.168.230.155:8081/artifactory/generic-test/path/hello??.docx"",
 ""mimeType"" : ""application/vnd.openxmlformats-officedocument.wordprocessingml.document"",
 ""size"" : ""14576"",
 ""checksums"" : {
 ""sha1"" : ""77c0b50acc8362232ca0ab67c9ab7c1a197808d0"",
 ""md5"" : ""b60c12ba3221b321eac809404a9fb55a"",
 ""sha256"" : ""63bfd572be152ea668386945011aeccc417016f55ff9ef44065371c23dcbe245""
 },
 ""originalChecksums"" : {
 ""sha256"" : ""63bfd572be152ea668386945011aeccc417016f55ff9ef44065371c23dcbe245""
 },
 ""uri"" : ""http://192.168.230.155:8081/artifactory/generic-test/path/hello??.docx""
...

3. The correct file name is:hello测试.docx, but it return hello??.docx, and the Content-Type is:Content-Type: application/vnd.org.jfrog.artifactory.storage.ItemCreated+json;charset=ISO-8859-1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jls:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to pull docker images - unknown blob,RTFACT-21910,96945,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pablo.bautista,pablo.bautista,25/Apr/20 1:40 AM,04/Feb/21 7:36 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Artifactory Home,,,,,,,3,,,,,," docker pull artifactory-dev2.associatesys.local:6555/centos7java1-8
Using default tag: latest
latest: Pulling from centos7java1-8
30cf2e26a24f: Already exists
99dd41655d8a: Already exists
1a26e8d70396: Already exists
cab0b3f7c084: Already exists
8ab9cd7a823b: Already exists
3aeddf35bb5d: Already exists
07beeb80fd9b: Pull complete
9c7ce718fac3: Extracting [==================================================>]     872B/872B
26aa13257ce7: Download complete
220a6064bfa9: Downloading [======>                                            ]  8.463MB/67.7MB
04daa84aa680: Download complete
f85e53e11957: Download complete
4896d4a7d104: Downloading [======>                                            ]  7.932MB/62.82MB
4ea0f17610f4: Download complete
60fe2cc7f3e5: Download complete
567a7361e442: Download complete
765af091041f: Download complete
d44c20b4b0fd: Download complete
3042e7de4914: Download complete
ede921fce28b: Download complete
3357758bb56e: Download complete
c98a1f2ba1f7: Download complete
d5652512b94e: Download complete
fb1b1104ffa5: Download complete
560acfaad381: Downloading
f09ed83576d2: Waiting
538c7b6f1c85: Waiting
45e9ed4b4490: Waiting
5d8464a9df77: Waiting
4d7b7b3402ae: Waiting
7c2152647f76: Waiting
c18f0ddba7f2: Waiting
ab130d99de34: Waiting
faeab9929ee5: Waiting
unknown blob",DEV,,,,,,,,,,,,,,,CTO-349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jkw:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Nov/20 10:31 PM;christo.alexander_cf;Any update on this? This is affecting our instance as well. We can't seem to pull any ""new"" images meaning any that we have not pulled in the past. This problem persists after zapping the cache and even deleting and recreating the Dockerhub external repo. Pulling the same images via Docker Hub directly works fine.","26/Jan/21 7:53 AM;emreyokur;Any update? A","04/Feb/21 7:36 PM;danmanners;I'm running into this with several repos as well. Pulling directly from Docker Hub works just fine. Can this be assigned to someone?",,,,,,,,
Conda default remote repository does not include channels,RTFACT-21908,96937,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arturoa,arturoa,24/Apr/20 10:24 PM,11/Feb/21 7:03 AM,18/Feb/21 8:59 AM,,6.19.0,,,,,,,Conda,,,,,,,1,PB_Done,,,,,"Conda default remote repository does not include user channels. This means that channel-specific downloads will fail when working against Artifactory vs when using the default Conda remote site.

To reproduce:
1. Run this against the default conda client/remote (non Artifactory) {noformat}conda install -c rapidsai -c nvidia -c conda-forge -c defaults cudf=0.12 python=3.6 cudatoolkit=10.1{noformat} 
2. Notice it downloads all packages as expected
3. Create the ARtifactory default Conda repositories and point the conda client to it
4. Run the same command and notice the failure


{noformat}

PackagesNotFoundError: The following packages are not available from current channels:

  - cudf=0.12

Current channels:

  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/rapidsai/linux-64
  - http://adminkey@mill.jfrog.team:12250/artifactory/api/conda/conda/rapidsai/noarch
  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/nvidia/linux-64
  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/nvidia/noarch
  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/conda-forge/linux-64
  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/conda-forge/noarch
  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/linux-64
  - http://admin:key@mill.jfrog.team:12250/artifactory/api/conda/conda/noarch
{noformat}

The problem seems to be that we only include the default packages (conda-remote
https://repo.anaconda.com/pkgs/main). The channel packages, can be found at https://conda.anaconda.org/. 

A potential solution on the Artifactory side is to create two remote repositories and aggregate them under the default conda virtual. 

Workaround:

1. Manually create a second conda remote repository with the URL https://conda.anaconda.org/
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jj4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Conda remote repo cannot resolve some of the packages,RTFACT-21907,96935,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sowjanyak,sowjanyak,24/Apr/20 10:03 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.19.0,,,,,,,Conda,,,,,,,0,,,,,,"Artifactory is unable to pull conda packages from the remote repository. Conda client is able to be successfully pull the packages directly.

$ conda info

 
{code:java}
active environment : base
active env location : /opt/conda
shell level : 1
user config file : /root/.condarc
populated config files : /root/.condarc
   conda version : 4.8.3
conda-build version : not installed
python version : 3.6.10.final.0
       virtual packages : __glibc=2.28
       base environment : /opt/conda  (writable)
channel URLs : http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/linux-64       http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/noarch
      package cache : /opt/conda/pkgs
                          /root/.conda/pkgs
      envs directories : /opt/conda/envs
                          /root/.conda/envs
       platform : linux-64
user-agent : conda/4.8.3 requests/2.23.0 CPython/3.6.10 Linux/4.19.76-linuxkit debian/10 glibc/2.28
        UID:GID : 0:0
        netrc file : None
        offline mode : False
{code}
 

Example: rapids=0.13 is failing to be installed 

 
{code:java}
$ conda install -c rapidsai -c nvidia -c conda-forge  -c defaults rapids=0.13 python=3.6
Collecting package metadata (current_repodata.json): done
Solving environment: failed with initial frozen solve. Retrying with flexible solve.
Collecting package metadata (repodata.json): done
Solving environment: failed with initial frozen solve. Retrying with flexible solve.
PackagesNotFoundError: The following packages are not available from current channels:
 - rapids=0.13
Current channels:http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/rapidsai/linux-64
http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/rapidsai/noarch
http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/nvidia/linux-64
http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/nvidia/noarch
http://admin:{token}A@mill.jfrog.info:10000/artifactory/api/conda/conda/conda-forge/noarch 
http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/linux-64 
http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/noarch
 
To search for alternate channels that may provide the conda package you're
looking for, navigate to https://anaconda.org
and use the search bar at the top of the page
http://admin:{token}@mill.jfrog.info:10000/artifactory/api/conda/conda/conda-forge/linux-64{code}
Debug mode:

 
{code:java}
DEBUG conda.core.subdir_data:_load(260): 304 NOT MODIFIED for 'http://mill.jfrog.info:12006/artifactory/api/conda/conda/linux-64/repodata.json'. Updating mtime and loading from disk
TRACE conda.gateways.disk.update:touch(99): touching path /opt/conda/pkgs/cache/136d2f8c.json
DEBUG conda.core.subdir_data:_read_pickled(324): found pickle file /opt/conda/pkgs/cache/136d2f8c.q
DEBUG conda.resolve:__init__(110): restricting to unmanageable packages: __glibc
done
Solving environment: ...working... DEBUG conda.resolve:get_reduced_index(572): Retrieving packages for: 
  - python=3.6
  - rapids=0.13
failed with initial frozen solve. Retrying with flexible solve.
Traceback (most recent call last):
  File ""/opt/conda/lib/python3.6/site-packages/conda/cli/install.py"", line 265, in install
    should_retry_solve=(_should_retry_unfrozen or repodata_fn != repodata_fns[-1]),
  File ""/opt/conda/lib/python3.6/site-packages/conda/core/solve.py"", line 117, in solve_for_transaction should_retry_solve)
  File ""/opt/conda/lib/python3.6/site-packages/conda/core/solve.py"", line 158, in solve_for_diff
    force_remove, should_retry_solve)
  File ""/opt/conda/lib/python3.6/site-packages/conda/core/solve.py"", line 275, in solve_final_state
    ssc = self._add_specs(ssc)
  File ""/opt/conda/lib/python3.6/site-packages/conda/core/solve.py"", line 555, in _add_specs
    explicit_pool = ssc.r._get_package_pool(self.specs_to_add)
  File ""/opt/conda/lib/python3.6/site-packages/conda/resolve.py"", line 553, in _get_package_pool
    pool = self.get_reduced_index(specs)
  File ""/opt/conda/lib/python3.6/site-packages/conda/common/io.py"", line 88, in decorated
    return f(*args, **kwds)
  File ""/opt/conda/lib/python3.6/site-packages/conda/resolve.py"", line 574, in get_reduced_index    explicit_specs, features = self.verify_specs(explicit_specs)
  File ""/opt/conda/lib/python3.6/site-packages/conda/resolve.py"", line 288, in verify_specs
    raise ResolvePackageNotFound(bad_deps)
conda.exceptions.ResolvePackageNotFound: 
  - rapids=0.13
{code}
 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2jio:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
server.xml with duplicate address parameters,RTFACT-21901,96850,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dwerdermann,dwerdermann,23/Apr/20 2:42 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,7.4.1,,,,,,,Artifact Storage,,,,,,,0,,,,,,"After upgrade from 7.3.1 to 7.4.1 the artifactory does not start with following error.
 
Start error:
/opt/jfrog/artifactory/var/log/tomcat/tomcat-catalina-2020-04-23.log
{code:java}
23-Apr-2020 14:30:30.935 SEVERE [main] org.apache.tomcat.util.digester.Digester.fatalError Parse Fatal Error at line 25 column 112: Attribute ""address"" was already specified for element ""Connector"".        org.xml.sax.SAXParseException; systemId: file:/opt/jfrog/artifactory/app/artifactory/tomcat/conf/server.xml; lineNumber: 25; columnNumber: 112; Attribute ""address"" was already specified for element ""Connector"".                at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)                at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:400)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1471)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanAttribute(XMLDocumentFragmentScannerImpl.java:1524)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1353)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2710)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)                at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:534)                at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:888)                at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:824)                at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)                at java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1216)                at java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:635)                at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1518)                at org.apache.catalina.startup.Catalina.load(Catalina.java:611)                at org.apache.catalina.startup.Catalina.load(Catalina.java:662)                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)                at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)                at java.base/java.lang.reflect.Method.invoke(Method.java:566)                at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:309)                at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:492) {code}


/opt/jfrog/artifactory/app/artifactory/tomcat/conf/server.xml

{code:java}
<Connector port=""8040"" sendReasonPhrase=""true"" maxThreads=""500"" address=""localhost"" address=""127.0.0.1"" enableLookups=""false"" disableUploadTimeout=""true""     minSpareThreads=""20""/> {code}
 

When I delete the duplicate ""address"" parameter and try to start the service via 
{code:java}
systemctl start artifactory {code}
It fails again and the faulty line is in the file again. after a few minute",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2j54:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget Virtual Repo Not Showing Next Link,RTFACT-21899,96834,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattbennett,mattbennett,23/Apr/20 1:37 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,7.4.1,,,,,,,NuGet,,,,,,,2,,,,,,"WE updated to Artifactory 7.4.1 recently and are seeing an issue with our virtual nuget repos. We have a virtual repo set up which mirrors a couple of other repositories, we have noticed that since the update when running FindPackagesById() on the repo when there is more than 80 versions for the package it returns 80 packages and no ""Next"" link. In the local source repos the behaviour is correct and there is a Next link.

Steps to Reproduce:
 #  - Create a local nuget repo
 #  - Create a virtual repo which mirrors/aggregates it
 #  - Add more than 80 versions of a package to the repo
 #  - Use artifactory/api/nuget/\{virtualRepoKey}/FindPackagesById()?id=%27Package.Name%27&semVerLevel=2.0.0 - and artifactory/api/nuget/\{localRepoKey}/FindPackagesById()?id=%27Package.Name%27&semVerLevel=2.0.0
 #  - Observe that when running against the virtual repo you get no tag like below but for the local repo you do
{noformat}
<link rel=""next"" href=""...""/>{noformat}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2j1s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to download expired resource from the UI,RTFACT-21897,92391,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,matank,matank,06/Mar/20 1:49 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"Unable to download expired resource in remote repository from the UI.

The cause: Artifact path contains the remote-cache repository and not the remote repository itself (in the attached screenshot npmjs is the remote repository, the repository it is downloading from is npmjs-cache)

When artifact is expired (mostly metadata files which requires checking again with the remote if the file was changed) it cannot be downloaded from the cache and requires to be downloaded from the remote.

For conclusion (using an example):

*When navigating in the tree to an artifact in npmjs (remote repository), the download should be performed using npmjs repokey.*

*Only when navigating to an artifact in npmjs-cache (local cache repository), the download should be performed using the cache repokey.*

 ",,,,,,,,,,,,,,,,,,,"06/Mar/20 1:49 PM;matank;Screen Shot 2020-03-06 at 15.41.57.png;https://www.jfrog.com/jira/secure/attachment/40454/Screen+Shot+2020-03-06+at+15.41.57.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1wlc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Couldn't save resource reason: org.artifactory.concurrent.LockingException: Lock on LockEntryId,RTFACT-21891,96728,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,idanm,idanm,22/Apr/20 2:47 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifact Storage,Database,Debian,HA,,,,0,,,,,,"The problem occurred when i tested the primaryless feature on Package Indexer Tester on Debian PM

The test that failed on PIT is:

""DebianSpec.16. Search and install kostya in virtual repo debian3""

The fail is on artifactory service log:
{code:java}
2020-04-21T06:58:29.435Z [jfrt ] [ERROR] [58cfc3afc0b07f52] [o.a.r.d.DbStoringRepoMixin:290] [art-exec-38 ] - Couldn't save resource debian3:dists/kostya/InRelease, reason: org.artifactory.concurrent.LockingException: Lock on LockEntryId debian3:dists/kostya/InRelease not acquired in 120 seconds. Lock info: org.artifactory.storage.db.locks.provider.DbMapLockWrapper@1a36320d. at org.artifactory.storage.fs.lock.SessionLockEntry.acquire(SessionLockEntry.java:117){code}
artifactory request log:
{code:java}
2020-04-21T06:58:29.704Z|a85c41da155ff0c5|172.17.0.1|admin|POST|/api/deb/reindex/debian3|500|0|0|120764|artifactory-client-java/2.7.0{code}
this log is taken from test failed log:

06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> POST /ar
{code:java}
tifactory/api/deb/reindex/debian3?async=0 HTTP/1.1
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> Content-type: */*
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> Content-Length: 0
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> Host: localhost:32795
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> Connection: Keep-Alive
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> User-Agent: artifactory-client-java/2.7.0
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> Accept-Encoding: gzip,deflate
06:56:28.939 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 >> Authorization: Basic YWRtaW46cGFzc3dvcmQ=
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << HTTP/1.1 500 Internal Server Error
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << Date: Tue, 21 Apr 2020 06:58:29 GMT
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << Content-Type: application/json
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << Transfer-Encoding: chunked
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << Connection: keep-alive
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << Server: Artifactory/7.x.infra.RTFACT.18693 2147483647
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << X-Artifactory-Id: 9bcb34876e630768da947df53ef23b65dcd1596e
06:58:29.704 [Test worker] DEBUG org.apache.http.headers - http-outgoing-29 << X-Artifactory-Node-Id: art1{code}
the full logs are included in this ticket(2 runs same fail 2 log batch).

*this fail is flaky*","7.4.0

7.x.infra.RTFACT.18693-38 (masterless ha (7.5))

 ",,,,,,,,,,,,,,,,,,"22/Apr/20 2:46 PM;idanm;PIT debian fail on 18693-38 run 1.zip;https://www.jfrog.com/jira/secure/attachment/41809/PIT+debian+fail+on+18693-38+run+1.zip","22/Apr/20 2:46 PM;idanm;PIT debian fail on 18693-38 run 2.zip;https://www.jfrog.com/jira/secure/attachment/41808/PIT+debian+fail+on+18693-38+run+2.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ifc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Reverse Proxy config generated for Apache does not work with Conan packages with build info,RTFACT-21886,96655,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jayanths,jayanths,22/Apr/20 6:16 AM,11/Feb/21 7:38 AM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Reverse Proxy Configuration Generator,,,,,,,3,,,,,,"*Problem statement:* With the current reverse proxy config generated for Apache, we cannot upload the Conan packages with build info (matrix parameters-RTFACT-20173).

*Steps to reproduce :*
 Generate Apache reverse proxy configuration with Artifactory reverse proxy generator. 
 Upload Conan package to Artifactory (Conan virtual repository)using the below commands.
 1. Conan remote add art [https://artifactory.com/artifactory/api/conan/conan] false
 2. Conan user -p <APIKEY> -r art admin
 3. Conan config set general.revisions_enabled=1
 4. Add build info in artifacts.properties file 
 5. Conan upload zlib/1.2.8@foo/bar -r art

We get the following error:
{code:java}
>>>conan upload zlib/1.2.8@foo/bar -r art

Uploading to remote 'art':Uploading zlib/1.2.8@foo/bar to remote 'art'                                             
Uploaded conan_export.tgz -> zlib/1.2.8@foo/bar [0.25k]                                  
ERROR: 404 Client Error: Not Found for url: https://artifactory.com/artifactory/api/conan/conan/v2/conans;build.name=dyna4-python-package%20%3A%3A%20master;build.number=9;build.timestamp=1585731156918;vcs.revision=ad85b6a4a744086fd7a2dcd08f106c2e326a87d1;vcs.url=https%3A%2F%2Fgithub.com%2Fpnd%2Fdyna4-python-package.git/zlib/1.2.8/foo/bar/revisions/83cfd504315595c68ffdc7b7eff853d7/files/conan_export.tgzWaiting 5 seconds to retry...Uploaded conan_export.tgz -> zlib/1.2.8@foo/bar [0.25k]                                  
ERROR: 
Error uploading file: conan_export.tgz, '400: Bad Request'Uploaded conan_sources.tgz -> zlib/1.2.8@foo/bar [0.27k]                                 
ERROR: 404 Client Error: Not Found for url: https://artifactory.com/artifactory/api/conan/conan/v2/conans;build.name=dyna4-python-package%20%3A%3A%20master;build.number=9;build.timestamp=1585731156918;vcs.revision=ad85b6a4a744086fd7a2dcd08f106c2e326a87d1;vcs.url=https%3A%2F%2Fgithub.com%2Fpnd%2Fdyna4-python-package.git/zlib/1.2.8/foo/bar/revisions/83cfd504315595c68ffdc7b7eff853d7/files/conan_sources.tgzWaiting 5 seconds to retry...Uploaded conan_sources.tgz -> zlib/1.2.8@foo/bar [0.27k]                                 
ERROR: 
Error uploading file: conan_sources.tgz, '404 Client Error: Not Found for url: https://artifactory.com/artifactory/api/conan/conan/v2/conans;build.name=dyna4-python-package%20%3A%3A%20master;build.number=9;build.timestamp=1585731156918;vcs.revision=ad85b6a4a744086fd7a2dcd08f106c2e326a87d1;vcs.url=https%3A%2F%2Fgithub.com%2Fpnd%2Fdyna4-python-package.git/zlib/1.2.8/foo/bar/revisions/83cfd504315595c68ffdc7b7eff853d7/files/conan_sources.tgz'Uploaded conanfile.py -> zlib/1.2.8@foo/bar [4.96k]                                      
ERROR: 404 Client Error: Not Found for url: https://artifactory.com/artifactory/api/conan/conan/v2/conans;build.name=dyna4-python-package%20%3A%3A%20master;build.number=9;build.timestamp=1585731156918;vcs.revision=ad85b6a4a744086fd7a2dcd08f106c2e326a87d1;vcs.url=https%3A%2F%2Fgithub.com%2Fpnd%2Fdyna4-python-package.git/zlib/1.2.8/foo/bar/revisions/83cfd504315595c68ffdc7b7eff853d7/files/conanfile.pyWaiting 5 seconds to retry...Uploaded conanfile.py -> zlib/1.2.8@foo/bar [4.96k]                                      
ERROR: 
Error uploading file: conanfile.py, '404 Client Error: Not Found for url: https://artifactory.com/artifactory/api/conan/conan/v2/conans;build.name=dyna4-python-package%20%3A%3A%20master;build.number=9;build.timestamp=1585731156918;vcs.revision=ad85b6a4a744086fd7a2dcd08f106c2e326a87d1;vcs.url=https%3A%2F%2Fgithub.com%2Fpnd%2Fdyna4-python-package.git/zlib/1.2.8/foo/bar/revisions/83cfd504315595c68ffdc7b7eff853d7/files/conanfile.py'Uploaded conanmanifest.txt -> zlib/1.2.8@foo/bar [0.17k]                                 
ERROR: 404 Client Error: Not Found for url: https://artifactory.com/artifactory/api/conan/conan/v2/conans;build.name=dyna4-python-package%20%3A%3A%20master;build.number=9;build.timestamp=1585731156918;vcs.revision=ad85b6a4a744086fd7a2dcd08f106c2e326a87d1;vcs.url=https%3A%2F%2Fgithub.com%2Fpnd%2Fdyna4-python-package.git/zlib/1.2.8/foo/bar/revisions/83cfd504315595c68ffdc7b7eff853d7/files/conanmanifest.txtWaiting 5 seconds to retry...Uploaded conanmanifest.txt -> zlib/1.2.8@foo/bar [0.17k]                                 
ERROR: 
Error uploading file: conanmanifest.txt, '400: Bad Request'ERROR: zlib/1.2.8@foo/bar: Upload recipe to 'art' failed: Execute upload again to retry upload the failed files: conan_export.tgz, conan_sources.tgz, conanfile.py, conanmanifest.txt. [Remote: art]
ERROR: Errors uploading some packages
{code}
*Workaround:* After generating the Apache reverse proxy from Artifactory reverse proxy generator then please change the value of ""AllowEncodedSlashes"" from ""On"" to ""NoDecode"" in the Apache reverse proxy configuration file and the Conan packages get uploaded with build info. 
{code:java}
>>>conan upload zlib/1.2.8@foo/bar -r art

Uploading to remote 'art':
Uploading zlib/1.2.8@foo/bar to remote 'art'
Compressing conan_export.tgz completed [1 files]
Compressing conan_sources.tgz completed [1 files]
Uploaded conan_export.tgz -> zlib/1.2.8@foo/bar [0.25k]
Uploaded conan_sources.tgz -> zlib/1.2.8@foo/bar [0.27k]
Uploaded conanfile.py -> zlib/1.2.8@foo/bar [4.96k]
Uploaded conanmanifest.txt -> zlib/1.2.8@foo/bar [0.17k]
Uploaded conan recipe 'zlib/1.2.8@foo/bar' to 'art': https://artifactory.com/artifactory/api/conan/conan
{code}
 

 ","Artifactory : 7.3.2
 Reverse proxy : Apache2
 Conan client : 1.24.0",,,,,,,,,,,,,,,RTFACT-14254,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2hzc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
authentication prompt appears when navigating from /ui to /artifactory context,RTFACT-21883,96626,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,21/Apr/20 5:30 PM,11/Feb/21 7:41 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
1. log into Artifactory UI
2. navigate to artifactory context specific url, such as https://<URL>/artifactory/api/npm/npm-remote/npm
3. see credentials prompt in top of window

There should not be any authentication prompt when navigating from /ui to /artifactory. ",Artifactory 7.x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2htk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
No cache headers set for npm,RTFACT-21881,96634,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,asieferlinger,mattheww,21/Apr/20 6:14 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.7.3,7.4.0,,,,,,,,,,,,,0,,,,,,"We are using Artifactory behind CloudFront CDN for caching. While that it works in general well, we stumbled upon a case where it causes issues.

NPM is fetching the top-level package file to check if there are new versions, eg:

[https://myartifactory.com/artifactory/api/npm/npm/package-name]

Altough it does not include any Cache-Control header. Therefore Cloudfront (or any other CDN) will cache it with their default lifetime.

 

IMHO Artifactory should set for these files a Cache-Control header. Either with no-store or a low max-age setting (eg 60 seconds).",,,,,,,,,,RTFACT-18651,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2hvc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Support Bundle does not contain the artifactory.*.log.zip files,RTFACT-21879,96602,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,21/Apr/20 4:01 PM,11/Feb/21 7:43 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,1,,,,,,"When configuring the Artifactory log with the ""FileNamePattern"" to end with '.zip', generating the Support Bundle will not contain the zipped artifactory.log files.

*Steps to reproduce*

1. Modify the logback.xml file to rotate the logs as zip files, as follows:
 
{code:java}
<appender name=""FILE"" class=""ch.qos.logback.core.rolling.RollingFileAppender""> <File>${artifactory.home}/logs/artifactory.log</File> 
<rollingPolicy class=""ch.qos.logback.core.rolling.FixedWindowRollingPolicy""> <FileNamePattern>${artifactory.home}/logs/artifactory.%i.log.zip</FileNamePattern> 
<MinIndex>1</MinIndex> 
<MaxIndex>9</MaxIndex> 
</rollingPolicy>  {code}
​
2. Let the artifactory.log rotate a few times
3. generate the Support Bundle

*Expected behavior*
 
The Support Bundle should contain all artifactory.log zip files
 
*Actual behavior*
 
**All the zip files appear in the Support Bundle (access/request/etc..), however, only the latest artifactory.log file appears in the Support Bundle.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2hr4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"V220 migration on MSSQL changes ""task_context"" column to accept NULL",RTFACT-21878,96586,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,21/Apr/20 12:35 PM,11/Feb/21 7:43 AM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,,,,,,,,0,,,,,,"The expected schema of the ""tasks"" table for MSSQL is:
{code:java}
CREATE TABLE tasks (
  task_type    VARCHAR(32)   NOT NULL,
  task_context VARCHAR(2048) NOT NULL,
  created      BIGINT
CREATE INDEX tasks_type_context_idx ON tasks (task_type, task_context);
{code}

However, for Artifactory servers that are upgraded from versions below 6.18, the ""task_context"" column doesn't have the NOT NULL Constraint.

This is because of the V220 migration that performs:

{code:java}
ALTER TABLE tasks ALTER COLUMN task_context VARCHAR(2048);
{code}

Instead, it should do:
{code:java}
ALTER TABLE tasks ALTER COLUMN task_context VARCHAR(2048) NOT NULL; 
{code}

For servers that already had this migration, it seems that the only way to restore the NOT NULL Constraint is to drop the index ""tasks_type_context_idx"", run the above ALTER, and then re-create the index.
This is because MSSQL won't let you to alter the column to have the Constraint when there is an index.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,Salesforce,,,,,,,,,,,,,,,,,,,,,,,"2|zc2hnk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Published module doesn't link to uploaded artifact,RTFACT-21864,96469,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,20/Apr/20 2:23 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Build Info,,,,,,,0,,,,,,"I've been experimenting on creating BuildInfo json for a custom build tool we have. Everything seems like it works except that in the Artifact list there is no link to the uploaded artifact. It only says ""No path found (externally resolved or deleted/overwritten)"".

But if I go to the uploaded artifact I can clearly see that its linked to the expected build and module.

I can also see the link to the artifact if I choose the ""Diff"" tab in the build info.

How can I make sure that the artifacts are linked properly in the module view?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2h0g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Apr/20 2:31 PM;stefanga;Here are some screenshots that will help understanding this issue.

[https://photos.app.goo.gl/pwjbRGRis66EM4p3A]

 ","21/Apr/20 2:35 PM;stefanga;My issue was that the artifacts also needs to have the following properties set on all module artifacts.
 * build.name
 * build.number

This is documented as a note in the REST API documentation but I happened to glance over it.

[https://www.jfrog.com/confluence/display/RTF6X/Artifactory+REST+API#ArtifactoryRESTAPI-BuildUpload]

 ",,,,,,,,,
DB conversions should be marked as successful per migration and not per batch ,RTFACT-21863,96468,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,omriz,arielk,arielk,20/Apr/20 2:08 PM,11/Feb/21 7:52 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"*+The current behavior:+*
Upon upgrade, we check the DB for last known version.
Then, check for SQL migrations to run between last known version and current version.
All found migrations run in turn. Once all migrations are successful, we update the DB accordingly.

This is an issue as if there are 2 migrations to run, and we fail on 2nd, if I restart Artifactory it will try to re-run the first migration, which will fail as it has been completed already. This means I have to manually undo whatever this migration did to proceed.

*+Expected behavior:+*
Each completed SQL migration to update it is completed, so future restart won't re-trigger it.

*+Steps to reproduce+*
1. Install Artifactory 6.16.0.
2. Start Artifactory, upload license.
3. Stop Artifactory.
4. As we need to cause a migration to fail, perform these SQL queries:
(SQL syntax is for Derby DB)
{code:java}
ALTER TABLE artdb.tasks MODIFY task_context VARCHAR(2500);
{code}
{code:java}
INSERT INTO artdb.tasks
(task_type, task_context, created)
VALUES('', 'W5nXEoMbjtRQUVqdu6dMHUXI8XhCfjmP7iAt9qevFfVaWJCtN14fFTJyVSf2Uu2fiCJOrGYN7MHs1iIYM9lqMJn5qJWutwJ6iA48t75erdhRCF3g0hiv1TOf5jYoFgRz4izgy7zgPqNR0Q09eJyakEaOFAfIXkwYkXd4imvEvH7yT5Mza8yLIdVzSlStqrkMIHc9USS8gi4Ip3V7NW2Ywn86tfbJHiiJVBeMNhZqSyAUw2kCj1JRED13x8FyNBfjfGDVB7GBcwGNiJoLnhPFdMzrAs3rXDq8ZOIveCDQkJwdQtYN6yknxN1Q3lHOfqdPPERPN7J9KC8FvlnLmVowc0ctcxVH4Ac4lZx6krmWDG9MaCQeoGWQi9ggHXevlctyGOiRZDgwXHWmC5zJzDIO0OfezdEJhR470yk1eh4oXNw2VDvnDCx49bXIbBtD6lVs5Zba2i2hv4VybYSGGALtUgI6SwZW0553ITAZIVvP2iai3ugHt5l9Y9MYdK0GmVMYXGwACosXSya6PAonyWC2ohIKunP4gZTKRMEkJFBaT7H9auq7sNi3jrhkTKtihRzARCud9XLypsQoMYBeu6IfrdEf0xZEzJWuKjGcnmSf54bLQvkwm2z7LzFHANhXzXKDgihlPc3t1GEe46L8ErbNeA1YEFJeJITh7hCPajlr2I9E4NhAShBfh3kQIh0pWlZqGlp2XyCbooboHutzJetQFX6wcz0c8FhOY1UGx3u05fbzbOnJH1mrWEvijHRNp42x28qfLVDgl6Fbqg8VfFBnpAn85H918rgPPvecivHma6OqyourKj7jwspQL8qiSce9EUEnD1b8bF11xKVfCqsPCWn6APTohDhXARrv3PocwxwDcJa3IpK9E0LUiLzZWEAG7oh7f30dsqPhCA1ToKhFhM4WsarvoXAgqaYxlOKPR8Xpj8bQduGcqv5f6Qc44MOcvtGen2cHWgXtkIQIKHose1YEyzQlwYbROy7bMVfnhbvihNLmGW47DYfNSK38uUnMuFOo5N4bbDqUoxT3Vg7AgOhIv6ndrnV59cIY7w1NBvEc3RnTeakQq3SUHml0tIx3wKygU9mdIDlgLBJwE6OK863QKwH6wHVjkPHzuv0XzBvSlaPHGh8zBb62VSuFrGYO29lDruHlp3TEqZo4csz07ly2laCwolRHmBHd7IKW5QXsiMbpJ9P1aRZIsCCHTPyeAEJtYhzRSuWjSmLDWYJEIh7CTWoqpI3ZX3C2AdsNnVJfg4uU07ZEeRMc8QZggiP51cZ1o0zOGuY05wpde32fv4O5mjy1zL0UrwXMGy38dufodkcXfJBxSH2OT8a9ppM16FmwfBgl0fOynr25S6avoiEb5GckF7PgNrhlavsJBucnEOIc6CkvQMvI7HJxeIozsf7zLyq6KISU7qKWI9ZNpjdfRoa3dNXHTivfp31BDBTDq2LmNDeWSkj4f0QdLlNbbcgrJXyqWrpGMUt8tSCblDV14NcooJwsWleZ5CJ0uz9vAgOEDCKxkSOrFlKBgBVZUj8HwdysvvDUJSIEpIIXHrDTPgNhsXXKGPKxxCsnjiYLf9rufHEuIZLJIPDk6YA5AS7kNBPpbLl3qmPFP7baWjT3H8jdCdsOcm12U84zgvRowYc6lh581v7kC8KJv8COvwI7AtxtyrBPHLZY004oFBb50yGb6DummygeROpIL4eVYGyKfdLKxLUBURWhEh0pOUdFcjMWBjoPU3fs99Zr3ilHLd572YI5tktet5YabZ9qAigjXPe0GHy4t7XtIcZOimyZnaB2khDD9YqpOqYE7AdT6zgGdgyNf6vVOqp6uobeSLTbQWNJ5HhbZ78OKHa13LIHH0XgGd4T1xujzQDxCVDIAALofRxmvGwAc3F3hYDThfHguQZWx9SEpcLCMpnjxxm45YmxvtkLvmEXTYVrPoHLd7MyD7r3AjN01TUYLz8p3DCHnsRkTbrbCTYgLw2cLX0xNh0mPkZw9WZ6z6sSBCs5fRgrITPvcpAkQEmAAVmxRi0gAp5paCtc9w0siX2VGyGRlCHgqXXqzTDjRY3k1Bxl1dk6Y3e9O2CzdQtmA1UpT9q2YPDwrsPMH4CpIH9WbjuIQnoQibnBEFcSq9DLj34u4wRUuAvDb4lWvub9NaJJ0H86QBQVWHnqaXjuUQDVTNjxlBxYY2mWIjzSfF3mdDEbo9q0A8Vlo9pe7vIcHXrkEDYNhV4rnNTu31BZMMxsLmzq3lASLSwjA0YqWdRe9vrBz7WMBIvkjI8SCIjiDquZBOHX9o2UeLLXZtFssrf183VOCd40WJOyZWFo7OptMMDdbylsgTXFtxl89CO6Q1HwkPPpkSZnYrJmz7M9aVs8jQDgDGBpFzcCEOCT2RR7qDt40TymV88dOhl92i6HKu3N3nADrKXyDuo7HQ72WUS4bzMRt2jhbSKXU5wZj5', 0);
{code}
5. Upgrade Artifactory to 6.18.1. It will fail first with this error (expected):
{code:java}
2020-04-20 16:50:17,290 [art-init] [ERROR] (o.j.s.u.DbStatementUtils:60) - Failed to execute query: Invalid length specified for column 'TASK_CONTEXT'. Length must be greater than the current column length.:
ALTER TABLE tasks ALTER COLUMN task_context SET DATA TYPE VARCHAR(2048)
2020-04-20 16:50:17,295 [art-init] [ERROR] (o.a.s.d.v.c.DbSqlConverterUtil:87) - Could not convert DB using v220_change_tasks_context_size converter due to Invalid length specified for column 'TASK_CONTEXT'. Length must be greater than the current column length.
java.sql.SQLSyntaxErrorException: Invalid length specified for column 'TASK_CONTEXT'. Length must be greater than the current column length.
{code}
6. Restart Artifactory and now we are getting errors on previous migration:
{code:java}
2020-04-20 16:51:16,920 [art-init] [ERROR] (o.j.s.u.DbStatementUtils:60) - Failed to execute query: Column 'TYPE' already exists in Table/View '""APP"".""NODE_EVENT_CURSOR""'.:
ALTER TABLE node_event_cursor ADD COLUMN type VARCHAR(255) NOT NULL DEFAULT 'UNDEFINED'
2020-04-20 16:51:16,924 [art-init] [ERROR] (o.a.s.d.v.c.DbSqlConverterUtil:87) - Could not convert DB using v219_add_type_to_node_event_cursor converter due to Column 'TYPE' already exists in Table/View '""APP"".""NODE_EVENT_CURSOR""'.
java.sql.SQLException: Column 'TYPE' already exists in Table/View '""APP"".""NODE_EVENT_CURSOR""'.
{code}

*+Summary:+*
What we see above is to simulate a real issue during SQL migration.
There was an issue in 2nd imgration, but after restart we attempt to run the 1st one again, which already completed, which presents an issu.e",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2h08:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
When pulling a blocked manifest due to Xray blocking policy we get a misleading 404 response,RTFACT-21848,96175,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,igoru,mohammadt,mohammadt,19/Apr/20 12:41 PM,11/Feb/21 7:55 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"When pulling a blocked manifest due to Xray policy we get a misleading 404 response.

*Reproductions steps:*

Have a Docker image that is blocked due to Xray blocking policy and then run

{code:java}
$ curl https://<URL>/v2/<image-name>/manifests/<tag> 

{code}

You will get 404 in the request log with the below error:


{code:java}
{""errors"":[{""code"":""MANIFEST_UNKNOWN"",""message"":""The named manifest is not known to the registry."",""detail"":{""manifest"":""<image-name>""}}]}

{code}


*Expectation:*
Return 403 with the below message:

The download request has been blocked due to a blocking policy.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc3knr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
upgrade from 6.10.9 to 7.2.1 fails,RTFACT-21844,96132,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreas.pelzer,andreas.pelzer,18/Apr/20 3:05 PM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,Upgrade,,,,,,,0,,,,,,"We have problems with our upgrade. Console.log delivers this error message:
{noformat}
2020-04-18T16:59:25.409L [tomct] [SEVERE] [                ] [org.apache.catalina.core.ContainerBase] [org.apache.catalina.core.ContainerBase addChildInternal] - ContainerBase.addChild: start:
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/artifactory]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:754)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:730)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:744)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:624)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1833)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.webresources.StandardRoot@61da0af4]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)
        at org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4885)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5020)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 10 more
Caused by: org.apache.catalina.LifecycleException: Failed to initialize component [org.apache.catalina.webresources.JarResourceSet@76a80f67]
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:112)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)
        at org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:724)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 13 more
Caused by: java.lang.IllegalArgumentException: java.io.IOException: java.lang.reflect.InvocationTargetException
        at org.apache.catalina.webresources.AbstractSingleArchiveResourceSet.initInternal(AbstractSingleArchiveResourceSet.java:142)
        at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:107)
        ... 16 more
Caused by: java.io.IOException: java.lang.reflect.InvocationTargetException
        at org.apache.tomcat.util.compat.Jre9Compat.jarFileNewInstance(Jre9Compat.java:212)
        at org.apache.tomcat.util.compat.JreCompat.jarFileNewInstance(JreCompat.java:181)
        at org.apache.catalina.webresources.AbstractSingleArchiveResourceSet.initInternal(AbstractSingleArchiveResourceSet.java:139)
        ... 17 more
Caused by: java.lang.reflect.InvocationTargetException
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)
        at org.apache.tomcat.util.compat.Jre9Compat.jarFileNewInstance(Jre9Compat.java:209)
        ... 19 more
Caused by: java.util.zip.ZipException: zip END header not found
        at java.base/java.util.zip.ZipFile$Source.zerror(ZipFile.java:1535)
        at java.base/java.util.zip.ZipFile$Source.findEND(ZipFile.java:1436)
        at java.base/java.util.zip.ZipFile$Source.initCEN(ZipFile.java:1443)
        at java.base/java.util.zip.ZipFile$Source.<init>(ZipFile.java:1274)
        at java.base/java.util.zip.ZipFile$Source.get(ZipFile.java:1237)
        at java.base/java.util.zip.ZipFile$CleanableResource.<init>(ZipFile.java:727)
        at java.base/java.util.zip.ZipFile$CleanableResource.get(ZipFile.java:844)
        at java.base/java.util.zip.ZipFile.<init>(ZipFile.java:247)
        at java.base/java.util.zip.ZipFile.<init>(ZipFile.java:177)
        at java.base/java.util.jar.JarFile.<init>(JarFile.java:346)
        ... 24 more

2020-04-18T16:59:25.411L [tomct] [SEVERE] [                ] [org.apache.catalina.startup.HostConfig] [org.apache.catalina.startup.HostConfig deployDescriptor] - Error deploying configuration descriptor [/u10/app/gcadmin/artifactory-pro-7.4.1/app/artifactory/tomcat/conf/Catalina/localhost/artifactory.xml]
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/artifactory]]
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:758)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:730)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:744)
        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:624)
        at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1833)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.base/java.lang.Thread.run(Thread.java:834)
{noformat}
but what does it mean? How to resolve? Please help.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2g1s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Apr/20 4:30 PM;andreas.pelzer;1. Tomcat logs have been sent to 'support@jfrog.com' with header ""FW: [#130574] upgrade from 6.10.9 to 7.2.1 fails"".

2. We're using the Linux Archive distribution of Artifactory + DB-Filesystem configuration (Oracle).

3. Originally we started our Upgrade with Version 6.5.18, which had to be upgraded to 6.10.9 in order to be able to upgrade to 7.x (according to https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-UpgradingfromVersionBelow6.10). After the Update to 6.10.9 we had an issue with some of the Permissions setup in Artifactory missing. These Permissions were reconfigured by us after the Update to 6.10.9 and tested to make sure everything is working before we continue to upgrade to 7.x

After downloading and extracting 7.2.1 from JFrog Bintray we setup the Oracle Instant Client 19.6 (according to https://www.jfrog.com/confluence/display/JFROG/Oracle#Oracle-ConfiguringArtifactorytouseOracle) and continued with the Mandatory Steps as outlined in Step 4 of the Upgrade instructions for the Linux Archive distribution (according to https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-UpgradingfromVersion6.10.xto7.x). We ran the migration Script as outlined in Step 6, which did not report any errors and successfully generated the system.yaml. After starting Artifactory we were getting ""Service Unavailable"", when checking the console.log we noted the Severe Error as outlined in the Issue.

4. We checked the permissions inside the Artifactory installation directory using ""find . ! -user <user>"" and did not find any files not being owned by the user running Artifactory.

Additional Information:
After upgrading to 7.2.1 we noted that Artifactory wasn't using the integrated JRE distribution AdoptOpenJDK 11.0.2 but the JRE distribution jdk-1.8.0-144 we had setup via JAVA_HOME on the System, thus we changed the javaHome variable in the system.yaml to point to the integrated JRE, which didn't solve the Issue. We also removed the extraConfig portion of *.tomcat.connector to remove the additional AJP connector we had setup in 6.x that was added during migration as it isn’t supported from Version 7.0 (according to https://www.jfrog.com/confluence/display/JFROG/Configuring+Apache)

Please note that we tested this migration path using Artifactory OSS before we applied it to our production system without this Issue.
",,,,,,,,,,
Configuration (system.yaml) is overwritten at startup,RTFACT-21832,95965,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,aharrisson-ess,aharrisson-ess,16/Apr/20 7:57 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,7.4.1,,,,,,,Configuration,system.yaml,,,,,,1,,,,,,"When configuring Artifactory with system.yaml, the file is overwritten on startup to encrypt the database password. This causes idempotency issues when using orchestration tools for the deployment.

 

We are migrating to Artifactory 7 and have problems with the configuration. We deploy Artifactory on Docker and have so far used environment variables to set the database configuration. In Artifactory 7 the appropriate way seem to be to configure through system.yaml. Since we use Ansible, we get idempotency issues since the configuration file is overwritten by Artifactory.

Environment variables are still supported in the container entrypoint, but DB_TYPE seems to not affect the database driver correctly (in 7.4.1), thus Artifactory defaults to Derby-driver.

We prefer to use system.yaml, but only if Artifactory uses it read-only. As an alternative we could go back to using environment variables to configure the container, but then DB_TYPE needs to set shared.database.driver correctly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2f1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/May/20 9:39 AM;aharrisson-ess;I solved my idempotency issue by using environment variables again. I managed to find the `JF_`-prefixed environment variables that maps the configuration entries in system.yaml.

Is using the `JF_`-prefixed environment variables a viable solution? Is it an acceptable and future proof way of configuring the application?",,,,,,,,,,
Artifactory 6.19.0 can't assign multiple group to a permission,RTFACT-21827,95932,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vern1977,vern1977,15/Apr/20 5:07 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,permissions,,,,,,0,,,,,,Through 6.19.0 UI I'm trying to add multiple groups from the available group column into a  to newly created permission and after clicking save & finish there is only one group in the included group column.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ev4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Apr/20 5:10 PM;vern1977;This is still in a development phase and we're trying to clean up who has access to do what in our repos. Is this not working because the group im trying to include in the permission has no users at the moment since only a limited amount of users have initially logged in and are not in the users list yet?",,,,,,,,,,
Deploy Artifact by Checksum requires content transfer eventhough artifact with same checksum is already present,RTFACT-21823,95864,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arunmohanraj,arunmohanraj,14/Apr/20 2:27 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.8.2,,,,,,,Artifact Storage,Artifactory Cloud,,,,,,0,,,,,,"Hi Team,

We are trying to use *Deploy Artifact by Checksum api* to upload our artifacts. Based on the description mentioned here ([https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-DeployArtifactbyChecksum]), it is mentioned that if the artifactory with same checksum is present, content transfer is not required and if the checksum is not present, it should through 404 error. We tried both the above mentioned scenarios but we are not getting the expected response.

*Scenario 1:*

We are trying to upload an artifact whose checksum is already present in Artifactory on the assumption that content transfer is not required.
{code:java}
curl -k -u <username>:<password> --header ""X-Checksum-Deploy:true"" --header ""X-Checksum-MD5:${MD5CHECKSUM}"" --header ""X-Checksum-Sha1:${SHA1CHECKSUM}"" --header ""X-Checksum-Sha256:${SHA256CHECKSUM}"" -X PUT <artifactory_url>/<repo>/<filepath> -T <local_filepath>
{code}
When executing this command, the artifacts are getting uploaded again.

*Scenario 2:*

we are trying to check whether a checksum is available for the mentioned file on the assumption that 404 error will be thrown.
{code:java}
curl -k -u <username>:<password> --header ""X-Checksum-Deploy:true"" --header ""X-Checksum-MD5:${MD5CHECKSUM}"" --header ""X-Checksum-Sha1:${SHA1CHECKSUM}"" --header ""X-Checksum-Sha256:${SHA256CHECKSUM}"" -X PUT <artifactory_url>/<repo>/<filepath>
{code}
The above mentioned command deploys a file in Artifactory eventhough no local files are mentioned.

We tried searching for examples but couldn't find any. Need your support.

*Artifactory version:* Artifactory Enterprise Plus 6.8.2 rev 60802900

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2egg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deprecated Mission Control plugins are not deleted on 7.x Upgrade,RTFACT-21818,95833,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mohammadt,mohammadt,14/Apr/20 7:51 AM,11/Feb/21 8:13 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"When upgrading from 6.x to 7.x, deprecated Mission Control plugins are not deleted automatically and some of the plugins fail to load and lead to exceptions in the logs:

For example, when running reload plugins:

{code:java}
Successfully loaded:  propertySetsConfig.groovy, haClusterDump.groovy, httpSsoConfig.groovy, repoLayoutsConfig.groovy, ldapGroupsConfig.groovy, ldapSettingsConfig.groovy, proxiesConfig.groovy
Failed loading: pluginsConfig.groovy, requestRouting.groovy
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ea8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Checksum mismatch while downloading go module,RTFACT-21812,95821,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,gryaznov,gryaznov,14/Apr/20 6:58 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,7.11.5,7.3.2,,,,,,Go,,,,,,,0,,,,,,"{code:java}
go version go1.14 linux/amd64

go clean -cache -modcache && go get github.com/hashicorp/go-sockaddr@v1.0.2

go: downloading github.com/hashicorp/go-sockaddr v1.0.2
go get github.com/hashicorp/go-sockaddr@v1.0.2: github.com/hashicorp/go-sockaddr@v1.0.2: verifying module: checksum mismatch
    downloaded: h1:11V1sl+QVnrAf1rVqD6wQECfIZEbSJo0FEZL0QeLwJU=
    sum.golang.org: h1:ztczhD1jLxIRjVejw8gFomI1BQZOe2WoVOu0SyteCQc=

SECURITY ERROR
This download does NOT match the one reported by the checksum server.
The bits may have been replaced on the origin server, or an attacker may
have intercepted the download attempt.For more information, see 'go help module-auth'.{code}","Go version: 1.14.0

GOPROXY=""https://artifactory.domain.com/artifactory/api/go/go""

Go remote repo settings (within virtual go repo):
 * url - [https://github.com/]
 * GitProvider - GitHub
 * Remote Auth - token",,,,,,,,,,,,,,,RTFACT-20160,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr12e:v",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Binaries are not purged/cleaned,RTFACT-21805,95698,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,zoltan.zvara,zoltan.zvara,13/Apr/20 10:11 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,,,,,,,1,,,,,,"Artifactory OSS
 6.18.0 rev 61800900 (running on Kubernetes, installed from Helm charts)
 * Artifacts size is correct given all the artifacts that we have in `sbt-dev-local`.
 * The artifacts count is correct.
 * What are binaries exactly? And how do these eat up 30 GB?
 * Moreover, for only a few 1000s of items, the database size is more than 3GB!

 

Binaries Size: 30.92 GB Binaries Count: 1,140 Artifacts Size: 5.09 GB Artifacts Count: 646 Optimization: 607.98% Items Count: 899

 

Maintenance cleanup, prune, garbage collection operations do nothing.

There are no errors in the log.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2dhc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upload Fails with error code 404: File length as 0 - custom storage configuration,RTFACT-21772,95550,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prashanthrayen,prashanthrayen,12/Apr/20 6:26 AM,05/Jan/21 11:22 AM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Artifact Storage,,,,,,,1,,,,,,"Upgraded Artifactory to latest -7.3.2 rev with the custom storage configuration. 

Issue: Any file upload with ~+20MB  of size will fail when uploaded through UI or curl. 

REsponse  :

{
 ""errors"" : [

{ ""status"" : 404, ""message"" : ""File length is 0 while total bytes read on stream is 25201595"" }

]

binarystore.xml : 

<config version=""v1"">
 <chain template=""s3-storage-v3""/>
 <provider id=""cache-fs"" type=""cache-fs"">
 <maxCacheSize>10000000000</maxCacheSize>
 <cacheProviderDir>/path/to/save</cacheProviderDir>
 </provider>
 <provider id=""eventual"" type=""eventual"">
 <numberOfThreads>30</numberOfThreads>
 </provider>
 <provider id=""retry"" type=""retry"">
 <maxTrys>10</maxTrys>
 </provider>
 <provider id=""s3-storage-v3"" type=""s3-storage-v3"">
 <identity>[id]</identity>
 <credential>[secretkey]</credential>
 <region>[region]</region>
 <bucketName>[bucket]</bucketName>
 <path>[folder]</path>
 <property name=""s3service.server-side-encryption"" value=""aws:kms""/>
 <useSignature>true</useSignature>
 </provider>
 </config>

 

Kindly advice any fine tuning is required to acheive successful upload. ?

Side Note: DOwnload works fine in UI and also API

 

Errorlog: 

2020-04-12T05:23:06.789Z [jfrt ] [ERROR] [4fdeac7cc256d543] [o.a.w.s.RepoFilter:292 ] [http-nio-8081-exec-3] - Upload request of internal:vtr.zip failed due to {}
 org.jfrog.storage.binstore.providers.tools.StreamLengthMissMatchException: File length is 0 while total bytes read on stream is 25201595
 at org.jfrog.storage.binstore.providers.tools.FilePersistenceHelper.saveStreamToTempFile(FilePersistenceHelper.java:60)
 at org.artifactory.addon.filestore.eventual.EventuallyPersistedBinaryProvider.addStream(EventuallyPersistedBinaryProvider.java:163)
 at org.jfrog.storage.binstore.providers.FileCacheBinaryProviderImpl.addStream(FileCacheBinaryProviderImpl.java:145)
 at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.addBinary(BinaryServiceImpl.java:388)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
 at com.sun.proxy.$Proxy210.addBinary(Unknown Source)
 at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1884)

....................................

................

 

2020-04-12T05:23:06.810Z [jfrt ] [WARN ] [4fdeac7cc256d543] [o.a.w.s.RepoFilter:293 ] [http-nio-8081-exec-3] - Sending HTTP error code 404: File length is 0 while total bytes read on stream is 25201595 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ckw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/May/20 6:38 PM;jfabel;I had the problem after a migration and deleting the ""eventual"" folder and restarting the service solved the issue. I had recently migrated my filestore to s3.","05/Jun/20 1:17 PM;ubartels;The error is caused by the links created for the migration from filestore to eventual+s3.

Replace the links eventual/_pre and eventual/_add with directories.","19/Aug/20 7:58 PM;anoop.kulapparayilbaby;Thanks Uwe Bartels , your resolution helped me. I was getting the same issue and I resolved by creating the folders instead of simlinks.",,,,,,,,
Artifactory P2 repositories are only recognized by the Eclipse IDE when pointing to certain repositories,RTFACT-21769,95531,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,niro,niro,11/Apr/20 12:29 AM,11/Feb/21 8:17 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"When using the Eclipse IDE's Install New Software as described here: [https://www.jfrog.com/confluence/display/JFROG/P2+Repositories], Eclipse only recognizes Artifactory's P2 repositories that are pointing to certain URLs.

From what I have seen, it's not the URL but the way the repository is indexed.
 Here is what works and what doesn't:

 

Making a P2 repository point to one of these URLs:

[https://jfrog.bintray.com/jfrog-eclipse-plugin/updatesites/1.1.0/]

[https://download.eclipse.org/eclipse/updates/4.15/R-4.15-202003050155/]

and then having the Eclipse IDE's Install New Software check this path:

http://<artifactoryurl>:8081/artifactory/<P2Repo>/

will work. In these two URLs, the p2.index references a content.xml.xz and artifacts.xml.xz file, which are in the repo.

 

When trying to point to one of these URLs:

[https://download.eclipse.org/releases/latest/]

[https://download.eclipse.org/eclipse/updates/4.15/]

[https://download.eclipse.org/releases/juno/p2.index]

[https://download.eclipse.org/releases/europa/]

The Eclipse IDE will not be able to find anything in Artifactory's P2 Repository. The Eclipse IDE can find the plugins when pointing directly to those URLs. Artifactory, on the other hand, cannot.

 

In 3 of those 4 URLs, the p2.index references a compositeContent.xml and compositeArtifacts.xml, which are located inside the compositeContent.jar and compositeArtifacts.jar. For /releases/europa/ it is an older release and the plugins are located in the /site.xml

I am not sure if this is due to the name of the file being different (content vs compositeContent/site.xml) or due to it being a jar instead of xml.xz, or both.

 

 

A workaround to proxy P2 repositories through Artifactory is to use a Generic repository. A generic repository that points to [https://download.eclipse.org/releases/latest/], for example, will work in the Eclipse IDE's Install New Software and will cache the downloaded plugins.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ch4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker-compose upgrade from Artifactory 6.17/PostgreSQl 9.6.11 to Artifactory7.3.2,RTFACT-21767,95481,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vern1977,vern1977,09/Apr/20 8:37 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Compose,Docker,Upgrade,,,,,2,,,,,,"Having issues upgrading from a docker-compose ArtifactoryPro 6.17.0/Postgres9.6.11 to a dokcer-compose ArtifactoryPro7.3.2/Postgres9.6.11 based on instructions posted on 

[https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-DockerUpgrade]

My current setup:

Artifactory 6.17.0
 Postgresql 9.6.11

 

 
{code:java}
version: '3'
services:
  postgresql:
    image: docker.bintray.io/postgres:9.6.11
    container_name: postgresql
    ports:
     - 5432:5432
    environment:
     - POSTGRES_DB=artifactory
     - POSTGRES_USER=xxx
     - POSTGRES_PASSWORD=xxxxxx
    volumes:
     - postgresql_data:/var/lib/postgresql/data
    restart: always
    ulimits:
      nproc: 65535
      nofile:
        soft: 32000
        hard: 40000
  artifactory:
    image: docker.bintray.io/jfrog/artifactory-pro:6.17.0
    container_name: artifactory
    ports:
     - 80:8081
    depends_on:
     - postgresql
    links:
     - postgresql
    volumes:
     - artifactory_data:/var/opt/jfrog/artifactory
    environment:
     - DB_TYPE=postgresql
     - DB_USER=xxx
     - DB_PASSWORD=xxxxxx
    restart: always
    ulimits:
      nproc: 65535
      nofile:
        soft: 32000
        hard: 40000
volumes:    
    postgres_data:
        external: true   
    artifactory_data:   
        external: true{code}
I've made several attempts at upgrading to 7.3.2 and following the instructions int he upgrade process with no success. 

Not sure what I should be modifying my ROOT_DATA_DIR in .env file with my current set up since the data resides in separate docker volumes for the the postgresql and artifactory data. These were based off the now deprecated docker-compose instructions on [https://github.com/jfrog/artifactory-docker-examples] with a slight tweak to use docker named volumes versus localhost bind mounts, but none the less its working fine.

But the shift to using 7.3.2 has a config.sh process that's hard to follow. how am I supposed to migrate my content from the docker volumes in /var/lib/docker/volumes into this new process.

I've tried combinations of changing the ROOT_DATA_DIR in the .env file and modifying the docker-compose-postgres.yaml file in template to match my previous set up, that didn't work. Looks as if the config file is making one directory /var at whatever you set as the ROOT_DATA_DIR and dumping everything in there. I'm not even sure if I should be selecting 'Y' when I'm asked if I want Postgresql installed? The previous steps told me to stop and remove the existing containers and when I docker-compose up with the new stuff, nothing works. depnding on the atrtempt of the moment I'll get 'timeout for missing master.key"" or timeout waitin for join.key"" or ""cant initailaize database sql exception trying to use BYTEA"". I even tried to see if I could use a full system export form 6.17.0 and create an empty 7.3.2 with psotgresql and restore from that but I couldn't get taht to work either, cant get the frontend to launch before something timesout.

 ","Current:

Os: Centos7
Docker-compose: 1.25.4
Docker: 19.03.8
Dockerized Artifactory: 6.17.0
Dockerized PostgreSQL: 9.6.11",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2c6o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
wrong nginx image URL,RTFACT-21763,95451,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,eis,eis,09/Apr/20 11:52 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,0,artifactory,docker,Docker,docker-compose,,"hi,
i try to use the docker-compose-nginx.yaml but i think there is an wrong image url by nginx.

{code}
  nginx:
    image: ${DOCKER_REGISTRY}/jfrog/nginx-artifactory-oss:${ARTIFACTORY_VERSION}
{code}

i only can find an image with: 
{code}
  nginx:
    image: ${DOCKER_REGISTRY}/jfrog/nginx-artifactory-pro:${ARTIFACTORY_VERSION}
{code}",docker-compose file,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2c08:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
import failed if <redirectedToHosts/> is defined in proxy server ,RTFACT-21756,95404,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,paulp,paulp,08/Apr/20 6:54 PM,11/Feb/21 8:28 AM,18/Feb/21 8:59 AM,,7.2.1,7.3.1,,,,,,,,,,,,,0,PB_Done,,,,,"Import to artifactory 7 using old archive will fail if <redirectedToHosts></redirectedToHosts> is presented in proxy defenition under artifactory.config.xml.

Steps to reproduce:
1. Create an Art 6 instance with data.
2. Set proxy and add content to redirected To Hosts. Check if <redirectedToHosts/> is presented in artiactory.config.xml under <proxy> with or without content. System export. 
3. System Import the archive on 7, and it will fail. User/group data is imported but artifacts/repository and LDAP settings will be lost.
4. Remove redirectedToHosts from artiactory.config.xml and the import should work

Errors:
[ERROR] [5f5c17ac5df7e241] [ifactoryApplicationContext:652] [http-nio-8081-exec-1] - Failed system import
java.lang.RuntimeException: Failed to read object from stream
Caused by: javax.xml.bind.UnmarshalException: null

        ... 91 common frames omitted
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element '{""http://artifactory.jfrog.org/xsd/3.0.1"":platformDefault}'. One of '{""http://artifactory.jfrog.org/xsd/3.0.1"":services}' is expected.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2bq8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
nginx internal context path settings for v7.x,RTFACT-21755,95394,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dwerdermann,dwerdermann,08/Apr/20 2:01 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Reverse Proxy Configuration Generator,,,,,,,7,nginx,proxy,,,,"In version 7.x the field for setting the ""Internal Context Path"" in the NGinx config generater is gone.

Also through the split into ""Internal Artifactory Port"" and ""Internal Router Port"" its not so easy to get rid of the /artifactory/, which seems now required in the URL now.

The documentation at https://www.jfrog.com/confluence/display/JFROG/What%27s+New%3A+On-Prem
says:

{code}Artifactory as Root Application in Tomcat: Artifactory can no longer be configured as the Tomcat root application. To remove the /artifactory context, you'll need to set the relevant configuration in your reverse proxy (load-balancer). See details here.{code}

But I do not find any information in the detials at
https://www.jfrog.com/confluence/display/JFROG/HTTP+Settings#HTTPSettings-ReverseProxySettings

So how do I get rid of the /artifactory without breaking the new v7.x setup.

And maybe that should be added to the revers proxy config generation again,, like in 6.x",,,,,,,,,,,,,RTFACT-21519,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2boo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Apr/20 8:26 AM;dwerdermann;For a first evaluation we set the following Nginx config:
{code:bash}
    location / {
        proxy_read_timeout  2400s;
        proxy_pass_header   Server;
        proxy_cookie_path   ~*^/.* /;
        proxy_buffer_size 128k;
        proxy_buffers 40 128k;
        proxy_busy_buffers_size 128k;
        proxy_pass          http://127.0.0.1:8081/artifactory/;
        proxy_set_header    X-JFrog-Override-Base-Url $http_x_forwarded_proto://$host:$server_port;
        proxy_set_header    X-Forwarded-Port  $server_port;
        proxy_set_header    X-Forwarded-Proto $http_x_forwarded_proto;
        proxy_set_header    Host              $http_host;
        proxy_set_header    X-Forwarded-For   $proxy_add_x_forwarded_for;

        location /artifactory/ {
            proxy_pass    http://127.0.0.1:8081;
        }
        location /ui/ {
            proxy_pass    http://127.0.0.1:8082;
        }
        location /router/ {
            proxy_pass    http://127.0.0.1:8082;
        }
        location /api/ {
            proxy_pass    http://127.0.0.1:8082;
        }
        location /api/pypi/ {
            proxy_pass    http://127.0.0.1:8081/artifactory/api/pypi/;
        }
    }{code}
But I assume there will be more locations or rewrites for all kind of repositories. We will see in further testing.

Another solution would be to seperate the UI-server (port 8082) and Artifact-server (port 8081) on virtualhost level. But that will have other implications.

In both cases the snippets provided to the users under ""Set me up"" will be wrong, because they still present the /artifactory/ part in the URLs.

 

And this is no small issue. We have thousands of servers, buildchans and scripts that would need to be reconfigured if this /artifactory/ part is somehow mandatory now!","23/Apr/20 4:28 PM;Enrice;Even worse, this works for maven repositories. For NPM however it does not, because in the package metadata json you get URIs in the response linking to modules, which, you guessed it, contain the ""/artifactory/"" context. If you want to remove these, the workaround would have to parse the response body, like with nginx' ngx_http_sub_module. A nightmare, error prone and slow.","29/Apr/20 9:53 AM;Enrice;I was able to work around this by temporarily rewriting the request:
{code:java}
  rewrite ^/artifactory/(.*) /$1 redirect;
{code}","10/Jul/20 8:47 AM;Bfabien;I have a similar issue, with a custom context root at the reverse proxy level (Apache). I can't find a way to make it work at the moment.","24/Aug/20 3:13 PM;cdenneen;@Enrice I'm not sure how that would work.

 

Since / -> /ui/ (:8082)

How would /artifactory/(.*) /$1 redirect; work if location ~ /artifactory needs to go to :8081

Do you have the entire nginx example?","08/Sep/20 9:10 AM;Enrice;
{noformat}
server {
  listen       *:443 ssl;

  server_name  ~(?<repo>.+)\.artifactory.example.com artifactory.example.com;

  ssl_certificate           /etc/pki/tls/certs/artifactory.crt;
  ssl_certificate_key       /etc/pki/tls/private/artifactory.key;
  ssl_session_cache         shared:SSL:1m;
  ssl_session_timeout       5m;
  ssl_protocols             TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
  ssl_ciphers               ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS;
  ssl_prefer_server_ciphers on;

  client_max_body_size 0;
  index  index.html index.htm index.php;

  access_log            /var/log/nginx/ssl-artifactory.example.com.access.log combined;
  error_log             /var/log/nginx/ssl-artifactory.example.com.error.log;

  chunked_transfer_encoding on;
  rewrite ^/$ /ui/ redirect;
  rewrite ^/ui$ /ui/ redirect;

# this is just a workaround. we redirect everything starting with /artifactory/ (because of URLs in responses) to /
  rewrite ^/artifactory/(.*) /$1 redirect;

  if ($http_x_forwarded_proto = '') {
      set $http_x_forwarded_proto  $scheme;
  }

  location / {

# this is just a workaround. any path starting with /ui/ is redirected to / of :8082 which may disturb other functionality
    location ~ ^/ui/ {
      proxy_pass          http://localhost:8082;
    }

# this is just a workaround. any path not starting with /ui/ is redirected to /artifactory/ of :8081 which may disturb other functionality
    proxy_pass            http://localhost:8081/artifactory/;

    proxy_read_timeout    2400s;
    proxy_connect_timeout 90s;
    proxy_send_timeout    90s;
    proxy_set_header      X-JFrog-Override-Base-Url       $http_x_forwarded_proto://$host:$server_port;
    proxy_set_header      X-Forwarded-Port                $server_port;
    proxy_set_header      X-Forwarded-Proto               $http_x_forwarded_proto;
    proxy_set_header      Host                            $http_host;
    proxy_set_header      X-Forwarded-For                 $proxy_add_x_forwarded_for;
    proxy_pass_header     Server;
    proxy_cookie_path     ~*^/.* /;
    proxy_buffer_size     128k;
    proxy_buffers         40 128k;
    proxy_busy_buffers_size 128k;
  }
}
{noformat}
","17/Sep/20 1:17 PM;taha;Hello,

I have the same problem!

Waiting for a fix :)

 ",,,,
"npm audit throws 403 when user has permissions for remote repos, but not local repos, in a virtual",RTFACT-21741,95372,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avivb,avivb,08/Apr/20 10:26 AM,18/Feb/21 8:14 AM,18/Feb/21 8:59 AM,,7.3.0,,,,,,,,,,,,,,2,,,,,,"Steps to reproduce:
 # Create local, remote and virtual npm repos.
 # Create a user, grant it permissions for remote, but not for the local.
 # Configure npm client to work with the virtual repo.
 # Create a sample npm project, by running 'npm init -y'
 # Run 'npm install' to create the package-lock.json file, needed for audit command
 # Run 'npm audit'

The error:
{code:java}
npm ERR! code ENOAUDIT
npm ERR! audit Your configured registry (http://localhost:8081/artifactory/api/npm/npm/) may not support audit requests, or the audit endpoint may be temporarily unavailable. {code}
Request log shows:
{code:java}
2020-04-08T09:50:50.036Z|40b83d32339e5f93|127.0.0.1|testuser|POST|/api/npm/npm/-/npm/v1/security/audits|403|134|0|2461|npm/6.13.6 node/v13.7.0 darwin x64 {code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2bk0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Jan/21 10:04 AM;Simon;any news about this issue?",,,,,,,,,,
Debian release bundles are not getting client checksums,RTFACT-21728,72839,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shayb,davidx,davidx,31/May/19 6:47 PM,11/Feb/21 8:37 AM,18/Feb/21 8:59 AM,,7.4.0,,,,,,,,,,,,,,0,distribution,,,,,"Steps to reproduce:
 # Deploy debian package in artifactory
 ## Note the checksums in the ""general tab""
 # Create release budnle
 # Distribute release bundle to edge node's general tab:
 # 
{code:java}
Client did not publish a checksum value. If you trust the uploaded artifact you can accept the actual checksum by clicking the 'Fix Checksum' button.{code}

This can be due to missing the header

*-H ""X-Checksum-Sha1:<checksum>""* 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzew7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"07/Apr/20 7:09 AM;yevdoa;Should be handled by Artifactory when replicating the file
Nothing to do in Distribution's side",,,,,,,,,,
Artifactory Tomcat UI started returning 404 errors,RTFACT-21709,95168,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Aitzol,Aitzol,06/Apr/20 4:33 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,Web UI,,,,,,,1,,,,,,"Hello,

Our Artifactory UI has been down for a while (The back end and repository appear to work as normal).

If we attempt to hit the web root or /UI we get the following Apache tomcat error rather than the expected login screen:

 
{code:java}
HTTP Status 404 - Not Found
Type Status Report
Message /ui/
Description The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.
{code}
Nothing is logged to {{<artifactory-home>/log/tomcat/tomcat-localhost*}} or {{<artifactory-home>/log/tomcat/tomcat-catalina*}} when we attempt to hit the UI.

 

Any pointers to relevant logs would be appreciated?

I note that the following folder in our install is currently empty:

{{<artifactory-home>/etc/artifactory/ui}}

Kind regards,

Aitzol CASADO",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2ad4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/May/20 11:15 AM;tarator;Same problem here. I'm using the official Docker image for running our instance of Artifactory OSS (Docker image: docker.bintray.io/jfrog/artifactory-oss:latest).
When I'm calling on of the following URL'S

[https://arti.example.com/]
[https://arti.example.com/artifactory/|https://arti.example.com/]

I'm getting redirected to [https://arti.example.com/ui/|https://arti.example.com/]

which throws an 404  error. (Tomcat error-page is shown).

 

@Aitzol CASADO: Have you already found a solution for this problem?

 ","12/May/20 11:38 AM;Aitzol;Hi @[~tarator],
Apologies that I cannot remember the full details, but in our case, the issue was related to the port on which tomcat (that used/managed by Artifactory) was starting up. We had theoretically configured it to boot up on port 8081, but for some reason, that port was showing up as occupied and either tomcat or some related startup code from Artifactory was attempting to be too smart and thus choosing port 8082. I can't remember the configuration changes we ended up doing to fix this, but I would suggest starting to diagnose this by looking at the ports being used by tomcat on your server. 
Once you think you know what port the Artifactory UI is running on, you should be able to then test it locally via links/elinks or similar (http://localhost:8081) before having to deal with any reverse proxy or port forwarding configuration to the outside world.","20/May/20 8:37 AM;tarator;Hello, thanks @Aitzol CASADO .

It seems artifactory changed some configuration recently. I had to update our Apache Webserver's Proxy settings:

[https://www.jfrog.com/confluence/display/JFROG/Configuring+Apache]

 ",,,,,,,,
Missing  WARN/ERROR in artifactory.log when there is a problem connecting to a Github remote repository using PAT,RTFACT-21705,95006,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nudgegoonies,nudgegoonies,05/Apr/20 3:49 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.18.1,,,,,,,Remote Repository ,,,,,,,0,PB_Done,,,,,"+*_Use case:_*+

Because of 429 http errors from github due to high traffic from our company ip addresses we created a GitHub service account for our Artifactory instance. Authenticated GitHub users have a much higher raid limit.

 

+*_Issue_*+

We added this service account to the Artifactory remote php composer repository. The URL is [https://github.com,|https://jfrog.lightning.force.com/lightning/r/Case/5001r00002oPQcpAAG/view] the Git provider is GitHub and the registry URL is [https://packagist.org|https://packagist.org/]

We then used a PAT (Personal Access Token) with a username to authenticate, under the advanced tab of the remote repository.

Next we tried to run the project build/install, using the attached files and full steps below.

The build was failing with 404.After some investigation we finally understood that the PAT did not have the needed permission and thus Artifactory was unable to resolve the needed files.

We would expect to get a http 403 or 401 in the Artifactory.log or any indication that the PAT has insufficient permissions.

Composer will the move to resolve the packages from other sources (bypassing Artifactory).

 

+*_Steps to reproduce_*+ 

1.) Create a github PAT with minimal permissions, so he should not be able to resolve files from github.

2.) Configure compose with Artifactory.

3.) Empty the remote composer repo cache in Artifactory.

4.) rm -rf composer.lock vendor in my minimal example (see attached files to this jira)

5.) composer clear-cache

6.) composer install -vvv

7.) You will receive a 404 ",,,,,,,,,,,,,,,,,,,"05/Jul/20 2:42 PM;ohadl;minimalexample.tar.gz;https://www.jfrog.com/jira/secure/attachment/43636/minimalexample.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc29rk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Apr/20 3:54 PM;nudgegoonies;This is part of the log output from a build:
composer update
Loading composer repositories with package information
Updating dependencies (including require-dev)
Package operations: 0 installs, 1 update, 0 removals
  - Updating piwik/device-detector (3.12.3 => 3.12.4): Downloading (failed)    Update failed (The ""https://INTERNALURL.lan/artifactory/api/composer/composer-github/vcs-dists/zip/matomo-org/device-detector/6a92e45a55eb507f53581e9add7dc82835ad6424"" file could not be downloaded (HTTP/1.1 404 Not Found))
We searched all Artifactory and Nginx logfiles but besides the 404 error we cannot see everything. Is there a possibility to see the logs of the requests that go from Artifactory to GitHub?","28/Jul/20 6:30 AM;nudgegoonies;Also for authenticated remote Go repositories (also Github) there is no logging in the Artifactory log in case of errors accessing the remote. So it is not only a problem for authenticated remote Composer repositories.",,,,,,,,,
"No ""Create""- or ""New""-button available to connect Bintray.",RTFACT-21691,94682,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ezekielk,ezekielk,03/Apr/20 11:49 PM,11/Feb/21 8:38 AM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,2,,,,,,"When the customer is attempting to navigate to admin > Repositorys > Distribution

there is no ""Create""- or ""New""-button available to connect Bintray. The button is completely gone in their instance.

 ",,,,,,,,,,,,,,,,,,,"03/Apr/20 11:47 PM;ezekielk;arti_bin.png;https://www.jfrog.com/jira/secure/attachment/41128/arti_bin.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc29bs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Apr/20 2:25 PM;evgenyka;This is UI issue.

Also, ReleaseBundles/new is another UI issue.","23/Jun/20 8:17 AM;sebastian.lang;Is there any process on this bug?","29/Jun/20 12:53 PM;sebastian.lang;This seems to be fixed in newer version (I tested v7.6.1).",,,,,,,,
Artifactory 7.3.1 - Base URL path is ignored,RTFACT-21689,94668,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Pedro Chaves,Pedro Chaves,03/Apr/20 6:20 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,,,,,,"Artifactory custom base url path is ignored. 

For instance, if I set the base url as 
{code:java}
http://<artifactory_hostname>/app/artifactory/{code}
the path
{code:java}
""/app/artifactory/""{code}
is ignored and not considered as the base path for the ui.

 

*Reproduce:* 
{code:bash}
curl http://localhost:8082/ui # returns 200.
curl http://localhost:8082/app/artifactory/ui # returns 404 
curl http://localhost:8082/app/artifactory# returns 404 

curl http://localhost:8081 # returns 200.
curl http://localhost:8081/app/artifactory/ # returns 404 
{code}
 

–

This is especially important for users that want to setup behind a reverse proxy on a different location than '/'.

Example:
{code:java}
<Location /app/artifactory/>
    RequestHeader set X-JFrog-Override-Base-Url https://<hostname>/app/artifactory/
    ProxyPass http://<hostname>:8082/
    ProxyPassReverse http://<hostname>:8082/
</Location>
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2994:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Xray ""New Watch"" UI endpoint returns 500 error",RTFACT-21688,94652,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,03/Apr/20 4:07 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Xray,,,,,,,0,,,,,,"I'm trying out Xray with a trial license right now. But when I try to add a new Watch I get the following error from one of the endpoints that are called when I click ""+ New Watch"".

Endpoint: /ui/api/v1/xray/ui/unified/projects/resources/repos

 
{code:java}
{""error"":""Failed to get repositories resources""}
{code}
 

 

Am I missing something on my end, configuration perhaps, or is this a bug?

I have synced two local repos from our production instance and the artifactory-build-info repo to have some build information available.

No log entry appears in the application container when doing the above action. I would expect a 500 error in the web client to generate a log entry. But this is not the case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2968:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Apr/20 2:20 PM;stefanga;A complete redeploy of the application solved the issue.",,,,,,,,,,
Cron job uses wrong paths,RTFACT-21687,94651,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arlt,arlt,03/Apr/20 1:49 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,3,,,,,,"Hi,

the new version creates a cronjob which references file in the wrong place.

The old version has no cronjob.

$ sudo crontab -lu artifactory
 55 * * * * /opt/jfrog/artifactory/app/third-party/logrotate/logrotate /opt/jfrog/artifactory/var/etc/logrotate/logrotate.conf --state /opt/jfrog/artifactory/var/etc/logrotate/logrotate-state
 $ ls -al /opt/jfrog/artifactory/var/etc/logrotate/logrotate.conf
 ls: cannot access /opt/jfrog/artifactory/var/etc/logrotate/logrotate.conf: No such file or directory
 $ sudo find /opt /var/opt -name logrotate-state
 $ sudo find /opt /var/opt -name logrotate.conf
 /var/opt/jfrog/artifactory/etc/artifactory/logrotate/logrotate.conf

Result: Mails with errors:

error: cannot stat /opt/jfrog/artifactory/var/etc/logrotate/logrotate.conf: No such file or directory
error: error creating state file /opt/jfrog/artifactory/var/etc/logrotate/logrotate-state: No such file or directory
error: error opening /opt/jfrog/artifactory/var/etc/logrotate/logrotate-state: No such file or directory

Kind regards
 Michael","CentOS 7.7

8 GB RAM

RPM Installation of 6.18.1 -> yum upgrade (7.3.2) -> problem with cronjob",,,,,,,,,,INST-767,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2960:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"24/Jun/20 5:41 AM;ilkka_kiiskinen;We use RPM installation method with RHEL 7 and we run into this issue also.

I think this design & implementation has some problems:
 * RPM installs third party applications from a tar file that is deleted at the end of installation script. This method leaves no sign where these files are coming from (RPM verify doesn't work). This is a security issue.
 * Installation script adds a crontab job to artifactory user without notification and confirmation request from the operator.
 * cornjob sends emails to the artifactory user, which might not get to the actual system operator. This happened in our case. BTW, sysadmin address is defined in Artifactory application configurations (Mail settings ""From""), but of course the cronjob implementation doesn't use it. 
 * missing files/wrong path to the files (as in the original description)

Can't Artifactory (as java application) just use some java tools (logback, log4j, etc.) for logrotating, instead of installing some third party logrotate and use configurations from the application settings (managed in the web UI)?
I think that is the ""implementation standard"".",,,,,,,,,,
"Stopping artifactory produces multiple: Exception in thread ""grpc-nio-worker-ELG-1-4""",RTFACT-21686,94648,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arlt,arlt,03/Apr/20 10:05 AM,05/Jan/21 11:20 AM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,4,artifactory,,,,,"Hi,

i test the upgrade from 6.18.1 to 7.3.2.

After conversion i can start and stop it.

Start works fine but during stop i get several exceptions (i paste where the problems begin and remove some lines in the middle due to 32k limit):

2020-04-03T08:49:26.561Z [jfrt ] [INFO ] [                ] [actorySchedulerFactoryBean:845] [ocalhost-startStop-5] - Shutting down Quartz Scheduler
 Exception in thread ""grpc-nio-worker-ELG-1-4"" java.lang.NoClassDefFoundError: io/netty/util/concurrent/DefaultPromise$1
                 at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:421)
                 at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:538)
                 at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:527)
                 at io.netty.util.concurrent.DefaultPromise.setSuccess(DefaultPromise.java:90)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:963)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.base/java.lang.Thread.run(Thread.java:834)
 Caused by: java.lang.ClassNotFoundException: Illegal access: this web application instance has been stopped already. Could not load [io.netty.util.concurrent.DefaultPromise$1]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.
                 at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1368)
                 at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1218)
                 at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1180)
                 ... 8 more
 Caused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [io.netty.util.concurrent.DefaultPromise$1]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.
                 at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1378)
                 at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1366)
                 ... 10 more
 Exception in thread ""grpc-nio-worker-ELG-1-1"" Exception in thread ""grpc-nio-worker-ELG-1-2"" java.lang.NoClassDefFoundError: io/netty/buffer/PoolArena$1
                 at io.netty.buffer.PoolArena.freeChunk(PoolArena.java:296)
                 at io.netty.buffer.PoolThreadCache$MemoryRegionCache.freeEntry(PoolThreadCache.java:464)
                 at io.netty.buffer.PoolThreadCache$MemoryRegionCache.free(PoolThreadCache.java:430)
                 at io.netty.buffer.PoolThreadCache$MemoryRegionCache.free(PoolThreadCache.java:422)
                 at io.netty.buffer.PoolThreadCache.free(PoolThreadCache.java:279)
                 at io.netty.buffer.PoolThreadCache.free(PoolThreadCache.java:270)
                 at io.netty.buffer.PoolThreadCache.free(PoolThreadCache.java:241)
                 at io.netty.buffer.PooledByteBufAllocator$PoolThreadLocalCache.onRemoval(PooledByteBufAllocator.java:477)
                 at io.netty.buffer.PooledByteBufAllocator$PoolThreadLocalCache.onRemoval(PooledByteBufAllocator.java:444)
                 at io.netty.util.concurrent.FastThreadLocal.remove(FastThreadLocal.java:256)
                 at io.netty.util.concurrent.FastThreadLocal.removeAll(FastThreadLocal.java:67)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:955)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.base/java.lang.Thread.run(Thread.java:834)
 Caused by: java.lang.ClassNotFoundException: Illegal access: this web application instance has been stopped already. Could not load [io.netty.buffer.PoolArena$1]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.
                 at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1368)
                 at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1218)
                 at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1180)
                 ... 15 more
 Caused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [io.netty.buffer.PoolArena$1]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.
                 at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1378)
                 at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForClassLoading(WebappClassLoaderBase.java:1366)
                 ... 17 more
 java.lang.NoClassDefFoundError: io/netty/util/concurrent/DefaultPromise$1
                 at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:421)
                 at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:538)
                 at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:527)
                 at io.netty.util.concurrent.DefaultPromise.setSuccess(DefaultPromise.java:90)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:963)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.base/java.lang.Thread.run(Thread.java:834)
 Exception in thread ""grpc-nio-worker-ELG-1-3"" java.lang.NoClassDefFoundError: io/netty/util/concurrent/DefaultPromise$1
                 at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:421)
                 at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:538)
                 at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:527)
                 at io.netty.util.concurrent.DefaultPromise.setSuccess(DefaultPromise.java:90)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:963)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.base/java.lang.Thread.run(Thread.java:834)
 2020-04-03 10:49:31
 Full thread dump OpenJDK 64-Bit Server VM (11.0.2+9 mixed mode):

Threads class SMR info:
 _java_thread_list=0x00007f76d4025cf0, length=53, elements=

{ 0x00007f76f4012000, 0x00007f76f42b7800, 0x00007f76f42bc000, 0x00007f76f42d5000, 0x00007f76f42d7000, 0x00007f76f42d9000, 0x00007f76f42dd800, 0x00007f76f4385800, 0x00007f76f4388800, 0x00007f76f47ab000, 0x00007f76f473e800, 0x00007f769d8d1800, 0x00007f769edfe000, 0x00007f769c1aa000, 0x00007f76a0050800, 0x00007f76a0054000, 0x00007f76ac056800, 0x00007f76b8156000, 0x00007f76b4001000, 0x00007f76f470a000, 0x00007f76f470b800, 0x00007f76f4301000, 0x00007f76f4303000, 0x00007f76f4305000, 0x00007f76f4710000, 0x00007f76f4711800, 0x00007f76f4713800, 0x00007f76f4715800, 0x00007f76f42e9800, 0x00007f76f42ee800, 0x00007f76f4702800, 0x00007f76f4704800, 0x00007f76f4706000, 0x00007f76f443f800, 0x00007f76f4442000, 0x00007f76f4444000, 0x00007f76f479b000, 0x00007f76f479c800, 0x00007f76f479e800, 0x00007f76f47a0800, 0x00007f76f47a2000, 0x00007f76f47a4000, 0x00007f76f47a6000, 0x00007f76f47a8800, 0x00007f76f4791000, 0x00007f76f4792000, 0x00007f76f4794000, 0x00007f76bddb2000, 0x00007f76bc919000, 0x00000000015b7800, 0x00007f76f4708800, 0x00000000015bb000, 0x00000000015c3800 }

""main"" #1 prio=5 os_prio=0 cpu=802,94ms elapsed=260,11s tid=0x00007f76f4012000 nid=0x3d80 waiting on condition  [0x00007f76fa6d3000]
    java.lang.Thread.State: WAITING (parking)
                 at jdk.internal.misc.Unsafe.park(java.base@11.0.2/Native Method)
                 - parking to wait for  <0x000000072b4d49d0> (a java.util.concurrent.FutureTask)
                 at java.util.concurrent.locks.LockSupport.park(java.base@11.0.2/LockSupport.java:194)
                 at java.util.concurrent.FutureTask.awaitDone(java.base@11.0.2/FutureTask.java:447)
                 at java.util.concurrent.FutureTask.get(java.base@11.0.2/FutureTask.java:190)
                 at org.apache.catalina.core.ContainerBase.stopInternal(ContainerBase.java:990)
                 - locked <0x00000007001d10e0> (a org.apache.catalina.core.StandardEngine)
                 at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
                 - locked <0x00000007001d10e0> (a org.apache.catalina.core.StandardEngine)
                 at org.apache.catalina.core.StandardService.stopInternal(StandardService.java:486)
                 - locked <0x00000007001d10e0> (a org.apache.catalina.core.StandardEngine)
                 at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
                 - locked <0x00000007001ba440> (a org.apache.catalina.core.StandardService)
                 at org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:787)
                 at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:257)
                 - locked <0x00000007001ba570> (a org.apache.catalina.core.StandardServer)
                 at org.apache.catalina.startup.Catalina.stop(Catalina.java:761)
                 at org.apache.catalina.startup.Catalina.start(Catalina.java:723)
                 at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(java.base@11.0.2/Native Method)
                 at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(java.base@11.0.2/NativeMethodAccessorImpl.java:62)
                 at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(java.base@11.0.2/DelegatingMethodAccessorImpl.java:43)
                 at java.lang.reflect.Method.invoke(java.base@11.0.2/Method.java:566)
                 at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)
                 at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)

""Reference Handler"" #2 daemon prio=10 os_prio=0 cpu=8,73ms elapsed=260,08s tid=0x00007f76f42b7800 nid=0x3da7 waiting on condition  [0x00007f76d880c000]
    java.lang.Thread.State: RUNNABLE
                 at java.lang.ref.Reference.waitForReferencePendingList(java.base@11.0.2/Native Method)
                 at java.lang.ref.Reference.processPendingReferences(java.base@11.0.2/Reference.java:241)
                 at java.lang.ref.Reference$ReferenceHandler.run(java.base@11.0.2/Reference.java:213)

""Finalizer"" #3 daemon prio=8 os_prio=0 cpu=15,92ms elapsed=260,08s tid=0x00007f76f42bc000 nid=0x3da9 in Object.wait()  [0x00007f76d87cb000]
    java.lang.Thread.State: WAITING (on object monitor)
                 at java.lang.Object.wait(java.base@11.0.2/Native Method)
                 - waiting on <0x00000007001ef170> (a java.lang.ref.ReferenceQueue$Lock)
                 at java.lang.ref.ReferenceQueue.remove(java.base@11.0.2/ReferenceQueue.java:155)
                 - waiting to re-lock in wait() <0x00000007001ef170> (a java.lang.ref.ReferenceQueue$Lock)
                 at java.lang.ref.ReferenceQueue.remove(java.base@11.0.2/ReferenceQueue.java:176)
                 at java.lang.ref.Finalizer$FinalizerThread.run(java.base@11.0.2/Finalizer.java:170)

""Signal Dispatcher"" #4 daemon prio=9 os_prio=0 cpu=0,13ms elapsed=260,06s tid=0x00007f76f42d5000 nid=0x3db2 waiting on condition  [0x0000000000000000]
    java.lang.Thread.State: RUNNABLE

""C2 CompilerThread0"" #5 daemon prio=9 os_prio=0 cpu=26678,84ms elapsed=260,06s tid=0x00007f76f42d7000 nid=0x3db3 waiting on condition  [0x0000000000000000]
    java.lang.Thread.State: RUNNABLE
    No compile task

""C1 CompilerThread0"" #6 daemon prio=9 os_prio=0 cpu=8279,87ms elapsed=260,07s tid=0x00007f76f42d9000 nid=0x3db5 waiting on condition  [0x0000000000000000]
    java.lang.Thread.State: RUNNABLE
    No compile task

""Sweeper thread"" #7 daemon prio=9 os_prio=0 cpu=293,64ms elapsed=260,07s tid=0x00007f76f42dd800 nid=0x3db6 runnable  [0x0000000000000000]
    java.lang.Thread.State: RUNNABLE

""Common-Cleaner"" #8 daemon prio=8 os_prio=0 cpu=4,21ms elapsed=260,02s tid=0x00007f76f4385800 nid=0x3db7 in Object.wait()  [0x00007f76d8506000]
    java.lang.Thread.State: TIMED_WAITING (on object monitor)
                 at java.lang.Object.wait(java.base@11.0.2/Native Method)
                 - waiting on <no object reference available>
                 at java.lang.ref.ReferenceQueue.remove(java.base@11.0.2/ReferenceQueue.java:155)
                 - waiting to re-lock in wait() <0x000000070013a438> (a java.lang.ref.ReferenceQueue$Lock)
                 at jdk.internal.ref.CleanerImpl.run(java.base@11.0.2/CleanerImpl.java:148)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)
                 at jdk.internal.misc.InnocuousThread.run(java.base@11.0.2/InnocuousThread.java:134)

""Service Thread"" #9 daemon prio=9 os_prio=0 cpu=33,75ms elapsed=260,01s tid=0x00007f76f4388800 nid=0x3db8 runnable  [0x0000000000000000]
    java.lang.Thread.State: RUNNABLE

""NioBlockingSelector.BlockPoller-0"" #12 daemon prio=5 os_prio=0 cpu=10,08ms elapsed=259,12s tid=0x00007f76f47ab000 nid=0x3dbd runnable  [0x00007f76d8171000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x00000007001b9f38> (a sun.nio.ch.Util$2)
                 - locked <0x00000007001b9de8> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at org.apache.tomcat.util.net.NioBlockingSelector$BlockPoller.run(NioBlockingSelector.java:298)

""NioBlockingSelector.BlockPoller-1"" #13 daemon prio=5 os_prio=0 cpu=13,20ms elapsed=259,10s tid=0x00007f76f473e800 nid=0x3dbe runnable  [0x00007f76d8130000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x00000007001b98a0> (a sun.nio.ch.Util$2)
                 - locked <0x00000007001b9740> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at org.apache.tomcat.util.net.NioBlockingSelector$BlockPoller.run(NioBlockingSelector.java:298)

""Tomcat JDBC Pool Cleaner[334224168:1585903523061]"" #28 daemon prio=5 os_prio=0 cpu=8,29ms elapsed=248,38s tid=0x00007f769d8d1800 nid=0x3e20 in Object.wait()  [0x00007f76c0167000]
    java.lang.Thread.State: TIMED_WAITING (on object monitor)
                 at java.lang.Object.wait(java.base@11.0.2/Native Method)
                 - waiting on <no object reference available>
                 at java.util.TimerThread.mainLoop(java.base@11.0.2/Timer.java:553)
                 - waiting to re-lock in wait() <0x0000000703417698> (a java.util.TaskQueue)
                 at java.util.TimerThread.run(java.base@11.0.2/Timer.java:506)

""jf-access-task1"" #32 daemon prio=5 os_prio=0 cpu=407,45ms elapsed=243,38s tid=0x00007f769edfe000 nid=0x3e6b waiting on condition  [0x00007f76c00e5000]
    java.lang.Thread.State: TIMED_WAITING (parking)
                 at jdk.internal.misc.Unsafe.park(java.base@11.0.2/Native Method)
                 - parking to wait for  <0x0000000705205600> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
                 at java.util.concurrent.locks.LockSupport.parkNanos(java.base@11.0.2/LockSupport.java:234)
                 at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(java.base@11.0.2/AbstractQueuedSynchronizer.java:2123)
                 at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(java.base@11.0.2/ScheduledThreadPoolExecutor.java:1182)
                 at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(java.base@11.0.2/ScheduledThreadPoolExecutor.java:899)
                 at java.util.concurrent.ThreadPoolExecutor.getTask(java.base@11.0.2/ThreadPoolExecutor.java:1054)
                 at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.2/ThreadPoolExecutor.java:1114)
                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.2/ThreadPoolExecutor.java:628)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

""grpc-nio-boss-ELG-3-1"" #36 daemon prio=5 os_prio=0 cpu=28,70ms elapsed=239,53s tid=0x00007f769c1aa000 nid=0x3e97 runnable  [0x00007f76c00a4000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x0000000705c003c8> (a io.netty.channel.nio.SelectedSelectionKeySet)
                 - locked <0x0000000705c00370> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:62)
                 at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:806)
                 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:454)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

""grpc-nio-worker-ELG-1-1"" #41 daemon prio=5 os_prio=0 cpu=164,25ms elapsed=239,10s tid=0x00007f76a0050800 nid=0x3e9e runnable  [0x00007f7684ffe000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x0000000705c132e8> (a io.netty.channel.nio.SelectedSelectionKeySet)
                 - locked <0x0000000705c131d8> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:62)
                 at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:806)
                 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:454)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

""grpc-default-executor-0"" #42 daemon prio=5 os_prio=0 cpu=523,94ms elapsed=239,06s tid=0x00007f76a0054000 nid=0x3ea2 waiting on condition  [0x00007f7684fbd000]
    java.lang.Thread.State: TIMED_WAITING (parking)
                 at jdk.internal.misc.Unsafe.park(java.base@11.0.2/Native Method)
                 - parking to wait for  <0x0000000705c01e08> (a java.util.concurrent.SynchronousQueue$TransferStack)
                 at java.util.concurrent.locks.LockSupport.parkNanos(java.base@11.0.2/LockSupport.java:234)
                 at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(java.base@11.0.2/SynchronousQueue.java:462)
                 at java.util.concurrent.SynchronousQueue$TransferStack.transfer(java.base@11.0.2/SynchronousQueue.java:361)
                 at java.util.concurrent.SynchronousQueue.poll(java.base@11.0.2/SynchronousQueue.java:937)
                 at java.util.concurrent.ThreadPoolExecutor.getTask(java.base@11.0.2/ThreadPoolExecutor.java:1053)
                 at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.2/ThreadPoolExecutor.java:1114)
                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.2/ThreadPoolExecutor.java:628)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

""grpc-nio-worker-ELG-1-2"" #43 daemon prio=5 os_prio=0 cpu=37,01ms elapsed=238,54s tid=0x00007f76ac056800 nid=0x3eaf runnable  [0x00007f7684d7c000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x0000000705c1ec60> (a io.netty.channel.nio.SelectedSelectionKeySet)
                 - locked <0x0000000705c1eb60> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:62)
                 at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:806)
                 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:454)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

""grpc-nio-worker-ELG-1-3"" #44 daemon prio=5 os_prio=0 cpu=20,34ms elapsed=238,40s tid=0x00007f76b8156000 nid=0x3eb0 runnable  [0x00007f768471b000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x0000000705c1b1e8> (a io.netty.channel.nio.SelectedSelectionKeySet)
                 - locked <0x0000000705c1b0e8> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:62)
                 at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:806)
                 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:454)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

""grpc-nio-worker-ELG-1-4"" #47 daemon prio=5 os_prio=0 cpu=109,08ms elapsed=237,95s tid=0x00007f76b4001000 nid=0x3eb2 runnable  [0x00007f7684699000]
    java.lang.Thread.State: RUNNABLE
                 at sun.nio.ch.EPoll.wait(java.base@11.0.2/Native Method)
                 at sun.nio.ch.EPollSelectorImpl.doSelect(java.base@11.0.2/EPollSelectorImpl.java:120)
                 at sun.nio.ch.SelectorImpl.lockAndDoSelect(java.base@11.0.2/SelectorImpl.java:124)
                 - locked <0x0000000705c179d0> (a io.netty.channel.nio.SelectedSelectionKeySet)
                 - locked <0x0000000705c0bed0> (a sun.nio.ch.EPollSelectorImpl)
                 at sun.nio.ch.SelectorImpl.select(java.base@11.0.2/SelectorImpl.java:136)
                 at io.netty.channel.nio.SelectedSelectionKeySetSelector.select(SelectedSelectionKeySetSelector.java:62)
                 at io.netty.channel.nio.NioEventLoop.select(NioEventLoop.java:806)
                 at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:454)
                 at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:918)
                 at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
                 at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
                 at java.lang.Thread.run(java.base@11.0.2/Thread.java:834)

.... (removed some lines...)

""VM Thread"" os_prio=0 cpu=249,69ms elapsed=260,14s tid=0x00007f76f42af800 nid=0x3da0 runnable  

""GC Thread#0"" os_prio=0 cpu=1096,97ms elapsed=260,17s tid=0x00007f76f4039800 nid=0x3d85 runnable  

""GC Thread#1"" os_prio=0 cpu=1082,68ms elapsed=259,11s tid=0x00007f76b8001000 nid=0x3dc8 runnable  

""G1 Main Marker"" os_prio=0 cpu=2,68ms elapsed=260,17s tid=0x00007f76f4079800 nid=0x3d88 runnable  

""G1 Conc#0"" os_prio=0 cpu=1040,03ms elapsed=260,16s tid=0x00007f76f407b800 nid=0x3d91 runnable  

""G1 Refine#0"" os_prio=0 cpu=87,26ms elapsed=260,15s tid=0x00007f76f424b800 nid=0x3d94 runnable  

""G1 Refine#1"" os_prio=0 cpu=11,21ms elapsed=222,48s tid=0x00007f768cc1e800 nid=0x4195 runnable  

""G1 Young RemSet Sampling"" os_prio=0 cpu=108,50ms elapsed=260,15s tid=0x00007f76f424d800 nid=0x3d95 runnable  
 ""VM Periodic Task Thread"" os_prio=0 cpu=147,84ms elapsed=260,06s tid=0x00007f76f438b000 nid=0x3db9 waiting on condition  

JNI global refs: 18, weak refs: 0

Heap
 garbage-first heap   total 968704K, used 553984K [0x0000000700000000, 0x0000000800000000)
   region size 1024K, 267 young (273408K), 10 survivors (10240K)
 Metaspace       used 169044K, capacity 173486K, committed 173652K, reserved 1200128K
   class space    used 20799K, capacity 22473K, committed 22604K, reserved 1048576K

2020-04-03T10:49:31.601L [tomct] [INFO ] [                ] [org.apache.coyote.http11.Http11NioProtocol] [org.apache.coyote.AbstractProtocol stop] - Stopping ProtocolHandler [""http-nio-127.0.0.1-8081""] 
 2020-04-03T10:49:31.603L [tomct] [INFO ] [                ] [org.apache.coyote.http11.Http11NioProtocol] [org.apache.coyote.AbstractProtocol stop] - Stopping ProtocolHandler [""http-nio-127.0.0.1-8040""] 
 2020-04-03T10:49:31.608L [tomct] [INFO ] [                ] [org.apache.coyote.http11.Http11NioProtocol] [org.apache.coyote.AbstractProtocol destroy] - Destroying ProtocolHandler [""http-nio-127.0.0.1-8081""] 
 2020-04-03T10:49:31.614L [tomct] [INFO ] [                ] [org.apache.coyote.http11.Http11NioProtocol] [org.apache.coyote.AbstractProtocol destroy] - Destroying ProtocolHandler [""http-nio-127.0.0.1-8040""] 
 2020-04-03T08:49:31.616Z [jfrou] [ERROR] [2d08036cc0d9dd7c] [external_topology.go:82       ] [main                ] - failed fetching external topology from Access: Get [http://localhost:8040/access/api/v1/topology:] read tcp 127.0.0.1:52412->127.0.0.1:8040: read: connection reset by peer
 2020-04-03T08:49:31.717Z [jfrou] [ERROR] [6ed73a42f0b03a6d] [external_topology.go:82       ] [main                ] - failed fetching external topology from Access: Get [http://localhost:8040/access/api/v1/topology:] dial tcp 127.0.0.1:8040: connect: connection refused
 2020/04/03 10:49:32 httputil: ReverseProxy read error during body copy: http2: server sent GOAWAY and closed the connection; LastStreamID=97, ErrCode=NO_ERROR, debug=""app_requested""
 2020-04-03T08:49:32.032Z [jfmd ] [ERROR] [                ] [compatibility_logger.go:28    ] [main                ] - Refreshing affected permissions stream - got an error (status: [Internal]) [access_client]
 2020-04-03T08:49:32.036Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:32.047Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:32.068Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:32.110Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:32.160Z [jffe ] [ERROR] [                ] [                              ] [main                ] - Error: fetchAndUpdateHttpSsoConfigs failed with error Request failed with status code 502
 at configurationsPromises.push.PlatformConfiguration.fetchAndUpdateHttpSsoConfigs.catch.e (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/PlatformState/PlatformConfiguration.ts:83:17)
 at process._tickCallback (internal/process/next_tick.js:68:7)
 2020-04-03T08:49:32.192Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:32.268Z [jfrou] [INFO ] [                ] [server_configuration.go:61    ] [main                ] - Server configuration reloaded on localhost:8046
 2020-04-03T08:49:32.268Z [jfrou] [INFO ] [                ] [server_configuration.go:61    ] [main                ] - Server configuration reloaded on localhost:8049
 2020-04-03T08:49:32.268Z [jfrou] [INFO ] [                ] [server_configuration.go:61    ] [main                ] - Server configuration reloaded on :8082
 2020-04-03T08:49:32.353Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:32.675Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:33.317Z [jfmd ] [WARN ] [                ] [compatibility_logger.go:25    ] [main                ] - Refreshing affected permissions stream - target server is unavailable%!(EXTRA []interface {}=[]) [access_client]
 2020-04-03T08:49:33.448Z [shell] [INFO ] [] [artifactoryManage.sh:196      ] [main] - Artifactory Tomcat stopped

Kind regards
Michael","CentOS 7.7

8 GB RAM

RPM Installation of 6.18.1 -> yum upgrade (7.3.2) -> problem during stop",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc295c:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Jul/20 2:27 PM;D-Angelov;I am facing similar issue on 7.5.7",,,,,,,,,,
Backup errors due to long filenames,RTFACT-21683,94633,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,klaus.wening@datev.de,klaus.wening@datev.de,03/Apr/20 4:50 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.18.1,,,,,,,Backup,,,,,,,0,,,,,,"Our backup fails sometimes due to filename restriction in Debian. 

Filenames are restricted to 255 characters, but artifacts - especially buildinfo objects - sometimes get longer than this limitation. The resulting filenames for export are to long for the filesystem and the export fails with errors.

Here is the resulting error message:

{color:#707070}_Failed to export metadata for 'artifactory-build-info:this-is-my-project-with-a-long-name-and-it-is-being-build-from %3A%3A a-branch-that-also-has-a-very-long-branch-name-and-sometimes-a-date-2020-03-30-10-00-00 %3A%3A we-also-have-some-additional-metadata-for-buildinfo-here %3A%3A and-a-stage build'.: Unable to create directory /var/opt/jfrog/artifactory/backup/backup-daily/current/repositories/artifactory-build-info/this-is-my-project-with-a-long-name-and-it-is-being-build-from %3A%3A a-branch-that-also-has-a-very-long-branch-name-and-sometimes-a-date-2020-03-30-10-00-00 %3A%3A we-also-have-some-additional-metadata-for-buildinfo-here %3A%3A and-a-stage build.artifactory-metadata_{color}
{color:#707070}_Export error: from: artifactory-build-info:this-is-my-project-with-a-long-name-and-it-is-being-build-from %3A%3A a-branch-that-also-has-a-very-long-branch-name-and-sometimes-a-date-2020-03-30-10-00-00 %3A%3A we-also-have-some-additional-metadata-for-buildinfo-here %3A%3A and-a-stage build to: /var/opt/jfrog/artifactory/backup/backup-daily/current/repositories/artifactory-build-info reason: Parameter 'directory' is not a directory: /var/opt/jfrog/artifactory/backup/backup-daily/current/repositories/artifactory-build-info/this-is-my-project-with-a-long-name-and-it-is-being-build-from %3A%3A a-branch-that-also-has-a-very-long-branch-name-and-sometimes-a-date-2020-03-30-10-00-00 %3A%3A we-also-have-some-additional-metadata-for-buildinfo-here %3A%3A and-a-stage build.artifactory-metadata: Parameter 'directory' is not a directory: /var/opt/jfrog/artifactory/backup/backup-daily/current/repositories/artifactory-build-info/this-is-my-project-with-a-long-name-and-it-is-being-build-from %3A%3A a-branch-that-also-has-a-very-long-branch-name-and-sometimes-a-date-2020-03-30-10-00-00 %3A%3A we-also-have-some-additional-metadata-for-buildinfo-here %3A%3A and-a-stage build.artifactory-metadata_{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2920:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
exclude patterns not working in generic repository for download,RTFACT-21671,94201,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cszabo1,cszabo1,31/Mar/20 6:43 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,CLI,,,,,,,0,,,,,,"In a generic artifact repository using the JFrog CLI command:
 # jfrog rt dl --exclusions=... complains that the flag is not supported despite what is documented here:
[https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory#CLIforJFrogArtifactory-DownloadingFiles]
 # After correcting the command to match the built-in documentation:
jfrog rt dl --exclude-patterns=datapack repo/path/(data*) target/\{1}
Nothing is downloaded anymore. The command succeeds, downloading 0 files. Removing the --exclude-patterns option downloads 72 files (in my case). obviously the pattern ""datapack"" cannot match any files in the specified path as ""datapack"" does not match ""path"". Actually it does not matter much what is provided as an exclude pattern, once a pattern is provided nothing is downloaded.

Server versions: Artifactory Version 6.12.2

CLI version: jfrog version 1.33.1

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc26ig:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
RTFACT-21088 has not been resolved by 7.3.2 on-prem,RTFACT-21667,94163,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,krisztian.gacsal,krisztian.gacsal,31/Mar/20 1:24 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,Artifactory Home,,,,,,,0,Artifactory,Docker,,,,"It seems that the issue described in RTFACT-21088 ticket has not been resolved in version 7.3.2 after upgrading Artifactory from 7.2.1.

Docker images stored in remote cache (for Docker Hub) are shown by their SHA256 hash instead of by their image tag no matter if Packages view or Artifacts view from the navigation menu is used to list available images.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc26ag:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't update Artifactory version on Openshift,RTFACT-21662,94133,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tcaenen,tcaenen,31/Mar/20 10:15 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Upgrade,,,,,,,0,artifactory,image,openshift,,,"We have Artifactory pro installed on an Openshift following this method while it wasn't deprecated : [https://github.com/jfrog/artifactory-docker-examples]

It was updated to Artifactory pro 6.16 in december 2019.

I want to update to 6.16.2 because of the high-severity security vulnerability warning we received.

And here is the issue : when I try to update the Image stream to get the last images I end up with an error, the docker repo is not responding.

This is the repo that we use {{: jfrog-docker-reg2.bintray.io/jfrog/artifactory-pro}}

It looks like the repo changed, could you give me the right repo to put in ? I tried bintray.com/jfrog/reg2/jfrog:artifactory-pro without success.","OpenShift Master v3.11.135 
Kubernetes Master v1.11.0+d4cacc0
Artifactory Professional 6.16.0 rev 61600900",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2648:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/May/20 6:52 AM;tcaenen;Hello,

Any update on this ticket ?",,,,,,,,,,
docker - metadata is not updated on new versions when moving/copying to another tag,RTFACT-21654,93999,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerk,omerk,30/Mar/20 11:10 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,0,PB_Done,,,,,"when copying/moving docker versions (tags) to a new version name (tag), metadata is not updated that a new version has been created.
instead, metadata is updated on changes to the repositories for the existing versions.

*reproduction steps:*

1. create docker repo
2. create another docker repo
3. upload image (for example use: [https://hub.docker.com/_/hello-world])
4. copy OR move the image version (tag) from the original repo to the new repo, while using a new version name (tag) for the target.

*expected:*
under packages page,
1. the new version name (tag) should appear in the versions list.
2. the versions count should be accurate.
3. the latest version should be accurate.

*actual:*
1. the new version name (tag) is missing from the versions list.
2. in case of copy, the versions count is not accurate.
3. the latest version is not accurate.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4p7:azu",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"NullPointerException with LDAP and ""Remember Me"" enabled",RTFACT-21645,93891,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valeriyp,valeriyp,29/Mar/20 8:17 AM,11/Feb/21 8:48 AM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,1,,,,,,"NullPointerException might be thrown in the _artifactory.log_ when the LDAP user logged in with the ""Remember Me"" feature enabled and the search parameters are missing.

In this case <search> was removed manually from config descriptor:

LDAP config, from the Config descriptor:
{code:java}
<ldapSettings>
 <ldapSetting>
 <key>test</key>
 <enabled>true</enabled>
 <ldapUrl>ldap://ldap:389/</ldapUrl>
 <userDnPattern>cn=\{0},ou=Users,dc=test,dc=com</userDnPattern>
 <autoCreateUser>true</autoCreateUser>
 <emailAttribute>mail</emailAttribute>
 <ldapPoisoningProtection>false</ldapPoisoningProtection>
 <allowUserToAccessProfile>true</allowUserToAccessProfile>
 </ldapSetting>
 </ldapSettings>
 <ldapGroupSettings/>
{code}
_artifactory.log:_
{code:java}
2020-03-23T14:30:25.818Z [jfrt ] [ERROR] [62e6e6bf7d3109f6] [c.e.m.GlobalExceptionMapper:48] [ttp-nio-8081-exec-10] - null
java.lang.NullPointerException: null
	at org.artifactory.security.ldap.ArtifactoryLdapAuthenticationProvider.lambda$reauthenticateRememberMe$0(ArtifactoryLdapAuthenticationProvider.java:283)
	at java.base/java.util.stream.MatchOps$1MatchSink.accept(MatchOps.java:90)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1631)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.MatchOps$MatchOp.evaluateSequential(MatchOps.java:230)
	at java.base/java.util.stream.MatchOps$MatchOp.evaluateSequential(MatchOps.java:196)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.allMatch(ReferencePipeline.java:533)
	at org.artifactory.security.ldap.ArtifactoryLdapAuthenticationProvider.reauthenticateRememberMe(ArtifactoryLdapAuthenticationProvider.java:283)
	at org.artifactory.session.ArtifactoryRememberMeTokenService.reauthenticateByRealm(ArtifactoryRememberMeTokenService.java:133)
	at org.artifactory.session.ArtifactoryRememberMeTokenService.processAutoLoginCookie(ArtifactoryRememberMeTokenService.java:121)
	at org.springframework.security.web.authentication.rememberme.AbstractRememberMeServices.autoLogin(AbstractRememberMeServices.java:136)
	at org.artifactory.rest.util.AuthUtils.restoreRememberMeAuth(AuthUtils.java:61)
	at org.artifactory.rest.util.AuthUtils.validateSession(AuthUtils.java:51)
	at org.artifactory.rest.common.RestAuthenticationFilter.filter(RestAuthenticationFilter.java:77)
	at org.glassfish.jersey.server.ContainerFilteringStage.apply(ContainerFilteringStage.java:132)
	at org.glassfish.jersey.server.ContainerFilteringStage.apply(ContainerFilteringStage.java:68)
	at org.glassfish.jersey.process.internal.Stages.process(Stages.java:197)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:269)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:195)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:519)
	at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:480)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:251)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:75)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc24tk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Mar/20 11:38 PM;dshapiro;While I can't find the above exception in any of the logs, authentication does fail when I have LDAP auth integration and the ""remember me"" checkbox is checked.  The following appears in the console.log:
""2020-03-30T22:27:56.558Z [jfac ] [INFO ] [1bfb757ab365efea] [j.a.s.s.t.TokenServiceImpl:405] [http-nio-8040-exec-5] - Deleted 1 tokens with username 'testuser' and scope 'authentication:remember-me'.""

 

The biggest problem isn't that the ""remember me"" functionality is broken. It is that users will fail to authenticate if they select ""remember me"" and raise issues because they believe something is wrong with their credentials (e.g. they will assume they forgot their password).

 

Note: authentication works fine if the user does not check the ""remember me"" checkbox.","01/Apr/20 7:49 AM;krihelis;[~dshapiro] in which Artifactory version are you seeing this behaviour where users will fail to authenticate when selecting ""Remember Me"" during login? ","01/Apr/20 3:55 PM;dshapiro;It is 7.3.2 rev 70302900.","14/Apr/20 7:46 AM;mmh;This issue (or related) is also affecting us. When users click ""Remember me"" they get a 500 Server error and aren't logged in.

We are using local accounts though (and also have Google auth enabled).",,,,,,,
"Support Bundle Failure when name starts with ""#""",RTFACT-21643,93864,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,derekp,derekp,28/Mar/20 12:06 AM,11/Feb/21 8:49 AM,18/Feb/21 8:59 AM,,,,,,,,,Support Zone,,,,,,,0,,,,,,"Steps to reproduce:
 # Navigate to Support Zone
 # Create a new Support Bundle
 # Enter a name starting with ""#""

On confirmation, the Support Bundle is created with **a *Failure* status.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc24nk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory stopped showing Chinese characters for NPM package description,RTFACT-21641,93833,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,zhuangxinxin,zhuangxinxin,27/Mar/20 7:36 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.13.1,6.18.1,6.9.0,,,,,,,,,,,,0,,,,,,"There is an urgent demand to show Chinese description for npm packages in JFrog Artifactory Version {color:#373737}6.13.1{color}. 
  
 We deployed some npm packages with Chinese description to an Artifactory local npm repository,but we can't see any Chinese character in Npm Info.And if there's only Chinese characters in the npm description we can not even see a description in Npm Info.Now we are using JFrog Artifactory Version {color:#373737}6.13.1.{color}

{color:#373737} {color}

{color:#373737}This is a regression started since Artifactory 6.9.0. Before that version, Artifactory did show Chinese characters in Npm packages description{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc24ig:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UI does not start - Error in Javascript,RTFACT-21639,93803,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,schaarda,schaarda,26/Mar/20 2:47 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,7.3.2,7.4.1,,,,,,Web UI,,,,,,,0,installation,,,,,"When I start the service I get only the ""pulsating frog"" in the browser. According to the install tutorial right after that the onboarding wizard should start. But it does not.

I checked the logfiles, but could not find any error messages pointing into the right direction.

 

The only clue is an error in the Internet Explorer Console: SCRIPT1002: Syntaxfehler
Datei: chunk-vendors.21570a23.js, Zeile: 1, Spalte: 278339","Windows Server 2016, 64 bit",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc24c0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"28/Sep/20 8:19 AM;goebell;Hi, I am facing same issue. Is there any workaround to get it working with IE?",,,,,,,,,,
Publish build info fails when classifier is more than 64 characters,RTFACT-21638,93801,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,26/Mar/20 1:53 PM,11/Feb/21 8:56 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"If there is a classifier to a dependency, we will add it as ""type"" in the build info, for example:
{code:java}
<dependency> 
<groupId>org.jboss.spec.javax.transaction</groupId> 
<artifactId>jboss-transaction-api_1.2_spec</artifactId> <version>1.1.1.Final</version> 
<classifier>testtesttest</classifier> 
</dependency>
{code}
Adding the dependency to the build will result with the following ""type"":

 
{code:java}
""type"": ""testtesttest-jar"",
{code}
If the classifier is more than 64 chars, we will get a similar error to the error below:
{code:java}
Caused by: org.apache.derby.iapi.error.StandardException: A truncation error was encountered trying to shrink VARCHAR 'lib/org.jboss.spec.javax.transaction.jboss-transaction-api_1&' to length 64.
{code}
Since we cannot control the classifier for the dependencies and transitive dependencies.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc24bk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Issue with discard build and delete artifacts,RTFACT-21635,93765,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,25/Mar/20 11:58 PM,11/Feb/21 9:23 AM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,Build Server Integration,,,,,,,1,,,,,,"With the discard build and delete artifacts option, if the artifact published with the build is deleted beforehand then after the new build, the artifacts from a promoted repository are deleted. 

 

Steps to reproduce :

-Pulled a docker image. Pushed it up to Artifactory with a build object via Jenkins.

-Copied that docker image from one Artifactory repo to another Artifactory repo. This simulates the promotion of the image.

-Delete the docker image associated with the Artifactory build object. This will force the delete operation to find the objects in the different repo that we don’t want to delete from.

-Pull a different docker image and then push it up to Artifactory using the same build name and incremented build number from the initial build, telling it to delete all but the most recent builds and the artifacts associated with those builds.

-The initial copied docker image in the second, unrelated docker repository is deleted.",Jenkins Artifactory plugin version 3.6.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc242w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Mar/20 12:00 AM;prasannan;Scenarios where this causes a problem for the customer:

Scenario 1:
 * Build names and numbers are not necessarily unique in Artifactory. Two different builds with the same build name and number are created, with some of the artifacts being the same (i.e. same hash)
 * One of the builds is promoted. One of the builds ends up being deleted with artifacts included.
 * Depending on the results of the query, the promoted and moved/copied artifacts are deleted, and the build artifacts intended to be deleted persist. Sadness ensues.

Scenario 2:
 * Even using a unique build name and number, a build is promoted copying artifacts.
 * Later on that build is deleted with artifacts included.
 * Only one of the references to the artifacts is deleted, leaving the artifacts in another location in Artifactory. Sadness ensues.",,,,,,,,,,
npm version numbers limited to int32 numeric range,RTFACT-21628,93631,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,aecolley,aecolley,24/Mar/20 4:07 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,NPM,,,,,,,0,,,,,,"Publishing an npm package with version number {{0.0.2072013758}} worked, because 2072013758 < 2147483648. Publishing the same package with version number {{0.0.2972258708}} failed, because 2972258708 >= 2147483648.

The symptoms: the tarball itself is published, but the package metadata ({{/artifactory/api/npm/reponame/packagename}}) are not updated with the new version at all. No error appears in the artifactory server logs.

Why it's a bug and not a limitation: it's established that npm package versions are constrained by the SemVer specification. SemVer permits limits on total version string length, but not on the size of integer values. The grammar in the SemVer spec specifies each component as a sequence of digits.

Suggested fix: use BigDecimal.

(Submitter ref: DOP-17491)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc23co:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
-X PATCH appends changes instead of update what's already defined in YAML,RTFACT-21626,93543,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,willo,willo,23/Mar/20 3:14 PM,11/Feb/21 9:28 AM,18/Feb/21 8:59 AM,,,,,,,,,OAuth,,,,,,,0,artifactory,,,,,"In Unified Platform 7.2.1

 
Customer is using
 
 
[https://www.jfrog.com/confluence/display/JFROG/Artifactory+YAML+Configuration]
 
 
 
and saying that when he runs -X PATCH
 
 
it appends his changes, rather than changing what's already there.
 
 
 
 

 


---

See customer description below. 

 

---

I am developing an Infrastructure as Code (IaC) scenario for installing Artifactory onto our AWS (GovCloud) development environment through a means of Terraform -> cloud-init -> Ansible roles.

 

Part of the process involves running a curl command to PATCH the system configuration thereby setting up the OAuth2 configuration. This patching runs fine and when I GET the system configuration with the similar curl call from the server, I see the configuration in returned XML/JSON. But in the Admin interface, OpenID is blank and thus not configured.

 

I've gone through several iterations of this OpenID config now and several PATCH runs and each run (if there's a unique name given to the OpenID provider) shows up in the config and I'm thinking Artifactory is confused by this and thus refuses to setup/enable OpenID.

----

 


  
 Below is code snippet:

<snip>
        <oauthSettings>
            <enableIntegration>true</enableIntegration>
            <allowUserToAccessProfile>true</allowUserToAccessProfile>
            <persistUsers>false</persistUsers>
            <oauthProvidersSettings>
                <oauthProvidersSettings>
                    <name>LMI-oauth</name>
                    <enabled>true</enabled>
                    <providerType>openid</providerType>
                    <secret>**************** REDACTED ******************************************</secret>
                    <apiUrl>[https://auth.p.external.lmco.com/idp/userinfo.openid]</apiUrl>
                    <authUrl>[https://auth.p.external.lmco.com/as/authorization.oauth2]</authUrl>
                    <tokenUrl>[https://auth.p.external.lmco.com/as/token.oauth2]</tokenUrl>
                </oauthProvidersSettings>
            </oauthProvidersSettings>
        </oauthSettings>
 </snip>

 

 

This is the yaml

security:
   anonAccessEnabled: false
   oauthSettings:
     enableIntegration: true
     persistUsers: false
     allowUserToAccessProfile: true
     oauthProvidersSettings:
       LMI-oauth:
         enabled: true
         providerType: openid
         id: “space-nggopir-nxg-artifactoryssclmcocom”
         apiUrl: [https://auth.p.external.lmco.com/idp/userinfo.openid]
         authUrl: [https://auth.p.external.lmco.com/as/authorization.oauth2]
         basicUrl:
         secret: “******************* REDACTED **********************”
         tokenUrl: [https://auth.p.external.lmco.com/as/token.oauth2]
   httpSsoSettings:
     httpSsoProxied: true
     remoteUserRequestVariable: “remoter”
     allowUserToAccessProfile: true
     noAutoUserCreation: true
  
  
  
  
  
  
  ","CentOS 7.5 on Mill. See sample code snippet from client using OAuth

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc22vc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory volume is getting full. Cleanup does not work as expected,RTFACT-21618,93532,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Henrik,Henrik,23/Mar/20 12:08 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifact Storage,,,,,,,1,,,,,,"The filesystem usage of Artifactory data (/opt/jfrog/artifactory/data/filestore) increases constantly. Cleanup solutions does not work. Cleanup performed on Artifactory:
 * Cleanup unused cached artifacts - cronjob running on daily basis
 * Clean Virtual repositories - cronjob running on daily basis
 * Garbage Collection - performed manually, also there is a cronjob running on a daily basis
 * Prune Unreferenced Data performed

{color:#333333}After performing all of the above cleanup steps, the filesystem usage of Artifactory data did not decrease. Furthermore, data is still being written, consuming all of the disk. After performing all the cleanup steps and the volume usage remained the same, we think that there is a bug in the application.{color}

 

 

 ","In order to keep the application up and functional, we have increased the volume size with 50GB. For now, the usage of the Artifactory data is at 190GB, out of 250GB, with the volume usage being under threshold.

Artifactory version: 6.16.0 Pro rev 61600900
Artifacts size: 54.03 GB
Number of artifacts: 121,134
Binaries size: 186.52 GB
Number of binaries: 319,524
Optimization: 345.24%
Item count: 174,491",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc22t4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
AQL query doesn't distinguish between artifacts with the same checksum but different builds,RTFACT-21604,93472,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,BenYohay,BenYohay,22/Mar/20 12:20 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,AQL,,,,,,,0,,,,,,"I have several artifacts with Artifactory that are identical, and Artifactory optimizes the storage by not storing multiple copies of the same artifact. The artifacts are in the same repository but have different paths, and also are connected to different builds.

The problem occurs when performing a query about items whose builds have a certain property. The result of the query contains artifacts who are not related at all to query asked. After some digging, I've found that the cause is probably the fact that the unrelated artifacts have the same checksum as those that are related to the build.

Here is an example query I used:

 

Setup: Assuming there are two artifacts, ""a.jpg"" and ""b.jpg"" that have the same checksum, but ""a.jpg"" is found in the modules of a build named ""foo"", and ""b.jpg"" is found in the modules of a build named ""bar"".

The query:
items.find(\{""artifact.module.build.name"": ""foo""})
 
Will return both ""a.jpg"" and ""b.jpg"" as the result.
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc22g0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Last Modified and Created date for docker images is in correct:,RTFACT-21603,93470,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,22/Mar/20 11:50 AM,11/Feb/21 9:33 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"The Last Modified and Created date for docker images pulled from docker hub is incorrect.

for example if we pull 

$ docker pull 10.100.102.7:8081/docker-remote/arm64v8/busybox:latest

!image-2020-03-22-13-49-03-263.png|width=784,height=428!

The Last modified date is before the created date.",,,,,,,,,,,,,,,,,,,"22/Mar/20 11:49 AM;ohadl;image-2020-03-22-13-49-03-263.png;https://www.jfrog.com/jira/secure/attachment/40762/image-2020-03-22-13-49-03-263.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc22fk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to upload java keystore under 'Manage Artifactory Signing Keys',RTFACT-21582,93317,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,daren.smith,daren.smith,19/Mar/20 2:12 AM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Web UI,,,,,,,0,,,,,,"When attempting to upload a new signing keystore under the 'Manage Artifactory Signing Keys' web UI, an error is issued about an incorrect keystore password. The steps to recreate this are:
 # Under 'Manage Artifactory Signing Keys', enter a password and the confirmation for 'Change Key Store Password'
 # Click the 'Create' button
 # Under 'Add Key Store', add the .jks for the Key-Store field from the appropriate location on disk
 # Under the 'Key-Store Password' field, use the password created in step 1 and 2.
 # Click the 'Unlock' button
 # Alert dialog stating 'Can't import aliases from key store file ICCodeSignMN2020.jks: Invalid keystore password'.

!image-2020-03-18-20-45-28-846.png!

To validate this issue, the issue was originally encountered trying to use the established keystore password that has been in place for multiple keystore uploads stored in a secure location. Thinking that possibly the keystore password was incorrect, it was updated through the UI. This new password also failed. The password was then removed through the UI and recreated. This password is also incapable of creating a keystore alias. A generic keystore was also created to test any possible issues with the keystore and also failed to create a keystore alias using a valid keystore password. Attempted on both Google Chrome and Firefox browsers.","CentOS 7.6
12 cores
32 GB RAM
2 TB storage",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc21kw:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"28/Mar/20 5:15 AM;daren.smith;It turns out there was something with the storepass/keypass that would artifactory would not allow. I'm not sure if it was a combination of special characters or length of password. I was successfully able to recreate and eliminate it by adding/subtracting/changing characters, but nothing that led me definitively to understand what exactly was causing the issue. I thought initially it was a password length > 16 char, but I was able to successfully upload and unlock an alias with more characters. And I never was able to determine which sequence of special characters _(if that were the issue)_ was causing the problem. Wish I were able to provide greater detail, but I was able to resolve my issue.",,,,,,,,,,
Using join key twice (in file and system.yaml) causes startup failures,RTFACT-21580,93309,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,18/Mar/20 6:58 PM,11/Feb/21 9:37 AM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,Installer,,,,,,,0,,,,,,"If you specify a manual join.key twice, once in the file system and also in the system.yaml, Artifactory fails to start properly.

It looks like there is a race condition when this is done, as different startup services are tasked with encrypting the join key file and system.yaml entry.

Steps to reproduce:
1. Download and install the Debian release of Artifactory 7.2.1[ from our website|https://jfrog.com/download-jfrog-platform/]

2. Supply a plaintext *join.key and master.key* in the /*var/opt/jfrog/artifactory/etc/security* folder using [the openssl command from our wiki|[https://www.jfrog.com/confluence/display/JFROG/Managing+Keys#ManagingKeys-CreatingYourKeys]] 
 
join.key:9f19993f0e5ef89a0439f37a68826b9b
master.key:a0ec154efd57580beeb53816b49ea86d

3. Edit the system.yaml to contain the joinKey argument in an unencrypted line:

    *joinKey: ""9f19993f0e5ef89a0439f37a68826b9b""*

    This is not a standard practice, as it places a duplicate value in a configuration file when there is already a file containing this information on the file system.

4. Attempt to start the system, encounter the 503 errors:
*2020-03-17T21:23:33.532Z[jfrt ] [INFO ] [4badf11bc3b66cee] [a.e.EventsLogCleanUpService:74] [art-exec-2          ] - Cleanup of old events from event log finished*

*2020-03-17T21:23:32.865Z [ERROR] [                ] [                              ] [main                ] - Error: Couldn't get access client instance, Error : [Cluster join: Failed init access client; Error: [JoinKey is not hex format]]*
*at Promise (/opt/jfrog/artifactory/app/frontend/bin/server/dist/webpack:/src/Access/AccessAdminClient.ts:35:22)*
*at process._tickCallback (internal/process/next_tick.js:68:7)*
 
The solution is to only use one place for the join.key, either the file system or the system.yaml.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc21jk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Apr/20 6:06 PM;dmeiser;There is additional nuance to this issue. Specifying JF_SHARED_SECURITY_JOINKEY as an environmental variable will cause this same behavior.

JF_SHARED_SECURITY_JOINKEY will not be used and cause the application to halt when looking for join.key. However, specifying it as an environmental value will cause the same behavior.","14/Apr/20 10:32 PM;joshuah;This can be caused when a path with ""masterKeyFile"" is used in the ""system.yaml"" due to a bug. It can be worked around by commenting this out and using the default location for the master.key",,,,,,,,,
Helm index.yaml invalid after Chart overwrite,RTFACT-21578,93303,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Michał Pasierb,Michał Pasierb,18/Mar/20 4:25 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Artifactory Home,,,,,,,1,,,,,,"After an artifact is overwritten in local helm repository, index.yaml returns previous state. Steps to reproduce:
{noformat}
$ ls
v1  v2
$ f=bug-sim-1.77.95-SNAPSHOT.tgz
$ curl -sS -n $HOSTNAME:8081/artifactory/helm-local/index.yaml
apiVersion: v1
entries: {}
generated: 2020-03-18T16:05:12.570389Z
$ curl -sSn $HOSTNAME:8081/artifactory/helm-local/$f -XPUT -T v2/$f >/dev/null
$ curl -sSn $HOSTNAME:8081/artifactory/helm-local/index.yaml | grep -A 2 keyword
    keywords:
    - bug1
    - bug2
$ curl -sSn $HOSTNAME:8081/artifactory/helm-local/$f -XDELETE
$ curl -sSn $HOSTNAME:8081/artifactory/helm-local/index.yaml
apiVersion: v1
entries: {}
generated: 2020-03-18T16:07:17.448707Z
$ curl -sSn $HOSTNAME:8081/artifactory/helm-local/index.yaml
apiVersion: v1
entries:
  bug-sim:
  - apiVersion: v2
    appVersion: 1.77.95-SNAPSHOT
    created: 2020-03-18T16:07:45.902990Z
    description: A Helm chart for bug-sim
    digest: ac40ed916f4e03b248cf4cca31154a6ce2edf88a2ba899754b8854eae615b368
    name: bug-sim
    urls:
    - local://bug-sim-1.77.95-SNAPSHOT.tgz
    version: 1.77.95-SNAPSHOT
generated: 2020-03-18T16:07:45.903171Z
$ curl -sSn $HOSTNAME:8081/artifactory/helm-local/index.yaml
apiVersion: v1
entries:
  bug-sim:
  - apiVersion: v2
    appVersion: 1.77.95-SNAPSHOT
    created: 2020-03-18T16:07:45.902990Z
    description: A Helm chart for bug-sim
    digest: ac40ed916f4e03b248cf4cca31154a6ce2edf88a2ba899754b8854eae615b368
    name: bug-sim
    urls:
    - local://bug-sim-1.77.95-SNAPSHOT.tgz
    version: 1.77.95-SNAPSHOT
generated: 2020-03-18T16:08:22.998573Z
{noformat}
v1 contains no keywords in the chart, v2 does. v2 gets deployed first to empty repo. The keywords are there. However, if v1 gets deployed first (no keywords as expected) and then v2, I expect the keywords to be in the index.

The ""Chart Info"" can be inspected via GUI and it always shows proper values. No keywords in v1 and the keywords are present in v2.

This can be reverted. If v2 is deployed first and then v1, the keywords stay there but should be absent.

The files are attached to this issue so reproduction is easy to do. It was tested on 6.17.0 and 6.18.0.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc21i8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Mar/20 4:35 PM;Michał Pasierb;I can not add attachments. Steps to create the files:
{noformat}
$ find
.
./v1
./v1/bug-sim
./v1/bug-sim/Chart.yaml
./v2
./v2/bug-sim
./v2/bug-sim/Chart.yaml
$ cat v1/bug-sim/Chart.yaml
apiVersion: v2
appVersion: 1.77.95-SNAPSHOT
description: A Helm chart for bug-sim
name: bug-sim
type: application
version: 1.77.95-SNAPSHOT
$ cat v2/bug-sim/Chart.yaml
apiVersion: v2
appVersion: 1.77.95-SNAPSHOT
description: A Helm chart for bug-sim
name: bug-sim
type: application
keywords:
- bug1
- bug2
version: 1.77.95-SNAPSHOT
$ cd v1/
$ tar cf bug-sim-1.77.95-SNAPSHOT.tgz bug-sim
$ cd ../v2/
$ tar cf bug-sim-1.77.95-SNAPSHOT.tgz bug-sim
$ cd ..
{noformat}","19/Mar/20 8:03 AM;slawekjaranowski;Missing keywords in index.yaml cause us to impossible searching by keywords by
{code:java}
helm search repo <keywords>{code}",,,,,,,,,
Artifactory Docker Registry - docker login failed - (AWS ELB),RTFACT-21576,93289,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valman,valman,18/Mar/20 12:04 PM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,Docker,,,,,,,0,artifactory,Docker,,,,"Hi Team,

we are configuring Artifactory PRO standalone version 6.10.1 as Docker registry but when we try:

{\{docker login -u <user> -p <password> <artifactory-url> }}
 {{Error response from daemon: Get https:}}{{<artifactory-url>}}{{/v2: unknown: Unsupported docker repository request for 'v2'}}

We are trying different configurations also Repository Path but we are unable to make it work.
 The Artifactory Pro instance is installed on an EC2 AWS machine, but not via template and the load balancer is an ELB. There are no proxies or anything configured.

Could you tell us a way to make it work?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc21f4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"31/Mar/20 1:09 PM;krisztian.gacsal;Hey,

 

Not from Jfrog, but might be able to help. I host Artifactory Pro (7.x) on-prem using AWS NLB with TCP_TLS listener in front of EC2 instance where Artifactory is installed with Nginx. I highly recommend to put Nginx in front of Artifactory.

I have the following working Nginx configuration (based on the docs provided by Jfrog for Artifactory) that supports both subdomain and resource path based routing.

 

map $repo $rewrite_path {

{{  default /artifactory/api/docker/$repo/$1/$2;}}
{{  """" /$1/$2;}}
{{}}}

{{server {}}
{{  server_name ~(?<repo>.+)\.artifactory.example.net artifactory.example.net;}}
{{  listen 443 proxy_protocol default_server;}}{{# Global parameters}}
{{  if ($http_x_forwarded_proto = '') {}}
{{    set $http_x_forwarded_proto https;}}
{{  }}}
{{  rewrite ^/$ /ui/ redirect;}}
{{  rewrite ^/ui$ /ui/ redirect;}}
{{  rewrite ^/(v1|v2)/(.*) $rewrite_path;}}
{{  chunked_transfer_encoding on;}}
{{  client_max_body_size 0;}}
{{  proxy_request_buffering off;}}
{{  proxy_http_version 1.1;}}

{{  location / {}}
{{    proxy_read_timeout 2400s;}}
{{    proxy_pass_header Server;}}
{{    proxy_cookie_path ~*^/.* /;}}
{{    proxy_pass http://127.0.0.1:8082;}}
{{    proxy_next_upstream error timeout non_idempotent;}}
{{    proxy_next_upstream_tries 1;}}
{{    proxy_set_header X-JFrog-Override-Base-Url $http_x_forwarded_proto://$host:$server_port;}}
{{    proxy_set_header X-Forwarded-Port $server_port;}}
{{    proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;}}
{{    proxy_set_header Host $http_host;}}
{{    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;}}
{{    location ~ ^/artifactory/ {}}
{{      proxy_pass http://127.0.0.1:8081;}}
{{    }}}

{{  }}}

{{}}}

 ","31/Mar/20 1:10 PM;krisztian.gacsal;Hmm. Editor messed up the format...","31/Mar/20 1:13 PM;krisztian.gacsal;{code:java}
map $repo $rewrite_path {
  default /artifactory/api/docker/$repo/$1/$2;
  """" /$1/$2;
}

server {
  server_name ~(?<repo>.+)\.artifactory.example.net artifactory.example.net;
  listen 443 proxy_protocol default_server;

  if ($http_x_forwarded_proto = '') {
    set $http_x_forwarded_proto https;
  }
  rewrite ^/$ /ui/ redirect;
  rewrite ^/ui$ /ui/ redirect;
  rewrite ^/(v1|v2)/(.*) $rewrite_path;
  chunked_transfer_encoding on;
  client_max_body_size 0;
  proxy_request_buffering off;
  proxy_http_version 1.1;

  location / {
    proxy_read_timeout 2400s;
    proxy_pass_header Server;
    proxy_cookie_path ~*^/.* /;
    proxy_pass http://127.0.0.1:8082;
    proxy_next_upstream error timeout non_idempotent;
    proxy_next_upstream_tries 1;
    proxy_set_header X-JFrog-Override-Base-Url $http_x_forwarded_proto://$host:$server_port;
    proxy_set_header X-Forwarded-Port $server_port;
    proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;
    proxy_set_header Host $http_host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    location ~ ^/artifactory/ {
      proxy_pass http://127.0.0.1:8081;
    }
  }
}
{code}","07/Apr/20 9:25 AM;valman;Hi @[~krisztian.gacsal] 

thanks for your support, but at this moment we don't have an apache or ngnix  between the ELB load balancer and artifactory. Is it necessary to add it or some settings could be changed?

Thanks","15/Aug/20 8:55 AM;eselvam;we use kubernetes to port artifactory.  It works fine for other repo except docker.  I also facing same issue.  Not sure why we need reverse proxy?",,,,,,
GET /api/storage/{repoKey}/{item-path}?stats returns two set of numbers. ,RTFACT-21564,93226,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stanleyf,stanleyf,17/Mar/20 7:54 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,REST API,,,,,,,0,,,,,,"On Production Env Artifactory SAAS

URL: [https://gocenter.jfrog.io/gocenter/api/storage/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod&#63;stats|https://gocenter.jfrog.io/gocenter/api/storage/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod?stats]

GoCenter uses the above API to get the download count for each go modules on a weekly basis.  The API is returning two different set of results.  

*Expected Result*: the ?stats returned should be the same. 

*Actual:* Results are different depending on the Artifactory Node

*Impact*: Gocenter Module detail graph of weekly downloads.  

*Question*: Is the download count in centralized DB? and shouldn't the API return consistent results. 

 

*First Time:* 88442 is the correct count and matches with the UI

curl -4i [https://gocenter.jfrog.io/gocenter/api/storage/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod&#63;stats|https://gocenter.jfrog.io/gocenter/api/storage/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod?stats]
 HTTP/1.1 200 OK
 Date: Tue, 17 Mar 2020 19:45:21 GMT
 Content-Type: application/vnd.org.jfrog.artifactory.storage.StatsInfo+json
 Transfer-Encoding: chunked
 Connection: keep-alive
 Server: Artifactory/6.11.3
 X-Artifactory-Id: *dedicated-gocentral-2b-usw1-gocenter*
 X-Artifactory-Node-Id: *dedicated-gocentral-2c-usw1*
 X-Node: *nginx-shared1c.gcprod-usw1*

{ ""uri"" : ""https://gocenter.jfrog.io/gocenter/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod"", ""downloadCount"" : *88442*, ""lastDownloaded"" : 1584473532494, ""lastDownloadedBy"" : ""caddyshack-prod-build"", ""remoteDownloadCount"" : 0, ""remoteLastDownloaded"" : 0 }

*Second Time:* 

curl -4i [https://gocenter.jfrog.io/gocenter/api/storage/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod&#63;stats|https://gocenter.jfrog.io/gocenter/api/storage/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod?stats]
 HTTP/1.1 200 OK
 Date: Tue, 17 Mar 2020 19:45:59 GMT
 Content-Type: application/vnd.org.jfrog.artifactory.storage.StatsInfo+json
 Transfer-Encoding: chunked
 Connection: keep-alive
 Server: Artifactory/6.11.3
 X-Artifactory-Id: *gocenter-artifactory-primary-0-gocenter*
 X-Artifactory-Node-Id: *gocenter-primary*
 X-Node: *nginx-shared2b.gcprod-usw1*

{ ""uri"" : ""https://gocenter.jfrog.io/gocenter/gocenter-prod/github.com/stretchr/testify/@v/v1.2.0.mod"", ""downloadCount"" : *72296,* ""lastDownloaded"" : 1584473609073, ""lastDownloadedBy"" : ""caddyshack-prod-build"", ""remoteDownloadCount"" : 0, ""remoteLastDownloaded"" : 0 }",See description - production env. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc2114:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Pypi local wheels stored under ""packages"" prefix will fail to download",RTFACT-21562,93189,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nadavy,nadavy,17/Mar/20 11:44 AM,11/Feb/21 9:45 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
 * upload any wheel (like frog-bar-0.1.whl) to packages/\{path}, for example packages/frog-bar/0.1/\{files}
 * install using pip, like:
 pip3 install -i [http://admin:password@artifactory/artifactory/api/pypi/pypi/simple] --trusted-host artifactory  frog-bar --no-cache-dir --force-reinstall

installation will fail.

move files to frog-bar/0.1 (instead of packages) or (packges-x/frog-bar/0.1/, or any)
 run same pip command, and now it works.

the above is also could act as a workaround for now.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc20u8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Checksum deploy database query performance degradation ,RTFACT-21551,93108,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,16/Mar/20 11:16 AM,11/Feb/21 9:48 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"Currently the below query is used when checksum deploy is applied:

 
{code:java}
select distinct  n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName,n.created as itemCreated,n.modified as itemModified,n.updated as itemUpdated,n.created_by as itemCreatedBy,n.modified_by as itemModifiedBy,n.node_type as itemType,n.bin_length as itemSize,n.node_id as itemId,n.depth as itemDepth,n.sha1_actual as itemActualSha1,n.sha1_original as itemOriginalSha1,n.md5_actual as itemActualMd5,n.md5_original as itemOriginalMd5,n.sha256 as itemSha2  from

public.nodes n where ((( n.sha256 LIKE 'e163d85a48c6c9c3a07807acbe1021a1d6bc542946d6010b0f40291a10e6768d') and n.node_type = 0) and (n.repo != 'auto-trashcan')) and (n.repo != 'esg-pipeline-scratch')  limit 10;
{code}
We should remove the distinct in the above query because only one table is used and the distinct is not only irrelevant but also degrade performance.

Also we should change the “Like” to equals, as we are not using any wildcards, this is most probably autofixed by the database itself but should be updated along the way. 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc20ds:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory scales poorly with DerbyDB and others,RTFACT-21530,92972,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,monsdar,monsdar,13/Mar/20 9:23 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.17.0,7.2.1,,,,,,,,,,,,,0,,,,,,"We're using Artifactory Pro and C++ to mainly store Conan packages. We have around 15.000 Conan packages on the server, which translates to ~300.000 artifacts in ~300GB of data.

We found that using DerbyDB in particular, but also Postgres 9 and 12, results in very poor performance when the number of artifacts grows. Only with MariaDB seems not to be affected by this. Please see this graph for details: [https://imgur.com/nrp79lr]

The graph shows download-performance in relation to the number of packages stored on Artifactory. All packages were empty Conan packages, just a small recipe, no data. So this shows the total overhead you get with different DB-types.

We also found that it isn't enough to remove packages from a remote to improve performance. It is necessary to empty the trash-can as well. Even then it takes some time for Artifactory to do re-indexing. Overall it could take several hours/days for Arti to get back to a better performance after removing packages from a remote. ",Arti runs on a virtual server with 16 CPUs and 32GB RAM. It runs in a docker container and is configured like described in the JFrog wiki.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1zko:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Mar/20 9:25 AM;monsdar;As Arti comes with DerbyDB by default this could result in a very bad first experience. It required a lot of testing and multiple contacts with JFrog support to find a viable solution with MariaDB. This is a serious issue for any company who wants to work with Artifactory for the long-term and should have a higher visibility.","13/Mar/20 9:26 AM;monsdar;This has also been discussed in detail in the following issue within the Conan bugtracker: [https://github.com/conan-io/conan/issues/4404]",,,,,,,,,
404 error on Go mod install,RTFACT-21528,92874,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Cyrilc,Cyrilc,12/Mar/20 3:47 PM,05/Jan/21 5:11 PM,18/Feb/21 8:59 AM,,7.3.1,,,,,,,Go,,,,,,,0,,,,,,"Trying to install {{github.com/gobuffalo/packr/v2}} from entplus.jfrog.io fails:
{code}
$ go mod init foo
go: creating new go.mod: module foo
$ sudo rm -rf ~/go/bin ~/go/pkg
Password:
$ go clean -cache -modcache
$ jfrog rt go-config
Resolve dependencies from Artifactory (y/n) [y]? y
Set Artifactory server ID (press Tab for options) [repo21-cyrilc]:
Set repository for dependencies resolution (press Tab for options): router-go-virtual
Deploy project artifacts to Artifactory (y/n) [y]? n
[Info] go build config successfully created.
$ GOPROXY=""https://cyrilc:...@entplus.jfrog.io/artifactory/api/go/router-go-virtual"" GOPRIVATE=jfrog.com GONOPROXY=none jfrog rt go install github.com/gobuffalo/packr/v2
[Info] Using go: go version go1.13.8 darwin/amd64

go: finding github.com/gobuffalo/packr v2.7.1+incompatible
go: finding github.com/gobuffalo/packr/v2 v2.7.1
go: downloading github.com/gobuffalo/packr v2.7.1+incompatible
go: downloading github.com/gobuffalo/packr/v2 v2.7.1
verifying github.com/gobuffalo/packr@v2.7.1+incompatible: github.com/gobuffalo/packr@v2.7.1+incompatible: reading https://***.***@entplus.jfrog.io/artifactory/api/go/router-go-virtual/sumdb/sum.golang.org/lookup/github.com/gobuffalo/packr@v2.7.1+incompatible: 404 Not Found
exit status 1
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1zgg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Mar/20 8:20 AM;Cyrilc;Same happens with {{go}} command (i.e. without JFrog CLI).","13/Mar/20 9:16 AM;Cyrilc;Maybe a misunderstanding, because the following is working:
{code}
go install github.com/gobuffalo/packr/v2/packr2
{code}",,,,,,,,,
Go mod checksum issue,RTFACT-21527,92847,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Cyrilc,Cyrilc,12/Mar/20 1:31 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.3.1,,,,,,,Go,,,,,,,1,,,,,,"I have a Go module checksum issue with entplus.jfrog.io. (version 7.3.1):
After cleaning go caches ({{go clean -cache -modcache}} and {{sudo rm -rf ~/go/bin ~/go/pkg}}) and local {{go.sum}}, I do {{GOPROXY=""https://cyrilc:...@entplus.jfrog.io/artifactory/api/go/router-go-virtual"" GOPRIVATE=jfrog.com GONOPROXY=none go get github.com/modern-go/reflect2@v1.0.1}} which fails with:
{code}
verifying github.com/modern-go/reflect2@v1.0.1/go.mod: checksum mismatch
	downloaded: h1:lw/sLB2qPDGLIvfkqcTJYgOd22dzvU7zXgt8DZ18OmI=
	sum.golang.org: h1:bx2lNnkwVCuqBIxFjflWJWanXIb3RllmbCylyMrvgv0=
SECURITY ERROR
This download does NOT match the one reported by the checksum server.
The bits may have been replaced on the origin server, or an attacker may
have intercepted the download attempt.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1zaw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Mar/20 9:40 AM;Cyrilc;Same issue with:
{code}
go: finding github.com/client9/misspell v0.3.4
go: downloading github.com/client9/misspell v0.3.4
go: extracting github.com/client9/misspell v0.3.4
verifying github.com/client9/misspell@v0.3.4/go.mod: checksum mismatch
	downloaded: h1:3fBvMX1hg2bkBBVlgkHiD00A6h+Vf+zfIGdFAQSJVW8=
	sum.golang.org: h1:qj6jICC3Q7zFZvVWo7KLAzC3yx5G7kyvSDkc90ppPyw=

SECURITY ERROR
This download does NOT match the one reported by the checksum server.
The bits may have been replaced on the origin server, or an attacker may
have intercepted the download attempt.
{code}","14/Apr/20 7:51 AM;gryaznov;May be duplicate - RTFACT-21812","14/Apr/20 1:35 PM;Cyrilc;This problem did not show up since the gocenter cache issue has been fixed. This ticket can probably be closed.",,,,,,,,
Distribution -- Received -- Can't delete a release bundle version,RTFACT-21522,92773,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,amirna,amirna,11/Mar/20 4:25 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When a non-admin (with delete permissions) user tries to delete a release bundle version from the ""Received"" tab, the response is 403.

Artifactory was running in a docker container.

artifactory-request.log:
{code:java}
2020-03-12T08:25:38.694Z|b703ef88d8e09cf|10.20.20.142|test|DELETE|/api/bundles/target/aaaaaaa/1|403|2|0|2|Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.130 Safari/537.36{code}","7.4.0-m034
  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1yvk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Incorrect PyPi info extracted for ""pex"" whl files",RTFACT-21498,92601,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,borgstrom,borgstrom,09/Mar/20 11:27 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.7.8,,,,,,,PyPI,,,,,,,0,,,,,,"If you're using a local PyPi repository (not a remote) and you upload any version of ""pex"" after 2.1.0 (i.e. [https://files.pythonhosted.org/packages/84/e0/56188122f7e133d0876f6caf9d63e4ddd1762793cefa846402023bf05d77/pex-2.1.5-py2.py3-none-any.whl)] then it will be incorrectly indexed as  ""packaging"" instead of ""pex"".

For example: [https://imgur.com/zufDCLm]

We believe this happened after the pex project made the following change: [https://github.com/pantsbuild/pex/pull/831] ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1xts:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Configure daily full backups to S3 bucket,RTFACT-21497,92591,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Sreedhar.Kalidindi@servicemax.com,Sreedhar.Kalidindi@servicemax.com,09/Mar/20 11:05 PM,20/Jan/21 1:15 AM,18/Feb/21 8:59 AM,,5.11.8,,,,,,,Artifact Storage,,,,,,,2,,,,,,"Hi

     We have artifactory in AWS cloud . We are planing to backup artifcatory repositories on to S3 bucket  .  

 
 # Installed  S3FS on Artifactory node and mounted S3 bucket on to a /backup folder  and from backup configuration , scheduled the job to backup repos on to S3 .  We observed that its very slow .  Do you recommend any backup Configuration for repo backups on to S3 ?
 # Can we do AWS cli and sync entire repo folder on to S3 bucket ?  . Will my repos work when I restore the data from S3 bucket ?
 #",Artifactory configured in AWS environment . looking for backup configurations.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1xrc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Jul/20 4:21 PM;bilel.yahia;We also need this as part of our Pro X license.

Is there any plans to implement such a feature?

what are your recommendations?",,,,,,,,,,
Cascaded python remote repo returns 404 for uncached packages,RTFACT-21491,92524,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mvogt,mvogt,09/Mar/20 2:51 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.18.0,7.2.1,,,,,,PyPI,Remote Repository ,,,,,,0,,,,,,"When configuring two Artifactory instances (pip -> art2 -> art1 -> internet) in a chain to serve pypi packages via remote repo, art2 only serves packages to pip that have been cached at art1 already. Uncached artefacts return 404. The expected behaviour would be that uncached artefacts are fetched from the internet.

In practical terms this means, starting with empty caches everywhere, the following call fails with 404.
{code:java}
$ pip download --no-deps --no-cache foo -i http://art2/...{code}
But the following sequence succeeds.
{code:java}
# triggers caching in art1
$ pip download --no-deps --no-cache foo -i http://art1/...

$ rm foo*.tar.gz
$ pip download --no-deps --no-cache foo -i http://art2/... {code}
Fetching Metadata for packages works (pip always can determine the list of available versions for a package), but pip then fails to download the actual package file.

I already investigated a bit by examining the HTTP-requests.

When pip directly talks to Artifactory (pip -> art1 -> internet), the package URLs announced by Artifactory through the package metadata are of the form
{code:java}
http://<BASE-URL>/api/pypi/<REPO>/packages/packages/<HASH-BASED-PACKAGE-PATH>{code}
Pip then requests exactly that URL, which works as expected. If the package is missing, the request triggers an upstream lookup and initiates downloading from upstream.

However, when one Artifactory instance talks to another upstream Artifactory  instance (pip -> art2 -> art1 -> internet), the request art2 -> art1 is:
{code:java}
http://<BASE-URL>/api/pypi/<REPO>/packages/<HASH-BASED-PACKAGE-PATH>{code}
Note that there only is one ""packages"" in the URL.

This URL does not trigger any further upstream lookup and therefore causes a 404 downstream for uncached artefacts.

The funny part is, once an artefact is cached, any URL works, regardless of how many ""packages/..."" levels it contains. This explains why uncached artefacts are hit by that issue only.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1xf4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
JFrog CLI uploading with wrong module name,RTFACT-21486,92414,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,DJThornton,DJThornton,07/Mar/20 9:07 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,CLI,,,,,,,0,,,,,,"I've been testing this for days now and I can't figure out how to fix/resolve this situation.

One of my developer's NPM jobs calls for a dependency ""cypress:4.0.1"". Every time this dependency is installed it overrides the package.json name-version and get's deployed as said project. For instance, I have a SIMPLE hello-world job I use for test. As soon as I put this dependency into it's package.json this happened: 
[Info] [Thread 2] Uploading artifact: /var/lib/jenkins/workspace/kbench-CICD_hello-npm_develop/nodejs-hello-world-1.0.0.tgz
[Debug] Sending HTTP PUT request to: 
https://<server>/artifactory/npm/+*cypress/-/cypress-4.1.0.tgz*+;build.name=Sandbox%3A%3Aworkbench%3A%3ACICD%3A%3Ahello-npm%3A%3Adevelop;build.number=86;build.timestamp=1583611046597
 [Debug] [Thread 2]  Artifactory response: 201 Created 
[Debug] Uploaded 1 artifacts.
[Debug] Successfully deleted the created npm package: /var/lib/jenkins/workspace/kbench-CICD_hello-npm_develop/nodejs-hello-world-1.0.0.tgz
[Debug] Saving npm package artifact build info data.
[Debug] Creating temp build file at: /var/lib/jenkins/workspace/kbench-CICD_hello-npm_develop/.jfrog/projects/tmp/jfrog/builds/RGV2T3BzOjpTYW5kYm94Ojp3b3JrYmVuY2gtREo6OkNJQ0Q6OmhlbGxvLW5wbTo6ZGV2ZWxvcF84Ng==/partials
[Info] npm publish finished successfully.[Pipeline] echoPack n Publish Artifacts: nodejs-hello-world-1.0.0.tgz
Note: The tarball name given to the artifact: *cypress-4.1.0.tgz* and where it puts it: *npm/cypress/-/cypress-4.1.0.tgz*.

This is an issue as now whenever that job is run again it's pulling cypress:4.0.1 from the artifactory's local copy which is actually the previous build in ""disguise"". 

It doesn't matter if ""cypress:4.0.1"" is installed as a normal dependency or a devDependency, it overrides the name. It doesn't matter if I try different versions.

I'd also like to point out that this is not an issue when running *""npm pack"" manually.*  
+ npm pack[Pipeline] echonodejs-hello-world-1.0.0.tgz
Thoughts?

 ","Jenkins: 2.203

Docker Container: node:12

JFrog-CLI: 1.34.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1wr4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Mar/20 4:48 AM;DJThornton;Ok, so I dug through the code for jfrog-cli, added a bunch of debugs to read out sections and came across this...
String Has Suffix 'package.json':  package/.cache/Cypress/4.1.0/Cypress/resources/app/package.json
This ties to this [function|[https://github.com/jfrog/jfrog-cli/blob/1c26ebbd4474f2eaea4999ba7aab9e72683067f9/artifactory/commands/npm/publish.go#L281]]. Note on line 302 this condition 
{code:java}
if strings.HasSuffix(hdr.Name, ""package.json"") 
{code}
will match the first byte returned matching that string. In my circumstance cypress creates a .cache which happens to contain its own ""package.json"" as shown above. 

After changing this to

 
{code:java}
if strings.HasSuffix(hdr.Name, ""package/package.json"")
{code}
 

 It skipped over the .cache in favor of the primary package.json. Does anyone see any reason why this shouldn't be changed?

Would it break some other function that you can think of?",,,,,,,,,,
"Docker Push ""manifest invalid""",RTFACT-21483,92392,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bwinokur,bwinokur,06/Mar/20 3:04 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,Docker Image,permissions,,,,,,0,docker,permissions,,,,"It is not currently possible to limit pushes to a docker registry based on the tags on the image. I have 2 permission targets applied to a docker registry. 1 target gives a user read, and deploy permissions. This first permission is applied to ""***/*""* items. The other target gives users delete/overwrite permissions and is limited to only ""**/*latest"" items. This should allow the user to version release their docker images 1.0, 1.1, 2.0 - and those version tags should be immutable. But, the ""latest"" version of the docker image needs to be updatable. 

Through the GUI, the effective permissions are showing up correctly (see below images)

!image-2020-03-06-09-55-35-472.png!

!image-2020-03-06-09-56-15-014.png!

 

But, when pushing a new ""latest"" tagged image, I get ""manifest invalid: manifest invalid""

!image-2020-03-06-10-01-54-058.png!

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1wlk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
GET /api/repositories returns HTTP URL when only HTTPS is set,RTFACT-21481,92388,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,obogdan,obogdan,06/Mar/20 10:45 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"In the Artifactory *HTTP settings* it is set to only use HTTPS (checkbox for HTTP is not set).

However GET /api/repositories API call returns for all repositories the URL to be only HTTP.

 

The load balancer in front of Artifactory handles the certificates and then comunicates with Artifactory via HTTP.","Artifactory Docker container running in AWS ECS infrastructure, with no Nginx, but an ALB as a load balancer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1wko:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker-based upgrade from 6.17.0 to 7.2.1 does not apply migrations | Documentation is missing. ",RTFACT-21478,92342,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rzo1,rzo1,05/Mar/20 4:16 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.17.0,7.2.1,,,,,,,,,,,,,6,,,,,,"Hi,

we have JFrog OSS artifactory running on version 6.17.0.

It is installed with the instructions for *docker* as described [https://www.jfrog.com/confluence/display/RTF6X/Installing+with+Docker#InstallingwithDocker-ArtifactoryonDocker]. Upgrading this installation in 6.x.x was pretty straight forward.

However, while upgrading to 7.2.1, we are facing severe issues with the upgrade procedere as it seems, that no migrations are applied by the container image leading to a broken installation.

Sadly, there is no documentation available on [https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-UpgradingfromVersion6.10.xto7.x] , which explains how to proceed with the upgrade from 6.x.x. to 7.x.x on a docker-based installation.

The link for ""docker"" is unavailable: [https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-DockerUpgrade]

My questions are:
 * How can we perform a docker-based upgrade of our artifactory installation?
 * Can you provide the necessary steps as the documentation on the upgrade procedere is missing?

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1wag:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Mar/20 4:48 PM;alimh;Hi,

we exactly have this issue, but happened in a different way: after upgrade Artifactory to version 7.2.1 from 6.12.0.

we got this error:
```
2020-03-10T15:45:07.386Z [jfac ] [WARN ] [8dcf1dc7e9f98979] [o.j.c.ExecutionUtils:141      ] [pool-5-thread-2     ] - Retry 350 Elapsed 2.91 minutes failed: Registration with router on URL http://localhost:8046 failed with error: UNAVAILABLE: io exception. Trying again
```","10/Mar/20 4:51 PM;alimh;as @Richard Zowalla  said I can't find any reasonable documentation for this issue.","28/Mar/20 9:16 PM;tha@luminanetworks.com;My org is in the same situation. We are running Artifactory via Docker and there appears to be no documented upgrade paths for Docker users.

Is JFrog no longer supporting Docker deployments outside of Docker Compose?

 ","02/Apr/20 3:07 PM;jort.koopmans;Similar problem here. I'm working with Artifactory Pro.

Previously (coming from years ago), the best way to deploy Artifactory was integrating it into our own docker-compose files. Now I see that 7.x comes with a substantial amount of (complex) shell scripts to generate its own sets of compose files.

However, coming from any docker installation; how should we upgrade to 7.x? As @Thanh Ha asked; is just using the container still going to be supported?

Specifically, I'm using the internal DerbyDB and run another proxy in front of it (traefik).
Some guidelines on how to perform this migration would be helpful. ","09/Apr/20 7:53 PM;vern1977;I'm running into a similar issue. I currently have Artifactory 6.17 and postgreSQL 9.6.11 that are ran using a docker-compose file. Each services (Artifactory & postgreSQL) is using a docker volume that was created externally and reside in /var/lib/docker/volumes/artifactory/_data and /var/lib/docker/volumes/postgresql/_data and mounted to the proper data directories with in each container.

I followed the instructions on [https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-DockerUpgrade] on how to upgrade from Artifactory 6.17 to latest Artifactory.
 # I stopped the existing artifactory and postgresql containers.
 # Then rm the existing artifactory and postgres container.
 # Pulled down jfrog-artifactory-pro-7.3.2-compose.tar.gz and extracted it
 # Run ./config.sh
This is where things get confusing and excuse me because I'm still a noob to this process if these are dumb points, the instructions at this point lack any direction. 

Am I suppose to change the ROOT_DATA_DIR to the docker volume where my Artifactory 6.17 was previously using as a volume? But if I do that, how do I get postgresql 9.6.11 to run again since the ROOT_DATA_DIR for that is in a slightly different path inside /var/lib/docker/

Am i supposed to select installing postgres again since the directions had me remove the previous container?

The config.sh file is interactive but lacks any help with choosing the right path. I'm not sure whatI should setting the ROOT_DATA_DIR to.

I've tried several attempts at upgrading with tweaks to the .env ROOT_DATA_DIR variable, modifying the docker-compose-postgres.yaml in the templates directory to be similar to the one i use to docker-compose artifactory6.17 and postgres9.6.11, nothing has worked. Everytme I've tried docker-compose up with my latest attempts at modifiying the config.sh process I can't get artifactory up and running.","23/Apr/20 11:29 AM;jort.koopmans;Hi @Kevin, meanwhile Jfrog team added a section on pure docker upgrade, that might be of help; [https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-DockerUpgradedockerupgr7]

Note I have not been able to find time/planning to execute this myself yet.","23/Apr/20 9:45 PM;jort.koopmans;Sorry @Kevin, this is the right section (almost the same, but previous one was upgrading from v7 instead of v6);

[https://www.jfrog.com/confluence/display/JFROG/Upgrading+Artifactory#UpgradingArtifactory-dockerupgr6]

 

I have tried upgrading, but it still does not work for me. I think the problem is licensing;

Be careful; the attempted upgrade seems to partially upgrade your data and will not allow rolling back to work OK with a v6 image!! I had to recover from backup!!!","27/Apr/20 7:29 AM;rzo1;I have tried upgrading acocording to the documentation for the OSS version (from  6.17.0 OSS version). It is *still not* working: No upgrade steps are applied, config is not migrated. This is a *show stopper.*

 

Besides, a slight note: a Apache2 reverse proxy has to be changed according to [https://www.jfrog.com/confluence/display/JFROG/Configuring+Apache] -> would have been nice, if there would be a link in the upgrading documentation...","27/Apr/20 2:00 PM;rzo1;I gave it another try by using


{{/usr/bin/docker run -e ENABLE_MIGRATION=y --name artifactory -d -p 8081:8081 -p 8082:8082 -v <data path on host system>-:/var/opt/jfrog/artifactory docker.bintray.io/jfrog/artifactory-oss:7.4.1}}

The migration were then applied on my previously running 6.17.0 instance. After I adjustet our reverse proxy, the system seems to work. I will doing some tests now, but - so far - looks ok.","09/May/20 2:10 PM;tha@luminanetworks.com;@rzo1 what adjustments did you have to make to your reverse proxy? is that something others should be aware of before performing this upgrade as well?","11/May/20 6:52 AM;rzo1;Basically, I updated the old config based on this article [https://www.jfrog.com/confluence/display/JFROG/Configuring+Apache]

Reason: With 7.x.x., we have one more open port , which needs to be proxied...

 "
Cocoapod repository does not support the conversion of non-github source URL,RTFACT-21472,92299,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jackchung,jackchung,05/Mar/20 10:57 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.1.6,,,,,,,Artifactory Home,CocoaPods,User Plugins,,,,,0,plugin,,,,,"As shown in below snippet, we found that the cocoapods-art user plugin does not support the conversion of non-github source URL (i.e. the user plugin does not convert the source url to Artifactory repo URL if the the source url does not end with .git).

 
{code:java}
// TensorFlowLite.podspec.json

""source"":{
  ""http"": ""https://dl.google.com/dl/cpdc/a3cc8a8fb2aec8f6/TensorFlowLite-1.33.1.tar.gz""
},

{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1w0w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
404 errors while resolving the package from https://pypi.hilster.de,RTFACT-21466,92277,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,divijak,divijak,05/Mar/20 12:13 AM,11/Feb/21 10:10 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"Reproduction steps:
Create a remote repository in Artifactory(6.17.0) proxying https://pypi.hilster.de

Test downloading  the package from the browser: http://ArtIP:8081/artifactory/api/pypi/pypi-remote-repo/simple/htf-demo/ 
This will provide a download link with the wrong format:
http://ArtIP:8081/artifactory/api/pypi/pypi-remote-repo/simple/htf-demo/packages/htf_demo-20190207-py3-none-any.whl#md5=31253f03c7cff2b59bdd0b939c083e8c

Comparing with the default pypi.org endpoint, it looks to be working:
http://ArtIP:8081/artifactory/api/pypi/pypi-remote-repo/packages/packages/c9/c9/6122a974f5b611b16396c918722ea75945db7dcd3069c477a7c608a405a0/example-0.1.0.tar.gz 

This will break pip install commands against this repository:

pip install test1

Looking in indexes: https://<ARTIFACTORY_URL>/artifactory/api/pypi/pypiservertest/simple
Collecting test1
 ERROR: HTTP error 404 while getting https://<ARTIFACTORY_URL>/artifactory/api/pypi/pypiservertest/simple/test1/packages/test1-0.18.0-cp36-cp36m-manylinux1_x86_64.whl#md5=7b355098c732adad26b2c91d5f9ce88a (from https://<ARTIFACTORY_URL>/artifactory/api/pypi/pypiservertest/simple/test1/)
  ERROR: Could not install requirement test1 from https://<ARTIFACTORY_URL>/artifactory/api/pypi/pypiservertest/simple/test1/packages/test1-0.18.0-cp36-cp36m-manylinux1_x86_64.whl#md5=7b355098c732adad26b2c91d5f9ce88a because of error 404 Client Error: Not Found for url: https://<ARTIFACTORY_URL>/artifactory/api/pypi/pypiservertest/simple/test1/packages/test1-0.18.0-cp36-cp36m-manylinux1_x86_64.whl

It looks like when pointing to the pypi.org It provides the complete path of the package, whereas pointing to https://pypi.hilster.de doesn’t give the complete path. Please see the attached screenshots.

This was working on Artifactory 6.10.0.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1vw0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"npm publish sets ""dist.tarball"" to the wrong value",RTFACT-21464,92273,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dean-eero,dean-eero,04/Mar/20 8:11 PM,05/Jan/21 11:20 AM,18/Feb/21 8:59 AM,,7.0.0,,,,,,,,,,,,,,0,,,,,,"h3. Steps To Reproduce:
 # Starting with an npm package, create a {{.npmrc}} file in the root and populate it with the following lines
{code:none}
_auth = ${ARTIFACTORY_WRITE_AUTH_TOKEN}
email = ${ARTIFACTORY_WRITE_AUTH_EMAIL}
always-auth = true
{code}

 # In npm package's {{package.json}}, add these lines to the top-level hierarchy
{code:java}
{
...
  ""publishConfig"": {
    ""registry"":""<url-to-Artifactory-repo>""
  }
...
}
{code}

 # Build npm package
 # Run {{npm publish}}

h3. Expected:

I am able to npm install the dependency from other npm projects, given the right authentication details.
h3. Actual:

I am unable to npm install the dependency from other npm projects. I get the following error:
{code:none}
npm ERR! code E404
npm ERR! 404 Not Found - GET https://eero.jfrog.io/eero/api/npm/npm//npm/@eero/react-d3-graph/-/@eero/react-d3-graph-2.4.5.tgz
{code}
h3. Details:
 * On publishing, it appears that the package.json in the corresponding {{.npm}} directory prefixes to {{dist.tarball}} the hostname of the Artifactory API (in my case, {{[https://eero.jfrog.io/eero/api/npm/npm/]}}). This can be seen here:

{code:java}
{
 ""name"" : ""@eero/react-d3-graph"",
 ""description"" : ""React component to build interactive and configurable graphs with d3 effortlessly"",
 ""version"" : ""2.4.6-rc.1"",
 ""author"" : ""Dean Mercado"",
 ""repository"" : {
 ""type"" : ""git"",
 ""url"" : ""https://github.com/eero-inc/react-d3-graph.git""
 },
 ""engines"" : {
 ""node"" : "">=10.15.1""
 },
 ""main"" : ""lib/index.js"",
 ""dist"" : {
 ""tarball"" : ""https://eero.jfrog.io/api/npm//npm/@eero/react-d3-graph/-/@eero/react-d3-graph-2.4.6-rc.1.tgz"",
 ""shasum"" : ""<shasum>""
 },
 ""dependencies"" : {
 ""react-tooltip"" : ""^3.11.1""
 },
 ""devDependencies"" : {
 ""@babel/cli"" : ""7.6.0"",
 ""@babel/core"" : ""7.6.0"",
 ""@babel/plugin-proposal-class-properties"" : ""7.5.5"",
 ""@babel/plugin-proposal-optional-chaining"" : ""7.6.0"",
 ""@babel/preset-env"" : ""7.6.0"",
 ""@babel/preset-react"" : ""7.0.0"",
 ""@cypress/webpack-preprocessor"" : ""4.1.0"",
 ""babel-loader"" : ""8.0.6"",
 ""cross-env"" : ""5.2.1"",
 ""css-loader"" : ""2.0.2"",
 ""cypress"" : ""3.8.3"",
 ""d3"" : ""^5.5.0"",
 ""documentation"" : ""12.1.2"",
 ""eslint"" : ""6.3.0"",
 ""eslint-config-recommended"" : ""4.0.0"",
 ""eslint-plugin-babel"" : ""5.3.0"",
 ""eslint-plugin-cypress"" : ""2.6.1"",
 ""eslint-plugin-jest"" : ""22.17.0"",
 ""eslint-plugin-prettier"" : ""3.1.0"",
 ""eslint-plugin-promise"" : ""4.2.1"",
 ""eslint-plugin-react"" : ""7.14.3"",
 ""eslint-plugin-standard"" : ""4.0.1"",
 ""html-webpack-plugin"" : ""2.30.1"",
 ""http-server"" : ""^0.12.1"",
 ""husky"" : ""3.0.5"",
 ""jest"" : ""24.9.0"",
 ""jsdoc"" : ""^3.6.3"",
 ""lint-staged"" : ""9.2.5"",
 ""npm-run-all"" : ""4.1.5"",
 ""prettier"" : ""1.19.1"",
 ""query-string"" : ""6.8.3"",
 ""react"" : ""^16.4.1"",
 ""react-addons-test-utils"" : ""15.6.2"",
 ""react-dom"" : ""^16.4.2"",
 ""react-editable-json-tree"" : ""2.2.1"",
 ""react-jsonschema-form"" : ""1.0.4"",
 ""react-test-renderer"" : ""16.9.0"",
 ""react-toastify"" : ""5.5.0"",
 ""style-loader"" : ""0.18.2"",
 ""typescript"" : ""3.8.3"",
 ""webpack"" : ""4.41.6"",
 ""webpack-bundle-analyzer"" : ""^3.0.3"",
 ""webpack-cli"" : ""3.3.8"",
 ""webpack-dev-server"" : ""^3.1.14"",
 ""webpack-visualizer-plugin"" : ""0.1.11""
 },
 ""peerDependencies"" : {
 ""d3"" : ""^5.5.0"",
 ""react"" : ""^16.4.1""
 },
 ""keywords"" : [ ""d3-visualization"", ""d3js"", ""graphs"", ""javascript"", ""networks"", ""react"", ""social-network-analysis"", ""social-network-graph"", ""visualization"" ],
 ""license"" : ""MIT"",
 ""scripts"" : {
 ""check"" : ""npm run docs:lint && npm run lint && npm run test && npm run functional"",
 ""check:light"" : ""npm run lint && npm run test"",
 ""dev"" : ""cross-env NODE_ENV=dev webpack-dev-server --mode=development --content-base sandbox --config webpack.config.js --inline --hot --port 3002"",
 ""dist:rd3g"" : ""rm -rf dist/ && webpack --config webpack.config.dist.js -p --display-modules --optimize-minimize"",
 ""dist:sandbox"" : ""npm run generate:tooltips && webpack --config webpack.config.js -p"",
 ""dist:transpile"" : ""./node_modules/@babel/cli/bin/babel.js -d lib src"",
 ""dist"" : ""npm run check && npm-run-all --parallel dist:*"",
 ""docs:lint"" : ""node_modules/documentation/bin/documentation.js lint src/**/*.js"",
 ""docs:watch"" : ""node_modules/documentation/bin/documentation.js --config documentation.yml build src/**/*.js -f html -o gen-docs --watch"",
 ""docs"" : ""npm run docs:lint && node_modules/documentation/bin/documentation.js --config documentation.yml build src/**/*.js -f html -o gen-docs && node_modules/documentation/bin/documentation.js build src/**/*.js -f md > gen-docs/DOCUMENTATION.md"",
 ""functional:local"" : ""export CYPRESS_SANDBOX_URL=http://localhost:3002 && cypress open"",
 ""functional:remote"" : ""export CYPRESS_SANDBOX_URL=https://danielcaldas.github.io/react-d3-graph/sandbox/index.html && cypress open"",
 ""functional"" : ""export CYPRESS_SANDBOX_URL=http://127.0.0.1:8888 && cypress run"",
 ""generate:tooltips"" : ""./node_modules/.bin/jsdoc -X ./src/components/graph/graph.config.js > ./tools/graph-config-jsdoc.json && cd tools && node tooltips-docs-generator.js > ../sandbox/graph-config-tooltips.js"",
 ""lint:fix"" : ""node_modules/eslint/bin/eslint.js --config=.eslintrc.js --fix \""src/**/*.js*\"" \""sandbox/**/*.js*\"""",
 ""lint:src"" : ""node_modules/eslint/bin/eslint.js --config=.eslintrc.js \""src/**/*.js*\"" \""sandbox/**/*.js*\"""",
 ""lint:test"" : ""node_modules/eslint/bin/eslint.js --config=.eslintrc.test.config.js \""test/**/*.spec.js\"""",
 ""lint"" : ""npm run lint:src && npm run lint:test && npm run docs:lint"",
 ""start"" : ""http-server ./sandbox/ -p 8888 -c-1"",
 ""test:clean"" : ""jest --no-cache --updateSnapshot --verbose --coverage --config jest.config.js"",
 ""test:watch"" : ""jest --verbose --coverage --watchAll --config jest.config.js"",
 ""test"" : ""jest --verbose --coverage --config jest.config.js"",
 ""sandbox"" : ""npm run dist:sandbox && npm run start""
 },
 ""publishConfig"" : {
 ""registry"" : ""https://eero.jfrog.io/eero/api/npm/npm/""
 },
 ""lint-staged"" : {
 ""*.\{js,jsx,css,md}"" : [ ""prettier --write"", ""git add"" ]
 },
 ""husky"" : {
 ""hooks"" : {
 ""pre-commit"" : ""lint-staged""
 }
 }
}
{code}
Contrast that with the {{package.json}} below from another npm package we published a few months ago: 
{code:java}
{
 ""name"" : ""@eero/web-common"",
 ""description"" : ""eero's common code for web apps"",
 ""version"" : ""1.5.10"",
 ""author"" : ""eero Inc (http://github.com/eero-inc)"",
 ""repository"" : {
 ""type"" : ""git"",
 ""url"" : ""https://github.com/eero-inc/web-common""
 },
 ""engines"" : {
 ""node"" : ""10.15.1""
 },
 ""dist"" : {
 ""tarball"" : ""//npm/@eero/web-common/-/@eero/web-common-1.5.10.tgz"",
 ""shasum"" : ""<shasum>""
 },
 ""dependencies"" : {
 ""google-libphonenumber"" : ""^3.2.2"",
 ""validator"" : ""^10.11.0""
 },
 ""devDependencies"" : {
 ""@babel/cli"" : ""^7.2.3"",
 ""@babel/core"" : ""^7.3.3"",
 ""@babel/plugin-proposal-decorators"" : ""^7.3.0"",
 ""@babel/plugin-proposal-export-default-from"" : ""^7.2.0"",
 ""@babel/plugin-proposal-export-namespace-from"" : ""^7.2.0"",
 ""@babel/plugin-syntax-export-default-from"" : ""^7.2.0"",
 ""@babel/plugin-transform-modules-commonjs"" : ""^7.2.0"",
 ""@babel/plugin-transform-react-display-name"" : ""^7.2.0"",
 ""@babel/plugin-transform-runtime"" : ""^7.2.0"",
 ""@babel/polyfill"" : ""^7.2.5"",
 ""@babel/preset-env"" : ""^7.3.1"",
 ""@babel/preset-react"" : ""^7.0.0"",
 ""@babel/preset-stage-0"" : ""^7.0.0"",
 ""@babel/register"" : ""^7.0.0"",
 ""@babel/runtime"" : ""^7.3.1"",
 ""autoprefixer"" : ""^9.4.8"",
 ""babel-eslint"" : ""^10.0 .1"",
 ""babel-jest"" : ""^24.1.0"",
 ""babel-loader"" : ""^8.0.5"",
 ""babel-plugin-transform-imports"" : ""^1.5.1"",
 ""babel-plugin-typecheck"" : ""^3.8.0"",
 ""chai"" : ""^4.2.0"",
 ""compass-mixins"" : ""^0.12.7"",
 ""concurrently"" : ""^4.1.0"",
 ""css-loader"" : ""^2.1.0"",
 ""deep-freeze"" : ""0.0.1"",
 ""eslint"" : ""5.14.1"",
 ""eslint-config-airbnb"" : ""17.1.0"",
 ""eslint-loader"" : ""^2.1.2"",
 ""eslint-plugin-import"" : ""^2.16.0"",
 ""eslint-plugin-jsx-a11y"" : ""^6.1.1"",
 ""eslint-plugin-react"" : ""^7.12.4"",
 ""estraverse-fb"" : ""^1.3.1"",
 ""file-loader"" : ""^3.0.1"",
 ""imports-loader"" : ""^0.8.0"",
 ""invariant"" : ""^2.2.1"",
 ""jest"" : ""^24.1.0"",
 ""jest-junit"" : ""^6.3.0"",
 ""json-loader"" : ""^0.5.4"",
 ""legacy-loader"" : ""0.0.2"",
 ""less"" : ""^3.9.0"",
 ""less-loader"" : ""^4.1.0"",
 ""mocha"" : ""^6.0.0"",
 ""node-sass"" : ""^4.11.0"",
 ""phantomjs-polyfill"" : ""0.0.2"",
 ""phantomjs-prebuilt"" : ""^2.1.7"",
 ""postcss-loader"" : ""^3.0.0"",
 ""react"" : ""^15.6.2"",
 ""react-addons-test-utils"" : ""^15.6.2"",
 ""react-dom"" : ""^15.6.2"",
 ""react-redux"" : ""^5.1.1"",
 ""react-transform-catch-errors"" : ""^1.0.2"",
 ""redbox-react"" : ""^1.2.3"",
 ""redux"" : ""^4.0.1"",
 ""resolve-url-loader"" : ""^3.0.1"",
 ""sass-loader"" : ""^7.1.0"",
 ""sinon"" : ""^7.2.4"",
 ""sinon-chai"" : ""^3.3.0"",
 ""strip-loader"" : ""^0.1.2"",
 ""style-loader"" : ""^0.23.1"",
 ""url-loader"" : ""^1.1.2"",
 ""webpack"" : ""^4.29.5""
 },
 ""license"" : ""LicenseRef-LICENSE"",
 ""scripts"" : {
 ""build"" : ""babel src -d ."",
 ""lint"" : ""eslint -c .eslintrc src"",
 ""jest"" : ""jest"",
 ""test"" : ""concurrently \""npm run lint\"" \""npm run jest\""""
 },
 ""publishConfig"" : {
 ""registry"" : ""https://eero.jfrog.io/eero/api/npm/npm/""
 }
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1vv4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Failing to update debian metadate due race condition of the stats persistence in some DB.,RTFACT-21461,92261,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,04/Mar/20 4:50 PM,11/Feb/21 11:01 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"In certain situations the following actions can take place:

 
 # If we have a delete node command (or move), this translates to an atomic, single transaction event of delete on the stats table followed by a delete of the same item on the node tables. (and a few more foreign key references as well) 
 # If prior to the delete (or move) event, a GET request on the same item (which could be very common in case of Debian metadata files) will create an event in the stats persistence job.
 # If the stats persistence job would trigger *exactly* between those 2 deletes on step 1, on some databases the transaction will get the update stats between those deletes, which may get the following error:

{code:java}
Failed to delete item with id '21125473': ERROR: update or delete on table ""nodes"" violates foreign key constraint ""stats_nodes_fk"" on table ""stats""_{code}
 # This may break the move/delete command (in cases of debian indexing, will result in not updating the metadata files on the same distribution)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1vsg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
What is the new reply-url for SSO integration in JFrog Platform ? ,RTFACT-21449,92189,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wailoont,wailoont,04/Mar/20 4:29 AM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,7.1.2,,,,,,,SAML SSO,,,,,,,0,,,,,,"We recently upgraded our Artifactory 6.16 to JFrog Platform 7.2.1.

It broke our SSO integration. 

Upon login via SSO using 6.16 setting, it return 

AADSTS50011: The reply URL specified in the request does not match the reply URLs configured for the application: 'https://company.com'.

The reply url previously configured is
 https://company.com/webapp/saml/loginResponse.

What is the new reply url to configure in Azure side ?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1vds:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Mar/20 4:38 AM;wailoont;I found the solution :

New url : https://company.com/*artifactory*/webapp/saml/loginResponse.",,,,,,,,,,
Connection reset while uploading a tar.gz file when explode parameter is set to true,RTFACT-21448,92180,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,awakhale,awakhale,03/Mar/20 9:52 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,Upload,,,,,,0,,,,,,"My connection is getting reset when I am setting *explode* parameter to *true IN Upload file specs* to upload an artifact which is tar.gz file. 

When I set explode parameter to false, the artifact is pushed to the server but I can't download the files which are extracted. 

PFB error trace. 
[consumer_0] An exception occurred during execution:
java.lang.RuntimeException: java.net.SocketException: Connection reset
	at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:44)
	at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:11)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:115)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at org.apache.http.impl.io.SessionOutputBufferImpl.streamWrite(SessionOutputBufferImpl.java:124)
	at org.apache.http.impl.io.SessionOutputBufferImpl.flushBuffer(SessionOutputBufferImpl.java:136)
	at org.apache.http.impl.io.SessionOutputBufferImpl.write(SessionOutputBufferImpl.java:167)
	at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:113)
	at org.apache.http.entity.FileEntity.writeTo(FileEntity.java:113)
	at org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:156)
	at org.apache.http.impl.conn.CPoolProxy.sendRequestEntity(CPoolProxy.java:152)
	at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:238)
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.ServiceUnavailableRetryExec.execute(ServiceUnavailableRetryExec.java:85)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.jfrog.build.client.PreemptiveHttpClient.execute(PreemptiveHttpClient.java:136)
	at org.jfrog.build.client.ArtifactoryHttpClient.execute(ArtifactoryHttpClient.java:240)
	at org.jfrog.build.client.ArtifactoryHttpClient.upload(ArtifactoryHttpClient.java:236)
	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.uploadFile(ArtifactoryBuildInfoClient.java:692)
	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.doDeployArtifact(ArtifactoryBuildInfoClient.java:379)
	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.deployArtifact(ArtifactoryBuildInfoClient.java:367)
	at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:39)
Thanks

 ","[consumer_0] An exception occurred during execution:
java.lang.RuntimeException: java.net.SocketException: Connection reset
	at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:44)
	at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:11)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.net.SocketException: Connection reset
	at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:115)
	at java.net.SocketOutputStream.write(SocketOutputStream.java:155)
	at org.apache.http.impl.io.SessionOutputBufferImpl.streamWrite(SessionOutputBufferImpl.java:124)
	at org.apache.http.impl.io.SessionOutputBufferImpl.flushBuffer(SessionOutputBufferImpl.java:136)
	at org.apache.http.impl.io.SessionOutputBufferImpl.write(SessionOutputBufferImpl.java:167)
	at org.apache.http.impl.io.ContentLengthOutputStream.write(ContentLengthOutputStream.java:113)
	at org.apache.http.entity.FileEntity.writeTo(FileEntity.java:113)
	at org.apache.http.impl.DefaultBHttpClientConnection.sendRequestEntity(DefaultBHttpClientConnection.java:156)
	at org.apache.http.impl.conn.CPoolProxy.sendRequestEntity(CPoolProxy.java:152)
	at org.apache.http.protocol.HttpRequestExecutor.doSendRequest(HttpRequestExecutor.java:238)
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.ServiceUnavailableRetryExec.execute(ServiceUnavailableRetryExec.java:85)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.jfrog.build.client.PreemptiveHttpClient.execute(PreemptiveHttpClient.java:136)
	at org.jfrog.build.client.ArtifactoryHttpClient.execute(ArtifactoryHttpClient.java:240)
	at org.jfrog.build.client.ArtifactoryHttpClient.upload(ArtifactoryHttpClient.java:236)
	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.uploadFile(ArtifactoryBuildInfoClient.java:692)
	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.doDeployArtifact(ArtifactoryBuildInfoClient.java:379)
	at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryBuildInfoClient.deployArtifact(ArtifactoryBuildInfoClient.java:367)
	at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:39)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1vc8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Jfrog Artifactory 6.18.0 shows and points to wrong release note page,RTFACT-21443,92101,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alo.eenmae,alo.eenmae,03/Mar/20 8:26 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,UI,Web UI,,,,,,0,,,,,,"After upgrading my Artifactory from 6.17.0 to 6.18.0 the Artifactory's main page still shows that the 6.17.0 is the latest version
Artifactory Version 6.18.0 (Uptime is 0d 0h 5m 39s)
Latest Release: [6.17.0|https://www.jfrog.com/confluence/display/RTF/Release+Notes#ReleaseNotes-Artifactory6.17]
 
Also the Release Notes page is wrong:
[https://www.jfrog.com/confluence/display/JFROG/Artifactory+Release+Notes#ReleaseNotes-Artifactory6.17]
 
the correct URL is: [https://www.jfrog.com/confluence/display/RTF6X/Release+Notes#ReleaseNotes-Artifactory6.18]
 
Thanks",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1uuw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Mar/20 3:01 PM;jayanths;Duplicate of  RTFACT-21444 and the issue is fixed. It was not a Bug at the Artifactory side.",,,,,,,,,,
failover option for mariadb jdbc driver is not recognized in artifactory 7,RTFACT-21441,92096,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,krzysztof.adamski@ing.com,krzysztof.adamski@ing.com,03/Mar/20 7:58 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I have tried the following options for url:

jdbc:mariadb:failover://host1,host2,host3

or 

jdbc:mariadb:sequential://host1,host2,host3

The error code is
{code:java}
goroutine 1 [running]:
runtime/debug.Stack(0x10, 0x10, 0xc0007272e0)
/src/runtime/debug/stack.go:24 +0x9d
jfrog.com/metadata/common/log.(*standardLogger).Panicfc(0xc000010780, 0x14cbc40, 0xc0002352f0, 0x1293e62, 0x31, 0xc0007272e0, 0x1, 0x1)
/src/jfrog.com/metadata/common/log/standard_logger.go:44 +0x6a
jfrog.com/metadata/services/common.(*configBearer).ValidateConfig(0xc000164500, 0x14cbc40, 0xc0002352f0, 0x14dbdc0, 0xc000010780)
/src/jfrog.com/metadata/services/common/config_bearer.go:174 +0x245
main.main()
/src/jfrog.com/metadata/metadata.go:24 +0x31f

panic: error reading configuration from system.yaml : reading db properties failed: could not derive db properties from system yaml: Type: , Url: : Could not set db properties to application configuration: scheme 'mariadb:failover' is different from the specified database type 'mariadb'. url: 'jdbc:mariadb:failover://host1,host2,host3/artdb?characterEncoding=UTF-8&elideSetAutoCommits=true&useSSL=false'
goroutine 1 [running]:
runtime/debug.Stack(0x10, 0x10, 0xc0007272e0)
/src/runtime/debug/stack.go:24 +0x9d
jfrog.com/metadata/common/log.(*standardLogger).Panicfc(0xc000010780, 0x14cbc40, 0xc0002352f0, 0x1293e62, 0x31, 0xc0007272e0, 0x1, 0x1)
/src/jfrog.com/metadata/common/log/standard_logger.go:44 +0x6a
jfrog.com/metadata/services/common.(*configBearer).ValidateConfig(0xc000164500, 0x14cbc40, 0xc0002352f0, 0x14dbdc0, 0xc000010780)
/src/jfrog.com/metadata/services/common/config_bearer.go:174 +0x245
main.main()

{code}
 

The only solution that works is passing single host.

jdbc:mariadb://host1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1uts:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cocoapod repository can not convert version like commit hash,RTFACT-21440,92093,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yongqiang,yongqiang,03/Mar/20 7:02 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,CocoaPods,,,,,,,0,cocoapods,,,,,"With Pod => 1.8.4   ,  repo-art => v1.0.4

If the module use commit id as the version as below, The plugin can not convert the source url to Artifactory rul

source"": {
    ""git"": ""https://github.com/Tencent/sqlcipher.git"",
    *""commit"": ""eeb86f7a5fa48df5e1fbd1cc74a0f06899e1cef7""*
  },

For cocoapods-art plugin.  only the version is marked by tag and can be replaced
For example:
""source"": {
    ""git"": ""https://github.com/sqlcipher/sqlcipher.git"",
    ""tag"": ""v4.0.1""
  },
Will be replaced correctly in local env.
""source"": {
    ""git"": ""https://example.artifactory.com/artifactory/api/pods/cocoapods-remote/pod/git/sqlcipher/sqlcipher/v4.0.1"",
    ""tag"": ""v4.0.1""
  }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ut4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't resolve docker images from a private bintray repository via a remote repository in Artifactory,RTFACT-21432,92028,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerh,omerh,01/Mar/20 11:28 AM,11/Feb/21 11:11 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"+*_Steps to reproduce:_*+

1. Create a remote Docker repository that points to a private repository in Bintray.

2. Enter the Remote Authentication details in the Advance section

3. Execute the docker pull command from the remote repository in Artifactory
 * In Step 3 the docker pull will fail and if we will change the private repo to a public repository in bintray the docker pull command will work as expected.

 

+*_Workaround:_*+

{{Disable the Enable Token Authentication option in the repo configuration}}

 

*!image-2020-04-12-13-23-03-516.png!*

 

 ",,,,,,,,,,,,,,,,,,,"12/Apr/20 10:23 AM;omerh;image-2020-04-12-13-23-03-516.png;https://www.jfrog.com/jira/secure/attachment/41535/image-2020-04-12-13-23-03-516.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc6fjp:r",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Crowd - Allow Created Users Access To Profile Page always returns false,RTFACT-21431,92012,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mariav,Mariav,01/Mar/20 9:19 AM,11/Feb/21 9:40 AM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,,,,,,,,2,,,,,,"Steps to reproduce:
1. Go do Administration => Security => Crowd
2. Select Allow Created Users Access To Profile Page and save - you will see that the request is sent with allowUserToAccessProfile: true
3. Refresh - the server returns allowUserToAccessProfile: false so the checkbox is unchecked.

See - [^Screen Recording 2020-03-01 at 11.08.56.mov]",,,,,,,,,,,,,,,,JFUI-2914,,,"01/Mar/20 9:18 AM;Mariav;Screen Recording 2020-03-01 at 11.08.56.mov;https://www.jfrog.com/jira/secure/attachment/40321/Screen+Recording+2020-03-01+at+11.08.56.mov",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ubk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Packages UI in JFrog Platform release shows inconsistent version numbers,RTFACT-21429,91975,Bug,In Progress,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pradnyas,pradnyas,28/Feb/20 7:31 PM,11/Feb/21 11:15 AM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,,,,,,,,1,,,,,,"Please see attached support case. It's SaaS customer's env where the issue is happening.

Artifactory Packages UI in JFrog Platform release shows inconsistent version numbers.

See attachments for more details on the UI issue.",,,,,,,,,,,,,META-484,,,,,,"03/Mar/20 4:58 PM;pradnyas;image-2020-03-03-08-58-48-780.png;https://www.jfrog.com/jira/secure/attachment/40384/image-2020-03-03-08-58-48-780.png","03/Mar/20 5:05 PM;pradnyas;image-2020-03-03-09-05-42-477.png;https://www.jfrog.com/jira/secure/attachment/40385/image-2020-03-03-09-05-42-477.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1u40:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Creating a virtual repository using REST API allows adding a local repository multiple times,RTFACT-21428,91972,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,28/Feb/20 6:33 PM,11/Feb/21 11:16 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,REST API,Virtual Repositories,,,,,,1,,,,,,"Using the REST API to create a virtual repository allows adding a local repository multiple times.

 

Here is the rest API used :

curl -uadmin:password1 -X PUT -H ""Content-Type: application/json"" http://mill.jfrog.info:12129/artifactory/api/repositories/test-virtual -d '\{""key"": ""test-virtual"", ""rclas"" : ""virtual"", ""packageType"": ""maven"", ""repositories"": [""libs-snapshot-local"",""libs-snapshot-local""], ""externalDependenciesEnabled"": false}'

 

This will create a virtual repository test-virtual and the selected repository includes two references to the local repository : libs-snapshot-local. Please also check the attached screenshot of the virtual repository configuration page after creating the repo.",,,,,,,,,,,,,,,,,,,"28/Feb/20 6:33 PM;prasannan;prasanna-test-repo-create.png;https://www.jfrog.com/jira/secure/attachment/40310/prasanna-test-repo-create.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1u3c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
When using X-JFrog-Art-Api we get a 403 half of the times when trying to fetch an artifact,RTFACT-21425,91967,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,soverbosch,soverbosch,28/Feb/20 10:44 AM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,2,,,,,,"When trying to solve RTFACT-21424 we switched to using X-JFrog-Art-Api, but this seems to have the effect of solving RTFACT-21424 but introduces another problem: 403 Forbidden!
{code:java}
[2020-02-28T10:21:49+00:00] DEBUG: ---- HTTP Request Header Data: ----
[2020-02-28T10:21:49+00:00] DEBUG: if-modified-since: Fri, 28 Feb 2020 08:37:14 GMT
[2020-02-28T10:21:49+00:00] DEBUG: if-none-match: ""14d7fdf2fe421fcc36789cc900e6ff68""
[2020-02-28T10:21:49+00:00] DEBUG: X-JFrog-Art-Api: blabla
[2020-02-28T10:21:49+00:00] DEBUG: ---- End HTTP Request Header Data ----
[2020-02-28T10:21:49+00:00] DEBUG: ---- HTTP Status and Header Data: ----
[2020-02-28T10:21:49+00:00] DEBUG: HTTP 1.1 403 Forbidden
[2020-02-28T10:21:49+00:00] DEBUG: date: Fri, 28 Feb 2020 10:21:49 GMT
[2020-02-28T10:21:49+00:00] DEBUG: content-type: application/json;charset=ISO-8859-1
[2020-02-28T10:21:49+00:00] DEBUG: content-length: 953
[2020-02-28T10:21:49+00:00] DEBUG: connection: close
[2020-02-28T10:21:49+00:00] DEBUG: vary: Accept-Encoding
[2020-02-28T10:21:49+00:00] DEBUG: x-artifactory-id: 60f0caf27e9bee9b89a9836a59a2487844ff8553
[2020-02-28T10:21:49+00:00] DEBUG: x-artifactory-node-id: moneyou-artifactory-primary-0
[2020-02-28T10:21:49+00:00] DEBUG: www-authenticate: Basic realm=""Artifactory Realm""
[2020-02-28T10:21:49+00:00] DEBUG: strict-transport-security: max-age=15724800; includeSubDomains
[2020-02-28T10:21:49+00:00] DEBUG: ---- End HTTP Status/Header Data ----
[2020-02-28T10:21:49+00:00] DEBUG: ---- HTTP Response Body ----
[2020-02-28T10:21:49+00:00] DEBUG: {
  ""errors"" : [ {
    ""status"" : 403,
    ""message"" : ""Bad props auth token: apiKey=blabla""
  } ]
}{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1u2g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
When using Authorisation Bearer we get a 400 instead of the artifact,RTFACT-21424,91966,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,soverbosch,soverbosch,28/Feb/20 10:39 AM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,0,,,,,,"{code:java}
When fetching artifacts it fails with the below exception
---response end---
400 Bad Request
Disabling further reuse of socket 3.
Closed 3/SSL 0x00000000024a6f90
Registered socket 4 for persistent reuse.
Skipping 512 bytes of body: [
<?xml version=""1.0"" encoding=""UTF-8""?>
<Error>
  <Code>InvalidArgument</Code>
  <Message>Only one auth mechanism allowed; only the X-Amz-Algorithm query parameter, Signature query string parameter or the Authorization header should be specified</Message>
  <ArgumentName>Authorization</ArgumentName>
  <ArgumentValue>Bearer 
    Skipping 512 bytes of body: 
    Skipping 303 bytes of body:
  </ArgumentValue>
  <RequestId>DF67E890FB3A77D2</RequestId>
  <HostId>sj2ZtnaWPziw+oxvJyHd94Tkq7Jf74Nn+mqPbVogN/b+Dz5trBPtA9FVZvAguV/Gck9UjbW/pL4=</HostId>
</Error>] done.
2020-02-26 23:26:37 ERROR 400: Bad Request.{code}",,,,,,,,,,,,,,,,,,RTFACT-21425,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1u28:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UI issue when permission target contains a build name that ends with %,RTFACT-21418,91918,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,27/Feb/20 4:34 PM,11/Feb/21 11:30 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,PB_Done,,,,,"When a permission target contains a build with a name that ends with '%', editing the permission target under Artifactory UI > Admin > Security > Permissions > <Permission>, will display 0 users and groups associated with this permission.

Steps to Reproduce:
 # Create a permission
 # Add users and groups to the permission
 # Under Resources, add a build that ends with the character '%'

This will result in the following error:
{code:java}
{""error"":""URLDecoder: Incomplete trailing escape (%) pattern""}

{code}
Workaround:
 You may use the Create or Replace Permission Target to edit the permission target and remove the build that ends with '%' character.
[https://www.jfrog.com/confluence/display/RTF6X/Artifactory+REST+API#ArtifactoryRESTAPI-CreateorReplacePermissionTarget]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1tw8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Add validation for creating a repository via YAML Configuration File that contains illegal characters in repo key ,RTFACT-21406,91873,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerh,omerh,27/Feb/20 10:13 AM,11/Feb/21 11:39 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"While in Artifactory UI it's not permitted to create a repository key that contains illegal character there is no validation when creating a repository via YAML Configuration File.

+*_Steps to reproduce:_*+

 Create a *_configuration.yml_* file as below:
{code:java}
localRepositories:   #Local repositories configuration
  11@@@###dhghjskdfhjkds dsbhfdjsh?Z?Z""""""""""}}}}}}}{}{[][]\\\ \ \ \ :   #The local repository name
    type: generic   #The package type
{code}
And then execute the following API command:
{code:java}
$ curl -uadmin:password -XPATCH ""http://localhost:8081/artifactory/api/system/configuration"" -H ""Content-Type:application/yaml"" -T configuration.yml
{code}

 !image-2020-02-27-12-09-03-446.png|thumbnail! 
",,,,,,,,,,,,,,,,,,,"27/Feb/20 10:09 AM;omerh;image-2020-02-27-12-09-03-446.png;https://www.jfrog.com/jira/secure/attachment/40286/image-2020-02-27-12-09-03-446.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1tmg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deployment via Travis does not build indexes in Debian repositories.,RTFACT-21399,91817,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,olmik,olmik,26/Feb/20 2:17 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,REST API,,,,,,,0,,,,,,"Hello.

I am facing strange situation with Debian repositories, deployed via Travis CI - [https://docs.travis-ci.com/user/deployment/bintray#debian-upload].

This repository - [https://bintray.com/picodata/tarantool-2.2-debian] has the following ""history"" of actions:
 # Package tarantool is created manually vi web interface.
 # Version 2.2.0.838.g09a181c1d-1 of that package is created manually.
 # Three .deb files are uploaded via Travis (see first link).
 # Files are uploaded to /pool/main/t/tarantool successfully.
 # However, indexes are not built and there is no /dist/buster directory in repository.
 # After I remove manually either package or its version, indexes for /dist/buster are build and are in the repository's root. Due to my understanding, that index is invalid, because .deb files are not there anymore.
 # I can upload .deb files via Travis again but index is not updated after upload. It updates only I manually update repository's content.
 # All this leads to that package can no be resolved according to ""Set me up"" instructions.

To compare. The following repository [https://bintray.com/picodata/tarantool-2.2-debian-manual] has the following ""history"" until step 3. The the same .deb files were uploaded manually via web UI. In this case indexes are built and directory /dists/buster exists. As a result, package can be resolved and installed properly.

Bintray documentation mentions, that indexes are built asynchronously in background when content is changed. Is that true for REST API? I see the following API method - [https://bintray.com/docs/api/#calc_metadata].

Do I have to open this issue on Travis site?  Could you clarify that?

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ta0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Using API Key authentication removes LDAP groups of user profile,RTFACT-21398,91814,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,daniel.moritz,daniel.moritz,26/Feb/20 1:46 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,3,,,,,,"My user profiles permissions / LDAP groups gets modified when using the generated API Key, this is maybe related to https://www.jfrog.com/jira/browse/RTFACT-13669.

Steps to reproduce:
 # remove user account ""daniel.moritz"" in artifactory
 # Login in local artifactory instance (using LDAP credentials)
 # successful session with administration priviliges, member of groups (as configured in LDAP)
 # Generate API Key in user profile
 # Using generated API Key to access an archived file: 
{code:java}
curl -u $ARTIFACTORY_USERNAME:$ARTIFACTORY_PASSWORD https://artifactory.nexenio.local/artifactory/.../maven-metadata.xml{code}
with response
{code:java}
{ ""errors"" : [ { ""status"" : 401, ""message"" : ""Can't reauthenticate LDAP for daniel.moritz: user is locked, disabled or does not exist in LDAP"" } ] }{code}
 # User profile changed: LDAP groups are no longer assigned
 # following error shown in artifactory.log:
{code:java}
2020-02-26 13:20:14,216 [http-nio-8081-exec-5451] [WARN ] (o.a.s.l.LdapServiceImpl:203) - No search filter defined. 
2020-02-26 13:20:14,217 [http-nio-8081-exec-5451] [WARN ] (o.a.s.l.LdapServiceImpl:123) - Cannot find user daniel.moritz, LDAP settings not valid 
2020-02-26 13:20:14,222 [http-nio-8081-exec-5451] [WARN ] (o.a.s.l.LdapUtils :113) - Updating user daniel.moritz after LDAP login authentication failure
{code}
 

When i do a fresh login in artifactory Web GUI, the groups and administration permissions are set again.

Other colleagues can use the API Key without any problems, so i could imagine some data problems in the artifactory internal user persistence. Is there a way to delete some caching information or similiar?","* Artifactory is running in Docker 
 * OpenLDAP
 * LDAP configuration ""STATIC""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1t9c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"29/May/20 6:13 PM;nborod@adobe.com;We experience similar LDAP related issue. Please provide time estimate for this to be fixed. ",,,,,,,,,,
Generic repository is not created if set in artifactory.config.import.yml,RTFACT-21397,91813,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adam.georgsson,adam.georgsson,26/Feb/20 1:41 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"I'm using artifactory-jcr 6.17.0 and creating default repositories in artifactory.config.import.yml like this:
{code:java}
OnboardingConfiguration:
  repoTypes:
    - docker
    - helm
    - generic{code}
Docker and helm repos are created but not generic.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1t94:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Pre-release version starting with numbers in NPM handled incorrectly,RTFACT-21396,91794,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pablobirukov,pablobirukov,26/Feb/20 10:59 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,0,,,,,,"When publishing a pre-release version of a package where pre-release part starts with numeric symbols ({{package-name@1.0.6-{color:#ff0000}64{color}abdef)}} to npm, the package actually is being published under {{package-name@1.0.6-{color:#ff0000}64-{color}abdef}}.

For pre-relesase verions starting with alphabetic symbols, the published version matches the originally pushed. So, {{package-name@1.0.6-ab56def}} will be available under {{package-name@1.0.6-ab56def}}

_Pre-release version specifier starting with numeric symbols is valid ([https://semver.org/#backusnaur-form-grammar-for-valid-semver-versions)|https://semver.org/#backusnaur-form-grammar-for-valid-semver-versions)_]_",Artifactory Professional 6.11.3 rev 61103900,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1t4w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Build info deployment fails in case the build include property with key name that larger than 255 chars.,RTFACT-21394,91773,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yehudah,yehudah,26/Feb/20 8:51 AM,11/Feb/21 11:49 AM,18/Feb/21 8:59 AM,,6.17.0,7.2.1,,,,,,Build Info,,,,,,,0,,,,,,"When deploying build info which include environment variables, Artifactory extract them and insert them to the DB under the build_props table.
In case environment variable key length is longer than 255 chars, the insert to the DB will fail since the ""prop_key"" field is configured as varchar(255).

Error from the logs:

{code:java}
2020-02-26 08:40:54,538 [http-nio-8081-exec-2] [ERROR] (o.a.b.BuildServiceImpl:358) - 
org.artifactory.storage.StorageException: Could not insert build Build{version='1.0.1', name='maven-pipeline', number='15', type=GENERIC, buildAgent=Pipeline, agent=Jenkins/2.204.1, started='2020-02-26T08:40:43.410+0200', durationMillis=12930, principal='admin', artifactoryPrincipal='admin', artifactoryPluginVersion='3.3.2', url='http://localhost:8090/job/maven-pipeline/15/', parentName='null', parentNumber='null', vcs='[revision= '7b59d8a969c3660eb41e02b98c0e309b3fd4cb2e', url='https://github.com/JFrog/project-examples.git']', vcsRevision='7b59d8a969c3660eb41e02b98c0e309b3fd4cb2e', vcsUrl='https://github.com/JFrog/project-examples.git', parentBuildId='null', licenseControl=null, buildRetention=null, runParameters=null, modules=[org.jfrog.build.api.Module@c94cc00d, org.jfrog.build.api.Module@d5105bcb, org.jfrog.build.api.Module@9277f008, org.jfrog.build.api.Module@a3dc0b71], statuses=null, buildDependencies=[], issues=null, governance=null}
	at org.artifactory.storage.db.build.service.BuildStoreServiceImpl.addBuild(BuildStoreServiceImpl.java:139)
	at org.artifactory.build.BuildServiceImpl.addBuildInternal(BuildServiceImpl.java:395)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:78)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy196.addBuildInternal(Unknown Source)
	at org.artifactory.repo.interceptor.BuildInfoInterceptor.doAction(BuildInfoInterceptor.java:96)
	at org.artifactory.repo.interceptor.BuildInfoInterceptor.afterCreate(BuildInfoInterceptor.java:66)
	at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterCreate(StorageInterceptorsImpl.java:69)
	at jdk.internal.reflect.GeneratedMethodAccessor270.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy172.afterCreate(Unknown Source)
	at org.artifactory.repo.db.DbStoringRepoMixin.invokeAfterCreateInterceptors(DbStoringRepoMixin.java:405)
	at org.artifactory.repo.db.DbStoringRepoMixin.saveResource(DbStoringRepoMixin.java:244)
	at org.artifactory.repo.db.DbLocalRepo.saveResource(DbLocalRepo.java:154)
	at org.artifactory.repo.service.RepositoryServiceImpl.saveResourceInTransaction(RepositoryServiceImpl.java:1876)
	at jdk.internal.reflect.GeneratedMethodAccessor266.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy165.saveResourceInTransaction(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1864)
	at jdk.internal.reflect.GeneratedMethodAccessor305.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy165.saveResource(Unknown Source)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:569)
	at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:552)
	at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:429)
	at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:419)
	at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:400)
	at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:221)
	at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:187)
	at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:130)
	at jdk.internal.reflect.GeneratedMethodAccessor298.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy186.upload(Unknown Source)
	at org.artifactory.build.BuildServiceImpl.deployBuildJson(BuildServiceImpl.java:353)
	at org.artifactory.build.BuildServiceImpl.addBuild(BuildServiceImpl.java:325)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy196.addBuild(Unknown Source)
	at org.artifactory.rest.resource.ci.BuildResource.addBuild(BuildResource.java:289)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'prop_key' at row 1
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:104)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:955)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1094)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1042)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1345)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1027)
	at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229)
	at org.artifactory.storage.db.build.dao.BuildsDao.createBuildProps(BuildsDao.java:114)
	at org.artifactory.storage.db.build.dao.BuildsDao.createBuild(BuildsDao.java:85)
	at org.artifactory.storage.db.build.service.BuildStoreServiceImpl.addBuild(BuildStoreServiceImpl.java:136)
	... 146 common frames omitted
{code}

Steps to reproduce:
1. create environment variable with key length longer than 255 chars.
2. deploy to Artifactory build info that include the build agent environment variables.

Workaround:
Exclude the problematic environment variable from the build info, for example:
Using Jenkins pipeline script: [buildInfo.env.filter.addExclude(""DONT_COLLECT*"")|https://www.jfrog.com/confluence/display/JFROG/Scripted+Pipeline+Syntax#ScriptedPipelineSyntax-CapturingEnvironmentVariables]
Using JFrog CLI: using the ""[--env-exclude|https://www.jfrog.com/confluence/display/CLI/CLI+for+JFrog+Artifactory#CLIforJFrogArtifactory-PublishingBuildInformation]"" flag while deploying the build info.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1t0g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
unable to pull image from mcr.microsoft.com,RTFACT-21391,91745,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,parvez1487,parvez1487,26/Feb/20 6:54 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.11.7,,,,,,,Artifactory Cloud,,,,,,,1,mcr,,,,,"Hi,

We are using artifactory prod version, I have created remote repo for mcr and using reverse proxy for that.

 

But when pulling image from mcr, I am getting ""error pulling image configuration: unknown blob"".

 ",dev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1su8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Clicking ""Next"" instead of Skip on the Email page causes error",RTFACT-21389,91720,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vinaya,vinaya,25/Feb/20 6:41 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,JCR,,,,,,,0,,,,,,"If I click ""Next"" instead of Skip on the Email page: I cannot restart the JCR Node:
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.b: The content of element 'emails' is not complete. One of '\{""http://artifactory.jfrog.org/xsd/3.0.1"":email}' is expected.
 

!https://files.slack.com/files-pri/T0R5JH9BQ-FUJ9SP3UN/image.png!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1soo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Invoke-RestMethod : The remote server returned an error: (400) Bad Request,RTFACT-21383,91634,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alex.kaushansky,alex.kaushansky,24/Feb/20 9:16 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I am trying to delete an artifact from PowerShell console nd getting a 400 error.

$username = ""*********""
$password = ""*********""

$base64AuthInfo = [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes((""\{0}:\{1}"" -f $username,$password)))

Invoke-RestMethod -Method DELETE  -Headers @\{Authorization=(""Basic {0}"" -f $base64AuthInfo)} -Uri $PackageURI

 

Output:

Invoke-RestMethod : The remote server returned an error: (400) Bad Request.
At line:1 char:1
+ Invoke-RestMethod -Method DELETE -Headers @{Authorization=(""Basic {0 ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 + CategoryInfo : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-RestMethod], WebException
 + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeRestMethodCommand

 

 

 

Changing methods from DELETE to GET works just fine...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1s68:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Professional 6.16.0 Cant empty trash and cant delete anything,RTFACT-21381,91593,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,itzikban,itzikban,24/Feb/20 3:04 PM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Artifact Storage,,,,,,,1,,,,,,"Hello,

I am from Tevel Aerobotics Company,

we enjoyed using your services.

we facing an issue with full storage capacity and cannot delete old artifacts and cannot empty trash. 

attached logs and screenshots 

we need your urgent help.

 

Screen shot

 

  [http://next.tevelos.io:8080/s/p4HSBGnzo32pzzQ]

Logs :

 

[http://next.tevelos.io:8080/s/jgwMR7fjzBYqkRo]

 

 

Thanks a lot 

Itzik Ben Zaken

+972-52-5635623

Artifactory Professional
 6.16.0 rev 61600900
 Licensed to Tevel Aerobotics Technologies
 © Copyright 2020 JFrog Ltd",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1rx4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
maven-metadata generated wrong,RTFACT-21321,91269,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mirela,mirela,20/Feb/20 9:05 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,Maven,Metadata,,,,,,0,,,,,,"We are experiencing problems with the maven-metadata.xml file. It sometimes refers to old snapshot versions that no longer exist in Artifactory
{panel:title=maven-metadata.xml}
<snapshotVersion>
 <extension>jar</extension>
 <value>0.8-20200214.*075110*-18</value>
 <updated>...</updated>
 </snapshotVersion>
{panel}
 I have only seen this happen to ""zip"" or ""jar"" extensions. The ""pom"" extension is usually fine.
{panel:title=Item in Artifactory}
[project name]-0.8-20200214.*075113*-18.jar
{panel}
This issue happens intermittently, and a rebuild (or several) fix it. However, it impacts our automated deployment flows.",,,,,,,,,,,,,,,,RTFACT-6514,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1q40:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"When a call comes into artifactory port (TLS)  on the root context (without /artifactory), it should route the call to router port.",RTFACT-21320,91257,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Prasannar,Prasannar,20/Feb/20 6:10 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,when we hit <https://artifactory:8081>/ from browser it should move to the router port <https://artifactory:8082>/ui/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1q1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Extra character has been added to zap cache message,RTFACT-21310,91151,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,idanm,idanm,19/Feb/20 2:11 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Extra character "":"" is at the end of the zap cache success message

see attached image",,,,,,,,,,,,,,,,,,,"19/Feb/20 2:11 PM;idanm;Screen Shot 2020-02-19 at 15.55.02.png;https://www.jfrog.com/jira/secure/attachment/40030/Screen+Shot+2020-02-19+at+15.55.02.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1pfk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifacrory npm auth work's only with local users,RTFACT-21308,91098,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mfominov,mfominov,19/Feb/20 9:43 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.16.0,6.17.0,,,,,,,,,,,,,0,,,,,,"Artifacrory npm auth work's only with local users.

We using Artifactory with Atlassian Crowd as auth provider.

When i'm trying to access [http://localhost/api/npm/auth] i see error

{code}
{""errors"": [{""status"": 400,""message"": ""User USERNAME couldn't be found""}]}
{code}

We have only external user's and we don't want to create Artifactory local user.
[link title|http://example.com]
This problem affects [jfrog cli|https://github.com/jfrog/jfrog-cli/issues/599] and Jenkins Artifactory plugin when i'm trying to build JS application with [rtNpm.install|https://www.jfrog.com/confluence/display/RTF/Scripted+Pipeline+Syntax#ScriptedPipelineSyntax-NPMBuildswithArtifactory]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1p40:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Re-index paths API leaks a lazy AQL result set connection,RTFACT-21287,90986,Bug,Done,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,uriahl,uriahl,uriahl,18/Feb/20 3:55 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,,,,,,7.2.0,,,,,,,,,0,,,,,,"Re-indexing a path on the metadata server will cause a connection leak and eventually a starvation of connections of the DB connection pool, due to a query with a lazy AQL query with an unclosed result set.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ofc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM registry affected by global npm failure,RTFACT-21277,90796,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,asavanchuk,asavanchuk,17/Feb/20 1:50 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,NPM,,,,,,,7,,,,,,"Hello.

During today's NPM failure ([https://github.com/npm/cli/issues/836]) we experienced the same problem with our hosted Artifactory.

We use npm ci for npm packages installation and saw the following errors:

Example 1:
 _59 verbose type Error_
 _60 verbose stack Error: 403 Forbidden: node-xmldom@0.1.28_
 _60 verbose stack     at fetch.then.res (C:\Program Files\nodejs\node_modules\npm\node_modules\pacote\lib\fetchers\registry\fetch.js:42:19)_
 _60 verbose stack     at tryCatcher (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\util.js:16:23)_
 _60 verbose stack     at Promise._settlePromiseFromHandler (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\promise.js:512:31)_
 _60 verbose stack     at Promise._settlePromise (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\promise.js:569:18)_
 _60 verbose stack     at Promise._settlePromise0 (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\promise.js:614:10)_
 _60 verbose stack     at Promise._settlePromises (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\promise.js:693:18)_
 _60 verbose stack     at Async._drainQueue (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\async.js:133:16)_
 _60 verbose stack     at Async._drainQueues (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\async.js:143:10)_
 _60 verbose stack     at Immediate.Async.drainQueues [as _onImmediate] (C:\Program Files\nodejs\node_modules\npm\node_modules\bluebird\js\release\async.js:17:14)_
 _60 verbose stack     at runCallback (timers.js:705:18)_
 _60 verbose stack     at tryOnImmediate (timers.js:676:5)_
 _60 verbose stack     at processImmediate (timers.js:658:5)_
  
 Example 2:
 _npm ERR! 429 Too Many Requests: diff@3.3.1_
  
 In npm logs we see that npm was sending requests to Artifactory
  
 10 silly tree      'node-xmldom' => LogicalTree {
 10 silly tree        name: 'node-xmldom',
 10 silly tree        version: '0.1.28',
 10 silly tree        address: 'node-xmldom',
 10 silly tree        optional: false,
 10 silly tree        dev: false,
 10 silly tree        bundled: false,
 10 silly tree        resolved:
 10 silly tree         'https://artifacts.aras.com:443/artifactory/api/npm/ENG-npm-All/node-xmldom/-/node-xmldom-0.1.28.tgz',
 10 silly tree        integrity: 'sha1-VqkkrObLxo1lCVbQGqM8wgQeBVA=',
 10 silly tree        dependencies: Map {},
 10 silly tree        requiredBy: [Set] },
  
 But for some reason it was affected by this global npm outage.
  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1nco:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"19/Feb/20 7:51 PM;j.kidd@f5.com;We've had similar issues with Artifactory's ""caching""

Basically when the upstream for a remote returns http error codes, Artifactory just passes those errors right along to you rather than serving from its cache. What Jfrog told us here was to increase the ""Metadata Retrieval Cache Period"" for that remote repo which does nothing to solve this problem if the problem last longer than that period of time.

We've requested the ability to configure Artifactory to serve from its cache under any circumstance where the upstream remote is failing or returning error codes. Basically, regardless of the ""Metadata Retrieval Cache Period,"" we want Artifactory to serve from its cache under these circumstances.",,,,,,,,,,
Unable to install private packages from the nvcr.io repo,RTFACT-21273,90750,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muddanajv,muddanajv,17/Feb/20 10:57 AM,11/Feb/21 12:15 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,1,,,,,,"Problem Statement: While trying to resolve any private packages like “chainer” from the docker remote repo pointing to nvcr.io the package is not getting resolved and it is giving 401 authentication issues.

 Steps followed during reroduction:

 

1. Create new login NGC account and received the token and API key (followed the document while creating the user [https://docs.nvidia.com/ngc/ngc-getting-started-guide/index.html#account-signup])

2. Create Docker remote repo pointing to nvcr.io and in the advanced tab provided the username $oauthtoken and password as API key (received from step 1) and the test connection is working fine.

3. Now tried docker login and able to login successfully.
 [root@janardhan-nginx-repli ~]# docker login docker.jana.com

Username (admin): admin

Password: 

Login Succeeded

 

4. Try pulling public images like PyTorch and download success.

[root@janardhan-nginx-repli muddanajyothivs]# docker pull docker.jana.com/nvidia/pytorch:17.10

Trying to pull repository docker.jana.com/nvidia/pytorch ... 

17.10: Pulling from docker.jana.com/nvidia/pytorch

f5c64a3438f6: Pulling fs layer 

51899d335aae: Download complete 

6ff2b7de3c13: Download complete 

50366c31f7fd: Download complete 

f441b9a68d13: Download complete 

8bc3cd6b8363: Download complete

 

5. Try pulling private images like “Chainer” but getting the below error and in the logs could able to see the authentication issue in the Http debug loggers.

[root@janardhan-nginx-repli muddanajyothivs]# docker pull docker.jana.com/nvidia/chainer:4.0.0b1

Trying to pull repository docker.jana.com/nvidia/chainer ... 

manifest for docker.jana.com/nvidia/chainer:4.0.0b1 not found

Attached the Error logs

 

6. Also tried pulling directly from nvcr.io with the same authentication credentials and it is getting succeded.

[root@janardhan-nginx-repli ~]# docker login nvcr.io

Username ($oauthtoken): $oauthtoken

Password: 

Login Succeeded

[root@janardhan-nginx-repli ~]# docker pull nvcr.io/nvidia/pytorch:20.01-py3

Trying to pull repository nvcr.io/nvidia/pytorch ... 

20.01-py3: Pulling from nvcr.io/nvidia/pytorch

7ddbc47eeb70: Pulling fs layer 

c1bbdc448b72: Pulling fs layer 

8c3b70e39044: Pulling fs layer 

 

[root@janardhan-nginx-repli ~]# docker pull nvcr.io/partners/chainer:4.0.0b1

Trying to pull repository nvcr.io/partners/chainer ... 

4.0.0b1: Pulling from nvcr.io/partners/chainer

8d51e945c435: Pulling fs layer 

779578d7ea6e: Pulling fs layer 

82315138c8bd: Pulling fs layer 

88dc0000f5c4: Waiting 

79f59e52a355: Waiting 

 

Summary: While proxying nvcr.io we cannot able to pull private images and issues seems to be with passing the Authentication header.",,,,,,,,,,,,,,,,,,,"17/Feb/20 11:13 AM;muddanajv;httplog.txt;https://www.jfrog.com/jira/secure/attachment/39941/httplog.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1n3c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Jul/20 11:35 AM;doto;I can confirm the issue is no longer evident after upgrade to Artifactory 6.20.1",,,,,,,,,,
Round Robin writeBehavior does not work when shard is unavailable ,RTFACT-21272,90738,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,idanm,idanm,17/Feb/20 9:29 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"h1. Background

When testing RTFACT-21086 i have found that when a shard is unavailable or folder is missing the RoundRobin is not working.
h1. Environment 

6.18.0m011

7.2.0-m033
h1. Reproduce
{code:java}
docker pull art.jfrog.io/jfrog/artifactory-pro:7.2.0-m033{code}
execute docker run on pulled image

configured binaryStrore.xml file as:
{code:java}
<config version=""4"">
 <chain>
 <provider id=""cache-fs"" type=""cache-fs"">
 <provider id=""sharding"" type=""sharding"">
 <sub-provider id=""shard1"" type=""state-aware""/>
 <sub-provider id=""shard2"" type=""state-aware""/>
 <sub-provider id=""shard3"" type=""state-aware""/>
 <sub-provider id=""shard4"" type=""state-aware""/>
 </provider>
 </provider>
 </chain>
 <provider id=""sharding"" type=""sharding"">
 <readBehavior>roundRobin</readBehavior>
 <writeBehavior>roundRobin</writeBehavior>
 <redundancy>1</redundancy>
 </provider>
 <provider id=""shard1"" type=""state-aware"">
 <writeEnabled>true</writeEnabled>
 <fileStoreDir>filestore1</fileStoreDir>
 </provider>
 <provider id=""shard2"" type=""state-aware"">
 <writeEnabled>true</writeEnabled>
 <fileStoreDir>filestore2</fileStoreDir>
 </provider>
 <provider id=""shard3"" type=""state-aware"">
 <writeEnabled>false</writeEnabled>
 <fileStoreDir>filestore3</fileStoreDir>
 </provider>
 <provider id=""shard4"" type=""state-aware"">
 <writeEnabled>true</writeEnabled>
 <fileStoreDir>filestore4</fileStoreDir>
 </provider>
</config>{code}
restart container

because 'shard3' wrtieEnabled is set to 'false' a folder will not be created fo this shard and the write strategy will always restart meaning files will be uploded only to the first shard 'filestore1'. This bug happen because the artifactory could not find the binary provider.
h1. Code reference 
Happens in ShardingBinaryProviderImpl ->
reload() -->         writeStrategy = resolveWriteStrategy(); always the position of round robin is init with zero
h1.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1n0w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upgrade blocked when license is managed by MC and license file is not persisted,RTFACT-21267,90677,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,16/Feb/20 10:27 AM,11/Feb/21 12:17 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"This issue is relevant for JFrog E+ users, who manage their Artifactory licenses via Mission Control, and there is no data persistency for the $ARTIFACTORY_HOME/etc/ directory.

This is common for our [Helm Chart users|https://github.com/jfrog/charts/tree/master/stable/artifactory-ha].
(Note it is not default configuration)

Unlike with any other setup, when having the license attached via MC you are not exposed to the actual licenses.
With any other setup you have Artifactory licenses which can be attached as documented on the GitHub under: ""Install Artifactory HA license"".

The upgrade will fail, due to:
{code:java}
16-Feb-2020 11:30:01.789 SEVERE [localhost-startStop-2] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class [org.artifactory.webapp.servlet.ArtifactoryHomeConfigListener]
	java.lang.RuntimeException: Converter can't run since no matching license found, please add new license
		at org.artifactory.converter.ConvertersManagerImpl.handleException(ConvertersManagerImpl.java:223)
		at org.artifactory.converter.ConvertersManagerImpl.convert(ConvertersManagerImpl.java:149)
		at org.artifactory.converter.ConvertersManagerImpl.convertHomeSync(ConvertersManagerImpl.java:112)
		at org.artifactory.webapp.servlet.BasicConfigManagers.initHomes(BasicConfigManagers.java:121)
		at org.artifactory.webapp.servlet.BasicConfigManagers.initialize(BasicConfigManagers.java:101)
		at org.artifactory.webapp.servlet.ArtifactoryHomeConfigListener.contextInitialized(ArtifactoryHomeConfigListener.java:53)
		at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4770)
		at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5236)
		at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
		at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:754)
		at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:730)
		at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:744)
		at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:624)
		at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1833)
		at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
		at java.base/java.lang.Thread.run(Thread.java:834)
	Caused by: java.lang.RuntimeException: Converter can't run since no matching license found, please add new license
		at org.artifactory.converter.ConvertersManagerImpl.convert(ConvertersManagerImpl.java:140)
		... 17 more
{code}


You can simulate such an environment with the following *reproduction steps*:
1. Install Artifactory 6.12.2 with an *external DB*.
2. Add an ha-node.properties file so the node will start in HA mode (even though just 1 node).
3. Shut down Artifactory.
4. remove the $ARTIFACTORY_HOME/etc/artifactory.cluster.license.
5. Upgrade Artifactory. It will fail with the stacktrace as mentioned above at $ARTIFACTORY_HOME/logs/catalina/localhost.<DATE>.log.

*+Possible Solution:+*
Before starting the migration, in case a license file doesn't exist locally, try to pull it from the DB.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1mns:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Continuous OR slow configuration updates can cause the server heartbeat to go stale  ,RTFACT-21263,90597,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,uriahl,uriahl,13/Feb/20 4:05 PM,15/Feb/21 2:47 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,R&D-CI-Issues,,,,,"When executing continuous configuration updates for 30 or more seconds, or when the time it takes to rebuild a changed configuration is too long, the heartbeat job may be skipped for multiple times, causing the server heartbeat to be stale. This is due to the fact that during each configuration update there is usually a short period where the artifactory application context is set to ""not ready"", thus causing the heartbeat job to skip updating to heartbeat.  

In case of HA setup, node marked as ""stale"" will not be synced for configuration changes which will lead to inconsistency in configuration.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1m74:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory doesn't support new SSH key format,RTFACT-21261,90591,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,daniele,daniele,13/Feb/20 3:03 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,,,,,,"When I try to use the SSH authentication feature in Artifactory with keys generated with the command listed in the wiki page:
{code:java}
ssh-keygen -t rsa{code}
I follow the instructions for uploading the keypair to Artifactory, but when I try to login with the ssh keys, I get the following error:
{code:java}
2020-02-13 14:33:16,008 [sshd-SshServer[5d483539]-nio2-thread-2] [WARN ] (o.a.s.s.s.ServerSession:456) - Exception caught
org.apache.sshd.common.SshException: sendKexInit() none of the keys appears in supported list: [ecdsa-sha2-nistp256, ecdsa-sha2-nistp384, ecdsa-sha2-nistp521, ssh-dss, ssh-rsa]
at org.apache.sshd.server.session.ServerSession.sendKexInit(ServerSession.java:141)
at org.apache.sshd.server.session.ServerSession.readIdentification(ServerSession.java:168)
at org.apache.sshd.common.session.AbstractSession.messageReceived(AbstractSession.java:302)
at org.apache.sshd.common.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:54)
at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:184)
at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:170)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler$1.run(Nio2CompletionHandler.java:32)
at java.base/java.security.AccessController.doPrivileged(Native Method)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:30)
at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)
at java.base/sun.nio.ch.Invoker.invokeDirect(Invoker.java:158)
at java.base/sun.nio.ch.UnixAsynchronousSocketChannelImpl.implRead(UnixAsynchronousSocketChannelImpl.java:560)
at java.base/sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:277)
at java.base/sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:298)
at java.base/java.nio.channels.AsynchronousSocketChannel.read(AsynchronousSocketChannel.java:425)
at org.apache.sshd.common.io.nio2.Nio2Session.startReading(Nio2Session.java:170)
at org.apache.sshd.common.io.nio2.Nio2Acceptor$AcceptCompletionHandler.onCompleted(Nio2Acceptor.java:135)
at org.apache.sshd.common.io.nio2.Nio2Acceptor$AcceptCompletionHandler.onCompleted(Nio2Acceptor.java:120)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler$1.run(Nio2CompletionHandler.java:32)
at java.base/java.security.AccessController.doPrivileged(Native Method)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:30)
at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)
at java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)
at java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at java.base/java.lang.Thread.run(Thread.java:834)
2020-02-13 14:33:16,014 [sshd-SshServer[5d483539]-nio2-thread-1] [WARN ] (o.a.s.c.k.FileKeyPairProvider:144) - Unable to read key /opt/jfrog/artifactory/etc/security/artifactory.ssh.private
java.io.IOException: unrecognised object: OPENSSH PRIVATE KEY
at org.bouncycastle.openssl.PEMParser.readObject(Unknown Source)
at org.apache.sshd.common.keyprovider.FileKeyPairProvider.doLoadKey(FileKeyPairProvider.java:124)
at org.apache.sshd.common.keyprovider.FileKeyPairProvider$1$1.setNextObject(FileKeyPairProvider.java:106)
at org.apache.sshd.common.keyprovider.FileKeyPairProvider$1$1.hasNext(FileKeyPairProvider.java:89)
at org.apache.sshd.common.keyprovider.AbstractKeyPairProvider.getKeyTypes(AbstractKeyPairProvider.java:54)
at org.apache.sshd.server.session.ServerSession.sendKexInit(ServerSession.java:106)
at org.apache.sshd.server.session.ServerSession.readIdentification(ServerSession.java:168)
at org.apache.sshd.common.session.AbstractSession.messageReceived(AbstractSession.java:302)
at org.apache.sshd.common.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:54)
at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:184)
at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:170)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler$1.run(Nio2CompletionHandler.java:32)
at java.base/java.security.AccessController.doPrivileged(Native Method)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:30)
at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)
at java.base/sun.nio.ch.Invoker.invokeDirect(Invoker.java:158)
at java.base/sun.nio.ch.UnixAsynchronousSocketChannelImpl.implRead(UnixAsynchronousSocketChannelImpl.java:560)
at java.base/sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:277)
at java.base/sun.nio.ch.AsynchronousSocketChannelImpl.read(AsynchronousSocketChannelImpl.java:298)
at java.base/java.nio.channels.AsynchronousSocketChannel.read(AsynchronousSocketChannel.java:425)
at org.apache.sshd.common.io.nio2.Nio2Session.startReading(Nio2Session.java:170)
at org.apache.sshd.common.io.nio2.Nio2Acceptor$AcceptCompletionHandler.onCompleted(Nio2Acceptor.java:135)
at org.apache.sshd.common.io.nio2.Nio2Acceptor$AcceptCompletionHandler.onCompleted(Nio2Acceptor.java:120)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler$1.run(Nio2CompletionHandler.java:32)
at java.base/java.security.AccessController.doPrivileged(Native Method)
at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:30)
at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)
at java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)
at java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at java.base/java.lang.Thread.run(Thread.java:834)
{code}
 

Notice the
{code:java}
unrecognised object: OPENSSH PRIVATE KEY{code}
This means that the new RSA format for ssh private keys is not supported.

When I tried the old RSA format, that starts with:
{code:java}
-----BEGIN RSA PRIVATE KEY-----{code}
It worked as expected.

This issue would probably be encountered by almost everyone who will try to use ssh authentication from a MAC.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1m5s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Monitoring -> Service Status screen in 7.0+ shows both nodes as primary in HA cluster,RTFACT-21251,90535,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mcarlton,mcarlton,12/Feb/20 11:20 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,7.0.7,,,,,,,High Availability,,,,,,,0,,,,,,"I don't think I can attach a screenshot, but if you go to the Monitoring -> Service Status page on Artifactory 7.0+ in a HA cluster setup, you will see both nodes displayed as primary, even if you correctly have only one node set as primary in the system.yaml configuration file for the server.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ltk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Mar/20 9:47 PM;mcarlton;This has been fixed in the latest version of Artifactory and can be closed.",,,,,,,,,,
remote_downloaded stat should provide a single result. ,RTFACT-21249,90533,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,12/Feb/20 10:24 PM,11/Feb/21 12:21 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,AQL,,,,,,,0,,,,,,"The customer is expecting a single returned result when querying the remote_downloaded.  They expect the behavior to be similar to downloaded.  The issue is the remote_downloaded will return a stat for every different origin/IP that has a smart remote pointing to this local. 

They are expecting the query to return the last time it was remotely downloaded from any of the origins, a single returned result.  Their use case is to cleanup artifacts.  They want to be able to run the remote_downloaded artifacts and either delete it from the local if it has not been remotely downloaded from anywhere since a given date, or leave it if it has.

The problem is there is no way to cleanup based on usage, when

 

Reproduce

Create a local on one artifactory instance.

Create a smart remote on two other instances.

Download the artifact through the smart remote on both instances.  You should see the remote download increased to 2 on the local repository.

Run the following query:

items.find(
 \{""repo"":{""$match"":""<REPO_NAME>""}},
 \{""name"":{""$match"":""<ARTIFACT_NAME""}}
 ).include(""stat.remote_downloaded"")

This will return both of the downloads from both instances.

Run the following query:

{""repo"":\{""$match"":""<REPO_NAME>""}},
 \{""name"":{""$match"":""<ARTIFACT_NAME""}},

{""stat.remote_downloaded"":\{""$lte"":""2019-10-01T00:00:00.000Z""}}
 ).include(""stat.remote_downloaded"") 

AN EXAMPLE

The below is running the above AQL query on a local repository that has multiple instances pointing a smart remote to it.  There will be an entry for each unique origin as you can see below.

curl -uadmin:password -XPOST [http://art.com/artifactory/api/search/aql] -T test.aql

{

""results"" : [ {

  ""repo"" : ""example-repo-local"",

  ""path"" : ""."",

  ""name"" : ""test.txt"",

  ""type"" : ""file"",

  ""size"" : 6,

  ""created"" : ""2020-02-18T16:22:05.235Z"",

  ""created_by"" : ""admin"",

  ""modified"" : ""2020-02-18T16:22:04.000Z"",

  ""modified_by"" : ""admin"",

  ""updated"" : ""2020-02-18T16:22:05.241Z"",

  ""stats"" : [

*

*{     *""downloaded"" : ""2020-02-18T16:38:11.946Z"",**     **""downloaded_by"" : ""admin"",**     **""downloads"" : 2,**     **""remote_downloaded"" : ""2020-02-18T16:45:31.079Z"",**     **""remote_downloaded_by"" : ""user"",**     **""remote_downloads"" : 2,**     **""remote_origin"" : ""11.111.1.11"",**     **""remote_path"" : ""11.111.1.11""*   *}*

*

*, {**

    *""downloaded"" : ""2020-02-18T16:38:11.946Z"",*

    *""downloaded_by"" : ""admin"",*

    *""downloads"" : 2,*

    *""remote_downloaded"" : ""2020-02-18T16:40:08.183Z"",*

    *""remote_downloaded_by"" : ""user"",*

    *""remote_downloads"" : 5,*

    *""remote_origin"" : ""33.33.33.33"",*

    *""remote_path"" : ""33.33.33.33""*

  } ]

} ]

 

So if you are trying to delete unused artifacts that have not been remote downloaded, there is no way to do this based on the above results.  The expected behavior is to return a single result, regardless of the different origins.  The returned result should take into account all the different origins and return the single most recent remote download.  

 

Let's say you want to delete everything has not been downloaded since *2020-02-18T16:42:08.183Z.*  You would run the same query and see a single result get returned, but this would be wrong as there was a more recent remote download.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1lt4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Working with Cache-fs might cause high CPU,RTFACT-21247,90509,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,galba,shaniat,shaniat,12/Feb/20 3:28 PM,11/Feb/21 12:24 PM,18/Feb/21 8:59 AM,,6.18.0,,,,,,,,,,,,,,1,PB_Done,,,,,"In some cases, Artifactory may experience high CPU in case the new cache-fs mechanism is working following the implementation change from Artifactory version 6.12 which may cause Artifactory to be unresponsive.

A possible workaround for this behavior is to disable the new cache-fs implementation by adding the following to the binarystore.xml file:

{code:java}
<provider id=""cache-fs"" type=""cache-fs"">
       <multiReadEnabled>false</multiReadEnabled>
   </provider>

{code}

 
",,,,,,,,,,,,,,,,,,,"12/Apr/20 12:45 PM;shaniat;AfterUpgrade.dump;https://www.jfrog.com/jira/secure/attachment/41541/AfterUpgrade.dump","12/Apr/20 12:47 PM;shaniat;Afterupgrade.png;https://www.jfrog.com/jira/secure/attachment/41543/Afterupgrade.png","12/Apr/20 12:45 PM;shaniat;BeforeUpgrade.dump;https://www.jfrog.com/jira/secure/attachment/41542/BeforeUpgrade.dump","12/Apr/20 12:47 PM;shaniat;BeforeUpgrade.png;https://www.jfrog.com/jira/secure/attachment/41544/BeforeUpgrade.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1lns:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Feb/20 8:19 PM;satybob;as","20/Jul/20 10:21 PM;willo;Please note this bug is not limited to file store is on cloud provider. We have checked the code and noted that the scope of the cache handler covers all remote and local file store as well. ",,,,,,,,,
Error when trying to deploy blocked artifact,RTFACT-21239,88496,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yossis,yossis,12/Jan/20 6:35 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,UGA,,,,,"In the tree browser, I'm trying to deploy snapshot artifact to release repository. This is blocked with a messages (as expected), but when I click on deploy again, I'm redirected to the error page and the backend shows an error:
{code:java}
2020-01-12T18:28:21.222Z [jfrt ] [ERROR] [2e6019e65f3eee80] [c.e.m.GlobalExceptionMapper:48] [http-nio-8081-exec-4] - Cannot deploy file jets3t-0.9.4.pom. Cause: /storage/tmp/artifactory-uploads/jets3t-0.9.4.pom (No such file or directory)
org.artifactory.sapi.common.RepositoryRuntimeException: Cannot deploy file jets3t-0.9.4.pom. Cause: /storage/tmp/artifactory-uploads/jets3t-0.9.4.pom (No such file or directory)
    at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:156)
    at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:105)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
    at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
    at com.sun.proxy.$Proxy312.deploy(Unknown Source)
    at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.doDeployment(ArtifactDeployService.java:149)
    at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.deploy(ArtifactDeployService.java:122)
    at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.execute(ArtifactDeployService.java:101)
    at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
    at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
    at org.artifactory.ui.rest.resource.artifacts.deploy.DeployArtifactResource.deployArtifact(DeployArtifactResource.java:73)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
    at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
    at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
    at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
    at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
    at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
    at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
    at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
    at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
    at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
    at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
    at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.lambda$doFilter$1(ArtifactoryAuthenticationFilterChain.java:134)
    at org.artifactory.webapp.servlet.authentication.PropsAuthenticationFilter.doFilter(PropsAuthenticationFilter.java:126)
    at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.doFilter(ArtifactoryAuthenticationFilterChain.java:171)
    at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:400)
    at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:258)
    at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:194)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
    at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryTracingFilter.doFilter(ArtifactoryTracingFilter.java:27)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
    at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.io.FileNotFoundException: /storage/tmp/artifactory-uploads/jets3t-0.9.4.pom (No such file or directory)
    at java.base/java.io.FileInputStream.open0(Native Method)
    at java.base/java.io.FileInputStream.open(FileInputStream.java:219)
    at java.base/java.io.FileInputStream.<init>(FileInputStream.java:157)
    at org.artifactory.repo.service.deploy.ArtifactoryDeployRequestBuilder.fileToDeploy(ArtifactoryDeployRequestBuilder.java:56)
    at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:140)
    ... 92 common frames omitted{code}",,,,,,,,,,,,,,,,,,,"11/Feb/20 1:18 PM;tomere;image-2020-02-11-15-18-55-655.png;https://www.jfrog.com/jira/secure/attachment/39807/image-2020-02-11-15-18-55-655.png","11/Feb/20 1:19 PM;tomere;image-2020-02-11-15-19-21-700.png;https://www.jfrog.com/jira/secure/attachment/39808/image-2020-02-11-15-19-21-700.png","11/Feb/20 1:19 PM;tomere;image-2020-02-11-15-19-32-489.png;https://www.jfrog.com/jira/secure/attachment/39809/image-2020-02-11-15-19-32-489.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc19xc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NuGet repository Artifact properties missing for few artifacts which are downloaded from remote registry,RTFACT-21236,90396,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tataraov,tataraov,11/Feb/20 5:38 AM,11/Feb/21 12:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,,,,,,"*Environment:*

Tested Artifactory version: 6.11.3 & 6.17

Database version : Oracle Database 11g Enterprise Edition Release 11.2.0.2.0  and 11.2.0.4.0

*Issue:* 

NuGet properties are missing in Atifactory UI when pulling from the remote registry for a package.

*Log Entries:*

_2020-02-11 05:25:16,223 [art-exec-200] [INFO ] (o.a.a.n.NuGetCacheBuilderServiceImpl:121) - Populating NuGet package cache for repo nuget-remote-cache_
_2020-02-11 05:25:19,472 [http-nio-8081-exec-5] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'IsAbsoluteLatestVersion':_ 
_2020-02-11 05:25:19,475 [http-nio-8081-exec-5] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'GalleryDetailsUrl':_ 
_2020-02-11 05:25:19,478 [http-nio-8081-exec-5] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'PackageHashAlgorithm':_ 
_2020-02-11 05:25:19,480 [http-nio-8081-exec-5] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'PackageHash':_ 
_2020-02-11 05:25:19,482 [http-nio-8081-exec-5] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'Dependencies':_ 
_2020-02-11 05:25:19,485 [http-nio-8081-exec-5] [ERROR] (o.j.r.n.o.f.c.PropertiesConverter:67) - Unable to convert NuGet Properties field 'LastEdited':_ 
_2020-02-11 05:27:14,656 [http-nio-8081-exec-4] [INFO ] (o.a.e.UploadServiceImpl:399) - Deploy to 'nuget-local:Hangfire.Core.1.7.7.nupkg' Content-Length: unspecified_
_2020-02-11 05:27:14,866 [art-exec-280] [INFO ] (o.j.r.n.NuGetWorkContext:68) - Indexing NuGet metadata for repo 'nuget-local' on path 'Hangfire.Core.1.7.7.nupkg'_
_2020-02-11 05:27:14,920 [art-exec-280] [INFO ] (o.j.r.n.NuGetWorkContext:88) - Finished writing Nuget metadata for repo nuget-local on path 'Hangfire.Core.1.7.7.nupkg' at 1581398834920 ms_
_2020-02-11 05:27:14,962 [art-exec-280] [INFO ] (o.a.s.d.f.d.PropertiesDao:317) - Trimming property value to 4000 characters 'nuget.releaseNotes'_
_2020-02-11 05:27:14,968 [art-exec-280] [WARN ] (o.a.s.f.l.SessionLockEntry:132) - Mutable item 'nuget-local:Hangfire.Core.1.7.7.nupkg' has local modifications that will be discarded._
_2020-02-11 05:27:14,976 [art-exec-280] [ERROR] (o.a.s.a.AsyncAdvice :257) - Could not execute async method: 'public abstract void org.artifactory.addon.NuGetAddon.extractNuPkgInfo(org.artifactory.fs.FileInfo,org.artifactory.common.MutableStatusHolder,boolean)'._
_org.artifactory.storage.StorageException: Failed to set properties on node: 15_
 _at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.setProperties(DbPropertiesServiceImpl.java:203)_
 _at org.artifactory.storage.db.fs.model.DbMutableItem.save(DbMutableItem.java:298)_
 _at org.artifactory.storage.fs.lock.SessionLockEntry.save(SessionLockEntry.java:78)_
 _at org.artifactory.storage.db.fs.session.SqlStorageSession.save(SqlStorageSession.java:73)_
 _at org.artifactory.storage.db.fs.session.SqlStorageSession.beforeCommit(SqlStorageSession.java:132)_
 _at org.artifactory.storage.db.spring.SessionSynchronization.beforeCommit(SessionSynchronization.java:85)_
 _at org.springframework.transaction.support.TransactionSynchronizationUtils.triggerBeforeCommit(TransactionSynchronizationUtils.java:96)_
 _at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerBeforeCommit(AbstractPlatformTransactionManager.java:922)_
 _at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:730)_
 _at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714)_
 _at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:534)_
 _at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:305)_
 _at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)_
 _at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)_
 _at org.artifactory.schedule.aop.AsyncAdvice.doInvoke(AsyncAdvice.java:329)_
 _at org.artifactory.schedule.aop.CompoundInvocation.proceed(CompoundInvocation.java:58)_
 _at org.artifactory.schedule.aop.AsyncAdvice.lambda$submit$1(AsyncAdvice.java:252)_
 _at java.util.concurrent.FutureTask.run(FutureTask.java:266)_
 _at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)_
 _at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)_
 _at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)_
 _at java.lang.Thread.run(Thread.java:748)_
_Caused by: java.sql.SQLException: ORA-01461: can bind a LONG value only for insert into a LONG column_

*Observations:*

Tested with default derby database and the issue is not reproducible on the same version of Artifactory.

*Reproduction steps:* 
 # Install Artifactory 6.11.3 or 6.17 and create NuGet repositories.
 # Try to pull the package hangfire.core.1.7.7 or download locally and push it.
 # Verify the artifactory.log file for error and check the Artifactory UI for the artifact details which will not contain any property.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1kzk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
org.artifactory.storage.fs.VfsException: Repository storage summary failed with exception: Communications link failure,RTFACT-21230,90365,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,binnythomas1989,binnythomas1989,10/Feb/20 3:06 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"*Version :* Artifactory Pro 6.17.0

*DB:* mysql 5.17 from percona xtra db

The artifactory runs as a container on kubernetes 1.14

*Issue:* Recently upgraded from 6.9.0 to 6.17.0 and we could see the below error of connectivity issues on the logs.

[https://github.com/binnythomas-1989/artifactory/blob/master/artifactory.log]

Im not able to identify what the method does, and why we get the communication link failure error. It could be a connectivity with the database when trying to that operation, probably timing out.

Need more ideas on how we could resolve this.

*NOTE:* Artifactory is up and running and some of the basic functionalities i tested worked.

 

*FYI.*

We also see that 

[https://xxxx/artifactory/webapp/#/builds/] 

link loads really slow.

 

*Expected:* The Artifactory latest version should work without these errors.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1kug:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget remote repository will reach out even if the specific artifact is cached,RTFACT-21226,90319,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,10/Feb/20 9:16 AM,11/Feb/21 12:33 PM,18/Feb/21 8:59 AM,,6.16.0,6.17.0,,,,,,Metadata,NuGet,,,,,,1,,,,,,"When a user install a specific version of Nuget Package, Artifactory will still reach to the remote site even though it's cached in the remote-cache. 

Artifactory should be able to serve the package from the cache directly in case that the specific package (and version) exists in the cache. 

For example:
{code:java}
nuget install NewtonSoft.json -version 12.0.3{code}
The expectation is that this will be served from the cache directly and Artifactory should not reach outside. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1kkw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
HTTP SSO working sporadically,RTFACT-21225,90315,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stmelfpcadmin,stmelfpcadmin,10/Feb/20 8:35 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.15.0,6.16.0,6.17.0,,,,,Security,,,,,,,1,,,,,,"We are running the following setup:
 * Apache Reverse Proxy in front of Artifactory (SSL terminates here, takes care of authentication)
 * Artifactory is bound to localhost address and apache acts as a HTTP-Reverse-Proxy
 * X-Artifactory-User is used as HTTP-Header-Field to provide authenticated user (HTTP SSO)

HTTP Single-Sign-On is working sporadically, which is very irritating and we can not figure out why. I am attaching log files from Apache (apache-access.log.txt), Artifactory (artifactory-request.log.txt) and the captured HTTP-Conversation between Apache and Artifactory (http-conversation.txt).

As far as we figured out, the request to /artifactory/ui/auth/current seems to result in anonymous, when SSO is NOT working (when working the Response-JSON contains the authenticated username):

GET /artifactory/ui/auth/current HTTP/1.1

Host: artifactory.stmelf.bybn.de

User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0

Accept: application/json, text/plain, */*

Accept-Language: de,en-US;q=0.7,en;q=0.3

Accept-Encoding: gzip, deflate, br

Referer: [https://artifactory.stmelf.bybn.de/artifactory/webapp/]

Request-Agent: artifactoryUI

serial: 0

X-Requested-With: artUI

DNT: 1

X-Artifactory-User: MLXD

X-Artifactory-Override-Base-Url: [https://artifactory.stmelf.bybn.de/artifactory]

X-Forwarded-For: 10.1.149.109

X-Forwarded-Host: artifactory.stmelf.bybn.de

X-Forwarded-Server: artifactory.stmelf.bybn.de

Connection: Keep-Alive

 

HTTP/1.1 200 OK

Server: Artifactory/6.17.0

X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000

Access-Control-Allow-Methods: GET, POST, DELETE, PUT

Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia

Cache-Control: no-store

Artifactory-UI-messages: []

SessionValid: false

Content-Type: application/json

Transfer-Encoding: chunked

Date: Wed, 05 Feb 2020 06:45:29 GMT

 

{""name"":""anonymous"",""admin"":false,""profileUpdatable"":false,""internalPasswordDisabled"":false,""lastLoggedInMillis"":0,""offlineMode"":false,""disableUIAccess"":false,""proWithoutLicense"":false,""canDeploy"":false,""canManage"":false,""canCreateReleaseBundle"":false,""anonAccessEnabled"":true,""existsInDB"":true,""hideUploads"":false,""requireProfileUnlock"":true,""requireProfilePassword"":true,""numberOfGroups"":0,""buildBasicView"":true}

We have two identical configured instances of Artifactory running, one for testing and one for production use. This only happens in production environment, in test environment SSO seems to be working all the time. In Production environment SSO is broken about 80-90% of the time. This is very irritating.

Can you please help us evalute and fix this issue. This has been bothering us for month, we are not able to track this down, we can not come up with an explaination nor a technical solution to fix this on our own. Why does Artifactroy reply with User anonymous, even though a Username is supplied in HTTP-Header?","Ubuntu 18.04, Oracle Java 8, Artifactory Versions for a long time (don't remember when this behaviour started, but over two years ago)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1kk0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Feb/20 8:38 AM;stmelfpcadmin; 

Apache-Access-Log:
{code:java}
10.1.149.109 - - [05/Feb/2020:07:45:29 +0100] ""GET /artifactory/webapp/ HTTP/1.1"" 401 381 ""-"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 353
10.1.149.109 - MLXD [05/Feb/2020:07:45:29 +0100] ""GET /artifactory/webapp/ HTTP/1.1"" 200 968 ""-"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 270682
10.1.149.109 - - [05/Feb/2020:07:45:29 +0100] ""GET /artifactory/webapp/artifactory_views.3640.js HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 373
10.1.149.109 - MLXD [05/Feb/2020:07:45:29 +0100] ""GET /artifactory/webapp/artifactory_views.3640.js HTTP/1.1"" 200 1165 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 230392
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/auth/current HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 268
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/treebrowser/repoOrder HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 369
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/auth/screen/footer HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 228
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/onboarding/initStatus?$no_spinner=true HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 351
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/auth/screen/footer HTTP/1.1"" 200 816 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 37342
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/auth/current HTTP/1.1"" 200 414 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 53338
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/treebrowser/repoOrder HTTP/1.1"" 200 58 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 45280
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/artifactCount?$no_spinner=true HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 358
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/onboarding/initStatus?$no_spinner=true HTTP/1.1"" 200 139 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 36767
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/artifactCount?$no_spinner=true HTTP/1.1"" 200 74 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 22687
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/info?$no_spinner=true HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 439
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/addon?$no_spinner=true HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 325
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/info?$no_spinner=true HTTP/1.1"" 200 300 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 33646
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/addon?$no_spinner=true HTTP/1.1"" 200 15791 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 30519
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""POST /artifactory/ui/treebrowser?compacted=true&$no_spinner=true HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 326
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/mostDownloaded?$no_spinner=true&force=false HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 337
10.1.149.109 - - [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/latestBuilds?$no_spinner=true HTTP/1.1"" 401 381 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 298
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""POST /artifactory/ui/treebrowser?compacted=true&$no_spinner=true HTTP/1.1"" 200 1453 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 24785
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/mostDownloaded?$no_spinner=true&force=false HTTP/1.1"" 200 990 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 68505
10.1.149.109 - MLXD [05/Feb/2020:07:45:30 +0100] ""GET /artifactory/ui/home/widget/latestBuilds?$no_spinner=true HTTP/1.1"" 200 593 ""https://artifactory.stmelf.bybn.de/artifactory/webapp/"" ""Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0"" 100935
{code}
Artifactory-Request-Log:
{code:java}
20200205074529|252|REQUEST|10.1.149.109|mlxd|GET|/webapp/|HTTP/1.1|200|0
20200205074529|207|REQUEST|10.1.149.109|mlxd|GET|/webapp/artifactory_views.3640.js|HTTP/1.1|200|0
20200205074530|8|REQUEST|10.1.149.109|anonymous|GET|/ui/auth/screen/footer|HTTP/1.1|200|0
20200205074530|4|REQUEST|10.1.149.109|anonymous|GET|/ui/treebrowser/repoOrder|HTTP/1.1|200|0
20200205074530|23|REQUEST|10.1.149.109|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
20200205074530|20|REQUEST|10.1.149.109|anonymous|GET|/ui/onboarding/initStatus|HTTP/1.1|200|0
20200205074530|6|REQUEST|10.1.149.109|anonymous|GET|/ui/home/widget/artifactCount|HTTP/1.1|200|0
20200205074530|5|REQUEST|10.1.149.109|anonymous|GET|/ui/home/widget/info|HTTP/1.1|200|0
20200205074530|6|REQUEST|10.1.149.109|anonymous|GET|/ui/home/widget/addon|HTTP/1.1|200|0
20200205074530|8|REQUEST|10.1.149.109|anonymous|POST|/ui/treebrowser|HTTP/1.1|200|77
20200205074530|52|REQUEST|10.1.149.109|anonymous|GET|/ui/home/widget/mostDownloaded|HTTP/1.1|200|0
20200205074530|78|REQUEST|10.1.149.109|anonymous|GET|/ui/home/widget/latestBuilds|HTTP/1.1|200|0
{code}
 ","10/Feb/20 8:39 AM;stmelfpcadmin;HTTP-Conversation:
{code:java}
GET /artifactory/webapp/ HTTP/1.1
Host: artifactory.stmelf.bybn.de
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: de,en-US;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate, br
DNT: 1
Upgrade-Insecure-Requests: 1
X-Artifactory-User: MLXD
X-Artifactory-Override-Base-Url: https://artifactory.stmelf.bybn.de/artifactory
X-Forwarded-For: 10.1.149.109
X-Forwarded-Host: artifactory.stmelf.bybn.de
X-Forwarded-Server: artifactory.stmelf.bybn.de
Connection: Keep-Alive

HTTP/1.1 200 OK
Server: Artifactory/6.17.0
X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000
Cache-Control: no-store,max-age=0
X-FRAME-OPTIONS: DENY
Accept-Ranges: bytes
ETag: W/""2239-1578564678000""
Last-Modified: Thu, 09 Jan 2020 10:11:18 GMT
Content-Type: text/html
Content-Length: 2239
Date: Wed, 05 Feb 2020 06:45:29 GMT

<!--
  ~ Artifactory is a binaries repository manager.
  ~ Copyright (C) 2018 JFrog Ltd.
  ~
  ~ Artifactory is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ Artifactory is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with Artifactory.  If not, see <http://www.gnu.org/licenses/>.
  -->
<!DOCTYPE html>
<html ng-app=""artifactory.ui"">
<head>
    <meta charset=""UTF-8"">
    <meta name=""google"" content=""notranslate"">
    <meta name=""viewport"" content=""width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"">

    <link rel=""icon"" type=""image/x-icon"" href=""images/favicon.3640.ico""/>

    <!-- Stylesheets -->
    <link rel=""stylesheet"" href=""css/vendorStyles.3640.css""/>
    <link rel=""stylesheet"" href=""css/application.3640.css""/>

    <title></title>
</head>

<body jf-body-class ng-class=""{'load-complete':jfBodyClass.isLoadCompleted()}"">
<jf-spinner domain=""body""></jf-spinner>
<toaster-container toaster-options=""{'position-class': 'toast-top-center', 'newest-on-top': true}""></toaster-container>

<ui-view></ui-view>

<!-- Javascript -->
<script type=""text/javascript"" src=""vendorScripts.3640.js""></script>
<script type=""text/javascript"" src=""templates.3640.js""></script>

<!-- Application code -->
<script src=""artifactory_core.3640.js""></script>
<script src=""artifactory_services.3640.js""></script>
<script src=""artifactory_dao.3640.js""></script>

<script src=""artifactory_ui.3640.js""></script>
<script src=""artifactory_ui_components.3640.js""></script>
<script src=""artifactory_directives.3640.js""></script>
<script src=""artifactory_filters.3640.js""></script>

<script src=""artifactory_views.3640.js""></script>
<script src=""artifactory_states.3640.js""></script>
<script src=""artifactory_main.3640.js""></script>

</body>
</html>
GET /artifactory/webapp/artifactory_views.3640.js HTTP/1.1
Host: artifactory.stmelf.bybn.de
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: */*
Accept-Language: de,en-US;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate, br
Referer: https://artifactory.stmelf.bybn.de/artifactory/webapp/
DNT: 1
X-Artifactory-User: MLXD
X-Artifactory-Override-Base-Url: https://artifactory.stmelf.bybn.de/artifactory
X-Forwarded-For: 10.1.149.109
X-Forwarded-Host: artifactory.stmelf.bybn.de
X-Forwarded-Server: artifactory.stmelf.bybn.de
Connection: Keep-Alive

HTTP/1.1 200 OK
Server: Artifactory/6.17.0
X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000
X-FRAME-OPTIONS: DENY
Accept-Ranges: bytes
ETag: W/""3837-1578564678000""
Last-Modified: Thu, 09 Jan 2020 10:11:18 GMT
Content-Type: application/javascript
Content-Length: 3837
Date: Wed, 05 Feb 2020 06:45:29 GMT

/******/ (function(modules) { // webpackBootstrap
/******/     // install a JSONP callback for chunk loading
/******/     var parentJsonpFunction = window[""webpackJsonp""];
/******/     window[""webpackJsonp""] = function webpackJsonpCallback(chunkIds, moreModules) {
/******/         // add ""moreModules"" to the modules object,
/******/         // then flag all ""chunkIds"" as loaded and fire callback
/******/         var moduleId, chunkId, i = 0, callbacks = [];
/******/         for(;i < chunkIds.length; i++) {
/******/             chunkId = chunkIds[i];
/******/             if(installedChunks[chunkId])
/******/                 callbacks.push.apply(callbacks, installedChunks[chunkId]);
/******/             installedChunks[chunkId] = 0;
/******/         }
/******/         for(moduleId in moreModules) {
/******/             if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/                 modules[moduleId] = moreModules[moduleId];
/******/             }
/******/         }
/******/         if(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);
/******/         while(callbacks.length)
/******/             callbacks.shift().call(null, __webpack_require__);
/******/         if(moreModules[0]) {
/******/             installedModules[0] = 0;
/******/             return __webpack_require__(0);
/******/         }
/******/     };
/******/
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // object to store loaded and loading chunks
/******/     // ""0"" means ""already loaded""
/******/     // Array means ""loading"", array contains callbacks
/******/     var installedChunks = {
/******/         9:0,
/******/         8:0
/******/     };
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId])
/******/             return installedModules[moduleId].exports;
/******/
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             exports: {},
/******/             id: moduleId,
/******/             loaded: false
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.loaded = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/     // This file contains only the entry chunk.
/******/     // The chunk loading function for additional chunks
/******/     __webpack_require__.e = function requireEnsure(chunkId, callback) {
/******/         // ""0"" is the signal for ""already loaded""
/******/         if(installedChunks[chunkId] === 0)
/******/             return callback.call(null, __webpack_require__);
/******/
/******/         // an array means ""currently loading"".
/******/         if(installedChunks[chunkId] !== undefined) {
/******/             installedChunks[chunkId].push(callback);
/******/         } else {
/******/             // start chunk loading
/******/             installedChunks[chunkId] = [callback];
/******/             var head = document.getElementsByTagName('head')[0];
/******/             var script = document.createElement('script');
/******/             script.type = 'text/javascript';
/******/             script.charset = 'utf-8';
/******/             script.async = true;
/******/
/******/             script.src = __webpack_require__.p + """" + chunkId + ""."" + ({""5"":""artifactory_states.3640""}[chunkId]||chunkId) + "".js"";
/******/             head.appendChild(script);
/******/         }
/******/     };
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = """";
/******/ })
/************************************************************************/
/******/ ([]);
//# sourceMappingURL=artifactory_views.js.3640.mapGET /artifactory/ui/auth/current HTTP/1.1
Host: artifactory.stmelf.bybn.de
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: application/json, text/plain, */*
Accept-Language: de,en-US;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate, br
Referer: https://artifactory.stmelf.bybn.de/artifactory/webapp/
Request-Agent: artifactoryUI
serial: 0
X-Requested-With: artUI
DNT: 1
X-Artifactory-User: MLXD
X-Artifactory-Override-Base-Url: https://artifactory.stmelf.bybn.de/artifactory
X-Forwarded-For: 10.1.149.109
X-Forwarded-Host: artifactory.stmelf.bybn.de
X-Forwarded-Server: artifactory.stmelf.bybn.de
Connection: Keep-Alive

HTTP/1.1 200 OK
Server: Artifactory/6.17.0
X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia
Cache-Control: no-store
Artifactory-UI-messages: []
SessionValid: false
Content-Type: application/json
Transfer-Encoding: chunked
Date: Wed, 05 Feb 2020 06:45:29 GMT

{""name"":""anonymous"",""admin"":false,""profileUpdatable"":false,""internalPasswordDisabled"":false,""lastLoggedInMillis"":0,""offlineMode"":false,""disableUIAccess"":false,""proWithoutLicense"":false,""canDeploy"":false,""canManage"":false,""canCreateReleaseBundle"":false,""anonAccessEnabled"":true,""existsInDB"":true,""hideUploads"":false,""requireProfileUnlock"":true,""requireProfilePassword"":true,""numberOfGroups"":0,""buildBasicView"":true}GET /artifactory/ui/home/widget/artifactCount?$no_spinner=true HTTP/1.1
Host: artifactory.stmelf.bybn.de
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: application/json, text/plain, */*
Accept-Language: de,en-US;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate, br
Referer: https://artifactory.stmelf.bybn.de/artifactory/webapp/
Request-Agent: artifactoryUI
X-Requested-With: artUI
DNT: 1
X-Artifactory-User: MLXD
X-Artifactory-Override-Base-Url: https://artifactory.stmelf.bybn.de/artifactory
X-Forwarded-For: 10.1.149.109
X-Forwarded-Host: artifactory.stmelf.bybn.de
X-Forwarded-Server: artifactory.stmelf.bybn.de
Connection: Keep-Alive

HTTP/1.1 200 OK
Server: Artifactory/6.17.0
X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia
Cache-Control: no-store
Artifactory-UI-messages: []
SessionValid: false
Content-Type: application/json
Transfer-Encoding: chunked
Date: Wed, 05 Feb 2020 06:45:29 GMT

{""widgetName"":""Artifact count Info"",""widgetData"":{""artifactCount"":132273}}GET /artifactory/ui/home/widget/info?$no_spinner=true HTTP/1.1
Host: artifactory.stmelf.bybn.de
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: application/json, text/plain, */*
Accept-Language: de,en-US;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate, br
Referer: https://artifactory.stmelf.bybn.de/artifactory/webapp/
Request-Agent: artifactoryUI
X-Requested-With: artUI
DNT: 1
X-Artifactory-User: MLXD
X-Artifactory-Override-Base-Url: https://artifactory.stmelf.bybn.de/artifactory
X-Forwarded-For: 10.1.149.109
X-Forwarded-Host: artifactory.stmelf.bybn.de
X-Forwarded-Server: artifactory.stmelf.bybn.de
Connection: Keep-Alive

HTTP/1.1 200 OK
Server: Artifactory/6.17.0
X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia
Cache-Control: no-store
Artifactory-UI-messages: []
SessionValid: false
Content-Type: application/json
Transfer-Encoding: chunked
Date: Wed, 05 Feb 2020 06:45:30 GMT

{""widgetName"":""General Info"",""widgetData"":{""latestRelease"":""6.17.0"",""latestReleaseLink"":""https://www.jfrog.com/confluence/display/RTF/Release+Notes#ReleaseNotes-Artifactory6.17"",""accountManagementLink"":""http://localhost:8086/dashboard/webapp"",""displayAccountManagementLink"":false,""version"":""6.17.0""}}GET /artifactory/ui/home/widget/latestBuilds?$no_spinner=true HTTP/1.1
Host: artifactory.stmelf.bybn.de
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:68.0) Gecko/20100101 Firefox/68.0
Accept: application/json, text/plain, */*
Accept-Language: de,en-US;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate, br
Referer: https://artifactory.stmelf.bybn.de/artifactory/webapp/
Request-Agent: artifactoryUI
X-Requested-With: artUI
DNT: 1
X-Artifactory-User: MLXD
X-Artifactory-Override-Base-Url: https://artifactory.stmelf.bybn.de/artifactory
X-Forwarded-For: 10.1.149.109
X-Forwarded-Host: artifactory.stmelf.bybn.de
X-Forwarded-Server: artifactory.stmelf.bybn.de
Connection: Keep-Alive

HTTP/1.1 200 OK
Server: Artifactory/6.17.0
X-Artifactory-Id: e6371e4755918256:18f4f019:170101e31b7:-8000
Access-Control-Allow-Methods: GET, POST, DELETE, PUT
Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia
Cache-Control: no-store
Artifactory-UI-messages: []
SessionValid: false
Content-Type: application/json
Transfer-Encoding: chunked
Date: Wed, 05 Feb 2020 06:45:30 GMT

{""widgetName"":""Latest Builds"",""widgetData"":{""mostRecentBuilds"":[{""buildName"":""ddl - kontinuierlich, trunk - Checkout, Compile, Unit-Tests, Sonar"",""buildNumber"":""4108""},{""buildName"":""ddl - kontinuierlich, trunk - Checkout, Compile, Unit-Tests, Sonar"",""buildNumber"":""4107""},{""buildName"":""ddl - kontinuierlich, trunk - VPD_M2 - Checkout, Compile, Unit-Tests, Sonar"",""buildNumber"":""15""},{""buildName"":""ddl - kontinuierlich, trunk - Checkout, Compile, Unit-Tests, Sonar"",""buildNumber"":""4106""},{""buildName"":""ddl - kontinuierlich, trunk - Checkout, Compile, Unit-Tests, Sonar"",""buildNumber"":""4105""}]}}
{code}","23/Jul/20 1:45 PM;domruf;We have this problem as well. There is another issue RTFACT-17456",,,,,,,,
Build permission target does not actually add the permission to the build when using an Include Pattern,RTFACT-21208,90139,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,06/Feb/20 10:08 PM,11/Feb/21 12:33 PM,18/Feb/21 8:59 AM,,6.17.1,,,,,,,Build Info Repository,permissions,,,,,,0,,,,,,"If you add a pattern to add a handful of builds to a permission, they will appear to be added.  If you then check the builds and their effective permissions, the permission will not be added.  If you manually move the build or provide the exact pattern when manually moving the build, the effective permission is correct for that specific build.

 

REPRODUCE

Artifactory 6.17 and deploy two builds, build-1 and build-2.

Create a permission target and under add build, include the pattern build**.  You will see both builds get moved to the ""Included Builds"" column.

Check the effective permissions and notice this permission target is not under the effective permissions.

Head back to the same permission target and remove the pattern.  Manually drag and drop the two builds.  The patterns will be added and now the effective permissions are correct.

 

Users need a way to add multiple builds via a common pattern and this does not work.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1jn4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"+ sign in a filename gets converted to a ""space"" on API commands",RTFACT-21204,89994,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,05/Feb/20 7:01 PM,11/Feb/21 12:36 PM,18/Feb/21 8:59 AM,,6.9.5,,,,,,,REST API,,,,,,,1,,,,,,"REPRODUCE
 # Deploy a file with path as below:

com/hello/limits/staging/some-kind-of-app/1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1.txt

      2.  Run the following API command:

curl -uadmin:password -XPOST ""http://art.com/artifactory/api/move/example-repo-local/com/hello/limits/staging/some-kind-of-app/1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1.txt?to=/test-local/com/hello/limits/staging/some-kind-of-app/1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1.txt""

      3.  You will see the following success:

""message"" : ""moving example-repo-local:com/hello/limits/staging/some-kind-of-app/1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1/some-kind-of-app-1.1.1+rel-1.txt to test-local:com/hello/limits/staging/some-kind-of-app/1.1.1 rel-1/some-kind-of-app-1.1.1 rel-1/some-kind-of-app-1.1.1 rel-1.txt completed successfully, 1 artifacts and 0 folders were moved""

  You can see that once moved, the + signs get replaced with a "" "".  This will be where the artifact is deployed and ultimately changes the name of this artifact.

 

I am sure this is not the only API that would cause this behavior.  Need to look into why and when Artifactory will handle a + as a ""space"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1is0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory startup failures after upgrade to 6.17.0 from 6.9.0,RTFACT-21201,89946,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,binnythomas1989,binnythomas1989,05/Feb/20 10:14 AM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,artifactory,,,,,"{\{Version Upgraded: 6.17.0 Old Version: 6.9.0 Artifactory Kubernetes:1.14.0 Database is MySQl under the hood -PerconaXtraDB cluster 5.7.19 }}

The artifactory runs as a container/pod on a kubernetes cluster and so does the database on the same namespace.

*Issue:* Atifactory was being upgraded from 6.9.0 to 6.17.0. On startup we could see the following errors. Im not able to understand what has gone wrong inorder to check where the issue lies.

*Error:*
{quote}Error creating bean with name 'accessJdbcHelperImpl': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Could not initialize database: Unable to load class: com.mysql.jdbc.Driver from ClassLoader:ParallelWebappClassLoader
{quote}
Error logs after restoring the db and binaries from old artifactory version

[initialstartuperrors|https://github.com/binnythomas-1989/artifactory/blob/master/initialerrorsafterrefresh]

Error logs after restarting the pod after a long wait

[errorsafterpodrestart|https://github.com/binnythomas-1989/artifactory/blob/master/startuperrors]

*Expected:* Artifactory should come up and get connected to the database and startup

Please help me to figure what could be the problem, in the best case scenario how to solve it.

 

Steps for Restore:

Create the latest version of artifactory pro 6.17.0.

Refresh database and binaries to 6.17.0 from 6.9.0

Startup artifactory after the db refresh.

 

NOTE: We are able to upgrade to 6.10.0 saftely. Please find the error logs after the db migration which is expected. It would be great if the team can point what could be the problem related to upgrade to any versions after 6.10.0

 

Expected Error logs after the db migration. These logs are from 6.10.0

[https://github.com/binnythomas-1989/artifactory/blob/master/expectederrorsondbrefresh.log]

Here the DB would have a master key different to the one on the local which would be fixed once i restore the binary over to the new version.

 

 

 ",Production,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ihc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/20 9:30 PM;binnythomas1989;We believe the problem is around the 2 jars 

access-application-4.11.0.jar and 

access-server-core-4.11.0.jar after it has been updated to the latest version there is some kind of a mismatch which im not able to understand from the .jar files. The artifactory doesnt come back online. after the change of version from 6.9.0 to 6.11.0 and i could see that access application has been updated to 4.3.0 to 4.11.0 which constitutes to the error.","13/Feb/20 11:51 AM;binnythomas1989;This could be a configuration issue as well. Would request the team to help in understanding where the problem could be, since i wont be able to decompile and figure out where things have failed.",,,,,,,,,
Docker Push on image with Foreign Layers fails,RTFACT-21198,89921,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,04/Feb/20 10:32 PM,11/Feb/21 12:40 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,,,,,,,0,,,,,,"While a normal ""docker push"" will cause a ""Skipping foreign layers"" message on proprietary images (E.G. windows/nanoserver from mcr.microsoft.com), there is a Docker option that bypasses this skip. Even bypassing the skip Artifactory does not accept the upload.

Steps to reproduce:
 # Set up a Docker local repository

In a Windows OS:
 # Do a ""docker pull"" on mcr.microsoft.com/windows/nanoserver:10.0.14393.953
 # Do a ""docker tag"" so it can be pushed to Artifactory
 # Add the flag ""allow-nondistributable-artifacts"":[""<ART_URL>""] to the Docker's daemon.json file - reboot the daemon to apply
 # Attempt a docker push to Artifactory, receive a ""manifest invalid"" error

 

On the backend, Artifactory throws a 400 HTTP error with these error lines - I suspect it can't handle the funny foreign layers manifest.json format:

 

2020-02-04 22:21:28,493 [http-nio-8081-exec-1] [ERROR] (o.j.r.d.m.ManifestSchema2Deserializer:133) - ManifestSchema2Deserializer CIRCUIT BREAKER: 5000 Iterations ware performed breaking operation.

Manifest: {

   ""schemaVersion"": 2,

   ""mediaType"": ""application/vnd.docker.distribution.manifest.v2+json"",

   ""config"":

{       ""mediaType"": ""application/vnd.docker.container.image.v1+json"",       ""size"": 582,       ""digest"": ""sha256:18a0d32a4b98e8a3e1ab7eb33b2be75b4826cbf43754961db08101b52bce0840""    }

,

   ""layers"": [

     

{          ""mediaType"": ""application/vnd.docker.image.rootfs.diff.tar.gzip"",          ""size"": 259260404,          ""digest"": ""sha256:4797ee8f7d169ca98bb466b06594b299a17e9483a9021d50d35f10a2a4f844bb""       }

,

     

{          ""mediaType"": ""application/vnd.docker.image.rootfs.diff.tar.gzip"",          ""size"": 118165952,          ""digest"": ""sha256:bb5b3d0611aa1e66908c365c5a22ed43173d6a2a4f38d3c292ef17a2a44bb0a6""       }

   ]

}

jsonBytes:{""config"":

{""Hostname"":"""",""Domainname"":"""",""User"":"""",""AttachStdin"":false,""AttachStdout"":false,""AttachStderr"":false,""Tty"":false,""OpenStdin"":false,""StdinOnce"":false,""Env"":null,""Cmd"":[""c:\\windows\\system32\\cmd.exe""],""Image"":"""",""Volumes"":null,""WorkingDir"":"""",""Entrypoint"":null,""OnBuild"":null,""Labels"":null}

,""created"":""2017-03-08T08:52:53.2940846-08:00"",""os"":""windows"",""os.version"":""10.0.14393.953"",""rootfs"":{""type"":""layers"",""diff_ids"":[""sha256:6c357baed9f5177e8c8fd1fa35b39266f329535ec8801385134790eb08d8787d"",""sha256:75c873eec901cd63e8989874fe2a8056354876ffd7e877d3e3216d3edbf70f94""]}}

2020-02-04 22:21:28,494 [http-nio-8081-exec-1] [ERROR] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:822) - Error uploading manifest: 'Circuit Breaker Threshold Reached, Breaking Operation. see log output for manifest details.'

2020-02-04 22:21:28,505 [http-nio-8081-exec-1] [DEBUG] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:823) - Error uploading manifest:

java.lang.IllegalArgumentException: Circuit Breaker Threshold Reached, Breaking Operation. see log output for manifest details.

at org.jfrog.repomd.docker.manifest.ManifestSchema2Deserializer.breakeCircuit(ManifestSchema2Deserializer.java:134)

at org.jfrog.repomd.docker.manifest.ManifestSchema2Deserializer.checkCircuitBreaker(ManifestSchema2Deserializer.java:124)

at org.jfrog.repomd.docker.manifest.ManifestSchema2Deserializer.applyAttributesFromContent(ManifestSchema2Deserializer.java:107)

at org.jfrog.repomd.docker.manifest.ManifestSchema2Deserializer.deserialize(ManifestSchema2Deserializer.java:42)

at org.jfrog.repomd.docker.manifest.ManifestDeserializer.deserialize(ManifestDeserializer.java:32)

at org.jfrog.repomd.docker.v2.rest.handler.DockerV2LocalRepoHandler.processUploadedManifestType(DockerV2LocalRepoHandler.java:301)

at org.jfrog.repomd.docker.v2.rest.handler.DockerV2LocalRepoHandler.uploadManifest(DockerV2LocalRepoHandler.java:275)

at org.jfrog.repomd.docker.v2.rest.DockerV2Resource.uploadManifest(DockerV2Resource.java:81)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ibs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Feb/20 10:34 PM;patrickr;The workaround is to take advantage of RTFACT-14327 and pull an image containing foreign layers through an Artifactory Remote Repository with ""Enable Foreign Layers Caching"" enabled (Found under Admin -> Repositories -> Remote -> Advanced).",,,,,,,,,,
Importing a repository shows delete entries in access log from virtual repositories,RTFACT-21196,89889,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,04/Feb/20 3:44 PM,11/Feb/21 12:41 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Import/export,,,,,,,1,,,,,,"When we import a repository I could see delete entries for virtual repositories in the access.log.

Please find below, steps to reproduce:

-> Start an Artifactory instance

-> Deploy files to a repository

-> Export the repository contents

-> Create another repository and try to import the contents from the previous backup

-> Once import initiated I could observe delete entries in acess.log is triggered for all virtual repositories. But actual files corresponding to the virtual repository won't get deleted.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1i4w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"For request against Non-existing conda repo, Artifactory should show error as 404  instead of 500 ",RTFACT-21183,89821,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,03/Feb/20 7:48 PM,11/Feb/21 12:42 PM,18/Feb/21 8:59 AM,,6.17.0,6.9.5,,,,,,Conda,,,,,,,0,PB_Done,,,,,"In case, request against non-exsiting conda repository, Artifactory currently shows 500 error as below. It should be 404 error.

 

For example,

{color:#ff0000}*tconda*{color} is non-existing repository

 

+Steps to reproduce+

**conda install selenium

Collecting package metadata (repodata.json): failed

 

CondaHTTPError: HTTP 500 INTERNAL SERVER ERROR for url <http://admin:password@ART_URL:8081/artifactory/api/conda/{color:#ff0000}*tconda*{color}/osx-64/repodata.json>

Elapsed: 00:01.819933

 

A remote server error occurred when trying to retrieve this URL.

 

A 500-type error (e.g. 500, 501, 502, 503, etc.) indicates the server failed to

fulfill a valid request.  The problem may be spurious, and will resolve itself if you

try your request again.  If the problem persists, consider notifying the maintainer

of the remote server.

*artifactory.log*

2020-02-01 19:17:00,373 [http-nio-8081-exec-2] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Unsupported Conda repository request for tconda

java.lang.IllegalStateException: Unsupported Conda repository request for tconda

 *request.log*

20200201191700|126|REQUEST|52.16.203.109|admin|GET|/api/conda/{color:#ff0000}*tconda*{color}/noarch/repodata.json|HTTP/1.1|{color:#ff0000}*500*{color}|0

20200201191700|121|REQUEST|52.16.203.109|admin|GET|/api/conda/{color:#ff0000}*tconda*{color}/osx-64/repodata.json|HTTP/1.1|{color:#ff0000}*500*{color}|0

 

As we know, other than conda repositories usually should show 404 error in case of non-exist repository.

curl -uadmin:password [http://ART_URL:8081/artifactory/generic-local1/a.txt|http://art_url:8081/artifactory/*generic-local1*/a.txt] -k

{

  ""errors"" : [

{     ""status"" : 404,     ""message"" : ""Not Found""   }

]

 

So, we need to change error code from 500 to 404 for non-existing conda repo.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1hrc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
PATCH request to update properties attempts to delete existing properties,RTFACT-21174,89700,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jinyteo,jinyteo,03/Feb/20 4:02 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,6.17.0,6.9.1,,,,,,REST API,,,,,,,0,,,,,,"The artifact has an existing property ""governance.status""

When sending a PATCH request to /api/metadata/repo1/sample.txt

 Request Body:
{code:java}
{
   ""props"":{
     ""random.status"": ""modified""
   }
}{code}
I noticed that artifactory attempts to delete the existing property ""governance.status"" and recreate it despite not being specific in the request body. Is this behavior expected? 

 ",,,,,,,,,,,,,,,,,,,"12/Feb/20 1:07 AM;davids;properties.png;https://www.jfrog.com/jira/secure/attachment/39818/properties.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1h1k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cocopods art cannot download partial dependent artifacts,RTFACT-21173,89699,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lzwzzy,lzwzzy,03/Feb/20 3:50 AM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,artifactory,,,,,"Hi，
   i meet problem  again when  i  use cocopods-art。 
 
  first problem：
  I  edit project podfile ：
  plugin ‘cocopods-art’，sources =>[
      'ios-github-remote'
 ]
add  Pod  'WCDB'  and  execute pod  install ,
 
find wcdb.dependency 'WCDBOptimizedSQLCipher' find souce point ‘GitHub.com’
!https://jfrog--c.eu12.content.force.com/servlet/servlet.FileDownload?file=00P1r00002SMBvd!
 second problem：
 
 I  edit project podfile ：
  plugin ‘cocopods-art’，sources =>[
      'ios-github-remote'
 ]
add  Pod  'GCanvas'  and  execute pod  install ,find problem
!https://jfrog--c.eu12.content.force.com/servlet/servlet.FileDownload?file=00P1r00002SMBve!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1h1c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker image push fails with: `unexpected status: 404 Not Found`,RTFACT-21165,89571,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,semekh,semekh,01/Feb/20 9:53 AM,12/Feb/21 10:26 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Docker,,,,,,,6,,,,,,"Alternative docker clients (e.g. buildkit, buildx) fail upon trying to push a docker image to Artifactory.

I can push the image to DockerHub successfully, but not Artifactory's Docker registry, although normal {{docker push}} is successful on both registries. So, I tried to capture the network requests, and realized that there's a small difference between the way {{docker push}} and {{docker buildx build --push}} push the image layers.

Apparently, {{docker push}} does a sequence of {{POST}}, {{PATCH}}, and {{PUT}} (with no body), while {{docker buildx build --push}} does a {{POST}} followed by a {{PUT}} (with body). The latter {{PUT}} results in a 404 BLOB_UNKNOWN on Artifactory.

Since this is explicitly accepted in Docker registry API (See: Monolithic Upload section at [https://docs.docker.com/registry/spec/api/#monolithic-upload]) I assume this needs to be fixed in Artifactory rather than those clients.",,,,,,,,,,,,,,,,CTO-349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1g9c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Feb/20 2:41 PM;steffel;Just had the same problem pushing a multi arch image onto Artifactory. Appreciating this very much, hopefully implemented soon.",,,,,,,,,,
Visual studio nuget package manager search does not return partial matches,RTFACT-21161,89544,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,np,np,31/Jan/20 7:33 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,NuGet,,,,,,,1,,,,,,"When using artifactory as a package source in visual studio, partial searching for a package does not return any results.

I have intercepted the traffic and could see that no results are returned from artifactory api.",I am using Artifactory SaaS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1g3c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
An error message in the logs while starting Artifactory service in Windows environment,RTFACT-21154,87733,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,sankark,sankark,02/Jan/20 5:38 PM,11/Feb/21 12:46 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to Reproduce:

-> Download https://entplus.jfrog.io/artifactory/libs-staging/org/artifactory/pro/jfrog-artifactory-pro-windows/7.0.0-m575/jfrog-artifactory-pro-windows-7.0.0-m575.zip

-> Unzip and install as a service

-> Following Error message appeared in the 'artifactory-service.log' while starting service using ""{{sc}} {{start artifactory}}"" command even though service started successfully 

 
{code:java}
2020-01-02T13:52:39.138Z [jfrt ] [INFO ] [ ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-14 ] - [Node ID: IN-SUPPORT-TEST] detected local create for config 'artifactory.security.artifactory.key'
2020-01-02T13:52:39.144Z [jfrt ] [ERROR] [ ] [c.d.FileConfigWithTimestamp:37] [Thread-14 ] -
java.io.FileNotFoundException: C:\Users\IN-RND-TEST\Downloads\jfrog-artifactory-pro-windows-7.0.0-m575\artifactory-pro-7.0.0-m575\var\etc\artifactory\security\artifactory.key (The process cannot access the file because it is being used by another process)
at java.base/java.io.FileInputStream.open0(Native Method)
at java.base/java.io.FileInputStream.open(FileInputStream.java:219)
at java.base/java.io.FileInputStream.<init>(FileInputStream.java:157)
at org.jfrog.config.db.FileConfigWithTimestamp.getBinaryStream(FileConfigWithTimestamp.java:35)
at org.jfrog.config.db.ConfigsDao.setConfig(ConfigsDao.java:134)
at org.jfrog.config.wrappers.ConfigWrapperImpl.fileToDb(ConfigWrapperImpl.java:455)
at org.jfrog.config.wrappers.ConfigWrapperImpl.modifyInternal(ConfigWrapperImpl.java:402)
at org.jfrog.config.wrappers.ConfigWrapperImpl.modifiedWithRetry(ConfigWrapperImpl.java:369)
at org.jfrog.config.wrappers.ConfigWrapperImpl.create(ConfigWrapperImpl.java:238)
at org.jfrog.config.wrappers.ConfigurationManagerImpl.handleFileCreatedEvent(ConfigurationManagerImpl.java:284)
at org.jfrog.config.wrappers.ConfigurationManagerImpl.fileChanged(ConfigurationManagerImpl.java:263)
at org.jfrog.config.wrappers.ConfigurationManagerImpl.fileChanged(ConfigurationManagerImpl.java:238)
at org.jfrog.config.watch.FileWatchingManager.doWatch(FileWatchingManager.java:109)
at java.base/java.lang.Thread.run(Thread.java:834)
2020-01-02T13:52:39.145Z [jfrt ] [ERROR] [ ] [w.ConfigurationManagerImpl:272] [Thread-14 ] - Config manager Failed to handle file change for file: C:\Users\IN-RND-TEST\Downloads\jfrog-artifactory-pro-windows-7.0.0-m575\artifactory-pro-7.0.0-m575\var\etc\artifactory\security\artifactory.key
java.lang.RuntimeException: Failed to insert/update config 'artifactory.security.artifactory.key' to database.
at org.jfrog.config.db.ConfigsDao.setConfig(ConfigsDao.java:160)
at org.jfrog.config.wrappers.ConfigWrapperImpl.fileToDb(ConfigWrapperImpl.java:455)
at org.jfrog.config.wrappers.ConfigWrapperImpl.modifyInternal(ConfigWrapperImpl.java:402)
at org.jfrog.config.wrappers.ConfigWrapperImpl.modifiedWithRetry(ConfigWrapperImpl.java:369)
at org.jfrog.config.wrappers.ConfigWrapperImpl.create(ConfigWrapperImpl.java:238)
at org.jfrog.config.wrappers.ConfigurationManagerImpl.handleFileCreatedEvent(ConfigurationManagerImpl.java:284)
at org.jfrog.config.wrappers.ConfigurationManagerImpl.fileChanged(ConfigurationManagerImpl.java:263)
at org.jfrog.config.wrappers.ConfigurationManagerImpl.fileChanged(ConfigurationManagerImpl.java:238)
at org.jfrog.config.watch.FileWatchingManager.doWatch(FileWatchingManager.java:109)
at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NullPointerException: null
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2314)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:2270)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2291)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:2246)
at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:765)
at org.jfrog.config.db.ConfigsDao.setConfig(ConfigsDao.java:135)
... 9 common frames omitted
2020-01-02T13:52:39.146Z [jfrt ] [INFO ] [b034a51008e44f7e] [o.j.c.w.ConfigWrapperImpl:504 ] [art-init ] - [Node ID: IN-SUPPORT-TEST] detected local create for config 'artifactory.security.artifactory.key'
{code}
 ","Windows 10

https://entplus.jfrog.io/artifactory/libs-staging/org/artifactory/pro/jfrog-artifactory-pro-windows/7.0.0-m575/jfrog-artifactory-pro-windows-7.0.0-m575.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc15k8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory will fail to deploy buildinfo which include ""[ ]"" in property value",RTFACT-21151,89395,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,29/Jan/20 2:46 PM,11/Feb/21 12:48 PM,18/Feb/21 8:59 AM,,6.13.1,6.17.0,,,,,,Build Info,Build Info Repository,,,,,,0,,,,,,"Artifactory should allow deploying a buildInfo which include ""[ ]"" in modules value,

+Steps to reproduce:+

-> Spin up the latest version of Artifactory
 -> Deploy build info file which has ""[ ]"" in it.

+Error in artifactory.log:+

2020-01-29 14:13:25,059 [http-nio-8081-exec-8] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - com.fasterxml.jackson.databind.JsonMappingException: java.util.LinkedHashMap cannot be cast to java.lang.String (through reference chain: org.jfrog.build.api.Build[""modules""]->java.util.ArrayList[0]->org.jfrog.build.api.Module[""properties""]->java.util.Properties[""vault.embeddedfiles.map""])
org.jfrog.common.JsonParsingException: com.fasterxml.jackson.databind.JsonMappingException: java.util.LinkedHashMap cannot be cast to java.lang.String (through reference chain: org.jfrog.build.api.Build[""modules""]->java.util.ArrayList[0]->org.jfrog.build.api.Module[""properties""]->java.util.Properties[""vault.embeddedfiles.map""])
 at org.jfrog.common.MapperUtilsBase.unchecked(MapperUtilsBase.java:238)
 at org.jfrog.common.MapperUtilsBase.valueToString(MapperUtilsBase.java:54)
 at org.jfrog.common.JsonUtils.valueToString(JsonUtils.java:27)
 at org.artifactory.build.BuildServiceUtils.getBuildAsJsonString(BuildServiceUtils.java:241)
 at org.artifactory.build.BuildServiceImpl.deployBuildJson(BuildServiceImpl.java:347)
 at org.artifactory.build.BuildServiceImpl.addBuild(BuildServiceImpl.java:325)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
 at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
 at com.sun.proxy.$Proxy193.addBuild(Unknown Source)
 at org.artifactory.rest.resource.ci.BuildResource.addBuild(BuildResource.java:289)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)",,,,,,,,,,,,,,,,RTFACT-19933,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1f6o:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Disable GC during System Import without Content,RTFACT-21140,89237,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,satheeshb,satheeshb,28/Jan/20 10:46 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,Artifact Storage,Artifactory Cloud,,,,,,0,PB_Done,,,,,"During migration of artifactory from one region to another, we carry out the below process:
 # Copy the files in the filestore to the new region. 
 # Do system export. 
 # Create new artifactory in new region which is connected to the new filestore. 
 # Import the data. 

Issue: While importing the data, the GC runs and it assumes that the data which are not imported yet as needs to be Garbage collected and are removed. ","Artifactory Cloud

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1e9c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Watchers don't work when promoting builds using Artifactory Plugin in Jenkins,RTFACT-21135,89168,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,seidhkona,seidhkona,27/Jan/20 6:59 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Watches,,,,,,,2,,,,,,"We are using Interactive Promotion for Published builds in Jenkins and that works fine, except for watchers of the target repository don't get emails when the artifact is being moved (added) into the repository.

When we try to manually move artifact from one repo to another, notification is being sent to the watcher only about the artifact being deleted from source repository. No notification is sent about artifact being added to the destination repository.

The Watches description states that it allows users to monitor repositories for storage events (create/delete/modify), but seems like it's not working as expected. [https://www.jfrog.com/confluence/display/RTF6X/Watches]

We, specifically, need this to work with the Artifactory plugin in Jenkins.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1dxc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remove distinct's automatic addition in AQL queries,RTFACT-21128,89022,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gidis,gidis,25/Jan/20 8:27 PM,11/Feb/21 1:02 PM,18/Feb/21 8:59 AM,,,,,,,,,AQL,,,,,,,0,,,,,,"We can improve performance by removing the distinct command from AQL queries when possible.

Example: single domain queries and queries without duplications can be executed without distinct.",,,,,,,,,,,,,,,,RTFACT-20842,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1d3s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Nuget package with SemVer2 gives 404 while searching with ""Packages(Id=)"" endpoint",RTFACT-21126,88980,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,muhammedk,muhammedk,22/Jan/20 4:09 PM,11/Feb/21 1:05 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,PB_Done,,,,,"The NuGet package deployed in Artifactory with SemVer2 version gives 404 when searched with ""Packages(Id=)"" endpoint. 

Note: This only happens with the SemVer2 version containing the ""+"" character. Ex: 1.0.1+security.patch.2349, 2.4.1-pre.0.134+git.hash.5aa7fa8324af609bcdb43a90e54ee076d1a6b067, 2.4.1-pre.0.134+buildagent.12.date.2016.3.31.config.debug

However, works well with other SemVer2 versions such as 1.0.0-beta.20.5, 1.0.0-alpha.1.2.30

 

Steps to reproduce the behaviour:
 # Use the NuGet CLI to build the package.
 # Use the attached demo5.nuspec [^demo5.nuspec] file to build the package (nuget pack demo5.nuspec)
 # Push the package to Artifactory (nuget push demo5.1.0.1.nupkg)
 # Use this URL ""http://<Art_Host>:<Port>/artifactory/api/nuget/nuget-local/FindPackagesById()?semVerLevel=2.0.0&id=demo5"" to get the Atom Feed.
 # Use the URL available in Id field of the Atom feed returned in the above step.""http://<Art_Host>:<Port>/artifactory/api/nuget/nuget-local/Packages(Id='demo5',Version='1.0.1+security.patch.2349')"" --> Returns 404 error.

 

The 404 is only returned when we search the package using the ""Packages(Id=)"" endpoint and not for ""FindPackagesById()"" endpoint.",,,,,,,,,,,,,,,,,,,"22/Jan/20 4:03 PM;muhammedk;demo5.nuspec;https://www.jfrog.com/jira/secure/attachment/39208/demo5.nuspec","22/Jan/20 4:01 PM;muhammedk;demo5.nuspec;https://www.jfrog.com/jira/secure/attachment/39209/demo5.nuspec","22/Jan/20 4:08 PM;muhammedk;nuget.zip;https://www.jfrog.com/jira/secure/attachment/39207/nuget.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4p7:az9vc",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Plugin CancelException beforeCopy error sends 409 instead of 412,RTFACT-21124,88960,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,geraldbazil,geraldbazil,21/Jan/20 3:31 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,Plugins,,,,,,,0,PB_Done,,,,,"We have a plugin with code to override status code in beforeCreate (works with PUT)

and beforeCopy (always returns 409 with /api/copy)
{code}



if (errorMessage) {
 log.warn ""[${PLUGIN_ID}] Rejected copy of ${item.repoPath} to ${targetRepoPath}""

 // Return a 412 HTTP status (PRECONDITION FAILED) to the client
 throw new CancelException(errorMessage, 412) {
 Throwable fillInStackTrace() {
 null
 }
 }

{code}

The beforeCopy status override should work just like beforeCreate. It should not have a hardcode value (409) but instead a default that could be override. This is a bug since it is not a conflict and only happens with a copy. 


Bug: After investigating the behavior against Artifactory code, it seems that the HTTP server response arriving from Artifactory (meaning the '409') is hardcoded and is send by a default parameter that is used when conflicts occurs.
Since treating the error message in the copy process, that is going through the plugin, as a conflict, Artifactory will always give '409' as a response. 


Documentation is here:
[https://www.jfrog.com/confluence/display/RTF/User+Plugins#UserPlugins-Storage]

Storage
 Handling and manipulating ""storage"" events...
If you want to abort an action, you can do that in 'before' methods by throwing a runtime org.artifactory.exception.CancelException with an error message and a proper http error code.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1cqg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Error uploading manifest: 'Could not locate artifact 'test-docker:arty-test/latest/manifest.json'.',RTFACT-21123,88941,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,obogdan,obogdan,20/Jan/20 5:27 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,,,,,,,,0,,,,,,"Uploading to the docker repo (registry) fails, even though *Block pushing of image manifest v2 schema 1* is unchecked for this repo.

I am trying to update the image by pushing a new image on the *latest* tag.

Docker push fails with:
{noformat}
[DEPRECATION NOTICE] registry v2 schema1 support will be removed in an upcoming release. Please contact admins of the test-docker.arty-tf-test.pmops.net registry NOW to avoid future disruption. More information at

[https://docs.docker.com/registry/spec/deprecated-schema-v1/]

manifest invalid: manifest invalid
{noformat}
 Artifactory logs give:
{noformat}
2020-01-20 17:14:35,242 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:257) - Deploying docker manifest for repo 'arty-test' and tag 'latest' into repo 'test-docker'
2020-01-20 17:14:35,248 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:103) - Removing the unreferenced blob 'arty-test/latest/sha256__3c490f8f4cd5323de9bdae2b71ee08b68e6c97c51431c86c525503ef0367755f'
2020-01-20 17:14:35,249 [http-nio-8081-exec-7] [ERROR] (o.a.r.s.RepositoryServiceImpl:2243) - Could not locate artifact 'test-docker:arty-test/latest/sha256__3c490f8f4cd5323de9bdae2b71ee08b68e6c97c51431c86c525503ef0367755f'.
2020-01-20 17:14:35,251 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:103) - Removing the unreferenced blob 'arty-test/latest/sha256__a3ed95caeb02ffe68cdd9fd84406680ae93d633cb16422d00e8a7c22955b46d4'
2020-01-20 17:14:35,252 [http-nio-8081-exec-7] [ERROR] (o.a.r.s.RepositoryServiceImpl:2243) - Could not locate artifact 'test-docker:arty-test/latest/sha256__a3ed95caeb02ffe68cdd9fd84406680ae93d633cb16422d00e8a7c22955b46d4'.
2020-01-20 17:14:35,254 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:103) - Removing the unreferenced blob 'arty-test/latest/sha256__d242d0a2ac78f42017c2d7efbb251e91173f56ecc4830dbd28ce48d066ce1dd2'
2020-01-20 17:14:35,254 [http-nio-8081-exec-7] [ERROR] (o.a.r.s.RepositoryServiceImpl:2243) - Could not locate artifact 'test-docker:arty-test/latest/sha256__d242d0a2ac78f42017c2d7efbb251e91173f56ecc4830dbd28ce48d066ce1dd2'.
2020-01-20 17:14:35,258 [http-nio-8081-exec-7] [ERROR] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:822) - Error uploading manifest: 'Could not locate artifact 'test-docker:arty-test/latest/manifest.json'.'
2020-01-20 17:14:35,259 [art-exec-2] [INFO ] (o.a.a.d.DockerV2UploadsCleaner:34) - Starting cleanup of idle docker uploads repo path: test-docker:arty-test/_uploads
2020-01-20 17:14:35,259 [art-exec-2] [INFO ] (o.a.a.d.DockerV2UploadsCleaner:41) - Completed idle docker uploads cleanup for path test-docker:arty-test/_uploads, removed 0 blobs.
2020-01-20 17:14:35,278 [http-nio-8081-exec-1] [INFO ] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:257) - Deploying docker manifest for repo 'arty-test' and tag 'latest' into repo 'test-docker'
2020-01-20 17:14:35,282 [http-nio-8081-exec-1] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:103) - Removing the unreferenced blob 'arty-test/latest/sha256__208ffc9296066cb9d17cd7781e622744ef5f038fd39ee86c57a815cd11cb781a'
2020-01-20 17:14:35,282 [http-nio-8081-exec-1] [ERROR] (o.a.r.s.RepositoryServiceImpl:2243) - Could not locate artifact 'test-docker:arty-test/latest/sha256__208ffc9296066cb9d17cd7781e622744ef5f038fd39ee86c57a815cd11cb781a'.
2020-01-20 17:14:35,285 [http-nio-8081-exec-1] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:103) - Removing the unreferenced blob 'arty-test/latest/sha256__3c490f8f4cd5323de9bdae2b71ee08b68e6c97c51431c86c525503ef0367755f'
2020-01-20 17:14:35,285 [http-nio-8081-exec-1] [ERROR] (o.a.r.s.RepositoryServiceImpl:2243) - Could not locate artifact 'test-docker:arty-test/latest/sha256__3c490f8f4cd5323de9bdae2b71ee08b68e6c97c51431c86c525503ef0367755f'.
2020-01-20 17:14:35,287 [http-nio-8081-exec-1] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:103) - Removing the unreferenced blob 'arty-test/latest/sha256__d242d0a2ac78f42017c2d7efbb251e91173f56ecc4830dbd28ce48d066ce1dd2'
2020-01-20 17:14:35,287 [http-nio-8081-exec-1] [ERROR] (o.a.r.s.RepositoryServiceImpl:2243) - Could not locate artifact 'test-docker:arty-test/latest/sha256__d242d0a2ac78f42017c2d7efbb251e91173f56ecc4830dbd28ce48d066ce1dd2'.
2020-01-20 17:14:35,291 [http-nio-8081-exec-1] [ERROR] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:822) - Error uploading manifest: 'Could not locate artifact 'test-docker:arty-test/latest/manifest.json'.'
2020-01-20 17:14:35,291 [art-exec-1] [INFO ] (o.a.a.d.DockerV2UploadsCleaner:34) - Starting cleanup of idle docker uploads repo path: test-docker:arty-test/_uploads
2020-01-20 17:14:35,292 [art-exec-1] [INFO ] (o.a.a.d.DockerV2UploadsCleaner:41) - Completed idle docker uploads cleanup for path test-docker:arty-test/_uploads, removed 0 blobs.
{noformat}",running Artifactory in AWS ECS using *docker.bintray.io/jfrog/artifactory-pro:6.17.0*.,,,,,,,,,,,,,,,CTO-349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1cm8:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
access token does not honor permission correctly in case of same name of internal user exist,RTFACT-21122,88940,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,20/Jan/20 4:31 PM,11/Feb/21 1:07 PM,18/Feb/21 8:59 AM,,,,,,,,,permissions,,,,,,,0,,,,,,"In case, an internal user who has lower permission (i.e. read permission only) exists in Artifactory.

When we create a token of which user name exists in Artifactory and giving the higher permission (i.e. write permission).  The given permission to the token seems to be neglected due to the internal user's permission. 

 

+Steps to reproduce+

1. give *full permission* to ARTIFACTORY-DEVELOPER group in Arifactory.

2. create a token for a user (i.e.joseph) attached to ARTIFACTORY-DEVELOPER group

curl -uadmin:password -XPOST 'http://mill.jfrog.info:12021/artifactory/api/security/token' -d 'username=*joseph*' -d 'scope=member-of-groups:ARTIFACTORY-DEVELOPER' -d 'refreshable=true' -d 'expires_in=3600'

{

  ""scope"" : ""member-of-groups:ARTIFACTORY-DEVELOPER api:*"",

  ""access_token"" : ""eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiJJenpzVHFiV1VHVk5fa0FqSzN1NENhNFJWWkZYMGRjeGlEVC1raTBBSXF3In0.eyJzdWIiOiJqZnJ0QDAxZHludG14YmtidHA2MHNtZDdlM2ExcTd6XC91c2Vyc1wvam9zZXBoIiwic2NwIjoibWVtYmVyLW9mLWdyb3VwczpBUlRJRkFDVE9SWS1ERVZFTE9QRVIgYXBpOioiLCJhdWQiOiJqZnJ0QDAxZHludG14YmtidHA2MHNtZDdlM2ExcTd6IiwiaXNzIjoiamZydEAwMWR5bnRteGJrYnRwNjBzbWQ3ZTNhMXE3elwvdXNlcnNcL2FkbWluIiwiZXhwIjoxNTc5MTM2OTgxLCJpYXQiOjE1NzkxMzMzODEsImp0aSI6IjBhZDIxMTZmLWI1MzEtNDgyOS04YjgzLWEwMWM2ODg0ZWFhNCJ9.W3FH25bSR5Q1_HGCGq_dcbjHLtAX3seZCbw44p23BZVrGs6ezSz0bfWpXQi5xmuVXAFwuYT8Pi2_w6n4esxTRsfj4C4BO48ioLOUA8a7F5RKZgDTG3vKO9Nwwc5W-R3CbH-faaGubbYjFVwVofNnVXsW-IJmyMGNsZQaXdoVQpx_tn-KyomcgI_2tO5LagCm1yquoTBQ1XQbdj3svuPah3Mn5X8I248c2603BRwAmhfOPpF1_bhKRfwQJA_iC17CngXkZrMu4_TmAdPlfEnUzvkcrxOVKY1x0dUr2UCfwMmWMuF_kcf6knsed8fSq1g6B_cLdaOZJZg1wacPA1pUtQ"",

  ""refresh_token"" : ""da4fa6bb-ba9d-41df-b03f-eb39268b9791"",

  ""expires_in"" : 3600,

  ""token_type"" : ""Bearer""

}

 

3.

docker login -u joseph -p eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiJJenpzVHFiV1VHVk5fa0FqSzN1NENhNFJWWkZYMGRjeGlEVC1raTBBSXF3In0.eyJzdWIiOiJqZnJ0QDAxZHludG14YmtidHA2MHNtZDdlM2ExcTd6XC91c2Vyc1wvam9zZXBoIiwic2NwIjoibWVtYmVyLW9mLWdyb3VwczpBUlRJRkFDVE9SWS1ERVZFTE9QRVIgYXBpOioiLCJhdWQiOiJqZnJ0QDAxZHludG14YmtidHA2MHNtZDdlM2ExcTd6IiwiaXNzIjoiamZydEAwMWR5bnRteGJrYnRwNjBzbWQ3ZTNhMXE3elwvdXNlcnNcL2FkbWluIiwiZXhwIjoxNTc5MTM2OTgxLCJpYXQiOjE1NzkxMzMzODEsImp0aSI6IjBhZDIxMTZmLWI1MzEtNDgyOS04YjgzLWEwMWM2ODg0ZWFhNCJ9.W3FH25bSR5Q1_HGCGq_dcbjHLtAX3seZCbw44p23BZVrGs6ezSz0bfWpXQi5xmuVXAFwuYT8Pi2_w6n4esxTRsfj4C4BO48ioLOUA8a7F5RKZgDTG3vKO9Nwwc5W-R3CbH-faaGubbYjFVwVofNnVXsW-IJmyMGNsZQaXdoVQpx_tn-KyomcgI_2tO5LagCm1yquoTBQ1XQbdj3svuPah3Mn5X8I248c2603BRwAmhfOPpF1_bhKRfwQJA_iC17CngXkZrMu4_TmAdPlfEnUzvkcrxOVKY1x0dUr2UCfwMmWMuF_kcf6knsed8fSq1g6B_cLdaOZJZg1wacPA1pUtQ mill.jfrog.info:12021

 

4. create the same name of the internal user such as joseph who is given by read-only permission.

 

5. docker push mill.jfrog.info:12021/docker/hello-world

The push refers to repository [mill.jfrog.info:12021/docker/hello-world]

428c97da766c: Preparing

*unauthorized: The client does not have permission to push to the repository.*

Note that if I delete the internal user. Docker push works.

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1cm0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Blocking manifest V1 schema can sometimes fail,RTFACT-21115,88900,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,18/Jan/20 2:31 AM,15/Feb/21 6:05 AM,18/Feb/21 8:59 AM,,,,,,,,,Docker,,,,,,,0,,,,,,"Symptoms: A client requesting a Docker manifest.json without supplying the correct headers can receive the incorrect manifest schema version, even when ""Block pulling of image manifest v2 schema 1"" is enabled.

Steps to reproduce:

Simulate a 3rd party docker client, such as the Concourse Docker-Image-Resource tool:

1.Start with a Docker Remote Repository pointed at Docker Hub, and enable the ""Block pulling of image manifest v2 schema 1"" option.

2. Get a token from the Artifactory system:

*curl -uadmin:password [http://docker.art.local/v2/token*]

3. Cache a manifest.json by requesting it [like the docker-image-resource tool:|https://github.com/concourse/docker-image-resource/blob/master/cmd/check/main.go#L119]

*curl -H""Authorization: Bearer AK[...]"" -H ""Accept: application/vnd.docker.distribution.manifest.v2+json"" [http://docker-remote.art.local/v2/hello-world/manifests/latest] -vv*

*{
 ""schemaVersion"": 2,
 ""mediaType"": ""application/vnd.docker.distribution.manifest.v2+json"",*

4. Attempt a second get request, to simulate another user downloading the same manifest without the header:

*curl -H""Authorization: Bearer AK[...]"" [http://docker-remote.art.local/v2/hello-world/manifests/latest] -vv*

*{
 ""schemaVersion"" : 1,
 ""name"" : ""library/hello-world"",
 ""tag"" : ""latest"",*

This is a problem because the manifest schema version is still inconsistent.",,,,,,,,,,,,,,,,,,,"18/Jan/20 2:32 AM;patrickr;Screen Shot 2020-01-17 at 6.29.47 PM.png;https://www.jfrog.com/jira/secure/attachment/39192/Screen+Shot+2020-01-17+at+6.29.47+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1cd4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory appears to calculate npm indexing twice for every package,RTFACT-21113,88892,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,17/Jan/20 9:21 PM,15/Feb/21 6:15 AM,18/Feb/21 8:59 AM,,6.15.0,6.17.0,,,,,,,,,,,,,1,,,,,,"Looking at the debug NPM logs, you can see that Artifactory is computing the npm index twice for every artifact:

First deployment:
2020-01-17 21:27:02,422 [http-nio-8081-exec-10] [INFO ] (o.j.r.n.r.h.NpmLocalRepoHandler:337) - Deploying npm package '@test/loreny/-/@test/loreny-4.0.4.tgz' into repo 'npm-local'
2020-01-17 21:27:02,491 [http-nio-8081-exec-10] [INFO ] (o.a.e.UploadServiceImpl:399) - Deploy to 'npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz' Content-Length: unspecified
2020-01-17 21:27:02,592 [http-nio-8081-exec-10] [DEBUG] (o.a.a.n.NpmServiceImpl:63) - Starting to get package metadata for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz
2020-01-17 21:27:02,595 [http-nio-8081-exec-10] [DEBUG] (o.j.r.n.NpmMetadataExtractor:89) - Unable to find one of the Npm properties for '@test/loreny/-/@test/loreny-4.0.4.tgz'
2020-01-17 21:27:02,596 [http-nio-8081-exec-10] [DEBUG] (o.j.r.n.NpmMetadataExtractor:118) - Preparing to read the npm package.json file content from artifact '@test/loreny/-/@test/loreny-4.0.4.tgz' with size '718059' and SHA-1 'e6a22455e4e69e613f10a3ca8c411da2af334a4a'
2020-01-17 21:27:02,653 [http-nio-8081-exec-10] [DEBUG] (o.j.r.n.NpmMetadataExtractor:184) - Found version '4.0.4' for package '@test/loreny'
2020-01-17 21:27:02,658 [http-nio-8081-exec-10] [DEBUG] (o.j.r.n.NpmMetadataExtractor:147) - Finished reading the artifact '@test/loreny/-/@test/loreny-4.0.4.tgz' for npm version metadata
2020-01-17 21:27:02,780 [http-nio-8081-exec-10] [DEBUG] (o.j.r.n.NpmMetadataExtractor:212) - Setting attributes:npm.version=4.0.4,artifactory.licenses=MIT,npm.description=not laest,npm.name=@test/loreny,npm.keywords=[""test"",""la""] to path:@test/loreny/-/@test/loreny-4.0.4.tgz
2020-01-17 21:27:02,781 [http-nio-8081-exec-10] [DEBUG] (o.a.a.n.NpmServiceImpl:84) - Finished getting package metadata for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz
2020-01-17 21:27:02,783 [http-nio-8081-exec-10] [DEBUG] (o.a.a.n.NpmServiceImpl:108) - Add index event for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz with deleted tags:[]
2020-01-17 21:27:02,787 [http-nio-8081-exec-10] [DEBUG] (o.a.a.n.NpmServiceImpl:63) - Starting to get package metadata for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz
2020-01-17 21:27:02,791 [http-nio-8081-exec-10] [DEBUG] (o.j.r.n.NpmMetadataExtractor:66) - Returning the cached npm version metadata for artifact '@test/loreny/-/@test/loreny-4.0.4.tgz'
2020-01-17 21:27:02,791 [http-nio-8081-exec-10] [DEBUG] (o.a.a.n.NpmServiceImpl:84) - Finished getting package metadata for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz
2020-01-17 21:27:02,792 [http-nio-8081-exec-10] [DEBUG] (o.a.a.n.NpmServiceImpl:108) - Add index event for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz with deleted tags:[]
2020-01-17 21:27:02,840 [art-exec-176] [DEBUG] (o.a.a.n.NpmServiceImpl:127) - Started Npm work queue with event key:AddEvent_npm-local:@test/loreny
2020-01-17 21:27:02,841 [art-exec-176] [DEBUG] (o.a.a.n.NpmServiceImpl:206) - Started to index:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz, number of related events:1, events info:[NpmIndexEvent{name='@test/loreny', version='4.0.4', deletedDistTagsProperties=[]}]
*2020-01-17 21:27:02,906 [art-exec-176] [DEBUG] (o.j.r.n.NpmMetadataExtractor:66) - Returning the cached npm version metadata for artifact '@test/loreny/-/@test/loreny-4.0.4.tgz'* <-------------- 
2020-01-17 21:27:02,914 [art-exec-176] [DEBUG] (o.a.a.n.r.NpmPackageWorkContext:191) - Retrieved 1 tags properties from 1 nodes, Time took:5 millis
2020-01-17 21:27:02,918 [art-exec-176] [INFO ] (o.j.r.n.NpmPackageMetadataIndexer:324) - Preparing to write npm package metadata for repo 'npm-local' on path '.npm/@test/loreny/package.json'
2020-01-17 21:27:02,949 [art-exec-176] [INFO ] (o.j.r.n.NpmPackageMetadataIndexer:332) - Finished writing npm package metadata for repo 'npm-local' on path '.npm/@test/loreny/package.json'
2020-01-17 21:27:02,950 [art-exec-176] [DEBUG] (o.a.a.n.NpmServiceImpl:127) - Started Npm work queue with event key:AddEvent_npm-local:@test/loreny
2020-01-17 21:27:02,950 [art-exec-176] [DEBUG] (o.a.a.n.NpmServiceImpl:206) - Started to index:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz, number of related events:1, events info:[NpmIndexEvent{name='@test/loreny', version='4.0.4', deletedDistTagsProperties=[]}]
*2020-01-17 21:27:02,960 [art-exec-176] [DEBUG] (o.j.r.n.NpmMetadataExtractor:66) - Returning the cached npm version metadata for artifact '@test/loreny/-/@test/loreny-4.0.4.tgz'* <-------------- 
2020-01-17 21:27:02,960 [art-exec-176] [DEBUG] (o.a.a.n.r.NpmPackageWorkContext:191) - Retrieved 1 tags properties from 1 nodes, Time took:0 millis
2020-01-17 21:27:02,967 [art-exec-176] [INFO ] (o.j.r.n.NpmPackageMetadataIndexer:324) - Preparing to write npm package metadata for repo 'npm-local' on path '.npm/@test/loreny/package.json'
2020-01-17 21:27:03,005 [art-exec-176] [INFO ] (o.j.r.n.NpmPackageMetadataIndexer:332) - Finished writing npm package metadata for repo 'npm-local' on path '.npm/@test/loreny/package.json'


Reindexing a repository manually:
2020-01-17 21:27:35,408 [http-nio-8081-exec-3] [INFO ] (o.a.u.r.s.a.b.t.a.RecalculateIndexService:62) - Recalculating index for repository npm-local scheduled to run
2020-01-17 21:27:35,410 [art-exec-201] [INFO ] (o.a.a.n.NpmServiceImpl:148) - Npm metadata recalculation has been started for path 'npm-local:'
2020-01-17 21:27:35,412 [art-exec-201] [INFO ] (o.a.a.n.NpmServiceImpl:155) - Recursively reindexing npm packages under 'npm-local:'.
2020-01-17 21:27:35,416 [art-exec-201] [DEBUG] (o.a.a.n.NpmServiceImpl:63) - Starting to get package metadata for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz
*2020-01-17 21:27:35,423 [art-exec-201] [DEBUG] (o.j.r.n.NpmMetadataExtractor:66) - Returning the cached npm version metadata for artifact '@test/loreny/-/@test/loreny-4.0.4.tgz'* <-------------- 
2020-01-17 21:27:35,423 [art-exec-201] [DEBUG] (o.a.a.n.NpmServiceImpl:84) - Finished getting package metadata for package:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz
2020-01-17 21:27:35,427 [art-exec-202] [DEBUG] (o.a.a.n.NpmServiceImpl:134) - Started Npm reindex work queue with event key:AddEvent_npm-local:@test/loreny
2020-01-17 21:27:35,428 [art-exec-202] [DEBUG] (o.a.a.n.NpmServiceImpl:206) - Started to index:npm-local:@test/loreny/-/@test/loreny-4.0.4.tgz, number of related events:1, events info:[NpmIndexEvent{name='@test/loreny', version='4.0.4', deletedDistTagsProperties=[]}]
2020-01-17 21:27:35,427 [art-exec-201] [INFO ] (o.a.a.n.NpmServiceImpl:161) - Finished npm metadata recalculation for repo 'npm-local' in 15.92 millis
*2020-01-17 21:27:35,439 [art-exec-202] [DEBUG] (o.j.r.n.NpmMetadataExtractor:66) - Returning the cached npm version metadata for artifact '@test/loreny/-/@test/loreny-4.0.4.tgz'* <-------------- 
2020-01-17 21:27:35,440 [art-exec-202] [DEBUG] (o.a.a.n.r.NpmPackageWorkContext:191) - Retrieved 1 tags properties from 1 nodes, Time took:1 millis 
2020-01-17 21:27:35,443 [art-exec-202] [INFO ] (o.j.r.n.NpmPackageMetadataIndexer:324) - Preparing to write npm package metadata for repo 'npm-local' on path '.npm/@test/loreny/package.json'
2020-01-17 21:27:35,469 [art-exec-202] [INFO ] (o.j.r.n.NpmPackageMetadataIndexer:332) - Finished writing npm package metadata for repo 'npm-local' on path '.npm/@test/loreny/package.json'

Reproduced on 6.17

Reproduce steps
<logger name=""org.jfrog.metadata.extractor"">
<level value=""debug""/>
</logger>
<logger name=""org.jfrog.metadata.writer"">
<level value=""debug""/>
</logger>
<logger name=""org.artifactory.addon.npm"">
<level value=""debug""/>
</logger>
<logger name=""org.jfrog.repomd.npm"">
<level value=""debug""/>
</logger>

Enable Debug loggers
Deploy any NPM package to Artifactory - I deployed to a local npm repo
Observe logs

Appears to have minimal performance impact - seems related to RTFACT-17761",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1cbc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"If buildInfo is deleted from filestore, recovery is almost impossible",RTFACT-21101,88825,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,16/Jan/20 12:25 PM,15/Feb/21 6:25 AM,18/Feb/21 8:59 AM,,6.12.0,6.13.0,,,,,,,,,,,,,3,,,,,,"*+Steps to reproduce:+*
1. Start Artifactory 6.6.0 or above (I reproduced on 6.13).
2. Deploy a build to Artifactory that will result in a BuildInfo object in the Build Info repository.
3. Once the buildinfo is uploaded to Artifactory, obtain its SHA1 value.
4. Delete the file with that SHA1 from the Artifactory filestore. (To simulate a possible issue on customers environment)
5. Unlike a standart artifact, you cannot delete this file now from Artifactory using UI or REST API.

{code:java}
2020-01-16 12:56:40,359 [http-nio-8081-exec-6] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Binary provider has no content for '24660f594657c456e7324a64e2f05183cd864b90'
org.jfrog.storage.binstore.exceptions.BinaryNotFoundException: Binary provider has no content for '24660f594657c456e7324a64e2f05183cd864b90'
	at org.jfrog.storage.binstore.providers.EmptyBinaryProvider.getStream(EmptyBinaryProvider.java:62)
	at org.jfrog.storage.binstore.providers.FileBinaryProviderReadOnlyBase.getStream(FileBinaryProviderReadOnlyBase.java:138)
	at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.getBinary(BinaryServiceImpl.java:429)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy194.getBinary(Unknown Source)
	at org.artifactory.storage.db.fs.model.DbMutableFile.getStream(DbMutableFile.java:288)
	at org.artifactory.repo.db.DbLocalRepo.getFileContent(DbLocalRepo.java:195)
	at org.artifactory.repo.service.RepositoryServiceImpl.getResourceStreamHandle(RepositoryServiceImpl.java:749)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy163.getResourceStreamHandle(Unknown Source)
	at org.artifactory.build.BuildServiceImpl.getBuildModelFromFile(BuildServiceImpl.java:541)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy201.getBuildModelFromFile(Unknown Source)
	at org.artifactory.repo.interceptor.BuildInfoInterceptor.afterDelete(BuildInfoInterceptor.java:116)
	at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterDelete(StorageInterceptorsImpl.java:112)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy176.afterDelete(Unknown Source)
	at org.artifactory.storage.db.fs.model.DbMutableItem.fireAfterDeleteEvent(DbMutableItem.java:370)
	at org.artifactory.storage.db.fs.model.DbMutableFile.delete(DbMutableFile.java:214)
	at org.artifactory.repo.db.DbStoringRepoMixin.undeploy(DbStoringRepoMixin.java:728)
	at org.artifactory.repo.db.DbLocalRepo.undeploy(DbLocalRepo.java:204)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1331)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1313)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy163.undeploy(Unknown Source)
	at org.artifactory.ui.rest.service.artifacts.search.DeleteArtifactsService.deleteArtifact(DeleteArtifactsService.java:87)
	at org.artifactory.ui.rest.service.artifacts.search.DeleteArtifactsService.execute(DeleteArtifactsService.java:60)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.artifacts.search.ArtifactSearchResource.deleteArtifacts(ArtifactSearchResource.java:132)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
{code}

Trying to deploy a dummy file with the SHA1 name to the filestore doesn't work as well and then deletion attempts fail with:

{code:java}
2020-01-16 14:15:23,536 [http-nio-8081-exec-2] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - com.fasterxml.jackson.databind.exc.MismatchedInputException: No content to map due to end-of-input
 at [Source: (org.jfrog.storage.binstore.common.ReaderTrackingInputStream); line: 1, column: 0]
org.jfrog.common.JsonParsingException: com.fasterxml.jackson.databind.exc.MismatchedInputException: No content to map due to end-of-input
 at [Source: (org.jfrog.storage.binstore.common.ReaderTrackingInputStream); line: 1, column: 0]
	at org.jfrog.common.MapperUtilsBase.unchecked(MapperUtilsBase.java:238)
	at org.jfrog.common.MapperUtilsBase.readValue(MapperUtilsBase.java:132)
	at org.jfrog.common.JsonUtils.readValue(JsonUtils.java:27)
	at org.artifactory.build.BuildServiceImpl.lambda$getBuildModelFromFile$0(BuildServiceImpl.java:545)
	at org.artifactory.build.BuildServiceImpl.getBuildAs(BuildServiceImpl.java:567)
	at org.artifactory.build.BuildServiceImpl.getBuildModelFromFile(BuildServiceImpl.java:545)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy176.getBuildModelFromFile(Unknown Source)
	at org.artifactory.repo.interceptor.BuildInfoInterceptor.afterDelete(BuildInfoInterceptor.java:116)
	at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterDelete(StorageInterceptorsImpl.java:112)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy178.afterDelete(Unknown Source)
	at org.artifactory.storage.db.fs.model.DbMutableItem.fireAfterDeleteEvent(DbMutableItem.java:370)
	at org.artifactory.storage.db.fs.model.DbMutableFile.delete(DbMutableFile.java:214)
	at org.artifactory.repo.db.DbStoringRepoMixin.undeploy(DbStoringRepoMixin.java:728)
	at org.artifactory.repo.db.DbLocalRepo.undeploy(DbLocalRepo.java:204)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1331)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1313)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy163.undeploy(Unknown Source)
	at org.artifactory.ui.rest.service.artifacts.search.DeleteArtifactsService.deleteArtifact(DeleteArtifactsService.java:87)
	at org.artifactory.ui.rest.service.artifacts.search.DeleteArtifactsService.execute(DeleteArtifactsService.java:60)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.artifacts.search.ArtifactSearchResource.deleteArtifacts(ArtifactSearchResource.java:132)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: No content to map due to end-of-input
 at [Source: (org.jfrog.storage.binstore.common.ReaderTrackingInputStream); line: 1, column: 0]
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4145)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4000)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3070)
	at org.jfrog.common.MapperUtilsBase.lambda$readValue$8(MapperUtilsBase.java:132)
	at org.jfrog.common.MapperUtilsBase.unchecked(MapperUtilsBase.java:236)
	... 115 common frames omitted
{code}

*+If you have encountered this before the issue is fixed, please reach JFrog Support for further instructions.+*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1bwg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Jan/20 8:40 AM;arielk;This is relevant as well when the BuildInfo JSON file gets corrupted in the filestore. ","17/Mar/20 8:33 PM;mattheww;workaround:
You can create the sha1 binary file in the file system, and then add the following name, number, and started fields:

{ ""name"" : ""My-build-name"", ""number"" : ""28"", ""started"" : ""2014-09-30T12:00:19.893+0300"" }
I don't believe the values for the name/number/started matter.

For example, if my build for My-build-name # 28 has sha1 sum of acc5ded0f508ecd9ef4fe1b0208144f16acd1c7a, I can create a file in the filestore under filestore/ac/acc5ded0f508ecd9ef4fe1b0208144f16acd1c7a with the contents above. Then, I will be able to delete the build info json from the build-info repository in the UI.",,,,,,,,,
Artifactory docker unable to pull image from mcr.microsoft.com,RTFACT-21095,88789,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wailoont,wailoont,16/Jan/20 6:48 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Docker,Docker Image,,,,,,4,artifactory,,,,,"Hi.

We are using Artifactory Pro Version 6.16.

We created a docker remote repo pointing to https://mcr.microsoft.com, test the connection with a successful response.

We aggregate the remote repository into a virtual docker repo.

We try to pull an image using artifactory to pull dotnet/core/aspnet:3.1

This is the result :

$ docker pull docker.artifactory.company.com/dotnet/core/aspnet:3.1
3.1: Pulling from dotnet/core/aspnet
8ec398bc0356: Pulling fs layer
fdb3dcd3402e: Pulling fs layer
ace51becb785: Pulling fs layer
51bc279b6324: Pulling fs layer
e038e139a27d: Pulling fs layer
51bc279b6324: Waiting
e038e139a27d: Waiting
error pulling image configuration: unknown blob


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1bow:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Feb/20 6:48 AM;parvez1487;I am also facing same issue.","16/Jul/20 12:39 AM;surendba;We are having the same issue:

We are using Artifactory version : Artifactory Enterprise
6.10.1 rev 61001900

This is a big issue with all our enterprise developers in our bank over in Sydney. Can you please let us know a fix for this issue?

 ","21/Sep/20 3:19 PM;amber;We are having the same issue: 

Artifactory version:  7.7.3



We use Artifactory to pull docker images from Dockerhub. When pulling from docker pull mcr.microsoft.com/powershell with any tags within a Dockerfile produces the following error:

```
ERRO[0000] Error while retrieving image from cache: dockerhub.docker.countrypassport.net/mcr.microsoft.com/powershell:centos-7 GET https://dockerhub.docker.countrypassport.net/v2/mcr.microsoft.com/powershell/manifests/centos-7: MANIFEST_UNKNOWN: The named manifest is not known to the registry.; map[manifest:mcr.microsoft.com/powershell] 
```","21/Sep/20 3:22 PM;amber;As a follow up, it is worth noting that I can pull the images locally with Docker Desktop from mcr.microsoft.com/powershell","21/Sep/20 4:24 PM;amber;SOLUTION: When using a docker repository to pull images from mcr.miscrosoft.com, you must define the docker repo like so:

`mcr.docker.<artifactory instance>.com/<image>:<tag>`","06/Oct/20 4:02 PM;Kruger;I had a similar problem. My solution was to tick the ""Enable Foreign Layers Caching"" field in the Advanced tab.

Also, be sure, if you are behind a company proxy, to allow connections to *.microsoft.com, as mcr.microsoft.com will redirect to another subdomain.

 

Changing the name didn't help.","11/Dec/20 8:41 PM;NetAppBlueDevil;Required firewall domains are published by microsoft here

[https://github.com/microsoft/containerregistry/blob/master/client-firewall-rules.md]

I have these in place and can confirm direct access to needed URLs from my artifactory 6.21.1. host, but I also have this problem. 

It would be helpful if the documentation actually explained what foreign layers are and why I might and might not want to cache them.  The current doc pretty much just restates the label text (gee, thanks)  [https://www.jfrog.com/confluence/display/RTF6X/Advanced+Settings#AdvancedSettings-ForeignLayersCaching]

The foreign layers caching flag made no difference for me.

 

 ","11/Dec/20 8:52 PM;NetAppBlueDevil;Sorry, I have 6.21.0 version

 ",,,
File extension can not be longer than 64,RTFACT-21090,88769,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,samuel.bissig2,samuel.bissig2,15/Jan/20 4:27 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.15.1,,,,,,,Artifactory Home,Build Info,,,,,,0,Jenkins,,,,,"*Short description:* If build contains artifacts with file extensions longer than 64 characters publishing of build fails.

*Details description:* We uploaded files from Jenkins with the Artifactory plugin. Publishing the build failed with the following command: _rtServer.publishBuildInfo(buildInfo)_ **The upload itself works fine, error hapens not before publishing the build.

Note: Uploading and publishing the build using rt client works fine. 

*How to reproduce:*

Upload artifacts from Jenkins with more than 64 characters behind the last ""."" and publish build. Build publish will fail.

In our case the file was named: _kernel-config--4.19.59-rt24+git0+cdd4215f2b_3758b8bd81-r0-colibri-imx6ull-20200114164731_

*_Error Message on Artifactory:_*

~_2020-01-15 15:48:48,152 [http-nio-8081-exec-10] [ERROR] (o.a.r.d.DbStoringRepoMixin:290) - Couldn't save resource artifactory-build-info:image-torizoncore-zeus-dev-pipeline/23-1579103323930.json, reason:_~
 ~_org.artifactory.storage.StorageException: Could not insert build Build{version='1.0.1', name='image-torizoncore-zeus-dev-pipeline', number='23', type=GENERIC, buildAgent=Pipeline, agent=Jenkins/2.150.3, started='2020-01-15T15:48:43.930+0000', durationMillis=10749, principal='anonymous', artifactoryPrincipal='XXXX', artifactoryPluginVersion='3.5.0', url='http://xxx/', parentName='null', parentNumber='null', vcs='[revision= '95320b2b8463ef83db4848310f3b00d4308cf9ed', url='http://xxx.xxx.xxx.xxx/xxxx.git', revision= 'fccd9f39f2a80795eeef9cea1c02e89ba4dd95e3', url='https://xxxx']', vcsRevision='fccd9f39f2a80795eeef9cea1c02e89ba4dd95e3', vcsUrl='https://xxxx', parentBuildId='null', licenseControl=null, buildRetention=null, runParameters=null, modules=[org.jfrog.build.api.Module@91692a05], statuses=null, buildDependencies=null, issues=null, governance=null}_~
     ~_at org.artifactory.storage.db.build.service.BuildStoreServiceImpl.addBuild(BuildStoreServiceImpl.java:139)_~
     ~_at org.artifactory.build.BuildServiceImpl.addBuildInternal(BuildServiceImpl.java:395)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor1127.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)_~
     ~_at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:78)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)_~
     ~_at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)_~
     ~_at com.sun.proxy.$Proxy208.addBuildInternal(Unknown Source)_~
     ~_at org.artifactory.repo.interceptor.BuildInfoInterceptor.doAction(BuildInfoInterceptor.java:96)_~
     ~_at org.artifactory.repo.interceptor.BuildInfoInterceptor.afterCreate(BuildInfoInterceptor.java:66)_~
     ~_at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterCreate(StorageInterceptorsImpl.java:69)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor731.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)_~
     ~_at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)_~
     ~_at com.sun.proxy.$Proxy173.afterCreate(Unknown Source)_~
     ~_at org.artifactory.repo.db.DbStoringRepoMixin.invokeAfterCreateInterceptors(DbStoringRepoMixin.java:405)_~
     ~_at org.artifactory.repo.db.DbStoringRepoMixin.saveResource(DbStoringRepoMixin.java:244)_~
     ~_at org.artifactory.repo.db.DbLocalRepo.saveResource(DbLocalRepo.java:154)_~
     ~_at org.artifactory.repo.service.RepositoryServiceImpl.saveResourceInTransaction(RepositoryServiceImpl.java:1890)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor924.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)_~
     ~_at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)_~
     ~_at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)_~
     ~_at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)_~
     ~_at com.sun.proxy.$Proxy165.saveResourceInTransaction(Unknown Source)_~
     ~_at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1878)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor921.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)_~
     ~_at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)_~
     ~_at com.sun.proxy.$Proxy165.saveResource(Unknown Source)_~
     ~_at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:569)_~
     ~_at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:552)_~
     ~_at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:429)_~
     ~_at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:419)_~
     ~_at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:400)_~
     ~_at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:221)_~
     ~_at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:187)_~
     ~_at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:130)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor917.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)_~
     ~_at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)_~
     ~_at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)_~
     ~_at com.sun.proxy.$Proxy193.upload(Unknown Source)_~
     ~_at org.artifactory.build.BuildServiceImpl.deployBuildJson(BuildServiceImpl.java:353)_~
     ~_at org.artifactory.build.BuildServiceImpl.addBuild(BuildServiceImpl.java:325)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor1155.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)_~
     ~_at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)_~
     ~_at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)_~
     ~_at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)_~
     ~_at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)_~
     ~_at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)_~
     ~_at com.sun.proxy.$Proxy208.addBuild(Unknown Source)_~
     ~_at org.artifactory.rest.resource.ci.BuildResource.addBuild(BuildResource.java:289)_~
     ~_at jdk.internal.reflect.GeneratedMethodAccessor1154.invoke(Unknown Source)_~
     ~_at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)_~
     ~_at java.base/java.lang.reflect.Method.invoke(Method.java:566)_~
     ~_at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)_~
     ~_at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)_~
     ~_at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)_~
     ~_at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)_~
     ~_at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)_~
     ~_at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)_~
     ~_at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)_~
     ~_at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)_~
     ~_at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)_~
     ~_at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)_~
     ~_at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)_~
     ~_at org.glassfish.jersey.internal.Errors.process(Errors.java:316)_~
     ~_at org.glassfish.jersey.internal.Errors.process(Errors.java:298)_~
     ~_at org.glassfish.jersey.internal.Errors.process(Errors.java:268)_~
     ~_at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)_~
     ~_at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)_~
     ~_at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)_~
     ~_at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)_~
     ~_at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)_~
     ~_at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)_~
     ~_at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)_~
     ~_at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)_~
     ~_at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)_~
     ~_at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)_~
     ~_at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)_~
     ~_at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)_~
     ~_at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)_~
     ~_at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)_~
     ~_at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)_~
     ~_at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)_~
     ~_at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)_~
     ~_at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)_~
     ~_at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)_~
     ~_at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)_~
     ~_at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)_~
     ~_at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)_~
     ~_at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)_~
     ~_at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)_~
     ~_at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)_~
     ~_at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)_~
     ~_at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)_~
     ~_at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)_~
     ~_at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)_~
     ~_at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)_~
     ~_at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)_~
     ~_at java.base/java.lang.Thread.run(Thread.java:834)_~
 ~_Caused by: org.postgresql.util.PSQLException: ERROR: value too long for type character varying(64)_~
     ~_at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2455)_~
     ~_at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2155)_~
     ~_at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:288)_~
     ~_at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:430)_~
     ~_at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:356)_~
     ~_at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:168)_~
     ~_at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:135)_~
     ~_at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229)_~
     ~_at org.artifactory.storage.db.build.dao.BuildArtifactsDao.createBuildArtifact(BuildArtifactsDao.java:60)_~
     ~_at org.artifactory.storage.db.build.dao.BuildArtifactsDao.createBuildArtifacts(BuildArtifactsDao.java:54)_~
     ~_at org.artifactory.storage.db.build.service.BuildStoreServiceImpl.insertModules(BuildStoreServiceImpl.java:221)_~
     ~_at org.artifactory.storage.db.build.service.BuildStoreServiceImpl.addBuild(BuildStoreServiceImpl.java:137)_~
     ~_... 143 common frames omitted_~

*PSQL Error*

~_ERROR:  value too long for type character varying(64)_~
 ~_STATEMENT:  INSERT INTO build_artifacts (artifact_id, module_id, artifact_name, artifact_type, sha1, md5)VALUES($1, $2, $3, $4, $5, $6)_~

 ",Jenkins with Artifactory Plugin 3.5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1bko:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Package view for Docker images stored in a remote-cache shows hash instead of tag,RTFACT-21088,88761,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,rotemk,eldada,eldada,15/Jan/20 3:37 PM,15/Feb/21 6:43 AM,18/Feb/21 8:59 AM,,6.22.0,7.0.0,7.9.1,,,,,,,,,,,,1,PB_Done,,,,,"I have the default remote and virtual Docker repositories configured.
I pull an image through the virtual ""docker"" of the official nginx image.
{code:none}
docker pull eldadnew7-docker.jfrog.io/ubuntu:14.04
{code}
Image is pulled successfully.
Looking at the packages view in Artifactory, I see the version reported is the sha2 checksum.
 !Screen Shot 2020-01-15 at 17.21.37.png|thumbnail! 
 !Screen Shot 2020-01-15 at 17.21.54.png|thumbnail! 

The file system layout in the remote-cache repository is different than we have in the local docker
 !Screen Shot 2020-01-15 at 17.21.10.png|thumbnail! 

File system layout on a local image
 !Screen Shot 2020-01-15 at 17.34.10.png|thumbnail! 

-----

Can be reproduced locally
{code:none}
docker run --rm -d --name art -p 8081:8081 -p 8082:8082 docker.jfrog.io/jfrog/artifactory-pro:7.0.2
{code}
","Local Docker
{code:none}
docker run --rm -d --name art -p 8081:8081 -p 8082:8082 docker.jfrog.io/jfrog/artifactory-pro:7.0.2
{code}
",,,,,,,,,,,,,,,XRAY-4820,,,"15/Jan/20 3:33 PM;eldada;Screen Shot 2020-01-15 at 17.21.10.png;https://www.jfrog.com/jira/secure/attachment/39140/Screen+Shot+2020-01-15+at+17.21.10.png","15/Jan/20 3:23 PM;eldada;Screen Shot 2020-01-15 at 17.21.37.png;https://www.jfrog.com/jira/secure/attachment/39142/Screen+Shot+2020-01-15+at+17.21.37.png","15/Jan/20 3:32 PM;eldada;Screen Shot 2020-01-15 at 17.21.54.png;https://www.jfrog.com/jira/secure/attachment/39141/Screen+Shot+2020-01-15+at+17.21.54.png","15/Jan/20 3:34 PM;eldada;Screen Shot 2020-01-15 at 17.34.10.png;https://www.jfrog.com/jira/secure/attachment/39139/Screen+Shot+2020-01-15+at+17.34.10.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc4qk7:i",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
HTTP Settings cannot be configured,RTFACT-21083,88707,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kesch000@gmx.de,kesch000@gmx.de,14/Jan/20 10:16 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,JCR,,,,,,,0,,,,,,"Trying to setup a fresh installation of a jfrog container registry.

While trying to setup a local docker repo, HTTP Settings under advanced tab cannot be configured since it says ""To use this feature first [configure reverse proxy|http://172.17.58.235:8081/artifactory/webapp/#/admin/configuration/reverse_proxy].""

 

After clicking this link, I configured the reverse proxy and saved the settings.

Then I went back to the recently created local docker repo to edit it.

Going under advanced tab of this local docker still tells me to configure reverse proxy.

 

I see no options to set proper HTTP Settings so that I can continue to configure HTTP Settings for my local docker repo 6.17.0 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1b6w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
new Access Tokens are not listed with API or in UI,RTFACT-21082,88704,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,samuel.begin,samuel.begin,14/Jan/20 9:12 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Access Tokens,REST API,,,,,,0,,,,,," 

When creating access tokens using the REST API:
{code:java}
curl -u ${USER}:${TOKEN} -XPOST ""https://server.url/artifactory/api/security/token"" -d ""username=myuser"" -d ""scope=member-of-groups:mygroup"" -d ""expires_in=3600""
{code}
The resulting token can be used to authenticate and can be revoked with the endpoint `/api/security/token/revoke`.

The problem is that the token cannot be listed using the GET at `/api/security/token` nor can it be found in the access token admin interface.

This is problematic because a non expiring admin token can be created and forgotten by any artifactory admin.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1b68:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to change store file path during Upload events,RTFACT-21080,88618,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ankursnsinha,ankursnsinha,14/Jan/20 12:10 PM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,User Plugins,,,,,,,0,,,,,,"I am developing an user plugin which will decide the artifactory shard to store artifacts based on some custom logic whenever a new docker images in uploaded.

I followed [https://www.jfrog.com/confluence/display/RTF/User+Plugins|https://www.jfrog.com/confluence/display/RTF/User+Plugins#upload] for upload event but getting below error whenever I am trying to upload to non-default shard however its working fine if its default shard selected in the virtual docker repo.

```
Error uploading blob '<username>/hello-world/_uploads/24500f7d-5433-4ae1-b820-0de244d14342' got status '201' and message: 'null'

```

Can you please help me here. I can provide sample code if required however the problem is occurring after modifying this context variable.

modifiedRepoPath = RepoPathFactory.create(localDockerRepos.get(shardNo), repoPath.path)


Note:
*localDockerRepos is a list which has a collection of all local docker repo's included in virtual repo.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1anc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Federated repo: Fully sync distributed repo between group of JPDs,RTFACT-21076,88592,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,oriy,gidis,gidis,14/Jan/20 8:09 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,DR,,,,,,,0,Netflix,,,,,Global repo: fully sync distributed repo between group of site,,,,,,,,,,,,,,,,PRODUCTUS-840,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1ahk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Shadowing requests for third party during the virtual repo index merge,RTFACT-21074,88589,Bug,Ready for Code Review,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Oleksis,gidis,gidis,14/Jan/20 7:30 AM,09/Feb/21 4:37 PM,18/Feb/21 8:59 AM,,,,,,,,,Indexer,Maven,NPM,,,,,0,,,,,,"Shadowing requests for third party during the virtual repo index merge, we are sending requests for each package that we have in the local servers (which may cause a privacy issue). This issue affects both Java and NPM",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1agw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Feb/21 4:35 PM;nadavy;Adding a new flag *priorityResolution* to local and remote repositories.
This can be added via the REST API (add ""*priorityResolution"": true*) or via the UI under the advanced tab.



A virtual repository will search only on repositories that are marked as priority, and if none have that requested data, he will continue to look in other repositories that don’t have this flag. 

Example: local-release and local-dev are 2 repositories with this flag, while npmjs doesn’t.

I will only merge the versions of the first two and do not continue to the next one.

 

This could be just for local repositories, or for remote as well (in case we want to allow other repositories, like smart remotes to be included)

 ",,,,,,,,,,
Artifactory unable to pull certain files from remote repo,RTFACT-21061,88418,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Subhani,Subhani,10/Jan/20 8:17 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Running version *6.16.0*

I have a setup as such

{code:java}
Client <-------> Internal Artifactory <--------> External Artifactory{code}

A remote repo of type *maven* is configured in the Internal Artifactory to pull artifacts from the External Artifactory.

There are a lot of files that are being cached on my Internal Artifactory but when my Internal artifactory tries to pull some other files, I get a 


{code:java}
{
  ""errors"" : [ {
    ""status"" : 404,
    ""message"" : ""Not Found""
  } ]
}
{code}

*https://artifactory.cache* is the hostname of my Internal artifactory
*build-pipelines-cx-commerce-maven* is the name of the remote repo configured in my Internal artifactory.

Below is an example of the files are I pull successfully.
{code:java}
jenkins@zjs-agabrys2-small-6g5k6:/var/lib/jenkins$ curl -s -I -k --user ecpipeline-test https://artifactory.cache/artifactory/build-pipelines-cx-commerce-maven/org/apache/maven/plugins/maven-assembly-plugin/2.2-beta-5/maven-assembly-plugin-2.2-beta-5.jar
Enter host password for user 'ecpipeline-test':
HTTP/1.1 200 OK

jenkins@zjs-agabrys2-small-6g5k6:/var/lib/jenkins$ curl -s -I -k --user ecpipeline-test https://artifactory.cache/artifactory/build-pipelines-cx-commerce-maven/org/apache/maven/plugins/maven-antrun-plugin/1.3/maven-antrun-plugin-1.3.pom
Enter host password for user 'ecpipeline-test':
HTTP/1.1 200 OK
{code}

Below is an example of a file that is failing.


{code:java}
jenkins@zjs-agabrys2-small-6g5k6:/var/lib/jenkins$ curl -s -I -k --user ecpipeline-test https://artifactory.cache/artifactory/build-pipelines-cx-commerce-maven/org/apache/maven/plugins/maven-metadata.xml
Enter host password for user 'ecpipeline-test':
HTTP/1.1 404 Not Found
{code}

Looking at the logs of artifactory, this is all I see


{code:java}
2020-01-10 19:47:29,954 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Using remote request URL - https://common.repositories.company.com/artifactory/build-pipelines-cx-commerce-maven/org/apache/maven/plugins/maven-metadata.xml
2020-01-10 19:47:29,954 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Executing HEAD request to https://common.repositories.company.com/artifactory/build-pipelines-cx-commerce-maven/org/apache/maven/plugins/maven-metadata.xml
2020-01-10 19:47:29,954 [http-nio-8081-exec-6] [DEBUG] (o.j.c.h.a.PreemptiveAuthInterceptor:61) - Updating credentials for host https://common.repositories.company.com
2020-01-10 19:47:30,141 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Received status 404 (message: Not Found) on remote info request - returning unfound resource
2020-01-10 19:47:30,142 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Unable to find resource remotely - adding to the missed retrieval cache.
2020-01-10 19:47:30,144 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Setting default response status to '404' reason to 'Resource not found'
2020-01-10 19:47:30,146 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Using original response status of '404' and message 'Not Found'
2020-01-10 19:47:30,147 [http-nio-8081-exec-6] [DEBUG] (o.a.r.RepoRequestContext:73) - 95a713de get ecpipeline-test build-pipelines-cx-commerce-maven:org/apache/maven/plugins/maven-metadata.xml Sending response with the status '404' and the message 'Not Found'
2020-01-10 19:47:30,147 [http-nio-8081-exec-6] [DEBUG] (o.a.e.DownloadServiceImpl:710) - Sending HTTP error code 404: Not Found
2020-01-10 19:47:30,148 [http-nio-8081-exec-6] [TRACE] (o.a.w.s.HttpArtifactoryResponse:136) - Sending back error code 404. Reason: Not Found
2020-01-10 19:47:30,150 [http-nio-8081-exec-6] [DEBUG] (o.a.a.e.AggregatingEventServiceImpl:78) - nothing is done here
{code}

The files do certainly exist on the External Artifactory since I have tried to curl them from my local machine and I can indeed get the contents of maven-metadata.xml.

Has anyone else faces such an issue ? 

I have already verified the the credentials and they are correct since I can successfully pull some of the artifacts.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc19k8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
 Allow Created Users Access To Profile Page gets unselected,RTFACT-21058,88408,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mapscape,Mapscape,10/Jan/20 2:48 PM,15/Feb/21 3:22 PM,18/Feb/21 8:59 AM,,7.12.3,,,,,,,,,,,,,,6,,,,,,"For Artifactory with Jira crowd authentication enabled, when the selection button ""Allow Created Users Access To Profile Pag"" is enabled and saved, it gets disabled.

How to reproduce:

1) Login as admin or with admin privileges

2) Navigate to Admin->Security->Crowd/Jira

3) In server settings enable ""Allow Created Users Access To Profile Page"" and save

4) Refresh the page.

Thus it is not possible to enable this option with a click on selection button. This is a bug.

Consequence:

User cannot generate API key or encrypted password.

 ",Artifactory v6.15.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc19i8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Feb/20 11:02 PM;amargono;Any update from Jfrog?",,,,,,,,,,
Tomcat console logs do not match JFrog Standard,RTFACT-21041,88300,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Cyrilc,Cyrilc,09/Jan/20 8:59 AM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Problems seen in the attached screenshot:
* Level is not highlighted
* Level is not limited to 5 characters (e.g. \{{[WARNING]}} instead of \{{[WARN ]}}
* Date ends with \{{L}} instead of \{{Z}}
* Length of class and line number is not fixed to 30 characters
* Class and method name is shown in place of thread name

Requirements: https://docs.google.com/document/d/1JFNpS0OGSh6hCf8uCCrXOcxrVlXlbtZH5POFoW2QC8Y/edit#heading=h.c9wxiymoxbyk",docker.jfrog.io/jfrog/artifactory-pro:7.x.master-9160,,,,,,,,,,,,,,,,,,"09/Jan/20 8:55 AM;Cyrilc;Capture d’écran 2020-01-09 à 09.54.56.png;https://www.jfrog.com/jira/secure/attachment/38986/Capture+d%E2%80%99e%CC%81cran+2020-01-09+a%CC%80+09.54.56.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc18uo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Licence Violation - false positive,RTFACT-21040,88299,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Lilachs,galba,galba,09/Jan/20 8:54 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,XrayVulnerabilityWontBeFix,,,,,"Xray has discovered this as licence issue.

org.javassist:javassist :3.22.0-CR2

From github, we can use it as apache2:

[https://github.com/jboss-javassist/javassist]

 

This software is distributed under the Mozilla Public License Version 1.1, the GNU Lesser General Public License Version 2.1 or later, or the Apache License Version 2.0.

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc18ug:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Incorrect handling of fileItegRev regex in custom layout,RTFACT-21033,88213,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,oosterbeekW,oosterbeekW,08/Jan/20 9:44 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,Repo Layout,,,,,,,0,,,,,,"I set a custom layout with the pattern:
  [orgPath]/[module][fileItegRev][baseRev].[ext]
and then use a regex for the fileItegRev according to:
   (?:\-\d\{2}\-\d\{3}\-\sWago\s\d\{3}\-\d\{3}-V)|(?:\-\d\{2}\-\d\{3}\-V)|(?:V)|(?:\-)
I then take as an example five filenames:
  ARFIFF05V032.vcn
  HE8118004-01-117-V3.1.0.zip
  sesm-1.2.1.0.tbf
  sesm-1.3.0.0
  HE8118004-01-117- Wago 750-451-V1.0.0.0.rtd
I want all of these to be accounted for, but it does something wrong. For example, for the last one, I get this:
  Organization:whatever in front of the file (this is correct already)
  Module: HE8118004-01-117-Wago 750-451-
  BaseRevision: 1.0.0.0
  FileIntegration Revision: V
  Extension:rtd

However, what I want to get, and expect based on the given regex, is this:
  Module: HE8118004
  BaseRevision: 1.0.0.0
  FileIntegration Revision: -01-117-Wago 750-451-V
  Extension:rtd

Also, I checked this on regexr.com, which agrees with what I expected on regex. So could you please check what exactly is wrong with the regex in the custom layout?

!image-2020-01-08-10-44-08-757.png!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc18cg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
User without deploy permissions gets 404 when trying to download a cached metadata,RTFACT-21028,88170,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,08/Jan/20 7:57 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.17.0,7.0.0,,,,,,Artifactory Home,UI,,,,,,0,,,,,,"+Steps to reproduce:+
1. Create debian remote repo (enable ""List Remote Folder Items"" so you could download via the UI)
2. Create a user without deploy permissions on the repo you created above.
3. Cached one of the metadata files (Release file for example) using the admin
4. Set the ""Metadata Retrieval Cache Period"" to 0 in the remote repo config
5. Login as the user you just created and try to download the metadata file you cached from the remote (*not* from the remote cache)
6. See that we get 404 for this file.

* We succeed to download this file via rest api (although we don't have deploy permissions..maybe if we set the ""Metadata Retrieval Cache Period"" to 0 we don't try to cache the file so its ok..should check this behavior)  
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc182o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Double OpenID icon in login page,RTFACT-21023,88120,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mariav,Mariav,07/Jan/20 4:37 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,,,,,,,,0,,,,,,!image-2020-01-07-18-35-54-886.png!,,,,,,,,,,,,,,,,,,,"07/Jan/20 4:35 PM;Mariav;image-2020-01-07-18-35-54-886.png;https://www.jfrog.com/jira/secure/attachment/38890/image-2020-01-07-18-35-54-886.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc17sg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Provide better logging when license validation fail,RTFACT-21019,88059,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,joshuah,joshuah,07/Jan/20 6:53 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to repro:
 # Start new Arti (used docker-compose with m696)
 # Enter an *expired* E+ license below
 # No error is written in console.log :( (please improve) but the UI has the following log

 

!image-2020-01-07-00-48-54-712.png!

 

LICENSE (6.16 let's you update it) 

 
{code:java}
bGljZW5zZTogY0hKdlpIVmpkSE02Q2lBZ1lYSjBhV1poWTNSdmNuazZDaUFnSUNCd2NtOWtkV04w
T2lCYVdHaDNZVmhLYkdONmIyZE5ha0Y0VDFNd2VFMXBNSHBOVmxGM1RVUnZkMDFFYjNkTlJtOUxZ
VmRSTmtsSFVtcE9lbEUxV2tSQmVFeFVRVFZQUjFWMFRrUnJlazVETURST2JVWnBURlJuZUZwdFVU
Rk5NbGt3VFhwUk1FNTNjSFprTWpWc1kycHZaMU5yV25saU1tTm5Wa1ZXVkZaQmNIZGpiVGwzV2xo
S01HRlhWbnBQYVVJM1psRndlbUZYWkhWWldGSXhZMjFWTmtsSE5URmlSM2RMWkVoS2NGbFhkelpK
U0ZKNVpGZFZTMlJJYkhkYVZHOW5VbFUxVlZKV1NsRlZhMnhVVWxZNVVWUkdWbFJZTVZKVFUxVkdU
VU51V21oaVIyeHJVbTVLZG1KVWIyZE5ha0Y0VDBNd2VFMXBNSGxOYkZGM1RVUnZlRTFFYnpCUFV6
UXpUVlJvWVVOblBUMEtJQ0FnSUhOcFoyNWhkSFZ5WlRvZ1owSnhRa2RaZHpsUGFXcHhSMGx3YjJo
Q1NrdDRjRzV4V2tkeVV5dFNRVm8zS3pnck1VVTBSRm9yVDNoSmJHZHpUM2hsVVZKVWFrRXdja1p5
VW5sTk1qRXhXVnBIT1dkRk5HbE9VM2x5VjA1WFZIcEtWV2h1ZDFNcmRsVlVPWFkwWVdjeFRIYzBa
SGxEVVRWMFYxcHRaMVl5ZWtOSEx5ODVRM0I1TkZJd1JXeHRPRmMwYVVoWk1GSjRSRElyUmxBM1JG
Tk5jbXhRVkZkM2FHczFVekpIYmxod2FHWTVOMFZwTVVNME1uTXpRV1I1VjNSelJucG9kMHd5UWpa
b1QzRldPWE42T1VONFdtdDVORTUzZDBOdlRsbERiWFZDVkVrNFUzbDJOMnRNU21velVGZ3pUM2xr
VFZkcU5VRkdRVU16Tmtodk5FSlVUV1ZDZUVjMlYzY3lhMHhzZUVadlQwUnBZMDh3Y2toU1dTczFl
V3hsWjBSUE5tNXdWWFZXWVc5TVJXSndSRlZMWWt3NU1tVlJaVWhuVjNwQmVEZzJiMk5wUVN0S1Vt
MTNjelowUnpneFVUVldSRGt3Y1V4bE16aDZZMWxpYkZsblBUMEtJQ0I0Y21GNU9nb2dJQ0FnY0hK
dlpIVmpkRG9nV2xob2QyRllTbXhqZW05blRXcEJlRTlUTUhoTmFUQjZUVlpSZDAxRWIzZE5SRzkz
VFVadlMyRlhVVFpKUkdzMVdWZGFhRmt5VG10TVZHUnFUa1JSZEU1SFRUUk9RekEwV1ZSb2FFeFVU
bXRQUkZFMVRqSlNiVnB0UlhsTlozQjJaREkxYkdOcWIyZFRhMXA1WWpKaloxWkZWbFJXUVhCM1ky
MDVkMXBZU2pCaFYxWjZUMmxDTjJaUmNIcGhWMlIxV1ZoU01XTnRWVFpKUnpVeFlrZDNTMlJJU25C
WlYzYzJTVWhTZVdSWFZVdGtTR3gzV2xSdloxWkdTa3BSVlhkTFpHMUdjMkZYVWtkamJUbDBUMmxC
ZVUxRVJUUk1WRVY1VEZSSmVWWkVRWGRQYWtWM1QycFJOVXhxWTNoUFJtOUxDaUFnSUNCemFXZHVZ
WFIxY21VNklFbFlVWGczVFVvNWJpdERiM0ZLYVdoS015OTNWMU5aTDNGaVlYRk5lalF3UTJFd1Uw
dEJOaTlZZVd0dFQxRkVObGwxUlc1R1Zqa3lVSEJXY25KMkwzSlRVM0puWTJwTE1HTkxlR1JTZVVW
TFdqUllTRTR3ZVhkb1FqRnNTVWM0WmxnMk5VWkVXVWRsWkhkRGJrMUpSa05aYlVGUVQyVlhWRXRT
VFdSS00ySlRUMlp0VUU1d1owSjBZMmd3ZFN0VllWSnhZbm8zZEhkSFEyZEtRMEpOT0V0a1prWXJR
bXMwS3pnNGJWQTJXRUpPTUhOcmJVUXZVak5rY0RKb05YcExjekpPTm5wMlEwdEVTMUEwWnk4MVkw
MXhTR05CTVhaTlVrMWxRa3N2ZWxWNWRuZHlibGhtY2xnM2RYRmlXREJtUkZObVFYUm5NV2R3Yms5
WVZWSnZSRkp3Y0Zoek9WVkpUbmh1YnpCYWVIbDNhbVpxWW1KdVUwaHBhREV3YzFCalQxaDJTbVI1
U1dsVFpHSk5iREpvUlhwdmR5OTNXRUZ1ZUZOTmVqVkZUMFpLWjFObWJsVnhlbGhvY0RSdmNIQlJZ
bFp4UkU5bFVUMDlDaUFnWkdsemRISnBZblYwYVc5dU9nb2dJQ0FnY0hKdlpIVmpkRG9nV2xob2Qy
RllTbXhqZW05blRXcEJlRTlUTUhoTmFUQjZUVlpSZDAxRWIzZE5SRzkzVFVadlMyRlhVVFpKUjFw
cVRVZEthMXBFVFRCTVYwVXpXVlJqZEU1RVFtbGFhVEEwV21wS2JFeFVUVEpaVkdNMFRucEZNVTFV
U1hsYVozQjJaREkxYkdOcWIyZFRhMXA1WWpKaloxWkZWbFJXUVhCM1kyMDVkMXBZU2pCaFYxWjZU
MmxDTjJaUmNIcGhWMlIxV1ZoU01XTnRWVFpKUnpVeFlrZDNTMlJJU25CWlYzYzJTVWhTZVdSWFZV
dGtTR3gzV2xSdloxSlZOVlZTVmtwUlZXdHNWRkpXT1ZGVVJsWlVXREZTVTFOVlJrMURibHBvWWtk
c2ExSnVTblppVkc5blRXcEJlRTlETUhoTmFUQjVUV3hSZDAxRWIzaE5SRzh3VDFNME0wMVVhR0ZE
WnowOUNpQWdJQ0J6YVdkdVlYUjFjbVU2SUVaMlpUYzVRMU5OTDFGU1IxRXJZVGxDTUhoV2IwOTFa
bm81Y25Wc2JTdG1lV05HYXpWNU5UZFJaRk40YzNKb1lWQXdOaTlOYjI4d1JrSkxXWEF2YzFCWVVr
aHZkWEpDU2tGMU4zQTVUVGRWVDNaRWNqQm5RbGhzU2xKa0wwVTVXblZWYWxwb1NGRk1LMlJHVTJ4
b1ZtRkRVQzlHUkhVM1RuQk1Ta1JCUWl0VmJGa3dUVzgzWlVaUFVqRnZNSGRsV21aa2JUTk5WQ3RV
UXpZdmJGZFpUMmw0TTIwM1ZsSkdLMjVZZVZWdVRrdE9OV2M1Y2tJeEsxbFBaRWhXU1RaSUwyZFVU
blJTVjFGbFlqZEhiMGxCTjJSdVJERXZiV3hCVVRKSmJtTllNRkpRYVM5MVJWaHFRWGxRYTFoS1pI
ZEJXWEZhVDJvdmFXUmlXR05sTlc5M0wwcFJlaXRFVkhWWWNIQnNVRTh3VFVOaVdGWkthMjluTDNO
SFdUQlNhelUwVTBGMkwzQlJTekozY2pkS2RVUmlUREZHYUc4eGRHWXJNMjkxUjJNelNFTlFkRTE1
T0RGNVlsUnhWemxZV1dwaU9VZHpjWEIyWnowOUNuWmxjbk5wYjI0NklESUsKc2lnbmF0dXJlOiBF
U0lsL1ZId0k4eElRNnBHVmkzWVJBYTlxaVFkWSswMjRObGFCSDRsRUdTUmtFcDVkekhUVVN6eUhW
alI0UHIyVkdabWNQeUsyMUQ5OXVxVW92blRsY0RTSXFSMEc3cEdVaHM3MFZEUVQyc29rMjg5RlhN
YmpUM0JlUlpiYWhjRmRYVkF5K1ZhZG9tOUoyV2NTMXZaaXZSQnZYQUsxK0I1VkdlQkFqN3RNRGFt
ejlxWGo1Ukc3OTFYT2VXRWFHWGJ6ZVJkR2ZXeWgxV3pZemV4dHNPaFhaYmU0QWJQaVZEU25jS3NW
K1ViTW9DWDFzTUtGV3ZJVWNrTWVSNnI4YzJZNFFhcVo5QTdFUWpQN09iREhLL3BDMUw2RjBNYVlU
SVNjeFYzajFpSFcvMGxhOEt2VWxqUDJLRDM5UTRrdDZaeGRXLzVBM25KNGhidFFhMCt0ajM5TVE9
PQo=
{code}",,,,,,,,,,,,,,,,,,,"07/Jan/20 6:48 AM;joshuah;image-2020-01-07-00-48-54-712.png;https://www.jfrog.com/jira/secure/attachment/38855/image-2020-01-07-00-48-54-712.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc17go:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
404/400 errors when reading info of existing repo or including existing repo in a new virtual repo,RTFACT-21014,87953,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexd,alexd,06/Jan/20 11:54 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,High Availability,,,,,,,0,,,,,,"Four tests in sanity HA failed (from: spock.RepositorySpec#Repositories REST API v2)

At first we create repo:

{code}
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""POST /artifactory/ui/admin/repositories HTTP/1.1[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-type: application/json[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-Length: 656[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Host: 10.70.10.217:32792[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Connection: Keep-Alive[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""User-Agent: artifactory-client-java/2.7.0[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Accept-Encoding: gzip,deflate[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Authorization: Basic YWRtaW46cGFzc3dvcmQ=[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""[\r][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""{[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""type"" : ""virtualRepoConfig"",[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""typeSpecific"" : {[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""repoType"" : ""Go"",[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""optionalIndexCompressionFormats"" : [ ""bz2"" ],[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""enableExternalDependencies"" : true,[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""externalPatterns"" : [ ""**"" ],[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""externalRemoteRepo"" : ""go-remote-rest""[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""general"" : {[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""repoKey"" : ""go-virtual-rest""[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""basic"" : {[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""includesPattern"" : ""**/*"",[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""includesPatternArray"" : [ ""**/*"" ],[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""excludesPatternArray"" : [ ],[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""layout"" : ""simple-default"",[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""defaultDeploymentRepo"" : ""go-local-rest"",[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""selectedRepositories"" : [ {[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""      ""repoName"" : ""go-local-rest""[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    }, {[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""      ""repoName"" : ""go-remote-rest""[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    } ][\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""advanced"" : { }[\n]""
16:42:26.279 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""}""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""HTTP/1.1 200 OK[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Date: Sun, 05 Jan 2020 16:42:26 GMT[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Content-Type: application/json[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Transfer-Encoding: chunked[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Connection: keep-alive[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Server: Artifactory/7.0.0-m689[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Id: 3bb11ef31d9bb5edb2b806d20cdafac09dba4019[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Node-Id: b41b442368b0[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Access-Control-Allow-Methods: GET, POST, DELETE, PUT[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Cache-Control: no-store[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""SessionValid: false[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""3a[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""{""info"":""Successfully added repository 'go-virtual-rest'""}[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""0[\r][\n]""
16:42:26.411 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""[\r][\n]""
{code}

Then we try to get its info (nginx forwards the request to another node, see the response header):
{code}
16:42:26.421 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""GET /artifactory/api/v2/repositories/go-virtual-rest HTTP/1.1[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-type: application/json[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Host: 10.70.10.217:32792[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Connection: Keep-Alive[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""User-Agent: artifactory-client-java/2.7.0[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Accept-Encoding: gzip,deflate[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Authorization: Basic YWRtaW46cGFzc3dvcmQ=[\r][\n]""
16:42:26.422 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""HTTP/1.1 404 Not Found[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Date: Sun, 05 Jan 2020 16:42:26 GMT[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Content-Type: application/json[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Transfer-Encoding: chunked[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Connection: keep-alive[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Server: Artifactory/7.0.0-m689[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Id: 69a765ddf3cedb65ad9301e17dc722eb934d9fbb[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Node-Id: 4b9f6e978bdf[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""4a[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""{[\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""  ""errors"" : [ {[\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""    ""status"" : 404,[\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""    ""message"" : ""Not Found""[\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""  } ][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""}[\r][\n]""
16:42:26.425 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""0[\r][\n]""
{code}

In another instance, we create repo:
{code}
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""POST /artifactory/ui/admin/repositories HTTP/1.1[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-type: application/json[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-Length: 641[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Host: 10.70.10.217:32792[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Connection: Keep-Alive[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""User-Agent: artifactory-client-java/2.7.0[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Accept-Encoding: gzip,deflate[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Authorization: Basic YWRtaW46cGFzc3dvcmQ=[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""[\r][\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""{[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""type"" : ""remoteRepoConfig"",[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""typeSpecific"" : {[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""repoType"" : ""Gems""[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""general"" : {[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""repoKey"" : ""gems-remote-rest""[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""basic"" : {[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""includesPattern"" : ""**/*"",[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""includesPatternArray"" : [ ""**/*"" ],[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""excludesPatternArray"" : [ ],[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""layout"" : ""simple-default"",[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""url"" : ""https://jcenter.bintray.com"",[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""remoteLayoutMapping"" : ""maven-2-default""[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""advanced"" : {[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""propagateQueryParams"" : true,[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""queryParams"" : ""param1=val1"",[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""mismatchingMimeTypesOverrideList"" : [ ""text/html"" ],[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""network"" : {[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""      ""selectedInstalledCertificate"" : ""test-crt"",[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""      ""proxy"" : ""proxy-test""[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    }[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  }[\n]""
16:42:25.339 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""}""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""HTTP/1.1 200 OK[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Date: Sun, 05 Jan 2020 16:42:25 GMT[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Content-Type: application/json[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Transfer-Encoding: chunked[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Connection: keep-alive[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Server: Artifactory/7.0.0-m689[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Id: 3bb11ef31d9bb5edb2b806d20cdafac09dba4019[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Node-Id: b41b442368b0[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Access-Control-Allow-Methods: GET, POST, DELETE, PUT[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Cache-Control: no-store[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""SessionValid: false[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""3b[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""{""info"":""Successfully added repository 'gems-remote-rest'""}[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""0[\r][\n]""
16:42:25.474 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""[\r][\n]""
{code}

Then trying to use this repo inside the virtual:
{code}
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""POST /artifactory/ui/admin/repositories HTTP/1.1[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-type: application/json[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Content-Length: 668[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Host: 10.70.10.217:32792[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Connection: Keep-Alive[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""User-Agent: artifactory-client-java/2.7.0[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Accept-Encoding: gzip,deflate[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""Authorization: Basic YWRtaW46cGFzc3dvcmQ=[\r][\n]""
16:42:25.475 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""[\r][\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""{[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""type"" : ""virtualRepoConfig"",[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""typeSpecific"" : {[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""repoType"" : ""Gems"",[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""optionalIndexCompressionFormats"" : [ ""bz2"" ],[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""enableExternalDependencies"" : true,[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""externalPatterns"" : [ ""**"" ],[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""externalRemoteRepo"" : ""gems-remote-rest""[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""general"" : {[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""repoKey"" : ""gems-virtual-rest""[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""basic"" : {[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""includesPattern"" : ""**/*"",[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""includesPatternArray"" : [ ""**/*"" ],[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""excludesPatternArray"" : [ ],[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""layout"" : ""simple-default"",[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""defaultDeploymentRepo"" : ""gems-local-rest"",[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    ""selectedRepositories"" : [ {[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""      ""repoName"" : ""gems-local-rest""[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    }, {[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""      ""repoName"" : ""gems-remote-rest""[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""    } ][\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  },[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""  ""advanced"" : { }[\n]""
16:42:25.476 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 >> ""}""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""HTTP/1.1 400 Bad Request[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Date: Sun, 05 Jan 2020 16:42:25 GMT[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Content-Type: application/json[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Transfer-Encoding: chunked[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Connection: keep-alive[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Server: Artifactory/7.0.0-m689[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Id: 69a765ddf3cedb65ad9301e17dc722eb934d9fbb[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""X-Artifactory-Node-Id: 4b9f6e978bdf[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Access-Control-Allow-Methods: GET, POST, DELETE, PUT[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Access-Control-Allow-Headers: X-Requested-With, Content-Type, X-Codingpedia[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""Cache-Control: no-store[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""SessionValid: false[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""67[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""{""error"":""Failed to create repository gems-virtual-rest: Repository 'gems-remote-rest' does not exist""}[\r][\n]""
16:42:25.487 [Test worker] DEBUG org.apache.http.wire - http-outgoing-91 << ""0[\r][\n]""
{code}

According to [~nadavy] there's a synchronization mechanism between nodes which may have them keep old data for milli-seconds. The problem, which might have got worse due to introduction of router.",7.0.0-m689,,,,,,,,,,,,,,,,,,"06/Jan/20 11:55 AM;alexd;clientlogs;https://www.jfrog.com/jira/secure/attachment/38814/clientlogs","06/Jan/20 11:55 AM;alexd;support-bundle (12).zip;https://www.jfrog.com/jira/secure/attachment/38815/support-bundle+%2812%29.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc16ug:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
systemCpuLoad -1% reported in Windows,RTFACT-21004,87846,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexd,alexd,05/Jan/20 8:35 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Happened in Sanity on Windows:

{code}
############### [C113384] Test System Info ############### 
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""GET /artifactory/api/system/info HTTP/1.1[\r][\n]""
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""Host: 10.70.10.62:55567[\r][\n]""
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""Connection: Keep-Alive[\r][\n]""
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""User-Agent: artifactory-client-java/2.7.0[\r][\n]""
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""Accept-Encoding: gzip,deflate[\r][\n]""
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""Authorization: Basic YWRtaW46cGFzc3dvcmQ=[\r][\n]""
11:59:32.180 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 >> ""[\r][\n]""
11:59:32.423 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""HTTP/1.1 200 OK[\r][\n]""
11:59:32.423 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""Server: Artifactory/7.0.0-m682[\r][\n]""
11:59:32.423 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""X-Artifactory-Id: da70cb30c4cf6e6f:10d4f7f4:16f7067f67e:-8000[\r][\n]""
11:59:32.423 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""X-Artifactory-Node-Id: c841ca0697c8[\r][\n]""
11:59:32.423 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""Content-Type: application/json[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""Transfer-Encoding: chunked[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""Date: Sat, 04 Jan 2020 11:59:31 GMT[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""248[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""{[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""committedVirtualMemorySize"" : 1996079104,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""totalSwapSpaceSize"" : 33285578752,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""freeSwapSpaceSize"" : 20512886784,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""processCpuTime"" : 597390625000,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""totalPhysicalMemorySize"" : 32211836928,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""openFileDescriptorCount"" : 0,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""maxFileDescriptorCount"" : 0,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""processCpuLoad"" : 0.0,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""systemCpuLoad"" : -1.0,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""freePhysicalMemorySize"" : 20107919360,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""numberOfCores"" : 8,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""heapMemoryUsage"" : 691770080,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""noneHeapMemoryUsage"" : 420132288,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""threadCount"" : 124,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""noneHeapMemoryMax"" : 462532608,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""heapMemoryMax"" : 2147483648,[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""  ""jvmUpTime"" : 321318[\r][\n]""
11:59:32.424 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""}[\r][\n]""
11:59:32.426 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""0[\r][\n]""
11:59:32.426 [Test worker] DEBUG org.apache.http.wire - http-outgoing-185 << ""[\r][\n]""
{code}", 7.0.0-m682,,,,,,,,,,,,,,,,,,"05/Jan/20 8:35 AM;alexd;support-bundle.zip;https://www.jfrog.com/jira/secure/attachment/38772/support-bundle.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc167k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory 6.15.1 remote-cache issues after upgrade - ""No current connection""",RTFACT-21000,87821,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,SWL,SWL,03/Jan/20 7:25 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.15.1,,,,,,,Artifact Storage,,,,,,,1,artifactory,,,,,"Issue began after upgrading from 6.11.1 to 6.15.2. We have a large jcenter-remote-cache and npm-remote-cache (as in millions of artifacts).

Had issues with exporting any new jcenter/npm packages that were downloaded after the upgrade. It would only export packages that were downloaded prior to the upgrade. Also, could not view these remote-cache repos from Artifactory Repository Browser. In Package View and Search Artifacts, we were able to see the remote-cache files though.

Tried to import/export/delete these repos to regain complete functionality without success. This is when more critical errors began happening to include ""Sending HTTP error code 500"" and ""No current connection"". This makes Artifactory unusable as it keeps dropping connection to the database (from what I can tell from the logs).

Even tried blowing away the filestore and having a brand new one which resulted in the same errors popping up again. Last resort will be a clean Artifactory install and new filestore.

Log files of the issue (second instance of trying a brand new filestore):

2020-01-02 23:47:02,271 [art-exec-112] [ERROR] (o.a.s.a.ArchiveIndexerImpl:162) - Failed to index 'mvn-jcenter-cache:com/identityx/auth/daon-http-digest-auth/4.5.2.1/daon-http-digest-auth-4.5.2.1.jar': Unexpected record signature: 0X6D74683C
 2020-01-02 23:47:02,272 [art-exec-112] [INFO ] (o.a.s.a.ArchiveIndexerImpl:146) - Indexing archive: mvn-jcenter-cache:com/identityx/auth/daon-http-digest-auth/4.5.2.1/daon-http-digest-auth-4.5.2.1-sources.jar
 2020-01-02 23:47:02,279 [art-exec-112] [ERROR] (o.a.s.a.ArchiveIndexerImpl:162) - Failed to index 'mvn-jcenter-cache:com/identityx/auth/daon-http-digest-auth/4.5.2.1/daon-http-digest-auth-4.5.2.1-sources.jar': Unexpected record signature: 0X6D74683C
 2020-01-02 23:47:02,324 [art-exec-112] [INFO ] (o.a.s.a.ArchiveIndexerImpl:146) - Indexing archive: mvn-jcenter-cache:com/identityx/IdentityXClientSDK/4.5.2.1/IdentityXClientSDK-4.5.2.1-sources.jar
 2020-01-02 23:47:02,337 [art-exec-112] [ERROR] (o.a.s.a.ArchiveIndexerImpl:162) - Failed to index 'mvn-jcenter-cache:com/identityx/IdentityXClientSDK/4.5.2.1/IdentityXClientSDK-4.5.2.1-sources.jar': Unexpected record signature: 0X6D74683C
 2020-01-02 23:47:02,338 [art-exec-112] [INFO ] (o.a.s.a.ArchiveIndexerImpl:146) - Indexing archive: mvn-jcenter-cache:com/identityx/IdentityXClientSDK/4.5.2.1/IdentityXClientSDK-4.5.2.1.jar

2020-01-02 23:48:29,815 [art-exec-112] [ERROR] (o.s.t.i.TransactionInterceptor:98) - Application exception overridden by rollback exception
 org.artifactory.storage.StorageException: Failed to delete index task for mvn-jcenter-cache:org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1-sources.jar: No current connection.

2020-01-02 23:48:30,134 [http-nio-8081-exec-23] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 500: Could not process download request: org.artifactory.storage.fs.VfsException: Failed to load item 'libs-release:org/apache/hadoop/hadoop-annotations/2.6.0/hadoop-annotations-2.6.0.pom'
 2020-01-02 23:48:30,147 [http-nio-8081-exec-40] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 500: Could not process download request: org.artifactory.storage.fs.VfsException: Failed to load item 'libs-snapshot:org/apache/hadoop/hadoop-annotations/2.6.0/hadoop-annotations-2.6.0.pom'
 2020-01-02 23:48:30,156 [http-nio-8081-exec-54] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 500: Could not process download request: org.artifactory.storage.fs.VfsException: Failed to load item 'libs-release:org/apache/hadoop/hadoop-auth/2.6.0/hadoop-auth-2.6.0.pom'
 2020-01-02 23:48:30,166 [http-nio-8081-exec-52] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 500: Could not process download request: org.artifactory.storage.fs.VfsException: Failed to load item 'libs-snapshot:org/apache/hadoop/hadoop-auth/2.6.0/hadoop-auth-2.6.0.pom'
 2020-01-02 23:48:30,200 [http-nio-8081-exec-10] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 500: Could not process download request: org.artifactory.storage.fs.VfsException: Failed to load item 'libs-release:org/apache/hadoop/hadoop-common/2.6.0/hadoop-common-2.6.0.pom'

 

 

These connection errors then start happening every couple of seconds:

2020-01-03 14:10:12,912 [art-exec-8] [ERROR] (o.q.c.ErrorLogger :2425) - Job (artifactory.HeartbeatJob#a19c74be-87c3-41df-a2b5-d9b0134f26b9 threw an exception.
 org.quartz.SchedulerException: Job threw an unhandled exception.
 at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
 at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
 at java.lang.Thread.run(Thread.java:748)
 Caused by: org.artifactory.storage.StorageException: Failed to get Artifactory server [Artifactory]
 at org.artifactory.storage.db.servers.service.ArtifactoryServersServiceImpl.getArtifactoryServer(ArtifactoryServersServiceImpl.java:59)
 at sun.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
 at com.sun.proxy.$Proxy167.getArtifactoryServer(Unknown Source)
 at org.artifactory.storage.db.servers.service.ArtifactoryServersCommonServiceImpl.getCurrentMember(ArtifactoryServersCommonServiceImpl.java:209)
 at org.artifactory.storage.db.servers.service.ArtifactoryHeartbeatServiceImpl$HeartbeatJob.onExecute(ArtifactoryHeartbeatServiceImpl.java:192)
 at org.artifactory.schedule.quartz.QuartzCommand.execute(QuartzCommand.java:48)
 at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
 ... 4 common frames omitted
 Caused by: java.sql.SQLNonTransientConnectionException: No current connection.
 at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
 at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
 at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
 at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
 at org.apache.derby.impl.jdbc.Util.noCurrentConnection(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedConnection.checkIfClosed(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedConnection.setupContextStack(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
 at sun.reflect.GeneratedMethodAccessor57.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:126)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:152)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.TrapException.invoke(TrapException.java:40)
 at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:108)
 at org.apache.tomcat.jdbc.pool.DisposableConnectionFacade.invoke(DisposableConnectionFacade.java:81)
 at com.sun.proxy.$Proxy181.prepareStatement(Unknown Source)
 at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:181)
 at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:152)
 at org.artifactory.storage.db.servers.dao.ArtifactoryServersDao.getArtifactoryServer(ArtifactoryServersDao.java:74)
 at org.artifactory.storage.db.servers.service.ArtifactoryServersServiceImpl.getArtifactoryServer(ArtifactoryServersServiceImpl.java:57)
 ... 14 common frames omitted
 Caused by: org.apache.derby.iapi.error.StandardException: No current connection.
 at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
 at org.apache.derby.impl.jdbc.SQLExceptionFactory.wrapArgsForTransportAcrossDRDA(Unknown Source)
 ... 38 common frames omitted

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1628:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/May/20 12:50 AM;mark.fanslow;Any resolution to this issue?","11/Aug/20 5:13 PM;SWL;Yes, I had too many artifacts for Derby to handle. I migrated to a new DB.",,,,,,,,,
Monitor test counter and alert when Jenkins doesn't run tests due to errors ,RTFACT-20999,87811,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,uriahl,uriahl,03/Jan/20 1:49 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc1600:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Support bundle stays in the artifacts tree after deletion from Support Zone,RTFACT-20994,87712,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,amirna,amirna,02/Jan/20 2:51 PM,15/Feb/21 7:25 AM,18/Feb/21 8:59 AM,,6.12.2,6.16.0,7.0.0,,,,,,,,,,,,1,,,,,,"After deleting a support bundle from the Support Zone page, the bundle stays in the repository.
see pictures",,,,,,,,,,,,,,,,,,,"02/Jan/20 2:51 PM;amirna;01PreDelete.png;https://www.jfrog.com/jira/secure/attachment/38713/01PreDelete.png","02/Jan/20 2:51 PM;amirna;02Deleted.png;https://www.jfrog.com/jira/secure/attachment/38712/02Deleted.png","02/Jan/20 2:51 PM;amirna;03StillAppears.png;https://www.jfrog.com/jira/secure/attachment/38711/03StillAppears.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc15g8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Jan/20 1:51 PM;rotemk;See more details under RTFACT-21053",,,,,,,,,,
Schema conversion error while upgrading to artifactory 7,RTFACT-20986,87542,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,roeio,roeio,01/Jan/20 1:55 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,Artifactory,Upgrade,,,,"v550e convertion fails with error:

 
{code:java}
v550e converter due to ERROR: relation ""nodes_repo_path_checksum"" already exists
{code}
 

 [^logs.tar.gz]

 ","OS: Ubuntu 18
Artifactory 6.16 -> Artifactory Version: 7.x.master Revision: 2147483647
DB: PostgreSQL 10.10",,,,,,,,,,,,,,,,,,"01/Jan/20 1:54 PM;roeio;logs.tar.gz;https://www.jfrog.com/jira/secure/attachment/38627/logs.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc14hc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"01/Jan/20 2:48 PM;roeio;The exception is thrown from org.artifactory.storage.jobs.migration.pathchecksum.RepoPathChecksumMigrationJob

The migration job is automatically triggered instead of verifying if there is already a unique index","02/Jan/20 8:03 AM;gidis;This issue is not critical and there is no need to fix it fot GA",,,,,,,,,
"UI Fix - Xray ""Allow Download"" should be greyed out while not permitted",RTFACT-20976,87517,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,alexeiv,omriz,omriz,01/Jan/20 9:12 AM,15/Feb/21 7:29 AM,18/Feb/21 8:59 AM,,6.17.0,,,,,,,permissions,Xray,,,,,,0,,,,,,"Xray ""Allow Download"" should be greyed out while not permitted.
Please Read improvement  https://www.jfrog.com/jira/browse/RTFACT-19062",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc14c0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Update Item Properties concatenates first 4k chars when a list of values is given for same key,RTFACT-20935,86853,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,24/Dec/19 10:23 AM,15/Feb/21 7:38 AM,18/Feb/21 8:59 AM,,,,,,,,,Properties,REST API,,,,,,1,,,,,,"+*Steps to reproduce:*+
1. Run the following REST API with the attached JSON:
{code:java}
curl -uadmin:password -XPATCH ""http://localhost:8081/artifactory/api/metadata/REPO/FILE"" -T property.json -vvL
{code}

2. Inspect how the properties are attached to the file. We attempted to attached 4 property values to the key ""cof.scan2"", nonetheless only 3 got attached.

In reality what happened, is that the first 4K chars that were supposed to get attached on the artifact got attached. Anything further didn't.

+Workaround:+
If possible, use the ""Set Item Properties"" REST API.",,,,,,,,,,,,,,,,,,,"24/Dec/19 10:23 AM;arielk;property.json;https://www.jfrog.com/jira/secure/attachment/38271/property.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc10c8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Using a token to create a new token causes a nested username glitch,RTFACT-20921,86693,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,21/Dec/19 2:18 AM,15/Feb/21 7:44 AM,18/Feb/21 8:59 AM,,,,,,,,,Access Tokens,,,,,,,1,,,,,,"Symptoms: When using a token to grant sub-tokens (E.G. to distribute to users), the usernames generated add on an additional ""token:"" to the username

Steps to reproduce:

1. Use Basic Auth to create an Admin token:
 
curl -uadmin:password -d ""username=root_token"" -d ""scope=jfrt@01dwk20xk6nr2s1w2xmw5x14ew:admin"" [http://artifactory.com/artifactory/api/security/token]

*{ ""scope"" : ""jfrt@01dwk20xk6nr2s1w2xmw5x14ew:admin api:*"", ""access_token"" : ""eyJ[...] ""expires_in"" : 3600, ""token_type"" : ""Bearer"" }*

2. Use this token to create a non-admin sub-token that belongs to 2 groups:
 curl -H""Authorization: Bearer $root_token"" -d ""username=sub_token"" -d ""scope=member-of-groups:*readers,sub-group""* [http://artifactory.com/artifactory/api/security/token]

*{*
 *""scope"" : ""member-of-groups:readers,sub-group api:*"",*
 *""access_token"" : ""eyJ[...]*
*""expires_in"" : 3600,*
 *""token_type"" : ""Bearer""*
*}*

3. Attempt to create a nested sub-token with a lesser scope (1 group):

curl -H ""Authorization: Bearer $sub_token"" -d ""username=sub_token"" -d ""scope=member-of-groups:readers"" [http://artifactory.com/artifactory/api/security/token

*{ ""error"" : ""invalid_request"", ""error_description"" : ""User token:sub_token can only create user token for himself (requested: sub_token)"" }*

|http://artifactory.com/artifactory/api/security/token]

The only way to create the nested sub-token is to use ""token:sub_token"" for the username field:
 curl -H ""Authorization: Bearer $sub_token"" -d ""username=token:sub_token"" -d ""scope=member-of-groups:readers"" [http://mill.jfrog.info:12224/artifactory/api/security/token]

{ ""scope"" : ""member-of-groups:readers api:*"", ""access_token"" : ""eyJ2[...] ""expires_in"" : 3600, ""token_type"" : ""Bearer"" }

 

This creates a new, further nested token ""*token:token:sub_token"".* 

 

Because of this behavior users cannot easily use tokens as a password for transient users. This creates problems when a CLI client like Docker cannot use the ""authorization: Bearer"" header directly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0zdk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory CRAN indexing bug,RTFACT-20920,86686,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vince.allen,vince.allen,20/Dec/19 4:10 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,CRAN,,,,,,,0,PB_Done,,,,,"h4. Software version
 * Artifactory 6.13.1 rev 61301900

h4. Steps to reproduce
 # Create new local CRAN repo
 # Deploy [https://cran.r-project.org/src/contrib/Archive/desc/desc_1.0.0.tar.gz]
Selecting package and selecting CRAN Info tab gives
 ** *Incorrect* name ""description"" (DESCRIPTION file inside tarball says ""desc"")
 ** Correct version (1.0.0)

 # Deploy [https://cran.r-project.org/src/contrib/desc_1.2.0.tar.gz]
Selecting package and selecting CRAN Info tab gives
 ** Correct name ""desc""
 ** *Incorrect* version 1.0.0 (DESCRIPTION file inside tarball says ""1.2.0"")

h4. Contents of PACKAGES index file

 
|Package: desc|
|Version: 1.0.0|
|Imports: R6|
|Suggests: testthat, whoami, newpackage|
|License: MIT + file LICENSE|
| |
|Package: description|
|Version: 1.0.0|
|Imports: R6|
|Suggests: testthat, whoami, newpackage|
|License: MIT + file LICENSE|",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0zc0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Feb/20 5:49 PM;vince.allen;It appears that the problem is CRAN indexer looks for DESCRIPTION file
_anywhere_ in package tree rather than in the root.

For example, looking at Rcpp_0.12.19.tar.gz, our Artifactory installation
reports CRAN info as

 
|Name: testRcppClass|
|Version: 0.1|
|Title: Some Examples using Rcpp Classes and loadModule()|

 

Looking through package contents, looks like this info is collected from
inst/unitTests/testRcppClass/DESCRIPTION whereas the root DESCRIPTION
contains correct info

 
|Package: Rcpp|
|Title: Seamless R and C++ Integration|
|Version: 0.12.19|

 

Going back to the desc package that was causing the original issues,
there's also a false DESCRIPTION file under inst/ subdirectory. Removing
it and repackaging desc causes Artifactory to index the right info (even with +
symbol in the License field)",,,,,,,,,,
Conan repository v1 search endopoint returns incorrect revision,RTFACT-20919,86684,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,carlosz,carlosz,20/Dec/19 3:38 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.12.2,6.16.1,,,,,,,,,,,,,2,community,ConanCenter,CPE,P2,,"It looks that after uploading different revisions of a Conan package to Artifactory and the searching that package through Conan with revisions disabled in the client, Artifactory is returning an incorrect revision (it should return the last one).

As stated in the last paragraph this issue happens for the search when multiple packages were uploaded using revisions and one client with revisions disabled searches for those. With revisions enabled in the client it works OK (only the v1 endpoint gives the incorrect result).

To reproduce (tested with Artifactory 6.12):
{code:bash}
# activate revisions
➜  conan config set general.revisions_enabled=1 
# create a dummy package
➜  conan new dummy_pkg/0.1
# create some new revisions and upload to artifactory
➜  echo ""# new revision"" >> conanfile.py && conan create . && conan upload dummy_pkg/0.1@ -r artifactory-local --all --force -c
➜  echo ""# new revision"" >> conanfile.py && conan create . && conan upload dummy_pkg/0.1@ -r artifactory-local --all --force -c
➜  echo ""# new revision"" >> conanfile.py && conan create . && conan upload dummy_pkg/0.1@ -r artifactory-local --all --force -c
➜  echo ""# new revision"" >> conanfile.py && conan create . && conan upload dummy_pkg/0.1@ -r artifactory-local --all --force -c
{code}
Now you can check the repo to see all the uploaded revisions:
{code:bash}
➜  conan search dummy_pkg/0.1@ -r artifactory-local --revisions
Revisions for 'dummy_pkg/0.1' at remote 'artifactory-local':
58f0498b9da9a3d7e7f83d4e9abad989 (2019-12-20 16:26:44 UTC)
1a43e98260595e81eac6bd898af33371 (2019-12-20 16:26:40 UTC)
91015b7bf5cb76b364cecba0d4685a77 (2019-12-20 16:26:35 UTC)
6aaa651a1a9dbece815cb8b06db98393 (2019-12-20 16:26:29 UTC)
{code}
Finally, deactivate revisions and search for the package:
{code:bash}
➜  conan config set general.revisions_enabled=0  
➜  conan search dummy_pkg/0.1@ -r artifactory-local
Existing packages for recipe dummy_pkg/0.1:

Existing recipe in remote 'artifactory-local':

    Package_ID: 103f6067a947f366ef91fc1b7da351c588d1827f
        [options]
            shared: False
        [settings]
            arch: x86_64
            build_type: Release
            compiler: apple-clang
            compiler.libcxx: libc++
            compiler.version: 11.0
            os: Macos
        Outdated from recipe: True
{code}
It is marked as outdated because the search endpoint for v1 is returning a random revision that does not correspond to the last one. For this case it should return the revision with id 58f0498b9da9a3d7e7f83d4e9abad989 but it is returning the one with id: 91015b7bf5cb76b364cecba0d4685a77.

That can be checked calling directly to the endopoint:

[http://localhost:8081/artifactory/api/conan/conan-local/v1/conans/dummy_pkg/0.1/_/_/search]

That is returning in this case:
{code:bash}
{
  ""103f6067a947f366ef91fc1b7da351c588d1827f"" : {
    ""settings"" : {
      ""os"" : ""Macos"",
      ""compiler.libcxx"" : ""libc++"",
      ""arch"" : ""x86_64"",
      ""compiler"" : ""apple-clang"",
      ""build_type"" : ""Release"",
      ""compiler.version"" : ""11.0""
    },
    ""options"" : {
      ""shared"" : ""False""
    },
    ""requires"" : [ ],
    ""recipe_hash"" : ""91015b7bf5cb76b364cecba0d4685a77""
  }
}
{code}
*IMPORTANT NOTE:* After running several tests, looks like Artifactory is sorting the revisions alphabetically and returning the latest in that order, not the latest that was uploaded. That's why it returns 91015b7bf5cb76b364cecba0d4685a77 in this example.

This same problem happens in bintray too, but there the remote returns a different random revision each time the endpoint is called.

Some more details in the issue in the Conan repo: [https://github.com/conan-io/conan-center-index/issues/200]

Also reported by Conan users:

- [https://github.com/conan-io/conan/issues/6873]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc497x:j",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Dec/19 8:12 PM;diegor;Reproduced the issue with Artifactory CE 1.16","16/Sep/20 11:00 AM;carlosz;The issue is still happening for latest Artifactory (7.7.3) and latest conan (1.29.0)",,,,,,,,,
Admin doing refresh on a token with explicit 'refreshable=true' - will get a non-refreshable toekn,RTFACT-20908,86565,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,19/Dec/19 9:14 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.16.1,,,,,,,Access Client,,,,,,,0,,,,,,"Steps to reproduce:

1. Generate a token as *admin* - non admins will not experience this

{code} curl -u admin -XPOST ""localhost:8080/artifactory/api/security/token"" -d ""username=johnq"" -d ""scope=member-of-groups:*"" -d ""refreshable=true"" {code}

2. Refresh the token with explicit *refreshable=true* (though it's not really needed as this is the default for refreshing tokens):

{code} curl -H ""Content-type: application/x-www-form-urlencoded"" -i -Lvv -XPOST ""localhost:8080/artifactory/api/security/token"" -d ""grant_type=refresh_token"" -d ""refresh_token=$REFRESH"" -d ""access_token=$TOKEN"" -d ""refreshable=true"" -uadmin:password{code}

see that you get a non-refreshable token now.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ym0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"artifactory-ha helm charts fail with error:nginx: [emerg] host not found in ""ssl"" of the ""listen"" directive in /etc/nginx/conf.d/artifactory.conf:8",RTFACT-20898,86319,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,eldada,vinaya,vinaya,17/Dec/19 11:25 PM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,Helm,,,,,,0,,,,,,"# Our EKS pipeline for artifactory-ha was working on 11th Dec
 # Last few days it has been failing with error: nginx: [emerg] host not found in ""ssl"" of the ""listen"" directive in /etc/nginx/conf.d/artifactory.conf:8
 # Upon further investigation I found that artifactory.conf file is not correct. It has following lines at line 8

server {
 listen ssl;
 listen ;

It should be 

server {
 listen 443 ssl;
 listen 80;

4. After further investigation I found that this issue is because in latest version of helm charts, following two variables have been commented out

internalPortHttps

internalPortHttp

So helm is not able to find port numbers and values are empty. This causes nginx to fail and hence installation to fail.

 

This issue has exited since helm chart versions artifactory-ha-1.3.1",,,,,,,,,,,,,,,,,,,"27/Dec/19 9:58 AM;vinaya;helmDryRun.txt;https://www.jfrog.com/jira/secure/attachment/38429/helmDryRun.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0xq8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Dec/19 9:17 AM;eldada;This is a known bug that was fixed in a later chart version. Please test again.","27/Dec/19 10:02 AM;vinaya;I ran following command on helm chart artifactory-ha-1.3.5
{code:java}
# cd artifactory-ha-1.3.5

artifactory-ha-1.3.5# helm install artifactory-ha --debug --dry-run 2>&1 > helmDryRun.txt

artifactory-ha-1.3.5# cat helmDryRun.txt | grep internalPortHttp
{{- if .Values.nginx.internalPortHttps }}
listen {{ .Values.nginx.internalPortHttps }} ssl;
{{- if .Values.nginx.internalPortHttp }}
listen {{ .Values.nginx.internalPortHttp }};
{code}
As you can see, the variable `internalPortHttps` is being used, but the value has not been defined anywhere.

I also tested installing 1.3.5 chart on EKS and that failed with error

nginx: [emerg] host not found in ""ssl"" of the ""listen"" directive in /etc/nginx/conf.d/artifactory.conf:8

which points to same error","29/Dec/19 7:29 AM;eldada;Trying to reproduce....
","29/Dec/19 7:48 AM;eldada;Unable to reproduce. All working as expected.
Deploying with default, I get the following generated Artifactory config:
{code:none}
apiVersion: v1
data:
  artifactory.conf: |
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
    ssl_certificate  /var/opt/jfrog/nginx/ssl/tls.crt;
    ssl_certificate_key  /var/opt/jfrog/nginx/ssl/tls.key;
    ssl_session_cache shared:SSL:1m;
    ssl_prefer_server_ciphers   on;
    ## server configuration
    server {
      listen 443 ssl;
      listen 80;
      server_name ~(?<repo>.+)\.art-artifactory-ha art-artifactory-ha;
      if ($http_x_forwarded_proto = '') {
        set $http_x_forwarded_proto  $scheme;
      }
      ## Application specific logs
      ## access_log /var/log/nginx/artifactory-access.log timing;
      ## error_log /var/log/nginx/artifactory-error.log;
      rewrite ^/$ /artifactory/webapp/ redirect;
      rewrite ^/artifactory/?(/webapp)?$ /artifactory/webapp/ redirect;
      if ( $repo != """" ) {
        rewrite ^/(v1|v2)/(.*) /artifactory/api/docker/$repo/$1/$2 break;
      }
      rewrite ^/(v1|v2)/([^/]+)/(.*)$ /artifactory/api/docker/$2/$1/$3;
      rewrite ^/(v1|v2)/ /artifactory/api/docker/$1/;

      chunked_transfer_encoding on;
      client_max_body_size 0;
      location /artifactory/ {
        proxy_read_timeout  900;
        proxy_pass_header   Server;
        proxy_cookie_path   ~*^/.* /;
        if ( $request_uri ~ ^/artifactory/(.*)$ ) {
          proxy_pass       http://art-artifactory-ha:8081/artifactory/$1;
        }
        proxy_pass          http://art-artifactory-ha:8081/artifactory/;
        proxy_set_header    X-Artifactory-Override-Base-Url $http_x_forwarded_proto://$host:$server_port/artifactory;
        proxy_set_header    X-Forwarded-Port  $server_port;
        proxy_set_header    X-Forwarded-Proto $http_x_forwarded_proto;
        proxy_set_header    Host              $http_host;
        proxy_set_header    X-Forwarded-For   $proxy_add_x_forwarded_for;
      }
    }
{code}","02/Jan/20 3:32 AM;vinaya;I found the issue to be in EKS templates. The templates were overriding the nginx.conf here -> 

[https://github.com/aws-quickstart/quickstart-jfrog-artifactory/blob/master/templates/jfrog-artifactory-eks-core-workload.template.yaml#L244]

 

Once I removed this override, EKS cluster came up ",,,,,,
Xray download blocking bypasses user plugin execution points,RTFACT-20897,86301,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wmfeht,wmfeht,17/Dec/19 10:15 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,User Plugins,Xray,,,,,,5,,,,,,"It appears that Xray download blocking bypasses all user plugin execution points, making it impossible to implement custom logic or reporting following a blocked download. Xray blocking should either trigger afterDownloadError, or a new execution point should be implemented to handle Xray events.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0xm8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Dec/19 2:36 PM;danny.straus;Definitely need this!","18/Dec/19 2:38 PM;bryantran;+1, Having the same issue – could you guys take a look at it?",,,,,,,,,
Artifactory should read special characters for the Nuget V3 packages.,RTFACT-20896,86247,Bug,Pending QA,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,igoru,divijak,divijak,17/Dec/19 7:53 PM,18/Feb/21 8:34 AM,18/Feb/21 8:43 AM,,,,,,,,,,,,,,,,2,,,,,,"While resolving Nuget V3 package (StyleCop.Analyzers v1.0.2). Artifactory is throwing the below error:
(o.a.a.n.r.NuGetV3VirtualAndRemoteCommon:124) - Failed to parse registration for repo: nuget-remote, packageId: stylecop.analyzers
org.jfrog.common.JsonParsingException: com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.net.URI` from String ""https://raw.githubusercontent.com/DotNetAnalyzers/StyleCopAnalyzers/${version}/LICENSE"": not a valid textual representation, problem: Illegal character in path at index 69: https://raw.githubusercontent.com/DotNetAnalyzers/StyleCopAnalyzers/${version}/LICENSE

Steps to Reproduce:
1. nuget install stylecop.analyzers -Version 1.0.2 -Source Artifactory.
Also try installing it from the browser http://<artifactoryURL>:<Port>/artifactory/api/nuget/v3/nuget-remote/registration-semver2/stylecop.analyzers/index.json it throws the error.""Failed to parse registration json for package: stylecop.analyzers, in repo: nuget-remotefor more information check the logs."" 
(please see the screenshot attached that shows the package was downloaded)
2. I modified the index.json in the Artifactory filestore from the location($ART_HOME/data/filestore/76) . In the file( vi 76c92bad0b216d35d91354035ee6034d72947b7f ) i modified all the locations that say https://raw.githubusercontent.com/DotNetAnalyzers/StyleCopAnalyzers/${version}/LICENSE to 
https://raw.githubusercontent.com/DotNetAnalyzers/StyleCopAnalyzers/version/LICENSE
 in the index.json.
3.Install again nuget install stylecop.analyzers -Version 1.0.2 -Source Artifactory. we will be able to successfully download the package. 
Please see the equivalent request.logs:
20191217060721|18|REQUEST|52.16.203.109|anonymous|GET|/api/nuget/v3/nuget/registration-semver2/stylecop.analyzers/index.json|HTTP/1.1|200|0
20191217060722|19|REQUEST|52.16.203.109|anonymous|GET|/api/nuget/v3/nuget/registration-semver2/stylecop.analyzers/page/1.0.0-alpha001/1.2.0-beta.113.json|HTTP/1.1|200|0

As a workaround, we will have to follow the above steps by modifying the index.json and install the package.
",,,,,,,,,,,,,,,,,,,"17/Dec/19 7:50 PM;divijak;Screenshot_12_17_19__11_33_AM-2.jpg;https://www.jfrog.com/jira/secure/attachment/37909/Screenshot_12_17_19__11_33_AM-2.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr12f:rfi",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory in HA propagates truncated plugin dependency jar files to member nodes ,RTFACT-20895,86246,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,17/Dec/19 6:41 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Artifactory in HA sometimes propagates truncated plugin dependency jar files to member nodes. It is not clear how the corrupted/truncated plugin dependency jar files are updated to the database, but when this scenario happens the member nodes end up pulling the corrupted files. We can also see that the Primary node has the correct plugin dependency file in the plugins/lib folder and it is only in the database the truncated file is updated. The issue is serious because lot of customers depend on user plugins to support  custom features and this issue breaks the user plugins and results in service disruption.

The only way to recover from this situation is by touching the correct file in the primary node which will update the timestamp and also trigger an update to the database with the right dependency file. You could also make the plugins/lib folder read only for ""artifactory"" user in the member nodes and update the member nodes with the correct dependency files, but these are manual workarounds that need to be done after the user has ran into the issue.

Artifactory should be able to handle this scenario by having the SHA value for the plugin dependency file stored in the database. When the member nodes are pulling the dependency file from the database they should check the SHA value after the file has been pulled to the filesystem and compare it to the SHA value in the database for the specific dependency file. If there is a mismatch, then Artifactory should update the dependency jar stored as a blob in the database by pulling from the Primary again and updating the database and subsequently have the member nodes pull the correct dependency file again. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4p7:az6",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Default deployment repository is not changed after removing that repository from virtual repo,RTFACT-20889,86204,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gskolysz,gskolysz,17/Dec/19 10:52 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,REST API,,,,,,,0,PB_Done,,,,,"Setup:

Create virtual repository ""virtual-rep1"" containing local repository ""local-rep1"". Configure ""local-rep1"" to be _default deployment repository_ for ""virtual-rep1"".

Scenario:

Remove ""local-rep1"" from ""virtual-rep1""

Expected:

_default deployment repository_ for ""virtual-rep1"" is unset

Observed:

UI - as expected (/)

REST API: _default deployment repository_ for ""virtual-rep1"" is ""local-rep1"" even though it's not a part of ""virtual-rep1"" anymore (x)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0x0w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"17/Dec/19 10:54 AM;gskolysz;Repo configuration pre change:
{noformat}
{
  ""key"" : ""test-default-deployment"",
  ""packageType"" : ""debian"",
  ""description"" : """",
  ""notes"" : """",
  ""includesPattern"" : ""**/*"",
  ""excludesPattern"" : """",
  ""repoLayoutRef"" : ""simple-default"",
  ""enableComposerSupport"" : false,
  ""enableNuGetSupport"" : false,
  ""enableGemsSupport"" : false,
  ""enableNpmSupport"" : false,
  ""enableBowerSupport"" : false,
  ""enableCocoaPodsSupport"" : false,
  ""enableConanSupport"" : false,
  ""enableDebianSupport"" : true,
  ""debianTrivialLayout"" : false,
  ""enablePypiSupport"" : false,
  ""enablePuppetSupport"" : false,
  ""enableDockerSupport"" : false,
  ""dockerApiVersion"" : ""V2"",
  ""forceNugetAuthentication"" : false,
  ""enableVagrantSupport"" : false,
  ""enableGitLfsSupport"" : false,
  ""enableDistRepoSupport"" : false,
  ""repositories"" : [ ""gs-test-akabuntu"", ""akabuntu-development-local"", ""akabuntu-test-dfw"" ],
  ""artifactoryRequestsCanRetrieveRemoteArtifacts"" : false,
  ""resolveDockerTagsByTimestamp"" : false,
  ""keyPair"" : """",
  ""pomRepositoryReferencesCleanupPolicy"" : ""discard_active_reference"",
  ""defaultDeploymentRepo"" : ""akabuntu-development-local"",
  ""externalDependenciesEnabled"" : false,
  ""virtualRetrievalCachePeriodSecs"" : 7200,
  ""forceMavenAuthentication"" : false,
  ""debianDefaultArchitectures"" : ""amd64,i386"",
  ""optionalIndexCompressionFormats"" : [ ""bz2"" ],
  ""enabledChefSupport"" : false,
  ""rclass"" : ""virtual""
}{noformat}
JSON Document sent to _Update repository configuration_ endpoint:
{noformat}
{
    ""rclass"" : ""virtual"",
    ""packageType"": ""debian"",
    ""repositories"": [""gs-test-akabuntu"", ""akabuntu-test-dfw""]
}{noformat}
Post change configuration
{noformat}
{
  ""key"" : ""test-default-deployment"",
  ""packageType"" : ""debian"",
  ""description"" : """",
  ""notes"" : """",
  ""includesPattern"" : ""**/*"",
  ""excludesPattern"" : """",
  ""repoLayoutRef"" : ""simple-default"",
  ""enableComposerSupport"" : false,
  ""enableNuGetSupport"" : false,
  ""enableGemsSupport"" : false,
  ""enableNpmSupport"" : false,
  ""enableBowerSupport"" : false,
  ""enableCocoaPodsSupport"" : false,
  ""enableConanSupport"" : false,
  ""enableDebianSupport"" : true,
  ""debianTrivialLayout"" : false,
  ""enablePypiSupport"" : false,
  ""enablePuppetSupport"" : false,
  ""enableDockerSupport"" : false,
  ""dockerApiVersion"" : ""V2"",
  ""forceNugetAuthentication"" : false,
  ""enableVagrantSupport"" : false,
  ""enableGitLfsSupport"" : false,
  ""enableDistRepoSupport"" : false,
  ""repositories"" : [ ""gs-test-akabuntu"", ""akabuntu-test-dfw"" ],
  ""artifactoryRequestsCanRetrieveRemoteArtifacts"" : false,
  ""resolveDockerTagsByTimestamp"" : false,
  ""keyPair"" : """",
  ""pomRepositoryReferencesCleanupPolicy"" : ""discard_active_reference"",
  ""defaultDeploymentRepo"" : ""akabuntu-development-local"",
  ""externalDependenciesEnabled"" : false,
  ""virtualRetrievalCachePeriodSecs"" : 7200,
  ""forceMavenAuthentication"" : false,
  ""debianDefaultArchitectures"" : ""amd64,i386"",
  ""optionalIndexCompressionFormats"" : [ ""bz2"" ],
  ""enabledChefSupport"" : false,
  ""rclass"" : ""virtual""
}{noformat}",,,,,,,,,,
npm audit should work with smart repository that points to a remote,RTFACT-20880,86124,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,16/Dec/19 4:28 PM,15/Feb/21 8:26 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,4,,,,,,"When working with npm audit, we states that it works only against virtual repositories.
However, when working with virtual repository which contains a smart remote repository which points to a remote repository (npm registry) it will not work.

Steps to reproduce:
1.Create two Artifactory instances A and B

A contains:
Virtual npm repository which aggregates a local npm repository and a smart remote repository.
The smart remote repository will point to remote repository (npm-remote) in Artifactory B.

B:
Contains npm-remote which points to npm registry.

2. Configure the npm client to work against the virtual of Artifactory A.
3. Create npm project to audit (I used node-saas, see attached)
4. execute npm audit

Workaround:
In Artifactory B, Add the remote repository that points to the npm registry to a virtual and the change the remote repository in Artifactory A to point to the virtual instead.

This is not an expected behavior, since smart remote repository may not have the same capabilities when proxying through a virtual repository as he have from local or remote repository.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0wjs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Conan: Server returns wrong message on missing permissions,RTFACT-20877,86068,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,steffel,steffel,16/Dec/19 6:01 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.15.1,,,,,,,,,,,,,,1,community,Conan,CPE,P2,PB_Done,"When a user uploads a package (with same package id) to a conan repository and hasn't got DELETE permissions, the server returns highly irritating messages:
{code:java}
Uploading conaninfo.txt                                               
Uploading conanmanifest.txt                                           


Waiting 5 seconds to retry...
ERROR: 502 Server Error: Bad Gateway for url: https://rel.besi.com:443/artifactory/api/conan/da-conan-pre-local/v1/files/besi/DragonEye/3.9.0-191212-99af/stable/0/package/8fcda9778302e0b4a927f173d9c41c4c85150579/0/conan_package.tgz
ERROR: 
Error uploading file: conan_package.tgz, '502 Server Error: Bad Gateway for url: https://rel.besi.com:443/artifactory/api/conan/da-conan-pre-local/v1/files/besi/DragonEye/3.9.0-191212-99af/stable/0/package/8fcda9778302e0b4a927f173d9c41c4c85150579/0/conan_package.tgz'
ERROR: 500 Server Error: Internal Server Error for url: https://rel.besi.com:443/artifactory/api/conan/da-conan-pre-local/v1/files/besi/DragonEye/3.9.0-191212-99af/stable/0/package/8fcda9778302e0b4a927f173d9c41c4c85150579/0/conanmanifest.txt
ERROR: 
Error uploading file: conanmanifest.txt, '500 Server Error: Internal Server Error for url: https://rel.besi.com:443/artifactory/api/conan/da-conan-pre-local/v1/files/besi/DragonEye/3.9.0-191212-99af/stable/0/package/8fcda9778302e0b4a927f173d9c41c4c85150579/0/conanmanifest.txt'
ERROR: Execute upload again to retry upload the failed files: conan_package.tgz, conanmanifest.txt. [Remote: da-conan-pre]
{code}
... whereas the server log contains:
{code:java}
2019-12-13 10:30:43,950 [http-nio-8081-exec-9] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 403: Not enough permissions to delete/overwrite artifact 'da-conan-pre-local:besi/DragonEye/3.9.0-191212-99af/stable/0/package/8fcda9778302e0b4a927f173d9c41c4c85150579/0/conan_package.tgz' (user 'vis-jenkins' needs DELETE permission).
{code}
I would expect that the server exactly returns this message to the command line client.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc497x:ir",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"21/Sep/20 4:54 PM;carlosz;This issue is still happening for latest Artifactory (7.7.3) and latest Conan client version (1.29.2)","15/Oct/20 7:34 AM;steffel;Still happening on 7.9.1.
{code:java}
$ conan upload skywalker/1.0.0@besi/stable --all -r test-release

Uploading to remote 'test-release':
Uploading skywalker/1.0.0@besi/stable to remote 'test-release'                           
Recipe is up to date, upload skipped
Uploading package 1/1: 7059e0a4d8f83c2573b1c320b8fcf35e31303f50 to 'test-release'        
Compressing conan_package.tgz completed [1 files]                                        
Uploaded conan_package.tgz -> skywalker/1.0.0@besi/stable:7059 [0.14k]                   
ERROR: 500 Server Error: Internal Server Error for url: https://rel-test.besi.com:443/artifactory/api/conan/da-conan-release-local/v1/files/besi/skywalker/1.0.0/stable/0/package/7059e0a4d8f83c2573b1c320b8fcf35e31303f50/0/conan_package.tgz
Waiting 5 seconds to retry...
Uploaded conan_package.tgz -> skywalker/1.0.0@besi/stable:7059 [0.14k]                   
ERROR: 
Error uploading file: conan_package.tgz, '500 Server Error: Internal Server Error for url: https://rel-test.besi.com:443/artifactory/api/conan/da-conan-release-local/v1/files/besi/skywalker/1.0.0/stable/0/package/7059e0a4d8f83c2573b1c320b8fcf35e31303f50/0/conan_package.tgz'
Uploaded conanmanifest.txt -> skywalker/1.0.0@besi/stable:7059 [0.11k]                   
ERROR: 500 Server Error: Internal Server Error for url: https://rel-test.besi.com:443/artifactory/api/conan/da-conan-release-local/v1/files/besi/skywalker/1.0.0/stable/0/package/7059e0a4d8f83c2573b1c320b8fcf35e31303f50/0/conanmanifest.txt
Waiting 5 seconds to retry...
Uploaded conanmanifest.txt -> skywalker/1.0.0@besi/stable:7059 [0.11k]                   
ERROR: 
Error uploading file: conanmanifest.txt, '500 Server Error: Internal Server Error for url: https://rel-test.besi.com:443/artifactory/api/conan/da-conan-release-local/v1/files/besi/skywalker/1.0.0/stable/0/package/7059e0a4d8f83c2573b1c320b8fcf35e31303f50/0/conanmanifest.txt'
ERROR: skywalker/1.0.0@besi/stable:7059e0a4d8f83c2573b1c320b8fcf35e31303f50: Upload package to 'test-release' failed: Execute upload again to retry upload the failed files: conan_package.tgz, conanmanifest.txt. [Remote: test-release]ERROR: Errors uploading some packages
{code}",,,,,,,,,
Artifactory installService.sh script Issue,RTFACT-20860,85992,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vigneshs,vigneshs,14/Dec/19 2:49 PM,15/Feb/21 8:29 AM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Installer,,,,,,,1,,,,,,"+*Problem Description:*+
 The customer is trying to install Artifactory as a service is the Ubuntu machine. He tried modifying the machine name under /etc/issue. When we cat this file, it will show the machine name and version as the output.

*Example:* root@vignesh-ubuntu:/home/vigneshs/artifactory-pro-6.16.0/bin# *cat /etc/issue*
 *Ubuntu 18.04.3 LTS \n \l*

Now he modified the content in the file as ""*misuse 18.04.3 LTS \n \l*""

After this, he tried to run the installService.sh script. Here, the install script is not considering this machine as ubuntu. As it contains the word ""*suse*"", the script is considering it as SUSE Linux.

I further tried to see the content in the /etc/issue file in SUSE Linux and it contains the below message.

*Example:* vignesh-suse-linux:~ # *cat /etc/issue*
 *Welcome to SUSE Linux Enterprise Server 12 SP5 (x86_64) - Kernel \r (\l).*

In the installService.sh script we are trying to find the pattern whether this file contains a string ""suse"" in line number 296.
 *SUSE=$(cat /etc/issue | grep -io suse)*

Instead of finding for a matching text, customer is suggesting to use a different technique for detecting where to put systems files.

As a workaround, providing a space in the grep will resolve this issue, as in the suse Linux machine the string contains the word SUSE. But I feel it is not a standard way of doing it.
 *SUSE=$(cat /etc/issue | grep -io "" suse "")*

Please see the below outputs while trying to *cat /etc/issues file*

*1.*root@vignesh-ubuntu:/home/vigneshs/artifactory-pro-6.16.0/bin# *cat /etc/issue*
 *output: misuse 18.04.3 LTS \n \l*

*2.*root@vignesh-ubuntu:/home/vigneshs/artifactory-pro-6.16.0/bin# *cat /etc/issue | grep -io suse*
 *output: suse*
 **

*3.*root@vignesh-ubuntu:/home/vigneshs/artifactory-pro-6.16.0/bin# *cat /etc/issue | grep -o suse*
 *output: suse*
 **

*4.*root@vignesh-ubuntu:/home/vigneshs/artifactory-pro-6.16.0/bin# *cat /etc/issue | grep -o suse | wc -l*

*output: 1*
 **

*5.*root@vignesh-ubuntu:/home/vigneshs/artifactory-pro-6.16.0/bin# *cat /etc/issue | grep -io "" suse ""*
 *output: NA*

If you observe point 5. providing the space in suse while doing a grep eliminates this issue.

Please modify the script with the above workaround or If the above workaround is not recommended, please modify the script accordingly with a better technique so that the script will be more reliable.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0vt4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Intermittent 403 errors,RTFACT-20859,85983,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Stefan_Kraus,Stefan_Kraus,13/Dec/19 8:18 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,0,,,,,,"### Bug

We are experiencing intermittent 403 error return codes from requests sent to our cloud Artifactory instance. 

Example log from our instance that seems to coincide : 
```
2019-12-11 16:15:05,807 [http-nio-8082-exec-179] [INFO ] (o.a.r.HttpRepo      :470) - pypi-public downloading https://pypi.org/simple/coverage/ Unknown content length
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0vrc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Jan/20 10:45 PM;Stefan_Kraus;Related support ticket 120695 was resolved, however today I have been experiencing this issue again. ","30/Jun/20 7:06 PM;msoyerwfs;We have the same issue as well. So far couldn't fix it.","02/Jul/20 3:32 PM;Stefan_Kraus;We attributed this issue with Artifactory not being able to contact XRay, which persisted and was disruptive enough that we eventually disabled XRay altogether. ",,,,,,,,
Permission target can't contain virtual repository,RTFACT-20855,85925,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gskolysz,gskolysz,12/Dec/19 2:14 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,REST API,,,,,,,0,,,,,,"According to docs on this page: https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON, you should be able to put virtual repository in permission target. Last time I checked, that's not possible. 

 

Related: RTFACT-20854",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0veg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Creating new permission target with virtual repository included does not throw any error,RTFACT-20854,85924,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gskolysz,gskolysz,12/Dec/19 2:13 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,REST API,,,,,,,0,,,,,,"sending PUT with below data to */api/security/permissions/pt-name* returns 201 and empty permission target is created

 
{noformat}
{
  ""name"": ""pt-name"",
  ""repositories"": [""some-virtual-repository""],
  ""principals"": {
    ""groups"" : {
        ""some-group"" : [""m"",""r"",""n""]
    }
}
}{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ve8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Missing Dist Reference in Artifacts deployed in a PHP Composer Repository,RTFACT-20852,85920,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ackermannd,ackermannd,12/Dec/19 1:43 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,PHP,,,,,,,0,,,,,,"When deploying Artifacts into a local PHP Composer Repository, there seems to be no possibility to set the dist reference. This is a value needed by Composer to differentiate between dev-x versions of a bundle.

After uploading an artifact and checking the resulting packages.json file that is created for this Composer Bundle, it looks something like this:

 

 
{code:java}
{
  ""packages"" : {
    ""example/testbundle"" : {
      ""0.5.1"" : {
        ""name"" : ""example/testbundle"",
        ""version"" : ""0.5.1"",
        ""authors"" : [ {
          ""name"" : ""Example Author"",
          ""email"" : ""mail@example.com""
        } ],
        ""dist"" : {
          ""type"" : ""zip"",
          ""url"" : ""https://artifactory.example.com/artifactory/api/composer/composer-local/direct-dists/example/testbundle/0.5.1.zip""
        },
        ""type"" : ""symfony-bundle"",
        ""uid"" : 6747812342032212895,
        ""version_normalized"" : ""0.5.1.0"",
      },
      ""dev-develop"" : {
        ""name"" : ""example/testbundle"",
        ""version"" : ""dev-develop"",
        ""authors"" : [ {
          ""name"" : ""Example Author"",
          ""email"" : ""mail@example.com""
        } ],
        ""dist"" : {
          ""type"" : ""zip"",
          ""url"" : ""https://artifactory.example.com/artifactory/api/composer/composer-local/direct-dists/example/testbundle/dev-develop.zip""
        },
        ""type"" : ""symfony-bundle"",
        ""uid"" : 8109715420992883670,
        ""version_normalized"" : ""dev-develop"",
      }
    }
  }
}
{code}
 

Without this reference, composer can't recognize when a dev-develop bundle was updated in Artifactory and needs to be updated on the clients. This not only affects dev-develop bundles but all dev-x bundles, which effectively makes it impossible to use it for active development.

 

 

 

For comparison, the packages.json for a bundle that is mirrored by a PHP Composer Remote Repository that mirrors packagist.org / github.com, you see that the ""dist"" array has the missing ""reference"" value:

 
{code:java}
....
        ""dist"" : {
          ""type"" : ""zip"",
          ""url"" : ""https://artifactory.example.com/artifactory/api/composer/composer-remote/vcs-dists/zip/Seldaek/monolog/38449de333489cd0498a047c27c9c6f1845f52ed"",
          ""reference"" : ""38449de333489cd0498a047c27c9c6f1845f52ed"",
          ""shasum"" : """"
        },
....
{code}
 

 

 

We would expect that there is some way to set that reference for uploaded artifacts. We currently tried the following:
 * adding the reference to the name of the zip file so that it looks like this:
 ** 
{code:java}
https://artifactory.saitow.ag:443/artifactory/api/composer/composer-local/direct-dists/example/testbundle/dev-develop-5001cdc733f900d5fca61ecb9238b8ab149001d3.zip{code}

 * naming the zip file  after the reference value, like it seems to be done for the mirrored remote repository:
 ** 
{code:java}
https://artifactory.saitow.ag:443/artifactory/api/composer/composer-local/direct-dists/example/testbundle/5001cdc733f900d5fca61ecb9238b8ab149001d3.zip{code}

 * we also tried to maybe set that value as a custom property of the uploaded bundle in the repository
 ** something like: ""composer.dist.reference: 5001cdc733f900d5fca61ecb9238b8ab149001d3""

 

But nothing seems to be working. We also found no way how to set this reference anywhere in the documentation.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0vdc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remote test of any repository type returns null for a certain endpoint,RTFACT-20849,85898,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Nimerb,Nimerb,12/Dec/19 11:53 AM,15/Feb/21 8:37 AM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,,,,,,,,0,,,,,,"When trying to setup any remote endpoint, for example RPM, to work with the following endpoint:

[http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.5.0]

*The test remote will return 500 in the request log and an NPE in Artifactory log.*

When checking which request the remote endpoint trigger, noticed that it does the following:

{{1 - curl -H 'X-Artifactory-Originated: ff058d2b87cc2655:-6d542152:16ef961dab4:-8000' -H 'Host: public-repo-1.hortonworks.com' -H 'User-Agent: Artifactory/6.10.6' --compressed '[http://public-repo-1.hortonworks.com/HDP/api/system/version']}}


{{2 - curl -H 'X-Artifactory-Originated: ff058d2b87cc2655:-6d542152:16ef961dab4:-8000' -H 'Host: public-repo-1.hortonworks.com' -H 'User-Agent: Artifactory/6.10.6' -I --compressed 'http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.5.0/'}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0v8g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unexpected EOF read on the socket when uploading artifact checksums with maven,RTFACT-20847,85871,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lwellmer,lwellmer,12/Dec/19 9:07 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,,,,,,,,2,,,,,,"When trying to upload an artifact checksum with Maven the upload fails with a timeout error (server response 408).

The artifactory tomcat log (catalina.out) shows the following errors (company package info was removed):
{code:java}
2019-12-12 09:59:27,998 [http-nio-8040-exec-27] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 409: Failed to read checksum from file: java.io.EOFException: Unexpected EOF read on the socket for path libs-rcs-local:com/xxxxxxxxxxx/xxxxxxxxxxx/2019-12-12.1/xxxxxxxxxxx-source.jar.sha1
2019-12-12 09:59:28,015 [http-nio-8040-exec-3] [INFO ] (o.a.e.UploadServiceImpl:278) - Deploy to 'libs-rcs-local:com/xxxxxxxxxxx/xxxxxxxxxxx/2019-12-12.1/xxxxxxxxxxx-2019-12-12.1-source.jar.md5' Content-Length: 32
2019-12-12 09:59:28,446 [http-nio-8040-exec-16] [ERROR] (o.a.w.s.RepoFilter :262) - Upload request of libs-rcs-local:com/xxxxxxxxxxx/xxxxxxxxxxx/maven-metadata.xml.md5 failed due to {}
org.apache.catalina.connector.ClientAbortException: java.io.EOFException: Unexpected EOF read on the socket
at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:348)
at org.apache.catalina.connector.InputBuffer.checkByteBufferEof(InputBuffer.java:663)
at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:370)
at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:152)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2314)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:2270)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2291)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:2246)
at org.artifactory.util.UploadServiceUtils.consumeRequestBody(UploadServiceUtils.java:100)
at org.artifactory.util.UploadServiceUtils.consumeContentAndRespondWithSuccess(UploadServiceUtils.java:134)
at org.artifactory.engine.UploadServiceImpl.validateAndUploadChecksum(UploadServiceImpl.java:282)
at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:216)
at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:187)
at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:130)
at sun.reflect.GeneratedMethodAccessor343.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
at com.sun.proxy.$Proxy198.upload(Unknown Source)
at org.artifactory.webapp.servlet.RepoFilter.doUpload(RepoFilter.java:254)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:172)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.EOFException: Unexpected EOF read on the socket
at org.apache.coyote.http11.Http11InputBuffer.fill(Http11InputBuffer.java:742)
at org.apache.coyote.http11.Http11InputBuffer.access$300(Http11InputBuffer.java:40)
at org.apache.coyote.http11.Http11InputBuffer$SocketInputBuffer.doRead(Http11InputBuffer.java:1092)
at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:140)
at org.apache.coyote.http11.Http11InputBuffer.doRead(Http11InputBuffer.java:263)
at org.apache.coyote.Request.doRead(Request.java:581)
at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:344)
... 65 common frames omitted
{code}
The timeouts in the nginx reverse proxy are all set to 900 seconds which should be more than enough for the upload of a checksum (it's what the artifactory documentation recommends)","Distributor ID: Debian
Description: Debian GNU/Linux 9.11 (stretch)
Release: 9.11
Codename: stretch

nginx version: nginx/1.10.3

java version ""1.8.0_181""
Java(TM) SE Runtime Environment (build 1.8.0_181-b13)
Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0v2o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
AQL searches with an unquoted number fail,RTFACT-20846,85853,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,12/Dec/19 1:08 AM,15/Feb/21 8:38 AM,18/Feb/21 8:59 AM,,,,,,,,,AQL,,,,,,,1,,,,,,"Symptoms: Changing the order of the same AQL search terms causes the search to fail.

Working AQL:

items.find(\{""repo"": ""test-repo"", ""type"": ""folder"", ""created"": {""$before"": ""1d""}, *""depth"": 3*})

Failing AQL:

items.find({""repo"": ""test-repo"", ""type"": ""folder"", *""depth"": 3,* ""created"": \{""$before"": ""1d""}})

Running the Failing AQL causes Artifactory to return an error message:



2019-12-12 00:26:34,639 [http-nio-8081-exec-5] [ERROR] (o.a.r.r.a.AqlResource:104) - Fail to execute query: items.find({""repo"": ""test-repo"", ""type"": ""folder"", *""depth"": 3*, ""created"": \{""$before"": ""1d""}}).include(""name"", ""created"", ""repo"", ""path"", ""modified_by"")

 

The ""*depth*"" term uses a number as a variable. I believe Artifactory is attempting to parse each term. Without quotes, the number is not read properly. 

If the number is surrounded by quotes it can be used anywhere. If the number is the last search term, it runs normally as the last term is a single character.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0uyo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
CLONE - REST API for downloading branch from VCS remote repository throws error,RTFACT-20844,85850,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sanjeevk,Swaney,11/Dec/19 9:05 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,VCS,,,,,,,2,,,,,,"REST API for list of branches works fine
{code:java}
$curl -uadmin:APAyHPQYADK8ev3PsYoTZiF3ufD -XGET http://sanjeev-rt-xray:8082/artifactory/api/vcs/branches/github/sanjeevkarani/project-examples
[ {
""name"" : ""REL-BRANCH-multi-3.7"",
""commitId"" : ""9d0d303dbc82131a1f1dc20dcbd04c531089d944"",
""isBranch"" : true
}, {
""name"" : ""master"",
""commitId"" : ""b26f705efa17a81bca7a961dc1ed26a40a490b90"",
""isBranch"" : true
}, {
""name"" : ""openshift-s2i-examples"",
""commitId"" : ""b1f2a0d1f0013c6240383a51150a7ebc71201b6c"",
""isBranch"" : true
}, {
""name"" : ""test-branch"",
""commitId"" : ""2d5014624b314fdb54c2ffd4332c2da16651dcdd"",
""isBranch"" : true
} ]{code}
 

REST API for downloading master branch throws error
{code:java}
$ curl -uadmin:APAyHPQYADK8ev3PsYoTZiF3ufD -XGET http://sanjeev-rt-xray:8082/artifactory/api/vcs/downloadBranch/github/sanjeevkarani/project-examples/master?ext=zip
{
""errors"" : [ {
""status"" : 404,
""message"" : ""Unauthorized""
} ]
}{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0uy0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Dec/19 9:06 PM;Swaney;Cloned because RTFACT-20398 was closed with no explaination. Seeing the exact same behavior here.","29/Jan/20 9:36 AM;martin.rueegsegger;I have the same symptom here. Downloading a file from the branch works. But trying to download a whole branch as documented in [https://www.jfrog.com/confluence/display/RTF/VCS+Repositories#VCSRepositories-DownloadBranch] leads to a HTTP 404.","22/Dec/20 4:03 PM;evan.woodward@sig.com;I'm still seeing this error nearly a year later.  Has this been looked into?",,,,,,,,
pom.xml processing with embedded '>' fails to parse,RTFACT-20843,85849,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mariy,mariy,11/Dec/19 7:36 PM,15/Feb/21 8:39 AM,18/Feb/21 8:59 AM,,6.12.2,6.16.0,,,,,,,,,,,,,1,,,,,,"Pom.xml processing with embedded '>' fail to parse. Artifactory rejects this POM as invalid, but it is in fact valid XML. https://repository.cloudera.com/artifactory/libs-release/org/apache/parquet/parquet/1.9.0-cdh6.3.1/parquet-1.9.0-cdh6.3.1.pom

{
 ""errors"" : [ {
 ""status"" : 409,
 ""message"" : ""Failed to read POM for 'org/apache/parquet/parquet/1.9.0-cdh6.3.1/parquet-1.9.0-cdh6.3.1.pom': processing instruction started on line 293 and column 12 was not closed (position: END_TAG seen ...<?ignore\\n <executions>... @294:22) .""
 } ]
}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0uxs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Yum Index merging break on stale cache,RTFACT-20841,85844,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pbusque,pbusque,11/Dec/19 6:19 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,YUM,,,,,,,0,,,,,,"When a virtual yum index calculation is launched, if any remote repository has expired cache, the indexation break with an exception.

 
{noformat}
java.io.IOException: java.io.IOException: Error during merge of index: Cent7Server-epel-x86_64-cache/repodata/1922f8cbb7dd3a265e16539f0f720b11379515c0ed7061cce21a0de47ba029b9-primary.xml.gz: Can't retrieve file in path repodata/1922f8cbb7dd3a265e16539f0f720b11379515c0ed7061cce21a0de47ba029b9-primary.xml.gz from repo Cent7Server-epel-x86_64-cache
        at org.iostreams.streams.in.OutputToInputStream.checkForException(OutputToInputStream.java:170)
        at org.iostreams.streams.in.OutputToInputStream.read(OutputToInputStream.java:100)
        at java.base/java.io.InputStream.read(InputStream.java:205)
        at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2314)
        at org.apache.commons.io.IOUtils.copy(IOUtils.java:2270)
        at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2291)
        at org.artifactory.addon.yum.virtual.index.YumVirtualRepoMetadataWriter.writeMergedIndexToFileSystem(YumVirtualRepoMetadataWriter.java:156)
        at org.artifactory.addon.yum.virtual.index.YumVirtualRepoMetadataWriter.writeMetadata(YumVirtualRepoMetadataWriter.java:100)
        at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.writeYumVirtualMetadata(YumVirtualCalculatorImpl.java:83)
        at jdk.internal.reflect.GeneratedMethodAccessor739.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
        at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
        at com.sun.proxy.$Proxy306.writeYumVirtualMetadata(Unknown Source)
        at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.calculateYumVirtualMetadata(YumVirtualCalculatorImpl.java:69)
        at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.calculateYumVirtualMetadataAsync(YumVirtualCalculatorImpl.java:42)
        at jdk.internal.reflect.GeneratedMethodAccessor700.invoke(Unknown Source)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.artifactory.work.queue.WorkQueueImpl.invoke(WorkQueueImpl.java:123)
        at org.artifactory.work.queue.WorkQueueImpl.doJobs(WorkQueueImpl.java:96)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.io.IOException: Error during merge of index: Cent7Server-epel-x86_64-cache/repodata/1922f8cbb7dd3a265e16539f0f720b11379515c0ed7061cce21a0de47ba029b9-primary.xml.gz: Can't retrieve file in path repodata/1922f8cbb7dd3a265e16539f0f720b11379515c0ed7061cce21a0de47ba029b9-primary.xml.gz from repo Cent7Server-epel-x86_64-cache
        at org.artifactory.addon.yum.virtual.merge.YumIndexMerger.writeIndexToMergedResult(YumIndexMerger.java:90)
        at org.artifactory.addon.yum.virtual.merge.YumIndexMerger.access$000(YumIndexMerger.java:35)
        at org.artifactory.addon.yum.virtual.merge.YumIndexMerger$1.write(YumIndexMerger.java:66)
        at org.iostreams.streams.in.OutputToInputStream$1.call(OutputToInputStream.java:140)
        at org.iostreams.streams.in.OutputToInputStream$1.call(OutputToInputStream.java:136)
        ... 5 common frames omitted
Caused by: java.lang.IllegalStateException: Can't retrieve file in path repodata/1922f8cbb7dd3a265e16539f0f720b11379515c0ed7061cce21a0de47ba029b9-primary.xml.gz from repo Cent7Server-epel-x86_64-cache
        at org.artifactory.addon.yum.virtual.merge.YumIndexMerger.getResourceHandleFromContainingRepo(YumIndexMerger.java:121)
        at org.artifactory.addon.yum.virtual.merge.YumIndexMerger.getIndexInputStream(YumIndexMerger.java:101)
        at org.artifactory.addon.yum.virtual.merge.YumIndexMerger.writeIndexToMergedResult(YumIndexMerger.java:79)
        ... 9 common frames omitted
{noformat}
Accessing the invalid file path return the following error:
{noformat}
{
  ""errors"" : [ {
    ""status"" : 404,
    ""message"" : ""Resource has expired""
  } ]
}{noformat}
The workarround is to manually delete EVERY cache repository manually.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0uwo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
non-admin users can't delete a build from the build number list,RTFACT-20839,85840,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,itamarb,itamarb,11/Dec/19 4:09 PM,15/Feb/21 8:42 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"A non-admin user who has build delete permissions does not have the ability to delete a specific build number from the build browser, the 'x' icon does not appear.
He can delete the entire build name, and he can delete the file from the build info repository.

Steps to reproduce:
1. Create a non admin user
2. Create a build permission target granting delete permissions for that user on all builds
3. Log in with that user and browse to the build tab, click on a build name, hover over a build number, the delete icon does not show up.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0uvs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Build promotion (Move) cause delete of build in Xray,RTFACT-20838,85826,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,chenk,chenk,11/Dec/19 2:15 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"when promoting (move) a build, artifactory send event for delete (build) to Xray.

Artifactory should send delete build event upon promotion ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0usw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
PHP packages takes very long time with artifactory,RTFACT-20823,85747,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,amaabdou,amaabdou,10/Dec/19 1:56 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,PHP,,,,,,,2,performance,,,,,"PHP Packagist have a digest file: https://repo.packagist.org/packages.json
contains all php packages metadata
this file does not exist in  artifactory as in Packagist 
[https://artifactoryhost.local/artifactory/api/composer/composer-github/packages.json]

So composer ends up pulling individual packages metadata besides the files
this causes lots of pain for the engineers and large waiting time 

Artifactory should be caching proxy in this case so not sure why in this it returns something different from Packagist

Related issues 
https://www.jfrog.com/jira/browse/RTFACT-17378?attachmentViewMode=list
https://www.jfrog.com/jira/browse/RTFACT-18169
https://www.jfrog.com/jira/browse/RTFACT-15188",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ubk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
System import and REST “Add Build” fails if the Build info properties has [] values in them,RTFACT-20818,85707,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,manojt,manojt,09/Dec/19 10:31 PM,15/Feb/21 8:47 AM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,Build Info,Build Info Repository,,,,,,1,,,,,,"When we upgrade the artifactory instance from the versions below 6.6 version to higher, the build migration fails if the build info.json file has properties with [] in it.

The stack trace would be the following:

Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.lang.String` out of START_ARRAY token

at [Source: (org.jfrog.storage.binstore.common.ReaderTrackingInputStream); line: 3, column: 17] (through reference chain: org.jfrog.build.api.Build[""properties""]->java.util.Properties[""testing""])

 

EDIT: this is not a regression, the fix only helped with a in-place upgrade, not with REST API build adds or with full system imports. Altering the bug to fix those cases.

 

 ",,,,,,,,,,,,,,,,,,,"09/Dec/19 10:27 PM;manojt;build.json;https://www.jfrog.com/jira/secure/attachment/37635/build.json","09/Dec/19 10:27 PM;manojt;build_info_migration.log;https://www.jfrog.com/jira/secure/attachment/37636/build_info_migration.log","09/Jan/20 7:18 AM;manojt;qual.json;https://www.jfrog.com/jira/secure/attachment/38981/qual.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0u2w:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Changing the DB_HOST host still uses the initial host,RTFACT-20817,85687,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,obogdan,obogdan,09/Dec/19 3:01 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.15.0,,,,,,,Docker Image,,,,,,,0,Artifactory,database,docker,,,"Using the docker image *docker.bintray.io/jfrog/artifactory-pro:6.15.0* with an external DB, if for the first start we set *DB_HOST* to *host1*, and for the second start we set the *DB_HOST* to *host2*, Artifactory still tries to connect to *host1*.

Sample output:
{noformat}
[445 entrypoint-artifactory.sh] Waiting for DB postgresql to be ready on arty-test-db.xxx.us-east-1.rds.amazonaws.com/5432 within 30 seconds
[598 entrypoint-artifactory.sh] /var/opt/jfrog/artifactory/etc/db.properties already set to postgresql
[595 entrypoint-artifactory.sh] /var/opt/jfrog/artifactory/etc/db.properties already exists. Making sure it's set to postgresql...
[592 entrypoint-artifactory.sh] Checking if need to copy postgresql configuration
[590 entrypoint-artifactory.sh] DB_HOST is set to arty-test-db2.xxx.us-east-1.rds.amazonaws.com
[674 entrypoint-artifactory.sh] DB_TYPE is set to postgresql
{noformat}","{noformat}
    volumes:
     - ./data/artifactory/node1:/var/opt/jfrog/artifactory
     - ./data/artifactory/ha:/var/opt/jfrog/artifactory-ha
     - ./data/artifactory/backup:/var/opt/jfrog/artifactory-backup
    environment:
     - ARTIFACTORY_MASTER_KEY=FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
     - HA_IS_PRIMARY=true
     - HA_DATA_DIR=/var/opt/jfrog/artifactory-ha
     - HA_BACKUP_DIR=/var/opt/jfrog/artifactory-backup
     - HA_MEMBERSHIP_PORT=10017
     - DB_TYPE=postgresql
     - DB_USER=artifactory
     - DB_PASSWORD=password
    - DB_HOST=arty-test-db2.xxx.us-east-1.rds.amazonaws.com
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0tyo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Dry run gives wrong results comparing to the actual action.,RTFACT-20804,85585,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaharl,shaharl,08/Dec/19 9:50 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When running a Dry run for a file with invalid path name, the Dry run passes but the actual action gives an error such as copying an artifact with a slash after the space in its name as follows:

!Screen Shot 2019-12-08 at 10.27.11.png|thumbnail!!Screen Shot 2019-12-08 at 10.27.27.png|thumbnail!",,,,,,,,,,,,,,,,,,,"08/Dec/19 9:50 AM;shaharl;Screen Shot 2019-12-08 at 10.27.11.png;https://www.jfrog.com/jira/secure/attachment/37600/Screen+Shot+2019-12-08+at+10.27.11.png","08/Dec/19 9:50 AM;shaharl;Screen Shot 2019-12-08 at 10.27.27.png;https://www.jfrog.com/jira/secure/attachment/37599/Screen+Shot+2019-12-08+at+10.27.27.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0te0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Service fails on Ubuntu 18.04.2 when upgrading from a version before 6.14.0,RTFACT-20796,85549,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,06/Dec/19 9:21 PM,15/Feb/21 9:18 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"According to https://www.jfrog.com/jira/browse/RTFACT-20383, Artifactory 6.14.0 should fix the service for installations/upgrades on Ubuntu 18. However, on Ubuntu 18.04.2, after upgrading from a version prior to 6.14 to 6.14 or above, the service startup fails. Note though that the service works for straight installation of 6.14 or above on Ubuntu 18.04.2, and after upgrades/installations on Ubuntu 18.04.3.

 

Steps to reproduce:

-spin up VM with Ubuntu 18.04.2 ISO

-install Artifactory 6.8.17

-upgrade to Artifactory 6.14.0

-try starting Artifactory with systemctl, see it fails with ""Can't open PID file /var/run/artifactory.pid""

Workaround:

Follow steps found at [http://web.archive.org/web/20181012191636/http://vivin.net/2018/09/26/getting-artifactory-running-on-ubuntu-18-04/]",,,,,,,,,,,,,INST-306,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0t80:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
JFMC trying to connect to the remote repositories (currently offline/shutdown) of the Artifactory which is added a service in JFMC,RTFACT-20791,85494,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,harshm,harshm,05/Dec/19 8:10 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.10.2,,,,,,,,,,,,,,0,,,,,,"Artifactory version: 6.10

JFMC: Latest 3.5.4

Required:

2 Art Instance

1 JFMC instance

*Steps to reproduce:*
 # Add the local repo in the Art2
 # Add the Art2 repo as remote repo in Art1
 # Now shut down the Art2
 # Add Art1 as service in JFMC
 # JFMC for some reason is trying to connect the remote repo of Art2 and throwing the error Connection to remote repository failed. Unknown host - hostname

Expected: JFMC should not try connection to the Art1's added Art2 remote repo

 

Note: We tried the same set up and we are not able to reproduce the error. However customer's logs are getting filled up with this error in JFMC. 

*Please find the stack trace:*
2019-11-27 21:13:25.869 [taskScheduler-2] [WARN ] (o.j.m.s.u.UrlUtils  :92) - Normalizing URL: the following host cannot be resolved: 
[http://im-bld-arc-old.ca.com:8081/artifactory]
 
[java.net|http://java.net/]
.UnknownHostException: 
[im-bld-arc-old.ca.com|http://im-bld-arc-old.ca.com/]
: Name or service not known
        at java.base/java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method)
        at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:929)
        at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1515)
        at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:848)
        at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1505)
        at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1364)
        at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1298)
        at java.base/java.net.InetAddress.getByName(InetAddress.java:1248)
        at org.jfrog.mc.service.utils.UrlUtils.normalize(UrlUtils.java:88)
        at org.jfrog.mc.service.monitoring.InstanceIpCacheService.cacheNormalizedUrl(InstanceIpCacheService.java:75)
        at java.base/java.lang.Iterable.forEach(Iterable.java:75)
        at org.jfrog.mc.service.monitoring.InstanceIpCacheService.updateAllArtifactoryNormalizedUrls(InstanceIpCacheService.java:69)
        at org.jfrog.mc.service.scheduling.SchedulingService.lambda$scheduleJob$0(SchedulingService.java:74)
        at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
        at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:81)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
        at java.base/java.lang.Thread.run(Thread.java:834)
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0sw8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Cannot get artifacts from proxy repository, that was deleted from remote repo",RTFACT-20787,85456,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,oyankovich,oyankovich,05/Dec/19 10:40 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,Remote Repository ,,,,,,,0,artifactory,artifacts,repository,,,"We created proxy of [https://registry.npmjs.org|https://registry.npmjs.org/]. And we are trying to get es-abstract@1.14.0, that exists in our Artifactory cache, but it was deleted from [https://registry.npmjs.org|https://registry.npmjs.org/], and we get an error ""No matching version found for es-abstract@1.14.0""

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0so0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory can cache corrupt Docker blobs/layers ,RTFACT-20781,85420,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yonatanb,yonatanb,04/Dec/19 5:18 PM,15/Feb/21 3:29 PM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,,,,,,,,0,PB_Done,,,,,"In case of a connection issue or a 200 response with wrong content-type/actual content during a docker pull, Artifactory might cache corrupted layers.
It seems that Artifactory does not validate the checksum of the layer against the manifest. 

After an additional check, it seems that the manifest is protected and cannot be cached as corrupted but the layers themselves are vulnerable to that. 

Steps to reproduce: 

1. Pull a docker image from an Artifactory remote
2. Configure a proxy between Artifactory and the remote server
3. Either make the proxy return an invalid body for a blob endpoint or edit the Response content for one of the layers
4. You will see Artifactory caches the corrupted layer",,,,,,,,,,,,,,,,RTFACT-18095,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0sg0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Dec/19 8:10 AM;yonatanb;Same behaviour as documented in 18095 for NPM but for Docker","01/Jul/20 10:37 PM;mcarlton;This is affecting Artifactory 6.20.x as well","07/Jul/20 12:13 PM;joe.henshaw;Please address this for all remote repository types and not just Docker. (y)",,,,,,,,
api/pypi in the smart remote URL breaks installation of packages,RTFACT-20779,85415,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaharl,shaharl,04/Dec/19 1:42 PM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,PB_Done,,,,,"Not related to RTFACT-20746 according to yehudah.

When configuring pypi smart remote, installing packages on version 6.14.1 give the following error:

pip._vendor.requests.exceptions.HTTPError: 404 Client Error: Not Found for url: http://shaharl-pip:8081/artifactory/api/pypi/pypi/packages/packages/1c/d8/50243699d41d6eabd19efb86fb00d99f89580e5cb795b577a5c32ce39ae7/paramiko-2.7.0-py2.py3-none-any.whl

However, the workaround for this issue is ommiting the {color:#FF0000}*api/pypi* {color}from the smart remote URL and packages can be installed.

Steps to reproduce:

 

1) configure smart pypi remote as mentioned in our docs [link title|[https://www.jfrog.com/confluence/display/RTF/Smart+Remote+Repositories]]

2) Install a packge

3) implement the workaround.",,,,,,,,,,,,,,,,RTFACT-20746,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0sew:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Apr/20 11:46 AM;dwerdermann;We hit the same problem after upgrading to v6.18.0.
The documentation says

{code}https://www.jfrog.com/confluence/display/JFROG/PyPI+Repositories

For a PyPI repository hosted on another Artifactory instance: Set the remote repository's PyPI API URL in both the URL field and the Registry URL field. For example, to proxy a PyPI repository called ""python-project"" hosted by an Artifactory instance at https://my.remote.artifactory/artifactory/, you would set both the URL field and the Registry URL to https://my.remote.artifactory/artifactory/api/pypi/python-project as shown below: ...{code}

But this does not work. At least not for v6.18.0, v7.3.2

Instead the *URL* and *Registry URL* need to be diffenrent:


|URL|https://my.remote.artifactory/artifactory/python-project|
|Registry URL|https://my.remote.artifactory/artifactory/api/pypi/python-project|

So this is a bug or the the documentation needs to be fixed.",,,,,,,,,,
Random fail in pushing docker image,RTFACT-20758,85229,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,735314,735314,02/Dec/19 1:35 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,5.2.1,,,,,,,,,,,,,,0,,,,,,"Recently, I'm having trouble to push docker images to my Docker Repository at Artifactory. It fails at the push step.

Could you guys help me out?

GitLab Job Panel Log:

---------------------------------------------------------------------------------------------------------------------------

{{$ docker push docker.prd.useredecloud/$image_name:$node_version}}
{{The push refers to repository [docker.prd.useredecloud/node]}}
{{e036c425e3a7: Preparing}}
{{bdd5d0eb997a: Preparing}}
{{6d624cc73d1d: Preparing}}
{{e6917dd58d68: Preparing}}
{{ba92577c9e15: Preparing}}
{{513050e3bf04: Preparing}}
{{77b174a6a187: Preparing}}
{{77b174a6a187: Waiting}}
{{513050e3bf04: Waiting}}
{{e036c425e3a7: Pushed}}
{{513050e3bf04: Layer already exists}}
{{6d624cc73d1d: Pushed}}
{{77b174a6a187: Layer already exists}}
{{ba92577c9e15: Pushed}}
{{e6917dd58d68: Pushed}}
{{bdd5d0eb997a: Retrying in 5 seconds}}
{{bdd5d0eb997a: Retrying in 4 seconds}}
{{bdd5d0eb997a: Retrying in 3 seconds}}
{{bdd5d0eb997a: Retrying in 2 seconds}}
{{bdd5d0eb997a: Retrying in 1 second}}
{{bdd5d0eb997a: Retrying in 10 seconds}}
{{bdd5d0eb997a: Retrying in 9 seconds}}
{{bdd5d0eb997a: Retrying in 8 seconds}}
{{bdd5d0eb997a: Retrying in 7 seconds}}
{{bdd5d0eb997a: Retrying in 6 seconds}}
{{bdd5d0eb997a: Retrying in 5 seconds}}
{{bdd5d0eb997a: Retrying in 4 seconds}}
{{bdd5d0eb997a: Retrying in 3 seconds}}
{{bdd5d0eb997a: Retrying in 2 seconds}}
{{bdd5d0eb997a: Retrying in 1 second}}
{{bdd5d0eb997a: Retrying in 15 seconds}}
{{bdd5d0eb997a: Retrying in 14 seconds}}
{{bdd5d0eb997a: Retrying in 13 seconds}}
{{bdd5d0eb997a: Retrying in 12 seconds}}
{{bdd5d0eb997a: Retrying in 11 seconds}}
{{bdd5d0eb997a: Retrying in 10 seconds}}
{{bdd5d0eb997a: Retrying in 9 seconds}}
{{bdd5d0eb997a: Retrying in 8 seconds}}
{{bdd5d0eb997a: Retrying in 7 seconds}}
{{bdd5d0eb997a: Retrying in 6 seconds}}
{{bdd5d0eb997a: Retrying in 5 seconds}}
{{bdd5d0eb997a: Retrying in 4 seconds}}
{{bdd5d0eb997a: Retrying in 3 seconds}}
{{bdd5d0eb997a: Retrying in 2 seconds}}
{{bdd5d0eb997a: Retrying in 1 second}}
{{bdd5d0eb997a: Retrying in 20 seconds}}
{{bdd5d0eb997a: Retrying in 19 seconds}}
{{bdd5d0eb997a: Retrying in 18 seconds}}
{{bdd5d0eb997a: Retrying in 17 seconds}}
{{bdd5d0eb997a: Retrying in 16 seconds}}
{{bdd5d0eb997a: Retrying in 15 seconds}}
{{bdd5d0eb997a: Retrying in 14 seconds}}
{{bdd5d0eb997a: Retrying in 13 seconds}}
{{bdd5d0eb997a: Retrying in 12 seconds}}
{{bdd5d0eb997a: Retrying in 11 seconds}}
{{bdd5d0eb997a: Retrying in 10 seconds}}
{{bdd5d0eb997a: Retrying in 9 seconds}}
{{bdd5d0eb997a: Retrying in 8 seconds}}
{{bdd5d0eb997a: Retrying in 7 seconds}}
{{bdd5d0eb997a: Retrying in 6 seconds}}
{{bdd5d0eb997a: Retrying in 5 seconds}}
{{bdd5d0eb997a: Retrying in 4 seconds}}
{{bdd5d0eb997a: Retrying in 3 seconds}}
{{bdd5d0eb997a: Retrying in 2 seconds}}
{{bdd5d0eb997a: Retrying in 1 second}}
{{unknown: Bad props auth token: basictoken= [hidden]}}
{{ERROR: Job failed: exit code 1}}

{{--------------------------------------------------------------------------}}

Thanks in advance,

 

Gabriel Teixeira",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0rb4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Jul/20 4:47 PM;ashok285;We are also facing the same issue. Anyone, please look at on this issue.",,,,,,,,,,
GPG key can’t be longer than 4000 ,RTFACT-20756,84180,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,17/Nov/19 10:20 AM,15/Feb/21 10:17 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"Today we can't upload a gpg key that bigger than 4000 but you can upload a larger gpg key on distribution

 !image.png|thumbnail!  ",,,,,,,,,,,,,,,,,,,"17/Nov/19 8:37 AM;batelt;image.png;https://www.jfrog.com/jira/secure/attachment/36892/image.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0l28:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Dec/19 1:20 PM;yevdoa;After a conversation with [~krihelis], [~nirb] and [~nadavy] the decision was not implement any changes now, but wait for UGA to be released first.
The fix should come to the Artifactory's side. The VARCHAR (4000) limitation should be removed/increased (to at least 4096)",,,,,,,,,,
proxy page - select default proxy in jcr you can see all the services,RTFACT-20747,85116,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,moshey,moshey,28/Nov/19 2:58 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,!Screen Shot 2019-11-28 at 16.57.39.png!,,,,,,,,,,,,,,,,,,,"28/Nov/19 2:57 PM;moshey;Screen Shot 2019-11-28 at 16.57.39.png;https://www.jfrog.com/jira/secure/attachment/37357/Screen+Shot+2019-11-28+at+16.57.39.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0qmo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Getting ""Package path already exists on OJO"" when trying to add artifact to JCenter ",RTFACT-20735,85074,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nimroddayan,nimroddayan,28/Nov/19 9:17 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I'm trying to add [https://bintray.com/nimroddayan/buildmetrics/buildmetrics-db]

to JCenter and getting an error: Package path already exists on OJO

I previously added it to JCenter with group ID com.nimroddayan

Then I tried to add another artifact [https://bintray.com/nimroddayan/buildmetrics/buildmetrics-common] to JCenter and got the same error message. I realized that the group ID I entered previously should have been com.nimroddayan.buildmetrics instead so I deleted the first one and uploaded the artifact again. Now I'm getting this error for both artifacts.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0qdc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upgrading/Migration form 4.3.3 (windows) to 6.15.0 (linux),RTFACT-20732,85033,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cisaksen,cisaksen,27/Nov/19 3:00 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"First I don't know if this is the proper place for this question. If please direct me the correct forum to do so.  Thank you

Upgrading/Migration from 4.3.3(windows using builtin DB) to 6.15.0 (linux using mariadb),  I exported (system) from 4.3.3 and imported into the 6.15 system and I ended up with more artifacts then the old system.  4.3.3 #of artifacts 1572  -> 6.15.0 #of artifacts  2254  -  is this correct or should the new system had the same amount as the old ?

Thank you",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0q4o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upgrading Artifactory Pro / HA from 6.0.3 to 6.15.0 results in shared token / key issues,RTFACT-20724,84929,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joel.cass,joel.cass,27/Nov/19 6:37 AM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I am having issues after upgrading an Artifactory HA cluster using rpms. It seems that there is an issue with the shared tokens / keys, which I hear have changed in some way in 6.x but the documentation I can find (outside of stackoverflow) does not suggest that the change would affect the upgrade process.

I have tried the following off different websites, with no help:

https://stackoverflow.com/questions/55142890/join-key-file-not-created-or-deleted-on-upgrade-to-6-8-x-artifactory-pro

SO method 1
{code}
sudo systemctl stop artifactory
sudo rm /var/opt/jfrog/artifactory/access/etc/keys/join.key
sudo rm /var/opt/jfrog/artifactory/etc/security/join.key
export JFROG_JOIN_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
sudo systemctl start artifactory
{code}

SO method 2 (adapted from 
https://www.jfrog.com/confluence/display/ACC/Creating+Trust+between+Services#CreatingTrustbetweenServices-Managingthejoin.key )
{code}
sudo systemctl stop artifactory
cd /var/opt/jfrog/artifactory
sudo su -c ""openssl rand -hex 16 > access/etc/keys/join.key""
sudo chown artifactory:artifactory access/etc/keys/join.key
sudo chmod 600 access/etc/keys/join.key
sudo cp -a access/etc/keys/join.key etc/security/join.key
sudo systemctl start artifactory
{code}

I have found in both instances the join.key is deleted after a certain period of time.

The error happens on both servers, referencing the other server having the issue. Is there a way to get this going? 

Server log:

{code}2019-11-27 17:19:55,471 [http-nio-8081-exec-1] [ERROR] (o.a.w.s.ArtifactoryFilter:194) - Artifactory failed to initialize: Context is null
2019-11-27 17:20:17,804 [art-init] [INFO ] (o.a.w.s.ArtifactoryContextConfigListener:270) -
                _   _  __           _                     _    _
     /\        | | (_)/ _|         | |                   | |  | |   /\
    /  \   _ __| |_ _| |_ __ _  ___| |_ ___  _ __ _   _  | |__| |  /  \
   / /\ \ | '__| __| |  _/ _` |/ __| __/ _ \| '__| | | | |  __  | / /\ \
  / ____ \| |  | |_| | || (_| | (__| || (_) | |  | |_| | | |  | |/ ____ \
 /_/    \_\_|   \__|_|_| \__,_|\___|\__\___/|_|   \__, | |_|  |_/_/    \_\
 Version:  6.15.0                                  __/ |
 Revision: 61500900                               |___/
 Artifactory Home: '/var/opt/jfrog/artifactory'
 HA Node ID: 'site-1'

2019-11-27 17:20:18,045 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:519) - Artifactory application context set to NOT READY by refresh
2019-11-27 17:20:24,858 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:282) - Database: Oracle Oracle Database 12c Enterprise Edition Release 12.2.0.1.0 - 64bit Production. Driver: Oracle JDBC driver 12.1.0.1.0 Pool: oracle
2019-11-27 17:20:24,859 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:285) - Connection URL: jdbc:oracle:thin:@xxxxxxxxxxxxxxxxxxxxxxxxxxx
2019-11-27 17:20:24,992 [art-init] [INFO ] (o.a.s.d.v.OracleValidator:29) - Validating session collation for oracle database
2019-11-27 17:20:28,821 [art-init] [INFO ] (o.a.e.p.s.NodeEventPrioritiesStorageServiceFactory:27) - Initializing DB-based Priorities Storage Service
2019-11-27 17:20:29,619 [art-init] [INFO ] (o.a.a.h.HaAddonImpl :147) - Initializing DB locking provider
2019-11-27 17:20:29,622 [art-init] [INFO ] (o.a.a.h.SessionRepositoryFactory:30) - Using database as cache provider
2019-11-27 17:20:30,478 [art-init] [INFO ] (o.a.s.ArtifactorySchedulerFactoryBean:726) - Starting Quartz Scheduler now
2019-11-27 17:20:30,579 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:265) - Artifactory context starting up 56 Spring Beans...
2019-11-27 17:20:31,013 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:442) - Initialized new service id: jfrt@01cd6rddzg5bsh1n0qk200099w
2019-11-27 17:20:31,237 [art-init] [INFO ] (o.a.s.a.ArtifactoryAccessClientConfigStore:625) - Using Access Server URL: http://localhost:8040/access (bundled) source: detected
2019-11-27 17:20:31,266 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:387) - Waiting for access server...
2019-11-27 17:20:32,378 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:394) - Got response from Access server after 1111 ms, continuing.
2019-11-27 17:20:32,490 [art-init] [INFO ] (o.j.a.c.AccessClientBootstrap:118) - creating access token with join key
2019-11-27 17:20:32,942 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Couldn't grant a token, response code: 500, body: {
  ""errors"" : [ {
    ""code"" : ""INTERNAL_SERVER_ERROR"",
    ""message"" : ""Could not propagate changes to another access server ServerImpl(id=0b8a979b-5313-4c68-93c1-c6d2e627120e, created=1559806413816, modified=1574835576659, uniqueName=dcf5c1d5-7dfa-4f36-a659-2439048eda78, version=4.9.1, privateKeyFingerprint=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx, privateKeyLastModified=1574835576658, lastHeartbeat=1574835627720, baseUrl=http://172.18.207.12:8081/access, grpcInfo=172.18.207.12:8045)""
  } ]
}
java.lang.reflect.InvocationTargetException: null
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
        at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
        at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
        at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: org.springframework.beans.factory.BeanInitializationException: Failed to initialize bean 'org.artifactory.security.access.AccessService'.; nested exception is org.jfrog.access.client.AccessClientException: Couldn't grant a token, response code: 500, body: {
  ""errors"" : [ {
    ""code"" : ""INTERNAL_SERVER_ERROR"",
    ""message"" : ""Could not propagate changes to another access server ServerImpl(id=0b8a979b-5313-4c68-93c1-c6d2e627120e, created=1559806413816, modified=1574835576659, uniqueName=dcf5c1d5-7dfa-4f36-a659-2439048eda78, version=4.9.1, privateKeyFingerprint=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx, privateKeyLastModified=1574835576658, lastHeartbeat=1574835627720, baseUrl=http://172.18.207.12:8081/access, grpcInfo=172.18.207.12:8045)""
  } ]
}
        at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:275)
        at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:153)
        ... 7 common frames omitted
Caused by: org.jfrog.access.client.AccessClientException: Couldn't grant a token, response code: 500, body: {
  ""errors"" : [ {
    ""code"" : ""INTERNAL_SERVER_ERROR"",
    ""message"" : ""Could not propagate changes to another access server ServerImpl(id=0b8a979b-5313-4c68-93c1-c6d2e627120e, created=1559806413816, modified=1574835576659, uniqueName=dcf5c1d5-7dfa-4f36-a659-2439048eda78, version=4.9.1, privateKeyFingerprint=xxxxxxxxxxxxxxxxxxxxxxxxxxxx, privateKeyLastModified=1574835576658, lastHeartbeat=1574835627720, baseUrl=http://172.18.207.12:8081/access, grpcInfo=172.18.207.12:8045)""
  } ]
}
        at org.jfrog.access.client.AccessClientBootstrap.bootstrapServiceFromJoinKey(AccessClientBootstrap.java:168)
        at org.jfrog.access.client.AccessClientBootstrap.<init>(AccessClientBootstrap.java:119)
        at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClient(AccessServiceImpl.java:1274)
        at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClient(AccessServiceImpl.java:1252)
        at org.artifactory.security.access.AccessServiceImpl.initAccessService(AccessServiceImpl.java:339)
        at org.artifactory.security.access.AccessServiceImpl.initAccessClientIfNeeded(AccessServiceImpl.java:328)
        at org.artifactory.security.access.AccessServiceImpl.init(AccessServiceImpl.java:321)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
        at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
        at com.sun.proxy.$Proxy183.init(Unknown Source)
        at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:273)
        ... 8 common frames omitted
2019-11-27 17:20:34,050 [http-nio-8081-exec-6] [ERROR] (o.a.w.s.ArtifactoryFilter:194) - Artifactory failed to initialize: Context is null
{code}","Red Hat Enterprise Linux Server release 7.7 (Maipo)
Artifactory Professional (HA installation) 6.0.3 --> 6.15.0
Oracle database
RPM installation via yum from https://jfrog.bintray.com/artifactory-pro-rpms",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0phk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Could not list NuGet packages in Visual Studio 2017,RTFACT-20723,84928,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,brinkley,brinkley,27/Nov/19 5:25 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,,,,,,,0,,,,,,"I have successfully published Nuget package to Artifactory Nuget repository, but i got some problems as below:

1. The package doesn't show up in Visual Studio 2017 Nuget Package Manager
 2. The Artifactoy doesn't display Nuget Package properties

I believe that .nuspec file cannot contain Chinese character because once I remove Chinese character everything is back to normal.

If I want to keep .nuspec file contain Chinese character, is there any way that Artifactory and VS 2017 could work fine?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0phc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Dates on Artifactory front page should respect current locale,RTFACT-20720,84919,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,eric.griswold,eric.griswold,26/Nov/19 8:45 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,0,,,,,,"On my Artifactory front page, the dates that show with ""Last Deployed Builds"" and ""Most Downloaded Artifact"" show the European date format ""DD/MM/YY"" rather than the current locale format of ""MM/DD/YYYY""

These should be using localized date formats.

I can provide a screenshot if needed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0pfc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Dec/19 5:32 PM;eric.griswold;After some review, I would now consider this a _minor_ enhancement request.

It would be nice if the time setting defaulted to whatever LC_TIME indicated on the server machine, if it was set.

 

Feel free to close this issue 'WONTDO' if it doesn't make sense internally.",,,,,,,,,,
Conan packages are also overwritten if Delete / Overwrite permission is missing,RTFACT-20716,84908,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cconnert_swarm,cconnert_swarm,26/Nov/19 2:10 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.15.0,,,,,,,Conan,permissions,,,,,,0,,,,,,conan upload overwrites already deployed packages even if the user is lacking the Delete/Overwrite permission,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0pd4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Nov/19 2:12 PM;cconnert_swarm;For now pleas makr this issue as resolved, as I just saw in the build log that we skip the upload as the package and recipe are up to date...

My bad!",,,,,,,,,,
Artifactory Pro Docker Image Not Allowing Inclusion Of Additional Certificates,RTFACT-20692,84722,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,isuftin,isuftin,22/Nov/19 10:13 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.15.0,,,,,,,Docker Image,,,,,,,1,artifactory,docker,java,,,"When launching Artifactory Pro 6.15.0 as a Docker container, I am mounting certificates into /artifactory_extra_certs

 

The entrypoint script attempts to add certificates in that directory to the default Java keystore in the image. 

 

The attempt fails because the keystore is owned by root.

An example from ECS output logs:
{code:java}
2019-11-22 20:48:15 [711 entrypoint-artifactory.sh] Adding extra certificates to Java keystore if exist
2019-11-22 20:48:16 [726 entrypoint-artifactory.sh] Adding /artifactory_extra_certs/chsroot.crt to Java cacerts
Certificate was added to keystore
keytool error: java.io.FileNotFoundException: /java/jdk-11.0.2+9/lib/security/cacerts (Permission denied)
2019-11-22 20:48:16 [54 entrypoint-artifactory.sh] WARNING: Adding /artifactory_extra_certs/chsroot.crt failed!
2019-11-22 20:48:17 [726 entrypoint-artifactory.sh] Adding /artifactory_extra_certs/doiroot.crt to Java cacerts
Certificate was added to keystore
keytool error: java.io.FileNotFoundException: /java/jdk-11.0.2+9/lib/security/cacerts (Permission denied)
2019-11-22 20:48:17 [54 entrypoint-artifactory.sh] WARNING: Adding /artifactory_extra_certs/doiroot.crt failed!

{code}
 

I have the same issue if I get onto the running container and try the same command manually:
{code:java}
/java/jdk-11.0.2+9/bin/keytool -importcert -trustcacerts -noprompt -cacerts -storepass changeit -file chsroot.crt -alias chsroot
Certificate was added to keystore
keytool error: java.io.FileNotFoundException: /java/jdk-11.0.2+9/lib/security/cacerts (Permission denied)

{code}
If, in the running container, I copy /java/jdk-11.0.2+9/lib/security/cacerts to /home, the permissions on it changes to the artifactory user. If I try to add my certificate to the local cacerts file owned by artifactory, this works.

 
{code:java}
artifactory@bf85eb67a5e5:~$ cp /java/jdk-11.0.2+9/lib/security/cacerts .
artifactory@bf85eb67a5e5:~$ ls -al
total 236
drwx------ 1 artifact artifact 79 Nov 22 21:45 .
drwxr-xr-x 1 root root 71 Nov 22 20:48 ..
-rw------- 1 artifact artifact 2122 Nov 22 21:40 .bash_history
-rw-r--r-- 1 artifact artifact 102883 Nov 22 21:45 cacerts
-rw-r--r-- 1 artifact artifact 730 Nov 22 21:39 chsroot.crt
-rw-r--r-- 1 artifact artifact 125604 Nov 22 21:34 output.txt
artifactory@bf85eb67a5e5:~$ /java/jdk-11.0.2+9/bin/keytool -importcert -keystore ./cacerts -trustcacerts -noprompt -storepass changeit -file chsroot.crt -alias chsroot
Certificate was added to keystore{code}
 

So it would seem as though the instructions in the [Overview|[https://www.jfrog.com/confluence/display/RTF/Installing+with+Docker#InstallingwithDocker-Overview]] for adding your own cacerts to the java keystore don't work as expected.

 

Am I missing something?

 

The only workaround I can think of at this point is to mount my own cacerts file that I've already added my root certs to into the container and add extra java options to point to it. I can probably even copy down the cacerts from the docker image and perform the add locally.

 

But it would seem to me that this is not the expected behavior of having the /artifactory_extra_certs directory

 ",Running on a CentOS 7 instance via Docker using AWS ECS ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0o9k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Support Bundle includes logs of other microservices,RTFACT-20690,84714,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Cyrilc,Cyrilc,22/Nov/19 2:42 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,7.0.0-beta,,,,,,,,,,,,,,0,,,,,,"The SB of the ""jfrt"" microservice contains all the logs of all the other microservices (router, frontend, metadata, access), even though these are already included in the SB of their own microservice.

 [^tree.txt] shows the content of the full Artifactory SB. For example, {{metadata-request.log}} is in the SB of ""artifactory"" and of ""metadata"".",{{infra-CTO-286-local/org/artifactory/pro/deb/jfrog-artifactory-pro/7.x-SNAPSHOT/jfrog-artifactory-pro-7.x-20191121.154605-114.deb}},,,,,,,,,,,,,,,,,,"22/Nov/19 2:44 PM;Cyrilc;tree.txt;https://www.jfrog.com/jira/secure/attachment/37131/tree.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0o7s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Using properties in Maven repository URLs breaks remote proxy resolution,RTFACT-20688,84707,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sithmein,sithmein,22/Nov/19 1:11 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,Maven,Properties,,,,,,0,,,,,,"I have created a Maven composite mirror that contains both a local and a remote Maven repository. Using properties for artifact resolution works fine with artifacts from the local repository but breaks the resolution of any remote artifacts. Only when the property is removed from the URL the composite finds the artifact in the remote. Remote repositories should either completely ignore properties during resolution or behave the same as local repositories (in case the remote is also an Artifactory instance), i.e. artifacts are returned if they either have a matching property or none.

Example: https://artifactory.xxx/artifactory/composite-proxy;*branch=master*/com/github/tomakehurst/wiremock/2.25.1/wiremock-2.25.1.jar won't find anything whereas https://artifactory.xxx/artifactory/composite-proxy/com/github/tomakehurst/wiremock/2.25.1/wiremock-2.25.1.jar does. Interestingly the first URL also starts to work once Artifactory has cached the remote artifact.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0o68:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory generates random string for guest user name connected via Azure SSO,RTFACT-20687,84695,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wailoont,wailoont,22/Nov/19 5:57 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,SAML SSO,,,,,,,0,artifactory,security,,,,"Hi Jfrog,

I am using Artifactory Pro version 6.13.1.

 

I have integrated Artifactory Pro SAML SSO with on premise Azure Active Directory.

I invited a guest user which is not part of my organization, and when he successful login to Artifactory with single sign on, he got a random string of alphabets as his login name.

 

For organization members, their login name is the LDAP ID.

 

Question :

Is the random string of alphabets is a bug or it is generated by Artifactory because guest user does not have on premise LDAP ID?


Azure Active Directory support unable to find the random string in Azure.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0o3k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
docker manifest bugs,RTFACT-20679,84565,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,20/Nov/19 3:50 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,,,,,,,0,,,,,,"1. improve query - org.artifactory.addon.docker.rest.v2.DockerV2RemoteRepoHandler#findCachedBlobPathByDigest - we don't have to join with props table we have the file name

2. org.artifactory.addon.docker.rest.v2.DockerV2RemoteRepoHandler#populateAcceptHeadersAndDownloadManifest - we already have the manifest stream, why download it again?
",,,,,,,,,,,,,,,,CTO-349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0nbk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Manual deploy of ""invalid"" NPM package",RTFACT-20676,84538,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Cyrilc,Cyrilc,20/Nov/19 1:09 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,7.0.0-beta,,,,,,,NPM,,,,,,,0,,,,,,"Artifactory let me manually deploy any TAR.GZ file as an NPM artifact (even if it does not contain a {{package.json}} file).

When deploying, I checked the option ""Deploy According To Layout"" and gave the layout tokens ""orgPath"", ""module"" and ""baseRev"".

After this, package never gets indexed by MDS and never shows up in the Package search.

Artifactory logs show:
{code}
2019-11-20T12:47:52.361Z [jfrt ] [INFO ] [4dcd5fd4b2211f54] [o.a.e.UploadServiceImpl:399 ] [http-nio-8082-exec-3] - Deploy to 'npm-repo:com.jfrog/jfrog-mc-docker-compose/jfrog-mc-docker-compose-4.0.0-m216.tgz' Content-Length: 5236778
2019-11-20T12:47:52.535Z [jfrt ] [WARN ] [81a47af4632fc26e] [.n.r.NpmPackageWorkContext:133] [art-exec-16 ] - Npm package name is blank
2019-11-20T12:47:52.536Z [jfrt ] [WARN ] [81a47af4632fc26e] [n.NpmPackageMetadataIndexer:60] [art-exec-16 ] - Could not find the package name on the context, skipping indexing.
{code}

Expected behaviour:
* Either reject the artifact if it does not contain a valid {{package.json}}
* Or index the package using the metadata provided by the layout tokens","jfrog-artifactory-pro-linux-7.0.0-m507.tar.gz on Debian 9, installed as a service",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0n5k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
launching artifactory 2nd time using helm charts fails,RTFACT-20661,84477,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vinaya,vinaya,20/Nov/19 2:27 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,Helm,,,,,,,0,,,,,,"I used following commands to launch artifactory

 

helm install --name artifactory --set nginx.tlsSecretName=artifactory-tls --set ingress.hosts[0]=""jcr.jfrog.com"" artifactory


helm del --purge artifactory

helm install --name artifactory --set nginx.tlsSecretName=artifactory-tls --set ingress.hosts[0]=""jcr.jfrog.com"" artifactory

When I launch 2nd time, artifactory pod fails with following error:

Caused by: org.postgresql.util.PSQLException: FATAL: password authentication failed for user ""artifactory""
 at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:443)
 at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:217)
 at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:52)
 at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:216)
 at org.postgresql.Driver.makeConnection(Driver.java:404)
 at org.postgresql.Driver.connect(Driver.java:272)
 at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:319)
 at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:212)
 at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:736)
 at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:668)
 at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:483)
 at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:154)
 at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:118)
 at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:107)
 at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:131)
 at org.jfrog.access.server.db.util.AccessJdbcHelperImpl.getDbMetadata(AccessJdbcHelperImpl.java:126)
 at org.jfrog.access.server.db.util.AccessJdbcHelperImpl.initDb(AccessJdbcHelperImpl.java:118)
 ... 138 more

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ms0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Nov/19 3:19 AM;vinaya;Arturo clarified as follows, so closing this issue:

you need to pass the same PSQL password
It is automatically randomly generated but if you are reusing the same DB, you will need t pass the same one as was previously generated
It is behaving as documented","14/Jan/20 2:02 AM;cgardens;Does `helm del --purge artifactory` not also remove the database? I'm running into the same issue. Would like just kill the database if it still exists, but can't figure out where it is. I thought it was on the pod called `artifactory-release-postgresql-0` (which has now been destroyed). Or is there state being persisted somewhere that is not wiped by the purge?","14/Jan/20 3:31 AM;cgardens;Ah. I found the persistent volumes that I suspect are holding this state.",,,,,,,,
Sharding provider cannot tolerate single request failure,RTFACT-20659,84463,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,angellom,angellom,19/Nov/19 6:16 PM,15/Feb/21 11:34 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"During deployment or download if one of the sharding binary providers is unavailable, the request will fail without checking for the rest of the nodes.

Currently the provider will retry until it fails with a 500-error and message along the lines of the following:

[tomcat-http-20] [WARN ] *(o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 503: 503 :* org.apache.http.conn.HttpHostConnectException: Connect to xxx.xxx.xx.xx:xxxx [/xxx.xxx.xx.xx] failed: Connection refused (Connection refused)

There are many situations in which an sharded request may fail, such as re-creating or deploying new nodes, in which case the provider should continue to the next instance.

This should fail _only_ if the redundancy level requests can't be met by the current cluster.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0mow:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"SAML Redirect occurs even when the ""Auto Redirect Login Link To SAML Login"" box is NOT checked",RTFACT-20648,84321,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,avivb,18/Nov/19 3:50 PM,15/Feb/21 11:35 AM,18/Feb/21 8:59 AM,,6.16.0,,,,,,,SAML SSO,,,,,,,1,,,,,,"When ""Enable SAML Integration"" box is checked and ""Auto Redirect Login Link To SAML Login"" box is NOT checked, the Login Page still redirects you to SAML Login page. Further investigating the root cause, I have noticed that this behavior occurs ONLY when "" Allow Anonymous Access"" is disabled.

In other words, the redirect happens in two scenarios:

1. ""Enable SAML Integration"" box is checked, ""Auto Redirect Login Link To SAML Login"" box checked, regardless of whether the ""Allow Anonymous Access"" box is checked or not - Results: Performs the redirect - Expected behavior

2.""Enable SAML Integration"" box is checked, ""Auto Redirect Login Link To SAML Login"" box is NOT checked, ""Allow Anonymous Access box"" is NOT checked - Results: Still performs the redirect - Not an expected behavior

I was able to reproduce this on Artifactory SaaS, then reproduced it on prem v5.1, v4.14.2. and v4.10.0.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0lu0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jan/20 9:35 AM;Brovikov;I've faced this issue too.",,,,,,,,,,
Creating new support bundle with whitespace inside title results failure,RTFACT-20641,84225,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,toma,toma,17/Nov/19 3:53 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,7.0.0,,,,,,,,,,,,,,0,,,,,,"Experienced behavior on: artifactory-pro:7.x.master-8712 on locally on docker container.

Steps to reproduce: 
 # Login as administrator.
 # Go to Support Zone.
 # Create new support bundle.
 # Enter a title such as ""test title""
 # Save
 # Status dictates ""failure"".

Do note that a corresponding folder is being created in the jfrog-support-bundle and visible in the tree browser with all its files.

The rest api call creates the repository as expected using the following JSON:

{""name"":""test title"",""description"":""test"",""parameters"":{""configuration"":true,""logs"":

{""include"":true,""start_date"":""2019-11-16"",""end_date"":""2019-11-17""}

,""system"":true,""thread_dump"":\{""count"":1,""interval"":0}},""service"":""artifactory""}

 

------ 

Tested over artifactory-pro:6.14.1 and both REST and manual creations worked as expected.

Per discussion with [~Aviranb], this issue seems to derive from the backend.",artifactory-pro:7.x.master-8712,,,,,,,,,,,,,,,,,,"19/Nov/19 1:29 PM;toma;Screen Shot 2019-11-19 at 15.27.11.png;https://www.jfrog.com/jira/secure/attachment/36978/Screen+Shot+2019-11-19+at+15.27.11.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0l9k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Error message text fix,RTFACT-20636,84162,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,Aviranb,Aviranb,17/Nov/19 7:38 AM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Please see linked JIRA.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0kyg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker allows overwriting same image with no delete/overwrite permissions ,RTFACT-20634,84136,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,15/Nov/19 11:28 PM,15/Feb/21 11:36 AM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,2,PB_Done,,,,,"Currently, if you deploy an image with a user, then try to push the image again (to overwrite it) with no delete/overwrite permissions, the docker client returns a successful message. If you try to overwrite the image/tag with a different image, then there will be an error.

Steps to reproduce:
 # Set permissions for user to Read, Annotate, Deploy
 # Tag (docker tag busybox mill.jfrog.info:12019/docker-local/busybox) and push docker image to Artifactory for the first time with a version tag (say v0.3) – Works fine
 # Set permissions for user to Read, Annotate, Deploy, Delete/Overwrite
 # Push the same image/version again – Works as well (as expected)
 # Revoke the Delete/Overwrite permissions
 # Push the same image/version again – Still able to push the image! This is not expected.
 # Try to tag a different image (docker tag hello-world mill.jfrog.info:12019/docker-local/busybox) and push. See the docker client has an error this time

The docker client should provide an error when trying to overwrite an image if delete/overwrite permissions is not granted",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0kwo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Revert INST-74,RTFACT-20622,84029,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,galba,galba,galba,14/Nov/19 3:02 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Revert INST-74,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0k8w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Use GetRouterBaseUrl() for deriving the router port,RTFACT-20615,83957,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,syamks,syamks,14/Nov/19 5:29 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"See the discussion here : [https://git.jfrog.info/projects/JFROG/repos/artifactory/pull-requests/502/overview] 

 

We need to use the sysenv library to derive the router port for us. Also remove `metadata.router.port` as its not required anymore. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0jt4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Nov/19 5:33 AM;syamks;Wrong project.Ignore this issue. ",,,,,,,,,,
Path pattern not recongnizing RPM file name elements,RTFACT-20609,83905,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,obogdan,obogdan,13/Nov/19 2:23 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,5.6.3,,,,,,,Repo Layout,,,,,,,0,,,,,,"I have created an Repository layout with the following path pattern:
{code:java}
[org]/[CentOS_version<[0-9.]+>]/[Channel<app|configs|deps>]/Packages/[module]-[baseRev](-[patchLevel<[.~0-9a-zA-Z]+>])(-[fileItegRev])(.[archTag<\w+>]).[ext]
{code}
when I *Test Artifact Path Resolution* using the following test path:
{code:java}
MyOrg/7/app/Packages/app-appliance-1.0.2-latest-JIRA-12315.x86_64.rpm
{code}
Artifactory does not match the elements and gives the following match:
{noformat}
Organization: MyOrg 
Module: app-appliance-1.0.2-latest-JIRA 
Base Revision: 12315 
Folder Integration Revision: 
File Integration Revision: 
Classifier: 
Extension: rpm 
Type: 
CentOS_version: 7 
Channel: app 
patchLevel: 
archTag: x86_64
{noformat}
When using this regular expression:
{code:java}
(\w+)\/([0-9]+)\/(app|configs|deps)\/(Packages)\/([\w-.]+)-([0-9.]+)-([\w~]*)-([\w-]+).(\w+).(\w+)
{code}
on the online tool [https://regex101.com|https://regex101.com/] I get a group match for each element.

I'm not sure what's the difference in implementation in Artifactory, or if this is a resolved bug in a later version of Artifactory.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ji0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Downloading artifacts through search page not encoding the special characters like #, %  as %23",RTFACT-20607,83898,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sankark,sankark,13/Nov/19 1:56 PM,15/Feb/21 12:11 PM,18/Feb/21 8:59 AM,,6.14.1,,,,,,,,,,,,,,1,PB_Done,,,,,"Downloading the artifacts with special characters like ""#"", ""%"" in path failed to escaped as %23 in search page whereas it is working fine from the tree browser.

 

The download link on the Search page (which doesn't work - returns 404) forwards you to:

[http://localhost:8081/artifactory/generic-local/hello#/R-3.5.3.pkg|http://34.93.88.16:8081/artifactory/generic-local/hello#/R-3.5.3.pkg]

 

The download link on the Tree browser (which does work) forwards you to:

[http://localhost:8081/artifactory/generic-local/hello%23/R-3.5.3.pkg|http://34.93.88.16:8081/artifactory/generic-local/hello#/R-3.5.3.pkg]

 

The Tree browser is correctly encoding the special character as ""%23"", whereas the Search page does not and causing 404 error while trying to download the artifacts.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0jgg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Nov/19 2:17 PM;czardis;Thanks for raising this ticket Sankar

The Tree browser looks like it was fixed in https://www.jfrog.com/jira/browse/RTFACT-7916 , but it seems that fix was not extended to every location you can download an artifact from.",,,,,,,,,,
HTTP Status 404 - Not Found when upgraded to Artifactory Pro 6.14.1,RTFACT-20597,83769,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,slingamn,slingamn,12/Nov/19 3:15 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.14.1,,,,,,,Artifactory Home,,,,,,,0,artifactory,,,,,"We have upgraded our artifactory server to 6.14.1 from 5.5.1. the application has upgraded to 6.14.1 and the services were up. But the Artifactory UI throws an error

HTTP Status 404 - Not Found.

I checked the Catalina logs and I find below error.

Nov 11, 2019 11:29:42 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file
Nov 11, 2019 11:29:42 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/artifactory] startup failed due to previous errors
23:29:42.424 [localhost-startStop-2] DEBUG org.artifactory.webapp.servlet.ArtifactoryContextConfigListener - Context shutdown started
23:29:42.455 [localhost-startStop-2] DEBUG org.artifactory.webapp.servlet.ArtifactoryContextConfigListener - Context shutdown Finished",Production Env,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ipc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Nov/19 6:13 PM;slingamn;Please let me know what are all the logs that are needed","28/Jan/20 7:43 AM;obogdan;Just ran into this problem myself. Check the logs in *$ARTIFACTORY_HOME/logs/* most specifically the logs in *localhost*.log*.

 

In my case the DB credentials were wrong and only that log has shown the issue.",,,,,,,,,
work queue implementation for debian indexing can result in slow indexing,RTFACT-20589,83678,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,11/Nov/19 10:36 PM,15/Feb/21 12:43 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"It appears that Artifactory indexes debian repositories based on a locking mechanism per distribution; there is a scenario where deploying a debian package to a large HA environment will take a while to index;

deploy deb of distribution xenial to Artifactory, load balancer chooses node 1. the distribution lock for xenial is held by node 2, as there are other, previous deployments. node 2 takes around 2 minutes to index its packages. the lock rotates around to the other nodes, and it takes a while before being given back to node 1, resulting in a multi minute delay (30+ in some cases) between package deployment and availability in metadata (and apt-get client).

Update:
Artifactory's scheduling of which node performs the lock and indexing is inherently unfair, and not round robin; this causes the delay on indexing a distribution once there are alot of packages being deployed, and alot of nodes. We will need to redesign the locking mechanism, as bumping the number of workers does not help - workers appear to only be assigned on a distribution basis, so once a lock is acquired by a node, a worker is assigned.



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0i5c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory does not clean up stale debian metadata when switching optional compression formats,RTFACT-20588,83668,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,11/Nov/19 10:16 PM,15/Feb/21 12:43 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Artifactory does not delete optional compression formats when a format is removed from the UI, resulting in stale metadata within the repository. It seems that it does not update the releases file either

Say you select bz2 to be created, and index the repository. Later, you decide to uncheck it. Artifactory will not remove the old bz2 files, and the releases file will continue to have entries that reference the bz2.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0i34:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
upgrading Artifactory does not add <optionalIndexCompressionFormats> tags to debian repositories,RTFACT-20587,83667,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,11/Nov/19 10:11 PM,17/Feb/21 6:49 AM,18/Feb/21 8:59 AM,,,,,,,,,Debian,,,,,,,0,,,,,,"Start up an Artifactory on 5.x (I did 5.5.2)
Create debian-local repository
see that it does not have any optional compression formats (expected).

Upgrade to a version that DOES have this flag, like 6.8.16
see that the descriptor does not have:
<localRepository>
            <key>debian-local</key>
            <type>debian</type>
            <includesPattern>**/*</includesPattern>
            <repoLayoutRef>simple-default</repoLayoutRef>
            <dockerApiVersion>V2</dockerApiVersion>
            <forceNugetAuthentication>false</forceNugetAuthentication>
            <blackedOut>false</blackedOut>
            <handleReleases>true</handleReleases>
            <handleSnapshots>true</handleSnapshots>
            <maxUniqueSnapshots>0</maxUniqueSnapshots>
            <maxUniqueTags>0</maxUniqueTags>
            <suppressPomConsistencyChecks>true</suppressPomConsistencyChecks>
            <propertySets>
                <propertySetRef>artifactory</propertySetRef>
            </propertySets>
            <archiveBrowsingEnabled>false</archiveBrowsingEnabled>
            <snapshotVersionBehavior>unique</snapshotVersionBehavior>
            <localRepoChecksumPolicyType>client-checksums</localRepoChecksumPolicyType>
            <calculateYumMetadata>false</calculateYumMetadata>
            <yumRootDepth>0</yumRootDepth>
            <debianTrivialLayout>false</debianTrivialLayout>
            <enableFileListsIndexing>false</enableFileListsIndexing> <------------ no optionalIndexCompressionFormats tag below this line
        </localRepository>

workaround:
edit the repository in the admin view, and add bz2. Hit save, edit again and remove bz2. You will now see <optionalIndexCompressionFormats/> in the descriptor.

This will help prevent artifactory from creating bz2 metadata when its not needed, as it is very slow compared to gz, as if you dont do this, artifactory will compute bz2 by default.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0i2w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
using GAVC search results in incorrect results if the group ID has 4 components or more,RTFACT-20582,83632,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,11/Nov/19 5:32 PM,15/Feb/21 12:49 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Trying to search:
{noformat}
$ curl ""localhost:8081/artifactory/api/search/gavc?a=two&repos=mvn-release-local""
{
 ""results"" : [ {
   ""uri"" : ""http://localhost:8081/artifactory/api/storage/mvn-release-local/com/mycompany/app/two/my-app/2.0/my-app-2.0.pom""
 }, {
   ""uri"" : ""http://localhost:8081/artifactory/api/storage/mvn-release-local/com/mycompany/app/two/my-app/2.0/my-app-2.0.jar""
 } ]
{noformat}
My module ID: com.mycompany.app.two:my-app:2.0

pom:
{noformat}
<modelVersion>4.0.0</modelVersion>
	<groupId>com.mycompany.app.two</groupId>
	<artifactId>my-app</artifactId>
	<packaging>jar</packaging>
	<version>2.0</version>
	<name>my-app</name>
	<url>http://maven.apache.org</url>
{noformat}

It looks like this is happening because Artifactory is treating the 4th folder as the artifactID",,,,,,,,,,,,,,,,RTFACT-9503,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0hvs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory returns a 404 error for NPM instead of 403 if the user does not have permission to the repository,RTFACT-20562,83530,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adiv,adiv,10/Nov/19 1:24 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Steps to reproduce:
 # Create NPM virtual, remote and local repositories.
 # Create a user and remove the default ""Readers"" group for the user.
 # Make sure there is no group or permission that gives that user read access to the NPM repositories.
 # Make sure that the ""Hide Existence of Unauthorized Resources"" is NOT enabled.
 # Perform the ""npm config set registry.."" and ""npm login"" commands as usual.
 # Try to download a random package (in my example - byte@1.0.0) and see that you get a 404 error instead of 403.
 # Look at the request.log and see that Artifactory returns 404 instead of 403.

Sample request and output:

npm install byte@1.0.0  ✔  10300  15:09:37

npm ERR! code E404

request.log:

20191110125801|23|REQUEST|82.81.195.5|adiv|GET|/api/npm/npm/byte|HTTP/1.1|404|0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0h94:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget.org response times out causing a 404 instead of pulling artifact from the cache,RTFACT-20557,83448,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,07/Nov/19 7:29 PM,15/Feb/21 12:55 PM,18/Feb/21 8:59 AM,,6.13.1,6.14.0,,,,,,NuGet,Remote Repository ,,,,,,27,PB_Done,,,,,"If an artifact is cached within the remote repository and user tries to pull artifact from the virtual or remote.  If there is a timeout to the remote site, the request does not fall back to the cache, but instead returns an error in the logs and states it cannot find the package within the client.

 

REPRODUCE

1) Create the default virtual for nuget repo

2) Configure nuget client and pull a package

3) Set the remote repo socket timeout to 5 MS (something very small)

4) Try the same pull request.  You will see a connection timeout error:

*2019-11-07 19:03:32,762 [http-nio-8081-exec-4] [ERROR] (o.a.a.n.NuGetServiceImpl:697) - Error occurred while performing a remote NuGet query on 'https://www.nuget.org/api/v2/FindPackagesById()?includePrerelease=false&$top=80&id='FluentValidation'&includeAllVersions=false': Connect to www.nuget.org:443 [www.nuget.org/13.66.39.44] failed: connect timed out*

You will also see from the nuget client:

  *http://localhost:8081/artifactory/api/nuget/nuget*

 **   *GET http://localhost:8081/artifactory/api/nuget/nuget/FindPackagesById()?id='FluentValidation'*

  *OK http://localhost:8081/artifactory/api/nuget/nuget/FindPackagesById()?id='FluentValidation' 24ms*

*Unable to find package 'FluentValidation'*

5) You can also pull the artifact with same setting if pointing directly to the cache repository or if you set the remote to offline.

 

EXPECTED

This is a simple way to reproduce the behavior but is not the issue being seen.  The issue where this comes to play is a read time out from nuget.org.  Could be slow network or rate limiting from nuget.org?  Artifactory should treat this as if the endpoint is unreachable and offline.  It should fall back to the remote cache instead of failing the request.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0gqw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Feb/20 8:04 AM;owen_battye;We have exactly the same problem:

2020-02-10 07:57:40,662 [http-nio-8081-exec-104] [ERROR] (o.a.a.n.NuGetServiceImpl:631) - Error occurred while performing a remote NuGet query on 'https://www.nuget.org/api/v2/FindPackagesById()?includePrerelease=false&$top=80&id='System.Runtime.Loader'&includeAllVersions=false&semVerLevel=2.0.0': Connect to www.nuget.org:443 [www.nuget.org/52.240.159.111] failed: connect timed out

even though the package is already cached.","10/Feb/20 12:58 PM;bvamos_gvc;We have a very similar issue but the error is Read timed out.

 
2020-02-10 11:25:22,878 [http-nio-8000-exec-5833] [ERROR] (o.a.a.n.NuGetServiceImpl:629) - Error occurred while performing a remote NuGet query on '[https://www.nuget.org/api/v2/FindPackagesById()?includePrerelease=false&$top=80&id='NSwag.SwaggerGeneration.WebApi'&includeAllVersions=false&semVerLevel=2.0.0':|https://www.nuget.org/api/v2/FindPackagesById()?includePrerelease=false&$top=80&id=%27NSwag.SwaggerGeneration.WebApi%27&includeAllVersions=false&semVerLevel=2.0.0%27:] Read timed out
 
On the client side: 
error : NU1101: Unable to find package NSwag.SwaggerGeneration.WebApi. No packages exist with this id in source(s): <VIRTUAL REPO URL>
 ","11/Feb/20 8:37 PM;danielwhite-conga;Similar to above. I'm pulling them with a GitHub Actions Workflow for a .NET Core 2.1 app. Its been really flaking to do the CI there:
{code:java}
error NU1101: Unable to find package Microsoft.AspNetCore.CookiePolicy. No packages exist with this id in source(s): Artifactory{code}
I would like to keep artifactory as my proxy in the event nuget.org is down, but this problem has been a pain.

Please advise.","12/Feb/20 11:37 AM;Jouin;Nuget was down today for nearly 2 hours and we did experience this issue which prevent our CI tools from building some of our apps during this time.","12/Feb/20 11:41 AM;Jouin;I forgot to mention we are running a 6.17 docker version of artifactory.","12/Feb/20 12:32 PM;vladnega;We've been having this issue for weeks as well in our JFrog SaaS solution. Very annoying wehn you want to be able to have your builds running, even though the remote sites (e.g. Nuget) are down.

 

A workaround that was suggested by JFrog Support is turning your repository Offline.","03/Mar/20 1:04 PM;Jlang;We are also hitting that problem regulary.

Yes, there is a workarround, but for such a solution, we don't need Artifactory in place.","10/Sep/20 11:32 PM;Wang;We are on 6.21.0, and still have this problem.

Is there an ETA for the fix?","11/Sep/20 3:39 PM;gkarabin;My team is seeing it as well. Our CI builds run on multiple machines at once to test a single change. At times multiple branches trigger builds simultaneously. Each build is using the nuget command line client to restore a large solution, at times after clearing local caches to fully test release candidates that hadn't revved version numbers of artifacts (intentionally). It appears that this much traffic stresses our Artifactory instance and randomly causes this issue.",,
Deadlock when two snapshots of the same artifact are deployed at the same time,RTFACT-20537,83313,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,josh.watson,josh.watson,06/Nov/19 2:05 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.13.0,,,,,,,,,,,,,,0,,,,,,"One of our developers committed to his feature branch whilst merging into the delivery branch. This led to two builds being executed simultaneously by Jenkins, one a fraction of a second after the other, with the same version. Artifactory returned an internal server error and failed one of the builds:
{code:java}
2019-11-06 13:50:38,773 [http-nio-8081-exec-881] [INFO ] (o.a.e.UploadServiceImpl:399) - Deploy to 'libs-snapshot:com/sysmech/zen/blah/blah/1.0.0-SNAPSHOT/blah-1.0.0-20191106.135040-12.jar' Content-Length: 193949
2019-11-06 13:50:59,669 [http-nio-8081-exec-885] [ERROR] (o.a.r.d.DbStoringRepoMixin:290) - Couldn't save resource libs-snapshot:com/sysmech/zen/blah/blah/1.0.0-SNAPSHOT/blah/x.y.z-20191106.135039-12.jar, reason:
java.lang.reflect.UndeclaredThrowableException: null
    at com.sun.proxy.$Proxy75.next(Unknown Source)
    at org.artifactory.storage.db.fs.dao.NodesDao.getChildren(NodesDao.java:250)
    at org.artifactory.storage.db.fs.service.FileServiceImpl.loadChildren(FileServiceImpl.java:272)
    at org.artifactory.storage.fs.tree.FolderNode.getChildrenItemNode(FolderNode.java:74)
    at org.artifactory.storage.fs.tree.FolderNode.getChildren(FolderNode.java:56)
    at org.artifactory.maven.MavenMetadataCalculator.folderContainsPoms(MavenMetadataCalculator.java:422)
    at org.artifactory.maven.MavenMetadataCalculator.createSnapshotsMetadata(MavenMetadataCalculator.java:210)
    at org.artifactory.maven.MavenMetadataCalculator.calculateAndSet(MavenMetadataCalculator.java:179)
    at org.artifactory.maven.MavenMetadataCalculator.calculate(MavenMetadataCalculator.java:154)
    at org.artifactory.maven.MavenMetadataServiceImpl.calculateMavenMetadata(MavenMetadataServiceImpl.java:81)
    at sun.reflect.GeneratedMethodAccessor452.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
    at com.sun.proxy.$Proxy179.calculateMavenMetadata(Unknown Source)
    at org.artifactory.repo.interceptor.MavenMetadataCalculationInterceptor.afterCreate(MavenMetadataCalculationInterceptor.java:73)
    at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterCreate(StorageInterceptorsImpl.java:69)
    at sun.reflect.GeneratedMethodAccessor288.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
    at com.sun.proxy.$Proxy184.afterCreate(Unknown Source)
    at org.artifactory.repo.db.DbStoringRepoMixin.invokeAfterCreateInterceptors(DbStoringRepoMixin.java:405)
    at org.artifactory.repo.db.DbStoringRepoMixin.saveResource(DbStoringRepoMixin.java:244)
    at org.artifactory.repo.db.DbLocalRepo.saveResource(DbLocalRepo.java:154)
    at org.artifactory.repo.service.RepositoryServiceImpl.saveResourceInTransaction(RepositoryServiceImpl.java:1876)
    at sun.reflect.GeneratedMethodAccessor446.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:295)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
    at com.sun.proxy.$Proxy178.saveResourceInTransaction(Unknown Source)
    at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1864)
    at sun.reflect.GeneratedMethodAccessor448.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
    at com.sun.proxy.$Proxy178.saveResource(Unknown Source)
    at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:569)
    at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:552)
    at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:429)
    at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:419)
    at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:400)
    at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:221)
    at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:187)
    at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:130)
    at sun.reflect.GeneratedMethodAccessor291.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
    at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
    at com.sun.proxy.$Proxy200.upload(Unknown Source)
    at org.artifactory.webapp.servlet.RepoFilter.doUpload(RepoFilter.java:254)
    at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:172)
    at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.lambda$doFilter$1(ArtifactoryAuthenticationFilterChain.java:134)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.artifactory.webapp.servlet.authentication.ArtifactoryBasicAuthenticationFilter.doFilter(ArtifactoryBasicAuthenticationFilter.java:96)
    at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.doFilter(ArtifactoryAuthenticationFilterChain.java:170)
    at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:311)
    at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
    at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
    at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
    at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.reflect.InvocationTargetException: null
    at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.jfrog.storage.wrapper.ResultSetWrapper.invoke(ResultSetWrapper.java:77)
    ... 110 common frames omitted{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0fxk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Nov/19 2:09 PM;josh.watson;I have the full stack trace if you want it, but can't add it to the description as it's > 32KB",,,,,,,,,,
"""Unable to reach JFrog Artifactory"" when trying to view ""General"" tab for *.jar artifact in Artifactory",RTFACT-20524,83256,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alvindizon,alvindizon,06/Nov/19 12:38 AM,05/Jan/21 11:22 AM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,Artifact Storage,Web UI,,,,,,0,artifactory,repository,WebUI,,,"I have posted a [question|https://stackoverflow.com/questions/58262437/unable-to-reach-jfrog-artifactory-when-trying-to-view-general-tab-for-jar] in Stackoverflow, but have not received any satisfactory response. Basically, I am running Artifactory 6.13.1 on a 64-bit, Ubuntu Server 18.04 machine. I have uploaded a jar file to libs-release-local, but when I try to view it after going to another page like the Artifactory home page, I am greeted with the ""unable to reach jfrog artifactory"" webpage. Using Google Chrome, I have noticed that ERR_CONNECTION_RESET happens for this request: [http://10.36.28.85:8081/artifactory/ui/auth/canAnnotate?repoKey=libs-release-local&path=com/pax/neptunelite-api/3.07.01/neptunelite-api-3.07.01.jar].

Steps to reproduce:
 # install artifactory 6.13.1 as systemctl service  on Ubuntu Server 18.04
 # login to artifactory
 # Upload jar to libs-release-local
 # Go to another part of Artifactory
 # Return to libs-release-local and view jar
 # See error

Tried installing Artifactory from a *.deb package instead of using Docker, but I still get the same error. I have also noticed that there was a single occasion where after I uploaded the jar file, I can view it with no error, but when I refresh the page or navigate to another part of Artifactory and return to viewing the jar, I get the same error again.

Here is the HAR file: https://gofile.io/?c=hyGOX3

*Logs from /var/opt/jfrog/artifactory/logs/request.log*
 20191016072508|0|REQUEST|10.36.28.2|non_authenticated_user|GET|/|HTTP/1.1|302|0
 20191016072508|1|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/|HTTP/1.1|200|0
 20191016072509|1|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/fonts/OpenSans/OpenSans-Regular/OpenSans-Regular-webfont.2793.woff|HTTP/1.1|200|0
 20191016072509|2|REQUEST|10.36.28.2|non_authenticated_user|GET|/ui/treebrowser/repoOrder|HTTP/1.1|401|0
 20191016072509|17|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/screen/footer|HTTP/1.1|200|0
 20191016072509|38|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|40|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|54|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|2|REQUEST|10.36.28.2|non_authenticated_user|GET|/ui/onboarding/initStatus|HTTP/1.1|401|0
 20191016072509|7|REQUEST|10.36.28.2|anonymous|POST|/ui/auth/loginRelatedData|HTTP/1.1|200|17
 20191016072509|16|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|15|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|15|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|2|REQUEST|10.36.28.2|non_authenticated_user|GET|/ui/home/widget/artifactCount|HTTP/1.1|401|0
 20191016072509|29|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|29|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|31|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|24|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|42|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|24|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|30|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|32|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072509|18|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|19|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|32|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|39|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|40|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|29|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/css/fonts/artifactory.2793.woff|HTTP/1.1|200|0
 20191016072510|1|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/fonts/OpenSans/OpenSans-Italic/OpenSans-Italic-webfont.2793.woff|HTTP/1.1|200|0
 20191016072510|28|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|1|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/fonts/OpenSans/OpenSans-Light/OpenSans-Light-webfont.2793.woff|HTTP/1.1|200|0
 20191016072510|35|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|4|REQUEST|10.36.28.2|anonymous|POST|/ui/auth/loginRelatedData|HTTP/1.1|200|17
 20191016072510|20|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|4|REQUEST|10.36.28.2|anonymous|POST|/ui/auth/loginRelatedData|HTTP/1.1|200|17
 20191016072510|3|REQUEST|10.36.28.2|non_authenticated_user|GET|/ui/home/widget/addon|HTTP/1.1|401|0
 20191016072510|14|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072510|1|REQUEST|10.36.28.2|anonymous|GET|/ui/oauth2/loginRequest|HTTP/1.1|404|0
 20191016072510|2|REQUEST|10.36.28.2|anonymous|POST|/ui/auth/loginRelatedData|HTTP/1.1|200|17
 20191016072510|1|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/fonts/OpenSans/OpenSans-Semibold/OpenSans-Semibold-webfont.2793.woff|HTTP/1.1|200|0
 20191016072510|4|REQUEST|10.36.28.2|anonymous|POST|/ui/auth/loginRelatedData|HTTP/1.1|200|17
 20191016072510|0|REQUEST|10.36.28.2|non_authenticated_user|GET|/webapp/css/images/checkbox.2793.png|HTTP/1.1|200|0
 20191016072510|14|REQUEST|10.36.28.2|anonymous|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016072511|117|REQUEST|10.36.28.2|anonymous|POST|/ui/auth/login|HTTP/1.1|200|65
 20191016072512|4|REQUEST|10.36.28.2|admin|GET|/ui/onboarding/initStatus|HTTP/1.1|200|0
 20191016072512|4|REQUEST|10.36.28.2|admin|GET|/ui/auth/screen/footer|HTTP/1.1|200|0
 20191016072512|7|REQUEST|10.36.28.2|admin|GET|/ui/auth/screen/footer|HTTP/1.1|200|0
 20191016072512|3|REQUEST|10.36.28.2|admin|GET|/ui/home/widget/artifactCount|HTTP/1.1|200|0
 20191016072512|2|REQUEST|10.36.28.2|admin|GET|/ui/home/widget/info|HTTP/1.1|200|0
 20191016072512|3|REQUEST|10.36.28.2|admin|GET|/ui/home/widget/addon|HTTP/1.1|200|0
 20191016072512|0|REQUEST|10.36.28.2|admin|GET|/webapp/images/userguide.2793.svg|HTTP/1.1|200|0
 20191016072512|0|REQUEST|10.36.28.2|admin|GET|/webapp/images/webinar.2793.svg|HTTP/1.1|200|0
 20191016072512|4|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|89
 20191016072512|3|REQUEST|10.36.28.2|admin|GET|/ui/home/widget/mostDownloaded|HTTP/1.1|200|0
 20191016072512|5|REQUEST|10.36.28.2|admin|GET|/ui/home/widget/latestBuilds|HTTP/1.1|200|0
 20191016072513|1|REQUEST|10.36.28.2|admin|GET|/webapp/fonts/glyphicons-halflings-regular.2793.woff|HTTP/1.1|200|0
 20191016072513|5|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|94
 20191016072514|3|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|103
 20191016072514|2|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|34
 20191016072514|1|REQUEST|10.36.28.2|admin|GET|/webapp/fonts/OpenSans/OpenSans-SemiboldItalic/OpenSans-SemiboldItalic-webfont.2793.woff|HTTP/1.1|200|0
 20191016072514|5|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|67
 20191016072514|2|REQUEST|10.36.28.2|admin|GET|/ui/auth/canAnnotate|HTTP/1.1|200|0
 20191016072515|4|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|95
 20191016072515|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|42
 20191016072515|4|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|62
 20191016072515|0|REQUEST|10.36.28.2|admin|GET|/webapp/css/images/tooltips-icon.2793.png|HTTP/1.1|200|0
 20191016072515|3|REQUEST|10.36.28.2|admin|GET|/ui/auth/canAnnotate|HTTP/1.1|200|0
 20191016072516|7|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|124
 20191016072517|4|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|168
 20191016072518|4|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|148
 20191016072518|4|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|101
 20191016072518|6|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|115
 20191016072518|2|REQUEST|10.36.28.2|admin|GET|/ui/dependencydeclaration|HTTP/1.1|200|0
 20191016072518|10|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral/bintray|HTTP/1.1|200|51
 20191016072657|6|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|110
 20191016072657|3|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|95
 20191016072657|2|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|42
 20191016072657|4|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|62
 20191016072657|3|REQUEST|10.36.28.2|admin|GET|/ui/auth/canAnnotate|HTTP/1.1|200|0
 20191016072700|5|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|124
 20191016072701|3|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|101
 20191016072701|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|73
 20191016072701|4|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|90
 20191016072701|3|REQUEST|10.36.28.2|admin|GET|/ui/auth/canAnnotate|HTTP/1.1|200|0
 20191016072703|5|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|168
 20191016072705|148|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|192
 20191016072709|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|123
 20191016072710|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|111
 20191016072711|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|106
 20191016072712|3|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|148
 20191016072712|4|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|101
 20191016072712|7|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|115
 20191016072712|4|REQUEST|10.36.28.2|admin|GET|/ui/dependencydeclaration|HTTP/1.1|200|0
 20191016072712|18|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral/bintray|HTTP/1.1|200|51
 20191016072717|4|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|110
 20191016072717|5|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|165
 20191016072717|5|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|233
 20191016072717|50|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|233
 20191016072717|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|106
 20191016072746|4|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|101
 20191016072746|4|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|73
 20191016072746|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|90
 20191016072746|4|REQUEST|10.36.28.2|admin|GET|/ui/auth/canAnnotate|HTTP/1.1|200|0
 20191016072746|57|REQUEST|10.36.28.2|admin|GET|/ui/artifactpermissions|HTTP/1.1|200|0
 20191016072748|5|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|148
 20191016072748|2|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|101
 20191016072748|38|REQUEST|10.36.28.2|admin|GET|/ui/artifactpermissions|HTTP/1.1|200|0
 20191016072753|14|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|115
 20191016072753|3|REQUEST|10.36.28.2|admin|GET|/ui/dependencydeclaration|HTTP/1.1|200|0
 20191016072753|16|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral/bintray|HTTP/1.1|200|51

*When I refresh the page I get this:*
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/|HTTP/1.1|200|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/vendorScripts.2793.js|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/templates.2793.js|HTTP/1.1|304|0
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_core.2793.js|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_services.2793.js|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_dao.2793.js|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_ui.2793.js|HTTP/1.1|304|0
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_ui_components.2793.js|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_directives.2793.js|HTTP/1.1|304|0
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_filters.2793.js|HTTP/1.1|304|0
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_views.2793.js|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_states.2793.js|HTTP/1.1|304|0
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/artifactory_main.2793.js|HTTP/1.1|304|0
 20191016074622|1|REQUEST|10.36.28.2|admin|GET|/webapp/css/vendorStyles.2793.css|HTTP/1.1|304|0
 20191016074622|0|REQUEST|10.36.28.2|admin|GET|/webapp/css/application.2793.css|HTTP/1.1|304|0
 20191016074623|2|REQUEST|10.36.28.2|admin|GET|/ui/auth/screen/footer|HTTP/1.1|200|0
 20191016074623|3|REQUEST|10.36.28.2|admin|GET|/ui/treebrowser/repoOrder|HTTP/1.1|200|0
 20191016074623|20|REQUEST|10.36.28.2|admin|GET|/ui/auth/current|HTTP/1.1|200|0
 20191016074623|4|REQUEST|10.36.28.2|admin|GET|/ui/onboarding/initStatus|HTTP/1.1|200|0
 20191016074623|3|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|110
 20191016074623|1|REQUEST|10.36.28.2|admin|GET|/webapp/images/artifactory_logo.2793.svg|HTTP/1.1|304|0
 20191016074626|6|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|165
 20191016074626|3|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser|HTTP/1.1|200|233
 20191016074626|2|REQUEST|10.36.28.2|admin|POST|/ui/treebrowser/tabsAndActions|HTTP/1.1|200|148
 20191016074626|3|REQUEST|10.36.28.2|admin|POST|/ui/artifactactions/download|HTTP/1.1|200|101
 20191016074626|7|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral|HTTP/1.1|200|115
 20191016074626|3|REQUEST|10.36.28.2|admin|GET|/ui/dependencydeclaration|HTTP/1.1|200|0
 20191016074626|13|REQUEST|10.36.28.2|admin|POST|/ui/artifactgeneral/bintray|HTTP/1.1|200|51
 20191016074626|1|REQUEST|10.36.28.2|admin|GET|/webapp/css/images/tooltips-icon.2793.png|HTTP/1.1|304|0

 

 ",Ubuntu 18.04.3 LTS,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0flc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Chocolatey/ Nuget Virtual Repository Only Returns 1 Result,RTFACT-20522,83249,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,smccutch,smccutch,05/Nov/19 6:25 PM,15/Feb/21 5:13 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,Chocolatey,NuGet,Virtual Repositories,,,,,0,,,,,,"Version 6.13.1 was supposed to fix the issue but did not.

Steps to reproduce:
 # Create a local Nuget repository for Chocolatey
 # Push some packages
 # Create a virtual Nuget repository with only the one local repo.

Point Chocolatey/ Nuget to the virtual repo and do a choco list, 1 result is returned.

Point Chocolatey/Nuget to the local repo and do a choco list, all packages are returned.

 Issue is currently preventing successful implementation of Nuget/Chocolatey",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0fjs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Nov/19 10:44 AM;screig;Still broken in version 6.15.0

 

C:\WINDOWS\system32>choco search git
Chocolatey v0.10.11
TimRayburn.GitAliases 1.2.0
1 packages found.

 ",,,,,,,,,,
Verify enough disk space is available for backup option evaluates space available in wrong location,RTFACT-20517,83241,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ceri.hopkins,ceri.hopkins,05/Nov/19 4:05 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,Backup,,,,,,0,,,,,,"A weekly backup defined for the default location $ARTIFACTORY_HOME/backup/<backup-tag>  is not able to determine free space in that location correctly.

Scenario:

200GB volume for $ARTIFACTORY_HOME  >  50% used space

Default weekly backup is in $ARTIFACTORY_HOME/backup/<backup-tag>

$ARTIFACTORY_HOME/backup is a bind mount into the container with 22TB free space

 

Result:

Backup fails as BackupSizeCalculator calculates free space in $ARTIFACTORY_HOME and not $ARTIFACTORY_HOME/backup.

Docker commands exec-ed in container demonstrate that corresponding shell commands would give a sensible result - so not sure how BackupSizeCalculator comes to its result.

Supporting info:

2019-11-04 13:39:41,722 [http-nio-8081-exec-4] [INFO ] (o.a.b.BackupSizeCalculator:106) - Free space available for backup: 102842097664

[root@owlservlx25 artifactory]# docker-compose exec artifactory df /var/opt/jfrog/artifactory
Filesystem 1K-blocks Used Available Use% Mounted on
/dev/mapper/dockervg-artifactory_base
 209612800 109181004 *100431796* 52% /var/opt/jfrog/artifactory

(100431796*1024 is figure reported by BackupSizeCalculator above)

However space free in /var/opt/jfrog/artifactory/backup is nearly 22TB.

[root@owlservlx25 artifactory]# docker-compose exec artifactory df -h /var/opt/jfrog/artifactory/backup
Filesystem Size Used Available Use% Mounted on
owlcask1.owlstone.local:/Linux_Backup/artifactory_backup
 63.7T 41.9T *21.8T* 66% /var/opt/jfrog/artifactory/backup

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0fi0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
locking issues on edge nodes,RTFACT-20516,83239,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,aviva,aviva,05/Nov/19 3:52 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Intensive working (r-w-d-) with same artifacts, cause locking issue in edge nodes.

this issue is discover by distribution sanity automation. which is creating small amount of files and running all distribution tests on those same files. creating distributing and deleting bundles will cause threads to wait for more then 120 sec for lock and thus exhaust. distribute bundle will fail. 

attached support bundle. 

attached locking example (locking_issue_artifactory.log):",,,,,,,,,,,,,,,,,,,"05/Nov/19 3:42 PM;aviva;locking_issue-1572966193699_jfrt_jfrt@01drx7pe5j57z9047ftn340tyd.zip;https://www.jfrog.com/jira/secure/attachment/36540/locking_issue-1572966193699_jfrt_jfrt%4001drx7pe5j57z9047ftn340tyd.zip","05/Nov/19 3:51 PM;aviva;locking_issue_artifactory.log;https://www.jfrog.com/jira/secure/attachment/36539/locking_issue_artifactory.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0q38:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory failed to find Nuget package,RTFACT-20511,83198,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,riser,riser,05/Nov/19 5:34 AM,12/Jan/21 8:35 AM,18/Feb/21 8:59 AM,,,,,,,,,NuGet,,,,,,,7,,,,,,"After version upgrade from 6.11.3 to 6.12.2 and then 6.13.1 we are faced with the issue:

Time to time (like 3 times from 10) a job was failed when trying to find Nuget package from a Virtual or Remote Nuget repository. This issue accompanied by errors:
{code:java}
16:17:00 Errors in packages.config projects
16:17:00 Unable to find version '1.0.29' of package 'xxxxx'.
16:17:00 https://api.nuget.org/v3/index.json: Package 'xxx.1.0.29' is not found on source 'https://api.nuget.org/v3/index.json'.
16:17:00 https://xxxx: Failed to fetch results from V2 feed at 'xxxxxxxx(Id='core.sbtech',Version='1.0.29')' with following message : An error occurred while sending the request.
16:17:00 An error occurred while sending the request.
16:17:00 Unable to connect to the remote server
16:17:00 A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond xxx:443
16:17:00 https://xxxx: Failed to fetch results from V2 feed at 'xxxxx(Id='xxxx',Version='1.0.29')' with following message : An error occurred while sending the request.
16:17:00 An error occurred while sending the request.
16:17:00 Unable to connect to the remote server
16:17:00 A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond xxx:443
{code}
{code:java}
""The HTTP request to 'GET xxxx/api/nuget/nuget.org/FindPackagesById()?id='Serilog'&semVerLevel=2.0.0' has timed out after 100000ms.""
{code}
Sensitive info was hidden by the xxxx

When we tried to ""wget"" the last URL we have found it takes to much time to respond. Like a few minutes. But the next respond to the same URL was very quick.

In periods of time when the errors have happened, there are weren't any lack of system resources at all.

What we have tried:
 * Parsing logs, nothing special there.
 * Upgraded Artifactory virtual machine 2x
 * Check the network
 * Fine-tune advanced parameters by the article: [https://jfrog.com/knowledge-base/how-do-i-tune-artifactory-for-heavy-loads/]
 * Move Nuget repositories to V3
 * Recalculate repository Indexes

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0f8o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Nov/19 7:54 AM;riser;On the Tomcat side, we have fonded these errors:
{code:java}
=> catalina.2019-11-05.log <==
05-Nov-2019 07:45:35.189 SEVERE [http-nio-8081-exec-656] org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse An I/O error has occurred while writing a response message entity to the container output stream.
org.glassfish.jersey.server.internal.process.MappableException: org.apache.catalina.connector.ClientAbortException: java.io.IOException: Broken pipe
at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:91)
at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163)
at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1135)
at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:662)
at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:395)
at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:385)
at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:280)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:392)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.catalina.connector.ClientAbortException: java.io.IOException: Broken pipe
at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:364)
at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:833)
at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:738)
at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:399)
at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:377)
at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:96)
at org.springframework.session.web.http.OnCommittedResponseWrapper$SaveContextServletOutputStream.write(OnCommittedResponseWrapper.java:563)
at org.glassfish.jersey.servlet.internal.ResponseWriter$NonCloseableOutputStreamWrapper.write(ResponseWriter.java:325)
at org.glassfish.jersey.message.internal.CommittingOutputStream.write(CommittingOutputStream.java:224)
at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$UnCloseableOutputStream.write(WriterInterceptorExecutor.java:300)
at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2315)
at org.apache.commons.io.IOUtils.copy(IOUtils.java:2270)
{code}","12/Jan/21 6:49 AM;knikolaev; 

We also encountered with this problem!

Many local Nugget repositories have been created in our Artifactory instance, and also from time to time Visual Studio Nuget cannot find packages during the build process, but in fact packages are published in the repositories:
{code:java}
C:\build\src\Assets.ModelDictionaries\Assets.ModelDictionaries.csproj : error NU1101: Unable to find package JetBrains.Annotations. No packages exist with this id in source(s): https://private-artifactory.com/artifactory/api/nuget/mp9-core-externals, https://private-artifactory.com/artifactory/api/nuget/mp9-tech, https://private-artifactory.com/artifactory/api/nuget/mp9-tech.snapshot, mp.core.contracts.release, mp.core.contracts.snapshot, mp.core.libraries.release, mp.core.libraries.snapshot, mp.core.utilities.release, mp.core.utilities.snapshot [C:\build\src\Assets.Input\Assets.Input.csproj]
C:\build\src\Assets.ModelDictionaries\Assets.ModelDictionaries.csproj : error NU1101: Unable to find package Newtonsoft.Json. No packages exist with this id in source(s): https://private-artifactory.com/artifactory/api/nuget/mp9-core-externals, https://private-artifactory.com/artifactory/api/nuget/mp9-tech, https://private-artifactory.com/artifactory/api/nuget/mp9-tech.snapshot, mp.core.contracts.release, mp.core.contracts.snapshot, mp.core.libraries.release, mp.core.libraries.snapshot, mp.core.utilities.release, mp.core.utilities.snapshot [C:\build\src\Assets.Input\Assets.Input.csproj]
Failed to restore C:\build\src\Assets.ModelDictionaries\Assets.ModelDictionaries.csproj (in 6.88 sec).
C:\build\src\Assets.MergeModel\Assets.MergeModel.csproj : error NU1101: Unable to find package JetBrains.Annotations. No packages exist with this id in source(s): https://private-artifactory.com/artifactory/api/nuget/mp9-core-externals, https://private-artifactory.com/artifactory/api/nuget/mp9-tech, https://private-artifactory.com/artifactory/api/nuget/mp9-tech.snapshot, mp.core.contracts.release, mp.core.contracts.snapshot, mp.core.libraries.release, mp.core.libraries.snapshot, mp.core.utilities.release, mp.core.utilities.snapshot [C:\build\src\Assets.Input\Assets.Input.csproj]
...
C:\build\src\Assets.Processing.Contracts\Assets.Processing.Contracts.csproj : error NU1101: Unable to find package protobuf-net. No packages exist with this id in source(s): https://repo.ptsecurity.ru/artifactory/api/nuget/mp9-core-externals, https://repo.ptsecurity.ru/artifactory/api/nuget/mp9-tech, https://repo.ptsecurity.ru/artifactory/api/nuget/mp9-tech.snapshot, mp.core.contracts.release, mp.core.contracts.snapshot, mp.core.libraries.release, mp.core.libraries.snapshot, mp.core.utilities.release, mp.core.utilities.snapshot [C:\build\src\Assets.Input\Assets.Input.csproj]
C:\build\src\Assets.Processing.Contracts\Assets.Processing.Contracts.csproj : error NU1101: Unable to find package System.Runtime.Serialization.Formatters. No packages exist with this id in source(s): https://repo.ptsecurity.ru/artifactory/api/nuget/mp9-core-externals, https://repo.ptsecurity.ru/artifactory/api/nuget/mp9-tech, https://repo.ptsecurity.ru/artifactory/api/nuget/mp9-tech.snapshot, mp.core.contracts.release, mp.core.contracts.snapshot, mp.core.libraries.release, mp.core.libraries.snapshot, mp.core.utilities.release, mp.core.utilities.snapshot [C:\build\src\Assets.Input\Assets.Input.csproj]{code}
There are two ways to work around this problem:

1. Move the contents of the problematic Nugget repo to an empty temporary repo and back to the source repository.

2. Restart Artifactory instance.

 

The problem is that Artifactory instance:
 * either stops indexing the contents of Nugget repositories
 * or does it slowly, consistently indexing a large number of local Nuget repositories

 ","12/Jan/21 8:34 AM;knikolaev;https://www.jfrog.com/jira/browse/RTFACT-20511?focusedCommentId=203358&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-203358

 

 

 

 ","12/Jan/21 8:35 AM;knikolaev;https://www.jfrog.com/jira/browse/RTFACT-20511?focusedCommentId=203358&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-203358

Artifactory instance version: 6.18.1",,,,,,,
"Checksum issue with npm modules, likely due to incorrect handling of scoped modules",RTFACT-20509,83174,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,penx,penx,04/Nov/19 3:34 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.9.5,,,,,,,NPM,,,,,,,0,,,,,,"When doing an npm install from our Artifactory server we get checksum errors, e.g.

{{npm ERR! code EINTEGRITY}}

{{npm ERR! sha-XXXX integrity checksum failed when using sha1: wanted sha1-XXXX but got sha512-YYYY}}

I am pretty sure this is due to the following:
 * user uploads a package such as 'vfile-message@1.0.1' to artifactory by uploading a file called vfile-message.tar.gz via the Artifactory Web UI
 * at a later date, a user uploads a different module, with the same name and the same version number but in a different scope, e.g.  '@types/vfile-message@1.0.1'. The file that is uploaded is also named vfile-message.tar.gz
 * when doing an npm install for  vfile-message we download the wrong package and get the shasum fror @types/vfile-message from Artifactory

I would happily provide more accurate steps to recreate if I could get a copy of Artifactory with npm support in which to use, ideally as a Docker container. Unfortunately I don't think this can be done with the OSS docker image.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0f3k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Nov/19 4:56 PM;penx;This may be a duplicate of RTFACT-7668","04/Nov/19 4:57 PM;penx;(and RTFACT-7440)","14/Nov/19 12:05 PM;penx;Related RTFACT-10424","18/Nov/19 10:29 AM;penx;Steps to recreate:

https://github.com/penx/RTFACT-7668",,,,,,,
Maybe can improve search blobs query for instances without sha2 migration ,RTFACT-20503,83109,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,03/Nov/19 3:26 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,,,,,,,0,,,,,,"Here {code} org.artifactory.addon.docker.repomd.DockerPackageWorkContext#createLimitedBlobsQueryBySha256 {code}
if we don't have sha2 migration we create a query that searches for sha2 in the props table. this query uses a redundant join of the nodes and props table IF the sha2 is always the name of the file (cause this means that we can use only the nodes table and search by node.name)

Still need to investigate it ",,,,,,,,,,,,,,,,CTO-349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ep4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory does not automatically update licenses in use if there are more expired licenses than nodes ,RTFACT-20493,83071,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,01/Nov/19 10:48 PM,15/Feb/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Summary:
When using JFMC to update licenses, Artifactory does not automatically update the ""in use"" licenses correctly in the follow scenario:
Have X number of nodes
Have X+1 of expired licenses attached to Artifactory <- this is important - it looks like if you have the same number of nodes ( x), it doesn't reproduce)

In JFMC, attach new licenses from the bucket to Artifactory (I went to bucket management -> attach -> attached new licenses to the Artifactory instance) - see that the ""in use"" licenses do not update to the new ones. The new licenses are added to Artifactory, but since ""in use"" is still wrong, Artifactory will continue to think that it's license is invalid. 

Tested using Art 6.5.x, and JFMC 3.5.4. Customer saw this happen on latest Artifactory (6.13). I tested this with a 3 node cluster, with 3 expired Enterprise Plus licenses, and 3 expired Enterprise Plus trial licenses. New license bucket had 3 valid licenses (enterprise plus trial)







 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0egw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't install pre-release npm package,RTFACT-20485,83012,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kot_lex,kot_lex,31/Oct/19 3:20 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When I try to install pre-release npm package from private registry I get ""No matching version found"" error.

But it is possible to install the same package using ""canary"" npm tag.

This command doesn't work: *npm i @scope/package@0.0.373-develop.5*
while this does: *npm i @scope/package@canary*
and successfully installs @scope/package@0.0.373-develop.5",artifactory.version: 6.11.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0e4g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Nuget GetUpdates() request doesn't honor includeAllVersions parameter,RTFACT-20484,83010,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,igors,igors,31/Oct/19 3:00 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,,,,,,,,0,,,,,,"When we target our local nuget repository with a GetUpdates() request and includeAllVersions parameter set to false we still get all the versions instead of just the latest one. For example this URL:
{code:java}
https://artifactory.local.com/artifactory/api/nuget/company-nuget-local/GetUpdates()?packageIds=%27company.coreutil%27&versions=%271.0.36%27&includePrerelease=false&includeAllVersions=false
{code}
gives us results with versions 1.0.37, 1.0.38 and 1.0.39 included when we only expect the latest 1.0.39 to be included in the response.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0e40:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upload by checksum returns confusing 404 when checksum doesn't match,RTFACT-20480,82995,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Woodz,Woodz,31/Oct/19 11:14 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,REST API,,,,,,,0,,,,,,"As per https://www.jfrog.com/confluence/plugins/servlet/mobile?contentId=46107948#ArtifactoryRESTAPI-DeployArtifactbyChecksum, if the checksum doesn't match, 404 is returned. I find this very confusing as 404 usually indicates that a file is missing (which implies that retrieval was attempted), which is not an expected response when trying to upload a file.

From the HTTP spec (https://tools.ietf.org/html/rfc7231#section-6.5), I disagree that this scenario matches the expected use case for 404:
{noformat}
The server has not found anything matching the effective request URI. No indication is given of whether the condition is temporary or permanent. The 410 (Gone) status code SHOULD be used if the server knows, through some internally configurable mechanism, that an old resource is permanently unavailable and has no forwarding address. This status code is commonly used when the server does not wish to reveal exactly why the request has been refused, or when no other response is applicable.{noformat}
From this, it sounds as though the artifact doesn't exist and the web server either has no idea where it is or it doesn't want to reveal where it exists, neither of which would match my expected behaviour when uploading a file.

Instead, I believe that 409 is a more appropriate response code, based on the HTTP spec:
{noformat}
Conflicts are most likely to occur in response to a PUT request. For example, if versioning were being used and the representation being PUT included changes to a resource which conflict with those made by an earlier (third-party) request, the server might use the 409 response to indicate that it can't complete the request. In this case, the response representation would likely contain a list of the differences between the two versions.{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0e0o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UI is bad to point of being broken,RTFACT-20478,82985,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,aes,aes,31/Oct/19 8:32 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The front page offers a search, and I can find my repositories, but clicking on one just gives me a blurb about docker.

Expected: Navigation to repository (whatever that means, separate page, or scrolled-to in a the tree-list)

Actual: Non-specific blurb about how to set up docker

screenshot: https://ibb.co/PGwMq7t",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0dyg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Missing REST API for uploading SSH Server Keys,RTFACT-20473,82955,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rblum,rblum,30/Oct/19 4:22 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Can you please document how to upload the ""SSH Server Configuration"" - ""Server Keys"" (private and public) through the REST API (not the GUI)?

If really missing yet, can you please give information about if such an API extension will become available on future versions of Artifactory?

 

 ","artifactory.version | 6.13.1
artifactory.revision | 61301900
artifactory.buildNumber | 2793",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ds8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Change MySQL character encoding from UTF8MB3 to UTF8MB4,RTFACT-20467,82920,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yossis,yossis,30/Oct/19 10:46 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Database,,,,,,,0,,,,,,"When creating the schema in MySQL we get a warning
{code:java}
CREATE DATABASE artdb CHARACTER SET utf8 COLLATE utf8_bin;
Query OK, 1 row affected, 2 warnings (0.01 sec){code}
{code:java}
3719 'utf8' is currently an alias for the character set UTF8MB3, but will be an alias for UTF8MB4 in a future release. Please consider using UTF8MB4 in order to be unambiguous.{code}
 

UTF8MB3 is deprecated in MySQL 8 and planned to [be removed|https://dev.mysql.com/doc/refman/8.0/en/charset-unicode-utf8mb3.html].

According to the MySQL team blog, UTF8MB4 has [better performance in v8.0 |https://mysqlserverteam.com/mysql-8-0-when-to-use-utf8mb3-over-utf8mb4/](but might be worse in previous versions?).

When certifying MySQL 8 we should also test this change and consider siwtching the default.",,,,,,,,,,,,RTFACT-16750,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0dkg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deadlock when overwriting metadata file,RTFACT-20465,82868,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexeiv,alexeiv,30/Oct/19 8:02 AM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
 # Start HA with two nodes at least (I've tested with PostgreSQL)
 # Create a Conan repository and upload package with few revisions.
 # Create a new Conan repo.
 # Copy/Move from previous repo to the new Conan repo.
 # For the thread that try to copy:
 # It sometimes will fail with 

{code:java}
Could not acquire lock within 120 seconds. Couldn't acquire lock for: 120000 milliseconds{code}
The error will occur on the index.json file.
This happens since there is a deadlock between the copy/move to the calculation of the metadata. 
In the logs you can see the following:
For the thread that try to copy:

{code:java}
2019-10-27 08:36:03,417 [http-nio-8082-exec-4] [DEBUG] (o.a.s.d.l.s.DbLocksServiceImpl:79) - Acquiring lock for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' owner: 'art2' thread id: '36' thread name: 'http-nio-8082-exec-4'
2019-10-27 08:36:03,417 [http-nio-8082-exec-4] [TRACE] (o.a.s.d.l.s.DbLocksServiceImpl:88) - Attempting to acquire lock for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' owner: 'art2' thread id: '36' thread name: 'http-nio-8082-exec-4'
2019-10-27 08:36:03,418 [http-nio-8082-exec-4] [DEBUG] (o.a.s.d.l.d.DbDistributeLocksDao:164) - Failed to insert lock row to the 'distributed_locks' table: LockInfo{category='conan-center', key='_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json', owner='art2', threadId=36, startedTime=1572165363418, threadName='http-nio-8082-exec-4'}. ERROR: duplicate key value violates unique constraint ""locks_pk""
2019-10-27 08:36:03,419 [http-nio-8082-exec-4] [DEBUG] (o.a.s.d.l.d.DbDistributeLocksDao:166) - Failed to insert lock.
......
2019-10-27 08:38:03,417 [http-nio-8082-exec-4] [TRACE] (o.a.s.d.l.s.DbLocksServiceImpl:114) - Waiting while trying to acquiring lock for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' owner: 'art2' thread id: '36' thread name: 'http-nio-8082-exec-4'
2019-10-27 08:38:03,418 [http-nio-8082-exec-4] [TRACE] (o.a.s.d.l.s.DbLocksServiceImpl:88) - Attempting to acquire lock for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' owner: 'art2' thread id: '36' thread name: 'http-nio-8082-exec-4'
2019-10-27 08:38:03,419 [http-nio-8082-exec-4] [DEBUG] (o.a.s.d.l.d.DbDistributeLocksDao:164) - Failed to insert lock row to the 'distributed_locks' table: LockInfo{category='conan-center', key='_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json', owner='art2', threadId=36, startedTime=1572165483418, threadName='http-nio-8082-exec-4'}. ERROR: duplicate key value violates unique constraint ""locks_pk""
2019-10-27 08:38:03,419 [http-nio-8082-exec-4] [DEBUG] (o.a.s.d.l.d.DbDistributeLocksDao:166) - Failed to insert lock.
{code}
On the side of the thread that doing the calculation of the metadata:

{code:java}
2019-10-27 08:36:03,415 [art-exec-1] [DEBUG] (o.a.s.d.f.s.FileServiceImpl:186) - Updating file: conan-center:_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json

2019-10-27 08:38:03,845 [art-exec-1] [TRACE] (o.a.s.d.f.s.SqlStorageSession:138) - After completion called on session 7fe1c095-97e8-41c7-b897-4e12f68848e1
2019-10-27 08:38:03,849 [art-exec-1] [TRACE] (o.a.s.d.f.s.SqlStorageSession:144) - Release resources called on session 7fe1c095-97e8-41c7-b897-4e12f68848e1
2019-10-27 08:38:03,849 [art-exec-1] [TRACE] (o.a.s.f.l.SessionLockEntry:125) - Releasing WRITE lock on LockEntryId conan-center:_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json
2019-10-27 08:38:03,849 [art-exec-1] [TRACE] (o.a.s.d.l.p.DbMapLockWrapper:69) - unlock conan-center/_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json


2019-10-27 08:38:03,853 [art-exec-1] [DEBUG] (o.a.s.d.l.s.DbLocksServiceImpl:147) - Attempting to release lock for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' thread id: '68' thread name: 'art-exec-1'
2019-10-27 08:38:03,853 [art-exec-1] [TRACE] (o.a.s.d.l.s.DbLocksServiceImpl:150) - Attempting to release lock from cache for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' owner: 'art2' thread id: '68' thread name: 'art-exec-1'
2019-10-27 08:38:03,854 [art-exec-1] [TRACE] (o.a.s.d.l.s.DbLocksServiceImpl:155) - Successfully delete lock from cache for: LockInfo{category='conan-center', key='_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json', owner='art2', threadId=68, startedTime=1572165363408, threadName='art-exec-1'}
2019-10-27 08:38:03,856 [art-exec-1] [TRACE] (o.a.s.d.l.s.DbLocksServiceImpl:167) - Successfully delete lock from cache for: category: 'conan-center' key: '_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7/index.json' owner: 'art2' thread id: '68' thread name: 'art-exec-1'
2019-10-27 08:38:03,856 [art-exec-1] [INFO ] (o.a.a.c.s.ConanServiceImpl:280) - Conan index calculation for conan-center:_/zlib/1.2.11/_/f52e38c68b0152cea61ff95860f7e66e/package/6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7 finished successfully
{code}
The metadata finishing exactly after the copy fails to acquire the lock (waits for 2 minutes)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0d8w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget packages unable to resolve from remote cache when Smart remote repo is down,RTFACT-20463,82857,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,santhoshp,santhoshp,29/Oct/19 11:34 PM,15/Feb/21 1:30 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,6.13.1,,NuGet,,,,,,,0,,,,,,"Issue:- From Powershell, if we point to Virtual repository to resolve the NuGet artifacts and if the virtual has a smart remote repository in it and in case if the Artifactory that is pointing from the Smart remote repository is down then artifacts were unable to resolve even though artifacts present in the cache.

If we point to remote directly from powershell then we were able to resolve the artifacts successfully.

Steps to reproduce:

1. Consider an Artifactory instance that is facing to the internet and create a repository that is pointing to ""https://www.powershellgallery.com/""
!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU8l|width=500,height=260!
2. In the second Artifactory instance, create a remote-repository that is pointing to first remote repository: 
!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU8q|width=500,height=261!
3. From the Powershell, create a repository pointing to Virtual ""nuget"" repository and remote ""original"" repository of the secondary instance.
!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU8v|width=500,height=112!
4. Request for the artifact Posh-SSH by pointing to Virtual repository.

Install-Module -Name Posh-SSH  -Verbose -Repository Artifactory4


!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU90|width=500,height=131!!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU95|width=500,height=153!

5. Now Shutdown the Artifactory that is pointing to the internet and in secondary Artifactory instance, Enable the Global offline mode.
6. Then uninstall the Posh-SSH module from PowerShell.
7. Again request for the package from PowerShell and we will see 404 response when resolving from virtual and seeing 200 responses when resolving from remote.
!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU9F|width=500,height=267!!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU9K|width=500,height=147!
!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU9P|width=500,height=70!!https://jfrog--c.eu12.content.force.com/servlet/rtaImage?refid=0EM1r000001jU9Z|width=500,height=233!

Errors: 

2019-10-29 12:09:50,059 [https-jsse-nio-8443-exec-94] [DEBUG] (o.a.a.n.r.NuGetVirtualRepoHandler:148) - Could not download NuGet package: 'Posh-SSH' version:'2.2.0' from repository: 'powershell-remote', *powershell-remote: is offline*, 'powershell-remote:Posh-SSH.2.2.0.nupkg' is not found at 'Posh-SSH.2.2.0.nupkg'.

20191029120950|147|REQUEST|10.98.22.96|anonymous|GET|/api/nuget/chocolatey/Download/Posh-SSH/2.2.0|HTTP/1.1|404|0
20191029120950|137|REQUEST|10.98.22.96|anonymous|GET|/api/nuget/chocolatey/Download/Posh-SSH/2.2.0|HTTP/1.1|404|0

 

This issue is seen in 6.10.1 version and also tested in 6.13.1 version but the issue seems to be resolved in 6.13.1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0d6g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifacts in Web UI tree browser are no longer sorted numerically as expected,RTFACT-20449,82651,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mark.mielke,mark.mielke,29/Oct/19 5:50 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,Web UI,,,,,,,8,,,,,,"After upgrading from Artifactory 6.11.3 to 6.13.1, our users quickly reported that artifacts in the Web UI tree browser are no longer sorted numerically.

The example given by the user was:
{quote}
Old:
 9.0.95
 9.0.100
 9.0.200
 9.0.300
 9.0.490

Current:
 9.0.100
 9.0.200
 9.0.300
 9.0.490
 9.0.95
{quote}

We believe the numeric sorting starting working around Artifactory 4.4.0, possibly with the resolution of RTFACT-4363 .

This regression in functionality leads to user confusion as they may believe they can see the latest version at the end of the list, but the latest version may be at the start of the list.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0cko:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Nov/19 9:14 PM;posty;This change is awful, especially since we have been using this for four years and we are so used to the old method.

Please fix, or create a configurable key in the artifactory.system.properties that can be changed.","15/Nov/19 4:14 PM;posty;Hello,

Is there any update on this issue?

Thank you.","27/Jan/20 6:31 PM;seidhkona;Any update on this issue?","06/Aug/20 9:04 AM;kuwe16;Hello,



any update on this issue? We are becoming a lot of complaint of this sorting! People already looking for alternatives.

 

 ",,,,,,,
Access Token authentication will not work on RHEL6 machines using YUM client,RTFACT-20448,82649,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,saiu,29/Oct/19 1:23 AM,15/Feb/21 1:54 PM,18/Feb/21 8:59 AM,,,,,,,,,Access Tokens,YUM,,,,,,0,,,,,,"When creating Access Token for example for existing/none existing user with deployment operations on RHEL7 everything works properly.

However, when trying to use the same Access Token on RHEL6 machine using YUM client 3.2.29, it will result with status 401, and ""Bad credentials"":
 {
 ""errors"" : [

{ ""status"" : 401, ""message"" : ""Bad credentials"" }

]

[root@sai-centos-6 6]# yum install libfa1
Loaded plugins: fastestmirror, security
Setting up Install Process
Loading mirror speeds from cached hostfile
https://<username>:<access_token>@jfrog.io/artifactory/rpm-local/repodata/repomd.xml: [Errno 14] PYCURL ERROR 22 - ""The requested URL returned error: 401""
Trying other mirror.
Error: Cannot retrieve repository metadata (repomd.xml) for repository: Artifactory. Please verify its path and try again

Steps to reproduce are simple:
 1. Create a user(can be admin or with just read permissions on rpm-local). 
 2. Create an access token using curl on RHEL6 machine. Apply that token in your yum config.
 3. Resolve an artifact existing in the repository, using the yum client(3.2.29).
4. On RHEL6 machine, you will get error 401.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0ck8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory /api/search/versions does not return expected versions.,RTFACT-20437,82509,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,atlassianbuildteam,atlassianbuildteam,27/Oct/19 10:49 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,REST API,,,,,,,0,,,,,,"Hi there,

We are using artifactory rest endpoint {{/api/search/versions}} to query a specific version pattern 1000.\*.0 . However the endpoint does not return all versions available.We have more than 4k versions for the version pattern. If we use /api/search/versions?g=groupId&a=artifactId&v=1000.\*.0&repos=my-repo, artifactory returns 2k+ versions. If we use /api/search/versions?g=groupId&a=artifactId&v=1000.*.0 (without repos=my-repo param), artifactory returns 4k+ version, but still not all. Note all versions of the artifact exist in my-repo.

We have confirmed that increasing {{artifactory.search.userQueryLimit}} can help, but that should not be considered as a proper workaround as the property affects other aql results as well.

Ideally the endpoint should respect {{artifactory.search.userQueryLimit}} and return results with pagination if there are too many.

Cheers,",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0brk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Multiple deb.distribution definitions causing incorrect indexing ,RTFACT-20397,82064,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mdtdevops,mdtdevops,21/Oct/19 9:27 PM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Debian,Distribution,,,,,,5,,,,,,"When uploading a debian artifact with multiple deb.distribution tags the second defined distribution tag does allow for the package to be accessible by the distribution. 

For example if the two distributions were defined for the debian metadata property in the UI as 'deb.distribution' with the input parameters 'bionic; stretch'  stretch would not be available when attempting to download the package, but it would be available on bionic distributions. If 'stretch' was defined first in the properties list ('stretch; bionic') then the bionic distribution system would not have access to the deb. 

Here is a snapshot of the log file reporting multiple incorrect dists being generated when running a 'reindex':

 

2019-10-21 15:21:30,017 [art-exec-4] [INFO ] (o.a.a.d.DebianServiceImpl:317) - Finished calculation of Debian metadata for distribution ' trusty' in repo 'libs-snapshots-deb-local'. took 85 ms
2019-10-21 15:21:30,804 [art-exec-6] [INFO ] (o.a.a.d.DebianServiceImpl:317) - Finished calculation of Debian metadata for distribution 'trusty; bionic' in repo 'libs-snapshots-deb-local'. took 871 ms
2019-10-21 15:21:31,085 [art-exec-3] [INFO ] (o.a.a.d.DebianServiceImpl:317) - Finished calculation of Debian metadata for distribution 'trusty;bionic' in repo 'libs-snapshots-deb-local'. took 1153 ms
2019-10-21 15:21:31,361 [art-exec-5] [INFO ] (o.a.a.d.DebianServiceImpl:317) - Finished calculation of Debian metadata for distribution 'trusty' in repo 'libs-snapshots-deb-local'. took 1431 ms
2019-10-21 15:21:31,659 [art-exec-2] [INFO ] (o.a.a.d.DebianServiceImpl:317) - Finished calculation of Debian metadata for distribution 'bionic' in repo 'libs-snapshots-deb-local'. took 1729 ms

 

 ",Debian distributions trusty and bionic ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0948:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Sep/20 7:17 AM;batelt;Hey Freeman,

Have you tried to follow [this instructions |https://www.jfrog.com/confluence/display/JFROG/Debian+Repositories#DebianRepositories-Specifyingmultiplelayouts] and upload the file with all the nescerry properties  deb.distribution, deb.component and deb.architecture ?

","12/Oct/20 4:29 PM;Tr00p3rx;issue is caused by the space in the properties field ('stretch; bionic'), just remove the space ('stretch;bionic') and it should work.

 

We've reported the issue under RTFACT-23559",,,,,,,,,
Go repo: Artifactory doesn't support dynamic versions,RTFACT-20392,81983,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ankushc,ankushc,19/Oct/19 12:40 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Virtual Repositories,,,,,,,0,,,,,,"*Steps to reproduce:*
 # Set GOPROXY to point to artifactory
 # go get github.com/0xAX/notificator@master

Step 2 will fail since Artifactory doesn't support dynamic versions such as master. This is supported if GOPROXY is set to proxy.golang.org or athens or direct.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc08mw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
PyPi uploads using twine cause duplicate entries ,RTFACT-20390,81975,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,18/Oct/19 8:07 PM,16/Feb/21 6:35 AM,18/Feb/21 8:59 AM,,,,,,,,,PyPI,,,,,,,1,,,,,,"Symptoms: Duplicate entries appear in the ""simple.html"" PyPi index file after uploading a twine package

Steps to reproduce:

1. Create the project folder:

mkdir twine-test

mkdir twine-test/example_pkg

cd twine-test/

2. Add a basic setup.py - Include underscores in the package name

import setuptools

setuptools.setup(

    name=""infra_pypipkg_test"",

    version=""0.0.1"",

    author=""jfrog"",

    author_email="""",

    description=""A small example package"",

    url="""",

    packages=setuptools.find_packages(),

    classifiers=[

        ""Programming Language :: Python :: 3"",

        ""Operating System :: OS Independent"",

    ],

    python_requires='>=3.6',

)

 

3. Add a dummy ""hello world"" script

echo 'print ""hello-world!""' > example_pkg/[hello.py|http://hello.py/]

 

3. Bundle it up using python - Do not upload

python3 [setup.py|http://setup.py/] sdist bdist_wheel

 

4. Twine upload the file:

*twine upload --repository local dist/**

Uploading distributions to [http://artifactory.com:8081/artifactory/api/pypi/pypi|http://pat.vm:8081/artifactory/api/pypi/pypi]

Uploading infra_pypipkg_test-0.0.1-py3-none-any.whl

100%|███████████████████████████████████████████████████████████████| 4.70k/4.70k [00:00<00:00, 64.1kB/s]

Uploading infra_pypipkg_test-0.0.1.tar.gz

100%|███████████████████████████████████████████████████████████████| 3.51k/3.51k [00:00<00:00, 61.7kB/s]

 

After indexing, the package appears twice in the simple.html metadata:

<a data-requires-python="">=3.6"" href=""infra-pypipkg-test"" rel=""internal"" >infra-pypipkg-test</a><br/>

<a data-requires-python="">=3.6"" href=""infra_pypipkg_test"" rel=""internal"" >infra_pypipkg_test</a><br/>

 

Both link to the *Underscore packages*. From what I can tell, it might be caused by the folder name:

pypi-local/*infra-pypipkg-test*/0.0.1/*infra_pypipkg_test*-0.0.1-py3-none-any.whl

 

Only one POST was recorded for me:

*20191018204116|298|REQUEST|127.0.0.1|admin|POST|/api/pypi/pypi|HTTP/1.1|200|3389*

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc08l4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"19/Mar/20 12:48 PM;viratsardana;Patrik, i am having issues uploading using twine. Not sure how its working in your case. jfrog artifactory api is PUT call for uploading artifacts, but twine seems to be using POST
[https://github.com/pypa/twine/blob/f7402e0d2e1c1e6ecde61dc8bcba515b807a48a0/twine/repository.py#L128]
|{{curl -u myUser:myP455w0rd! -X PUT ""[http://localhost:8081/artifactory/my-repository/my/new/artifact/directory/file.txt]"" -T Desktop/myNewFile.txt}}|

Twine is giving 405 due to this. Am i missing something ?

twine upload --repository-url url ./dist/*",,,,,,,,,,
Helm virtual aggregating an empty smart remote gives null when we try to get index.yaml ,RTFACT-20387,81965,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,balajis,balajis,18/Oct/19 2:35 PM,16/Feb/21 6:39 AM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,3,,,,,,"Helm virtual repository aggregating an empty smart remote repository would give an error with [null]  

2019-10-18 14:18:53,333 [art-exec-349] [ERROR] (o.a.a.h.r.m.HelmVirtualMerger:213) - Couldn't read index file in remote repository testrepo-helm : null

steps to reproduce.

1) create a local helm repository on an Artifactory instance

2) create a remote repository pointing to the above created local repository on a remote Artifactory instance.

3) create a virtual repo aggregating empty smart repos. 

4) Try to get the index.yaml through the virtual repo and observe it returns [null]

curl [http://mill.jfrog.info:12036/artifactory/helm/index.yaml] 

It should not return null values and Error message. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc4qk7:yg",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
daily backups occasionally fail,RTFACT-20336,81540,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tomr,tomr,16/Oct/19 12:03 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.12.0,,,,,,,Backup,,,,,,,0,,,,,,"We get occasional backup failure emails like the following:

The following errors have occurred:

Export error: from: atom-npm:shadowfax to: /volume/ssd-storage04/sspt/tools/artifactory/backup/backup-daily/current/repositories/atom-npm reason: File /volume/ssd-storage04/sspt/tools/artifactory/backup/backup-daily/current/repositories/atom-npm/shadowfax exists and is not a directory. Unable to create directory.: File /volume/ssd-storage04/sspt/tools/artifactory/backup/backup-daily/current/repositories/atom-npm/shadowfax exists and is not a directory. Unable to create directory.
  
 In this case, the file in question does in fact exist and is a regular file:
  
{noformat}
# ls -l /volume/ssd-storage04/sspt/tools/artifactory/backup/backup-daily/current/repositories/atom-npm
total 920
-rw-r----- 1 root root 909513 Oct  4 21:35 shadowfax
drwxr-x--- 2 root root   4096 Oct 14 16:42 shadowfax.artifactory-metadata
-rw-r----- 1 root root  14082 Oct  4 21:42 shadowfax-cli
drwxr-x--- 2 root root   4096 Oct 14 16:42 shadowfax-cli.artifactory-metadata
{noformat}
 The artifacts look like this in Artifactory: !image-2019-10-15-16-51-45-034.png!

What can I do to prevent these types of errors?","Linux svl-artifactory.juniper.net 4.4.0-116-generic #140-Ubuntu SMP Mon Feb 12 21:23:04 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux

# df -h /volume/ssd-storage04/

Filesystem                                  Size  Used Avail Use% Mounted on

10.160.0.154:/ssd_store/ssd_storage04/sspt   17T   13T  4.9T  72% /volume/ssd-storage04",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc06iw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Oct/19 1:23 AM;tomr;The screenshot did not get transferred.  Looks like:
v
|->shadowfax-cli/-
|
|-v shadowfax/-
  |->shadowfax-2.1.3.tgz
  |->shadowfax-2.1.6.tgz
  |->shadowfax-2.1.7.tgz
  |->shadowfax-2.1.8.tgz
  |->shadowfax-2.1.9.tgz",,,,,,,,,,
"Using ""Set Repository Replication Configuration"" with one configuration in payload not overriding the replication key.",RTFACT-20331,81496,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yehudah,yehudah,15/Oct/19 1:33 PM,16/Feb/21 7:20 AM,18/Feb/21 8:59 AM,,6.12.2,6.13.1,,,,,,REST API,,,,,,,1,,,,,,"Using [Set Repository Replication Configuration|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-SetRepositoryReplicationConfiguration] with one configuration in payload not overriding the replication key, therefore a replication configuration is saved in the config descriptor with wrong replication key, this situation can cause for some issues, for example:

When using the [Set Repository Replication Configuration|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-SetRepositoryReplicationConfiguration] rest call and in the json payload we set a URL of old replication target URL, duplicate replication key is saved in the config descriptor and it not possible to make any change in Artifactory unless we manually remove the replication configuration.

The issue will occur only if we will use the REST call mention above and the payload will include one replication setting.

Steps to reproduce:
1. create repository with the name ""generic-local"".
2. Execute the following REST calls in the order below:

REST #1:
curl -k -H ""Content-Type: application/json"" -u admin:password -X PUT http://localhost:8081/artifactory/api/replications/generic-local -d ""{ \""url\"" : \""http://url1/artifactory/abc\"", \""socketTimeoutMillis\"" : 15000, \""username\"" : \""testuser\"", \""password\"" : \""password\"", \""syncStatistics\"" : false, \""enabled\"" : true, \""cronExp\"" : \""0 1 * ? * *\"", \""syncDeletes\"" : false, \""syncProperties\"" : false, \""repoKey\"" : \""generic-local\"", \""enableEventReplication\"" : true, \""checkBinaryExistenceInFilestore\"" : false }""

REST #2:
curl -k -H ""Content-Type: application/json"" -u admin:password -X PUT http://localhost:8081/artifactory/api/replications/generic-local -d ""{ \""url\"" : \""http://url2/artifactory/abc\"", \""socketTimeoutMillis\"" : 15000, \""username\"" : \""testuser\"", \""password\"" : \""password\"", \""syncStatistics\"" : false, \""enabled\"" : true, \""cronExp\"" : \""0 1 * ? * *\"", \""syncDeletes\"" : false, \""syncProperties\"" : false, \""repoKey\"" : \""generic-local\"", \""enableEventReplication\"" : true, \""checkBinaryExistenceInFilestore\"" : false }""

After executing REST #2, the configuration of REST#1 will be overwritten by REST#2 but the same replication key will be saved.

REST #3:
curl -k -H ""Content-Type: application/json"" -u admin:password -X PUT http://localhost:8081/artifactory/api/replications/generic-local -d ""[{ \""url\"" : \""http://url1/artifactory/abc\"", \""socketTimeoutMillis\"" : 15000, \""username\"" : \""testuser\"", \""password\"" : \""password\"", \""syncStatistics\"" : false, \""enabled\"" : true, \""cronExp\"" : \""0 1 * ? * *\"", \""syncDeletes\"" : false, \""syncProperties\"" : false, \""repoKey\"" : \""generic-local\"", \""enableEventReplication\"" : true, \""checkBinaryExistenceInFilestore\"" : false },{ \""url\"" : \""http://url3/artifactory/abc\"", \""socketTimeoutMillis\"" : 15000, \""username\"" : \""testuser\"", \""password\"" : \""REDACTED\"", \""syncStatistics\"" : false, \""enabled\"" : true, \""cronExp\"" : \""0 1 * ? * *\"", \""syncDeletes\"" : false, \""syncProperties\"" : false, \""repoKey\"" : \""generic-local\"", \""enableEventReplication\"" : true, \""checkBinaryExistenceInFilestore\"" : false }]""

3. You will recieve the following error:
{code:java}
{
  ""errors"" : [ {
    ""status"" : 500,
    ""message"" : ""Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: Duplicate key generic-local_http__50ddf24258 (attempted merging values LocalReplication[generic-local|http://url2/artifactory/abc|generic-local_http__50ddf24258] and LocalReplication[generic-local|http://url1/artifactory/abc|generic-local_http__50ddf24258]))]""
  } ]
}
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0694:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory allows Non Ascii characters in filenames being uploaded to the DB.,RTFACT-20327,81324,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,saiu,saiu,14/Oct/19 10:25 PM,16/Feb/21 7:31 AM,18/Feb/21 8:59 AM,,6.11.3,6.6.1,,,,,,,,,,,,,1,artifactory,ascii,non-ascii,,,"A file with non-ascii chinese characters was added to an Artifactory generic repository. It creates a DB entry with the same chinese character name as show in the attached screenshot.

 

Include/Exclude patterns won't work either.

How do we block these files from being uploaded to artifactory?","MySQL DB

Collation utf8_unicode_ci and utf8_bin",,,,,,,,,,,,,,,,,,"14/Oct/19 9:58 PM;saiu;Screen Shot 2019-10-14 at 2.50.31 PM.png;https://www.jfrog.com/jira/secure/attachment/35709/Screen+Shot+2019-10-14+at+2.50.31+PM.png","14/Oct/19 9:58 PM;saiu;Screen Shot 2019-10-14 at 2.51.24 PM.png;https://www.jfrog.com/jira/secure/attachment/35710/Screen+Shot+2019-10-14+at+2.51.24+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0588:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
ShardingBinaryProvider/ClusterShardingBinaryProvider might abort the write transaction on optimization check error while the binary was already added,RTFACT-20325,81294,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shayb,shayb,shayb,14/Oct/19 4:37 PM,16/Feb/21 7:41 AM,18/Feb/21 8:59 AM,,6.9.5,,,,,,,Binary Provider ,Binarystore,,,,,,1,PB_Done,,,,,"When deploying artifact with new binary to Artifactory (user artifact deployment, or system artifact deployment such as package index file) and using Sharding storage configuration, immediately after the binary is added to the sub storage providers, Artifactory check if the binary exists in more providers than it should based on the redundancy configuration, if it is, it mark an internal flag to indicate that storage optimization is required.
 On this optimization check stage, the binary was already added to the relevant providers, but in some scenarios, there might be failures on the optimization check itself against the sub providers (i.e. socket timeout against remote binary provider). 
 Currently, on such failure, an Exception is thrown and the transaction is aborted. See example:
{code:java}
2019-09-09 14:00:00,000 [http-nio-8080-exec-1111] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - 503 : java.net.SocketTimeoutException: Read timed out
org.jfrog.storage.binstore.exceptions.BinaryStorageException: 503 : java.net.SocketTimeoutException: Read timed out
        at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.addStream(ShardingBinaryProviderImpl.java:238)
        at org.jfrog.storage.binstore.providers.FileCacheBinaryProviderImpl.addStream(FileCacheBinaryProviderImpl.java:126)
        at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.addBinary(BinaryServiceImpl.java:387)
        at sun.reflect.GeneratedMethodAccessor589.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
        at com.sun.proxy.$Proxy195.addBinary(Unknown Source)
        at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1808)
        at org.artifactory.repo.service.RepositoryServiceImpl.saveFileInternal(RepositoryServiceImpl.java:629)
        at sun.reflect.GeneratedMethodAccessor600.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
        at com.sun.proxy.$Proxy176.saveFileInternal(Unknown Source)
        at org.artifactory.addon.gems.handlers.GemsRemoteRequestHandler.saveDependencyToCache(GemsRemoteRequestHandler.java:414)
        at org.artifactory.addon.gems.handlers.GemsRemoteRequestHandler.lambda$createAndSaveDependencies$3(GemsRemoteRequestHandler.java:389)
        at java.util.LinkedHashMap.forEach(LinkedHashMap.java:684)
        at org.artifactory.addon.gems.handlers.GemsRemoteRequestHandler.createAndSaveDependencies(GemsRemoteRequestHandler.java:388)
        at org.artifactory.addon.gems.handlers.GemsRemoteRequestHandler.downloadAllDependencies(GemsRemoteRequestHandler.java:346)
        at org.artifactory.addon.gems.handlers.GemsRemoteRequestHandler.handleDependencies(GemsRemoteRequestHandler.java:106)
        at org.artifactory.addon.gems.handlers.GemsVirtualRequestHandler.handleDependencies(GemsVirtualRequestHandler.java:115)
        at org.artifactory.addon.gems.GemsResource.dependencies(GemsResource.java:135)
        at sun.reflect.GeneratedMethodAccessor608.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
        at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
        at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
        at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:392)
        at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)
        at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:74)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
        at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
        at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
        at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:685)
        at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
        at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: java.net.SocketTimeoutException: Read timed out
        at org.jfrog.storage.binstore.client.RemoteBinaryProvider.exists(RemoteBinaryProvider.java:102)
        at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.findNumberOfProvidersWithFile(ShardingBinaryProviderImpl.java:290)
        at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.cleanAndVerify(ShardingBinaryProviderImpl.java:279)
        at org.artifactory.addon.filestore.multiple.ShardingBinaryProviderImpl.addStream(ShardingBinaryProviderImpl.java:233)
        ... 99 common frames omitted
Caused by: java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
        at java.net.SocketInputStream.read(SocketInputStream.java:171)
        at java.net.SocketInputStream.read(SocketInputStream.java:141)
        at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:139)
        at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:155)
        at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:284)
        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)
        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)
        at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)
        at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165)
        at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)
        at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)
        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)
        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)
        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:71)
        at org.jfrog.client.http.CloseableHttpClientDecorator.doExecute(CloseableHttpClientDecorator.java:107)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
        at org.jfrog.storage.binstore.client.RemoteBinaryProvider.execute(RemoteBinaryProvider.java:427)
        at org.jfrog.storage.binstore.client.RemoteBinaryProvider.execute(RemoteBinaryProvider.java:421)
        at org.jfrog.storage.binstore.client.RemoteBinaryProvider.exists(RemoteBinaryProvider.java:95)
        ... 102 common frames omitted

{code}
Artifactory should not abort storage transactions on optimization check failures.",,,,,,,,,,,,,,,,RTFACT-19527,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr12e:rro",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Config Descriptor gets corrupted when creating repository with illegal character in the description,RTFACT-20324,81201,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,12/Oct/19 12:41 AM,16/Feb/21 7:44 AM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,Configuration,,,,,,,0,,,,,,"Config descriptor gets corrupted when creating a repository with illegal characters in the description. In this case, the illegal character is ""Vertical Tab"" which is Unicode: 0xb. This illegal character is not visible in the description and can be revealed in TextWrangler(see attached screenshot below)

 

Steps to reproduce:

 
 # Create Local repository with the description that is attached in this Jira(description_for_Jira.txt). Make sure you open it with TextWrangler, other editors might filter the illegal character out.
 # It fail with the following Error:

{{2019-10-12 00:25:44,722 [http-nio-8081-exec-3] [ERROR] (o.a.c.CentralConfigServiceImpl:744) - Could not load configuration due to: Failed to read object from stream}}

{{.}}

{{.}}

{{java.lang.RuntimeException: Failed to read object from stream}}{{.}}{{.}}{{Caused by: org.xml.sax.SAXParseException: An invalid XML character (Unicode: 0xb) was found in the element content of the document.}}

 

As a result, it crashes the Artifactory. I further performed the following tests and here are my findings:

Since that illegal character can not be seen in this description field of this Jira, let's assume that the illegal character is equal to X.

My tests:                                                                                             Results:

1. Included the following in the description: X                                          OK

2. Included the following in the description: testX                                    OK

3. Included the following in the description: testXX                                  OK

4.  Included the following in the description: testX[SPACE]                     OK

5. Included the following in description(2 lines): testX                 
                                                                             X                                  OK

6. Included the following in description(2 lines): testX
                                                                             testX                            Fail                                

7. Included the following in description(2 lines): testX
                                                                             test                              Fail 

8. Included the following in the description: testXTest                            Fail

 

Based on my findings, the config descriptor gets corrupted when the illegal character is located in between the text in the description. When it is located at the end of the text, or it is in the description without any text then it does not corrupt the descriptor.

 

 ","Use this file in your description: [^description_for_Jira.txt]
h3. That's how it looks in TextWrangler:

!illegal_character.jpg!

 

Error in UI:

 

!1.jpg!",,,,,,,,,,,,,,,,,,"12/Oct/19 12:39 AM;timt;1.jpg;https://www.jfrog.com/jira/secure/attachment/35602/1.jpg","12/Oct/19 12:38 AM;timt;description_for_Jira.txt;https://www.jfrog.com/jira/secure/attachment/35603/description_for_Jira.txt","12/Oct/19 12:39 AM;timt;illegal_character.jpg;https://www.jfrog.com/jira/secure/attachment/35601/illegal_character.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04v4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot use patterns in git lfs local repository,RTFACT-20321,81171,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bert.meedendorp,bert.meedendorp,11/Oct/19 1:30 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.12.1,,,,,,,Git LFS,,,,,,,0,,,,,,"I want to use patterns in the gitlfs repo defenition combined with permission rights.

I want to make subdir's in the git lfs repo with different rights for our teams.

I have tried all the config items nessesary to use for git lfs in combination with gitlfs repository in Artifactory. ( .git\config  ~\.jfrog\jfrog-cli.conf  .lfsconfig ~\.gitconfig )

But the only 'path' it want to use is the root path. ( with the subdir objects )

I keep getting errors:

09:15:30.265858 trace git-lfs: Filled credentials for http:/dev-brm.in.kadaster.nl/artifactory/api/lfs/lfs-local/nl/kadaster
09:15:30.265858 trace git-lfs: HTTP: POST [http://dev-brm.in.kadaster.nl/artifactory/api/lfs/lfs-local/nl/kadaster/objects/batch]

09:15:30.478731 trace git-lfs: api error: Repository or object not found: http://dev-brm.in.kadaster.nl/artifactory/api/lfs/lfs-local/nl/kadaster/objects/batch
Check that it exists and that you have proper access to it
batch response: Repository or object not found: http://dev-brm.in.kadaster.nl/artifactory/api/lfs/lfs-local/nl/kadaster/objects/batch
Check that it exists and that you have proper access to it
error: failed to push some refs to 'http://github.so.kadaster.nl/dev/gitlfs-test' 

 

The include pattern I use in the gitlfs repository configuration is:  nl/kadaster/*

and allso in the permission target name.","Artifactory 6.12.1

git client 2.23.0.windows.1

github enterprise 2.17.4

git lfs 2.8.0 (GitHub; windows amd64; go 1.12.2; git 30af66bb)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04oo:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Dec/19 8:31 AM;bert.meedendorp;Any news on this issue","12/Aug/20 5:23 AM;bert.meedendorp;Is it possible to get an answer on this issue?

Is it been implemented in the Artifactory cloud solution?

 

We are now running Artifactory 6.17.0 and git lfs version 2.10.0","04/Dec/20 4:03 PM;axel3rd;I think this is a duplicate of my RTFACT-15879, you can vote on it :).",,,,,,,,
"HA Configuration won't start due to ""No valid installed license found.""",RTFACT-20320,81114,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,suukit,suukit,11/Oct/19 10:38 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,High Availability,,,,,,,0,,,,,,"We got an artifactory setup with two nodes using docker. Primary node is configured for HA and up. Two licenses enterpries licenses are added where one is used for this primary node an one is free. Starting up the secondary node finds the configured database but stops with

 

{{artifactory | 10:34:42.883 [localhost-startStop-1] WARN org.artifactory.addon.ConverterBlockerImpl - No valid installed license found. Blocking conversion}}
 {{artifactory | 10:34:42.885 [localhost-startStop-1] ERROR org.artifactory.converter.ConvertersManagerImpl - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: Converter can't run since no matching license found, please add new license}}

ha-node.properties looks like (on secondary node, primary is true and andy reference is set to primary node):

{{node.id=lxart501p.vkbads.de}}
 {{context.url=[http://lxart501p.vkbads.de:8081/artifactory]}}
 {{access.context.url=[http://lxart501p.vkbads.de:8081/access]}}
 {{membership.port=0}}
 {{primary=False}}
 {{artifactory.ha.data.dir=/var/opt/jfrog/artifactory/data}}
 {{artifactory.ha.backup.dir=/backup}}
 {{hazelcast.interface=10.66.17.*}}
 {{artifactory.context.path=/}}

 

 

There is no reference is any log that the secondary node tried to get a license from the primary node. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04ns:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Oct/19 10:46 AM;suukit;Please close this issue, resolved by updating primary node to 6.13.1 from 6.13.0

thank you","16/Dec/19 11:42 AM;obogdan;I'm running into this while I'm trying to upgrade from 5.6.3 to 6.15.0 by starting the Artifactory container and connecting it to a clone of the original DB.",,,,,,,,,
Permission Target UI does not allow to select/edit any permission targets except Any Remote,RTFACT-20317,81087,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sowjanyak,sowjanyak,10/Oct/19 4:21 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Web UI,,,,,,,0,,,,,,"We are not able to edit/select any permission targets except ""Any Remote"" in the web UI. Intermittently if we select next page and come back to the 1st page, it allows to select or edit the permission targets.

This issue is affecting from choosing the permission targets or editting them through the UI. !Screen Shot 2019-10-10 at 9.10.21 AM.png!",,,,,,,,,,,,,,,,,,,"10/Oct/19 4:20 PM;sowjanyak;Screen Shot 2019-10-10 at 9.10.21 AM.png;https://www.jfrog.com/jira/secure/attachment/35576/Screen+Shot+2019-10-10+at+9.10.21+AM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04i0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
npm search queries with MSSQL can cause high resource utilization on the DB,RTFACT-20316,81085,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,10/Oct/19 2:59 PM,16/Feb/21 7:46 AM,18/Feb/21 8:44 AM,,6.10.2,,,,,,,Database,NPM,,,,,,0,,,,,,"Steps to reproduce:

1. Have a large npm repository with million artifacts
2. issue curl requests with {code}
curl -Lvv ""http://artifactory_url:8081/artifactory/api/npm/npm/-/v1/search?text=ansi""{code}
3. Inspect CPU utilization on the DB

The problematic query is: 


{code}
2019-07-24 16:34:29,942 [http-nio-127.0.0.1-8081-exec-6329] [DEBUG] (o.j.s.JdbcHelper    :78) - Executing SQL: 'select distinct  n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName,n.created as itemCreated,n.modified as itemModified,n.updated as itemUpdated,n.created_by as itemCreatedBy,n.modified_by as itemModifiedBy,n.node_type as itemType,n.bin_length as itemSize,n.node_id as itemId,n.depth as itemDepth,n.sha1_actual as itemActualSha1,n.sha1_original as itemOriginalSha1,n.md5_actual as itemActualMd5,n.md5_original as itemOriginalMd5,n.sha256 as itemSha2  from  nodes n left outer join node_props np100 on np100.node_id = n.node_id  where ( n.repo = 'npm-local' and( np100.prop_key = 'npm.description' and  np100.prop_value like '%angular2%')) and n.node_type = 1 '.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04hk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Tokens are not visible after creation,RTFACT-20311,81064,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,manu.nicolas,manu.nicolas,10/Oct/19 9:52 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Access Tokens,REST API,Web UI,,,,,1,,,,,,"Access tokens are created through the API. They work correctly and can be used to interact with said API, with the correct permissions.

However, the tokens are not visible in the UI ( /webapp/#/admin/security/access_tokens ) and an API call to /api/security/token returns ""tokens"" : [ ] 

The tokens are visible in the access_tokens table.",Artifactory Pro running in Docker using official image,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04d4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"In FullDB mode, in case an empty file is requested to be downloaded from Artifactory but the binary not presented in the Cache-Fs there is a possible connection leak",RTFACT-20310,81063,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kfira,kfira,10/Oct/19 9:50 AM,16/Feb/21 7:49 AM,18/Feb/21 8:59 AM,,6.12.0,,,,,,,,,,,,,,0,,,,,,"In Artifactory version 6.12.0 and above, in case FullDB mode is being used with Artifactory.

If there is an empty file in Artifactory (zero bytes), however the binary is not presented in the cache-fs requesting this file (GET request) will resolve an active connection which is not getting closed.

The empty file checksum is '*da39a3ee5e6b4b0d3255bfef95601890afd80709*’

 

Steps to reproduce:
 # Install Artifactory with FullDB mode
 # Configure cache-fs
 # Deploy a 'zero bytes' file to Artifactory
{code:java}
curl http://localhost:8081/artifactory/generic-local/empty.txt -XPUT{code}

 # Delete the binary from the cache '*da39a3ee5e6b4b0d3255bfef95601890afd80709'*
 # **Issue a GET request for this artifact:
{code:java}
curl http://localhost:8081/artifactory/generic-local/empty.txt{code}

 # Notice a ""500"" response for the GET request and an active connection which not getting closed (can be monitored with Jconsole)

Note: A zero bytes file will resolve in 500 response code when the concurrent cache-fs is disabled, but will not result in a leak.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc04cw:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Build Promotion without overwrite permission fails with unique pattern in PyPi repository,RTFACT-20305,80970,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vigneshs,vigneshs,09/Oct/19 3:16 PM,16/Feb/21 7:53 AM,18/Feb/21 8:59 AM,,6.12.2,6.13.1,6.7.0,,,,,,,,,,,,4,PB_Done,,,,,"The second build promotion is failing for Pypi (local) repositories for a non-admin user who does not have delete/overwrite permissions for the repositories, even though the published artifacts names are different.

*Step 1:* Create two Pypi local repositories named pypi-local and pypi-release

*Step 2:* Assign Read, annotate, deploy and delete permissions to pypi-local repository for a user.

*Step 3:* Assign Read, annotate, deploy permissions to pypi-release repository for a user and configure JFrog CLI with the user.

*Step 4:* Uploaded the package pokemonscli-1.0.2.tar.gz with *build number 1* to pypi-local repository
              jfrog rt bce pokemon 1
              jfrog rt upload --build-name pokemon --build-number 1 pokemonscli-1.0.2.tar.gz pypi-local/pokemon/

*Step 5:* Published the build info for package pokemonscli-1.0.2.tar.gz with *build number 1*
              jfrog rt build-publish pokemon 1

*Step 6:* Promoted the package from pypi-local to pypi-release repository. Build Promoted successfully*(build number 1)*.
              jfrog rt build-promote pokemon 1 pypi-release

*Step 7:* Uploaded the package pokemonscli-1.0.3.tar.gz to local repository with *build number 2* to pypi-local repository.
              jfrog rt bce pokemon 2
              jfrog rt upload --build-name pokemon --build-number 2 pokemonscli-1.0.3.tar.gz pypi-local/pokemon/

*Step 8:* Published the build info for package pokemonscli-1.0.3.tar.gz with *build number 2.*
              jfrog rt build-publish pokemon 2

*Step 9:* Tried Promoting the package from pypi-local to pypi-release repository with *build number 2*.
              jfrog rt build-promote pokemon 2 pypi-release
 Build promotion failed with “User doesn't have permissions to override 'pypi-release:proj1'. Needs delete permissions.”

*Error Snippet from Artifactory:*

2019-10-09 09:57:39,006 [http-nio-8081-exec-10] [ERROR] (o.a.r.s.m.BaseRepoPathMover:457) - User doesn't have permissions to override 'pypi-release:proj'. Needs delete permissions.

2019-10-09 09:57:39,031 [http-nio-8081-exec-10] [INFO ] (o.a.b.BuildPromotionHelper:214) - Skipping promotion status update: item promotion was completed with errors and warnings.

*Step 10:* Tried to Upload, Publish and Promote different packages mentioned below
 cran-0.1.14.tar.gz - *build number 3*
 cran-0.1.13.tar.gz - *build number 4*
 fastcluster-1.1.25.tar.gz - *build number 5*
 fastcluster-1.1.24.tar.gz - *build number 6*
 All the build promotions are successful (build number 3,4,5,6)

*Step 11:* Take the same package pokemonscli-1.0.3.tar.gz which was tried to promote with *build number 2* and upload it with a different *build number 7*
 *Step 12:* Publish the build info for pokemonscli-1.0.3.tar.gz with *build number 7*.
 *Step 13:* Tried Promoting the package from pypi-local to pypi-release repository with *build number 7*. Build promotion failed with

*“User doesn't have permissions to override 'pypi-release:proj1'. Needs delete permissions.”*

*Step 14:* Not able to Promote the package pokemonscli-1.0.3.tar.gz even with different build number (*As mentioned in step 13*).

*Step 15:* Could observe that only the second build promotion is failing for a non-admin user who does not have permissions to delete/overwrite in the pypi-release repository.

*Step 16:* Observed the same behaviour with older artifactory versions.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc03v4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Oct/19 4:28 PM;speechmatics-es;We are the initial reporter of this issue and have been able to reproduce the issue on the original repository used in initial report, using same packages: cran-0.1.13.tar.gz and cran-0.1.14.tar.gz","18/Nov/19 12:16 PM;arielk;I've had a deeper look into this. This is not related to build promotion or PyPi packages, and reproduces when simply trying to move via the UI.

In org.artifactory.repo.service.RepositoryServiceImpl#aggregatePathsToMove we aggregate paths to move, and check if the paths are under a parent node and if the paths to move are all the children of that parent, we trigger a move of the parent instead of each of the children.

In this case it doesn't work because the parent already exists in the target repository, hence overwrite permissions are needed.","25/Nov/19 3:09 PM;speechmatics-es;@ariel Many thanks for the investigation! The backend logic you described perfectly explains our observations. 

IMO since Artifactory clients don't manage folders directly during initial uploads - they get created automatically as needed - they should be equally ""invisible"" to move operations.","08/Jan/20 3:46 PM;speechmatics-es;Is there any progress on this bug? Has it been scheduled?","29/Jun/20 12:45 PM;cschyma;Also affects generic repositories and promoting / moving between them. That's quite a big issue to us as this forces us to give delete /overwrite permissions to release / production repositories which we'd rather like to keep at deploy permission only.","29/Jun/20 12:46 PM;cschyma;We are using Artifactory 6.18.1.",,,,,
MS SQL: Wrong collation check on startup,RTFACT-20303,80923,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,steffel,steffel,09/Oct/19 5:48 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.13.1,,,,,,,Database,,,,,,,0,,,,,,"When starting Artifactory, a log message appears
{noformat}
2019-10-09 07:08:32,319 [art-init] [ERROR] (o.a.s.d.v.GeneralValidator:45) - DATABASE SCHEME BAD COLLATION -> latin1_general_ci_as
{noformat}
 

This log message is wrong, because the database collation is correct:

 
{noformat}
SELECT CONVERT (varchar(256), DATABASEPROPERTYEX('artifactory','collation'));

Result: Latin1_General_CS_AI{noformat}
 

Did you query the sql server's default collation?
{noformat}
SELECT CONVERT (varchar(256), SERVERPROPERTY('collation'));

Result: Latin1_General_CI_AS{noformat}
 

Please change that check, because such a logging is highly confusing.

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc03ko:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Oct/19 8:14 AM;joe.henshaw;Duplicates RTFACT-20297.","06/Dec/19 6:09 AM;steffel;Issue can be closed",,,,,,,,,
API Artifact Version Search will only returns 1000 results back,RTFACT-20294,80885,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,08/Oct/19 6:41 AM,16/Feb/21 8:05 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The api Artifact Version Search will only returns 1000 results back.

 

Configuring the following system properties does not resolve the issue:

 

artifactory.search.UserQueryLimit=6000

artifactory.search.userSqlQueryLimit=6000

artifactory.search.maxResults=6000

 

Steps to reproduce:
 # Set up Artifactory version 6.12.1
 # Upload 4k+ maven packages (that follow the maven layout convention)

      3.Run the following rest api example:
         $ curl -uadmin:password ""http://localhost:8082/artifactory/api/search/versions?g=com.st-js&a=jquery&v=*&repos=maven""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc03cg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory remote repositories are making redundant GET requests when you enable Bypass HEAD requests option,RTFACT-20293,80851,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,07/Oct/19 8:42 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,NPM,Remote Repository ,,,,,,1,PB_Done,,,,,"Artifactory remote repositories are making redundant GET requests when you enable Bypass HEAD requests. For example with NPM remote repository if you enable Bypass HEAD requests in remote repo settings, the Remote repository ends up making two identical GET requests for the same package. The two GET requests are seen for both metadata and the actual tarball package as well. 

*Artifactory version - 6.X*

Please note that the two GET requests Artifactory is making cannot be seen in the Artifactory request logs. You will need a proxy server to capture the transactions from Artifactory to the upstream npmjs, which will show the two GET requests. I have attached a screenshot of the charles proxy console showing the redundant GET requests.

This issue affects anyone who is using Bypass HEAD requests option in the NPM remote repositories, as we are now sending double the number of requests to the upstream npmjs. 

Making two GET requests for the same binary is not good, as you could be in a situation where one GET request could hit a CDN cache that has the updated metadata and the second GET could hit a CDN cache that has older metadata. CDN caches being out of sync is something that can happen and lead to inconsistencies in Artifactory when making multiple GET requests for the same binary or metadata.

Steps to Reproduce:
 # Create a NPM remote repository. In Advanced settings page please enable Bypass Head requests
 # Now have a forward proxy, so that you can monitor every request going out of Artifactory.
 # Try installing a NPM package and you will notice in the Proxy logs that Artifactory is making two GET requests for metadata of the package and also for the actual tarball as well",,,,,,,,,,,,,,,,,,,"07/Oct/19 8:51 PM;nihalc@jfrog.com;proxy_dual_GET.jpg;https://www.jfrog.com/jira/secure/attachment/35518/proxy_dual_GET.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc035s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Oct/19 8:54 PM;nihalc@jfrog.com;This issue affects not just NPM remote repositories, but also other remote repository types within Artifactory.",,,,,,,,,,
GPG Created on Ubuntu fails for registering public trusted key for edge and ART,RTFACT-20292,80848,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,harshm,harshm,07/Oct/19 6:59 PM,16/Feb/21 8:12 AM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Artifactory Home,Distribution,,,,,,2,,,,,,"Issue: When GPG is created in Ubuntu for registering public trusted key for edge or art, it fails with the error ""Invalid input, key cannot be longer than 4000"".

Impacted components:
 # ART
 # Edge Nodes
 # Distribution
 # GPG
 # Trusted Key

Steps to reproduce:
 1. Created GPG in ubuntu using [https://www.jfrog.com/confluence/display/DIST/GPG+Signing]
 2. Tried adding in private key to distribution which is running in centos- works fine through the rest api call 
 3. Tried adding the public key through (UI and Rest API) to ART & edge running in Centos: fails with ""Invalid input, key cannot be longer than 4000""
 4. Note: Also tried adding the public key through (UI and Rest API) to ART & edge running in Ubuntu: fails with ""Invalid input, key cannot be longer than 4000""
 Expected: When trusted key is added to ART or edge it should register

Actual: We are getting error 

Work-Around: Created the GPG on Centos

 
 Note: Documentation clarification needs to be added to the wiki for customer reference.


 Screen shots attached:  !Screen Shot 2019-10-07 at 11.41.50 AM.png!

 

 ",,,,,,,,,,,,,,,,,,,"07/Oct/19 6:57 PM;harshm;Screen Shot 2019-10-07 at 11.41.50 AM.png;https://www.jfrog.com/jira/secure/attachment/35517/Screen+Shot+2019-10-07+at+11.41.50+AM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0354:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot delete repository,RTFACT-20287,80834,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,steffel,steffel,07/Oct/19 2:16 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.13.0,,,,,,,,,,,,,,0,,,,,,"When trying to delete a repository (e.g. ""example-repo-local""), an error message appears:

""Deleting repo 'example-repo-local' failed: Could not check if Repo path 'example-repo-local:' is related to a Release Bundle""

and an exception is logged in the logfile :

 
{noformat}
2019-10-07 16:15:13,790 [http-nio-8081-exec-4] [ERROR] (o.a.u.r.s.a.c.r.DeleteRepositoryConfigService:103) - Deleting repo 'example-repo-local' failed: Could not check if Repo path 'example-repo-local:' is related to a Release Bundle
org.jfrog.storage.StorageException: Could not check if Repo path 'example-repo-local:' is related to a Release Bundle
    at org.artifactory.release.bundle.ReleaseBundleServiceImpl.isRepoPathRelatedToBundle(ReleaseBundleServiceImpl.java:184)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
    at com.sun.proxy.$Proxy254.isRepoPathRelatedToBundle(Unknown Source)
    at org.artifactory.addon.release.bundle.interceptor.ReleaseBundleInterceptor.assertPathNotRelatedToBundle(ReleaseBundleInterceptor.java:53)
    at org.artifactory.addon.release.bundle.interceptor.ReleaseBundleInterceptor.assertDeleteRepoAllowed(ReleaseBundleInterceptor.java:44)
    at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.assertDeleteRepoAllowed(StorageInterceptorsImpl.java:90)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
    at com.sun.proxy.$Proxy169.assertDeleteRepoAllowed(Unknown Source)
    at org.artifactory.repo.service.RepositoryServiceImpl.removeRepository(RepositoryServiceImpl.java:2895)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
    at com.sun.proxy.$Proxy155.removeRepository(Unknown Source)
    at org.artifactory.ui.rest.service.admin.configuration.repositories.DeleteRepositoryConfigService.execute(DeleteRepositoryConfigService.java:95)
    at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
    at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:127)
    at org.artifactory.ui.rest.resource.admin.configuration.repositories.RepoConfigResource.deleteRepository(RepoConfigResource.java:172)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:566)
    at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
    at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
    at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
    at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
    at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
    at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
    at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
    at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
    at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
    at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
    at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
    at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
    at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
    at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
    at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
    at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: No column name was specified for column 1 of 'aa'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:262)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1621)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:592)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:522)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7194)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2935)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:248)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:223)
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:444)
    at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:184)
    at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:152)
    at org.artifactory.storage.db.bundle.dao.ArtifactBundlesDao.isDirectoryRelatedToBundle(ArtifactBundlesDao.java:347)
    at org.artifactory.release.bundle.ReleaseBundleServiceImpl.isRepoPathRelatedToBundle(ReleaseBundleServiceImpl.java:178)
    ... 97 common frames omitted
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc0320:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"07/Oct/19 2:43 PM;steffel;Additional info: stepping back to 6.12.2 works.","16/Oct/19 8:09 AM;joe.henshaw;Guessing you're using an MSSQL database too? See RTFACT-20296.","16/Oct/19 11:00 AM;steffel;Yes, I triggered that problem at your helpdesk and created this issue, a second issue was created, then.

You can close and link this issue.","06/Dec/19 6:09 AM;steffel;Issue can be closed",,,,,,,
Some artifactory logs do not have OpenTracing trace ID,RTFACT-20286,80829,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexd,alexd,07/Oct/19 1:28 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,Logging,,,,,,,0,,,,,,"From the sanity run, these are the logs lacking trace ID:

{code}
2019-10-03T09:11:34.830Z [jfrt ] [INFO ] [                ] [o.j.c.w.FileWatchingManager:75] [Thread-4            ] - Starting watch of folder configurations
2019-10-03T09:12:04.941Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  create for config 'artifactory.security.artifactory.key'
2019-10-03T09:14:05.947Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.md5sum.groovy was successful
2019-10-03T09:14:05.966Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.md5sum.groovy was successful
2019-10-03T09:14:05.980Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.md5sum.groovy was successful
2019-10-03T09:14:38.449Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.md5sum.groovy was successful
2019-10-03T09:14:38.462Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.md5sum.groovy was successful
2019-10-03T09:14:55.676Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.altAllResponses.groovy was successful
2019-10-03T09:14:55.692Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.altAllResponses.groovy was successful
2019-10-03T09:14:55.981Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.altAllResponses.groovy was successful
2019-10-03T09:14:55.995Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.altAllResponses.groovy was successful
2019-10-03T09:15:12.116Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.plugin.altAllResponses.groovy'
2019-10-03T09:15:12.147Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.altAllResponses.groovy was successful
2019-10-03T09:15:12.159Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.altAllResponses.groovy was successful
2019-10-03T09:19:10.005Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.plugin.promotions_test.groovy'
2019-10-03T09:19:10.020Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.promotions_test.groovy was successful
2019-10-03T09:19:10.030Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.promotions_test.groovy was successful
2019-10-03T09:19:10.039Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.promotions_test.groovy was successful
2019-10-03T09:21:03.055Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-03T09:21:03.089Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.9703.201910030921002912 was successful
2019-10-03T09:21:03.098Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.9703.201910030921002912 was successful
2019-10-03T09:21:03.107Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.9703.201910030921002912 was successful
2019-10-03T09:21:04.262Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.security.artifactory.key'
2019-10-03T09:21:04.278Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:04.287Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:04.296Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:07.073Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-03T09:21:07.108Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.4597.201910030921006939 was successful
2019-10-03T09:21:07.116Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.4597.201910030921006939 was successful
2019-10-03T09:21:07.123Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.4597.201910030921006939 was successful
2019-10-03T09:21:49.854Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:49.863Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:49.878Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:52.547Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-03T09:21:52.566Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key was successful
2019-10-03T09:21:52.567Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.security.artifactory.key.4821.201910030921052542'
2019-10-03T09:21:52.582Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.4821.201910030921052542 was successful
2019-10-03T09:21:52.589Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.4821.201910030921052542 was successful
2019-10-03T09:21:52.598Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.key.4821.201910030921052542 was successful
2019-10-03T09:27:02.343Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.security.artifactory.gpg.public'
2019-10-03T09:27:02.375Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.public was successful
2019-10-03T09:27:02.384Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.public was successful
2019-10-03T09:27:02.391Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.public was successful
2019-10-03T09:27:02.413Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.public was successful
2019-10-03T09:27:02.474Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.private was successful
2019-10-03T09:27:02.482Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.private was successful
2019-10-03T09:27:02.498Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.security.artifactory.gpg.private was successful
2019-10-03T09:28:19.622Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.isOfficial.groovy was successful
2019-10-03T09:28:19.630Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.plugin.isOfficial.groovy was successful
2019-10-03T09:30:49.347Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.cluster.license'
2019-10-03T09:30:49.955Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.cluster.license was successful
2019-10-03T09:30:51.888Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.cluster.license'
2019-10-03T09:30:52.084Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.cluster.license was successful
2019-10-03T09:30:53.007Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.cluster.license'
2019-10-03T09:30:53.613Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.cluster.license was successful
2019-10-03T09:30:54.888Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 5c259e558337]  detected local  modify for config 'artifactory.cluster.license'
2019-10-03T09:30:55.411Z [jfrt ] [INFO ] [                ] [p.HaPropagationServiceImpl:504] [Thread-4            ] - Propagation of artifactory.cluster.license was successful
2019-10-07T12:26:38.682Z [jfrt ] [INFO ] [                ] [o.j.c.w.FileWatchingManager:75] [Thread-4            ] - Starting watch of folder configurations
2019-10-07T12:27:15.797Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  create for config 'artifactory.security.artifactory.key'
2019-10-07T12:28:23.969Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.md5sum.groovy'
2019-10-07T12:28:25.568Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.md5sum.groovy'
2019-10-07T12:28:26.653Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.altAllResponses.groovy'
2019-10-07T12:28:29.105Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:29.231Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-07T12:28:29.234Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.9771.201910071228029221'
2019-10-07T12:28:29.242Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key'
2019-10-07T12:28:29.254Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:29.263Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:29.269Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:29.873Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.README.md'
2019-10-07ï¿½T12:28:29.879Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.altAllResponses.groovy'
2019-10-07T12:28:29.884Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.md5sum.groovy'
2019-10-07T12:28:39.826Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:39.861Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-07T12:28:39.881Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.9771.201910071228029221'
2019-10-07T12:28:39.890Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:39.969Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:28:40.409Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.README.md'
2019-10-07T12:28:40.416Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.altAllResponses.groovy'
2019-10-07T12:28:40.421Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.md5sum.groovy'
2019-10-07T12:29:14.641Z [jfrt ] [INFO ] [                ] [ifactoryApplicationContext:518] [ocalhost-startStop-4] - Artifactory application context set to NOT READY by destroy
2019-10-07T12:29:14.643Z [jfrt ] [INFO ] [                ] [.j.c.w.FileWatchingManager:127] [Thread-4            ] - Watch service ended on destroy
2019-10-07T12:29:14.643Z [jfrt ] [INFO ] [                ] [.j.c.w.FileWatchingManager:133] [Thread-4            ] - End watch of folder configurations
2019-10-07T12:29:14.649Z [jfrt ] [INFO ] [                ] [ifactoryApplicationContext:356] [ocalhost-startStop-4] - Destroying 57 Artifactory Spring Beans
2019-10-07T12:29:14.650Z [jfrt ] [INFO ] [                ] [askServiceDescriptorHandler:43] [ocalhost-startStop-4] - Removing all job Indexer from task service handler.
2019-10-07T12:29:14.659Z [jfrt ] [INFO ] [                ] [askServiceDescriptorHandler:43] [ocalhost-startStop-4] - Removing all job Garbage Collector from task service handler.
2019-10-07T12:29:14.662Z [jfrt ] [INFO ] [                ] [askServiceDescriptorHandler:43] [ocalhost-startStop-4] - Removing all job Artifact Cleanup from task service handler.
2019-10-07T12:29:14.665Z [jfrt ] [INFO ] [                ] [askServiceDescriptorHandler:43] [ocalhost-startStop-4] - Removing all job Backup from task service handler.
2019-10-07T12:29:14.678Z [jfrt ] [INFO ] [                ] [askServiceDescriptorHandler:43] [ocalhost-startStop-4] - Removing all job Replication from task service handler.
2019-10-07T12:29:14.757Z [jfrt ] [INFO ] [                ] [actorySchedulerFactoryBean:844] [ocalhost-startStop-4] - Shutting down Quartz Scheduler
2019-10-07T12:29:57.230Z [jfrt ] [INFO ] [                ] [o.j.c.w.FileWatchingManager:75] [Thread-4            ] - Starting watch of folder configurations
2019-10-07T12:30:18.847Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:30:36.867Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-07T12:30:36.874Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.8855.201910071230036863'
2019-10-07T12:30:38.149Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key'
2019-10-07T12:30:40.966Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-07T12:30:40.975Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.2995.201910071230040965'
2019-10-07T12:31:08.170Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key'
2019-10-07T12:31:10.676Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.artifactory.key'
2019-10-07T12:31:10.682Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.5681.201910071231010676'
2019-10-07T12:31:23.633Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:31:23.679Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.5681.201910071231010676'
2019-10-07T12:31:23.685Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  delete for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:31:23.689Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.8855.201910071230036863'
2019-10-07T12:31:23.694Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.2995.201910071230040965'
2019-10-07T12:31:23.699Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.9793.201910071228039861'
2019-10-07T12:31:23.704Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.key.9771.201910071228029221'
2019-10-07T12:31:23.742Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.access/access.admin.token'
2019-10-07T12:31:24.108Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.README.md'
2019-10-07T12:31:24.114Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.promotions_test.groovy'
2019-10-07T12:31:24.118Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.altAllResponses.groovy'
2019-10-07T12:31:24.123Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.plugin.md5sum.groovy'
2019-10-07T12:31:36.642Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.gpg.private'
2019-10-07T12:33:16.281Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.gpg.public'
2019-10-07T12:33:16.305Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.gpg.private'
2019-10-07T12:33:40.597Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.gpg.public'
2019-10-07T12:33:40.615Z [jfrt ] [INFO ] [                ] [o.j.c.w.ConfigWrapperImpl:504 ] [Thread-4            ] - [Node ID: 83b7004d5217]  detected local  modify for config 'artifactory.security.artifactory.gpg.private'
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc030w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Permission with / in it should return decoded,RTFACT-20259,80681,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,05/Oct/19 3:55 PM,16/Feb/21 8:16 AM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,permissions,REST API,,,,,,0,PB_Done,,,,,"Create a permission where the name has a slash (/). Fetching the list of permissions from the API returns a URI where the slash is not encoded.

 

Code snippet:

$user = ""admin""

$pass = ""XXX""

$encodedCreds = [System.Convert]::ToBase64String([System.Text.Encoding]::ASCII.GetBytes(""${user}:${pass}""))

$permissions = Invoke-RestMethod -Uri 'http://art.com6/artifactory/api/security/permissions' -Headers @{

    Authorization = ""Basic $encodedCreds""

}

foreach ($permission in $permissions) {

    Write-Host $permission.uri

}

 

Returns:

http://lin2dv2do36:80/artifactory/api/security/permissions/Any%20Remote

http://lin2dv2do36:80/artifactory/api/security/permissions/*A/B*

[http://lin2dv2do36:80/artifactory/api/security/permissions/Anything|http://lin2dv2do36/artifactory/api/security/permissions/Anything]

 

Should return:

http://lin2dv2do36/artifactory/api/security/permissions/Any+Remote

http://lin2dv2do36/artifactory/api/security/permissions/A%2fB

[http://lin2dv2do36/artifactory/api/security/permissions/Anything]

 

The impact of this bug is I cannot use the returned uri to follow to get more details.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc02dc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Updating contentSynchronisation property values via REST API resets the value of any properties not included in the payload to false,RTFACT-20251,80428,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joe.henshaw,joe.henshaw,03/Oct/19 2:29 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,0,,,,,,"h3. Problem
When updating nested properties relating to smart remote repositories via REST API, if you omit any of nested properties from the payload these will get reset to false.

h3. Steps to reproduce
# For a given smart remote repository, enable contentSynchronisation and any (or all) of the other nested properties (properties, statistics, source absence detection...) - can be done via UI or REST API

{code:json}
{
   contentSynchronisation: { ""enabled"" : true, ""properties"" : { ""enabled"" : true }, ""statistics"" : { ""enabled"" : true } }
}
{code}
# POST to the REST API repositories endpoint for the repository, only specifying one of the nested properties, e.g. to disable synchronisation of properties:

{code:json}
{
   contentSynchronisation: { ""properties"" : { ""enabled"" : false } }
}
{code}

h3. Expected behaviour 
* Only the value for the nested property gets updated to the specified value - e.g. above sync properties = false
* Values for properties not provided remain unchanged (e.g. contentSynchronisation enabled = true, statistics enabled = true)

h3. Actual behaviour
* The value for the provided nested property gets updated successfully to the value (as expected)
*  Values for properties not included in the payload get reset to false. Includes contentSynchronisation itself if it is omitted.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc021s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Oct/19 7:08 AM;joe.henshaw;RESTful API... use PATCH instead. My bad.","11/Oct/19 7:20 AM;joe.henshaw;405 method not allowed on PATCH. Looks like this should be an ""Improvement"" issue type as opposed to bug.",,,,,,,,,
XRay Permissions page hangs on Save Changes,RTFACT-20239,79974,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Stefan_Kraus,Stefan_Kraus,02/Oct/19 2:44 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"### Steps to reproduce

1. Go to XRay as an admin user, log in, and go to the Admin > Security > Permissions page
2. edit an existing permission, click ""Save Changes""

I get a loading spinner that hangs until I close the page. If I do close the page or go back, the permission is updated. 

In the console, I see : 
```
Request URL:
[https://workivaeast-xray.jfrog.io/ui/permissions/developer]
```
As the request that hangs indefinitely. 

In the console, I see a number of errors, the last of which is 
```
Failed to load resource: the server responded with a status of 500 (Internal Server Error)
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc01aw:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker push failed with 408 error,RTFACT-20220,79351,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,snowsky,snowsky,27/Sep/19 8:25 PM,05/Jan/21 11:22 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Tried docker hub and it worked but failed when trying to push docker image to Artifactory. The error is as below:

 

error parsing HTTP 408 response body: invalid character '<' looking for beginning of value: ""<!DOCTYPE HTML PUBLIC \""-//IETF//DTD HTML 2.0//EN\"">\n<html><head>\n<title>408 Request Timeout</title>\n</head><body>\n<h1>Request Timeout</h1>\n<p>Server timeout waiting for the HTTP request from the client.</p>\n</body></html>\n""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc000w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Preventing stale metadata in remotes ,RTFACT-20203,79226,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,loreny,loreny,26/Sep/19 2:10 AM,16/Feb/21 8:45 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Today, Artifactory sends two requests when trying to update metadata; a HEAD request, followed by the actual GET request. This can occasionally cause staleness in metadata, as the upstream source may have multiple caches that are load balanced in some manner; i.e. Artifactory does the HEAD against cache 1, and the GET against cache 2. 

If the files and headers are updated in cache 1, but not cache 2, then when a request comes into the remote repo, the head request has updated last_modified, so artifactory will update that it has old metadata, but the GET on cache 2 will retrieve the same old metadata. Then even if cache 2 updates, artifactory thinks that it has the updated package.json, and will not reach out to get the package.json again.

This can be worked around with 'bypass head requests' but will increase bandwidth consumption.

This is a problematic scenario when the caches can have a skew between them (which happens from time to time). 

We can try to protect against this by having an option to re-use the connection; and/or verify the etag headers of back to back requests for upstream files, and making sure that everything is aligned tween the last-modified and checksum.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z008a8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
wrong listRemoteFolderItems returned for smart remote Helm,RTFACT-20200,79211,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,barh,arielk,arielk,25/Sep/19 4:17 PM,16/Feb/21 8:47 AM,18/Feb/21 8:59 AM,,6.11.3,6.12.2,,,,,,,,,,,,,1,,,,,,"*+Steps to reproduce:+*

1. Create a HELM smart remote repository to another HELM repository in another Artifactory server.
2. Make sure ""List remote folder items"" is *NOT* marked.
3. Open again the repository configurations in the UI, see it is still not marked.

4. In the Config Descriptor you'll see:

{code:java}
            <listRemoteFolderItems>true</listRemoteFolderItems>
{code}

Alternatively you can also see:

{code:java}
curl -uadmin:password http://mill.jfrog.info:12302/artifactory/api/repositories/helm-remote -vvL  
*   Trying 104.196.245.50...
* TCP_NODELAY set
* Connected to mill.jfrog.info (104.196.245.50) port 12302 (#0)
* Server auth using Basic with user 'admin'
> GET /artifactory/api/repositories/helm-remote HTTP/1.1
> Host: mill.jfrog.info:12302
> Authorization: Basic YWRtaW46cGFzc3dvcmQ=
> User-Agent: curl/7.54.0
> Accept: */*
>
< HTTP/1.1 200 OK
< Server: Artifactory/6.12.2
< X-Artifactory-Id: 30a4b08d958ffe3a:-3e1e090e:16d6929f59f:-8000
< Cache-Control: no-store
< Content-Type: application/vnd.org.jfrog.artifactory.repositories.RemoteRepositoryConfiguration+json
< Transfer-Encoding: chunked
< Date: Wed, 25 Sep 2019 16:09:25 GMT
<
{
  ""key"" : ""helm-remote"",
  ""packageType"" : ""helm"",
  ""description"" : """",
  ""notes"" : """",
  ""includesPattern"" : ""**/*"",
  ""excludesPattern"" : """",
  ""repoLayoutRef"" : ""simple-default"",
  ""enableComposerSupport"" : false,
  ""enableNuGetSupport"" : false,
  ""enableGemsSupport"" : false,
  ""enableNpmSupport"" : false,
  ""enableBowerSupport"" : false,
  ""enableCocoaPodsSupport"" : false,
  ""enableConanSupport"" : false,
  ""enableDebianSupport"" : false,
  ""debianTrivialLayout"" : false,
  ""enablePypiSupport"" : false,
  ""enablePuppetSupport"" : false,
  ""enableDockerSupport"" : false,
  ""dockerApiVersion"" : ""V2"",
  ""forceNugetAuthentication"" : false,
  ""enableVagrantSupport"" : false,
  ""enableGitLfsSupport"" : false,
  ""enableDistRepoSupport"" : false,
  ""url"" : ""http://mill.jfrog.info:12318/artifactory/helm-local"",
  ""username"" : ""admin"",
  ""password"" : ""AM.22NJj.AES128.2dqFUqy6csgSNJZKAmPBtspHYHXzYLfvnnencAYE57mS3QJ1"",
  ""handleReleases"" : true,
  ""handleSnapshots"" : true,
  ""suppressPomConsistencyChecks"" : true,
  ""remoteRepoChecksumPolicyType"" : ""generate-if-absent"",
  ""hardFail"" : false,
  ""offline"" : false,
  ""blackedOut"" : false,
  ""storeArtifactsLocally"" : true,
  ""socketTimeoutMillis"" : 15000,
  ""localAddress"" : """",
  ""retrievalCachePeriodSecs"" : 7200,
  ""assumedOfflinePeriodSecs"" : 300,
  ""missedRetrievalCachePeriodSecs"" : 1800,
  ""unusedArtifactsCleanupPeriodHours"" : 0,
  ""fetchJarsEagerly"" : false,
  ""fetchSourcesEagerly"" : false,
  ""shareConfiguration"" : false,
  ""synchronizeProperties"" : false,
  ""maxUniqueSnapshots"" : 0,
  ""maxUniqueTags"" : 0,
  ""propertySets"" : [ ],
  ""archiveBrowsingEnabled"" : false,
  ""listRemoteFolderItems"" : true,
  ""rejectInvalidJars"" : false,
  ""allowAnyHostAuth"" : false,
  ""enableCookieManagement"" : false,
  ""enableTokenAuthentication"" : false,
  ""propagateQueryParams"" : false,
  ""blockMismatchingMimeTypes"" : true,
  ""mismatchingMimeTypesOverrideList"" : """",
  ""bypassHeadRequests"" : false,
  ""contentSynchronisation"" : {
    ""enabled"" : true,
    ""statistics"" : {
      ""enabled"" : false
    },
    ""properties"" : {
      ""enabled"" : false
    },
    ""source"" : {
      ""originAbsenceDetection"" : false
    }
  },
  ""externalDependenciesEnabled"" : false,
  ""xrayIndex"" : false,
  ""downloadRedirect"" : false,
  ""enabledChefSupport"" : false,
  ""rclass"" : ""remote""
* Connection #0 to host mill.jfrog.info left intact
}%
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0086w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Dec/19 8:34 AM;matang;This is the request for creating a smart repo, {color:#59afe1}{{listRemoteFolderItems}}{color} isn't sending in the request but appear in the config descriptor as {color:#f79232}{{true}}{color} even when it's not appear in the request.
{code:java}
""typeSpecific"": { ""repoType"": ""Helm"", ""icon"": ""helm"", ""text"": ""Helm"", ""virtualRetrievalCachePeriodSecs"": 7200, ""url"": ""https://storage.googleapis.com/kubernetes-charts"" },
{code}
 

When I send request with _*List Remote Folder Items*_ marked the request looks like:
{code:java}
""typeSpecific"": { ""repoType"": ""Helm"", ""virtualRetrievalCachePeriodSecs"": 7200, ""url"": ""https://storage.googleapis.com/kubernetes-charts"", ""text"": ""Helm"", ""icon"": ""helm"", ""listRemoteFolderItems"": true }
{code}
 

But after I open the repo after that the response from the sever doesn't include the {color:#59afe1}{{listRemoteFolderItems}}{color} in the response:
{code:java}
""typeSpecific"": { ""repoType"": ""Helm"", ""virtualRetrievalCachePeriodSecs"": 7200, ""url"": ""https://storage.googleapis.com/kubernetes-charts"" }
{code}
This is the reason why I think the problem is in the server side.
  
  ",,,,,,,,,,
Not able to connect jfrog artifactory from linux client,RTFACT-20197,79207,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,reddylnb,reddylnb,25/Sep/19 2:24 PM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,Artifactory Home,,,,,,,0,,,,,,"Hi,

  i have installed jfrog-artifactory-oss-6.9.1 (.zip) version on RHEL 6.10. i am able to upload my artifacts successfully without any issues. Also i have created maven repository to setup my build process. 

i am able to connect from windows client machine without any issues.

We are facing issues while connecting from RHEL 6.10 client (which i am running actual builds). It throws a below error message.

""[ERROR] Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project portal: 
Execution default-clean of goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean failed: Plugin org.apache.maven.plugins:maven-clean-plugin:2.5 or 
one of its dependencies could not be resolved: Cannot access central (http://myjfrog.com/repo) in offline mode and the artifact org.codehaus.plexus:plexus-utils:jar:1.1 has not been downloaded from it before. -> [Help 1""

 

Appreciate any suggestions or comments to resolve this issue.

 

Not sure whether rpm instalaltion will help to resolve this issue ?. is possible to install jfrog rpm package on custom path location instead of default path (/opt/jfrog/) ?

 ","jfrog-artifactory-oss-6.9.1

RHEL 6.10

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z00860:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Sep/19 2:02 PM;reddylnb;any luck ?",,,,,,,,,,
ArtifactoryServer.publishBuildInfo now requires to run on a node,RTFACT-20183,79066,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,franknarf8,franknarf8,24/Sep/19 1:54 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Home,Build Info,CI,,,,,2,jenkins,,,,,"Hello,

This is regarding the jenkinsci/artifactory-plugin.

I used to be able to call `ArtifactoryServer.publishBuildInfo` on without mentioning a node or on a node with an empty workspace. I updated our Artifactory Jenkins plugin, but now we have the following error popping up : 
```
org.jenkinsci.plugins.workflow.steps.MissingContextVariableException: Required context class hudson.FilePath is missing
Perhaps you forgot to surround the code with a step that provides this, such as: node	at [...]
org.jfrog.hudson.pipeline.common.types.ArtifactoryServer.publishBuildInfo(ArtifactoryServer.java:227)
```

I think this new behavior may have originated with the following commit (I think) : https://github.com/jenkinsci/artifactory-plugin/commit/5bd26c2cac41ebdcc07d5aa4eca2ac5883c2ab69#diff-e1a12dbfddc617d9c9d5d39b4b2a5039

It is it an intended behavior, or a regression?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z007b4:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Apr/20 1:31 PM;christopher.nicoll;I have seen the same issue and it is complicating our plugin upgrade path. We are stuck on 3.3.2 for the time being. Would be really good to know if this is a regression or the intended behaviour.

 

Can we get this ticket moved to the Jenkins Artifactory Plug-in project so it gets the visibility it needs ",,,,,,,,,,
403 Forbidden using DELETE Invoke-RestMethod/Invoke-WebRequest,RTFACT-20175,79034,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,johngriffin,johngriffin,23/Sep/19 11:12 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,REST API,,,,,,,0,delete,,,,,"Unable to delete a file using the Rest API from a Powershell script. The user has permission to delete from the repository and is able to delete files from the repositroy using the UI. However, a (403) Forbidden is returned when deleteing file through the API.

 
 $credentials = New-Object System.Management.Automation.PSCredential ($user_name, $password)  

Invoke-RestMethod -Method Delete -Uri ""http://10.2.94.239:8081/artifactory/pla-nuget-dev-local/pla.1.0.0.219.nupkg"" -Credential $credentials
  
 Invoke-RestMethod : The remote server returned an error: (403) Forbidden.
 At C:\PowerShell\ShowArtifactoryUser.ps1:13 char:1
 + Invoke-RestMethod -Method Delete -Uri ""http://10.2.94.239:8081/artifa ...
 + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 + CategoryInfo : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-RestMethod], WebException
 + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeRestMethodCommand

 

UPDATE:

Looking at the artifactory logs it appears that the credentials are not being passed as expected. The logs show that the delete api is being made by anonymous. Artifactory logs here:

2019-09-23 14:17:09,527 [http-nio-8081-exec-8731] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 403: Not enough permissions to delete/overwrite artifact 'pla-nuget-dev-local:pla-testArtifactoryRepo.1.0.0.221.nupkg' (user 'anonymous' needs DELETE permission).

 

RESOLVED:

I needed to use the -Header for authentication instead of -Credentials with Invoke-RestMethod",Windows,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0074w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Jun/20 11:14 PM;tnguyen@kofax.com;I can't get this to work.  Can someone post what the Header looks like?  The above mentioend -Header, but the MS docs states -Headers.  However, i tried both and am not sure what my header variables should be:

$myHeaders = @{
 'userid' = 'admin'istrator'
 'password' = 'mypassword'
 }

I tried username, userId, user... I also tried password, token... all results in the Artifactory log saying the user is 'anonymous'.

 

Can someone post an example that works?

 

 ","23/Jun/20 11:09 PM;tnguyen@kofax.com;Figured it out myself with some google-fu..

 

I could not use then token but an API key, and the respective header.. here's my header that was passed, along with the invoke command, which was in a loop:

 

$myHeaders = @\{'X-JFrog-Art-Api' = '<myAPIKey>'}

$results = Invoke-RestMethod -Method DELETE -Uri $libPath$count -Headers $myHeaders",,,,,,,,,
Artifactory Pro is taking 25% CPU seeming doing nothing,RTFACT-20172,79016,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vagrawal,vagrawal,23/Sep/19 12:47 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,I'm looking for steps to capture debugging information. With distroless image I'm unsure what tools and steps need to be executed to capture meaningful debugging information.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0070w:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Oct/19 2:00 PM;vagrawal;[~Nimerb] could you provide reasons why would this not be looked at or implemented?

First, I'm asking what steps I need to carry out to get more information. Artifactory is hogging 25% CPU on this machine, and we need to get to the bottom of this issue.

Why was the issue closed? What more information was JFrog looking for from me?",,,,,,,,,,
Unable to run top in artifactory container,RTFACT-20171,79015,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vagrawal,vagrawal,23/Sep/19 12:45 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"We run Artifactory pro 6.12.2 in a docker container following the steps at -

[https://www.jfrog.com/confluence/display/RTF/Installing+with+Docker]

When we bash into the container, we're unable to run top command inside it.

artifactory@9c4e618c83a3:/opt/jfrog/artifactory/logs$ top
*top: error while loading shared libraries: libncurses.so.6: cannot open shared object file: No such file or directory*
artifactory@9c4e618c83a3:/opt/jfrog/artifactory/logs$

Info from artifactory.log -

 Artifactory Info
 ========================
   artifactory.runMode.test                                              | false
   artifactory.runMode.qa                                                | false
   artifactory.runMode.dev                                               | false
   artifactory.runMode.devHa                                             | false
   artifactory.version                                                   | 6.12.2
   artifactory.revision                                                  | 61202900
   artifactory.buildNumber                                               | 2507

 

I'm trying to run top as our instance is consuming 25+% CPU consistently.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0070o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Running Artifactory in Docker can prevent creation of _pre directory,RTFACT-20166,78967,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,austinshalit,austinshalit,21/Sep/19 3:15 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Docker,Docker Image,Filestore,,,,,0,,,,,,"When rebooting Artifactory from a docker container, Artifactory claims that it fails to create the `_pre` directory. When exploring the file system, the directory already exists. Maybe Artifactory should check if the directory exists already and remove it if necessary.

 

Log: [https://gist.github.com/AustinShalit/6c00067147e3d575b256fa8d7fa3c1ae] 

binarystore.xml
{code:java}
<config version=""1"">
  <chain template=""cache-fs""/>
  <provider id=""file-system"" type=""file-system"">
    <fileStoreDir>/var/opt/jfrog/artifactory-filestore</fileStoreDir>
  </provider>
</config>{code}
 

 ","Ubuntu 18.04.3 LTS

 

Client: Docker Engine - Community
 Version: 19.03.2
 API version: 1.40
 Go version: go1.12.8
 Git commit: 6a30dfc
 Built: Thu Aug 29 05:29:11 2019
 OS/Arch: linux/amd64
 Experimental: false

 

Artifactory OSS 6.12.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z006q8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
.conda files missing from repository,RTFACT-20161,78936,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,chriswilkes33,chriswilkes33,20/Sep/19 7:06 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.10.2,,,,,,,Conda,,,,,,,1,conda,,,,,"Files like this one: [https://repo.continuum.io/pkgs/main/linux-64/jinja2-2.10.1-py27_0.conda]

do not show up in the index unless explicitly requested manually with a default conda remote repository set up

 

The following link talks about the changes within the conda ecosystem away from .tar to the .conda files","RHEL 8, Artifactory Pro 6.10.2, Conda type remote repository set up with default settings.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z006jc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory does not expands the jar/war file if executable tag is set to true in pom.xml,RTFACT-20158,78927,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muhammedk,muhammedk,20/Sep/19 10:46 AM,16/Feb/21 8:57 AM,18/Feb/21 8:59 AM,,6.12.2,6.17.0,6.9.0,,,,,,,,,,,,1,,,,,,"In pom.xml, when executable is set to true and jar is deployed to Artifactory. Artifactory does not allow us to expand the jar. However when executable is set to false, the jar/war files can be expanded.

Steps to reproduce:
 # Build a jar/war file by setting the <executable> tag to true in pom.xml
 # Deploy the jar/war to Artifactory
 # Artifactory does not allow us to expand the jar/war file

!executable tag.png!

 

 Due to this behaviour, Xray is not able to scan the dependencies present in the jar/war.",,,,,,,,,,,,,,,,,,,"20/Sep/19 10:46 AM;muhammedk;executable tag.png;https://www.jfrog.com/jira/secure/attachment/34599/executable+tag.png","15/Oct/19 11:44 AM;tamirh;pom.xml;https://www.jfrog.com/jira/secure/attachment/35719/pom.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z006hc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"RPM metadata files getting deleted from both source and target Artifactory following ""sync delete"" replication",RTFACT-20148,78881,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kfira,kfira,19/Sep/19 12:16 PM,16/Feb/21 9:13 AM,18/Feb/21 8:59 AM,,,,,,,,,Replication,RPM,,,,,,0,,,,,,"Tested version: 6.12

From Artifactory 6.4 metadata files are no longer being replicated and will be calculated by the target instance itself.

 

In case deleting the ""repodata"" folder from the source Artifactory it will deleted from the target Artifactory as well. However, in case triggering ""Recalculate index"" on the source the metadata files will be generated on the source only and on the target side only the ""repodata"" folder will be created without the metadata files itself.

 

To resolve this behavior it will be required to trigger ""Recalculate index"" on the target instance.

 

As metadata files are not longer being replicated it should not be deleted as well following the replication process or otherwise regenerate in case of deletion.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z00674:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Delete of multiple release bundles  when using Derby DB may fail with DB deadlock.,RTFACT-20147,78875,Bug,Reopened,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,omriz,yehudah,yehudah,19/Sep/19 10:53 AM,17/Feb/21 11:47 PM,18/Feb/21 8:59 AM,,6.20.1,,,,,6.23.7,7.12.3,Release bundle,,,,,,,0,PB_Done,,,,,"Delete of multiple release bundles when using Derby DB may fail with DB deadlock.

Steps to reproduce:
1. Setup an environment with edge node that use Derby DB.
2. Distribute ~11 release bundle to the edge node (when every bundle include ~50 artifacts).
3. Delete all the distributed release bundles at the same time.

Example for stack trace:

{code:java}
2019-09-19 09:26:43,931 [http-nio-8081-exec-17] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null
java.lang.reflect.UndeclaredThrowableException: null
	at com.sun.proxy.$Proxy94.next(Unknown Source)
	at org.artifactory.storage.db.bundle.dao.ArtifactBundlesDao.getBundlesRelatedToRepoPath(ArtifactBundlesDao.java:331)
	at org.artifactory.release.bundle.ReleaseBundleServiceImpl.getBundlesRelatedToRepoPath(ReleaseBundleServiceImpl.java:175)
	at jdk.internal.reflect.GeneratedMethodAccessor331.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy253.getBundlesRelatedToRepoPath(Unknown Source)
	at org.artifactory.addon.release.bundle.interceptor.ReleaseBundleInterceptor.assertPathNotRelatedToBundle(ReleaseBundleInterceptor.java:45)
	at org.artifactory.addon.release.bundle.interceptor.ReleaseBundleInterceptor.assertDeletePathAllowed(ReleaseBundleInterceptor.java:35)
	at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.assertDeletePathAllowed(StorageInterceptorsImpl.java:81)
	at jdk.internal.reflect.GeneratedMethodAccessor330.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy172.assertDeletePathAllowed(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.fireAssertDeletePathAllowedEvent(RepositoryServiceImpl.java:2201)
	at org.artifactory.repo.service.RepositoryServiceImpl.assertDelete(RepositoryServiceImpl.java:2196)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1301)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1286)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1281)
	at org.artifactory.repo.service.RepositoryServiceImpl.undeploy(RepositoryServiceImpl.java:1402)
	at jdk.internal.reflect.GeneratedMethodAccessor442.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:78)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy159.undeploy(Unknown Source)
	at org.artifactory.release.bundle.InternalReleaseBundleServiceImpl.deleteBundleContent(InternalReleaseBundleServiceImpl.java:80)
	at org.artifactory.release.bundle.InternalReleaseBundleServiceImpl.deleteBundleInternal(InternalReleaseBundleServiceImpl.java:48)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:78)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy252.deleteBundleInternal(Unknown Source)
	at org.artifactory.release.bundle.ReleaseBundleServiceImpl.deleteBundle(ReleaseBundleServiceImpl.java:138)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
	at com.sun.proxy.$Proxy253.deleteBundle(Unknown Source)
	at org.artifactory.addon.release.bundle.ReleaseBundleAddonImpl.deleteReleaseBundle(ReleaseBundleAddonImpl.java:889)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
	at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
	at com.sun.proxy.$Proxy321.deleteReleaseBundle(Unknown Source)
	at org.artifactory.rest.resource.release.ReleaseBundleResource.deleteBundle(ReleaseBundleResource.java:193)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.lambda$doFilter$1(ArtifactoryAuthenticationFilterChain.java:135)
	at org.artifactory.webapp.servlet.authentication.PropsAuthenticationFilter.doFilter(PropsAuthenticationFilter.java:127)
	at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.doFilter(ArtifactoryAuthenticationFilterChain.java:171)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:311)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.reflect.InvocationTargetException: null
	at jdk.internal.reflect.GeneratedMethodAccessor68.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.jfrog.storage.wrapper.ResultSetWrapper.invoke(ResultSetWrapper.java:77)
	... 143 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: A lock could not be obtained due to a deadlock, cycle of locks and waiters is:
Lock : ROW, BUNDLE_FILES, (58,158)
  Waiting XID : {177105, S} , APP, SELECT id, name, version from artifact_bundles where id IN (SELECT DISTINCT bundle_id FROM bundle_files WHERE repo_path LIKE ?)
  Granted XID : {177099, X}
Lock : ROW, BUNDLE_FILES, (50,104)
  Waiting XID : {177099, S} , APP, SELECT id, name, version from artifact_bundles where id IN (SELECT DISTINCT bundle_id FROM bundle_files WHERE repo_path LIKE ?)
  Granted XID : {177105, X}
. The selected victim is XID : 177105.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedResultSet.closeOnTransactionError(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source)
	... 147 common frames omitted
Caused by: org.apache.derby.iapi.error.StandardException: A lock could not be obtained due to a deadlock, cycle of locks and waiters is:
Lock : ROW, BUNDLE_FILES, (58,158)
  Waiting XID : {177105, S} , APP, SELECT id, name, version from artifact_bundles where id IN (SELECT DISTINCT bundle_id FROM bundle_files WHERE repo_path LIKE ?)
  Granted XID : {177099, X}
Lock : ROW, BUNDLE_FILES, (50,104)
  Waiting XID : {177099, S} , APP, SELECT id, name, version from artifact_bundles where id IN (SELECT DISTINCT bundle_id FROM bundle_files WHERE repo_path LIKE ?)
  Granted XID : {177105, X}
. The selected victim is XID : 177105.
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.impl.services.locks.Deadlock.buildException(Unknown Source)
	at org.apache.derby.impl.services.locks.ConcurrentLockSet.lockObject(Unknown Source)
	at org.apache.derby.impl.services.locks.AbstractPool.lockObject(Unknown Source)
	at org.apache.derby.impl.services.locks.ConcurrentPool.lockObject(Unknown Source)
	at org.apache.derby.impl.store.raw.xact.RowLocking2.lockRecordForRead(Unknown Source)
	at org.apache.derby.impl.store.access.heap.HeapController.lockRow(Unknown Source)
	at org.apache.derby.impl.store.access.heap.HeapController.lockRow(Unknown Source)
	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockRowOnPage(Unknown Source)
	at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScanRow(Unknown Source)
	at org.apache.derby.impl.store.access.btree.index.B2IRowLockingRR.lockScanRow(Unknown Source)
	at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(Unknown Source)
	at org.apache.derby.impl.store.access.btree.BTreeScan.fetchNext(Unknown Source)
	at org.apache.derby.impl.sql.execute.TableScanResultSet.loopControl(Unknown Source)
	at org.apache.derby.impl.sql.execute.TableScanResultSet.getNextRowCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.IndexRowToBaseRowResultSet.getNextRowCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.NestedLoopJoinResultSet.getNextRowCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source)
	... 149 common frames omitted
{code}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc53l3:",,,Yes,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Exclude patterns of Chef remote repositories does not block ""search"" requests for packages that match the exclude patterns.",RTFACT-20145,78868,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adiv,adiv,19/Sep/19 9:33 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Exclude patterns of Chef remote repositories does not block ""{color:#14892c}search{color}"" requests for packages that match the exclude patterns.

Steps to reproduce:
 * Configure Chef to work with Artifactory.
 * Configure the following exclude pattern on the ""chef-remote"" repository - ""{color:#14892c}**/*jenkins**{color}"".
 * You will not be able to download the ""{color:#14892c}jenkins{color}"" package as expected using the command ""{color:#59afe1}_knife artifactory download jenkins_{color}"", but you will be able to search for it using the command ""{color:#59afe1}_knife artifactory search jenkins_{color}"".

The ""search"" command should also be blocked for artifacts that match the exclude patterns.",,,,,,,,,,,,,,,,RTFACT-20647,,,"19/Sep/19 9:48 AM;adiv;1.png;https://www.jfrog.com/jira/secure/attachment/34587/1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z00648:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
SQL Query does not have escape character for underscore & percent symbol,RTFACT-20141,78837,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,sanjeevk,sanjeevk,18/Sep/19 6:18 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.12.2,,,,,,,Database,,,,,,,0,,,,,,"If the node_path has characters like '_' or '%' in their name, it needs to be escaped in LIKE clause.

 

One of the customer has 2 different directories, their names are identical except for a single difference *(19.40_beta1 & 19.40 beta1)*

 

The SQL to calculate the artifact count & size is not returning correct value for '*19.40_beta1'*

The value is including ALL files from other directory '*19.40 beta1'*

 

*I have attached a screen-shot (Extra-Unwanted-Results.png) to show the additional rows from other directory '**19.40 beta1'***

*I have also attached a screen-shot (Escape-Character-Results.png) to show the correct output for '**19.40_beta1'.* This SQL has the escape character '\' preceding the '_' in LIKE clause.

 

Documentation for the default escape character can be found at [http://www.dba-oracle.com/t_special_characters_like_sql_query.htm] ",,,,,,,,,,,,,,,,,,,"25/Sep/19 9:16 PM;sanjeevk;Application-UI-Issue.png;https://www.jfrog.com/jira/secure/attachment/34668/Application-UI-Issue.png","18/Sep/19 6:19 PM;sanjeevk;Escape-Character-Results.png;https://www.jfrog.com/jira/secure/attachment/34573/Escape-Character-Results.png","18/Sep/19 6:20 PM;sanjeevk;Extra-Unwanted-Results.png;https://www.jfrog.com/jira/secure/attachment/34574/Extra-Unwanted-Results.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z005xs:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory doesn't index npm packages if there is an emoji in the ""keywords"" section of the package.json file ",RTFACT-20132,78760,Bug,Pending QA,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,michaelak,mariy,mariy,17/Sep/19 9:24 PM,16/Feb/21 9:55 AM,18/Feb/21 8:59 AM,,7.2.1,,,,,,,,,,,,,,1,,,,,,"Artifactory doesn't index npm packages if there is an emoji in the ""keywords"" section of the package.json file. 

Steps to reproduce: 

1. Set up Artifactory 6.12.2 with MySQL as the DB

2. Create an NPM repo
3. Upload package with an emoji in the description of the package.json",,,,,,,,,,,,,RTFACT-22705,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z005h4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"31/Jan/21 3:19 PM;nadavy;main issue resolved in RTFACT-22705. fixing PyPI to validate all fields as well.",,,,,,,,,,
DevPi +simple fails due to double slash,RTFACT-20131,78757,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,17/Sep/19 9:04 PM,16/Feb/21 10:00 AM,18/Feb/21 8:59 AM,,6.10.2,6.12.2,,,,,,PyPI,,,,,,,0,,,,,," Steps to reproduce:
 # Create a remote repository going to the public m.devpi.net remote endpoint
 # Attempt any pip install command against the repository, observe the failure

Through the HTTP debug loggers, it looks like an extra slash is being inserted, regardless of the URL in use:

2019-09-17 21:50:43,147 [http-nio-8081-exec-5] [DEBUG] (o.a.h.i.c.PoolingHttpClientConnectionManager:255) - Connection request: [route:

{s}

->[https://m.devpi.net:443|https://m.devpi.net/][total|https://m.devpi.net:443][total/] kept alive: 1; route allocated: 1 of 50; total allocated: 1 of 50]

 

2019-09-17 21:50:43,150 [http-nio-8081-exec-5] [DEBUG] (o.a.h.i.e.MainClientExec:256) - Executing request HEAD /root/pypi//+simple HTTP/1.1

 

2019-09-17 21:50:43,157 [http-nio-8081-exec-5] [DEBUG] (o.a.h.wire          :73) - http-outgoing-42 >> ""HEAD /root/pypi//+simple HTTP/1.1[\r][\n]""

 

2019-09-17 21:50:43,333 [http-nio-8081-exec-5] [DEBUG] (o.a.h.wire          :73) - http-outgoing-42 << ""HTTP/1.1 404 Not Found[\r][\n]""

 

This is a problem as it means remote DevPi repositories will not work. This will block some users that rely on DevPi repositories.

 

*Update:* After some troubleshooting, it looks like remote repositories need to use ""+simple"" to reach the correct context. Going to ""simple"" causes the above behavior, which is a less severe bug. Users need to point their Pip clients to ""+simple"" on remote PyPi repositories that use DevPi.

 ",,,,,,,,,,,,,,,,,,,"17/Sep/19 9:04 PM;patrickr;Screen Shot 2019-09-17 at 2.04.34 PM.png;https://www.jfrog.com/jira/secure/attachment/34558/Screen+Shot+2019-09-17+at+2.04.34+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z005gg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
'Minimum Direct Cloud Storage Download Size' field should not be shown with local storage,RTFACT-20124,78714,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexd,alexd,16/Sep/19 3:10 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,UI,,,,,,,0,,,,,,"Artifactory that was configured with local binary provider, still displays this field in UI configuration: 

!Screen Shot 2019-09-16 at 17.57.53.png! ",6.12.1,,,,,,,,,,,,,,,,,,"16/Sep/19 3:10 PM;alexd;Screen Shot 2019-09-16 at 17.57.53.png;https://www.jfrog.com/jira/secure/attachment/34539/Screen+Shot+2019-09-16+at+17.57.53.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0057s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Even when 'Artifactory Requests Can Retrieve Remote Artifacts' is not enabled, Artifactory will cache new artifacts",RTFACT-20123,78712,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,16/Sep/19 2:09 PM,16/Feb/21 10:06 AM,18/Feb/21 8:59 AM,,6.12.2,7.0.0-beta,,,,,,,,,,,,,0,PB_Done,,,,,"Steps to reproduce:
1. Create Artifactory A with npm virtual repository.
2. Create Artifactory B and remote npm repo which will point to this virtual repository.

By default the 'Artifactory Requests Can Retrieve Remote Artifacts' is not enabled.
3. Make sure the npm repository caches on A and B are empty.
4. Install npm package through B.

Expected behavior:
Since A suppose to serve B only from the remote cache, it should not go and request the package from the remote, and return 404 since the cache is empty.

Actual behavior:
Artifactory A downloaded the artifact from the remote and cached it and returned the artifact to Artifactory B. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0057c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Scroll bar missing in Permission editor,RTFACT-20117,78703,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,16/Sep/19 11:55 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,0,,,,,,"When using Firefox (60.9.0esr) on Debian stretch the scroll bar is missing from the ""Included Users/Groups"" lists when editing a Permission (see screenshot). Scroll bar is missing in most other views using the same components.

Also, the scrolling in the ""Available Users/Groups"" list has very slow render performace (we have hundreds of users).

When solving this issue, you might as well expand the lists to actually fill the available vertical space, right now they are fixed in height.

 

In Chrome (76.0.3809.100) everything works as expected.

 
[Screenshot|https://i.paste.pics/02ef452d258984ffebf6d118c6d5e977.png]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0055k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Sep/19 2:25 PM;stefanga;Clearing the browsers cache fixed the issue. You may close this ticket.",,,,,,,,,,
NuPkg Release Notes field in web UI is rendered without newlines,RTFACT-20102,78557,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Maw,Maw,12/Sep/19 9:03 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,NuGet,Web UI,,,,,,1,,,,,,"It you look at the NuPkg Info for a nuget package, for example: [https://artfiactory.server.somewhere.com/webapp/#/artifacts/browse/tree/NuPkgInfo/]<repo_name>/Microsoft.Data.OData.5.7.0.nupkg

The ""Release Notes"" value is rendered without any newlines which makes it very hard to read, especially if the release notes have a list in them.

This contrasts with how this is rendered on nuget.org, for example: [https://www.nuget.org/packages/Microsoft.Data.OData/5.7.0]

Screenshot at https://paste.pics/6OB4D

The wrapping for all these fields looks pretty broken too.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z004ao:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
ECDSA and ED25519 keys not supported for SSH authentication,RTFACT-20098,78527,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muhammedk,muhammedk,11/Sep/19 11:10 AM,16/Feb/21 10:14 AM,18/Feb/21 8:59 AM,,6.12.1,6.8.3,,,,,,,,,,,,,0,,,,,,"ECDSA and ED25519 keys are not supported for SSH authentications but in the UI it shows these keys to be supported. RSA key works as expected but other keys fail. This behaviour was reproduced by using the JFrog CLI. 

!artifactory_ssh.png!

 

The steps to reproduce:
 # Generate the keys using the ECDSA and ED25519 algorithm.
 # Add public key under Profile --> SSH (adding ECDSA and ED25519 keys doesn't throw any error)
 # Link these keys to the JFrog CLI
 # Any operation using CLI fails with below error

           {
            ""status"": ""failure"",
            ""totals"": {
            ""success"": 0,
            ""failure"": 0
            }
         }

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0044g:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Slow response from with Move API when conan user/channel changes,RTFACT-20086,78435,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,djpeaco,djpeaco,09/Sep/19 8:55 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,Conan,,,,,,,0,api,move,,,,"In RTFACT-14165 support was added to change user/channel of a conan artifact when promoting it via the move API. It isn't behaving as expected, though, with the API never returning a response, and not fully deleting the old package during a move.

For example, performing a move without changing the user/channel works fine, with the HTTP call returning a response in less than half a second:
{quote}{{$ curl -u ******  -sS -X POST /api/move/conan-test/user/package/1.0.0/test?to=/conan-release/user/package/1.0.0/test}}{\{{}}
 {{  ""messages"" : [ {}}
 {{    ""level"" : ""INFO"",}}
 {{    ""message"" : ""moving conan-test:user/package/1.0.0/test to conan-release:user/package/1.0.0/test completed successfully, 9 artifacts and 6 folders were moved""}}
 {{  } ]}}
 {{}}}
{quote}
Afterwords, the new artifact is in the expected location, and the old artifact is gone (although the ""/user/package/1.0.0"" directory remains, even if empty).

--

However, attempting a move where the user/channel changes, the API never responds. Eventually the nginx reverse proxy we have in front of artifactory times out after 90 seconds, and returns a 504.
{quote}{{$ curl -u ******  -sS -X POST /api/move/conan-test/user/package/1.0.0/test?to=/conan-release/company/package/1.0.0/release}}
{quote}
Afterwords, it appears that artifactory did successfully move the package to the new location, however, it leaves behind two ""index.json"" files and a "".timestamp"" files (along with the directory structure containing them).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z003l4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Sep/19 9:00 PM;djpeaco;As an aside, when combined with a few other quirks of the move command, promoting conan artifacts is robustly rather tricky. This is the best I've gotten.
{quote}{{# check if package already exists, otherwise we will copy into directory rather replace}}
{{GET /api/storage/${dstRepo}/${dstUser}/${dstPackage}/${dstVersion}/${dstChannel}}}
{{if empty:}}
{{    DELETE /${dstRepo}/${dstUser}/${dstPackage}/${dstVersion}/${dstChannel}}}
{{# Do the move}}
{{POST /api/move/${srcRepo}/${srcUser}/${srcPackage}/${srcVersion}/${srcChannel}?to=${dstRepo}/${dstUser}/${dstPackage}/${dstVersion}/${dstChannel}}}
{{# Update the artifactory properties used to find the package}}
{{PATCH /api/metadata/${dstRepo}/${dstUser}/${dstPackage}/${dstVersion}/${dstChannel} '\{""props:{""conan.package.channel"":""${dstChannel}"",""conan.package.user"":""${dstUser}""}}'}}
{{# Delete the old files left behind}}
{{DELETE /${srcRepo}/${srcUser}/${srcPackage}/${srcVersion}/${srcChannel}}}
{{GET /api/storage/${srcRepo}/${srcUser}/${srcPackage}/${srcVersion}}}
{{if empty:}}
{{    DELETE /${srcRepo}/${srcUser}/${srcPackage}/${srcVersion}}}
{{    GET /api/storage/${srcRepo}/${srcUser}/${srcPackage}}}
{{    if empty:}}
{{        DELETE /${srcRepo}/${srcUser}/${srcPackage}}}
{{        GET /api/storage/${srcRepo}/${srcUser}}}
{{        if empty:}}
{{            DELETE /${srcRepo}/${srcUser}}}{{ }}
{quote}","10/Sep/19 12:28 AM;djpeaco;Okay, I got permissions needed to test behind the reverse proxy. The move API command does respond, it just takes 2 minutes, and then fails with a locking error:
{quote}{\{{}}
 {{  ""messages"" : [ {}}
 {{    ""level"" : ""ERROR"",}}
 {{    ""message"" : ""Failed to move from src=conan-test/user/package/1.0.0/test to target=/conan-release/company/package/1.0.0/release: Lock on LockEntryId conan-release:company/package/1.0.0/release/0/package/4aef0acd9b358b5834258318a9b9a1ea018517a0/index.json not acquired in 120 seconds. Lock info: org.artifactory.storage.fs.lock.provider.JVMLockWrapper@4a87df60.""}}
 {{  } ]}}
 {{}}}
{quote}
 It looks like this is a duplicate of RTFACT-19146",,,,,,,,,
Last modified on the folder is not updated,RTFACT-20073,78347,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,07/Sep/19 6:24 PM,16/Feb/21 10:24 AM,18/Feb/21 8:59 AM,,6.12.0,6.5.13,,,,,,,,,,,,,4,,,,,,"The last modified on a folder is not updated even after adding a file inside it. The folder info API shows the last modified same as the created at all times. 

 

Steps to reproduce:
 # Created a local maven repository, deployed a file image.png under folder1.
 # Used the folder info REST API to get details and note the last modified timestamp
 # Deployed another file to the same folder after a few minutes and then check the folder timestamp. It still has the same previous value.
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z0033c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Events for metadata can be missed,RTFACT-20069,78284,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,galba,galba,05/Sep/19 1:21 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When there are many events with the same timestamp, some events can be missed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z002q8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Using properties during deployment breaks SNAPSHOT versions,RTFACT-20063,78234,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sithmein,sithmein,04/Sep/19 3:07 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.12.1,,,,,,,Maven,,,,,,,0,maven3,properties,,,,"When an artifact with a SNAPSHOT version is deployed in combination with properties then the Maven metadata is broken in that it swallows the SNAPSHOT. Steps to reproduce:

 
 * Deploy a SNAPSHOT artifact.
 * Get maven-metadata.xml for that artifact:
{code:xml}
<metadata>
  <groupId>com.knime.enterprise</groupId>
  <artifactId>feature-branch-test.source</artifactId>
  <versioning>
    <latest>0.0.1-SNAPSHOT</latest>
    <versions>
      <version>0.0.1-SNAPSHOT</version>
    </versions>
    <lastUpdated>20190904145943</lastUpdated>
  </versioning>
</metadata>{code}

 * Deploy the same SNAPSHOT artifacts using a property by adding "";property=value"" to the deployment URL.
 * Get maven-metadata.xml for that artifact again:
{code:xml}
<metadata>
  <groupId>com.knime.enterprise</groupId>
  <artifactId>feature-branch-test.source</artifactId>
  <versioning>
    <latest>0.0.1</latest>
    <release>0.0.1</release>
    <versions>
      <version>0.0.1</version>
      <version>0.0.1-SNAPSHOT</version>
    </versions>
    <lastUpdated>20190904150406</lastUpdated>
  </versioning>
</metadata>
{code}

As you can see the metadata is clearly wrong because it suddenly lists a non-SNAPSHOT version that doesn't exist. This breaks Maven dependency resolution, especially when using version ranges because 0.0.1 is greater than 0.0.1-SNAPSHOT and will thus be preferred.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z002hc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Sep/19 11:27 PM;wendy.luo@ericsson.com;anyone has the same issue? how to reproduce it?",,,,,,,,,,
User information page does not present newly added permission,RTFACT-20023,76432,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,gidis,alexd,alexd,01/Aug/19 2:22 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Happened probabilistically in testim.io.test.4.5 Sanity - Build Info repo - permissions presentation

Flow:
# Create build permission for a user:  !Screen Shot 2019-08-01 at 17.21.12.png|height=350! 
# The permission is shown as the one applied to user:  !Screen Shot 2019-08-01 at 17.21.25.png|height=350! 
# In the user properties, go to Builds tab.
# The new permission is not there
 !Screen Shot 2019-08-01 at 17.20.11.png|height=350! ",,,,,,,,,,,,,,,,,,,"01/Aug/19 2:20 PM;alexd;Screen Shot 2019-08-01 at 17.20.11.png;https://www.jfrog.com/jira/secure/attachment/33953/Screen+Shot+2019-08-01+at+17.20.11.png","01/Aug/19 2:21 PM;alexd;Screen Shot 2019-08-01 at 17.21.12.png;https://www.jfrog.com/jira/secure/attachment/33951/Screen+Shot+2019-08-01+at+17.21.12.png","01/Aug/19 2:21 PM;alexd;Screen Shot 2019-08-01 at 17.21.25.png;https://www.jfrog.com/jira/secure/attachment/33952/Screen+Shot+2019-08-01+at+17.21.25.png","01/Aug/19 2:24 PM;alexd;artifactory.log;https://www.jfrog.com/jira/secure/attachment/33955/artifactory.log","01/Aug/19 2:24 PM;alexd;client-log.json;https://www.jfrog.com/jira/secure/attachment/33954/client-log.json","01/Aug/19 2:24 PM;alexd;frontend-request.log;https://www.jfrog.com/jira/secure/attachment/33956/frontend-request.log","01/Aug/19 2:25 PM;alexd;video-c388ca948d527b6cfb79c23740cb2ab96f9e1845.mp4;https://www.jfrog.com/jira/secure/attachment/33957/video-c388ca948d527b6cfb79c23740cb2ab96f9e1845.mp4",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzyvr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Sep/19 1:04 PM;tomere;Verified with [~nadavy] - this issue reproduces with a new user.
This is due to Artifactory's permissions cache.",,,,,,,,,,
Failed to delete repository nevertheless it doesn't contain artifacts related to a release bundle,RTFACT-20021,77930,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,iwashitah,iwashitah,02/Sep/19 8:38 AM,16/Feb/21 10:44 AM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,Distribution Repository,,,,,,,0,PB_Done,,,,,"After two similar repository names are created in both source Artifactory and target Artifactory Edge and only one repository is distributed to Artifactory Edge via Distribution, another repository cannot be deleted with the following message.
{code:java}
Failed to delete repository 'iversion' because it contains artifact/s related to a release bundle: Case112227/1.0{code}
 

The following is how to reproduce.
 1. Create ""iversion"" and ""iversion2"" repository in the Artifactory.

!Artifactory1.png!

2. Create ""iversion"" and ""iversion2"" repository in the Artifactory Edge.

!Edge1.png!

3. Build some artifacts to the Artifactory and distribute the artifacts to ""iversion2"" repository in the Artifactory Edge.

!Dist1.png!

5. Delete ""iversion"" repository in the Artifactory Edge.

!Edge2.png!

6. Appear Error dialog.

!Edge3.png!",,,,,,,,,,,,,,,,,,,"02/Sep/19 8:29 AM;iwashitah;Artifactory1.png;https://www.jfrog.com/jira/secure/attachment/34300/Artifactory1.png","02/Sep/19 8:33 AM;iwashitah;Dist1.png;https://www.jfrog.com/jira/secure/attachment/34297/Dist1.png","02/Sep/19 8:30 AM;iwashitah;Edge1.png;https://www.jfrog.com/jira/secure/attachment/34298/Edge1.png","02/Sep/19 8:29 AM;iwashitah;Edge1.png;https://www.jfrog.com/jira/secure/attachment/34299/Edge1.png","02/Sep/19 8:34 AM;iwashitah;Edge2.png;https://www.jfrog.com/jira/secure/attachment/34296/Edge2.png","02/Sep/19 8:34 AM;iwashitah;Edge3.png;https://www.jfrog.com/jira/secure/attachment/34295/Edge3.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z001ag:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
PyPi Repository not sorting wheel packages with build-number correctly,RTFACT-20013,77841,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,hast,hast,30/Aug/19 9:41 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,,,,,,,,1,,,,,,"Hi JFrog,

We setup a PyPi-Repository in Artifactory and uploaded a few wheel packages - all with the same version-number, but a different build-number from our CI-system.

For instance there are the following two packages:

""mypackage-0.0+none-9-py2.py3-none-any.whl"" (build-number = 9)
 
""mypackage-0.0+none-102-py2.py3-none-any.whl"" (build-number = 102)

Resolving the package ""mypackage 0.0"" over Artifactory, Artifactory will return the one with build number ""9"" - expected would be to get the latest one with build-number ""102"".

The wheel-package structure with the build-number is standardized. The documentation can be found here => [https://www.python.org/dev/peps/pep-0491/#file-name-convention]

We would expect Artifactory to sort the packages correctly and return the one with the highest build-number, therefore the latest one.

FYI: Our developers are faced with the problem that they do not get the package for the latest build, so i set this issue to critical.

 

Best regards and thank you in advance,

Stefan Hartmann (Leica Geosystems)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z000r4:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Sep/19 11:33 AM;hast;Any updates on this one (quite important for us)","30/Oct/19 8:20 AM;hast;BUMP!","06/Jan/20 7:21 AM;hast;Not reproducible in 6.15 anymore - can be set to done",,,,,,,,
LDAP group not syncing properly with users,RTFACT-20012,77817,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dan_wiegert,dan_wiegert,29/Aug/19 8:15 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.10.2,,,,,,,LDAP,,,,,,,0,,,,,,"We have an LDAP group we have imported from our AD server. It says syncing is on but for whatever reason the group doesn't update when new users log into Artifactory they are not appropriately placed in that group to have toe proper permissions.

!image-2019-08-29-14-12-28-458.png!

Our LDAP setting seem correct

!image-2019-08-29-14-14-20-968.png!

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z000ls:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Zap cache on npm remote repositories is not working as expected, as it doesn't expire all the metadata items in a remote cache",RTFACT-20000,77764,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,29/Aug/19 1:16 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,Metadata,Remote Repository ,,,,,,1,PB_Done,,,,,"Zap cache on npm remote repositories is not working as expected, as it doesn't expire all the metadata items in a remote cache. The issue happens intermittently on large remote caches and reproducing it consistently is not easy, as we don't know which item in the remote cache is not expired.

There should be additional logging which will show us how many items have been expired. Currently other than the log message that the repository has been zapped we don't have any transparency into zap cache feature. There should be a way to determine if all the metadata items in a remote cache have been expired after a successful zap cache",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z000a8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
User without delete/overwrite permission throws errors in logs and creates orphan layers/markers when updating tag in docker remote cache,RTFACT-19999,77750,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,28/Aug/19 6:17 PM,16/Feb/21 11:27 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,4,,,,,,"When updating a tag such as ""latest"" in a remote docker repo, there are ""User doesn't have permissions to override"" errors in the logs, and orphan layers/marker files leftover in the image folder. The image is successfully pulled by the client though.

Steps to reproduce:

1-Create local docker repo

2-Create remote docker repo proxying local repo created in step 1

3-Push image to local docker repo with latest tag

4-Pull image from step 3 into remote repo to cache it

5-overwrite latest tag image with new image that has fewer layers in local docker repo (I took out some steps in my dockerfile before building the image with docker build)

6-pull new ""latest"" tag from remote repo with a user that only has deploy/cache/read permissions (But NOT delete/overwrite)

7-Notice image pulls successfully, however there are leftover orphan layers and marker files from the original ""latest"" image created in step 3. Also, there is are confusing messages in the artifactory.log:

User doesn't have permissions to override 'docker-remote-cache:pipe/latest/sha256__22af3e5ea46eec66497cf69cf4f8eb4639f35f581f2c7a7fc7d6043db5a65596'. Needs delete permissions.

 

These confusing errors should not be thrown, and the leftover/extra layers or markers should be cleaned up when the ""latest"" tag is updated. This issue didn't seem to occur before marker layer files were added.",,,,,,,,,,,,,,,,RTFACT-20085,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|z00074:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"28/Aug/19 7:22 PM;geraldbazil;Note: The manifest is updated/overwrite without error by deploy/cache/read user.
Subsequent pulls from deploy/cache/read user create more markers and more errors.
Subsequent pulls from delete/overwrite user no errors but does not clean up all markers.

Expected behavior: deploy/cache/read user pull from remote repo should update layers as well as manifest to match source repo and no errors thrown. ",,,,,,,,,,
Adding docker hub private registry as Remote repo is failing,RTFACT-19989,77628,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,raghusrikanth,raghusrikanth,27/Aug/19 1:33 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.10.2,,,,,,,Remote Repository ,,,,,,,0,,,,,,"Getting below error, while adding docker hub as remote repo.

I am using a proxy to conenct, and provided docker hub credentials as well. 

When Tested from Advanced tab, getting popup message as successfully connected to server.

But replication is failing with below error. 

Error occurred while performing folder replication for ' <name>:' to 'https://registry-1.docker.io/': Unable to identify target URL as an Artifactory instance: HTTP/1.1 403 Forbidden
java.lang.IllegalArgumentException: Unable to identify target URL as an Artifactory instance: HTTP/1.1 403 Forbidden",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi01pc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to start artifactory on RHEL 7.6. Fails with error Unable to start service artifactory: Job for artifactory.service failed because a configured resource limit was exceeded,RTFACT-19988,77626,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,anil.gudla,anil.gudla,27/Aug/19 12:40 PM,05/Jan/21 11:20 AM,18/Feb/21 8:59 AM,,6.9.2,,,,,,,Artifactory Home,,,,,,,7,artifactory,failed,service,,,"I am trying to setup a new Artifactory instance on RHEL 7.6. While running the ansible role for installation, after installation it fails to start the service

Job for artifactory.service failed because a configured resource limit was exceeded. See ""systemctl status artifactory.service"" and ""journalctl -xe"" for details

systemd[1]: Can't open PID file /opt/jfrog/artifactory/run/artifactory.pid (yet?) after start: No such file or directory
systemd[1]: Failed to start Setup Systemd script for Artifactory in Tomcat Servlet Engine.
systemd[1]: Unit artifactory.service entered failed state.
systemd[1]: artifactory.service failed.

Found one article https://www.jfrog.com/jira/browse/RTFACT-18009, where it talks about reinstalling in a different directory and editing certain config files for env variables and also changing of links etc. I didnot want to attempt all this, as i want to setup a clean install for a production environment.","RHEL 7.6

version 6.9.5, 6.9.3 and 6.9.2",,,,,,,,,,,,RTFACT-20382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi01ow:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"29/Aug/19 3:29 PM;anil.gudla;Found this article, which resolved the issue

[http://vivin.net/2018/09/26/getting-artifactory-running-on-ubuntu-18-04/]

is it possible to get the same config included in the next update of artifactory","05/Sep/19 6:08 PM;jhogarth;It actually fails on any version newer than 219-65 which came as part of RHEL7.7

So this isn't bitten CentOS yet as they don't have their 7.7 milestone released yet.

Relevant section from the changelog:
{noformat}
- core: be stricter when handling PID files and MAINPID sd_notify() messages (#1663143){noformat}
It's this upstream issue: [https://github.com/systemd/systemd/issues/8085]","05/Sep/19 6:19 PM;jhogarth;[~anil.gudla] since we are Enterprise customers and will have a round of system updates on the horizon soon I've opened a formal support ticket and pointed it to this issue.","05/Sep/19 6:29 PM;jhogarth;Oh and since it's running under systemd rather than update limits.conf as that suggests I *think* it is better to just add a unit override to set LimitNOFILE=32000 

[https://www.freedesktop.org/software/systemd/man/systemd.exec.html]","05/Sep/19 9:00 PM;jhogarth;Here's an ansible snippet I just put together for our artifactory role that configures the system appropriately to work with the newer systemd on current RHEL/Debian until JFrog get an update out with working configuration:
{code}
- name: check for a systemd unit
  stat:     
    path: /usr/lib/systemd/system/artifactory.service
  register: artifactory_systemd_unit

- name: create systemd override folder
  file:     
    path: /etc/systemd/system/artifactory.service.d
    state: directory
  when: artifactory_systemd_unit.stat.exists | bool

- name: add the systemd overrides
  copy:     
    content: |
      [Service]
      User=artifactory
      Group=artifactory
      LimitNOFILE=32000
    dest: /etc/systemd/system/artifactory.service.d/override.conf
  when: artifactory_systemd_unit.stat.exists | bool

- name: comment out the the su user changes
  replace:     
    path: '/opt/jfrog/artifactory/bin/artifactoryManage.sh'
    regexp: '^(\s+)(su\s+-s\s+.*)$'
    replace: '\1#\2'
  when: artifactory_systemd_unit.stat.exists | bool

- name: insert the simple start/stop commands
  lineinfile:     
    path: '/opt/jfrog/artifactory/bin/artifactoryManage.sh'
    insertafter: ""^\\s+#su\\s+-s\\s+.*{{ item | regex_escape() }}.*$""
    # We want tabs in here to make the file easier to read
    line: ""		{{ item }}"" # noqa 203
  loop:     
    - '${metadataScript} start'
    - '${metadataScript} stop'
    - '${routerScript} start'
    - '${routerScript} stop'
    - '${replicatorScript} start'
    - '${replicatorScript} stop'
    - '$TOMCAT_HOME/bin/startup.sh'
    - '$TOMCAT_HOME/bin/shutdown.sh'
  when: artifactory_systemd_unit.stat.exists | bool
{code}
This is idempotent safe and just passed our test framework against current RHEL7 in an EC2 instance and in a centos7 container.

Note the override does assume that you have `daemon_reload: yes` on your systemd task to (re)start artifactory ...

Note that if you install in a centos docker container it forces the init.d script instead of a systemd unit even if you are running a systemd container so it won't show this particular situation. I imagine it'd be similar with a deb install in a debian/ubuntu container but I haven't verified that.

 ","09/Sep/19 10:48 AM;jhogarth;For reference for others searching this is a duplicate of https://www.jfrog.com/jira/browse/RTFACT-19850 which is where it will apparently be fixed.","18/Sep/19 8:42 AM;Mohanraj;We have upgraded to v6.12.2 issue Still present  but https://www.jfrog.com/jira/browse/RTFACT-19850  says issue is fixed. I have commented on this ticket more details 19850","14/Dec/19 1:37 AM;Tyderian;I just hit this on my Artifactory 6.7 instance.

Testing all the recommended fixes in this ticket, RTFACT-19850, RTFACT-20382, RTFACT-18009, etc - none of the fixes worked.

I tried upgrading to 6.14.0, issue still exists.  Then applied the fixes to that version - also no luck.

I tried upgrading to 6.16.0, issue still exists.  Then applied the fixes to that version - also no luck.

 

JFrog support helped me get my instance online manually by running ""/opt/jfrog/artifactory/bin/artifactory.sh start"", but have been unable to assist further.

 

Their recommendation from this point was a full system export, and then import into a newly build instance.  

A freshly built system running 6.14.0 (to maintain consistency with other instances in our environment) does not appear to exhibit this problem.

So there's a problem with the older versions that the (RPM) upgrade process does not address.

 

 ","04/Feb/20 8:28 PM;wrobson;I'm also running into this issue. Having to run
{code:java}
/opt/jfrog/artifactory/bin/artifactory.sh start
{code}
every time is our workaround. We're running on Centos 7 would love to see this fixed. ","19/Feb/20 4:17 PM;Keyms;Hello Everyone,

this could help you :

change this line in you ""ARTIFACTORY_HOME/etc/default"" and ""ARTIFACTORY_HOME/bin/artifactory.default"" files :

""export ARTIFACTORY_PID=$ARTIFACTORY_HOME/run/artifactory.pid""

by

""export ARTIFACTORY_PID=/var/run/artifactory.pid""

and, in your ""/etc/systemd/system/artifactory.service"" change PIDFile value by ""/var/run/artifactory.pid""

 

This work for me.",
"RPM if a package gets uploaded to a local repository, the reindexing of the virtual repository breaks",RTFACT-19966,77433,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Pieter,Pieter,23/Aug/19 2:18 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.12.0,,,,,,,Artifactory Home,,,,,,,1,,,,,,"If we upload a package to a *release local rpm* repository that is member of *-dev-rpm* than the reindexing of the virtual repository ends up in a loop.

 
|August 23rd 2019, 15:58:43.591|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:43.513|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:36.366|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:36.283|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:33.481|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:33.404|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:30.573|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:30.482|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:27.623|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:58:27.521|(o.a.a.y.i.YumVirtualInterceptor:80) - Triggering synchronous virtual yum index calculation for path repodata/d01d4e0600b515b49bc76a2eaa03869325b0dff5-primary.xml.gz in repo -dev-rpm|server1|
| |August 23rd 2019, 15:57:48.578|(o.a.a.y.v.i.YumVirtualCalculatorImpl:80) - Finished calculating virtual Yum metadata for '-dev-rpm/repodata'|server1|
| |August 23rd 2019, 15:57:47.238|(o.a.a.y.v.i.YumVirtualRepoMetadataWriter:97) - Writing merged yum metadata for path -dev-rpm/|server1|
| |August 23rd 2019, 15:57:47.229|(o.a.a.y.v.i.YumVirtualCalculatorImpl:76) - Writing yum virtual metadata in path -dev-rpm/repodata|server1|
| |August 23rd 2019, 15:57:47.216|(o.a.a.y.v.i.YumVirtualIndexesCollector:69) - Calculation of virtual yum metadata on path repodata required, collecting all indexes under path of repos aggregated by -dev-rpm|","root@lsvd22525:~ # cat /etc/redhat-release
Red Hat Enterprise Linux Server release 7.6 (Maipo)
 
Artifactory pro version 6.12.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi00jc:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Sep/19 9:02 AM;Pieter;Our layout of the RPM tree is;

We have three local RPM repos,
* not-so-epel (contains a few packages from epel that we use)
* release
* snapshot

These are aggregated in two virtual repositories:
* drdc-prd-rpm
* - not-so-epel
* - release

* drdc-dev-rpm
* - not-so-epel
* - release
* - snapshot

Then the file below is used for distribution of the virtual repository.
{noformat}
[drdc-artifact]
name=DRDC Artifactory Repository
baseurl=https://user:key@server.linux.domain.net/artifactory/drdc-dev-rpm/
enabled=1

# Either `1' or `0'. Determines whether or not yum keeps the cache of headers
# and packages after successful installation.  Default is '1' (keep files).
keepcache=0

#Optional - if you have GPG signing keys installed, use the below flags to verify the repository metadata signature:
#gpgkey=https://user:key@server.office01.domain.net/artifactory/drdc-prd-rpm/repomd.xml.key
#repo_gpgcheck=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-drdc-artifact

{noformat}

*Analysis so far*
Uploading a file to *release* triggers a re-indexing of the *release* repository followed by the virtual repositories *drdc-dev-rpm* and *drdc-prd-rpm*. This seems to trigger a *dead lock* in the database used by Artifactory.

{noformat}
2019-08-20 06:01:00,667 [art-exec-6] [ERROR] (o.a.a.y.v.i.YumVirtualCalculatorImpl:82) - error writing yum virtual metadata:
java.lang.reflect.UndeclaredThrowableException: null
        at com.sun.proxy.$Proxy79.next(Unknown Source)
        at org.artifactory.storage.db.fs.dao.NodesDao.getChildren(NodesDao.java:243)
        at org.artifactory.storage.db.fs.service.FileServiceImpl.loadChildren(FileServiceImpl.java:272)
        at org.artifactory.storage.fs.tree.FolderNode.getChildrenItemNode(FolderNode.java:74)
        at org.artifactory.storage.fs.tree.FolderNode.getChildren(FolderNode.java:56)
        at org.artifactory.storage.fs.tree.FolderNode.getChildrenInfo(FolderNode.java:149)
        at org.artifactory.repo.service.RepositoryServiceImpl.getChildren(RepositoryServiceImpl.java:598)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
        at com.sun.proxy.$Proxy150.getChildren(Unknown Source)
        at org.artifactory.addon.yum.indexer.RpmRepoMetadataSink.deleteOldIndices(RpmRepoMetadataSink.java:100)
        at org.artifactory.addon.yum.virtual.index.YumVirtualRepoMetadataWriter.writeMetadata(YumVirtualRepoMetadataWriter.java:113)
        at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.writeYumVirtualMetadata(YumVirtualCalculatorImpl.java:79)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:
281)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
        at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
        at com.sun.proxy.$Proxy256.writeYumVirtualMetadata(Unknown Source)
        at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.calculateYumVirtualMetadata(YumVirtualCalculatorImpl.java:
67)
        at org.artifactory.addon.yum.virtual.index.YumVirtualCalculatorImpl.calculateYumVirtualMetadataAsync(YumVirtualCalculatorImpl.
java:42)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.artifactory.work.queue.WorkQueueImpl.invoke(WorkQueueImpl.java:123)
        at org.artifactory.work.queue.WorkQueueImpl.doJobs(WorkQueueImpl.java:96)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.reflect.InvocationTargetException: null
        at sun.reflect.GeneratedMethodAccessor61.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.jfrog.storage.wrapper.ResultSetWrapper.invoke(ResultSetWrapper.java:77)
        ... 45 common frames omitted
Caused by: java.sql.SQLTransactionRollbackException: A lock could not be obtained due to a deadlock, cycle of locks and waiters is:
Lock : ROW, NODES, (690,84)
  Waiting XID : {16585816, S} , APP, SELECT * FROM nodes WHERE repo = ? AND node_path = ? AND depth = ?
  Granted XID : {16585818, X}
Lock : ROW, NODES, (690,83)
  Waiting XID : {16585818, S} , APP, SELECT * FROM nodes WHERE repo = ? AND node_path = ? AND depth = ?
  Granted XID : {16585816, X}
. The selected victim is XID : 16585816.
        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.closeOnTransactionError(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)
        at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source)
        ... 49 common frames omitted
Caused by: org.apache.derby.iapi.error.StandardException: A lock could not be obtained due to a deadlock, cycle of locks and waiters is:
Lock : ROW, NODES, (690,84)
  Waiting XID : {16585816, S} , APP, SELECT * FROM nodes WHERE repo = ? AND node_path = ? AND depth = ?
  Granted XID : {16585818, X}
Lock : ROW, NODES, (690,83)
  Waiting XID : {16585818, S} , APP, SELECT * FROM nodes WHERE repo = ? AND node_path = ? AND depth = ?
  Granted XID : {16585816, X}
. The selected victim is XID : 16585816.
        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
        at org.apache.derby.impl.services.locks.Deadlock.buildException(Unknown Source)
        at org.apache.derby.impl.services.locks.ConcurrentLockSet.lockObject(Unknown Source)
        at org.apache.derby.impl.services.locks.ConcurrentLockSet.zeroDurationLockObject(Unknown Source)
        at org.apache.derby.impl.services.locks.AbstractPool.zeroDurationlockObject(Unknown Source)
        at org.apache.derby.impl.services.locks.ConcurrentPool.zeroDurationlockObject(Unknown Source)
        at org.apache.derby.impl.store.raw.xact.RowLocking2nohold.lockRecordForRead(Unknown Source)
        at org.apache.derby.impl.store.access.heap.HeapController.lockRow(Unknown Source)
        at org.apache.derby.impl.store.access.heap.HeapController.lockRow(Unknown Source)
        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockRowOnPage(Unknown Source)
        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScanRow(Unknown Source)
        at org.apache.derby.impl.store.access.btree.index.B2IRowLockingRR.lockScanRow(Unknown Source)
        at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(Unknown Source)
        at org.apache.derby.impl.store.access.btree.BTreeScan.fetchNextGroup(Unknown Source)
        at org.apache.derby.impl.sql.execute.BulkTableScanResultSet.reloadArray(Unknown Source)
        at org.apache.derby.impl.sql.execute.BulkTableScanResultSet.getNextRowCore(Unknown Source)
        at org.apache.derby.impl.sql.execute.IndexRowToBaseRowResultSet.getNextRowCore(Unknown Source)
        at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.getNextRowCore(Unknown Source)
        at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source)
        ... 51 common frames omitted
{noformat}","29/Oct/19 12:49 PM;Pieter;I want to close this issue, we decided to no longer use virtual repositories for RPM's",,,,,,,,,
"Gradle & Maven ""Set Me Up"" Generate Setting ? info not working ",RTFACT-19963,77413,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,harshm,harshm,22/Aug/19 4:29 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.11.6,,,,,,,Set Me Up,,,,,,,0,,,,,,"Artifactory version: 6.11.6 

Repository: Remote 

Package Manager: Maven & Gradle

Feature: Permission tab

Steps to reproduce:
 # Go to set me up of Maven or gradle 
 # Click on Generate maven setting  / Generate gradle setting 
 # Hover on to the ? for more info
 # Dont see any information

Expected: Display more info

Actual: Nothing happens

Screen Recording attached [^Maven_Gradle_Questionmark_Info_Not_Working.mov]

 ",,,,,,,,,,,,,,,,,,,"22/Aug/19 4:29 PM;harshm;Maven_Gradle_Questionmark_Info_Not_Working.mov;https://www.jfrog.com/jira/secure/attachment/34215/Maven_Gradle_Questionmark_Info_Not_Working.mov",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi00fk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
503 in Saas,RTFACT-19962,77408,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adim,adim,22/Aug/19 2:32 PM,16/Feb/21 12:02 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,customers got 503,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi00eg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Xray ""Test Connection"" button fails when the Default Proxy is bypassed",RTFACT-19956,77374,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,21/Aug/19 11:34 PM,16/Feb/21 12:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"In Artifactory, there is the ""Bypass System Default Proxy Configuration"" button in the Admin -> Configuration -> Xray menu. This allows users to bypass the ""System Default"" proxy in Artifactory for only Xray.

 

However, if a user clicks the ""test connection"" button in Xray, it appears to fail:

""Xray was able to reach Artifactory, but Artifactory was unable to reach Xray""

20190821233109|15|REQUEST|10.138.0.119|xray|POST|/api/system/verifyconnection|HTTP/1.1|400|150

 

Steps to reproduce:
 # In Artifactory, set up a nonworking ""dummy"" proxy as the System Default
 # Bypass the nonworking proxy by enabling the Bypass default proxy option
 # Click the ""Test Connection"" button in Xray
 The connection test fails in Artifactory

 

I think this happens because the ""api/system/verifyconnection"" endpoint still uses the proxy setting in Artifactory.

 

It should be noted that only the test button fails, Xray can work with Artifactory without apparent issue.",,,,,,,,,,,,,,,,,,,"21/Aug/19 11:34 PM;patrickr;Screen Shot 2019-08-21 at 4.32.26 PM.png;https://www.jfrog.com/jira/secure/attachment/34205/Screen+Shot+2019-08-21+at+4.32.26+PM.png","21/Aug/19 11:34 PM;patrickr;Screen Shot 2019-08-21 at 4.33.56 PM.png;https://www.jfrog.com/jira/secure/attachment/34206/Screen+Shot+2019-08-21+at+4.33.56+PM.png","21/Aug/19 11:35 PM;patrickr;Screen Shot 2019-08-21 at 4.34.36 PM.png;https://www.jfrog.com/jira/secure/attachment/34207/Screen+Shot+2019-08-21+at+4.34.36+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi007c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UX Names overlap when screen window is re-adjusted ,RTFACT-19955,77368,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,harshm,harshm,21/Aug/19 6:50 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.11.6,,,,,,,permissions,Virtual Repositories,,,,,,0,,,,,,"Artifactory version: 6.11.6 

Repository: Remote 

Feature: Permission tab

Steps to reproduce:
 # RE-size your artifactory bowser window to shrink in horizontal
 # Go to Virtual repo in the artifacory repository browser
 # Go to effective permissions
 # Go to Permissions targets
 # You would see the Repositories header is over lapped with up arrow 

Expected: Texts should not overlap

Actual: Repository header is overlapping

Screens shots of the issue attached !Repositories_Header_Overlapped.png!",,,,,,,,,,,,,,,,,,,"21/Aug/19 6:50 PM;harshm;Repositories_Header_Overlapped.png;https://www.jfrog.com/jira/secure/attachment/34204/Repositories_Header_Overlapped.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi0060:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cache to Local Repo copy - Dry run not working ,RTFACT-19954,77367,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,harshm,harshm,21/Aug/19 6:43 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.11.6,,,,,,,Remote Repository ,,,,,,,0,,,,,,"Artifactory version: 6.11.6 

Repository: Remote 

Feature: Copy content

Steps to reproduce:
 # Go to Virtual repo action drop down on the right corner of the cache grid
 # Try option ""Copy Content""
 # Choose copying the content from remote to local repo
 # Try the dry run, it shows successful dry run completion
 # Now try copy and it throws error

Expected: Dry run should throw the exception 

!Copy_Failure.png! Actual: Dry run is successful 

Screen recording and Screens shots of the issue attached. [^CacheToLocal_Copy_DryRun_Bug.mov]",,,,,,,,,,,,,,,,,,,"21/Aug/19 6:40 PM;harshm;CacheToLocal_Copy_DryRun_Bug.mov;https://www.jfrog.com/jira/secure/attachment/34203/CacheToLocal_Copy_DryRun_Bug.mov","21/Aug/19 6:42 PM;harshm;Copy_Failure.png;https://www.jfrog.com/jira/secure/attachment/34202/Copy_Failure.png","21/Aug/19 6:42 PM;harshm;DryRun_Success_ScreenShot.png;https://www.jfrog.com/jira/secure/attachment/34201/DryRun_Success_ScreenShot.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|yi005s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Going back from repositories view not working,RTFACT-19941,77244,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shimib,shimib,19/Aug/19 6:44 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,7.0.0-beta,,,,,,,Web UI,,,,,,,0,,,,,,"Going into 'Administration' -> 'Repositories' and drilling into a specific repository.

Clicking on the Repositories menu item (left side) not doing anything. (Expected behavior is a pop-up that will ask for discard current changes and then going back to the repo list).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x001kg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
502 Bad Gateway screen during Artifactory boot,RTFACT-19939,77242,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,nadavy,shimib,shimib,19/Aug/19 6:39 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,7.0.0,,,,,,,Web UI,,,,,,,0,,,,,,"During Artifactory startup, if the service is not ready, user get a white screen with (502 Bad Gateway) on the browser.",Beta environment (customer: Broadcom),,,,,,,,,,,,,,,UTF-326,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x001k0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPE when execute replication on repo without replication configuration,RTFACT-19935,77205,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,18/Aug/19 3:40 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"+Steps to reproduce:+
1. Create remote repository (do not config remote replication)
2. run {code} POST api/replication/execute/{repo_key} {code}
you'll get the following exception:
 {code} java.lang.NullPointerException: null
	at org.artifactory.rest.util.ResponseUtils.lambda$getStreamingOutput$0(ResponseUtils.java:61)
	at org.glassfish.jersey.message.internal.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:79)
	at org.glassfish.jersey.message.internal.StreamingOutputProvider.writeTo(StreamingOutputProvider.java:61)
	at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:266)
	at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:251)
	at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163)
	at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:109)
	at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163)
	at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:85)
	at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163)
	at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1135)
	at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:662)
	at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:395)
	at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:385)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:280)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:86)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:304)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:570)
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:679)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:808)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745) {code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x001c0:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to install a python module,RTFACT-19919,77110,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adrianblakey1,adrianblakey1,15/Aug/19 4:36 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,PyPI,,,,,,,0,,,,,,"Artifactory 6.10.14

I am unable to install a python module using pip.

Python 3.7.3 Windows 10

Three repos:

rem - maps to pypi

loc - not used yet

vir - that maps rem into it

requirements.txt
 {color:#9cdcfe}--index-url{color} {color:#ce9178}[https://xxxx:xxx@jfrog.dom.com/artifactory/api/pypi/vir/simple]{color}
 {color:#4ec9b0}PyYAML{color}{color:#d4d4d4}=={color}{color:#b5cea8}3.11{color}
  
 # pip install -v -r requirements.txt
 Created temporary directory: C:\Users\x\AppData\Local\Temp\pip-ephem-wheel-cache-_hul2dm5
 Created temporary directory: C:\Users\x\AppData\Local\Temp\pip-req-tracker-eu1tgkuw
 Created requirements tracker 'C:\\Users\\x
AppData
 Local
 Temp
 pip-req-tracker-eu1tgkuw'
 Created temporary directory: C:\Users\x\AppData\Local\Temp\pip-install-ubsm3umk
 Looking in indexes: [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple]
 Collecting PyYAML==3.11 (from -r requirements.txt (line 2))
   1 location(s) to search for versions of PyYAML:
   * [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple/pyyaml/]
   Getting page [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple/pyyaml/]
   Found credentials in url for jfrog.dom.com
   Starting new HTTPS connection (1): jfrog.dom.com:443
   [https://jfrog.dom.com:443|https://jfrog.dom.com/] ""GET /artifactory/api/pypi/vir/simple/pyyaml/ HTTP/1.1"" 404 None
   Could not fetch URL [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple/pyyaml/:] 404 Client Error: Not Found for url: [https://jfrog.dom.com/artifactory/api/pypi/vir/simple/pyyaml/] - skipping
   Config variable 'Py_DEBUG' is unset, Python ABI tag may be incorrect
   Config variable 'WITH_PYMALLOC' is unset, Python ABI tag may be incorrect
   Given no hashes to check 0 links for project 'PyYAML': discarding no candidates
   ERROR: Could not find a version that satisfies the requirement PyYAML==3.11 (from -r requirements.txt (line 2)) (from versions: none)
 Cleaning up...
 Removed build tracker 'C:\\Users\\x
AppData
 Local
 Temp
 pip-req-tracker-eu1tgkuw'
 ERROR: No matching distribution found for PyYAML==3.11 (from -r requirements.txt (line 2))
 Exception information:
 Traceback (most recent call last):
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\cli\base_command.py"", line 188, in main
     status = self.run(options, args)
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\commands\install.py"", line 345, in run
     resolver.resolve(requirement_set)
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\legacy_resolve.py"", line 196, in resolve
     self._resolve_one(requirement_set, req)
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\legacy_resolve.py"", line 359, in _resolve_one
     abstract_dist = self._get_abstract_dist_for(req_to_install)
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\legacy_resolve.py"", line 307, in _get_abstract_dist_for
     self.require_hashes
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\operations\prepare.py"", line 134, in prepare_linked_requirement
     req.populate_link(finder, upgrade_allowed, require_hashes)
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\req\req_install.py"", line 211, in populate_link
     self.link = finder.find_requirement(self, upgrade)
   File ""c:\users\x\appdata\local\programs\python\python37\lib\site-packages\pip_internal\index.py"", line 1228, in find_requirement
     'No matching distribution found for %s' % req
 pip._internal.exceptions.DistributionNotFound: No matching distribution found for PyYAML==3.11 (from -r requirements.txt (line 2))
 1 location(s) to search for versions of pip:

 * [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple/pip/]
 Getting page [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple/pip/]
 Found credentials in url for jfrog.dom.com
 Starting new HTTPS connection (1): jfrog.dom.com:443
 [https://jfrog.dom.com:443|https://jfrog.dom.com/] ""GET /artifactory/api/pypi/vir/simple/pip/ HTTP/1.1"" 404 None
 Could not fetch URL [https://x:****@jfrog.dom.com/artifactory/api/pypi/vir/simple/pip/:] 404 Client Error: Not Found for url: [https://jfrog.dom.com/artifactory/api/pypi/vir/simple/pip/] - skipping
 Config variable 'Py_DEBUG' is unset, Python ABI tag may be incorrect
 Config variable 'WITH_PYMALLOC' is unset, Python ABI tag may be incorrect
 Given no hashes to check 0 links for project 'pip': discarding no candidates

pip search works:
 # pip search PyYAML -v --index [https://x:x@jfrog.dom.com/artifactory/api/pypi/vir/simple]
 Found credentials in url for jfrog.dom.com
 Starting new HTTPS connection (1): jfrog.dom.com:443
 [https://jfrog.dom.com:443|https://jfrog.dom.com/] ""POST /artifactory/api/pypi/vir/simple HTTP/1.1"" 200 None
 pyyaml-tags (1.0.4)            - PyYAML custom tags
 ...
 ...

And the .pypi tree in the vir repo has: PyYAML.html in it.

The Artifactory log:

 

2019-08-14 21:33:11,583 [https-jsse-nio-8443-exec-363] [INFO ] (o.a.r.HttpRepo      :432) - rem downloading [https://pypi.python.org/simple/pyyaml/] Unknown content length 
 2019-08-14 21:33:11,608 [https-jsse-nio-8443-exec-363] [INFO ] (o.a.r.HttpRepo      :445) - rem downloaded  [https://pypi.python.org/simple/pyyaml/] 33.46 KB at 1,418.05 KB/sec
 2019-08-14 21:33:11,919 [https-jsse-nio-8443-exec-381] [INFO ] (o.a.r.HttpRepo      :432) - rem downloading [https://pypi.python.org/simple/pip/] Unknown content length 
 2019-08-14 21:33:11,935 [https-jsse-nio-8443-exec-381] [INFO ] (o.a.r.HttpRepo      :445) - rem downloaded  [https://pypi.python.org/simple/pip/] 33.52 KB at 2,095.07 KB/sec

 This url: [https://x:x@jfrog.dom.com/artifactory/api/pypi/vir/simple/|https://ca31319-a:9aKQzu6p@jfrogbuild.deltads.ent/artifactory/api/pypi/delta-python-virtual-dev/simple/]

 

returns a large html page of hyperlinks (anchors) to what looks like a complete pypi repo.

 

If I pick one say: [https://jfrog.com.com/artifactory/api/pypi/vir/simple/pyyaml-tags/|https://jfrogbuild.deltads.ent/artifactory/api/pypi/delta-python-virtual-dev/simple/pyyaml-tags/]

it returns 404

 

FIXED - 

 

Please close this.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x000tk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Sep/19 10:55 AM;hagalin.gudmundsson;[~adrianblakey1] How was this fixed?",,,,,,,,,,
Filtered Resource file checksum mismatch error,RTFACT-19914,77086,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,14/Aug/19 2:48 PM,16/Feb/21 12:18 PM,18/Feb/21 8:44 AM,,,,,,,,,,,,,,,,0,,,,,,"Filtered Resource file checksum mismatch error

When resolving a filter file from Artifactory. Artifactory sends the “generic” checksum of the file instead of sending the checksum of the file after injecting the properties.

Steps to reproduce.
 # Deploy a file with filtered resource to Artifactory generic-local repository. (attached to this Jira is an example settings.xml file)
 # Enable the filter check box for the file under the general tab for said file. See screenshot below.
!filtered.png|width=373,height=357!

 # Use JFrog CLI to resolve the file you will get a checksum mismatch error. Example command below:
$ jfrog rt dl maven-generic/.settings/settings.xml --flat",,,,,,,,,,,,,,,,,,,"14/Aug/19 2:47 PM;ohadl;filtered.png;https://www.jfrog.com/jira/secure/attachment/34134/filtered.png","14/Aug/19 2:49 PM;ohadl;settings.xml;https://www.jfrog.com/jira/secure/attachment/34135/settings.xml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x000og:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker Pull and Push experience "" read:connection reset by peer "" after upgrading to Docker Engine 19.03.0",RTFACT-19906,77041,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,eric.blackburn@mattersight.com,eric.blackburn@mattersight.com,13/Aug/19 10:58 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Docker,,,,,,,17,Docker,,,,,"h2. Problem

After upgrading [docker engine 19|[https://docs.docker.com/engine/release-notes/#19030]], docker pull/push results in a ""read:connection reset by peer"" error.  This blocks the ability to use of remote and local docker repositories.  As a current workaround, we are limiting our build server to the latest docker engine 18 version, [18.09.9|[https://docs.docker.com/engine/release-notes/#18098]]

 

Note, a pull from docker hub directly doesn't encounter this issue.  Only when interfacing with Artifactory do we see the problem, which is why I opened the bug ticket with Artifactory instead of the Docker Engine github, [https://github.com/docker/engine].

 
h2. Reproduction Details

We are building and publishing images from a CentOS 7 instance. Our current Artifactory instance is 6.11.1. 
h4. Docker Engine 18

Docker Pull/Push works as expected after we install the latest Docker Engine 18 release
{code:java}
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

yum install -y docker-ce-18.09.8-3.el7.x86_64
---> Package containerd.io.x86_64 0:1.2.6-3.3.el7 will be installed
---> Package docker-ce-cli.x86_64 1:19.03.1-3.el7 will be installed

//A generic install call would've been: yum install -y docker-ce-18.09.8
//Ensure docker is started
//Docker login, if possible. We have been seeing some issues here as well.

docker pull artifactory.domain.local:<docker repo port>/library/alpine:latest
latest: Pulling from library/alpine
050382585609: Pull complete
Digest: sha256:6a92cd1fcdc8d8cdec60f33dda4db2cb1fcdcacf3410a8e05b3741f44a9b5998
Status: Downloaded newer image for artifactory.domain.local:<docker repo port>/library/alpine:latest
artifactory.domain.local:<docker repo port>/library/alpine:latest{code}
h4.  Docker Engine 19

Things regress when we upgrade to Docker Engine 19. 
h5. Docker Pull
{code:java}
//Note that this only updates the ce, no other dependencies update.  So this package specifically seems to have issues.
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum install -y docker-ce-19.03.0-3.el7.x86_64
---> Package docker-ce.x86_64 3:18.09.8-3.el7 will be updated
---> Package docker-ce.x86_64 3:19.03.0-3.el7 will be an update


docker pull artifactory.domain.local:<docker repo port>/library/alpine:latest
latest: Pulling from library/alpine
050382585609: Pulling fs layer
error pulling image configuration: Get https://artifactory.domain.local:<docker repo port>/v2/library/alpine/blobs/sha256:b7b28af77ffec6054d13378df4fdf02725830086c7444d9c278af25312aa39b9: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
{code}
 

If I try enough times, I can get a pull to make it through
{code:java}
docker pull artifactory.domain.local:<docker repo port>/library/alpine:latest
Error response from daemon: Get https://artifactory.domain.local:<docker repo port>/v2/: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
docker pull artifactory.domain.local:<docker repo port>/library/alpine:latest
Error response from daemon: Get https://artifactory.domain.local:<docker repo port>/v2/library/alpine/manifests/latest: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
docker pull artifactory.domain.local:<docker repo port>/library/alpine:latest
Error response from daemon: Get https://artifactory.domain.local:<docker repo port>/v2/: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
docker pull artifactory.domain.local:<docker repo port>/library/alpine:latest
latest: Pulling from library/alpine
Digest: sha256:6a92cd1fcdc8d8cdec60f33dda4db2cb1fcdcacf3410a8e05b3741f44a9b5998
Status: Image is up to date for artifactory.domain.local:<docker repo port>/library/alpine:latest
artifactory.domain.local:<docker repo port>/library/alpine:latest
{code}
h5. Docker Push
{code:java}
docker push artifactory.domain.local:<docker repo port>/test/alpine:latest
The push refers to repository [artifactory.domain.local:<docker repo port>/test/alpine/alpine]
1bfeebd65323: Pushed
[DEPRECATION NOTICE] registry v2 schema1 support will be removed in an upcoming release. Please contact admins of the artifactory.domain.local:<docker repo port> registry NOW to avoid future disruption.
Head https://artifactory.domain.local:<docker repo port>/v2/test/alpine/blobs/sha256:a3ed95caeb02ffe68cdd9fd84406680ae93d633cb16422d00e8a7c22955b46d4: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
docker push artifactory.domain.local:<docker repo port>/test/alpine:latest
The push refers to repository [artifactory.domain.local:<docker repo port>/test/alpine]
Get https://artifactory.domain.local:<docker repo port>/v2/: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
docker push artifactory.domain.local:<docker repo port>/test/alpine:latest
The push refers to repository [artifactory.domain.local:<docker repo port>/test/alpine]
1bfeebd65323: Pushed
Head https://artifactory.domain.local:<docker repo port>/v2/test/alpine/blobs/sha256:b7b28af77ffec6054d13378df4fdf02725830086c7444d9c278af25312aa39b9: read tcp <ip of source box>:56974-><artifactory ip>:<docker repo port>: read: connection reset by peer
{code}
By simply downgrading back to Docker Engine 18, we can push and pull again.
{code:java}
yum downgrade -y docker-ce-18.09.8-3.el7.x86_64
{code}
h4. Artifactory Logs

There wasn't much here.  For a Pull

Artifactory.log
{noformat}
2019-08-13 17:42:13,998 [http-nio-8081-exec-144] [INFO ] (o.a.r.HttpRepo :432) - external-dockerhub downloading https://registry-1.docker.io/v2/library/alpine/manifests/latest 1.60 KB
2019-08-13 17:42:14,046 [http-nio-8081-exec-144] [INFO ] (o.a.r.HttpRepo :445) - external-dockerhub downloaded https://registry-1.docker.io/v2/library/alpine/manifests/latest 1.60 KB at 36.23 KB/se{noformat}
Request.log 
{noformat}
20190813175137|0|REQUEST|non_authenticated_user|GET|/api/docker/external-dockerhub/v2/|HTTP/1.1|401|0 20190813175137|438|REQUEST|authuser|GET|/api/docker/external-dockerhub/v2/token|HTTP/1.1|200|0 20190813175138|62|REQUEST|authuser|GET|/api/docker/external-dockerhub/v2/library/alpine/manifests/latest|HTTP/1.1|200|1638{noformat}
A Push was pretty sparse as well

Artifactory.log
{noformat}
2019-08-13 17:45:03,527 [http-nio-8081-exec-63] [INFO ] (o.a.e.UploadServiceImpl:401) - Deploy to 'sandbox:test/alpine/_uploads/12365564-d712-4f43-b574-f70fb96b06b2' Content-Length: unspecified{noformat}
Request.log 
{noformat}
20190813174700|547|REQUEST|authuser|GET|/api/docker/sandbox/v2/token|HTTP/1.1|200|0
20190813174701|0|REQUEST|authuser|HEAD|/api/docker/sandbox/v2/test/alpine/blobs/sha256:0503825856099e6adb39c8297af09547f69684b7016b7f3680ed801aa310baaa|HTTP/1.1|200|0{noformat}","CentOs 7

- docker-ce-19.03.0-3.el7.x86_64

Artifactory 6.11.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x000eg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Aug/19 6:32 PM;eric.blackburn@mattersight.com;This is also affecting Docker Desktoip for Windows, [https://docs.docker.com/docker-for-windows/release-notes/].  The latest working version is 2.0.0.3, with Docker Engine 18.09.2.  Docker Desktop for Windows 2.1.0.1 and higher are using Docker Engine 19.03.1, and have the communication issue I described in this ticket.","25/Sep/19 3:08 PM;eric.blackburn@mattersight.com;If already logged in to the arty repo, we are also seeing a *""unexpected EOF""* error when pulling from the repo.",,,,,,,,,
VersionResourceProTest#testArtifactoryVersionFromOldArtifactoryClient,RTFACT-19900,76992,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,barh,barh,13/Aug/19 8:54 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,ITest,,,,,,,0,,,,,,"Test failed due to internal error, no stack trace found.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|x00040:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Setting the DB_URL environment variable doesn't work in the Artifactory OSS docker image,RTFACT-19894,76882,Bug,Pending QA,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,daniele,daniele,12/Aug/19 8:45 AM,05/Jan/21 5:10 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,Docker Image,,,,,,0,,,,,,"This was reported by a customer in the GitHub helm charts projects: [https://github.com/jfrog/charts/issues/441]

 

When using the OSS Artifactory Docker image, setting the DB_URL environment variable doesn't work. Even if you didn't specify the DB_HOST parameter, it will use the default DB_HOST which is set to the DB_TYPE (e.g. postgresql). 

Steps to reproduce:

Run the OSS docker image:
{code:java}
docker run -e DB_USERNAME=artifactory -e DB_PASSWORD=password -e DB_TYPE=postgresql -e DB_URL=jdbc:postgresql://postgres123-postgresql:5432/artifactory -it --rm docker.bintray.io/jfrog/artifactory-oss:6.11.3{code}
 

 

You will see the following:

!image-2019-08-12-11-40-29-476.png!

 

In the ""Waiting for DB"" line you can see that the DB_HOST is used instead of the DB_URL.

 

Looking at the entrypoint-docker.sh script, I found that we first set the DB_URL properly in the db.properties file, but after that we replace it with the DB_HOST (which is set to the DB_TYPE by default, which is obviously wrong for 99% of the cases). The reason for that is that unlike in the artifactory-pro image, the DB_HOST check and replace is not in an ""else"" clause with the DB_URL check.

 ",,,,,,,,,,,,,,,,,,,"12/Aug/19 8:40 AM;daniele;image-2019-08-12-11-40-29-476.png;https://www.jfrog.com/jira/secure/attachment/34098/image-2019-08-12-11-40-29-476.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|s000og:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Banner disappears after logging in artifactory for admin users,RTFACT-19883,76833,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jitendrak,jitendrak,09/Aug/19 10:47 AM,09/Feb/21 8:58 PM,18/Feb/21 8:59 AM,,,,,,,,,Web UI,,,,,,,0,,,,,,"The Custom Message banner is visible, but as soon as the admin user logs in, it disappears.
This is reproduced in artifactory version 6.0.4 and 6.10.4 as well the latest artifactory version 6.11.3 too and observed the same behavior.

Admin user uploads any custom banner from general settings, it is clearly not visible. But once he logs out, it is still visible. but the same admin user logs in again banner is disappeared. 

This is working fine for non-admin users. Even if non-admin user logs-in or even if he logs out he can see the banner. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|s000eg:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
There should be a way to timeout maven metadata calculation worker threads that are in RUNNING state for a long time,RTFACT-19880,76825,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,08/Aug/19 10:25 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.8.9,,,,,,,Maven,Metadata,,,,,,0,PB_Done,,,,,"In cases where due to an issue on the database server during a specific time, the threads that are executing the maven metadata calculation are left in a RUNNING state, as there is no response from the database for the SQL query. Since the thread is trying to do a socketRead from the database server and is not receiving any data, the worker thread remains in a RUNNING state and is never completed.

Due to this issue you could have a situation where each of the 8 maven metadata workers have locked on a unique repoPath for executing maven metadata calculation and are virtually stuck, as there is no response from the database server. Since the thread is in RUNNING state it remains trying to do a socketRead and stays like that forever. This scenario would block the maven metadata calculation for the entire Artifactory instance, as you had each of the 8 worker threads locked on a unique repoPath and there are no more workers in Artifactory to execute maven metadata calculation for new requests coming to Artifactory. Below is the stack trace of an example thread which is in RUNNING state executing the async maven metadata calc. We saw this when analyzing the thread dumps. 

When we ran the SQL query that this thread was trying to execute on the database server directly, we could see that the response time was less than 2 seconds. The issue with the database server could have been only for a minute, but during that time if you had maven deployments, then the Artifactory server would get into a blocked state as the worker threads won't get any response. If there is a way to timeout these threads or recover from this scenario in Artifactory and free up the workers, then Artifactory maven metadata calculation will not be blocked completely. 

Currently when you run into this issue, the only way to recover is to restart the Artifactory cluster or restart the database server to free up the worker threads.

priority:5 - threadId:0x00007fba84020000 - nativeId:0xbcd1 - nativeId (decimal):48337 - state:RUNNABLE
 stackTrace:

java.lang.Thread.State: RUNNABLE

at java.net.SocketInputStream.socketRead0(Native Method)
 at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
 at java.net.SocketInputStream.read(SocketInputStream.java:170)
 at java.net.SocketInputStream.read(SocketInputStream.java:141)
 at oracle.net.ns.Packet.receive(Packet.java:308)
 at oracle.net.ns.DataPacket.receive(DataPacket.java:106)
 at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:324)
 at oracle.net.ns.NetInputStream.read(NetInputStream.java:268)
 at oracle.net.ns.NetInputStream.read(NetInputStream.java:190)
 at oracle.net.ns.NetInputStream.read(NetInputStream.java:107)
 at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:124)
 at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:80)
 at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1137)
 at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:350)
 at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:227)
 at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
 at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:208)
 at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:886)
 at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1175)
 at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1296)
 at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3613)
 at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3657)
 - locked <0x00007fbd75f999e8> (a oracle.jdbc.driver.T4CConnection)
 at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1495)
 at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:184)
 at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:152)
 at org.artifactory.storage.db.aql.dao.AqlDao.executeQueryLazy(AqlDao.java:93)
 at org.artifactory.storage.db.aql.itest.service.AqlServiceImpl.getAqlQueryStreamResult(AqlServiceImpl.java:203)
 at org.artifactory.storage.db.aql.itest.service.AqlServiceImpl.executeQueryLazy(AqlServiceImpl.java:155)
 at org.artifactory.maven.MavenMetadataCalculator.getSubFoldersContainingPoms(MavenMetadataCalculator.java:390)
 at org.artifactory.maven.MavenMetadataCalculator.calculateAndSet(MavenMetadataCalculator.java:182)
 at org.artifactory.maven.MavenMetadataCalculator.calculate(MavenMetadataCalculator.java:154)
 at org.artifactory.maven.MavenMetadataServiceImpl.calculateMavenMetadata(MavenMetadataServiceImpl.java:81)
 at org.artifactory.maven.MavenMetadataServiceImpl.calculateMavenMetadataAsync(MavenMetadataServiceImpl.java:56)
 at sun.reflect.GeneratedMethodAccessor614.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:497)
 at org.artifactory.work.queue.WorkQueueImpl.invoke(WorkQueueImpl.java:123)
 at org.artifactory.work.queue.WorkQueueImpl.doJobs(WorkQueueImpl.java:96)
 at org.artifactory.schedule.aop.AsyncAdvice$$Lambda$1166/331165589.run(Unknown Source)
 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
 at java.util.concurrent.FutureTask.run(FutureTask.java:266)
 at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
 at java.lang.Thread.run(Thread.java:745)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|s000co:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Missing quote in AQL template,RTFACT-19874,76800,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Cyrilc,Cyrilc,08/Aug/19 1:30 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,0,,,,,,"On the ""Search Artifact"" page, the AQL template that is given is not valid: there is a missing quote at the end of the {{X-JFrog-Art-Api}} header.",Seen on https://entplus.jfrog.io,,,,,,,,,,,,,,,,,,"08/Aug/19 1:33 PM;Cyrilc;Capture d’écran 2019-08-08 à 15.32.20.png;https://www.jfrog.com/jira/secure/attachment/34088/Capture+d%E2%80%99e%CC%81cran+2019-08-08+a%CC%80+15.32.20.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|s0007c:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Docker pull"" using Artifactory's sha256 checksum fails on some images",RTFACT-19842,76679,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,06/Aug/19 8:17 PM,16/Feb/21 12:38 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,Docker,,,,,,,17,PB_Done,,,,,"Symptoms: A ""Docker pull"" only works when the tag is used on some images. The SHA256 checksum on the manifest.json in Artifactory never matches the checksum of the tag.

Steps to reproduce:
 # On Artifactory 6.8.7, create a remote Docker repository going to Docker Quay ( [https://quay.io )|https://quay.io%29/]
 # Perform a Docker Pull on a specific problem image ""coreos/etcd"":

docker pull repo.jfrog.team:12069/coreos/etcd
Using default tag: latest
latest: Pulling from coreos/etcd

[...]

Digest: sha256:5b6691b7225a3f77a5a919a81261bbfb31283804418e187f7116a0a9ef65d21d
Status: Downloaded newer image for docker-quay.art.local/coreos/etcd:latest

3. Note that the sha256 checksum tag for the Digest does NOT match the checksum in Artifactory for the ""list.manifest.json"" file:

4f174d5dd387fb9317ad30f40f4adde97f0e24a6a4947e1e3dbec42bc5cf8576

 

This is a problem if automation relies on Artifactory's checksum to get the right file. The Headers used by Artifactory use the incorrect checksum:

jfrog@jfrog:~/downloads$ curl -vvv http://localhost:8081/artifactory/api/docker/docker-quay/v2/coreos/etcd/manifests/latest -uadmin:password

< X-Checksum-Sha1: ab8328ec4f48e645bf193261aebced95c370c3ff

< X-Checksum-Sha256: 4f174d5dd387fb9317ad30f40f4adde97f0e24a6a4947e1e3dbec42bc5cf8576

< X-Checksum-Md5: 7bd76de6bd048ec2bd74dd7e9cd60827

< Docker-Content-Digest: sha256:4f174d5dd387fb9317ad30f40f4adde97f0e24a6a4947e1e3dbec42bc5cf8576",,,,,,,,,,,,,,,,CTO-349,,,"06/Aug/19 8:21 PM;patrickr;Screen Shot 2019-08-06 at 1.20.22 PM.png;https://www.jfrog.com/jira/secure/attachment/34034/Screen+Shot+2019-08-06+at+1.20.22+PM.png","06/Aug/19 8:21 PM;patrickr;Screen Shot 2019-08-06 at 1.21.31 PM.png;https://www.jfrog.com/jira/secure/attachment/34035/Screen+Shot+2019-08-06+at+1.21.31+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|o0003k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Aug/19 8:18 PM;patrickr;I linked RTFACT-19110. A 404 error occurs when the Artifactory SHA256 manifest.json checksum is used, seems to be the same bug.","06/Dec/19 5:07 PM;briceburg;I believe this happens when using an image with a ""rolling"" tag – e.g. a tag that has been pushed to multuple times, for instance :latest.

The sha256 that arty returns via AQL is not pullable via

 

```

docker pull artifactory/image@sha256:ab123...

 

but is via

 

docker pull artifactory/image:latest

 

(which returns a different sha256 digest)

```","28/Dec/20 11:02 AM;amithkm;In addition to my comment above, Artifactory should support pulling the images with SHA256 checksum value from docker-local repository, copied from docker-remote-cache, instead of copying all the platforms(skopeo copy -all) it should support platform-specific docker images so that we can save the disk space. ",,,,,,,,
Unexpected layout after importing Conan packages from pro to CE,RTFACT-19840,76664,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mohamadm,Mohamadm,06/Aug/19 2:53 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,Conan,,,,,,,0,PB_Done,,,,,"Github issue: [https://github.com/conan-io/conan/issues/5560]

Steps to reproduce:
 # Export Conan packages from Artofactory pro 5.4.6
 # Import to Artifactory ce latest version
 # The layout is changing to unexpected output ""1.2.11/conan@zlib/stable""

Conan search results from pro 5.4.6:
{quote}$ conan search -r art5.4.6
 Existing package recipes:

zlib/1.2.11@conan/stable
{quote}
 

Conan search results from CE latest (6.11.3):
{quote}$ conan search -r art6.11.3
 Existing package recipes:

1.2.11/conan@zlib/stable
{quote}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|o0000o:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
artifacts are not browsable if virtual repository name ends with -cache,RTFACT-19831,76557,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avivb,avivb,05/Aug/19 9:10 AM,16/Feb/21 12:43 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,2,PB_Done,,,,,"Steps to reproduce:
1. Create a local repo and deploy something to it (not to the root level)
2. Create a virtual repo with a name that ends with -cache, and aggregate the local repo from the previous step
3. Go to the tree browser and try to view the artifact you deployed

It will not show the artifact and this is the error in artifactory.log
{code}
2019-08-05 12:00:43,620 [http-nio-8081-exec-6] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null
	at org.artifactory.ui.rest.model.artifacts.browse.treebrowser.nodes.JunctionNode.getRepoPkgType(JunctionNode.java:102)
	at org.artifactory.ui.rest.model.artifacts.browse.treebrowser.nodes.JunctionNode.fetchItemTypeData(JunctionNode.java:89)
	at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.tree.BrowseTreeNodesService.execute(BrowseTreeNodesService.java:41)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.artifacts.browse.treebrowser.tree.TreeBrowserResource.browseTreeNodes(TreeBrowserResource.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
{code}

This is because Artifactory cuts the -cache from the virtual repo name and uses a wrong repo name. For example: my-virtual-cache turns into my-virtual. The DB does not include entries for this repo name, therefore, we get NPE",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzzl3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Oct/20 3:33 PM;dell.green;I'm seeing this on version 7.6.3 also","08/Oct/20 3:35 PM;dell.green;although some that are named with -cache on the end work, only one i have does not ","08/Oct/20 3:37 PM;dell.green;On further investigation, the one that does not work for me is indeed a virtual repo and the others are not virtual","08/Oct/20 3:50 PM;dell.green;was able to temporarily workaround by adding another virtual repo which contains the virtual repo thats un-browsable ensuring the new repo  name/path doesn't end in ""-cache""",,,,,,,
"Debian reindex ""writeProps"" isn't clear",RTFACT-19821,76495,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,04/Aug/19 9:28 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Debian,,,,,,,0,,,,,,"From [Calculate Debian Repository Metadata|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CalculateDebianRepositoryMetadata], it sounds as ""writeProps"" is enabled by default.

However, according to [RTFACT-9226|https://www.jfrog.com/jira/browse/RTFACT-9226], it looks like it was change to disabled.

In any case, by trying to use this flag, it looks as if being passed after ""async=0/1"", it doesn't work:

{code:java}
curl -uarielk -XPOST ""https://arielk.jfrog.io/arielk/api/deb/reindex/debian-local?async=0?writeProps=0""
Enter host password for user 'arielk':
{
  ""errors"" : [ {
    ""status"" : 404,
    ""message"" : ""Not Found""
  } ]
}%
{code}

Is this a bug, or have the ""writeProps"" flag been deprecated at wiki isn't updated?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzz8v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Replication is treating dot and underscore in repo name as the same,RTFACT-19814,76477,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ariels,ariels,04/Aug/19 6:12 AM,16/Feb/21 12:45 PM,18/Feb/21 8:59 AM,,,,,,,,,Config Manager,Replication,,,,,,0,PB_Done,,,,,"*Description:*
 When setting replication or 2 repositories with the below changes, the replication will assign the same replication key to the repositories replication, which will make the config descriptor unusable until the deletion of the manual deletion of the replication entry from the config descriptor. 

*Steps to reproduce:*
 # Create 2 local repositories with the following names: 'dot.underscore-issues' and 'dot_underscore-issues' (the actual name is irrelevant just have it the same with the diff of '.' and '_')
 # Create replication to those repositories.
 # Once you hit save on the replication you will see the attached error (see pic 1).
 # Although the error is shown, the configuration is saved and the <replicationKey> is the same.
 # From that point on you can't do any configuration change until going to the config descriptor and manually delete at least one of the replication entries.

{code:java}
<localReplication>
<enabled>true</enabled>
<cronExp>0 0/15 * 1/1 * ? *</cronExp>
<syncDeletes>false</syncDeletes>
<syncProperties>true</syncProperties>
<repoKey>generic-local</repoKey>
<enableEventReplication>false</enableEventReplication>
<replicationKey>generic-local_http__719ccfd0e4</replicationKey>
<checkBinaryExistenceInFilestore>false</checkBinaryExistenceInFilestore>
<url>http://localhost:8081/artifactory/dot_underscore-issues</url>
<socketTimeoutMillis>15000</socketTimeoutMillis>
<username>admin</username>
<password>AM.zG8ua.AES128.2h424SyaesXwq6Y9MMsuGHGhEBe9EGN5e59BHDs4s2An1FbF</password>
<syncStatistics>false</syncStatistics>
</localReplication>

<localReplication>
<enabled>true</enabled>
<cronExp>0 0/15 * 1/1 * ? *</cronExp>
<syncDeletes>false</syncDeletes>
<syncProperties>true</syncProperties>
<repoKey>generic-local</repoKey>
<enableEventReplication>false</enableEventReplication>
<replicationKey>generic-local_http__719ccfd0e4</replicationKey>
<checkBinaryExistenceInFilestore>false</checkBinaryExistenceInFilestore>
<url>http://localhost:8081/artifactory/dot.underscore-issues</url>
<socketTimeoutMillis>15000</socketTimeoutMillis>
<username>admin</username>
<password>AM.zG8ua.AES128.2gNXYu8rHFzXYshhuq7JsidV6rjdG53KUWNMp15jEznPtSrE</password>
<syncStatistics>false</syncStatistics>
</localReplication>{code}
*Stacktrace:* 
{code:java}
2019-08-04 09:04:20,717 [http-nio-8081-exec-10] [ERROR] (o.a.c.CentralConfigServiceImpl:642) - Failed to reload configuration: Duplicate key LocalReplication[generic-local|http://localhost:8081/artifactory/dot_underscore-issues|generic-local_http__719ccfd0e4]
java.lang.IllegalStateException: Duplicate key LocalReplication[generic-local|http://localhost:8081/artifactory/dot_underscore-issues|generic-local_http__719ccfd0e4]
at java.util.stream.Collectors.lambda$throwingMerger$115(Collectors.java:133)
at java.util.HashMap.merge(HashMap.java:1245)
at java.util.stream.Collectors.lambda$toMap$173(Collectors.java:1320)
at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)
at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)
at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)
at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)
at org.jfrog.common.config.diff.DiffUtils.diffCollection(DiffUtils.java:75)
at org.artifactory.descriptor.config.DiffFunctionsImpl.centralConfigDescriptorImpl(DiffFunctionsImpl.java:83)
at org.artifactory.descriptor.config.DiffFunctionsImpl.lambda$new$7(DiffFunctionsImpl.java:225)
at org.artifactory.descriptor.config.DiffFunctionsImpl.diffFor(DiffFunctionsImpl.java:16)
at org.artifactory.config.CentralConfigServiceImpl.findDiff(CentralConfigServiceImpl.java:475)
at sun.reflect.GeneratedMethodAccessor344.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
at com.sun.proxy.$Proxy142.findDiff(Unknown Source)
at org.artifactory.spring.ArtifactoryApplicationContext.reload(ArtifactoryApplicationContext.java:383)
at org.artifactory.config.CentralConfigServiceImpl.callReload(CentralConfigServiceImpl.java:540)
at org.artifactory.config.CentralConfigServiceImpl.reloadConfiguration(CentralConfigServiceImpl.java:524)
at org.artifactory.config.CentralConfigServiceImpl.saveDescriptor(CentralConfigServiceImpl.java:313)
at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContext(CentralConfigServiceImpl.java:621)
at org.artifactory.config.CentralConfigServiceImpl.lambda$saveAndReloadContextWithRetry$0(CentralConfigServiceImpl.java:575)
at org.jfrog.common.ExecutionUtils.handleFunctionExecution(ExecutionUtils.java:57)
at org.jfrog.common.ExecutionUtils.lambda$generateExecutionRunnable$0(ExecutionUtils.java:48)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:111)
at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:58)
at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:75)
at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:260)
at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:56)
at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:36)
at org.jfrog.common.ExecutionUtils.retry(ExecutionUtils.java:41)
at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:574)
at org.artifactory.config.CentralConfigServiceImpl.saveEditedDescriptorAndReload(CentralConfigServiceImpl.java:516)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
at com.sun.proxy.$Proxy142.saveEditedDescriptorAndReload(Unknown Source)
at org.artifactory.ui.rest.service.admin.configuration.repositories.util.UpdateRepoConfigHelper.handleLocal(UpdateRepoConfigHelper.java:103)
at org.artifactory.ui.rest.model.admin.configuration.repository.local.LocalRepositoryConfigModel.updateRepo(LocalRepositoryConfigModel.java:142)
at org.artifactory.ui.rest.service.admin.configuration.repositories.UpdateRepositoryConfigService.execute(UpdateRepositoryConfigService.java:66)
at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
at org.artifactory.ui.rest.resource.admin.configuration.repositories.RepoConfigResource.updateRepositoryConfig(RepoConfigResource.java:64)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:745)
2019-08-04 09:04:20,719 [http-nio-8081-exec-10] [ERROR] (o.j.c.ExecutionUtils:89) - Last retry failed: code exception. Not trying again (Failed to reload configuration: Duplicate key LocalReplication[generic-local|http://localhost:8081/artifactory/dot_underscore-issues|generic-local_http__719ccfd0e4]){code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzz5b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory creates dists folder in generic repos,RTFACT-19809,76464,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,02/Aug/19 2:37 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,,,,,,,,0,PB_Done,,,,,"Artifactory is creating a ""dists"" folder with the package database in generic repos when changing the properties of a DEB package.

 

How to reproduce:
 * Create a generic repo named ""test""
 * Upload a DEB package to this repo with curl.
 {{curl -n -XPUT ""https://artifacts.se.axis.com/artifactory/test/some/folder/cowsay_3.03+dfsg2-3_all.deb;deb.distribution=stretch;deb.component=main;deb.architecture=amd64"" -T cowsay_3.03+dfsg2-3_all.deb}}
 * Re-upload the file with any of the properties changed; or change a property of the file in the WebUI
 * Watch how Artifactory creates the ""dists"" folder in the root of the ""test"" repo.

 

Expected behaviour:

I should be able to upload DEB files to a generic repo and setting properties on the item without Artifactory creating extra folders in my repo. This behaviour should only occur for Debian repos.",Artifactory Enterprise HA 6.11.3 (docker),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzz2n:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"21/Oct/19 9:11 PM;mdtdevops;Do you also have issues with multiple dist folders being generated when tagging a single package with multiple distributions? ","22/Oct/19 5:50 AM;stefanga;[~mdtdevops]: It's not clear if you reference a behaviour in a generic repo or in a Debian repo.

In a Debian repo I would expect one folder for each dist I tag a package for. Example: If I upload a deb package and set deb.distributions=stretch;buster I would expect both those folders in the dist directory.

But in a generic repo I expect no indexation of *.deb files and certanly not Artifactory creating a dist directory with package files.","22/Oct/19 2:40 PM;mdtdevops;Good question [~stefanga], I had not made that distinction in your report. I am seeing the multiple dist folders in Debian Repositories. When tagging a deb package with the meta data 'deb.distribution=trusty; bionic' it creates a dist folder with the name 'trusty; bionic' 
!image-2019-10-22-08-39-29-914.png!

 ","22/Oct/19 2:44 PM;stefanga;[~mdtdevops]: That is how it is supposed to work in Debian repos. The files created in the dists directory are the package databases that APT is using to know which packages are available for that apt source.

My issue is that these files are also created for Generic repos, which they shouldn't.",,,,,,,
contentSynchronisation is not updated with the correct value after creation,RTFACT-19804,76419,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Nimerb,Nimerb,01/Aug/19 9:33 AM,16/Feb/21 1:06 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"The property contentSynchronisation is not updated to the correct value after creating the repository through a REST API. 

To reproduce:

Use the following endpoint with ""contentSynchronisation"" set to ""true""

[https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CreateRepository]

 

curl -uadmin:password -XPUT -H ""Content-Type: application/json"" ""http://localhost:8080/artifactory/api/repositories/test-remote"" -T repo-remote.json

with the following JSON content:

{
 ""key"": ""test-remote"",
 ""rclass"": ""remote"",
 ""description"": ""smart remote generic test"",
 ""packageType"": ""generic"",
 ""url"": ""https://localhost/remote-repo"",
 ""username"": ""admin"",
 ""password"": ""password"",
 *""contentSynchronisation"": {*
 *""enabled"": true,*
 ""statistics"": {
 ""enabled"": true
 },
 ""properties"": {
 ""enabled"": true
 },
 ""source"": {
 ""originAbsenceDetection"": true
 }
 },
 ""repoLayoutRef"": ""simple-default""
}

 
h5. Expected outcome

1. Remote repository gets created

2. *GET request to api/repositories/test-remote* should show contentsynchronisation enabled = true (along with all other configured param values specified in above json)

 *Actual outcome*

1. Remote repository gets created

2. *GET request to api/repositories/test-remote* shows contentSynchronisation enabled value to be ""false"" (all other configured params do apply successfully though...)

 

The GET response for the remote repo:

curl -uadmin:password ""http://localhost:8080/artifactory/api/repositories/test-remote"" 


{
 ""key"" : ""test-remote"",
 ""packageType"" : ""generic"",
 ""description"" : ""smart remote generic test (local file cache)"",
 ""notes"" : """",
 ""includesPattern"" : ""**/*"",
 ""excludesPattern"" : """",
 ""repoLayoutRef"" : ""simple-default"",
 ""enableComposerSupport"" : false,
 ""enableNuGetSupport"" : false,
 ""enableGemsSupport"" : false,
 ""enableNpmSupport"" : false,
 ""enableBowerSupport"" : false,
 ""enableCocoaPodsSupport"" : false,
 ""enableConanSupport"" : false,
 ""enableDebianSupport"" : false,
 ""debianTrivialLayout"" : false,
 ""enablePypiSupport"" : false,
 ""enablePuppetSupport"" : false,
 ""enableDockerSupport"" : false,
 ""dockerApiVersion"" : ""V2"",
 ""forceNugetAuthentication"" : false,
 ""enableVagrantSupport"" : false,
 ""enableGitLfsSupport"" : false,
 ""enableDistRepoSupport"" : false,
 ""url"" : ""https://artifactory.site2.local/remote-github"",
 ""username"" : ""admin"",
 ""password"" : ""AM.28PCN.AES128.2h3djgoKTiarTzKW"",
 ""handleReleases"" : true,
 ""handleSnapshots"" : true,
 ""suppressPomConsistencyChecks"" : true,
 ""remoteRepoChecksumPolicyType"" : ""generate-if-absent"",
 ""hardFail"" : false,
 ""offline"" : false,
 ""blackedOut"" : false,
 ""storeArtifactsLocally"" : true,
 ""socketTimeoutMillis"" : 15000,
 ""localAddress"" : """",
 ""retrievalCachePeriodSecs"" : 600,
 ""assumedOfflinePeriodSecs"" : 300,
 ""missedRetrievalCachePeriodSecs"" : 1800,
 ""unusedArtifactsCleanupPeriodHours"" : 0,
 ""fetchJarsEagerly"" : false,
 ""fetchSourcesEagerly"" : false,
 ""shareConfiguration"" : false,
 ""synchronizeProperties"" : false,
 ""maxUniqueSnapshots"" : 0,
 ""maxUniqueTags"" : 0,
 ""propertySets"" : [ ],
 ""archiveBrowsingEnabled"" : false,
 ""listRemoteFolderItems"" : true,
 ""rejectInvalidJars"" : false,
 ""allowAnyHostAuth"" : false,
 ""enableCookieManagement"" : false,
 ""enableTokenAuthentication"" : false,
 ""propagateQueryParams"" : false,
 ""blockMismatchingMimeTypes"" : false,
 ""mismatchingMimeTypesOverrideList"" : """",
 ""bypassHeadRequests"" : false,
 *""contentSynchronisation"" : {*
 *""enabled"" : false,*
 ""statistics"" : {
 ""enabled"" : true
 },
 ""properties"" : {
 ""enabled"" : true
 },
 ""source"" : {
 ""originAbsenceDetection"" : true
 }
 },
 ""externalDependenciesEnabled"" : false,
 ""downloadRedirect"" : false,
 ""xrayIndex"" : false,
 ""enabledChefSupport"" : false,
 ""rclass"" : ""remote""
}

 ",,,,,,,,,,,,,,,,RTFACT-20251,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzyt3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Aug/19 12:15 PM;joe.henshaw;Workaround: After creating the repo with PUT request, subsequent POST request with contentsynchronisation: {""enabled"" : true} will permanently update the value.",,,,,,,,,,
"""_intransit"" repository does not have a cleanup policy",RTFACT-19797,76373,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yonatanb,yonatanb,31/Jul/19 11:10 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.3.6,,,,,,,,,,,,,,1,,,,,,"The ""_intransit"" repository is a repository that is being used as part of the Distribution process. 
This repository holds the artifacts that are part of the release-bundle distribution and they will remain in this repository until the distribution process is complete. 

The issues we encounter are: 
1. When a distribution is completed successfully, the _intransit repository does not delete the empty directories.

2. When a distribution is failed, the _intransit repository does not remove the files and directories from this repository.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzyjr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Download flow of missed cache binaries by checksum in remote repositories tries to get binary before adding them to the cache ,RTFACT-19784,76294,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nadavy,nadavy,30/Jul/19 10:53 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"This does not affect functionality, but causes an unnecessary failed download step of a binary we can tell for sure(well, almost) does not exists in artifactory binary providers.

To reproduce:
 * turn on debug on org.jfrog.storage.binstore.providers.cache.fs.ConcurrentReadCacheMissHandler
 * add a repo (like jcenter)
 * download a binary (like jcenter/org/apache/apache/16/apache-16.pom)

see the exception below",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzy53:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Jul/19 10:53 AM;nadavy;2019-07-30 13:52:37,598 [http-nio-8080-exec-5] ERROR o.j.s.b.p.c.f.ConcurrentReadCacheMissHandler:68 - Exception was thrown while getting Concurrent stream from cache
com.google.common.util.concurrent.UncheckedExecutionException: org.jfrog.storage.binstore.exceptions.BinaryNotFoundException: Binary provider has no content for '48296e511366fa13aad48c58d8e09721774abec6'
 at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2051)
 at com.google.common.cache.LocalCache.get(LocalCache.java:3953)
 at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3976)
 at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4960)
 at org.jfrog.storage.binstore.providers.cache.fs.ConcurrentReadCacheMissHandler.handleCacheMiss(ConcurrentReadCacheMissHandler.java:62)
 at org.jfrog.storage.binstore.providers.FileCacheBinaryProviderImpl.getStream(FileCacheBinaryProviderImpl.java:110)
 at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.getBinary(BinaryServiceImpl.java:428)
 at jdk.internal.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
 at com.sun.proxy.$Proxy77.getBinary(Unknown Source)
 at org.artifactory.repo.RemoteRepoBase.getExistingResourceByChecksum(RemoteRepoBase.java:897)
 at org.artifactory.repo.RemoteRepoBase.doDownloadAndSave(RemoteRepoBase.java:722)
 at org.artifactory.repo.RemoteRepoBase.downloadAndSave(RemoteRepoBase.java:602)
 at org.artifactory.repo.service.RepositoryServiceImpl.downloadAndSave(RepositoryServiceImpl.java:1755)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
 at com.sun.proxy.$Proxy46.downloadAndSave(Unknown Source)
 at org.artifactory.repo.RemoteRepoBase.getResourceStreamHandle(RemoteRepoBase.java:506)
 at org.artifactory.repo.service.RepositoryServiceImpl.getResourceStreamHandle(RepositoryServiceImpl.java:1799)
 at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
 at com.sun.proxy.$Proxy46.getResourceStreamHandle(Unknown Source)
 at org.artifactory.engine.DownloadServiceImpl.performDownloadIfResourceNotPresent(DownloadServiceImpl.java:551)
 at org.artifactory.engine.DownloadServiceImpl.respondFoundResource(DownloadServiceImpl.java:420)
 at org.artifactory.engine.DownloadServiceImpl.respond(DownloadServiceImpl.java:332)
 at org.artifactory.engine.DownloadServiceImpl.process(DownloadServiceImpl.java:255)
 at jdk.internal.reflect.GeneratedMethodAccessor111.invoke(Unknown Source)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
 at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
 at com.sun.proxy.$Proxy121.process(Unknown Source)
 at org.artifactory.webapp.servlet.RepoFilter.doDownload(RepoFilter.java:276)
 at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:167)
 at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:433)
 at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:398)
 at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)
 at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:75)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
 at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
 at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
 at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
 at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
 at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:542)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
 at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
 at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
 at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
 at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
 at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
 at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
 at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
 at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
 at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.jfrog.storage.binstore.exceptions.BinaryNotFoundException: Binary provider has no content for '48296e511366fa13aad48c58d8e09721774abec6'
 at org.jfrog.storage.binstore.providers.EmptyBinaryProvider.getStream(EmptyBinaryProvider.java:62)
 at org.artifactory.addon.filestore.type.s3.S3AwsBinaryProvider.getStream(S3AwsBinaryProvider.java:142)
 at org.jfrog.storage.binstore.providers.RetryBinaryProvider.getStream(RetryBinaryProvider.java:135)
 at org.jfrog.storage.binstore.providers.RetryBinaryProvider.getStream(RetryBinaryProvider.java:64)
 at org.artifactory.addon.filestore.eventual.EventuallyPersistedBinaryProvider.forwardStreamInternal(EventuallyPersistedBinaryProvider.java:311)
 at org.artifactory.addon.filestore.eventual.EventuallyPersistedBinaryProvider.getStream(EventuallyPersistedBinaryProvider.java:149)
 at org.jfrog.storage.binstore.providers.cache.fs.ConcurrentReadCacheMissHandler$1.load(ConcurrentReadCacheMissHandler.java:40)
 at org.jfrog.storage.binstore.providers.cache.fs.ConcurrentReadCacheMissHandler$1.load(ConcurrentReadCacheMissHandler.java:35)
 at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3529)
 at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2278)
 at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2155)
 at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2045)
 ... 88 common frames omitted",,,,,,,,,,
Replicated properties do not trigger afterPropertyDelete,RTFACT-19778,76281,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yongqiang,yongqiang,30/Jul/19 8:34 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.9.2,,,,,,,User Plugins,,,,,,,0,,,,,,"When replicating artifacts, the properties are also synced, and delete properties are also replicated. This should trigger the afterPropertyDelete event in the user plugins, but it does not trigger on target Artifactory. Only trigger on source Artifactory.

The use case is a user would like to delete properties on the target instance after they are replicated, but there is no event to trigger on. This can be worked around on the initial replication of the file by copying properties in afterDelete, but there is no way to do it with new properties replicated on an existing file.","VM 8C 16G, S3 provider

We install Artifactory by zip file",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzy2f:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory user with Disabled UI access can bypass setting,RTFACT-19774,76259,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tha@luminanetworks.com,tha@luminanetworks.com,29/Jul/19 9:57 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,security,,,,,"A user who has the ""Disabled UI"" permission set can bypass the permission by providing the correct credentials and then simply navigating to the landing page after receiving the error message that UI access is disabled for this user.

Steps to reproduce:

1. Create a user with the ""Disable UI Access"" permission set
2. Attempt to login with the user
3. Receive prompt that UI access is disabled for user
4. Edit the address bar and navigate directly to the landing page (remove login from path)
5. Notice that we now have full access to the UI

This is a security concern as a user who should not have access can gain the access that they are not entitled to.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxxb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Maven deploy fails with 409 due to comparing checksum to wrong file when two builds deploy the same snapshot artifact at the same time,RTFACT-19773,76258,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,DavidSlater,DavidSlater,29/Jul/19 9:26 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When two maven builds publishing snapshot versions run at the same time we sometimes find that the build begins to publish to the wrong unique snapshot version (we use the unique snapshot version setting in Artifactory), likely due to an issue with the maven-metadata.xml publishing or fetching. It appears that this happens when both builds happen to publish the same artifact at the same time. We make use of file properties publishing which build the artifacts derived from. 

An example of two snapshot versions that conflict are as follows: 
19.4.0-20190720.071044-126, with property 'build=1' 
19.4.0-20190720.070434-127, with property 'build=2' 

The maven build output shows build=2 publishing to 19.4.0*-127 for the entire build and then switches to 19.4.0*-126 for the one artifact the two builds are uploading at the same time. The build=2 artifact then fails to upload with: ""[WARNING] Failed to upload checksum path/to/jar/jar-19.4.0-20190720.071044-126.jar.sha1: Failed to transfer file http://url.com/artifactory/repository;build=2/path/to/jar/artifactID/19.4.0-SNAPSHOT/jar-19.4.0-20190720.071044-126.jar.sha1 with status code 409 

Note the url contains the right build=2 property but the incorrect unique snapshot version for build=2. The 409 is due to comparing the checksum of build 1 with the jar from build 2. When you look at maven-metadata.xml using the property build=2 you can see it incorrectly reports the artifact from build=1, 19.4.0-*-126.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxx3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Aug/19 12:07 PM;adiv;Hi David,

We were unable to reproduce this issue and we contacted you via mail - to which we did not get a response.

If you are still able to reproduce this issue please contact us via a Support ticket. ",,,,,,,,,,
Import of permissions JSON file causes OutOfMemory error,RTFACT-19772,76257,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shimib,shimib,29/Jul/19 5:36 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,Access Server,Import/export,,,,,,0,access,import,permissions,,,"When importing very large security entities export-files, Access tries to read the entire file into memory. This is not scalable and fails with OOME for large files (in our example ~2GB).

Example stack trace:

Caused by: java.lang.OutOfMemoryError: null

        at java.lang.AbstractStringBuilder.hugeCapacity(AbstractStringBuilder.java:161)

        at java.lang.AbstractStringBuilder.newCapacity(AbstractStringBuilder.java:155)

        at java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:125)

        at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:596)

        at java.lang.StringBuilder.append(StringBuilder.java:190)

        at org.apache.commons.io.output.StringBuilderWriter.write(StringBuilderWriter.java:142)

        at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2538)

        at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2516)

        at org.apache.commons.io.IOUtils.copy(IOUtils.java:2493)

        at org.apache.commons.io.IOUtils.copy(IOUtils.java:2441)

        at org.apache.commons.io.IOUtils.toString(IOUtils.java:1084)

        at org.apache.commons.io.FileUtils.readFileToString(FileUtils.java:1806)

        at org.jfrog.access.server.service.backup.AccessImporterExporterImpl.doImport(AccessImporterExporterImpl.java:74)","Just a very large permissions export file for importing. 

We saw a failure on a 24GB of JVM Heap when importing ~2GB json file.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxwv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory does not detect groups with space in their names when LDAP is configured,RTFACT-19771,76251,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Maayana,Maayana,29/Jul/19 3:35 PM,16/Feb/21 1:14 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,3,,,,,,"Steps to reproduce:

1.Configure LDAP (for example: AD that includes a group with space in the OU name)

2.Integrate Artifactory as per: [https://www.jfrog.com/confluence/display/RTF/Managing+Security+with+LDAP]

3.Notice that Artifactory finds the users and groups correctly but not those that have a whitespace in the name",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxw7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Aug/19 12:43 PM;Maras;we have the same problem with group name !SquadNEOCRM+ 2.0 which could not be imported to Artifactory","02/Aug/19 12:55 PM;Maras;Error is quite new since in version 6.8.3  this error did not occur.
This error is very serious to us because it causes that we can not add new users and LDAP groups to Artifactory.","28/Oct/19 8:51 AM;Maras;Good morning
Is there any new information regarding the ETA for this bug fix? We have new cases where we cannot import groups containing spaces. There is still no workaround for this problem.",,,,,,,,
Docker v1 manifest is served when Metadata Retrieval Cache Period is set to 0,RTFACT-19767,76237,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gskolysz,gskolysz,29/Jul/19 1:45 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,,,,,,,0,,,,,,"Setup:

Site A has local repository repo-local

Site B has remote repository pointing to repo-local on Site A,  Metadata Retrieval Cache Period = 0

Site B repository's cache is empty (it's enough for it not to have the artifact you request)

 

Scenario:
 # Upload docker image (docker push) to Site A's local repository (with v2 manifest.json)
 # Request the image from Site B's remote repository (docker pull)

 

Expected:

Docker image is served without any issues

 

Observed:

First run results in:
{noformat}
root@machine:~# docker pull repo.registry.local/image123
Using default tag: latest
latest: Pulling from image123
unexpected EOF{noformat}
Subsequent pulls work fine for as long as the image is cached.

Manifest.json is in v1 schema format

 

Workaround:

Set Metadata Retrieval Cache Period to any other value

 ",,,,,,,,,,,,,RTFACT-19625,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxsf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Possible maven-metadata.xml calculation block on a large local repo when using Async metadata REST API trigger ,RTFACT-19766,76228,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,29/Jul/19 1:02 PM,16/Feb/21 1:15 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,Maven,Metadata,,,,,,0,,,,,,"* Tracking JIRA for a possible issue with Maven metadata calculation

Scenario:

1. Single maven local repo with 50TB (millions of artifacts)
2. Deployments of artifacts to this repo, this will trigger metadata calculation per maven GAVC
3. Issue Async Maven metadata calculation for a sub path in the repo

At this point, the metadata calculation from #2 is stopped
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxqf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Yaml Configuration allows creating two repositories with the same name.,RTFACT-19757,76178,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,ohadl,ohadl,28/Jul/19 12:22 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"Using the Yaml configuration you can create two repositories with the same name.

This will prevent Artifactory from starting on next restart and might cause other unexpected behaviours.  

 

+*_Steps to reproduce:_*+

 Create a *_configuration.yml_* file as below:
{code:java}
localRepositories: #Local repositories configuration
foo-helm-prod-us: #The local repository name
type: maven #The package type
checksumPolicyType: server-generated-checksums #Determines how Artifactory behaves when a client checksum for a deployed resource is missing or conflicts with the locally calculated checksum
description: ""Hello world"" #A free text field that describes the content and purpose of the repository
dockerApiVersion: V1 #Only for Docker repositories. The Docker API version
excludesPattern: #Provides a way to filter out specific repositories when trying to resolve the location of different artifacts (Ant-like pattern)
includesPattern: #Provides a way to filter out specific repositories when trying to resolve the location of different artifacts (Ant-like pattern)
maxUniqueSnapshots: 0 #Only for Maven and NuGet repositories. Specifies the maximum number of unique snapshots of the same artifact that should be stored. Once this number is reached and a new snapshot is uploaded, the oldest stored snapshot is removed automatically. Default: 0
maxUniqueTags: 0 #Only for Docker repositories. Specifies the maximum number of unique snapshots of the same artifact that should be stored. Once this number is reached and a new snapshot is uploaded, the oldest stored snapshot is removed automatically. Default: 0
notes: ""Hello world 2"" #A free text field to add additional notes about the repository
repoLayout: maven-2-default #Sets the layout that the repository should use for storing and identifying modules. The layout usually varies for the different package types
snapshotVersionBehavior: unique #Specifies the naming convention for Maven SNAPSHOT versions
xray: #Xray settings for the certain repository
enabled: false #Indicated whether the repository will be indexed and scanned by Xray
yumGroupFileNames: yumGroup1 #A comma-separated list of YUM group files associated with your RPM packages
yumRootDepth: 0 #Informs Artifactory under which level of directory to search for RPMs and save the repodata directory
blackedOut: false #If set, Artifactory ignores this repository when trying to resolve artifacts. The repository is also not available for download or deployment of artifacts
calculateYumMetadata: false #When set, RPM metadata calculation is automatically triggered by the actions described above
debianTrivialLayout: false #Indicates whether the Debian repository uses a trivial layout
enableFileListsIndexing: false #When set, Artifactory will index and maintain an RPM filelists.xml metadata file
forceNugetAuthentication: false #When set, if anoynmous access is enabled on the Artifactory instance, this will override the behavior and will force client to authentiacate
handleReleases: true #If set, Artifactory allows you to deploy release artifacts into this repository
handleSnapshots: true #If set, Artifactory allows you to deploy snapshot artifacts into this repository
suppressPomConsistencyChecks: true #When deploying an artifact to a repository, Artifactory verifies that the value set for groupId:artifactId:version in the POM is consistent with the deployed path. If there is a conflict between these then Artifcatory will reject the deployment.
virtualRepositories: #Virtual repositories configuration
foo-helm-prod-us: #The virtual repository name
type: maven #The package type
repositories: #A list of local and remote repositories that will be aggregated under this virtual repository
description: """" #A free text field that describes the content and purpose of the repository
notes: """" #A free text field to add additional notes about the repository
dockerApiVersion: V1 #Only for Docker repositories. The Docker API version
includesPattern: #Provides a way to filter out specific repositories when trying to resolve the location of different artifacts (Ant-like pattern)
excludesPattern: #Provides a way to filter out specific repositories when trying to resolve the location of different artifacts (Ant-like pattern)
externalDependencies: #Only for npm repositories. External dependencies configuration.
enabled: false #When set, depenency rewrite for the specified npm repository will be enabled
patterns: #Optional include patterns to match external dependencies. Ant-style path expressions are supported (*, **, ?). For example, specifying **/github.com/** will only allow external dependencies from github.com host
- ""**/github.com/**""
keyPair: keypairvirtual1 #Only for Maven repositories, for WebStart and Jar signing. The alias of the keypair configured in the Signing Keys page
pomRepositoryReferencesCleanupPolicy: discard_any_reference #Only for Maven repositories. (1) Discard Active References - Removes repository elements that are declared directly under project or under a profile in the same POM that is activeByDefault. (2) Discard Any References - Removes all repository elements regardless of whether they are included in an active profile or not. (3) Nothing - Does not remove any repository elements declared in the POM.
repoLayout: maven-2-default #Sets the layout that the repository should use for storing and identifying modules
virtualCacheConfig:
virtualRetrievalCachePeriodSecs: 600 #This value refers to the number of seconds to cache metadata files before checking for newer versions on aggregated repositories. A value of 0 indicates no caching
artifactoryRequestsCanRetrieveRemoteArtifacts: false #Determines whether artifact requests coming from other instance of Artifactory can be fulfilled by accessing this virtual repository's remote repositories, or by only accessing its caches (default)
forceNugetAuthentication: false
{code}
Then run the following API command:
{code:java}
$ curl -uadmin:password -XPATCH ""http://localhost:8081/artifactory/api/system/configuration"" -H ""Content-Type:application/yaml"" -T configuration.yml
{code}
If you used the above yaml file you will have two repositories, one local and one virtual, named foo-helm-prod-us.

 

 

 ",,,,,,,,,,,,,RTFACT-16645,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxdj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
after upgrade 5.5.1 to 6.11.3 getting error Sending HTTP error code 404: Failed to persist file with sha1,RTFACT-19755,76174,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jonathan,jonathan,28/Jul/19 11:10 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"2019-07-28 09:22:43,708 [http-nio-8081-exec-4129] [ERROR] (o.a.w.s.RepoFilter :262) - Upload request of file failed due to {}
java.nio.file.AccessDeniedException: Failed to persist file with sha1: e4113c986d8c6a06ccdd0c8de11d907c93fe5a02
 at org.jfrog.storage.binstore.providers.tools.FilePersistenceHelper.persistFile(FilePersistenceHelper.java:89)
 at org.jfrog.storage.binstore.providers.tools.FilePersistenceHelper.saveStreamFileAndMove(FilePersistenceHelper.java:109)
 at org.jfrog.storage.binstore.providers.FileBinaryProviderImpl.addStream(FileBinaryProviderImpl.java:44)
 at org.jfrog.storage.binstore.providers.FileCacheBinaryProviderImpl.addStream(FileCacheBinaryProviderImpl.java:126)
 at org.artifactory.storage.db.binstore.service.BinaryServiceImpl.addBinary(BinaryServiceImpl.java:386)
 at sun.reflect.GeneratedMethodAccessor584.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
 at java.lang.reflect.Method.invoke(Unknown Source)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
 at com.sun.proxy.$Proxy186.addBinary(Unknown Source)
 at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1817)
 at sun.reflect.GeneratedMethodAccessor597.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
 at java.lang.reflect.Method.invoke(Unknown Source)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206)
 at com.sun.proxy.$Proxy155.saveResource(Unknown Source)
 at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:571)
 at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:554)
 at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:431)
 at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:421)
 at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:402)
 at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:231)
 at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:197)
 at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:140)
 at sun.reflect.GeneratedMethodAccessor573.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
 at java.lang.reflect.Method.invoke(Unknown Source)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
 at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)
 at com.sun.proxy.$Proxy193.upload(Unknown Source)
 at org.artifactory.webapp.servlet.RepoFilter.doUpload(RepoFilter.java:254)
 at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:172)
 at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
 at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)
 at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
 at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
 at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
 at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
 at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
 at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
 at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
 at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
 at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
 at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
 at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
 at java.lang.Thread.run(Unknown Source)
2019-07-28 09:22:43,708 [http-nio-8081-exec-4129] [WARN ] (o.a.w.s.RepoFilter :263) - Sending HTTP error code 404: Failed to persist file with sha1: e4113c986d8c6a06ccdd0c8de11d907c93fe5a02",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzxcv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Oct/20 1:02 PM;lxdanilov;Periodically we also have a similar error (v7). It's happening when some artifact is deployed.

 
{code:java}
[INFO ] [3203dec1c205ed6f] [o.a.e.UploadServiceImpl:439   ] [p-nio-8081-exec-5263] - Deploy to 'maven-get:com/test/test-maven-deploy/maven-metadata.xml' Content-Length: 554 (estimation)
[ERROR] [3203dec1c205ed6f] [b.p.t.FilePersistenceHelper:87] [p-nio-8081-exec-5263] - Failed moving  '/storage/eventual/_pre/dbRecord1807898313312717743.bin'  to  '/storage/eventual/_add/22/22aaaa0f9596a1974caa8ff67425d52615bd2919e'. Access to file denied null
[ERROR] [3203dec1c205ed6f] [o.a.w.s.RepoFilter:303        ] [p-nio-8081-exec-5263] - Upload request of maven-get:com/test/test-maven-deploy/maven-metadata.xml failed due to {}
[WARN ] [3203dec1c205ed6f] [o.a.w.s.RepoFilter:304        ] [p-nio-8081-exec-5263] - Sending HTTP error code 404: Failed to persist file with sha1: 22aaaa0f9596a1974caa8ff67425d52615bd2919e
{code}
 
 ",,,,,,,,,,
Upgrade from 6.10.x to 6.11.x fails,RTFACT-19752,76108,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Verhoef,Verhoef,26/Jul/19 6:21 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Upgrade,,,,,,,0,artifactory,,,,,"When upgrading toa 6.11.x release from 6.10.x release the following error occurs:

2019-07-26 07:41:02,421 [art-init] [INFO ] (o.a.s.d.v.c.DbSqlConverterUtil:93) - Starting schema conversion: /conversion/mysql/mysql_v217_create_jobs_table.sql
2019-07-26 07:41:02,426 [art-init] [ERROR] (o.j.s.u.DbStatementUtils:60) - Failed to execute query: Table 'jobs' already exists:
CREATE TABLE jobs (
 job_id BIGINT NOT NULL,
 job_type VARCHAR(32) NOT NULL,
 job_status VARCHAR(32) NOT NULL,
 started BIGINT NOT NULL,
 finished BIGINT,
 additional_details VARCHAR(2048),
 CONSTRAINT jobs_pk PRIMARY KEY (job_id)
)
2019-07-26 07:41:02,430 [art-init] [ERROR] (o.a.s.d.v.c.DbSqlConverterUtil:87) - Could not convert DB using v217_create_jobs_table converter due to Table 'jobs' already exists

 

 ","RHEL 7

Database: MySQL 5.5.60-MariaDB. Driver: MySQL Connector/J mysql-connector-java-8.0.12",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzx3j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
yarn publish fails to overwrite package with 403 ,RTFACT-19750,76092,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,25/Jul/19 9:21 PM,16/Feb/21 1:37 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Currently, if you try to overwrite a package with the ""yarn publish"", you will get a forbidden when trying to publish the metadata:

(base) mattheww-mac2:npmtest mattheww$ yarn publish 

*yarn publish v1.17.3*

warning ../package.json: No license field

[1/4] Bumping version...

info Current version: 6.0.1

question New version: 6.0.1

[2/4] Logging in...

info npm username: matthewwtest

info npm email: a@b.com

question npm password: 

success Logged in.

[3/4] Publishing...

error Couldn't publish package: ""http://mill.jfrog.info:12406/artifactory/api/npm/npm-local/matthewwtest: forbidden""

info Visit *https://yarnpkg.com/en/docs/cli/publish* for documentation about this command.

 

Request.log:

20190725211658|60|REQUEST|12.244.40.18|matthewwtest|PUT|/api/npm/npm-local/-/user/org.couchdb.user:matthewwtest|HTTP/1.1|201|160
20190725211659|60|REQUEST|12.244.40.18|matthewwtest|PUT|/api/npm/npm-local/matthewwtest|HTTP/1.1|403|1565",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzwzz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"29/Jul/19 8:37 PM;mattheww;it seems npm doesnt let you overwrite packages either:

[https://stackoverflow.com/questions/27873515/is-there-a-workaround-for-npm-publish-f]",,,,,,,,,,
pip install for an anonymous user asks for credentials,RTFACT-19749,76091,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,25/Jul/19 8:54 PM,16/Feb/21 1:38 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Download,PyPI,,,,,,0,,,,,,"pip install for an anonymous user asks for credentials when the artifact is blocked for download by Xray due to the option of Block unscanned artifact. The response should be that pip install should receive a 403 error. Steps to reproduce 

1. Configure pip to resolve from Artifactory, added the following in pip.conf

_[global]_
_index-url = [http://35.239.5.226:8081/artifactory/api/pypi/pypi/simple]_

2. Checked ""Allow Anonymous Access"" in Artifactory-> Security configuration

3. Configure a watch with the pypi-remote repository as a resource. Add a policy to it with the rule and enable ""Block download"" and ""Block unscanned artifacts"" in it.

4. Perform a pip install and it asks for the user details as shown below :

pip install r53  --trusted-host 35.239.5.226
Looking in indexes: http://35.239.5.226:8081/artifactory/api/pypi/pypi/simple
Collecting r53
User for 35.239.5.226:8081:

5. On adding the credentials I get the 403 error as shown below :

ERROR: HTTP error 403 while getting http://35.239.5.226:8081/artifactory/api/pypi/pypi/packages/packages/f9/6c/ef08eaff88d31aa47280032ace3932d1f99be980792afff34898c033eb91/r53-0.4.tar.gz#sha256=d3145407f03c4b9a6c5e7906765e94712325d37254453bb971985b41854a704a (from [http://35.239.5.226:8081/artifactory/api/pypi/pypi/simple/r53/)]

 

The behavior should be that this 403 error should be shown on pip install and there should not be a prompt to add user credentials

This should give a 403 error. ",,,,,,,,,,,,,RTFACT-17708,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzwzr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
s3Old provider does not work,RTFACT-19748,76085,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,25/Jul/19 6:40 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.3,6.9.2,,,,,,,,,,,,,0,,,,,,"Trying to connect using the s3Old chain with the below binarystore.xml:

<config version=""2"">
 <chain template=""s3Old""/>

<provider id=""cache-fs"" type=""cache-fs"">
 <maxCacheSize>5000000000</maxCacheSize>
 </provider>

<provider id=""s3Old"" type=""s3Old"">
 <endpoint>s3.amazonaws.com</endpoint>
 <identity>...</identity>
 <credential>...</credential>
 <path>1564079562714</path>
 <bucketName>artifactory-mill-bucket</bucketName>
 </provider>
 </config>

Fails with:

2019-07-25 18:37:19,180 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: com.google.common.base.Objects$ToStringHelper

java.lang.reflect.InvocationTargetException: null

...

Caused by: java.util.ServiceConfigurationError: org.jclouds.providers.ProviderMetadata: Provider org.jclouds.aws.s3.AWSS3ProviderMetadata could not be instantiated

...

Caused by: java.lang.NoClassDefFoundError: com/google/common/base/Objects$ToStringHelper

 

If s3Old can't be used anymore, we should remove it from our documentation ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzwyf:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Replication of empty folder with properties, will never replicate the properties at 1st iteration",RTFACT-19738,76050,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,25/Jul/19 11:32 AM,16/Feb/21 1:39 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,Replication,,,,,,,0,PB_Done,,,,,"Replication of empty folder with properties, will never replicate the properties at 1st iteration 

*+Steps to reproduce:+*
 # Create 2 Artifactory instances, in both create generic local repositories.
 # Configure PUSH replication (not event) from one server to another (between the generic local repos).
 # To source Artifactory, deploy a file to a path that will include a folder (generic-local/folder/file.ext).
 # delete the ""file.ext"".
 # Configure properties to the ""folder"" item.
 # Trigger the replication once. See that folder was replicated, but without the properties.
 # If you run the replication once again, properties will be sent.

Issue seem to be in the source server, that is not even trying to send the properties during the first iteration.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzwq7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
wrong Maven Metadata on SNAPSHOT only Repository,RTFACT-19723,75935,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,christian.schneider@inverso.de,christian.schneider@inverso.de,24/Jul/19 10:28 AM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,5.4.3,,,,,,,Maven,Metadata,,,,,,1,,,,,,"Hi there,

we run Artifactory Professional 5.4.3 rev 50403900.

We`ve setup different repositorys for SNAPSHOT (named x.y.z-SNAPSHOT) Builds and Release (named x.y.z-STABLE) Builds and aggregate them via virtual repositorys. The Maven Metadata for an artifact in the Release Repos looks okay.

In the SNAPSHOT Repo there seems to be a point when there is wrong Maven Metadata generated for an artifact but the explicit Versions SNAPSHOT Metadata is okay.

Example:

datentypen-basis.jar has only SNAPSHOT Versions in that repository with the Version Format:

19.60.0-SNAPSHOT

19.61.0-SNAPSHOT

19.62.0-SNAPSHOT

The (wrong) Artifacts overall Maven Metadata looks like:
{noformat}
<?xml version=""1.0"" encoding=""UTF-8""?>
<metadata>
  <groupId>de.vkb.gk</groupId>
  <artifactId>datentypen-basis</artifactId>
  <versioning>
    <latest>19.62.0</latest>
    <release>19.62.0</release>
    <versions>
      <version>19.62.0</version>
      <version>19.62.0-SNAPSHOT</version>
    </versions>
    <lastUpdated>20190724074402</lastUpdated>
  </versioning>
</metadata>{noformat}
There is a 19.62.0 Version introduced which is neither our STABLE Version nor existing anywhere. There are only SNAPSHOT Builds for that artifact in that repository.

This in turn leeds to wrong resolution using maven targets detecting the ""latest"" Version of an artifact via maven versions plugin for example.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzw2n:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Aug/19 9:19 AM;aweiss;The problem occurs when you I try to set artifactory properties during the maven deployment like this:


[https://www.jfrog.com/confluence/display/RTF/Using+Properties+in+Deployment+and+Resolution]
{code:java}
            <snapshotRepository>
                <id>artifactory-systemx-snapshots</id>
                <url>https://artifactoryurl.de/systemx-mvn-snapshot-local;systemx_build_id=${systemx_build_id}</url>
            </snapshotRepository>
{code}","09/Aug/19 9:28 AM;aweiss;I am a colleague of Christian Schneider.",,,,,,,,,
Nuget API performance can be degraded due to excessive OData (Java) Logging,RTFACT-19693,75664,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,22/Jul/19 8:01 AM,17/Feb/21 7:08 AM,18/Feb/21 8:59 AM,,6.10.3,,,,,,,NuGet,,,,,,,2,,,,,,"Nuget packages resolution times can increase significantly (and cause build timeouts) in case there's a relatively large Nuget API usage, and Java Logging is set to FINE (see bottom of ticket for config location).

Here a few example requests:

{code}
20190626141131|71235|REQUEST|127.0.0.1|anonymous|GET|/api/nuget/nugets/Download/StyleCop.Analyzers/1.1.118|HTTP/1.0|200|377566
20190626141317|60969|REQUEST|127.0.0.1|anonymous|GET|/api/nuget/nugets/Download/System.Xml.ReaderWriter/4.3.1|HTTP/1.0|200|1380436
20190626141330|61149|REQUEST|127.0.0.1|anonymous|GET|/api/nuget/nugets/Download/System.Spatial/5.8.4|HTTP/1.0|200|1115668
{code}

Taking thread dumps from an instance suffering from prolonged requests, you will see threads being blocked due to a shared (java.util.logging) Log manager:

{code}
""http-nio-8081-exec-206"" Id=8039 in BLOCKED on lock=java.util.logging.ConsoleHandler@210077a7
     owned by http-nio-8081-exec-202 Id=8034
    at java.util.logging.StreamHandler.publish(StreamHandler.java:206)
    at java.util.logging.ConsoleHandler.publish(ConsoleHandler.java:116)
    at java.util.logging.Logger.log(Logger.java:738)
    at java.util.logging.Logger.doLog(Logger.java:765)
    at java.util.logging.Logger.log(Logger.java:851)
    at org.odata4j.producer.inmemory.InMemoryEdmGenerator.generateToOneNavProperties(InMemoryEdmGenerator.java:274)
    at org.odata4j.producer.inmemory.InMemoryEdmGenerator.createNavigationProperties(InMemoryEdmGenerator.java:246)
    at org.odata4j.producer.inmemory.InMemoryEdmGenerator.generateEdm(InMemoryEdmGenerator.java:94)
    at org.odata4j.producer.inmemory.InMemoryProducer.getMetadata(InMemoryProducer.java:98)
    at org.odata4j.producer.inmemory.InMemoryProducer.getEntitiesCount(InMemoryProducer.java:542)
    at org.jfrog.repomd.nuget.odata.response.CountResponseBuilder.createResponse(CountResponseBuilder.java:23)
    at org.jfrog.repomd.nuget.rest.handler.NuGetLocalRepoHandler.findPackagesByIdCount(NuGetLocalRepoHandler.java:162)
    at org.artifactory.addon.nuget.search.delegate.id.FindPackagesByIdFeedRequestDelegate.getLocalCountResponse(FindPackagesByIdFeedRequestDelegate.java:47)
    at org.artifactory.addon.nuget.search.delegate.BaseRequestDelegate.getLocalCount(BaseRequestDelegate.java:73)
    at org.artifactory.addon.nuget.search.delegate.VirtualRepoSearchHandler.getRepoCount(VirtualRepoSearchHandler.java:70)
    at org.artifactory.addon.nuget.search.delegate.VirtualRepoSearchHandler.getRepoCountSizeNoSkip(VirtualRepoSearchHandler.java:159)
    at org.artifactory.addon.nuget.search.delegate.VirtualRepoSearchHandler.handleSkipAndTop(VirtualRepoSearchHandler.java:85)
    at org.artifactory.addon.nuget.search.delegate.VirtualRepoSearchHandler.getFeedFromRepo(VirtualRepoSearchHandler.java:54)
    at org.artifactory.addon.nuget.search.delegate.BaseRequestDelegate.responseFromVirtual(BaseRequestDelegate.java:147)
    at org.artifactory.addon.nuget.search.delegate.id.FindPackagesByIdFeedRequestDelegate.handleRequestForVirtual(FindPackagesByIdFeedRequestDelegate.java:37)
    at org.artifactory.addon.nuget.search.delegate.id.FindPackagesByIdFeedRequestDelegate.handleRequestForVirtual(FindPackagesByIdFeedRequestDelegate.java:23)
    at org.artifactory.addon.nuget.search.NuPkgSearchRequestHandler.delegateSearchRequestToRepos(NuPkgSearchRequestHandler.java:83)
    at org.artifactory.addon.nuget.search.NuPkgSearchRequestHandler.findPackagesById(NuPkgSearchRequestHandler.java:51)
    at org.artifactory.addon.nuget.repo.NuGetVirtualRepoHandler.findPackagesById(NuGetVirtualRepoHandler.java:165)
    at org.jfrog.repomd.nuget.rest.NuGetSubResource.findPackagesById(NuGetSubResource.java:133)  
{code}

Sigfnifically slowing down the  

{code}
Jul 02, 2019 4:28:39 PM org.odata4j.producer.inmemory.InMemoryEdmGenerator generateToOneNavProperties
FINE: genToOnNavProp V2FeedPackage - IconUrl(class java.lang.String) eetName2: null
Jul 02, 2019 4:28:39 PM org.odata4j.producer.inmemory.InMemoryEdmGenerator generateToOneNavProperties
FINE: genToOnNavProp V2FeedPackage - PackageSize(long) eetName2: null
Jul 02, 2019 4:28:39 PM org.odata4j.producer.inmemory.InMemoryEdmGenerator generateToOneNavProperties
FINE: genToOnNavProp V2FeedPackage - MinClientVersion(class java.lang.String) eetName2: null
Jul 02, 2019 4:28:39 PM org.odata4j.producer.inmemory.InMemoryEdmGenerator generateToOneNavProperties
FINE: genToOnNavProp V2FeedPackage - DownloadCount(long) eetName2: null
Jul 02, 2019 4:28:39 PM org.odata4j.producer.inmemory.InMemoryEdmGenerator generateToOneNavProperties
FINE: genToOnNavProp V2FeedPackage - Published(class java.lang.String) eetName2: null
{code}


* *Workaround*: lower the Java logging configuration (not log4j under the Tomcat configurable logging (separate from Artifactory's codebase) $ARTIFACTORY_HOME/conf/tomcat/logging.properties from:

java.util.logging.ConsoleHandler.level = FINE

to:

java.util.logging.ConsoleHandler.level = INFO 

* Was not able to reproduce locally!

",,,,,,,,,,,,,,,,,,,"22/Jul/19 8:05 AM;andreik;Screen Shot 2019-07-22 at 10.54.59.png;https://www.jfrog.com/jira/secure/attachment/33633/Screen+Shot+2019-07-22+at+10.54.59.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzujr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Bad UX UI experience when trying to edit permissions on the UI,RTFACT-19691,75643,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,21/Jul/19 4:26 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.3,,,,,,,UI,,,,,,,0,,,,,,"Confusing flow causes the impressions that permissions editing is supposedly not working.

Steps to reproduce:

1. Try to edit a permission target on the UI
2. Add a new user to the permission target - *notice that you will see some default permissions allocation supposedly to the same user*
3. Try to save - you will see the new user is not saved

The culprit is that you must click (stand) on the user itself to add the permissions and only then click on save.",,,,,,,,,,,,,,,,,,,"21/Jul/19 4:33 PM;andreik;permissionAuditUserBad.mov;https://www.jfrog.com/jira/secure/attachment/33609/permissionAuditUserBad.mov",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzufr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Exception thrown by Artifactory scheduled Jobs should be printed in the log,RTFACT-19688,75605,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shayb,shayb,shayb,21/Jul/19 9:55 AM,17/Feb/21 7:32 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"In some scenarios, on error, Runtime Exceptions can be thrown by a scheduled Artifactory Job (i.e. Garbage Collection). Such exceptions errors are not always printed into the log, depending on the Job implementation.

Job errors must be printed into the log by default",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzu8v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Nuget packages in Artifactory show ""Unknown"" in License",RTFACT-19685,75575,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,saiu,saiu,19/Jul/19 11:34 PM,17/Feb/21 7:35 AM,18/Feb/21 8:59 AM,,6.10.1,6.6.1,,,,,,License,NuGet,,,,,,0,,,,,,"When resolving a nuget package from Artifactory, the Licenses field in the General tab shows Not Found, and on scanning for the license it would show ""Unknown(unknown)"" even though the license exists in the package in the form ""LICENSE.TXT"".

 

SIDE NOTE: Xray successfully picks the License though.(As it should do).",,,,,,,,,,,,,,,,,,,"19/Jul/19 11:32 PM;saiu;Screen Shot 2019-07-13 at 4.41.33 PM.png;https://www.jfrog.com/jira/secure/attachment/33553/Screen+Shot+2019-07-13+at+4.41.33+PM.png","19/Jul/19 11:34 PM;saiu;Screen Shot 2019-07-19 at 4.33.01 PM.png;https://www.jfrog.com/jira/secure/attachment/33551/Screen+Shot+2019-07-19+at+4.33.01+PM.png","19/Jul/19 11:34 PM;saiu;Screen Shot 2019-07-19 at 4.33.36 PM.png;https://www.jfrog.com/jira/secure/attachment/33552/Screen+Shot+2019-07-19+at+4.33.36+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzu3r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Blocked artifacts are downloadable in the tree browser,RTFACT-19684,75564,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,19/Jul/19 6:55 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Download,,,,,,,0,,,,,,"On trying to download a blocked artifact from tree browser(Right-click on Artifact and download), the download goes through. The download option on the right-hand side gives the download blocked error.

 

This occurs on adding a custom issue to an Artifact and creating a violation. 

 

Found this issue while testing on a Nuget package. Here are the steps to reproduce.  

Steps to reproduce.

1. Download an artifact with no violation using the NuGet client install.

2. Add a custom issue to the artifact and configure the block download in Xray

3. In UI the download of the same artifact would be blocked. But in the tree browser, right-click and click download, the artifact is downloaded.

 

Checked the request logs, but could not find any request being sent on right-click download. The other Download option sends a request and gets a 403 as shown below :

 

Request for hte Download option in the right-hand side of the Repository browser page 
20190719183547|4|REQUEST|12.244.40.18|admin|GET|/ui/artifactxray/isBlocked|HTTP/1.1|403|0

But then no request is generated for the right click on the artifact and click on the download menu.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzu1j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Home page flickers in IE v11 when message length reaches more than 360 characters.,RTFACT-19683,75553,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,19/Jul/19 2:53 PM,17/Feb/21 7:35 AM,18/Feb/21 8:59 AM,,6.11.1,6.8.6,,,,,,Web UI,,,,,,,1,,,,,,"Artifactory Home page flickers in IE v11 when message length reaches more than 360 characters.
*+Steps to reproduce:+*
-> Login to Artifactory
-> Navigate to *Admin -> General Configuration -> enable Custom Message*
-> Make sure *Title* length has more than 80 characters, *Title color :*#EB0A19 and *Message* length should be more than 363 characters

The same behavior is observed when tried in Private Browsing Window.


Also please note that if the IE browser window is wide enough to display the whole message, then no problem that is if you zoom out far enough so that the whole message is displayed on the screen.

Note: The issue not reproducible in Chrome.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzztzb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Issue with large file downloads,RTFACT-19680,75496,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,motoskia,motoskia,18/Jul/19 1:43 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.10.4,,,,,,,Artifactory Home,,,,,,,0,artifactory,artifacts,repository,,,"Package download is keep failing from windows, same can be download manually and in other environment such as linux and Mac. 
 # curl -u ""login"" https://artifactory-na.xyz.com/artifactory/abc-generic-stable-local/release/R120.x/R120.1.zip > R120.1.zip
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
 43 4662M   43 2051M    0     0  4322k      0  0:18:24  0:08:06  0:10:18 5831k
curl: (18) transfer closed with 2737783100 bytes remaining to read

 

Could you please confirm is there any limitation for curl on windows?

 

Note: artifacotry version 6.10.4",Production and QA,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzztpj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Jun/20 7:33 PM;bwaters;I had this issue on 6.5.9 and after upgrading to 6.10.0 the issue still persists.",,,,,,,,,,
"Anonymous docker pull fails when Password Encryption Policy is set to ""required""",RTFACT-19679,75495,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,oronc,oronc,18/Jul/19 1:37 PM,17/Feb/21 7:36 AM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Docker,,,,,,,1,PB_Done,,,,,"When trying to use docker pull with anonymous access and in the Security configuration the ""Password Encryption Policy"" field is set to ""required"", the pull will fail with the following error:

""unauthorized: BAD_CREDENTIAL"".

+*Steps to reproduce:*+
 # Allow anonymous access to Artifactory and configure the suitable effective permissions on the docker repositories.
 # Run a successfull docker pull against Artifactory (without docker login).
 # In the Security configuration set the ""Password Encryption Policy"" field to ""required""
 # docker pull will now fail with the error: ""unauthorized: BAD_CREDENTIAL"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4p7:ax9c",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Oct/19 8:14 PM;peter.nguyen;This also seems to be the case when ""Password Encryption Policy"" is set to ""supported"" in v6.11.6. Please provide details on a workaround if one exists or how this will be fixed in a future release.",,,,,,,,,,
Artifact download fails when binary is from a different git source,RTFACT-19654,75277,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alatvala-eficode,alatvala-eficode,16/Jul/19 10:10 AM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,6.10.6,,,,,,,CocoaPods,,,,,,,0,,,,,,"Having an Artifactory CocoaPods remote repository configured with the default URL as `https://github.com/` and Specs Repo URL configured as `https://github.com/CocoaPods/Specs`, and using `cocoapods-art` plugin.

Tested and working are
 * `GoogleSignIn` with source http `https://dl.google.com/...` (Artifactory doesn't cache this!, related to RTFACT-13517)
 * `ObjectiveSugar` with source git `https://github.com/mneorr/ObjectiveSugar.git`

Tested and not working is
 * `Pelcro` with source git `https://bitbucket.org/michael-pelcro/ios-sdk.git` 

It seems like downloading CocoaPods hosted on GitHub works correctly, while externally hosted CocoaPods (which exist in the public GitHub Spec!) fail to be cached and even fail to be downloaded if the source is git from another provider.

The failing download (with --verbose flag) is returning a 404 as follows:

```

Configuration is set-up by following your wiki page: [https://www.jfrog.com/confluence/display/RTF/CocoaPods+Repositories]","pod repo-art v1.0.3
pod 1.7.4
macOS High Sierra 10.13.6",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzsl3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifact download fails when binary is from a different git source,RTFACT-19653,75276,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alatvala-eficode,alatvala-eficode,16/Jul/19 10:10 AM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,6.10.6,,,,,,,CocoaPods,,,,,,,0,,,,,,"Having an Artifactory CocoaPods remote repository configured with the default URL as `https://github.com/` and Specs Repo URL configured as `https://github.com/CocoaPods/Specs`, and using `cocoapods-art` plugin.

Tested and working are
 * `GoogleSignIn` with source http `https://dl.google.com/...` (Artifactory doesn't cache this!, related to RTFACT-13517)
 * `ObjectiveSugar` with source git `https://github.com/mneorr/ObjectiveSugar.git`

Tested and not working is
 * `Pelcro` with source git `https://bitbucket.org/michael-pelcro/ios-sdk.git` 

It seems like downloading CocoaPods hosted on GitHub works correctly, while externally hosted CocoaPods (which exist in the public GitHub Spec!) fail to be cached and even fail to be downloaded if the source is git from another provider.

The failing download (with --verbose flag) is returning a 404 as follows:

```

Configuration is set-up by following your wiki page: [https://www.jfrog.com/confluence/display/RTF/CocoaPods+Repositories]","pod repo-art v1.0.3
pod 1.7.4
macOS High Sierra 10.13.6",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzskv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Pypi recalculate index operation depend on the existence of the ""pypi.name"" property.",RTFACT-19642,75189,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yehudah,yehudah,15/Jul/19 3:39 PM,17/Feb/21 7:41 AM,18/Feb/21 8:59 AM,,,,,,,,,PyPI,,,,,,,0,PB_Done,,,,,"Currently, when we trigger ""recalculate index"" operation on Pypi repository, Artifactory will reindex the artifacts which have the ""pypi.name"" property, therefore, in case an artifact don't have this property Artifactory will skip it and  it will miss from the repository index (simple.html file).

We can get into situation where the ""pypi.name"" property is missing in few scenarios:
 # In case the poolMaxQueueSize (artifactory.async.poolMaxQueueSize) is full and it will reject new events.
 # In case we will restart Artifactory before it finish to perform all the operations in the poolMaxQueueSize.

Steps to reproduce the issue:
 # Deploy Pypi package to Pypi repository and immediately restart Artifactory.
 # Trigger recalculate index on the Pypi repository from step 1 ==> the operation will not find anything to index since the package missing the ""pypi.name"" property.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc6fjp:y",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remote repository creates entry for non-existing packages,RTFACT-19640,75179,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,javierg,javierg,15/Jul/19 1:50 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Conan,,,,,,,2,community,Conan,CPE,P3,,"If a Conan remote repository is created and a package that doesn't exist is requested from the Conan client, then Artifactory creates the corresponding {{index.json}} file for that package and the UI shows an entry for the package.

This happens only in the online mode; if the proxy is offline, no entry is created.

*Expected behavior:* if the package does not exist in the proxy repository, no entry in the remote one should be created.

*How to reproduce:*
# Create a remote conan repository, pointing to any valid proxy: {{https://conan.bintray.com}} 
# Add the created remote to the Conan client: ""{{conan remote add <remote> <url>}}""
# Install any non-existing-package: ""{{conan install non-existing/version@user/channel -r <remote>}}""

",,,,,,,,,,,,,,,,,,,"15/Jul/19 1:48 PM;javierg;image-2019-07-15-15-48-27-014.png;https://www.jfrog.com/jira/secure/attachment/33315/image-2019-07-15-15-48-27-014.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc4bx8:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"21/Oct/20 12:18 PM;axel3rd;I think the priority of this bug can be *seriously increased*, because in real life this is a painful bug.

When you have a _conan-local_, a _conan-remote-center_ (remote of https://conan.bintray.com/) and a _conan-virtual_ for aggregation, publishing and using many local packages become a nightmare.

Teams publish packages, some other are using it. If referenced versions doesn't exist (sometime), request sent on _conan-remote-center_ and entries is created.

Browse or use UI tree for checking packages:

{code}
http://artifactory.company.com/conan-virtual/_/somePackage
http://artifactory.company.com/conan-virtual/someUser/somePackage
{code}

... you see many versions in the subtree, some can exist, other not, etc.

----

Simple snippet for reproduction with common package...

File {{conanfile.txt}}:
{code}
[requires]
zlib/42.0
{code}

Run: {{conan install conanfile.txt}}",,,,,,,,,,
JFrog CLI upload/download defaults to flat=true,RTFACT-19637,75160,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,josh.watson,josh.watson,15/Jul/19 10:57 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The {{jfrog}} CLI tool defaults to {{flat=true}}, where as the REST API (and filespec documentation), defaults to {{flat=false}}, see: https://www.jfrog.com/confluence/display/RTF/Using+File+Specs.

It says it does this in the CLI documentation, but this is a little bit inconsistent, and means you get an unexpected result on a recursive upload.

Reproduced in CLI 1.7.1 and 1.26.2

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzrz3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Editing the ""Add builds"" section of a permission causes access to be wiped",RTFACT-19623,75048,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,12/Jul/19 7:17 PM,17/Feb/21 7:56 AM,18/Feb/21 8:44 AM,,,,,,,,,Build Info Repository,permissions,,,,,,0,,,,,,"Symptoms: Builds that used to work now return a 403 error on uploads of the buildinfo.json file.

Cause: When adding or changing all the builds in a permission, it causes the user to lose all build access.

Steps to reproduce:
 # Start with a build permission set that grants the user access to build information
 # Remove all builds from the permission target - Don't click save
 # Re-add any build name
 # Recheck the user's permissions again, the build permissions are all now gone

If the user saves the permission after modifying the builds section, they have effectively revoked all build access in the permission.

This applies especially to builds; many times an Admin will replace the default ""all builds"" with a more specific permission set. Editing or removing the entire set can cause unexpected build failures.

 

The same behavior can be seen in Repository permissions as well. Removing all repositories from a permission set wipes all repo-based permission configurations.",,,,,,,,,,,,,,,,,,,"12/Jul/19 7:17 PM;patrickr;Screen Shot 2019-07-12 at 12.11.15 PM.png;https://www.jfrog.com/jira/secure/attachment/33246/Screen+Shot+2019-07-12+at+12.11.15+PM.png","12/Jul/19 7:17 PM;patrickr;Screen Shot 2019-07-12 at 12.14.47 PM.png;https://www.jfrog.com/jira/secure/attachment/33247/Screen+Shot+2019-07-12+at+12.14.47+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzrbr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Storage Api Against Docker Local Repo With Anonymous Access Throws 401 ,RTFACT-19620,75024,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,12/Jul/19 2:16 AM,17/Feb/21 7:56 AM,18/Feb/21 8:59 AM,,6.11.1,6.9.2,,,,,,,,,,,,,2,PB_Done,,,,,"Steps to reproduce:

 
 # Create Docker Local repository
 # Upload an image or random file to that repo that is nested within a folder(e.g: myapp/1.jpg)
 # Add anonymous access to that repo
 # Run this API(example): curl [http://localhost:8081/api/storage/docker-local/myapp]

You will get the following Error:

 {
   ""errors"" : [

{     ""status"" : 401,     ""message"" : ""Unauthorized""   }

]

 

     5. The behavior is the same when you add the slash at the end: curl [http://localhost:8081/api/storage/docker-local/myapp]/

You will get the following Error:

 {
   ""errors"" : [

{     ""status"" : 401,     ""message"" : ""Unauthorized""   }

]

 

  6. However, when you run the API against the repo itself and not the folder and with NO slash at the end it does provide the expected results.

 curl [http://localhost:8081/api/storage/docker-local|http://localhost:8081/api/storage/docker-local/myapp]

 

7. But with slash at the end it again throws the same error:

[curl http://localhost:8081/api/storage/docker-local/|http://localhost:8081/api/storage/docker-local/myapp]

You will get the following Error:

 {
   ""errors"" : [

{     ""status"" : 401,     ""message"" : ""Unauthorized""   }

]

 

This behavior was not observed on any other repository type

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzr6n:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Conan package in multiple repositories is not searchable in Artifactory UI,RTFACT-19612,74986,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pavang,pavang,11/Jul/19 11:40 AM,17/Feb/21 8:00 AM,18/Feb/21 8:59 AM,,6.11.1,6.7.0,,,,,,Conan,,,,,,,0,,,,,,"Steps followed while replicating the scenario:
 * Deployed Conan packages in a Conan repository
 * Created two more Conan repositories
 * Copied Conan packages to these two repositories

+*Expected behavior:*+ Package should be visible on all the available repositories

+*Actual behavior:*+ It shows up only on the latest deployed repository. 

Please note that if we search for the package using AQL it shows up all the repositories

Screenshots are attached for reference",,,,,,,,,,,,,,,,,,,"11/Jul/19 11:34 AM;pavang;Repository_Browser.png;https://www.jfrog.com/jira/secure/attachment/33220/Repository_Browser.png","11/Jul/19 11:34 AM;pavang;Search-Page.png;https://www.jfrog.com/jira/secure/attachment/33219/Search-Page.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzqzj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Properties does not support Boolean-type data,RTFACT-19606,74957,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lzwzzy,lzwzzy,11/Jul/19 3:45 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,,,,,,,,0,artifactory,,,,,"Properties do not support Boolean data, but can be uploaded, resulting in buildinfo can not view, system data can not be exported

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzqtr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM Can not deserialize instance of java.lang.String out of START_OBJECT token,RTFACT-19598,74913,Bug,In Progress,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Oleksis,gskolysz,gskolysz,10/Jul/19 11:49 AM,10/Feb/21 10:17 AM,18/Feb/21 8:59 AM,,6.10.6,,,,,,,,,,,,,,0,P1,PB_Done,,,,"{noformat}
2019-07-10 04:47:04,200 [http-nio-127.0.0.1-8081-exec-6179] [ERROR] (o.a.a.n.r.NpmRemoteRepoHandler:478) - Error while parsing the response of a remote npm JSON query on 'https://registry.npmjs.org/storage-ui': Can not deserialize instance of java.lang.String out of START_OBJECT token
 at [Source: org.jfrog.storage.binstore.common.ReaderTrackingInputStream@32c0c9f0; line: 1, column: 368] (through reference chain: org.jfrog.repomd.npm.model.NpmPackageMetadata[""time""]->org.jfrog.repomd.npm.model.Time[""unpublished""]){noformat}
 
 I saw multiple tickets that stated, that the issue is resolved, but apparently, not for us.

NPM repository setup we have:
{noformat}
npm-virtual:
    npm-local
    npm-remote-to-other-artifactory (couple of these)
    npm-external (registry.npmjs.org
{noformat}
metadata of storage-ui from registry.npmjs.org
{noformat}
{""_id"":""storage-ui"",""name"":""storage-ui"",""time"":{""created"":""2018-12-31T10:44:04.173Z"",""0.0.1"":""2018-12-31T10:44:04.336Z"",""modified"":""2019-01-01T07:06:16.767Z"",""0.0.2"":""2018-12-31T10:57:35.862Z"",""0.0.3"":""2018-12-31T11:28:09.346Z"",""0.0.4"":""2018-12-31T11:33:07.855Z"",""0.0.5"":""2018-12-31T11:44:25.035Z"",""0.0.7"":""2018-12-31T11:54:35.706Z"",""0.0.8"":""2019-01-01T04:57:41.683Z"",""unpublished"":{""name"":""laamginghong"",""time"":""2019-01-01T07:06:16.767Z"",""tags"":{""latest"":""0.0.2""},""versions"":[""0.0.2""],""maintainers"":[{""name"":""laamginghong"",""email"":""351390560@qq.com""}]}}}
 {noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyezk:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Non-harmful Jersey warning is printed (catalina.out) when generating token via REST API,RTFACT-19595,74898,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Maayana,Maayana,10/Jul/19 9:30 AM,17/Feb/21 8:01 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"Steps to reproduce (tested on 6.10.3):

1.Run the following rest:

curl -uadmin:<PASSWROD> -XPOST ""http://localhost:8081/artifactory/api/security/token"" -d ""username=<USER>"" ""scope=<Scope>""

2.Notice the token is getting generated successfully however, the following warning occurs:

{{Jul 10, 2019 12:27:27 PM org.glassfish.jersey.servlet.WebComponent filterFormParameters}}
{{WARNING: A servlet request to the URI http://localhost:8081/artifactory/api/security/token contains form parameters in the request body but the request body has been consumed by the servlet or a servlet filter accessing the request parameters. Only resource methods using @FormParam will work as expected. Resource methods consuming the request body by other means will not work as expected.}}

It is important to note that the above does not affect the REST API call's functionality at all (you can also see the respectively request.log entry with 200). 

 ",,,,,,,,,,,,,,,,RTFACT-14427,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzqhz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
npm expired metadata is not updated after changing the repo upstream url,RTFACT-19589,74879,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,10/Jul/19 12:01 AM,17/Feb/21 8:02 AM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,,,,,,,,2,,,,,,"Steps to reproduce:

-Create 2 Artifactory instances A and B. In instance B, create a local npm repo and deploy a package (in my case i used jquery@3.4.1)

-On instance A, create a smart remote repo proxying instance B's npm-local. Set Missed Retrieval Cache Period and Metadata Retrieval Cache period to 0 or low value. Request the metadata by ""curl http://<instanceAurl>/artifactory/api/npm/npm-remote/jquery""

-Now, on instance A change the remote repo upstream url [https://registry.npmjs.org|https://registry.npmjs.org/]. Request the metadata again after zapping cache so metadata is expired:

""curl http://<instanceAurl>/artifactory/api/npm/npm-remote/jquery""

-See that the metadata is not updated to reflect that from the new upstream url (npmjs.org) that should include more versions than just 3.4.1, and still reflects the metadata from instance B's npm-local repo. The only way to force update  the metadata is to delete the cached package.json for the package (.npm/jquery/package.json)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzqe7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Feb/21 11:50 AM;bert.meedendorp;Is there any solution for this problem? We have a simular problem with the npm remote repo.

The package.json is not updated even if there are new artifact versions on the remote site.

Even the zap cache won't always work.",,,,,,,,,,
Users not listed when using multiple LDAP settings,RTFACT-19577,74790,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dokaspar,dokaspar,09/Jul/19 6:16 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.5.15,,,,,,,LDAP,,,,,,,1,artifactory,,,,,"In our Artifactory 6.5.15 (rev 60515900), we have configured two LDAP settings pointing to the same server. The first setting has searchBase set to 'dn=users'. The second setting was added later and has searchBase set to 'ou=techusers' to import additional technical users from a different subtree in the same LDAP structure. Other than this difference in searchBase, all settings are equal.

This configuration works, both users and techusers can log into Artifactory.

However, all the techusers from the second LDAP setting are nowhere listed:
 * they are missing in the Web UI when accessing Admin > Users 
 * they are not listed when issuing REST calls to {{api/users}} or {{api/security/users/<username>}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzpxr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory wont start after upgrade,RTFACT-19576,74788,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Dalecw,Dalecw,09/Jul/19 2:08 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I am running Artifactory in a Docker container Ubuntu v16.04, Docker v18.09.6, after upgrading to the latest image the app wont start, the derby.log is below. I have also added the 1st few lines of the Catalina.out log for tomcat. No configurations have changed, just versions. Any help would be appreciated.  Thanks.

 

 

derby.stream.error.file=/opt/jfrog/artifactory/logs/derby.log
Database Class Loader started - derby.database.classpath=''
Tue Jul 09 00:06:06 GMT 2019 Thread[localhost-startStop-2,5,main] (XID = 15620509), (SESSIONID = 3), (DATABASE = /opt/jfrog/artifactory/data/derby), (DRDAID = null), Cleanup action starting
Tue Jul 09 00:06:06 GMT 2019 Thread[localhost-startStop-2,5,main] (XID = 15620509), (SESSIONID = 3), (DATABASE = /opt/jfrog/artifactory/data/derby), (DRDAID = null), Failed Statement is: INSERT INTO access_configs (config_name, modified, data) VALUES (?, ?, ?) with 3 parameters begin parameter #1: jfrog.join.key :end parameter begin parameter #2: 1562630766829 :end parameter begin parameter #3: BLOB:Length=93 :end parameter
ERROR 23505: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'ACCESS_CONFIGS_PK' defined on 'ACCESS_CONFIGS'.
 at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
 at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
 at org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)
 at org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)
 at org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)
 at org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)
 at org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)
 at org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)
 at org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)
 at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source)
 at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeLargeUpdate(Unknown Source)
 at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.apache.tomcat.jdbc.pool.StatementFacade$StatementProxy.invoke(StatementFacade.java:114)
 at com.sun.proxy.$Proxy74.executeUpdate(Unknown Source)
 at org.jfrog.storage.JdbcHelper.executeUpdate(JdbcHelper.java:229)
 at org.jfrog.access.server.db.util.AccessJdbcHelperImpl.executeUpdate(AccessJdbcHelperImpl.java:98)
 at org.jfrog.access.server.db.dao.AccessConfigsDao.createConfig(AccessConfigsDao.java:48)
 at org.jfrog.access.server.db.dao.AccessConfigsDao$$FastClassBySpringCGLIB$$a31fa086.invoke(<generated>)
 at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
 at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:746)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
 at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)
 at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
 at org.jfrog.access.server.db.dao.AccessConfigsDao$$EnhancerBySpringCGLIB$$3bb6a711.createConfig(<generated>)
 at org.jfrog.access.server.startup.JoinKeyAccess.saveJoinKeyToDb(JoinKeyAccess.java:138)
 at org.jfrog.access.server.startup.JoinKeyAccess.init(JoinKeyAccess.java:65)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:366)
 at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:309)
 at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:416)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1686)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:573)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)
 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)
 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
 at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)
 at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1135)
 at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1062)
 at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:819)
 at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:725)
 at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:198)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1266)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1123)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)
 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)
 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
 at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:759)
 at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)
 at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:548)
 at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142)
 at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
 at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:386)
 at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
 at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:157)
 at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:137)
 at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:91)
 at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)
 at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5245)
 at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
 at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:754)
 at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:730)
 at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)
 at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:629)
 at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1839)
 at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
 at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
 at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
 at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
 at java.base/java.lang.Thread.run(Thread.java:834)
Cleanup action completed

 

Catalina.out

Access Version: 4.5.0
Access Revision: 40500900


2019-07-09 00:01:51.864 INFO 1478 --- [ost-startStop-2] o.j.a.s.startup.AccessHomeFinderImpl : Using JFrog Access home at '/opt/jfrog/artifactory/access' resolved from: System property (Artifactory)
2019-07-09 00:01:52,176 [localhost-startStop-2] [JFrog-Access] [INFO ] (o.j.a.c.JFrogApplicationContextInitializer:74) - Using JFrog Access home at '/opt/jfrog/artifactory/access'
2019-07-09 00:01:52,182 [localhost-startStop-2] [JFrog-Access] [INFO ] (o.j.a.AccessApplication:50) - Starting AccessApplication v4.5.0 on artifactory with PID 1478 (/opt/jfrog/artifactory/tomcat/webapps/access/WEB-INF/lib/access-application-4.5.0.jar started by artifactory in /opt/jfrog/artifactory/run)
2019-07-09 00:01:52,182 [localhost-startStop-2] [JFrog-Access] [INFO ] (o.j.a.AccessApplication:658) - The following profiles are active: production
Jul 09, 2019 12:01:57 AM org.apache.tomcat.jdbc.pool.ConnectionPool init
SEVERE: Unable to create initial connections of pool.
java.sql.SQLException: Failed to start database '/opt/jfrog/artifactory/data/derby' with class loader java.net.URLClassLoader@4fe3c938, see the next exception for details.
 at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
 at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
 at org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzpxb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Jul/19 1:31 AM;Dalecw;I had to roll back to 6.11.0 to resolve this issue. This could have been an issue with Traefik.

 ",,,,,,,,,,
Nuget pre-release packages can be overwritten without proper permissions,RTFACT-19557,74683,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaharl,shaharl,07/Jul/19 2:05 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,NuGet,,,,,,,6,,,,,,"When pushing a nuget pre-release package (i.e. packages with a srting after the x.x.x version format), it will be overwritten eventhough there is only deploy permission.

As opposed to what seemed to be an expected behaviour, nuget does not allow overwriting of packages.

From nuget support: 

""If you are publishing to [nuget.org|http://nuget.org/], we don’t allow deleting/overwriting packages, as this might break users that depend on them.

We do support “unlisting” packages, which hides them from search results.'

 

Steps to reproduce:

1) Set up a nuget local repository and a non admin user.

2) Give this user read and deploy permissions only - Do not check the overwrite/delete action.

3) Push to that repo a pre-release nuget package twice and it will be overwritten.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzpaf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Inactive user status not updating correctly for SAML.,RTFACT-19545,74580,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,04/Jul/19 8:42 AM,17/Feb/21 8:16 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,4,,,,,,"When checking the “externalRealmStatus” of a user from the UI or using the Rest Api:

UI → Go to Admin user and press the “Check external status”

Rest → https://${ARTIFACTORY}/artifactory/ui/users/externalStatus

The status for SAML users will always be “Inactive user”.

Steps to reproduce:
 # Setup SAML with Artifactory.
 # Create a user and login 
 # Login with Admin user and go to the user page
 # Click the  “Check external status” user will be “Inactive user”

Update:
Due to how SAML is implemented, the checking ability may not always be there (on the idp side), unlike other providers like LDAP. Because of this, it would be nice to have a checkbox that removes this ""check"" in the UI, and not confuse administrators. Or if Artifactory is able to intelligently handle when to show and not show this field (depending on whether the idp gives back any relevant information), would work as well.
",,,,,,,,,,,,JA-1012,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzopz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory error when import zip file,RTFACT-19544,74568,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wailoont,wailoont,04/Jul/19 6:07 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Import/export,,,,,,,0,import,zip,,,,"I have a zip file containing repositories downloaded from another Artifactory.

Zip file size is 6.4 gb.

I use Artifactory Import Repository from Zip to import the zip file to my repository, however after the loading bar from upload completes, the Import button do not enabled.

It is still disabled.

Checking in browser console shows :

""Failed to load resource: the server responded with a status of 502 (Bad Gateway)""

https://artifactory/ui/artifactimport/upload

 

Expectation :

Import button is enabled and allow me to import after completion of upload.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzonj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Jul/20 11:21 PM;solarsnake;I also see this issue, did you ever find a resolution?",,,,,,,,,,
Index file is not moved to the distribution directory,RTFACT-19542,74550,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sanjeevk,sanjeevk,03/Jul/19 6:13 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.11.1,,,,,,,Debian,,,,,,,0,PB_Done,,,,,"We saw this issue with a Saas customer.

The issue was resolved by correcting a property value and Uriah recommended to raise a JIRA.

 

When reindexing a local debian repository, it would create the index-file in '_temp-xxxxx' directory and fails with following error (when moving the index-file to distribution directory).
{code:java}
[ERROR] (o.j.r.d.r.DebianReleaseMetadataIndexer:113) - Error while assembling index coordinates for distribution jessie, Release index will not be created{code}
 

On further investigation, we found that 1 of the package has a special character in property 'deb.component'.

We changed the value for this property from ' 'main§' to 'main' and it fixed the issue.

I have attached the index-file before (Release) and after (Release (2)) the property change.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzokv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Performance degradation when redundancy < number of nodes,RTFACT-19527,74457,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,02/Jul/19 1:39 PM,17/Feb/21 8:22 AM,18/Feb/21 8:59 AM,,6.0.0,6.11.1,,,,,,,,,,,,,2,PB_Done,,,,,"There is a performance degradation when running in an HA setup, with a number of nodes higher than the configured number of redundancy.

When # of nodes > # of redundancy:
Assuming file is uploaded to node #1, node #1 will stream the file to a random second node - it will be node #2.
Once the streaming is completed, as part of the upload request, node #1 will trigger a HEAD request to node #3 to verify if it exists (endpoint used is HEAD ""/binarystore/provider"").

On node #3 as the receiving of these HEAD request, it triggers a check in his binary providers for the existence of the binary. I would expect cloud storage providers to be filtered out, but they are not. This means node #3 as the receiving of this HEAD request, triggers an additional HEAD request to the cloud storage provider.

In a hybrid setup where Artifactory is installed on-prem, but uses Cloud storage, this makes lots of extra additional requests to the cloud, which was witnessed as a major performance issue in large-scale hybrid environments.

+To consider:+
1. Do we really need to verify existence of binaries at all nodes of the cluster (what if I have 15 nodes? This impacts *each* upload)
2. Requests to cloud storage providers should never be part of a deploy to Artifactory. This must always happen in the *background*.",,,,,,,,,,,,,,,,,,,"02/Jul/19 1:41 PM;arielk;3 nodes, 2 redundancy, node 1.png;https://www.jfrog.com/jira/secure/attachment/33048/3+nodes%2C+2+redundancy%2C+node+1.png","02/Jul/19 1:41 PM;arielk;3 nodes, 2 redundancy, node 2.png;https://www.jfrog.com/jira/secure/attachment/33047/3+nodes%2C+2+redundancy%2C+node+2.png","02/Jul/19 1:41 PM;arielk;3 nodes, 3 redundancy, node 1.png;https://www.jfrog.com/jira/secure/attachment/33050/3+nodes%2C+3+redundancy%2C+node+1.png","02/Jul/19 1:41 PM;arielk;3 nodes, 3 redundancy, node 2.png;https://www.jfrog.com/jira/secure/attachment/33049/3+nodes%2C+3+redundancy%2C+node+2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzs59:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
User already exists message is being displayed if we edit an existing user with specific type of passwords,RTFACT-19525,74434,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gajapathik,gajapathik,02/Jul/19 9:48 AM,17/Feb/21 8:24 AM,18/Feb/21 8:59 AM,,,,,,,,,UI,,,,,,,2,,,,,,"When admin is trying to edit/set a password for a user who is existing in the server, and passing a password a specific type of password( for example whitespace in it ('aaa bbb') or using regular passwords ('PastaPT')). Instead of showing a valid message it says, UI is displaying User already exists message and the log is not giving detailed information on the error. So we request you to 

1. Print a better error (for example, there are special chars in your password)
 2. Print the exception in the logs
 3. Add to the UI what are the password restrictions. ",,,,,,,,,,,,,,,,,,,"02/Jul/19 10:17 AM;gajapathik;User edit.png;https://www.jfrog.com/jira/secure/attachment/33037/User+edit.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzznxz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Oct/19 8:35 AM;steffel;Experiences this issue, today.

User edit -> Changed password. Typed in a 6 digits password. The password strength indicator was *green*!

After clicking ""Save"", an error message appears ""User already exists"".

The logfile reports:
{noformat}
2019-10-10 10:25:40,559 [http-nio-8081-exec-6] [ERROR] (o.a.u.r.s.a.s.u.UpdateUserService:142) - failed to update user pypi-reader{noformat}
 

Please solve this as described above.

 ","12/Aug/20 9:26 AM;shaibz;Steps to reproduce:
1. Create another user with some password.
2. log in as admin and try to edit the user password with 'aaa bbb' and click save.

You will get 'User xxx already exists'

This is reproducible on 6.x.
I could not reproduce it on 7.x

The expected behavior is that Artifactory will be able to edit the user correctly.
Giving error with ""User already exists"" doesn't make sense.",,,,,,,,,
[ARTIFACTORY] [ERROR] Master key checksum mismatch. Aborting initialization. Using DB schema,RTFACT-19513,74361,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,eyalb,tapanswain,tapanswain,01/Jul/19 5:42 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"i am seeing issue when i start  artifactory services 

 

[ARTIFACTORY] [ERROR] Master key checksum mismatch. Aborting initialization. Using DB schema",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzni7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Repository name with one letter throws exception ,RTFACT-19505,74307,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,30/Jun/19 9:06 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
1. create remote repository named ""a""
2. from the UI - right click and choose ""delete content"". you'll get this error: 
{code} 2019-06-30 11:57:36,490 [http-nio-8080-exec-6] ERROR o.a.r.s.RepositoryServiceImpl:1323 - Could not find storing repository by key 'a-cache' {code}

Should fix this line - 
org.artifactory.repo.service.RepositoryServiceImpl#remoteRepositoryByRemoteOrCacheKey - line 1556 we have this condition - if (*idx > 1* && idx + RepoPath.REMOTE_CACHE_SUFFIX.length() == key.length()) 
shoud fix to idx > 0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzn7j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Failure to push docker image properly (falls back to schema1),RTFACT-19503,74297,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,delbertkborden,delbertkborden,29/Jun/19 8:42 AM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.11.0,,,,,,,Docker,,,,,,,4,artifactory,docker,,,,"I've been able to produce a minimal test case for this:
{code:java}
# Dockerfile
FROM busybox
WORKDIR /app/{code}
Running the following sequence of commands:
{code:java}
export DOCKER_BUILDKIT=1
docker build -t dayreptest-registry.jfrog.io/test .
docker push dayreptest-registry.jfrog.io/test{code}
Although the push succeeds, it fails to push with v2 schema and falls back to v1, which in turn breaks other parts of my toolchain that do not support v1. Also, I've come to the conclusion that replacing {{WORKDIR}} with a {{RUN}} command results in a healthy push.

 

For more information, this is artifactory's log:
{code:java}
2019-06-29 08:37:45,316 [http-nio-8082-exec-101] [INFO ] (o.a.e.UploadServiceImpl:401) - Deploy to 'registry:test/_uploads/65226fe5-b210-4773-9e44-9909ca39f1ae' Content-Length: unspecified
2019-06-29 08:37:46,750 [http-nio-8082-exec-127] [INFO ] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:257) - Deploying docker manifest for repo 'test' and tag 'latest' into repo 'registry'
2019-06-29 08:37:46,755 [http-nio-8082-exec-127] [ERROR] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:783) - Error uploading manifest: 'null'
2019-06-29 08:37:46,755 [art-exec-6] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:37) - Starting cleanup of idle docker uploads
2019-06-29 08:37:46,757 [art-exec-6] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:58) - Completed idle docker uploads cleanup: removed 0 blobs.
2019-06-29 08:37:47,645 [http-nio-8082-exec-117] [INFO ] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:257) - Deploying docker manifest for repo 'test' and tag 'latest' into repo 'registry'
2019-06-29 08:37:47,745 [http-nio-8082-exec-117] [INFO ] (o.a.e.UploadServiceImpl:401) - Deploy to 'registry:test/latest/manifest.json' Content-Length: unspecified
2019-06-29 08:37:47,793 [art-exec-9] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:37) - Starting cleanup of idle docker uploads
2019-06-29 08:37:47,795 [art-exec-9] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:58) - Completed idle docker uploads cleanup: removed 0 blobs.
{code}
And in my docker daemon logs, I get:
{code:java}
level=warning msg=""failed to upload schema2 manifest: manifest invalid: manifest invalid - falling back to schema1""
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzn5b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Resolving the ""gems"" directory from a remote Gems repository without the ""/"" at the end will cause it to be created as a file instead of a directory, causing all requests to fail.",RTFACT-19497,74233,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adiv,adiv,27/Jun/19 11:51 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Resolving the ""{color:#8eb021}gems{color}"" directory from a remote Gems repository without the ""{color:#8eb021}/{color}"" at the end will cause it to be created as a file instead of a directory, causing all requests to fail.

Steps to reproduce:
 # Create a Gems remote repo called ""{color:#8eb021}gems-remote{color}"".
 # Perform the following cURL command:{color:#59afe1} _curl -XGET -uadmin:password [http://localhost:8081/artifactory/gems-remote/gems]_{color}
 # Notice that a file called ""gems"" was created in the remote cache (screenshot attached).

 # Try to resolve any other Gems package, for example {color:#8eb021}rake-10.4.2.gem{color}: {color:#59afe1}_curl -XGET -uadmin:password [http://localhost:8081/artifactory/gems-remote/gems/rake-10.4.2.gem]_{color}
 # {color:#333333}See that you are getting a 400 error: {color}

_{color:#d04437}{ ""errors"" : [ 
{ ""status"" : *400*, ""message"" : ""Rejected artifact download request: *Parent gems must be a folder*"" } ]
 }{color}_

{color:#333333}This issue is caused by Artifactory creating the ""{color:#8eb021}gems{color}{color}"" directory as a file when requesting this directly, and then when you want to download a Gems artifact, Artifactory cannot put it under this ""{color:#8eb021}gems{color}"" file since it is not a directory.",,,,,,,,,,,,,,,,,,,"27/Jun/19 12:06 PM;adiv;Screen Shot 2019-06-27 at 15.06.10.png;https://www.jfrog.com/jira/secure/attachment/32997/Screen+Shot+2019-06-27+at+15.06.10.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzmt3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Handle policies causing build failure when pom file has open versions,RTFACT-19473,74037,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muhammeds,muhammeds,25/Jun/19 6:41 AM,17/Feb/21 8:59 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"If we have some snapshot versions also available in one of the artifactory repository for a package and then we disable handle snapshot and the pom file has a dependency as an open version since the metadata file still holds information about the snapshot versions then the maven client will try to download that one but will fail in doing so causing the build to fail itself.

For example : 
When using an open version range like <version>[1.0.0,)</version> as dependency and the metadata would show up a version 1.0.1-SNAPSHOT then the maven client will try to download causing the build to fail with the following error.
{code:java}
[ERROR] Failed to execute goal on project JavaSamples: Could not resolve dependencies for project com.java.samples:JavaSamples:jar:1.0.0-SNAPSHOT: Failed to collect dependencies at com.java.samples:JavaSamples:jar:1.0.2-SNAPSHOT: Failed to read artifact descriptor for com.java.samples:JavaSamples:jar:1.0.2-SNAPSHOT: Could not transfer artifact com.java.samples:JavaSamples:pom:1.0.2-20190619.124139-1 from/to snapshots (http://35.232.101.74:8081/artifactory/libs-snapshot-local): Failed to transfer file: http://35.232.101.74:8081/artifactory/libs-snapshot-local/com/java/samples/JavaSamples/1.0.2-SNAPSHOT/JavaSamples-1.0.2-20190619.124139-1.pom. Return code is: 409 , ReasonPhrase:Conflict{code}
 

The same behavior persists if we disable handle release and the repository has a latest release version available.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzllr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Unable to browse artifactory using webpage,RTFACT-19463,73986,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,deepakks,deepakks,24/Jun/19 4:53 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.5.9,,,,,,,Web UI,,,,,,,0,artifactory,,,,,"Hi,

I have started my existing EC2 instance of Artifactory on the version - 6.5.9:

-bash-4.2$ service artifactory status
Redirecting to /bin/systemctl status artifactory.service
● artifactory.service - Setup Systemd script for Artifactory in Tomcat Servlet Engine
 Loaded: loaded (/usr/lib/systemd/system/artifactory.service; enabled; vendor preset: disabled)
 Active: active (running) since Mon 2019-06-24 14:22:33 AEST; 26min ago
 Process: 3937 ExecStart=/opt/jfrog/artifactory/bin/artifactoryManage.sh start (code=exited, status=0/SUCCESS)
 Main PID: 4516 (java)
 CGroup: /system.slice/artifactory.service
 ‣ 4516 /usr/bin/java -Djava.util.logging.config.file=/opt/jfrog/artifactory/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls...
-bash-4.2$

I'm unable to browse the same using the url -  https://<IP_AddessofEC2>:8080/artifactory/webapp/

No errors have been logged in any of the logs, how do I fix this?

Please advise.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzlbr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
/ui/userApiKey REST doesn't support token authentication,RTFACT-19441,73878,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,galba,asafn,asafn,19/Jun/19 4:48 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Reconstruction:

Fire this rest with a user Bearer token header - 

GET 

/artifactory/ui/userApiKey

 

returns 401

{""error"":""Bad credentials""}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzkpr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Delete release-bundles/builds doesn't have permissions check if don't exist,RTFACT-19437,73868,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,19/Jun/19 10:52 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Try to delete a non existing release-bundle or build with user who doesn't have the required delete permission and you'll get 404 (Not Found) instead of 403 (Forbidden).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzknz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Uploading zip file that contain ""data descriptor"" with the header:""X-Explode-Archive"" throw an exception",RTFACT-19430,73830,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mohamadm,Mohamadm,18/Jun/19 1:36 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
 # Create a zip file that contains data descriptor
 # Upload it using cURL command and add the ""X-Explode-Archive"" header, here is an example:
 ## $ curl -u ""admin:password"" -T <FILE_PATH> -H ""X-Explode-Archive: true"" -H ""Content-Type: application/zip"" -X PUT [http://localhost:8081/artifactory/]<PATH>/

The error:
{quote}{
 ""errors"" : [
Unknown macro: \{ ""status"" }
]
 }
{quote}
 

Artifactory stack trace:
{code:java}
2019-06-25 12:52:52,318 [http-nio-8081-exec-2] [ERROR] (o.a.u.ZipUtils :203) - Error while extracting /Users/mohamadm/Downloads/artifactory-pro-6.10.3/data/tmp/artifactory-uploads/keys-az-168910.zip : null
2019-06-25 12:52:52,323 [http-nio-8081-exec-2] [ERROR] (o.a.r.s.d.DeployServiceImpl:290) - Error while extracting /Users/mohamadm/Downloads/artifactory-pro-6.10.3/data/tmp/artifactory-uploads/keys-az-168910.zip: Error while extracting /Users/mohamadm/Downloads/artifactory-pro-6.10.3/data/tmp/artifactory-uploads/keys-az-168910.zip
2019-06-25 12:52:52,326 [http-nio-8081-exec-2] [ERROR] (o.a.w.s.RepoFilter :262) - Upload request of generic-local:test/keys-az-168910.zip failed due to {}
org.springframework.web.client.RestClientException: Error while extracting /Users/mohamadm/Downloads/artifactory-pro-6.10.3/data/tmp/artifactory-uploads/keys-az-168910.zip; nested exception is java.lang.RuntimeException: Error while extracting /Users/mohamadm/Downloads/artifactory-pro-6.10.3/data/tmp/artifactory-uploads/keys-az-168910.zip
at org.artifactory.repo.service.deploy.DeployServiceImpl.getExtractedArchiveFolder(DeployServiceImpl.java:291)
at org.artifactory.repo.service.deploy.DeployServiceImpl.deployBundle(DeployServiceImpl.java:245)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
at com.sun.proxy.$Proxy230.deployBundle(Unknown Source)
at org.artifactory.addon.rest.RestAddonImpl.deployArchiveBundle(RestAddonImpl.java:1600)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
at com.sun.proxy.$Proxy296.deployArchiveBundle(Unknown Source)
at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:397)
at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:231)
at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:197)
at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:140)
at sun.reflect.GeneratedMethodAccessor374.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
at com.sun.proxy.$Proxy177.upload(Unknown Source)
at org.artifactory.webapp.servlet.RepoFilter.doUpload(RepoFilter.java:254)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:172)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: Error while extracting /Users/mohamadm/Downloads/artifactory-pro-6.10.3/data/tmp/artifactory-uploads/keys-az-168910.zip
at org.artifactory.util.ZipUtils.extractFiles(ZipUtils.java:205)
at org.artifactory.util.ZipUtils.extract(ZipUtils.java:92)
at org.artifactory.repo.service.deploy.DeployServiceImpl.extractArchive(DeployServiceImpl.java:389)
at org.artifactory.repo.service.deploy.DeployServiceImpl.getExtractedArchiveFolder(DeployServiceImpl.java:288)
... 76 common frames omitted
Caused by: org.apache.commons.compress.archivers.zip.UnsupportedZipFeatureException: unsupported feature data descriptor used in entry ansible/roles/
at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.read(ZipArchiveInputStream.java:417)
at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.skip(ZipArchiveInputStream.java:558)
at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.closeEntry(ZipArchiveInputStream.java:629)
at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.getNextZipEntry(ZipArchiveInputStream.java:225)
at org.apache.commons.compress.archivers.zip.ZipArchiveInputStream.getNextEntry(ZipArchiveInputStream.java:378)
at org.artifactory.util.ZipUtils.extractFiles(ZipUtils.java:214)
at org.artifactory.util.ZipUtils.extractFiles(ZipUtils.java:201)
... 79 common frames omitted
2019-06-25 12:52:52,335 [http-nio-8081-exec-2] [WARN ] (o.a.w.s.RepoFilter :263) - Sending HTTP error code 404: unsupported feature data descriptor used in entry ansible/roles/
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzkg7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"If the build name contains slash in the name, the url encoded with ~2F instead of %2F",RTFACT-19428,73820,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexeiv,alexeiv,18/Jun/19 11:19 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,UI,,,,,,,1,,,,,,"Steps to reproduce:
 # Deploy a build info to Artifactory with slash in the name. For example: test/gradle_test
 # Browse to Builds --> Enter the build. The url is as following:
[http://localhost:8081/artifactory/webapp/#/builds/test~2Fgradle_test/13/1560855310624]

Instead of 
[http://localhost:8081/artifactory/webapp/#/builds/test%2Fgradle_test/13/1560855310624]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzken:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
[WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata,RTFACT-19426,73818,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,casz,casz,18/Jun/19 10:56 AM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,6.7.3,,,,,,,NuGet,,,,,,,0,,,,,,"We are seeing a lot ""failed to parse dependencies metadata"" when using prerelease nuget packages

Unclear what is calling the issue, it fails when a nuget package depends on a prerelease package.

Properly related to using a virtual repo with api/nuget/v3
{code:java}
019-06-18 12:54:30,362 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,363 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,363 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,363 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,364 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,364 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,364 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,364 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,364 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,365 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,365 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,365 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,366 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,366 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,366 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,366 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,366 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,367 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,367 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,367 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,367 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,368 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,368 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,368 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,368 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,369 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,369 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,369 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,369 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,369 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,370 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,370 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,370 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,370 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,432 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,433 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,433 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,433 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,433 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,434 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,434 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,434 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,440 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,440 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,440 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,440 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,441 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,441 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,441 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
2019-06-18 12:54:30,441 [http-nio-8081-exec-8155] [WARN ] (o.j.r.n.u.NuGetV3LocalAndVirtualCommon:275) - failed to parse dependencies metadata
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzke7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"21/Aug/19 12:39 PM;casz;Was solved by using FQDN in our nuget source URL",,,,,,,,,,
Nuget remote can incorrectly cache V2 XML metadata as feed.json resulting in packages' resolution failures,RTFACT-19421,73801,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,17/Jun/19 6:30 PM,17/Feb/21 9:31 AM,18/Feb/21 8:59 AM,,6.11.0,,,,,,,NuGet,,,,,,,0,,,,,,"*+Summary:+*

Trying to define remote repo with Nuget V3 API against another Artifactory ([documentation here|https://www.jfrog.com/confluence/display/RTF/NuGet+Repositories#NuGetRepositories-RemoteRepositories]), while using non-*V3 Feed URL* endpoint, will incorrectly cache a *<repoKey>/.nuGetV3/feed.json* file with Nuget V2 Xml content (*screenshots attached*). This will result in nuget *packages' resolution failures* with the following below. 

*Expected V3 Feed URL:*
_<artifactory_url>/artifactory/api/nuget/*v3*/nugetRepoKey_

*Culprit V3 Feed URL:*
_<artifactory_url>/artifactory/api/nuget/nugetRepoKey_

* It is possible to run into this scenario when trying to configure V3 for the first time.
* Changing the Nuget Feed V3 to be *correct* - will not be sufficient if you try to workaround this. You will need to delete the malformed feed.json (workaround detailed below) 

{code}
nuget install Microsoft.AspNetCore.Mvc.Formatters.Json -Verbosity detailed
{code}

*Client side:*

{code}
NuGet Version: 4.7.0.5148
Feeds used:
  http://localhost:8080/artifactory/api/nuget/v3/nuget-cache-v2

Installing package 'Microsoft.AspNetCore.Mvc.Formatters.Json' to '/Users/andreik/JFrog/Artifactory/SourceCode/forks'.
Unable to load the service index for source http://localhost:8080/artifactory/api/nuget/v3/nuget-cache-v2.
  404 ()
NuGet.Protocol.Core.Types.FatalProtocolException: Unable to load the service index for source http://localhost:8080/artifactory/api/nuget/v3/nuget-cache-v2. ---> System.Net.Http.HttpRequestException: 404 ()
  at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode () [0x0002a] in <935151bbf04949bba6171dd2141bd9d1>:0
  at NuGet.Protocol.HttpSource+<>c__DisplayClass14_0`1[T].<GetAsync>b__0 (System.Threading.CancellationToken lockedToken) [0x00400] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Common.ConcurrencyUtilities.ExecuteWithFileLockedAsync[T] (System.String filePath, System.Func`2[T,TResult] action, System.Threading.CancellationToken token) [0x00223] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.HttpSource.GetAsync[T] (NuGet.Protocol.HttpSourceCachedRequest request, System.Func`2[T,TResult] processAsync, NuGet.Common.ILogger log, System.Threading.CancellationToken token) [0x000ea] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.ServiceIndexResourceV3Provider.GetServiceIndexResourceV3 (NuGet.Protocol.Core.Types.SourceRepository source, System.DateTime utcNow, NuGet.Common.ILogger log, System.Threading.CancellationToken token) [0x001ff] in <55431ab4846b49babe0aafcf24cd67ed>:0
   --- End of inner exception stack trace ---
  at NuGet.Protocol.ServiceIndexResourceV3Provider.GetServiceIndexResourceV3 (NuGet.Protocol.Core.Types.SourceRepository source, System.DateTime utcNow, NuGet.Common.ILogger log, System.Threading.CancellationToken token) [0x002b3] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.ServiceIndexResourceV3Provider.TryCreate (NuGet.Protocol.Core.Types.SourceRepository source, System.Threading.CancellationToken token) [0x00213] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.Core.Types.SourceRepository.GetResourceAsync[T] (System.Threading.CancellationToken token) [0x000b8] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.DependencyInfoResourceV3Provider.TryCreate (NuGet.Protocol.Core.Types.SourceRepository source, System.Threading.CancellationToken token) [0x00082] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.Core.Types.SourceRepository.GetResourceAsync[T] (System.Threading.CancellationToken token) [0x000b8] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.Protocol.Core.Types.SourceRepository.GetResourceAsync[T] () [0x00070] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.PackageManagement.NuGetPackageManager.GetLatestVersionCoreAsync (System.String packageId, NuGet.Frameworks.NuGet.Frameworks1094018.NuGetFramework framework, NuGet.PackageManagement.ResolutionContext resolutionContext, NuGet.Protocol.Core.Types.SourceRepository source, NuGet.Common.ILogger log, System.Threading.CancellationToken token) [0x0008c] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.PackageManagement.NuGetPackageManager+<>c__DisplayClass92_1.<GetLatestVersionAsync>b__3 () [0x000a7] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.PackageManagement.NuGetPackageManager.GetLatestVersionAsync (System.String packageId, NuGet.Frameworks.NuGet.Frameworks1094018.NuGetFramework framework, NuGet.PackageManagement.ResolutionContext resolutionContext, System.Collections.Generic.IEnumerable`1[T] sources, NuGet.Common.ILogger log, System.Threading.CancellationToken token) [0x00115] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.PackageManagement.NuGetPackageManager.GetLatestVersionAsync (System.String packageId, NuGet.ProjectManagement.NuGetProject project, NuGet.PackageManagement.ResolutionContext resolutionContext, System.Collections.Generic.IEnumerable`1[T] sources, NuGet.Common.ILogger log, System.Threading.CancellationToken token) [0x000a5] in <55431ab4846b49babe0aafcf24cd67ed>:0
  at NuGet.CommandLine.InstallCommand.InstallPackageAsync (System.String packageId, NuGet.Versioning.NuGetVersion version, System.String installPath) [0x00229] in <55431ab4846b49babe0aafcf24cd67ed>:0
{code}

*Artifactory (remote repo) side:*

{code}
2019-06-17 19:30:07,836 [http-nio-8080-exec-10] INFO  o.a.r.HttpRepo:432 - nuget-cache-v2 downloading http://localhost:8081/artifactory/api/nuget/nuget-test Unknown content length 
2019-06-17 19:30:07,842 [http-nio-8080-exec-10] INFO  o.a.r.HttpRepo:445 - nuget-cache-v2 downloaded  http://localhost:8081/artifactory/api/nuget/nuget-test 555 bytes at 86.66 KB/sec
2019-06-17 19:30:07,844 [http-nio-8080-exec-10] ERROR o.a.a.n.r.NuGetV3VirtualAndRemoteCommon:92 - Failed to parse feed for repo: nuget-cache-v2, at url: http://localhost:8081/artifactory/api/nuget/nuget-test
org.jfrog.common.JsonParsingException: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('<' (code 60)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
 at [Source: (String)""<?xml version=""1.0"" encoding=""utf-8""?>
<!--
  ~
  ~ Copyright 2016 JFrog Ltd. All rights reserved.
  ~ JFROG PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
  -->

<service xmlns=""http://www.w3.org/2007/app"" xmlns:atom=""http://www.w3.org/2005/Atom"" xmlns:app=""http://www.w3.org/2007/app"" xml:base=""http://localhost:8081/artifactory/api/nuget/nuget-test"">
    <workspace>
        <atom:title>Default</atom:title>
        <collection href=""Packages"">
            <atom:title>Packages</atom:t""[truncated 55 chars]; line: 1, column: 2]
	at org.jfrog.common.MapperUtilsBase.unchecked(MapperUtilsBase.java:238)
	at org.jfrog.common.MapperUtilsBase.readValue(MapperUtilsBase.java:120)
	at org.jfrog.common.JsonUtils.readValue(JsonUtils.java:27)
	at org.artifactory.addon.nugetv3.repo.NuGetV3VirtualAndRemoteCommon.downloadRemoteFeed(NuGetV3VirtualAndRemoteCommon.java:87)
	at org.artifactory.addon.nugetv3.repo.NuGetV3RemoteRepoHandler.feed(NuGetV3RemoteRepoHandler.java:48)
	at org.jfrog.repomd.nugetv3.rest.NuGetV3SubResource.getRoot(NuGetV3SubResource.java:40)
	at sun.reflect.GeneratedMethodAccessor412.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:191)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:97)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:392)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:74)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:542)
	at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:685)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('<' (code 60)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
 at [Source: (String)""<?xml version=""1.0"" encoding=""utf-8""?>
<!--
  ~
  ~ Copyright 2016 JFrog Ltd. All rights reserved.
  ~ JFROG PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
  -->

<service xmlns=""http://www.w3.org/2007/app"" xmlns:atom=""http://www.w3.org/2005/Atom"" xmlns:app=""http://www.w3.org/2007/app"" xml:base=""http://localhost:8081/artifactory/api/nuget/nuget-test"">
    <workspace>
        <atom:title>Default</atom:title>
        <collection href=""Packages"">
            <atom:title>Packages</atom:t""[truncated 55 chars]; line: 1, column: 2]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1804)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:693)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:591)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._handleOddValue(ReaderBasedJsonParser.java:1902)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:757)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4141)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4000)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3004)
	at org.jfrog.common.MapperUtilsBase.lambda$readValue$7(MapperUtilsBase.java:120)
	at org.jfrog.common.MapperUtilsBase.unchecked(MapperUtilsBase.java:236)
	... 75 common frames omitted
2019-06-17 19:30:07,845 [http-nio-8080-exec-10] ERROR o.a.a.n.r.NuGetV3VirtualAndRemoteCommon:458 - Parsed feed is null, in repo: nuget-cache-v2
{code}

+*Steps to reproduce:*+

1. Setup two Artifactory instances, have Artifactory (1) created with the default Nuget remote settings pointing to Nuget Gallery (e.g. _nuget-test_)

2. Have Artifactory (2)'s remote e.g. *_nuget-cache-v2*_ pointing to Aritfactory (1)'s _nuget-test_ remote with the Artifactory remote URL set to _*<artifactory_(1)_url>/api/nuget/nuget-test*_ with the _*NuGet Download Context Path*_ set (correctly) to _*Download_*  and the *+NuGet v3 Feed URL+* pointing to  _*<artifactory_(1)_url>/api/nuget/nuget-test*_ (*same as the repo's URL*)

3. Setup your NuGet.Config pointing to Artifactory (2)'s nuget-cache-v2_ with V3 config:
{code}
<add key=""Artifactory1"" value=""http://localhost:8081/artifactory/api/nuget/v3/nuget-cache-v2"" protocolVersion=""3"" />
{code}

* The Nuget client will try to do V3 requests to the defined remote.

4. Issue the below resolution command:

{code}nuget install Microsoft.AspNetCore.Mvc.Formatters.Json -Verbosity detailed{code}

And watch the failure as per the examples above.

*+Workaround:+*

1. Remove the _nuget-cache-v2/.nuGetV3/feed.json_ file
2. Adjust the Remote repository's *V3 Feed URL* to point to _<artifactory_url>/artifactory/api/nuget/*v3*/nuget-test_ (replace _nuget-test_ with your remote's name)",,,,,,,,,,,,,,,,,,,"17/Jun/19 7:14 PM;andreik;FeedInfoJsonContent.png;https://www.jfrog.com/jira/secure/attachment/32848/FeedInfoJsonContent.png","17/Jun/19 7:14 PM;andreik;nugetV3IndexJsonFeedPath.png;https://www.jfrog.com/jira/secure/attachment/32847/nugetV3IndexJsonFeedPath.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzkav:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Fix tests,RTFACT-19411,73757,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tamirh,tamirh,17/Jun/19 7:50 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Use this Jira for fixing tests,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzk1b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"repox.jfrog.io is not accessible - ""Communications link failure"" error",RTFACT-19409,73748,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,remal,remal,16/Jun/19 3:40 PM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I'm trying to access [https://repox.jfrog.io/] and I'm getting this error:

{code:json}
{
    ""errors"": [
        {
            ""status"": 500,
            ""message"": ""Could not open JDBC Connection for transaction; nested exception is com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.""
        }
    ]
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzjzj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget push using a SAML user pushes the package but gives a 403 in the client and in request.log,RTFACT-19405,73682,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,14/Jun/19 10:24 PM,17/Feb/21 9:32 AM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,NuGet,,,,,,,0,,,,,,"Nuget push using a SAML user gives a 403 when using the SAML user. In the UI we can see the package deployed in the repository along with another package null.null.null.nupkg. Here is the error in the client side 

PS C:\downloads\prasanna-test\jQuery.3.4.1> nuget push .\Dapper.1.60.9\ -Source Prasanna-test
Pushing .signature.p7s to 'http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local'...
 PUT http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local/
 Created http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local/ 262ms
Your package was pushed.
Pushing Dapper.1.60.9.nupkg to 'http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local'...
 PUT http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local/
 Created http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local/ 1187ms
Your package was pushed.
Pushing Dapper.dll to 'http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local'...
 PUT http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local/
 Forbidden http://mill.jfrog.info:12374/artifactory/api/nuget/nuget-local/ 93ms
Response status code does not indicate success: 403 (Forbidden).

 

Request.log :

20190614220752|99|REQUEST|12.244.40.18|santhoshp@jfrog.com|PUT|/api/nuget/nuget-local/|HTTP/1.1|201|-1
20190614220753|1158|REQUEST|12.244.40.18|santhoshp@jfrog.com|PUT|/api/nuget/nuget-local/|HTTP/1.1|201|-1
20190614220753|64|REQUEST|12.244.40.18|santhoshp@jfrog.com|PUT|/api/nuget/nuget-local/|HTTP/1.1|403|-1

 

artifactory.log :

2019-06-14 22:07:52,094 [http-nio-8081-exec-5] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'nuget-local:null.null.nupkg' Content-Length: unspecified
2019-06-14 22:07:52,120 [art-exec-345] [WARN ] (o.j.r.n.h.NuGetSpecReader:44) - Could not find .nuspec file entry, returning an invalid metadata
2019-06-14 22:07:52,122 [art-exec-345] [WARN ] (o.a.a.n.NuGetServiceImpl:282) - NuGet package nuget-local:null.null.nupkg does not have a NuGet ID. Removed from indexing.
2019-06-14 22:07:53,316 [http-nio-8081-exec-7] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'nuget-local:Dapper.1.60.9.nupkg' Content-Length: unspecified
2019-06-14 22:07:53,356 [art-exec-347] [INFO ] (o.j.r.n.NuGetWorkContext:68) - Indexing NuGet metadata for repo 'nuget-local' on path 'Dapper.1.60.9.nupkg'
2019-06-14 22:07:53,363 [art-exec-347] [INFO ] (o.j.r.n.NuGetWorkContext:88) - Finished writing Nuget metadata for repo nuget-local on path 'Dapper.1.60.9.nupkg' at 1560550073363 ms
2019-06-14 22:07:53,528 [http-nio-8081-exec-3] [WARN ] (o.j.r.n.h.NuGetSpecReader:44) - Could not find .nuspec file entry, returning an invalid metadata
2019-06-14 22:07:53,534 [http-nio-8081-exec-3] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 403: Not enough permissions to overwrite artifact 'nuget-local:null.null.nupkg' (user 'santhoshp@jfrog.com' needs DELETE permission).
2019-06-14 22:08:07,782 [http-nio-8081-exec-2] [WARN ] (o.j.r.n.h.NuGetSpecReader:44) - Could not find .nuspec file entry, returning an invalid metadata

I have attached the screenshot of the repository and the packages created. Then added the delete permission for the same user and then retried deploying. Did not get the 403, however, the null.null.null.npkg was still present in the local folder.

 ",,,,,,,,,,,,,,,,,,,"14/Jun/19 10:24 PM;prasannan;nuget.png;https://www.jfrog.com/jira/secure/attachment/32768/nuget.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzjnb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/Jun/19 12:56 PM;inbart;[~prasannan]
Please add steps to reproduce.
 - does it happen with any NuGet package you try to push with the SAML user?
- does it reproduce only when you use SAML user? with regular users it doesn't happen?
- what NuGet version do you use?
  
From what I understand the bug is that we deploy another null.null.nupkg for some reason. Beside that everything works fine, the requested package is being deployed and can be resolved from the repository. please correct me if Im wrong. Thanks",,,,,,,,,,
CRAN remote repo can't download packages when passing Access Tokens to authenticate,RTFACT-19404,73681,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,saiu,saiu,14/Jun/19 9:47 PM,17/Feb/21 9:33 AM,18/Feb/21 8:59 AM,,6.6.1,6.8.6,7.11.5,7.13.2,,,,CRAN,Remote Repository ,,,,,,0,,,,,,"CRAN remote repo can't download packages when passing Access Tokens to authenticate. In the same test environment, passing plain text password and API key works fine.

CRAN version- 3.6.0 and 3.4.4

.Rprofile (CONFIG FILE)

local(

{         r <- list(""cran-remote"" = ""http://testsaiadmin:<ACCESS_TOKEN>@localhost:8081/artifactory/cran-remote/"")         options(repos = r) }

)

-------------------------------------------------------------------------------------------------------------------------

USERNAME: testsaiadmin

> install.packages(""abtest"")

Warning: unable to access index for repository [http://testsaiadmin:|http://testsaiadmin/]<ACCESS_TOKEN>@localhost:8081/artifactory/cran-remote/src/contrib:

 cannot open URL 'http://testsaiadmin:eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoi [... truncated]

Error in gzfile(file, mode) : cannot open the connection

In addition: Warning messages:

1: In gzfile(file, ""rb"") :

 cannot open compressed file '/tmp/RtmpVRwDgU/repos_http%3A%2F%2Ftestsaiadmin%3A<ACCESS_TOKEN>%40localhost%3A8081%2Fartifactory%2Fcran-remote%2Fsrc%2Fcontrib.rds', probable reason 'File name too long'

2: package ‘abtest’ is not available (for R version 3.6.0)

3: In gzfile(file, ""rb"") :

 cannot open compressed file '/tmp/RtmpVRwDgU/repos_http%3A%2F%2Ftestsaiadmin%3A<ACCESS_TOKEN>%40localhost%3A8081%2Fartifactory%2Fcran-remote%2Fbin%2Fmacosx%2Fel-capitan%2Fcontrib%2F3.6.rds', probable reas [... truncated]

4: In gzfile(file, mode) :

 cannot open compressed file '/tmp/RtmpVRwDgU/repos_http%3A%2F%2Ftestsaiadmin%3A<ACCESS_TOKEN>%40localhost%3A8081%2Fartifactory%2Fcran-remote%2Fbin%2Fmacosx%2Fel-capitan%2Fcontrib%2F3.6.rds', probable reas [... truncated]",,,,,,,,,,,,,,,,RTFACT-19403,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzjn3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
REST API for downloading support bundle not working,RTFACT-19402,73679,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pradnyas,pradnyas,14/Jun/19 7:32 PM,17/Feb/21 9:35 AM,18/Feb/21 8:59 AM,,6.6.5,,,,,,,,,,,,,,0,,,,,,"The issue was found in 6.6.5

*_List Bundles_* rest api does not work in this version :

[https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-ListBundles]
{code:java}
curl -uadmin:<password> -XGET http://<Artifactory server:port>/artifactory/api/system/support/bundles
{code}
Note: This api works fine in the latest version 6.10.3

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzjmn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Transparent archive introspection broken when content starts with ./,RTFACT-19399,73657,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kPshi,kPshi,14/Jun/19 12:47 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,,,,,,,,0,,,,,,"When an archive is stored in Artifactory (Jar, TGZ, ...), you can access content using the pattern

{{[https://myinstance/some/path/to/archive.tgz!/mystuff]}}

But when the archive is based on the current directory indicated by a period sign, that request breaks and returns 404.
 In that case Artifactory also reports to not have found the request without the ""."". Thus it seems to simplify the request path a little too much.

Steps to reproduce:
 # create an archive like
{{tar czf archive.tgz .}}
with any content
 # upload it into Artifactory
 # try to access any file in the archive via the pattern above
 # receive a 404",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzjhr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Downloading logs on an HA cluster is not intuitive,RTFACT-19397,73620,Bug,Reopened,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,eric.griswold,eric.griswold,13/Jun/19 5:39 PM,07/Jan/21 3:14 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,High Availability,,,,,,,1,artifactory,,,,,"From Admin>Advanced>System Logs in the Artifactory GUI on an HA cluster, there is a single ""Download"" button.

*Observed behavior*

Pressing the download button will download logs from one of the HA servers. There is no indication as to which one, though.

*Desired behavior*

The ""Download"" button (or the subsequent dialog) should indicate (or even better, allow the user to select) from which HA node the download will run.

*Workaround*

The workaround is straightforward. Rather than using the Artifactory GUI, inspect the artifactory.log on the desired machine.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzj9r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/Mar/20 5:02 PM;arturoa;As another workaround, the generation of a bundle from the support zone should include the logs from all currently running nodes.",,,,,,,,,,
dummy jira for stork,RTFACT-19380,73472,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Maximy,Maximy,Maximy,12/Jun/19 11:31 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,dummy jira for stork,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzidr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory outputs invalid Etag header,RTFACT-19373,73432,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,KBjorndal,KBjorndal,12/Jun/19 7:35 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"According to RFC7232 section 2.3 the valid syntaxes for Etag is:

 
{noformat}
     ETag       = entity-tag

     entity-tag = [ weak ] opaque-tag
     weak       = %x57.2F ; ""W/"", case-sensitive
     opaque-tag = DQUOTE *etagc DQUOTE
     etagc      = %x21 / %x23-7E / obs-text
                ; VCHAR except double quotes, plus obs-text

      Note: Previously, opaque-tag was defined to be a quoted-string
      ([RFC2616], Section 3.11); thus, some recipients might perform
      backslash unescaping.  Servers therefore ought to avoid backslash
      characters in entity tags.
{noformat}
While Artifactory outputs the checksum without any quotes:

 

 
{noformat}
< HTTP/1.1 200 OK
< Server: Artifactory/6.10.2
< X-Artifactory-Id: b54ac1ae90f0703b:42ce1b79:16b22809e84:-8000
< Last-Modified: Tue, 11 Jun 2019 08:18:40 GMT
< ETag: 9876ee9336032abcb45d58217fed68507912a613
< X-Checksum-Sha1: 9876ee9336032abcb45d58217fed68507912a613
< X-Checksum-Sha256: 68eafad356a6cfd6ba6e97a777d20c76dd4d72cf9cffa8e6535b1056f0bb214a
< X-Checksum-Md5: 4e494c7017b082de8ccb37c85f1d9184
< Accept-Ranges: bytes
< X-Artifactory-Filename: A-1.0.0.zip
< Content-Disposition: attachment; filename=""A-1.0.0.zip""; filename*=UTF-8''A-1.0.0.zip
< Content-Type: application/zip
< Content-Length: 453
< Date: Wed, 12 Jun 2019 07:24:56 GMT
{noformat}
 

That is,
{noformat}
ETag: 9876ee9336032abcb45d58217fed68507912a61{noformat}
Should be
{noformat}
ETag: ""9876ee9336032abcb45d58217fed68507912a613""
or
ETag: W/""9876ee9336032abcb45d58217fed68507912a613""{noformat}
If-None-Match must also be set to values that are invalid according to the HTTP spec for Artifactory to reply with 304.

This caused quite a bit of friction when writing an integration with the .Net HttpClient stack as that validates headers and throws away invalid data. I assume many other client stacks would behave the same.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzi7r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
 Artifactory slave node will fail startup in a misinformative way if a converter marker file exists on the node,RTFACT-19366,73295,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,10/Jun/19 4:57 PM,17/Feb/21 9:56 AM,18/Feb/21 8:59 AM,,6.10.1,6.8.7,,,,,,Converter,High Availability,startup,,,,,0,,,,,,"*Summary:*

If special marker files, e.g. _.default.build.permission.marker_ will exist under their *correct* location on a slave Artifactory node, it's startup will fail without a proper message. Here's the output of the artifactory.log having the file above:

{code}
2019-06-10 16:50:06,315 [art-init] [ERROR] (o.a.c.ConvertersManagerImpl:216) - Conversion failed. You should analyze the error and retry launching Artifactory. Error is: Stopping Artifactory, couldn't start Artifactory upgrade, on slave node!
Please run Artifactory upgrade on the master first!
2019-06-10 16:50:06,322 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Stopping Artifactory, couldn't start Artifactory upgrade, on slave node!
Please run Artifactory upgrade on the master first!
java.lang.reflect.InvocationTargetException: null
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
	at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: java.lang.RuntimeException: Stopping Artifactory, couldn't start Artifactory upgrade, on slave node!
Please run Artifactory upgrade on the master first!
	at org.artifactory.converter.ConvertersManagerImpl.handleException(ConvertersManagerImpl.java:223)
	at org.artifactory.converter.ConvertersManagerImpl.serviceConvert(ConvertersManagerImpl.java:171)
	at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:258)
	at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:145)
	... 7 common frames omitted
Caused by: java.lang.RuntimeException: Stopping Artifactory, couldn't start Artifactory upgrade, on slave node!
Please run Artifactory upgrade on the master first!
	at org.artifactory.converter.ConvertersManagerImpl.assertDatabaseConversionOnPrimaryOnly(ConvertersManagerImpl.java:268)
	at org.artifactory.converter.ConvertersManagerImpl.serviceConvert(ConvertersManagerImpl.java:161)
	... 9 common frames omitted
{code} 

*Steps to reproduce:*

1. Setup Artifactory HA cluster (2 nodes is enough)
2. Have a secondary start up correctly, and bring it down
3. Add a marker file, e.g. using _$ touch /var/opt/jfrog/artifactory/etc/.default.build.permission.marker_
4. Attempt to startup the slave node and watch the exception above thrown

*Workaround:*

Delete the marker file from the slave node
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzhhz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Xray port 8000 offers SSLv3 and TLS1.0 and is not configurable,RTFACT-19352,73179,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jblaine,jblaine,06/Jun/19 2:17 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,Security,Xray,,,,,,0,security,ssl,xray,,,"The default Xray server on port 8000 allows SSLv3 and TLS1.0 (both unsecure nowadays) and there is apparently no place to configure what protocols and ciphers for Xray to use.

""_Use a reverse proxy in front of it_"" you say – there is also no guidance in the Xray documentation about how to _properly_ configure a reverse proxy in front of Xray _to suit Xray's needs_.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzgpj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Jun/19 6:43 PM;jblaine;FWIW, I got a workaround in place but I really feel like the Xray ""server"" should expose SSL/TLS version and cipher options under the _Admin -> HTTP Settings_ page or at least in some configuration file. You're already exposing the place to configure the certificate and key. I don't yet see any reason other than what is mentioned in this ticket to warrant the added complexity of a reverse proxy in front of xray.
 # Block port 8000 at your xray server host firewall but allow access from your xray server IP address and your Artifactory server IP address
 # Under _Admin > HTTP Settings_ turn off SSL as you will be terminating your SSL connection at your Apache httpd instance on port 443
 # Change your ""Xray Base URL"" under _Admin > General_ to be https://xray-server/
 # Configure an Apache httpd 2.4 virtualhost acting as a reverse proxy on port 443

{code:java}
    ...
    SSLProtocol all -SSLv2 -SSLv3 -TLSv1
    SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH
    ...
    ProxyPreserveHost On
    ProxyPass         / http://xray-server:8000/ nocanon
    ProxyPassReverse  / http://xray-server:8000/
    RequestHeader     set X-Forwarded-Proto ""https""
    RequestHeader     set X-Forwarded-Port ""443""
    ProxyRequests     Off
    AllowEncodedSlashes NoDecode

    <Proxy *>
      Order deny,allow
      Allow from all
    </Proxy>
    ...{code}",,,,,,,,,,
Delete repository through the admin tab doesn't trigger a delete requests to the MDS,RTFACT-19351,73178,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Mariav,Mariav,06/Jun/19 2:04 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,MSD,,,,,"+Steps to reproduce:+
1. Create a repository and deploy some packages to it.
2. Go to the local repositories page through the admin tab and delete the repository that you created.
3. You can see that there are no delete requests in the request.log of MDS.

This issue happens because Artifactory sends delete request to MDS when there is a record of delete package in the event.log, the record is a full path of the package.
The record for deleting a repository is a folder path, so Artifactory doesn't send any delete requests to MDS.

We need to add a delete request of a path from Artifactory to MDS.
The request for deleting a path in MDS:
{code:java}
DELETE /api/v1/path/{repoKey}/{path}{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzgpb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Vulnerable images reported by Xray can be pulled from Docker virtual repository,RTFACT-19350,73137,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,iwashitah,iwashitah,05/Jun/19 10:15 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,Docker Image,,,,,,,1,Docker,virtual,,,,"The following is how to reproduce this behavior.
 # docker pull <image> from docker local registry and it's OK => Please see Artifactory3.png
 # docker pull <image> from docker virtual registry and it's NG => Please see Artifactory4.png

Please also see registry definitions.",Both SaaS and On-Premise.,,,,,,,,,,,,,,,,,,"05/Jun/19 10:12 PM;iwashitah;Artifactory1.png;https://www.jfrog.com/jira/secure/attachment/32597/Artifactory1.png","05/Jun/19 10:12 PM;iwashitah;Artifactory2.png;https://www.jfrog.com/jira/secure/attachment/32596/Artifactory2.png","05/Jun/19 10:12 PM;iwashitah;Artifactory3.png;https://www.jfrog.com/jira/secure/attachment/32595/Artifactory3.png","05/Jun/19 10:12 PM;iwashitah;Artifactory4.png;https://www.jfrog.com/jira/secure/attachment/32594/Artifactory4.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzggf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Jun/19 1:28 AM;iwashitah;Yes, it is happening consistently. The following is detailed reproduction steps.
 # docker pull alpine:3.3
 => The alpine:3.3 has vulnerabilities and pull it from hub.docker.com.
 # docker tag alpine:3.3 iwashitah-docker-local.jfrog.io/alpine:3.3
 => For push it to my SaaS Artifactory, tag it.
 # docker push iwashitah-docker-local.jfrog.io/alpine:3.3
 => Push it.

After pushing, Xray scanned it and alpine:3.3 had vulnerabilities as Artifactory2.png.
 When pulling from local docker registry as Artifactory3.png, it fails because it has vulnerabilities but virtual docker registry, it succeeds as Artifactory4.png.
 It is the issue because it has vulnerabilities and can be pulled and I think it is not only docker but also the other packages.",,,,,,,,,,
Virtual V3 nuget repository cannot be queried.,RTFACT-19348,73116,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaharl,shaharl,05/Jun/19 2:44 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,3,,,,,,"When navigating in the browser to the URL: http://<ARTIFACTORY_URL>/artifactory/api/nuget/v3/nuget-remote/{color:#FF0000}*query,* {color}

A list of packages in the remote is sent in the response as follows:

{""version"":""2.6.1"",""downloads"":262033,""@id"":""http://104.198.119.115:8081/artifactory/api/nuget/v3/nuget-remote/registration/nunit/2.6.1.json""},\{""version"":""2.6.2"",""downloads"":1384678,""@id"":""http://104.198.119.115:8081/artifactory/api/nuget/v3/nuget-remote/registration/nunit/2.6.2.json""},\{""version"":""2.6.3"",""downloads"":3039723,""@id"":""http://104.198.119.115:8081/artifactory/api/nuget/v3/nuget-remote/registration/nunit/2.6.3.json""},\{""version"":""2.6.4"",""downloads"":6342035,""@id"":""http://104.198.119.115:8081/artifactory/api/nuget/v3/nuget-remote/registration/nunit/2.6.4.json""},

 

However, running the same command on a virtual repository return 0 hit as follows: 

{""totalHits"":0,""data"":[]}

 

Steps to reproduce:

1) Set-up a remote nuget and a virtual nuget.

2) Add the remote to the virtual repository list of repositories

3) Try to run the command in the URL http://<ARTIFACTORY_URL>/artifactory/api/nuget/v3/<repository-name>/{color:#FF0000}*query*{color}

 on each repository.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzgbr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Feb/20 8:52 AM;MZ1;We're also experiencing this issue in version 6.8.6.

Was this resolved in next versions ?",,,,,,,,,,
Socket disconnects,RTFACT-19340,73026,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,binny.dhanjal,binny.dhanjal,04/Jun/19 6:36 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.2.0,,,,,,,Artifactory Home,,,,,,,1,,,,,,"We are randomly noticing socket disconnect errors, I am doubting it is our proxy.
{code:java}
03:42:07 Attempting retry #1
 03:46:17 Error occurred for request CONNECT artifactory.garmin.com:443 HTTP/1.1: Connection reset by peer: socket write error.
 03:46:17 Attempting retry #2
 03:48:26 Error occurred for request CONNECT artifactory.garmin.com:443 HTTP/1.1: Connection reset by peer: socket write error.
 03:48:26 Attempting retry #3
 03:55:39 Error occurred for request CONNECT artifactory.garmin.com:443 HTTP/1.1: Connection reset by peer: socket write error.
 03:55:39 [Thread consumer_1] An exception occurred during execution:
 03:55:39 java.lang.RuntimeException: java.net.SocketException: Connection reset by peer: socket write error
 03:55:39 at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecDeploymentConsumer.consumerRun(SpecDeploymentConsumer.java:44)
 03:55:39 at org.jfrog.build.extractor.producerConsumer.ConsumerRunnableBase.run(ConsumerRunnableBase.java:11)
 03:55:39 at java.lang.Thread.run(Thread.java:748)
 03:55:39 Caused by: java.net.SocketException: Connection reset by peer: socket write error
 03:55:39 at java.net.SocketOutputStream.socketWrite0(Native Method)
{code}","|CPU|32 cores|
|RAM|32GB RAM|
|OS|CentOS 64 bit version |
|Storage|Fast disk SAN solution |",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzfv3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory tree browser displays empty directories as expandable,RTFACT-19336,73000,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,oronc,oronc,04/Jun/19 12:45 PM,17/Feb/21 10:03 AM,18/Feb/21 8:59 AM,,6.10.2,,,,,,,UI,Web UI,,,,,,0,,,,,,"When deleting all the content from a directory, the directory remains and being displayed as expandable directory. please see attached screenshots

!UI_1.png!!UI_2.png!",,,,,,,,,,,,,,,,,,,"04/Jun/19 12:43 PM;oronc;UI_1.png;https://www.jfrog.com/jira/secure/attachment/32572/UI_1.png","04/Jun/19 12:43 PM;oronc;UI_2.png;https://www.jfrog.com/jira/secure/attachment/32571/UI_2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzfqv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Exception is thrown when pull replication is configured and changing license to Edge,RTFACT-19328,72977,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,04/Jun/19 10:54 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzfnr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Source userID is not seen in request.log for unsuccessful authentication,RTFACT-19325,72958,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,santhoshp,santhoshp,03/Jun/19 10:27 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,Logging,,,,,,,0,PB_Done,,,,,"From the 6.9.1 release notes, it says that:
The request.log and access.log files now include the source user ID and the IP address. This applies to users accessing Artifactory via UI, REST API, ‘docker login’ command regardless of whether the authentication was successful (i.e. good credentials) or *not (i.e. bad credentials)*.

But when trying to login with bad credentials, in request.log still we see ""non_authenticated_user""(not seeing the source id user)

Steps to reproduce:

1) Create a user with name ""test"" and create a docker repository using quick set up

2) Use ""Repository Path"" as docker access method

3) Run docker login <Artifactory_URL>:<Port_Number> from terminal

enter username: test

password: use bad credentials to login

4) From the request.log we see the below user as non_authnticated_user

20190603215645|120|REQUEST|12.244.40.18|*non_authenticated_user*|GET|*/api/docker/null/v2/token*|HTTP/1.1|401|0

From the release notes, it says that the source user id and IP addresses are included in request.log and access.log

In access.log, we can see the username ""test"" which is not seen in request.log 

2019-06-03 21:56:45,059 [DENIED LOGIN]   for client : *test* / 12.244.40.18

For a successful login user:

20190603221440|156|REQUEST|12.244.40.18|*test*|GET|*/api/docker/null/v2/token*|HTTP/1.1|200|0

Expected behavior:
As for the release notes: [https://www.jfrog.com/confluence/display/RTF/Release+Notes#ReleaseNotes-Artifactory6.9.1]
in request.log we should see the username that denied the login because of bad credentials.

 ",,,,,,,,,,,,,,,,,,,"03/Jun/19 10:27 PM;santhoshp;Screen Shot 2019-06-03 at 3.27.10 PM.png;https://www.jfrog.com/jira/secure/attachment/32560/Screen+Shot+2019-06-03+at+3.27.10+PM.png","03/Jun/19 10:28 PM;santhoshp;Screen Shot 2019-06-03 at 3.28.47 PM.png;https://www.jfrog.com/jira/secure/attachment/32561/Screen+Shot+2019-06-03+at+3.28.47+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzfkf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
AQL queries with property keys having a wildcard character within do not yield correct results,RTFACT-19322,72931,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Disham,Disham,03/Jun/19 11:31 AM,17/Feb/21 10:24 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,3,,,,,,"Problem Statement:
 AQL queries with property keys having a wildcard character within do not yield correct results

Impact:
 Customer cannot use a wildcard as part of property key in AQL queries

Steps to reproduce:
 - Create properties like abc.deploy: true, xyz.deploy: true, def.deploy : false for different artifacts
 - Run a query like below:
 {{curl -uadmin:password -H ""Content-Type:text/plain"" -d 'items.find({""repo"": ""generic-local"",""@*.deploy"":{""$ne"":""true""}})' -X POST [http://localhost:8081/artifactory/api/search/aql] }} ---> 0 results
 - Whereas a query like:
 {{curl -uadmin:password -H ""Content-Type:text/plain"" -d 'items.find({""repo"": ""generic-local"",""@*"":{""$ne"":""true""}})' -X POST [http://localhost:8081/artifactory/api/search/aql] }} ---> Correct results",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzffj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Gems Package search is not providing results from gem-remote-cache.,RTFACT-19317,72834,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jainishshah17,jainishshah17,31/May/19 5:02 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,RubyGems,Search,,,,,,1,,,,,,"Gems Package search shows search result only from local gems repositories. 
Steps to reproduce issue:
1. Pull any package from Gems remote repository.
2. Make sure package is available in remote repository cache.
3. Try to search that package with Package Tye search in Artifactory.

Current behaviour : 
It does not return gems packages from cache of remote repository.

Expected behaviour:
It should return gems packages from cache of remote repository.

Note: Looks like properties `gem.name` and `gem.version` is not added to cached packages in remote repository. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzev3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"02/Jun/19 8:01 AM;Maras;Hi!
In my opinion this issue is related to RTFACT-17843 - which is going to be fixed in version 6.11.0.","02/Jun/19 8:05 AM;Maras;Another ticket which is related is RTFACT-18587 which was fixed in version 6.10.0.
When the version 6.11.0 is releases we will perform regression test for ruby gems repository behaviour. Please stay tuned. Regards",,,,,,,,,
Cannot replicate properties and gives error when prop_value contains an illegal special character,RTFACT-19315,72826,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Disham,Disham,31/May/19 11:07 AM,17/Feb/21 10:30 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Problem Statement:
In a DR setup, if source has a prop_value as '�' on the artifact - it is not getting replicated and gives below error if the target DB is MySQL:

{quote}2019-05-31 11:04:07,099 [http-nio-8081-exec-6] [ERROR] (o.a.e.UploadServiceImpl:323) - Failed to deploy properties to 'generic-local:abcd.txt'
org.artifactory.storage.StorageException: Failed to set properties on node: 11
...
Caused by: java.sql.SQLException: Incorrect string value: '\xEF\xBF\xBD' for column 'prop_value' at row 1
...
2019-05-31 11:04:07,100 [http-nio-8081-exec-6] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 409: Failed to deploy properties : Failed to set properties on node: 11 on path generic-local:abcd.txt:properties
{quote}

Impact:
Customer cannot replicate properties but set it on source instance

Steps to reproduce:
- Deploy a property using REST API with value '�' 
- Try to replicate this artifact to another instance having MySQL DB
- See the error as per above

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzetb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Xray fails to connect to Artifactory,RTFACT-19312,72792,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,safwankath,safwankath,30/May/19 6:41 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,,,,,,,,0,,,,,,"When adding a new Artifactory instance, Xray gives the following error: 

""Xray was able to reach Artifactory, but Artifactory was unable to reach Xray""

After further digging into xray system logs, the error is as follows:

[EROR] (jfrog.com/xray/internal/handlers/binary_managers.BinManagerHandler.TestConnection:1721) Got error from Artifactory: response: &{400 Bad Request 400 HTTP/1.1 1 1 map[Content-Type:[application/json] ... err: Failed to access :http://<ARTIFACTORY_IP>:<PORT>/artifactory/api/system/verifyconnection return status code : 400

Artifactory version: 6.10.0 Xray version: 2.8.6 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzep3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
No access to remote repo,RTFACT-19304,72763,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mBankNIT,mBankNIT,30/May/19 11:00 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,Artifactory Home,,,,,,,0,,,,,,"Client cannot access remote repository when ""Store Artifacts Locally"" is disabled.
Artifactory forces authentication: {code}2019-05-30 12:38:41,888 [DENIED DOWNLOAD] nuget-test-cache:angularjs.1.7.8.1.nupkg  for client : NA / 10.66.185.200.{code}
{code}2019-05-30 12:42:07,182 [DENIED DOWNLOAD] kubernetes-rpm-cache:yum/repos/kubernetes-el7-x86_64/repodata/repomd.xml  for client : NA / 10.24.11.13.{code}
Steps to reproduce:
# create remote repository (tested on nuget and rpm)
# uncheck ""Store Artifacts Locally""
# configure client to target the repo
# try to install any package",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzek7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Failed to send a message: Package path already exists on OJO.,RTFACT-19291,72720,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,harishgupta01,harishgupta01,29/May/19 6:45 PM,05/Jan/21 11:22 AM,18/Feb/21 8:59 AM,,,,,,,,,JCenter,,,,,,,0,,,,,,"I am getting ""Failed to send a message: Package path already exists on OJO."" message when trying to add the package to JCenter.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzean:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UI builds endpoint causes full table scan on Oracle,RTFACT-19277,72656,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidx,davidx,28/May/19 8:59 PM,17/Feb/21 10:58 AM,18/Feb/21 8:59 AM,,6.6.0,6.8.7,,,,,,,,,,,,,2,,,,,,"When Using Oracle, the UI builds invokes a query:
{code:java}
SELECT d.build_id, d.build_name, d.build_number, d.build_date FROM builds d INNER JOIN (SELECT c.build_name, max(c.build_date) build_time from builds c group by c.build_name) k
 ON k.build_name=d.build_name AND k.build_time=d.build_date
{code}
By running an explain plan, we find that this is not using the index and is causing the UI to not load due to a long-running query (~24-28 minutes for 280k entries).

At scale, this renders the UI unusable for most end users.
{code:java}
Plan hash value: 497442790

-------------------------------------------------------------------------------
| Id | Operation | Name | Rows | Bytes | Cost (%CPU)| Time |
-------------------------------------------------------------------------------
| 0 | SELECT STATEMENT | | 3247 | 1350K| 19 (6)| 00:00:01 |
|* 1 | HASH JOIN | | 3247 | 1350K| 19 (6)| 00:00:01 |
| 2 | VIEW | | 3247 | 450K| 10 (10)| 00:00:01 |
| 3 | HASH GROUP BY | | 3247 | 450K| 10 (10)| 00:00:01 |
| 4 | TABLE ACCESS FULL| BUILDS | 3247 | 450K| 9 (0)| 00:00:01 |
| 5 | TABLE ACCESS FULL | BUILDS | 3247 | 900K| 9 (0)| 00:00:01 |
-------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

1 - access(""K"".""BUILD_NAME""=""D"".""BUILD_NAME"" AND
""K"".""BUILD_TIME""=""D"".""BUILD_DATE"")

Note
-----
- dynamic statistics used: dynamic sampling (level=2)


{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzdxj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"license rest API ""notfound"" parameter doesn't work",RTFACT-19276,72654,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,28/May/19 8:27 PM,17/Feb/21 10:59 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Currently, using the license search api ([https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-LicenseSearch]) with the notfound parameter doesn't work. For example, if you use the below command, the API should return all artifacts without a license.

curl -u matthewwtest:password ""http://localhost:8081/artifactory/api/search/license?notfound=1&repos=example-repo-local""

However, no results are returned.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzdx3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Latest version rest api performance degradation ,RTFACT-19274,72637,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,28/May/19 1:26 PM,17/Feb/21 11:08 AM,18/Feb/21 8:59 AM,,4.11.0,,,,,,,,,,,,,,3,PB_Done,,,,,"When using the below rest command:

GET /api/search/latestVersion?g=org.acme&a=artifact&v=1.0-SNAPSHOT&repos=libs-snapshot-local

The following query takes place on Artifactory version greater or equal to 4.11.0

*_+On Artifactory 6.10.0+_*

2019-05-27 14:19:15,552 [http-nio-8081-exec-9] [DEBUG] (o.j.s.JdbcHelper    :191) - *_Query returned in 25.78 secs_* : 'select distinct n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName,n.created as itemCreated,n.modified as itemModified,n.updated as itemUpdated,n.created_by as itemCreatedBy,n.modified_by as itemModifiedBy,n.node_type as itemType,n.bin_length as itemSize,n.node_id as itemId,n.depth as itemDepth,n.sha1_actual as itemActualSha1,n.sha1_original as itemOriginalSha1,n.md5_actual as itemActualMd5,n.md5_original as itemOriginalMd5,n.sha256 as itemSha2 from  nodes n where ( n.repo = 'maven' and( n.node_path like 'org/springframework/spring-test/%' or n.node_path = 'org/springframework/spring-test')) and n.node_type = 1 '

 

*_+On version prior to 4.3.0+_*

2019-05-27 14:31:24,063 [http-nio-8081-exec-1] [DEBUG] (o.a.s.d.u.JdbcHelper:111) - *_Query returned in 2.8 secs_* : 'SELECT nodes.node_id, nodes.node_type, nodes.repo, nodes.node_path, nodes.node_name FROM nodes WHERE nodes.node_type=1 AND  nodes.repo = 'maven' AND nodes.depth >= 4 AND (nodes.node_path = 'org/springframework/spring-test' OR nodes.node_path LIKE 'org/springframework/spring-test/%' )'

 

The above has been done on a testing environment with Artifactory version 4.3.0  and 6.10.0. Both instance’s have 1 million maven packages. Please notice the duration difference. The following Jira fix is what caused the issue RTFACT-11899.

 

Steps To reproduce:

1.) Setup Artifactory version 6.10.0 and 4.3.0

2.) Create a maven repository. 

3.) Using a script we created 1 million jars under the following layout: org/springframework/spring-test/<version_number>/spring-test-<version_number>.jar (following the maven layout). the jar is the same file in each directory but with a different name.

4.) using JFrog CLI we uploaded the packages to Artifactory. in our example we use the following JFrog CLI command: jfrog rt u --flat=false --threads=30 ""org/springframework/spring-test/*"" maven/

5.) We than used the below rest command to search for the latest version:

     $ curl -uadmin:password   ""[http://localhost:8081/artifactory/api/search/latestVersion/?g=org.springframework&a=spring-test&v=*&repos=maven]""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4p7:az9w",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Apr/20 4:22 PM;pmanelski;The results that I witnessed for this query were significantly longer than those mentioned in the description. I had a script that called this endpoint 12 times and it took anywhere from 30 mins to 2 hours to return all the results.

As a workaround for this issue, I've begun using the [GAVC search endpoint|[https://www.jfrog.com/confluence/display/JFROG/Artifactory+REST+API#ArtifactoryRESTAPI-GAVCSearch]] and then parsing the response to determine the latest version. The script now completes in around 1 second.",,,,,,,,,,
"On RHEL8, Can pull the 6.8.12 but not 6.9.2, 6.10.1 or latest",RTFACT-19259,72497,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,binarylandscapes,binarylandscapes,26/May/19 5:00 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.10.1,6.9.2,,,,,,Docker Image,,,,,,,0,,,,,,"error pulling image ""docker.bintray.io/jfrog/artifactory-oss:latest"": unable to pull docker.bintray.io/jfrog/artifactory-oss:latest: unable to pull image: Error committing the finished image: error adding layer with blob ""sha256:d8bafd553c840887ccc4c098d59309ee8908467966416fe4f743cae837184354"": Error processing tar file(exit status 1): lchown /etc/os-release: invalid argument

error pulling image ""docker.bintray.io/jfrog/artifactory-oss:6.10.1"": unable to pull docker.bintray.io/jfrog/artifactory-oss:6.10.1: unable to pull image: Error committing the finished image: error adding layer with blob ""sha256:d8bafd553c840887ccc4c098d59309ee8908467966416fe4f743cae837184354"": Error processing tar file(exit status 1): lchown /etc/os-release: invalid argument",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzd3z:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
build.created field is updated when a build is promoted,RTFACT-19256,72443,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prenaud76,prenaud76,23/May/19 1:30 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.7.3,,,,,,,,,,,,,,2,,,,,,"I recently noticed that the *build.created* field of a build is not reflecting the timestamp of the build *creation* time. It is instead reflecting the timestamp of the last *modification* of that build.

I have an example here where several builds where created a while back for job named ""pare-sandbox_master"". I took a sample for build #22 of this job, that was the subject of several promotions over time.

Below is the AQL query I am using to fetch information related to this particular build:
{code:java}
$ cat ql1.json
builds.find(
   {
      ""name"": {""$eq"":""pare-sandbox_master""},
      ""number"": ""22""
   }
)
.include(""*"", ""promotion"")
{code}
And below is the result obtained from the above query:
{code:java}
$ curl -ns -X POST https://..../artifactory/api/search/aql -T ql1.json | jq
{
""results"": [
{
""build.created"": ""2019-05-22T16:10:05.217-04:00"",
""build.created_by"": ""pare"",
""build.name"": ""pare-sandbox_master"",
""build.number"": ""22"",
""build.promotions"": [
{
""build.promotion.created"": ""2019-05-22T15:02:57.149-04:00"",
""build.promotion.created_by"": ""pare"",
""build.promotion.repo"": ""ql1-local"",
""build.promotion.status"": ""QL1""
},
{
""build.promotion.created"": ""2019-05-22T15:08:24.031-04:00"",
""build.promotion.created_by"": ""pare"",
""build.promotion.repo"": ""ql2-local"",
""build.promotion.status"": ""QL2""
},
{
""build.promotion.created"": ""2019-05-22T15:41:55.289-04:00"",
""build.promotion.created_by"": ""pare"",
""build.promotion.repo"": ""ql1-local"",
""build.promotion.status"": ""QL1""
},
{
""build.promotion.created"": ""2019-05-22T15:40:10.673-04:00"",
""build.promotion.created_by"": ""pare"",
""build.promotion.repo"": ""ql1-local"",
""build.promotion.status"": ""QL1""
},
{
""build.promotion.comment"": ""Promoted by Pipeline on 2019-03-28T10:45:16.785"",
""build.promotion.created"": ""2019-03-28T10:45:16.821-04:00"",
""build.promotion.created_by"": ""build-dev"",
""build.promotion.repo"": ""internal-snapshots"",
""build.promotion.status"": ""Internal Release""
},
{
""build.promotion.created"": ""2019-05-22T16:10:05.187-04:00"",
""build.promotion.created_by"": ""pare"",
""build.promotion.repo"": ""ql1-local"",
""build.promotion.status"": ""QL1"",
""build.promotion.user"": ""pare""
}
],
""build.url"": ""https://jenkins.kaloom.io/job/pare-sandbox/job/master/22/""
}
],
""range"": {
""start_pos"": 0,
""end_pos"": 1,
""total"": 1
}
}
{code}
If you look carefully at the AQL output, you will notice that the *build.created* value corresponds to the timestamp of the *latest promotion*.

Also, you will notice that this build was first promoted to ""Internal Release"" status on 2019-03-28T10:45:16.821-04:00, which logically means that the build was created at least before that.

Is it fair to assume that the *build.created* value of this build should be some time around 2019-03-28T10:45:16.821-04:00 instead?",,,,,,,,,,,,,,,,RTFACT-19060,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzctz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/May/19 1:32 PM;prenaud76;I marked this issue as High priority because we are building automation logic that needs to rely on this field for proper execution.","21/Jun/19 7:37 PM;Maras;
This error prevents the use of data about the creation of a build to implement the artefact retention policy","23/Jun/19 11:03 AM;Maras;During the replication of the error we found that also the field *""build.created_by""* is unnecessarily updated as a result of the promotion of build.
As part of the correction to this error, a program to correct incorrect values ​​in the database should be provided","23/Jun/19 11:24 AM;Maras;@krihelis Please review that error and include fix in next release","23/Jun/19 1:08 PM;Maras;The error is in the very basic Arifactory function as the buildService.promoteBuild method also does not work properly in this respect.
",,,,,,
"For Artifactory Cloud servers, the ""docker pull"" command shown in the UI, when creating a new Docker repository, is incorrect ",RTFACT-19254,72417,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avivb,avivb,23/May/19 8:56 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,UI,Web UI,,,,,,1,PB_Done,,,,,"Steps to reproduce:
1. In Artifactory Cloud, create a Docker repository
2. A pop-up message will show how to interact with this repository from Docker client
The first part is correct:
{code}
docker login avivb-docker-remote-test-2.jfrog.io
{code}
The second part is not:
{code}
docker pull hello-world
{code}
Should be:
{code}
docker pull avivb-docker-remote-test-2.jfrog.io/hello-world
{code}

 !Screen Shot 2019-05-23 at 11.53.51.png|thumbnail! ",,,,,,,,,,,,,,,,,,,"23/May/19 8:56 AM;avivb;Screen Shot 2019-05-23 at 11.53.51.png;https://www.jfrog.com/jira/secure/attachment/32399/Screen+Shot+2019-05-23+at+11.53.51.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzcpz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Build content should be reachable from the Artifactory User Plugins public api,RTFACT-19253,72416,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shayb,shayb,23/May/19 8:51 AM,17/Feb/21 11:17 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,Builds are now stored as artifacts in the artifactory-build-info repository. The User Plugins public api should expose a way to retrieve the build artifact content under the Builds public api service.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzcpr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Empty repositories are getting listed Even if repository doesn't anonymous access,RTFACT-19252,72409,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muhammeds,muhammeds,23/May/19 7:21 AM,17/Feb/21 11:17 AM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,,,,,,,,1,PB_Done,,,,,"We have noticed that the direct URL to an empty repository without authentication is able to reach to the repository and providing a 200 response even though the tree browser doesn't show it.

Steps to reproduce:

Create a local repository.
Before adding anything to the repository or providing permissions to the anonymous user, try to access the direct URL to the index page of the repository.

ex: [http://localhost:8081/artifactory/libs-release-local/]

 

This could provide anyone the information about the existence of such a repository.


Workaround:

Disable ""Allow Anonymous Access"" in ""General Security Settings""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzcof:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
authenticated librarian-puppet install fails with 401 without anonymous access,RTFACT-19250,72400,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,22/May/19 11:41 PM,17/Feb/21 11:54 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"installing with authentication through librarian puppet fails due to a 401 without anonymous access enabled. May be an issue with librarian-puppet.

Steps to reproduce:

-create local and remote puppet repo, aggregate in virtual repo puppet

-disable anonymous access

-set up Puppetfile:

forge ""http://admin:AP9hAHvktj9DbWbWg2LE5Jsp2wo@mill.jfrog.info:12278/artifactory/api/puppet/puppet""

mod 'puppet-nginx', '0.4.0'

-run ""librarian-puppet install --no-use-v1-api --verbose --clean"" in same folder as Puppetfile. see that it fails with a 401

-You may run into a ""Puppetfile and Puppetfile.lock are out of sync!"" error.  To resolve this, edit the Puppetfile.lock and edit the remote url to have credentials:

 remote: http://admin:AP9hAHvktj9DbWbWg2LE5Jsp2wo@mill.jfrog.info:12278/artifactory/api/puppet/puppet

-run ""librarian-puppet install --no-use-v1-api --verbose --clean"" again, see the request fails installing the packages:

Error executing puppet module install. Check that this command succeeds:

puppet module install --version 4.25.1 --target-dir /Users/mattheww/Downloads/puppet/.tmp/librarian/cache/source/puppet/forge/mill_jfrog_info_artifactory_api_puppet_puppet/puppetlabs-stdlib/4.25.1 --module_repository http://mill.jfrog.info:12278/artifactory/api/puppet/puppet --modulepath /Users/mattheww/Downloads/puppet/.tmp/librarian/cache/source/puppet/forge/mill_jfrog_info_artifactory_api_puppet_puppet/puppetlabs-stdlib/4.25.1 --module_working_dir /Users/mattheww/Downloads/puppet/.tmp/librarian/cache/source/puppet/forge/mill_jfrog_info_artifactory_api_puppet_puppet/puppetlabs-stdlib/4.25.1 --ignore-dependencies puppetlabs-stdlib

Error:

*Error: Request to Puppet Forge failed.*

  *The server being queried was http://mill.jfrog.info:12278/v3/releases?module=puppetlabs-stdlib&sort_by=version&exclude_fields=readme,changelog,license,uri,module,tags,supported,file_size,downloads,created_at,updated_at,deleted_at*

  *The HTTP response we received was '401 Unauthorized'*

-Editing your puppet.conf to have credentials makes no difference with librarian-puppet

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzcmn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"29/May/19 2:41 PM;mattheww;Seems to be a problem with librarian-puppet supporting passing authentication in a URL. Their documentation doesn't mention anything about credentials or authentication. 

[https://github.com/voxpupuli/librarian-puppet], [http://librarian-puppet.com/]",,,,,,,,,,
Threads collision does not return unique info,RTFACT-19248,72379,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,22/May/19 3:46 PM,17/Feb/21 12:00 PM,18/Feb/21 8:59 AM,,6.10.1,,,,,,,,,,,,,,0,,,,,,"*Problem statement and Impact*

 

Threads collision does not return unique info

 

*Steps to reproduce the error*

When a concurrent download request happen, and we have a plugin that uses the afterDownload closure in order to perform operations on the relevant item, a collision between the threads happen and information of another item is being returned - the issue happens when we call to a function that works on the item.

 

To reproduce the behavior:
 # Install Jenkins
 # Install Artifactory v6.10.1 Docker installation
 # Implement User plugin Groovy and Properties files under $ARTIFACTORY_HOME/etc/plugins
 # Add the following to the User Plugin for debugging purposes under afterDownload:

 
{code:java}
def (md5Checksum, sha1Checksum, namespace) = getChecksumsAndNamespace(item) log.info(""testing:"" +item.repoPath) 
log.info(""testing ns: ""+item.getRepoPath().getParent().getPath()) log.info(sha1Checksum)  {code}
 

      5. Add the following function, which used in Step 4:

 
{code:java}
def getChecksumsAndNamespace(ItemInfo item) {    def md5Checksum = """"    def sha1Checksum = """"    def namespace = """"      try {        md5Checksum = item.checksumsInfo.md5    } catch (Exception) {        log.debug(""Missing md5 checksum for "" + item.getRepoPath().toString())    }      try {        sha1Checksum = item.checksumsInfo.sha1    } catch (Exception) {        log.debug(""Missing sha1 checksum for "" + item.getRepoPath().toString())    }      try {        namespace = item.getRepoPath().getParent().getPath()    } catch (Exception) {        log.debug(""Missing namespace for "" + item.getRepoPath().toString())    }      return [ md5Checksum, sha1Checksum, namespace ] }{code}
 

          6. Create a Maven job to run the following - [https://github.com/jfrog/project-examples/tree/master/maven-example]

 

*Expected results*

Expected to see in artifactory.log the “http-nio-8081-exec-*X*” threads to return unique info for the downloaded artifact.

*Actual results*

return incorrect info for different artifacts, as can be seen below:

2019-05-22 11:51:56,832 [http-nio-8081-exec-1] [DEBUG] (test                :301) - {color:#FF0000}949f23004f1784d36be50e117b4ece4cbf5cae78{color}

2019-05-22 11:51:56,833 [http-nio-8081-exec-4] [DEBUG] (test                :301) - {color:#FF0000}949f23004f1784d36be50e117b4ece4cbf5cae78{color}

2019-05-22 11:51:56,834 [http-nio-8081-exec-4] [INFO ] (o.a.m.MonitorLogger :-1) - Action=DOWNLOAD|User=anonymous|Name=surefire-testng-utils|Version=2.12.4|Package=surefire-testng-utils-2.12.4.jar|RepoPath=jcenter-cache:org/apache/maven/surefire/surefire-testng-utils/2.12.4/surefire-testng-utils-2.12.4.jar|RepoKey=jcenter-cache|Size=22.99KB|SizeBytes=23545|RequestAddress=172.17.0.1|PackageType=maven|NameSpace=org/apache/maven/sur

Threads collision does not return unique info

efire/surefire-testng-utils/2.12.4|md5=b1896576e617bac446950fa43edb2eeb|sha1={color:#d04437}949f23004f1784d36be50e117b4ece4cbf5cae78{color}|Ext=jar

2019-05-22 11:51:56,835 [http-nio-8081-exec-10] [INFO ] (o.a.r.HttpRepo      :445) - jcenter downloaded https://jcenter.bintray.com/org/apache/maven/surefire/surefire-testng/2.12.4/surefire-testng-2.12.4.jar 32.80 KB at 1,744.04 KB/sec

2019-05-22 11:51:56,834 [http-nio-8081-exec-7] [INFO ] (test                :300) - testing ns: org/apache/maven/surefire/surefire-grouper/2.12.4

2019-05-22 11:51:56,837 [http-nio-8081-exec-7] [DEBUG] (test                :301) - {color:#FF0000}949f23004f1784d36be50e117b4ece4cbf5cae78{color}

2019-05-22 11:51:56,838 [http-nio-8081-exec-1] [INFO ] (o.a.m.MonitorLogger :-1) - Action=DOWNLOAD|User=anonymous|Name=maven-artifact|Version=2.0|Package=maven-artifact-2.0.jar|RepoPath=jcenter-cache:org/apache/maven/maven-artifact/2.0/maven-artifact-2.0.jar|RepoKey=jcenter-cache|Size=76.92KB|SizeBytes=78761|RequestAddress=172.17.0.1|PackageType=maven|NameSpace=org/apache/maven/surefire/surefire-testng-utils/2.12.4|md5=b1896576e617bac446950fa43edb2eeb|sha1={color:#FF0000}949f23004f1784d36be50e117b4ece4cbf5cae78{color}|Ext=jar

2019-05-22 11:51:56,842 [http-nio-8081-exec-7] [INFO ] (o.a.m.MonitorLogger :-1) - Action=DOWNLOAD|User=anonymous|Name=surefire-grouper|Version=2.12.4|Package=surefire-grouper-2.12.4.jar|RepoPath=jcenter-cache:org/apache/maven/surefire/surefire-grouper/2.12.4/surefire-grouper-2.12.4.jar|RepoKey=jcenter-cache|Size=36.92KB|SizeBytes=37808|RequestAddress=172.17.0.1|PackageType=maven|NameSpace=org/apache/maven/surefire/surefire-testng-utils/2.12.4|md5=b1896576e617bac446950fa43edb2eeb|sha1={color:#FF0000}949f23004f1784d36be50e117b4ece4cbf5cae78{color}|Ext=jar",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzci7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
InstallService.bat does not work with OpenJDK 11,RTFACT-19244,72337,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Joakim,Joakim,22/May/19 9:47 AM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,,,,,,,,4,artifactory,,,,,"I have downloaded Artifactory Pro 6.10.1 and unzipped the package on a new Windows Server, where OpenJDK has been installed. 

JAVE_HOME is defined with the correct path.

When I run installService.bat from %Artifactory_Home%\bin I get the following error:
{quote}The JAVA_HOME environment variable is not defined correctly
This environment variable is needed to run this program
NB: JAVA_HOME should point to a JDK not a JRE
{quote}
 

The problem is that the installService.bat script tries to find jave.exe and javaw.exe in %JAVA_HOME%\jre\bin. But for OpenJDK 11 these files are located in %JAVA_HOME%\bin.

 

Furthermore the following JVM option is no longer supported from Java 11, so that parameter has to be removed in the installService.bat 
{quote}-Djava.endorsed.dirs=%CATALINA_HOME%\endorsed
{quote}
 

By the way: I had to set the affected version to 6.10.0 - unreleased version even though the version 6.10.1 is released.

 ","Windows Server 2019

openjdk version ""11.0.2"" 2019-01-15
OpenJDK Runtime Environment 18.9 (build 11.0.2+9)
OpenJDK 64-Bit Server VM 18.9 (build 11.0.2+9, mixed mode)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzcav:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
replication 2.0 delete events that receive a 404 count towards the total errors that fail a replication,RTFACT-19243,72335,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,itamarb,itamarb,22/May/19 9:01 AM,17/Feb/21 12:06 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"An example of such a scenario is with replication configured between 2 maven repositories that have a max unique snapshot policy enabled.
If for example the policy is configured to keep 3 unique snapshots, when you deploy the 4th, it triggers an event to replicate the 4th to the destination, the destination's policy it triggered and deletes the 1st snapshot, then the source's policy deletes the 1st and sends a delete event on the 1st snapshot, which fails on a 404 since the 1st snapshot does not exist in the destination.

These 404 should not be counted towards the max errors to fail a replication.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzcan:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Set me up produces wrong links for conan repos when using a custom context root,RTFACT-19236,72277,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cconnert_swarm,cconnert_swarm,21/May/19 8:39 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,Conan,Set Me Up,,,,,,0,artifactory,community,conan,P2,,"We setup artifactory-cpp-ce under ""artifactory-cpp-ce"" as context root. 

Now when we hit the set me up button on a local conan repo parts of the context are repeated.

In particular [http://localhost:8081/artifactory-cpp-ce] gets [http://localhost:8081/artifactory-cpp-ce-cpp-ce/api....]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc497x:ii",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Packages from a local conan repository cannot be distributed to bintray,RTFACT-19234,72275,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,cconnert_swarm,cconnert_swarm,21/May/19 8:35 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,Bintray Integration,Conan,,,,,,0,artifactory,conan,,,,"With the default conan distribution rule we are unalbe to publish artifacts to bintray due to the following warnings and errors:

""Failing rule default - No value present for token ${module} that was found in field 'package' for artifact development/core/opencv/0.0.1/stable/0/package/0ab9fcf606068d4347207cc29edd400ceccbc944/index.json""

and

""General Errors
 No valid paths to distribute to Bintray, aborting.
File_development/core/opencv/0.0.1/stable/0/package/0ab9fcf606068d4347207cc29edd400ceccbc944/index.json_resulted with the following errors
Coordinate Field package in rule 'default' contains tokens that were not matched: ${module}:${org} for artifact development/core/opencv/0.0.1/stable/0/package/0ab9fcf606068d4347207cc29edd400ceccbc944/index.json, failing this rule.
Coordinate Field path in rule 'default' contains tokens that were not matched: ${artifactPath} for artifact development/core/opencv/0.0.1/stable/0/package/0ab9fcf606068d4347207cc29edd400ceccbc944/index.json, failing this rule.
Coordinate Field version in rule 'default' contains tokens that were not matched: ${baseRev}:${channel} for artifact development/core/opencv/0.0.1/stable/0/package/0ab9fcf606068d4347207cc29edd400ceccbc944/index.json, failing this rule.""
 
Using regex based matching we were able to extract the required information but we still did not manage to publish to bintray. In this case the problem was that the we did not find a way to mirror the directory structure.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzbw7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker push race condition when pushing images of the same image and tag,RTFACT-19231,72262,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tomern,loreny,loreny,21/May/19 1:26 AM,17/Feb/21 12:08 PM,18/Feb/21 8:59 AM,,6.18.1,,,,,,,,,,,,,,4,PB_Done,,,,,"Problem:
When you deploy two images, with the same image name and tag simultaneously, but the content (checksum) of the layers are different, Artifactory HA is not able to handle its docker metadata calculation gracefully. What happens is that once the upload for both completes, due to the proximity of the uploads, Artifactory cleans up the ""unreferenced"" layers for both images, leaving nothing behind. Then, later on when a pull is attempted, all layers get a 404, as they've been moved to the trash. 

Reproduce steps:
To easily reproduce this, you will need to be able to execute terminal commands in simultaneity; additionally, its easiest to have both docker clients have very similar latency to Artifactory. I was able to achieve this by having the following set up:

GCP machine 1:
docker client 1
HA node 1

GCP machine 2:
docker client 2
HA node 2
NGINX

used GCP's SQL for the database.

Then, I created 9 files on each machine, that were ~10MB in size, and built the image with the same tag on both machines: docker.art/docker-base/test:hello9. Example dockerfile:
{noformat}
FROM scratch
ADD test1.txt /
ADD test2.txt /
ADD test3.txt /
ADD test4.txt /
ADD test5.txt /
ADD test6.txt /
ADD test7.txt /
ADD test8.txt /
ADD test9.txt /
{noformat}

All the test files have different checksums, for both images, but the resulting size is the same. This makes the manifest the same size as well. Then, using something like iTerm's command broadcast, I triggered a docker push on both machines at once. This reproduces the scenario described above.

node 1 request
{noformat}
20190520234912|1|REQUEST|10.156.0.23|non_authenticated_user|GET|/api/docker/docker/v2/|HTTP/1.0|401|0
20190520234912|64|REQUEST|10.156.0.23|admin|GET|/api/docker/docker/v2/token|HTTP/1.0|200|0
20190520234912|35|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:591d9cb171b88bd9398d78e054fbf3184f88ffa411aab5d306ca79f43ad1655a|HTTP/1.0|404|0
20190520234912|30|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:71c54e35066aa38f7777b04a5fb1650ec1068cc2d8b09a08b397f85e359a0edd|HTTP/1.0|404|0
20190520234912|57|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:6ea32b4235a39316cb8b80b9e08a346652b380d2768332b40aeab10b66c557f6|HTTP/1.0|404|0
20190520234912|66|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:b182b2b64246740751b5b389baecfcdf594c6e0ad472b2c07e4c9e5ca3cb8d1e|HTTP/1.0|404|0
20190520234912|78|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e523d8e8980ecd4a70d92eeaedc28939fbb3f0f8c1340666ac81860b21617d2a|HTTP/1.0|404|0
20190520234912|49|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|21|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|42|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|23|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|14|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|853|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/4c5baf01-b16e-4ca4-9923-0957a55e2677|HTTP/1.0|202|0
20190520234914|25|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e523d8e8980ecd4a70d92eeaedc28939fbb3f0f8c1340666ac81860b21617d2a|HTTP/1.0|200|0
20190520234914|897|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/e9c3aceb-82a3-4569-a185-529325754ac0|HTTP/1.0|202|0
20190520234914|995|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/1fdf46b4-6e7a-4262-8dcb-396733ae4d9b|HTTP/1.0|202|0
20190520234914|21|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e6b89cde4d870ab62ed97075b9ee9a11fa93b1eaff25ab8f1fc4749b05716f6b|HTTP/1.0|404|0
20190520234914|17|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|1001|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/b30108fd-7843-4f2e-8550-074393032b13|HTTP/1.0|202|0
20190520234914|128|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/99aa6a53-f038-44ba-99a5-dd1c41ca72ce|HTTP/1.0|201|0
20190520234914|37|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:6ea32b4235a39316cb8b80b9e08a346652b380d2768332b40aeab10b66c557f6|HTTP/1.0|200|0
20190520234914|19|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:591d9cb171b88bd9398d78e054fbf3184f88ffa411aab5d306ca79f43ad1655a|HTTP/1.0|200|0
20190520234914|120|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/7bbcab59-8e0b-4a91-b27d-2185565db6ca|HTTP/1.0|201|0
20190520234914|16|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|47|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:d1a861fbbf732a16de2c4bbb4acadc51ffc6955e44cd32c811f6dfa596075daf|HTTP/1.0|404|0
20190520234914|14|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|51|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:887688e2d672a315a4a1112ea0b042601015ac96aaed831514b358e75b8151f4|HTTP/1.0|200|0
20190520234914|100|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/d62a1439-a6d9-4eef-aaa2-9cbff6a52e56|HTTP/1.0|201|0
20190520234914|816|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/a01db820-36bd-4c1d-be94-188705c7fec3|HTTP/1.0|202|0
20190520234914|30|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|112|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/a4e852aa-a3fe-4c04-ae6c-f17c713f6790|HTTP/1.0|201|0
20190520234915|152|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/a01db820-36bd-4c1d-be94-188705c7fec3|HTTP/1.0|201|0
20190520234915|22|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:ae77969c317cf23f9abd7fc1cad04464c632798492618a12770073e7bfa0c11d|HTTP/1.0|200|0
20190520234915|53|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:58b341b59c1aa387f7fc80e735fc57cdabef17d49d0e1416dbf5767847028184|HTTP/1.0|404|0
20190520234915|22|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234915|73|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/c97aac53-b7aa-4e63-bbfd-dec07affd299|HTTP/1.0|201|0
20190520234916|854|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/4317572d-1a4b-48c4-83f0-5ad6134391e0|HTTP/1.0|202|0
20190520234916|741|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/3df9dc86-cb87-4f74-8e78-f97340f71e4f|HTTP/1.0|202|0
20190520234916|920|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/c9f07ea0-c49a-4112-a0f3-017e6fca35d6|HTTP/1.0|202|0
20190520234916|535|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/431ac190-1c05-4a80-8b75-672faa51de5d|HTTP/1.0|202|0
20190520234916|74|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/dcef82bf-a20a-443b-b5b9-93d816420b29|HTTP/1.0|201|0
20190520234916|16|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:d47a93569ba84bfd67efc32c978ecd603f3843d3ddb37a9db3bdf4892ffb0a05|HTTP/1.0|200|0
20190520234916|79|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/3df9dc86-cb87-4f74-8e78-f97340f71e4f|HTTP/1.0|201|0
20190520234916|17|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:abcc18d1e69225b11debd3b8753036f576db69b40f9dec6a810fe23f99390515|HTTP/1.0|200|0
20190520234916|83|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/b602f990-cd37-46c4-9f60-15ca8b82e5c9|HTTP/1.0|201|0
20190520234916|16|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:58b341b59c1aa387f7fc80e735fc57cdabef17d49d0e1416dbf5767847028184|HTTP/1.0|200|0
20190520234916|20|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:062ada7d7793afa950a77552afd291e09155ab42f14bfe9ddd815e8098f48d39|HTTP/1.0|404|0
20190520234916|15|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234916|18|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:2bccdca900ed5d01ddcc3693cb106b37de600aba71772783644b2adba38d6108|HTTP/1.0|404|0
20190520234916|71|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/9add8d21-2e2a-4e16-bade-3745e582bf79|HTTP/1.0|201|0
20190520234916|66|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/19cf64a9-ea9d-47fa-9d4b-43692d32a6a2|HTTP/1.0|201|0
{noformat}
Important log here; see different IP addresses of the deploy, for the same manifest.json
{noformat}
20190520234917|867|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/manifests/hello9|HTTP/1.0|201|2225
20190520234917|902|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/manifests/hello9|HTTP/1.0|201|2225
{noformat}
After the docker image has been uploaded, pulling fails (see below for the other part of the pull)
{noformat}
20190520235245|58|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/token|HTTP/1.0|200|0
20190520235247|20|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:abcc18d1e69225b11debd3b8753036f576db69b40f9dec6a810fe23f99390515|HTTP/1.0|404|157
20190520235247|21|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:58b341b59c1aa387f7fc80e735fc57cdabef17d49d0e1416dbf5767847028184|HTTP/1.0|404|157
20190520235247|19|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:abcc18d1e69225b11debd3b8753036f576db69b40f9dec6a810fe23f99390515|HTTP/1.0|404|157
20190520235247|19|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:58b341b59c1aa387f7fc80e735fc57cdabef17d49d0e1416dbf5767847028184|HTTP/1.0|404|157
20190520235248|18|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:887688e2d672a315a4a1112ea0b042601015ac96aaed831514b358e75b8151f4|HTTP/1.0|404|157
20190520235249|19|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:e0d43b1810832a42643a2b8dee75c44679dff8dccb82211dce33f7ff20bea154|HTTP/1.0|404|157
20190520235249|17|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:887688e2d672a315a4a1112ea0b042601015ac96aaed831514b358e75b8151f4|HTTP/1.0|404|157
20190520235249|18|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:591d9cb171b88bd9398d78e054fbf3184f88ffa411aab5d306ca79f43ad1655a|HTTP/1.0|404|157
20190520235250|17|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:591d9cb171b88bd9398d78e054fbf3184f88ffa411aab5d306ca79f43ad1655a|HTTP/1.0|404|157
20190520235250|18|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:6ea32b4235a39316cb8b80b9e08a346652b380d2768332b40aeab10b66c557f6|HTTP/1.0|404|157
{noformat}
node 1 artifactory
{noformat}
2019-05-20 23:49:13,246 [http-nio-8081-exec-5] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/4c5baf01-b16e-4ca4-9923-0957a55e2677' Content-Length: unspecified
2019-05-20 23:49:13,446 [http-nio-8081-exec-6] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/1fdf46b4-6e7a-4262-8dcb-396733ae4d9b' Content-Length: unspecified
2019-05-20 23:49:13,500 [http-nio-8081-exec-10] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/e9c3aceb-82a3-4569-a185-529325754ac0' Content-Length: unspecified
2019-05-20 23:49:13,622 [http-nio-8081-exec-9] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/b30108fd-7843-4f2e-8550-074393032b13' Content-Length: unspecified
2019-05-20 23:49:14,030 [http-nio-8081-exec-2] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/a01db820-36bd-4c1d-be94-188705c7fec3' Content-Length: unspecified
2019-05-20 23:49:15,572 [http-nio-8081-exec-5] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/4317572d-1a4b-48c4-83f0-5ad6134391e0' Content-Length: unspecified
2019-05-20 23:49:15,670 [http-nio-8081-exec-6] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/c9f07ea0-c49a-4112-a0f3-017e6fca35d6' Content-Length: unspecified
2019-05-20 23:49:15,830 [http-nio-8081-exec-3] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/3df9dc86-cb87-4f74-8e78-f97340f71e4f' Content-Length: unspecified
2019-05-20 23:49:16,077 [http-nio-8081-exec-9] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/431ac190-1c05-4a80-8b75-672faa51de5d' Content-Length: unspecified
2019-05-20 23:49:16,937 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:257) - Deploying docker manifest for repo 'docker-base/test' and tag 'hello9' into repo 'docker-local'
2019-05-20 23:49:17,003 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.r.h.DockerV2LocalRepoHandler:257) - Deploying docker manifest for repo 'docker-base/test' and tag 'hello9' into repo 'docker-local'
2019-05-20 23:49:17,393 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__6ea32b4235a39316cb8b80b9e08a346652b380d2768332b40aeab10b66c557f6'
2019-05-20 23:49:17,444 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__b182b2b64246740751b5b389baecfcdf594c6e0ad472b2c07e4c9e5ca3cb8d1e'
2019-05-20 23:49:17,451 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__ae77969c317cf23f9abd7fc1cad04464c632798492618a12770073e7bfa0c11d'
2019-05-20 23:49:17,487 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__e523d8e8980ecd4a70d92eeaedc28939fbb3f0f8c1340666ac81860b21617d2a'
2019-05-20 23:49:17,487 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__591d9cb171b88bd9398d78e054fbf3184f88ffa411aab5d306ca79f43ad1655a'
2019-05-20 23:49:17,522 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__8b4622265e8582ecc1e17015bdbf11f47f6c1a52645c516c1b075e1b20083057'
2019-05-20 23:49:17,523 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__887688e2d672a315a4a1112ea0b042601015ac96aaed831514b358e75b8151f4'
2019-05-20 23:49:17,559 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__71c54e35066aa38f7777b04a5fb1650ec1068cc2d8b09a08b397f85e359a0edd'
2019-05-20 23:49:17,560 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__e0d43b1810832a42643a2b8dee75c44679dff8dccb82211dce33f7ff20bea154'
2019-05-20 23:49:17,595 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__f68059681f391f1bc34c09bc480aae45bf0f93c7b86fecf36ec05dd2e459cd2f'
2019-05-20 23:49:17,596 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__d1a861fbbf732a16de2c4bbb4acadc51ffc6955e44cd32c811f6dfa596075daf'
2019-05-20 23:49:17,634 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__e6b89cde4d870ab62ed97075b9ee9a11fa93b1eaff25ab8f1fc4749b05716f6b'
2019-05-20 23:49:17,635 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__abcc18d1e69225b11debd3b8753036f576db69b40f9dec6a810fe23f99390515'
2019-05-20 23:49:17,669 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__e33724156665896e730506257925c334f4bbb20055f09527a439d3ab47f9f824'
2019-05-20 23:49:17,671 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__93d03ba58e758cb432a6dd50dbccaf132b56c0cb70116aea645803a3f864e2b3'
2019-05-20 23:49:17,706 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__09bebec86cd94b1612d37a3a5c65580f653368294b882f89a17d2cd4090e777e'
2019-05-20 23:49:17,709 [http-nio-8081-exec-7] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__58b341b59c1aa387f7fc80e735fc57cdabef17d49d0e1416dbf5767847028184'
2019-05-20 23:49:17,743 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__d47a93569ba84bfd67efc32c978ecd603f3843d3ddb37a9db3bdf4892ffb0a05'
2019-05-20 23:49:17,749 [http-nio-8081-exec-7] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/hello9/manifest.json' Content-Length: unspecified
2019-05-20 23:49:17,779 [http-nio-8081-exec-2] [INFO ] (o.j.r.d.v.h.DockerManifestSyncer:106) - Removing the unreferenced blob 'docker-base/test/hello9/sha256__062ada7d7793afa950a77552afd291e09155ab42f14bfe9ddd815e8098f48d39'
2019-05-20 23:49:17,791 [art-exec-11] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:37) - Starting cleanup of idle docker uploads
2019-05-20 23:49:17,793 [art-exec-11] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:58) - Completed idle docker uploads cleanup: removed 0 blobs.
2019-05-20 23:49:17,816 [http-nio-8081-exec-2] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/hello9/manifest.json' Content-Length: unspecified
2019-05-20 23:49:17,891 [art-exec-14] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:37) - Starting cleanup of idle docker uploads
2019-05-20 23:49:17,894 [art-exec-14] [INFO ] (o.j.r.d.v.i.DockerV2UploadsCleaner:58) - Completed idle docker uploads cleanup: removed 0 blobs.
{noformat}
node 1 request
{noformat}
20190520234912|1|REQUEST|10.156.0.30|non_authenticated_user|GET|/api/docker/docker/v2/|HTTP/1.0|401|0
20190520234912|56|REQUEST|10.156.0.30|admin|GET|/api/docker/docker/v2/token|HTTP/1.0|200|0
20190520234912|47|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:f68059681f391f1bc34c09bc480aae45bf0f93c7b86fecf36ec05dd2e459cd2f|HTTP/1.0|404|0
20190520234912|75|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:887688e2d672a315a4a1112ea0b042601015ac96aaed831514b358e75b8151f4|HTTP/1.0|404|0
20190520234912|76|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e0d43b1810832a42643a2b8dee75c44679dff8dccb82211dce33f7ff20bea154|HTTP/1.0|404|0
20190520234912|41|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|21|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|92|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:ae77969c317cf23f9abd7fc1cad04464c632798492618a12770073e7bfa0c11d|HTTP/1.0|404|0
20190520234912|27|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|110|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:8b4622265e8582ecc1e17015bdbf11f47f6c1a52645c516c1b075e1b20083057|HTTP/1.0|404|0
20190520234912|43|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234912|52|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|1054|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/185c1f5e-ab2a-4408-a23d-4916c1e497fd|HTTP/1.0|202|0
20190520234914|247|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/4c5baf01-b16e-4ca4-9923-0957a55e2677|HTTP/1.0|201|0
20190520234914|136|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/e9c3aceb-82a3-4569-a185-529325754ac0|HTTP/1.0|201|0
20190520234914|965|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/99aa6a53-f038-44ba-99a5-dd1c41ca72ce|HTTP/1.0|202|0
20190520234914|221|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/185c1f5e-ab2a-4408-a23d-4916c1e497fd|HTTP/1.0|201|0
20190520234914|1356|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/7bbcab59-8e0b-4a91-b27d-2185565db6ca|HTTP/1.0|202|0
20190520234914|41|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:b182b2b64246740751b5b389baecfcdf594c6e0ad472b2c07e4c9e5ca3cb8d1e|HTTP/1.0|200|0
20190520234914|58|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:f68059681f391f1bc34c09bc480aae45bf0f93c7b86fecf36ec05dd2e459cd2f|HTTP/1.0|200|0
20190520234914|214|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/1fdf46b4-6e7a-4262-8dcb-396733ae4d9b|HTTP/1.0|201|0
20190520234914|1216|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/d62a1439-a6d9-4eef-aaa2-9cbff6a52e56|HTTP/1.0|202|0
20190520234914|47|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e33724156665896e730506257925c334f4bbb20055f09527a439d3ab47f9f824|HTTP/1.0|404|0
20190520234914|43|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:09bebec86cd94b1612d37a3a5c65580f653368294b882f89a17d2cd4090e777e|HTTP/1.0|404|0
20190520234914|27|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:71c54e35066aa38f7777b04a5fb1650ec1068cc2d8b09a08b397f85e359a0edd|HTTP/1.0|200|0
20190520234914|125|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/b30108fd-7843-4f2e-8550-074393032b13|HTTP/1.0|201|0
20190520234914|23|REQUEST|10.156.0.23|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|26|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:abcc18d1e69225b11debd3b8753036f576db69b40f9dec6a810fe23f99390515|HTTP/1.0|404|0
20190520234914|24|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:d47a93569ba84bfd67efc32c978ecd603f3843d3ddb37a9db3bdf4892ffb0a05|HTTP/1.0|404|0
20190520234914|24|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234914|44|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:8b4622265e8582ecc1e17015bdbf11f47f6c1a52645c516c1b075e1b20083057|HTTP/1.0|200|0
20190520234914|918|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/a4e852aa-a3fe-4c04-ae6c-f17c713f6790|HTTP/1.0|202|0
20190520234914|37|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:93d03ba58e758cb432a6dd50dbccaf132b56c0cb70116aea645803a3f864e2b3|HTTP/1.0|404|0
20190520234914|17|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234915|19|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e0d43b1810832a42643a2b8dee75c44679dff8dccb82211dce33f7ff20bea154|HTTP/1.0|200|0
20190520234915|495|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/c97aac53-b7aa-4e63-bbfd-dec07affd299|HTTP/1.0|202|0
20190520234915|35|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e6b89cde4d870ab62ed97075b9ee9a11fa93b1eaff25ab8f1fc4749b05716f6b|HTTP/1.0|200|0
20190520234916|884|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/dcef82bf-a20a-443b-b5b9-93d816420b29|HTTP/1.0|202|0
20190520234916|97|REQUEST|10.156.0.23|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/4317572d-1a4b-48c4-83f0-5ad6134391e0|HTTP/1.0|201|0
20190520234916|22|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:09bebec86cd94b1612d37a3a5c65580f653368294b882f89a17d2cd4090e777e|HTTP/1.0|200|0
20190520234916|1058|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/b602f990-cd37-46c4-9f60-15ca8b82e5c9|HTTP/1.0|202|0
20190520234916|687|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/5d73b917-0486-4fc4-85ef-9b7e1926ecc9|HTTP/1.0|202|0
20190520234916|81|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/431ac190-1c05-4a80-8b75-672faa51de5d|HTTP/1.0|201|0
20190520234916|95|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/c9f07ea0-c49a-4112-a0f3-017e6fca35d6|HTTP/1.0|201|0
20190520234916|21|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:e33724156665896e730506257925c334f4bbb20055f09527a439d3ab47f9f824|HTTP/1.0|200|0
20190520234916|17|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:d1a861fbbf732a16de2c4bbb4acadc51ffc6955e44cd32c811f6dfa596075daf|HTTP/1.0|200|0
20190520234916|87|REQUEST|10.156.0.30|admin|PUT|/api/docker/docker/v2/docker-base/test/blobs/uploads/5d73b917-0486-4fc4-85ef-9b7e1926ecc9|HTTP/1.0|201|0
20190520234916|16|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:93d03ba58e758cb432a6dd50dbccaf132b56c0cb70116aea645803a3f864e2b3|HTTP/1.0|200|0
20190520234916|50|REQUEST|10.156.0.23|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/9add8d21-2e2a-4e16-bade-3745e582bf79|HTTP/1.0|202|0
20190520234916|14|REQUEST|10.156.0.30|admin|POST|/api/docker/docker/v2/docker-base/test/blobs/uploads/|HTTP/1.0|202|0
20190520234916|51|REQUEST|10.156.0.30|admin|PATCH|/api/docker/docker/v2/docker-base/test/blobs/uploads/19cf64a9-ea9d-47fa-9d4b-43692d32a6a2|HTTP/1.0|202|0
20190520234916|18|REQUEST|10.156.0.23|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:062ada7d7793afa950a77552afd291e09155ab42f14bfe9ddd815e8098f48d39|HTTP/1.0|200|0
20190520234916|18|REQUEST|10.156.0.30|admin|HEAD|/api/docker/docker/v2/docker-base/test/blobs/sha256:2bccdca900ed5d01ddcc3693cb106b37de600aba71772783644b2adba38d6108|HTTP/1.0|200|0
{noformat}
The pull pt 2. Only the manifest works (and the config layer).
{noformat}
20190520235246|43|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/manifests/hello9|HTTP/1.0|200|2225
20190520235247|20|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:93d03ba58e758cb432a6dd50dbccaf132b56c0cb70116aea645803a3f864e2b3|HTTP/1.0|404|157
20190520235247|37|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:2bccdca900ed5d01ddcc3693cb106b37de600aba71772783644b2adba38d6108|HTTP/1.0|200|3173
20190520235247|21|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:93d03ba58e758cb432a6dd50dbccaf132b56c0cb70116aea645803a3f864e2b3|HTTP/1.0|404|157
20190520235248|19|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:e0d43b1810832a42643a2b8dee75c44679dff8dccb82211dce33f7ff20bea154|HTTP/1.0|404|157
20190520235248|17|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:d1a861fbbf732a16de2c4bbb4acadc51ffc6955e44cd32c811f6dfa596075daf|HTTP/1.0|404|157
20190520235249|19|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:d1a861fbbf732a16de2c4bbb4acadc51ffc6955e44cd32c811f6dfa596075daf|HTTP/1.0|404|157
20190520235249|20|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:6ea32b4235a39316cb8b80b9e08a346652b380d2768332b40aeab10b66c557f6|HTTP/1.0|404|157
20190520235249|26|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:ae77969c317cf23f9abd7fc1cad04464c632798492618a12770073e7bfa0c11d|HTTP/1.0|404|157
20190520235250|19|REQUEST|12.244.40.18|admin|GET|/api/docker/docker/v2/docker-base/test/blobs/sha256:ae77969c317cf23f9abd7fc1cad04464c632798492618a12770073e7bfa0c11d|HTTP/1.0|404|157
{noformat}
node 2 artifactory
{noformat}
2019-05-20 23:49:13,240 [http-nio-8081-exec-6] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/7bbcab59-8e0b-4a91-b27d-2185565db6ca' Content-Length: unspecified
2019-05-20 23:49:13,295 [http-nio-8081-exec-4] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/185c1f5e-ab2a-4408-a23d-4916c1e497fd' Content-Length: unspecified
2019-05-20 23:49:13,490 [http-nio-8081-exec-5] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/d62a1439-a6d9-4eef-aaa2-9cbff6a52e56' Content-Length: unspecified
2019-05-20 23:49:13,587 [http-nio-8081-exec-8] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/99aa6a53-f038-44ba-99a5-dd1c41ca72ce' Content-Length: unspecified
2019-05-20 23:49:13,977 [http-nio-8081-exec-11] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/a4e852aa-a3fe-4c04-ae6c-f17c713f6790' Content-Length: unspecified
2019-05-20 23:49:15,162 [http-nio-8081-exec-7] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/c97aac53-b7aa-4e63-bbfd-dec07affd299' Content-Length: unspecified
2019-05-20 23:49:15,555 [http-nio-8081-exec-3] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/b602f990-cd37-46c4-9f60-15ca8b82e5c9' Content-Length: unspecified
2019-05-20 23:49:15,661 [http-nio-8081-exec-2] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/dcef82bf-a20a-443b-b5b9-93d816420b29' Content-Length: unspecified
2019-05-20 23:49:15,962 [http-nio-8081-exec-1] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/5d73b917-0486-4fc4-85ef-9b7e1926ecc9' Content-Length: unspecified
2019-05-20 23:49:16,788 [http-nio-8081-exec-5] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/9add8d21-2e2a-4e16-bade-3745e582bf79' Content-Length: unspecified
2019-05-20 23:49:16,852 [http-nio-8081-exec-3] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:docker-base/test/_uploads/19cf64a9-ea9d-47fa-9d4b-43692d32a6a2' Content-Length: unspecified
{noformat}

manifest.json that remained on Artifactory is attached.

1 layer remained in Artifactory:
sha256__2bccdca900ed5d01ddcc3693cb106b37de600aba71772783644b2adba38d6108",,,,,,,,,,,,,,,,,,,"21/May/19 2:08 AM;loreny;manifest.json;https://www.jfrog.com/jira/secure/attachment/32362/manifest.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzbtj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Apr/20 7:39 AM;atlassianbuildteam;Just hit by the same issue with artifactory 6.18.1 HA","04/Jan/21 10:55 PM;zpeschke;I've seen this on Artifactory 6.20.1 also.",,,,,,,,,
Include patterns is ignored when virtual repository aggregates other virtual repositories,RTFACT-19229,72223,Bug,Backlog,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,balajis,balajis,20/May/19 1:30 PM,17/Feb/21 12:10 PM,18/Feb/21 8:59 AM,,6.10.0,6.3.6,7.12.5,,,,,,,,,,,,1,,,,,,"Include patterns works fine when we have below repository structure which includes two virtual aggregated

*Works as expected*

--all-maven (**/*)

                 --virtual-1 (include patterns)
                          -- local repository

With the above repo structure, .all included patterns are respected.

 

But then add a third level of virtual repository aggregating the above all virtual as below. The include patterns are ignored 

*Include patterns are ignored*
 – main- virtual  (**/*)
        --all-maven (include patterns)
                   --virtual-1 (**/*)
                          -- local repository  

expected behavior all the main-virtual repository aggregating the other virtuals should respect the include patterns

 

+Steps to reproduce+
 # Create a local maven repository and add some packages
 # Create a virtual repository with the local maven repository included to it
 # Create another Virtual repo aggregating the virtual from step 2 and other virtuals if available. Please add an include pattern 
 # In order to resolve all this have a main virtual repository and try to resolve the artifacts, observe the include patterns are ignored ",,,,,,,,,,,,,,,,,,,"06/Jan/21 9:31 AM;pavang;Screenshot 2021-01-06 at 2.54.29 PM.png;https://www.jfrog.com/jira/secure/attachment/50609/Screenshot+2021-01-06+at+2.54.29+PM.png","20/May/19 3:09 PM;balajis;Screenshot_2019-05-20_at_6_54_26_PM.jpg;https://www.jfrog.com/jira/secure/attachment/32359/Screenshot_2019-05-20_at_6_54_26_PM.jpg","06/Jan/21 9:31 AM;pavang;repo-browser.jpg;https://www.jfrog.com/jira/secure/attachment/50608/repo-browser.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzbjb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
CallHome API issues,RTFACT-19216,72100,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shivaramr,ankushc,ankushc,17/May/19 10:05 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"1- If the installer info file is not present, with the LOG LEVEL set to DEBUG or TRACE, an exception is logged.

 

2- When CallHome REST APIs are invoked, the CallHome data sent to bintray has duplicate entries for integrations. This was worked around by adding filters outside of artifactory (most likely bintray), we don't have details.

 

3- Cosmetic issues - count for product integrations always show 0. It should show the actual count of the # of integrations.

 

4- When no integrations are present, then the integration block with count set to 0 shows up that shouldn't be the case. Instead the block shouldn't be sent at all.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzazr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Return code for exploded zip shows 404 when should be 403,RTFACT-19215,72084,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,17/May/19 5:42 PM,17/Feb/21 12:18 PM,18/Feb/21 8:59 AM,,6.10.1,6.8.8,,,,,,permissions,REST API,,,,,,1,,,,,,"REPRODUCE

*1. Create user ""test-usr"" and configure its permission on generic-local repo by granting the deploy/cache but not overwrite/delete permission.*

*2. Upload a test file to repo*

curl -XPUT -u test-usr:password http://art.com/artifactory/generic-local/-T ./test.txt

 

*3. Try to overwrite files*

curl -XPUT -u test-usr:password http://art.com/artifactory/generic-local/-T ./test.txt

{

  ""errors"" : [ {

    ""status"" : 403,

    ""message"" : ""Not enough permissions to overwrite artifact 'generic-local/test.txt' (user 'test-usr' needs DELETE permission).""

  } ]

}

Artifactory return 403 for PUT request when user cannot overwrite the artifact, which is expected.

*4. Create tar archive that contains the file and upload the tar using archive upload function*

tar -tvf test.tar.gz 

curl -XPUT -u test-usr:password http://art.com/artifactory/generic-local/ -T test.tar.gz -H ""X-Explode-Archive: true""

{

  ""errors"" : [ {

    ""status"" : 404,

    ""message"" : ""Error during deployment: Cannot deploy file 'test.txt'. Not enough permissions to overwrite artifact 'generic-local/test.txt' (user 'test-usr' needs DELETE permission).""

  } ]

}

 

This should return a 403.  We see a 404 returned in the request logs as well.  This makes it tough to automate anything when the wrong response code is returned.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzaw7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Properties unable to replicate between Artifactory when event based replications enabled,RTFACT-19214,72074,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,santhoshp,santhoshp,17/May/19 1:20 AM,17/Feb/21 12:21 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,,,Replication,,,,,,,1,,,,,,"Steps to reproduce: 

1) Set replication between two Artifactory local repositories. For example:- Consider docker-local repository in Artifactory-1 and set Replication to the docker-local repository of Artifactory-2 (by going to Admin tab --> Local --> Replications of Artifactory-1 docker-local repository).

2) Check ""Enable Event Replication"" and save the configuration.

3) Now go to Artifactory-1 Terminal, Add the below plugin in Artifactory-1 under $Artifactory_Home/etc/plugins/

*import org.artifactory.repo.RepoPath*

*replication {*

  *beforeFileReplication { localRepoPath ->*

  *if (repositories.exists(localRepoPath)){*

     *repositories.setProperty(localRepoPath,""foo"",""bar"");*

     *log.warn(localRepoPath);*

*log.error(localRepoPath);*

  *}*

*else {*

*log.warn(""Does not exist"");*

*}*

  *}*

*}*

By adding that plugin, when replication is enabled, Artifactory set properties to the artifacts with key value as foo, bar  and then push the artifacts to the other Artifactory node-2.

4) Reload the plugins using the below curl command:

curl -uadmin:password -XPOST http://<Artifactory_Url>/artifactory/api/plugins/reload

 

5) Deploy an Artifact to the Artifactory-1 docker-local repository and we see the following errors in the Artifactory-1 logs:



*2019-05-17 00:37:42,530 [http-nio-8081-exec-8] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:source.png' Content-Length: 509512*
*2019-05-17 00:37:45,560 [http-nio-8081-exec-8] [WARN ] (replication :9) - docker-local:source.png*
*2019-05-17 00:37:45,561 [http-nio-8081-exec-8] [ERROR] (replication :10) - docker-local:source.png*
*2019-05-17 00:37:45,563 [http-nio-8081-exec-8] [WARN ] (o.a.s.f.l.SessionLockEntry:120) - Mutable item 'docker-local:source.png' has local modifications that will be discarded.*
*2019-05-17 00:37:45,563 [http-nio-8081-exec-8] [ERROR] (o.s.t.s.TransactionSynchronizationUtils:171) - TransactionSynchronization.afterCompletion threw exception*
 *java.util.ConcurrentModificationException: null*



6) Artifacts get deployed in Artifactory-1 and will be pushed to Artifactory-2 repository (as we enabled event based replication) but the properties were not set for the artifacts for both source and target Artifacts (which means the groovy plugin failed to set the property for the artifacts)

 ","2019-05-17 01:18:13,955 [http-nio-8081-exec-9] [INFO ] (o.a.e.UploadServiceImpl:386) - Deploy to 'docker-local:BUILD.png' Content-Length: 253994
2019-05-17 01:18:16,971 [http-nio-8081-exec-9] [WARN ] (replication :9) - docker-local:BUILD.png
2019-05-17 01:18:16,972 [http-nio-8081-exec-9] [ERROR] (replication :10) - docker-local:BUILD.png
2019-05-17 01:18:16,973 [http-nio-8081-exec-9] [WARN ] (o.a.s.f.l.SessionLockEntry:120) - Mutable item 'docker-local:BUILD.png' has local modifications that will be discarded.
2019-05-17 01:18:16,974 [Artifactory event replication 4] [INFO ] (o.a.a.c.BasicStatusHolder:218) - Replicating file: http://mill.jfrog.team:12196/artifactory/docker-local//BUILD.png
*2019-05-17 01:18:16,974 [http-nio-8081-exec-9] [ERROR] (o.s.t.s.TransactionSynchronizationUtils:171) - TransactionSynchronization.afterCompletion threw exception*
*java.util.ConcurrentModificationException: null*
 at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:909)
 at java.util.ArrayList$Itr.next(ArrayList.java:859)
 at org.artifactory.addon.replication.core.EventReplicationSessionResource.afterCompletion(EventReplicationSessionResource.java:29)
 at org.artifactory.storage.tx.SessionResourceManagerImpl.afterCompletion(SessionResourceManagerImpl.java:67)
 at org.artifactory.storage.db.fs.session.SqlStorageSession.afterCompletion(SqlStorageSession.java:139)
 at org.artifactory.storage.db.spring.SessionSynchronization.afterCompletion(SessionSynchronization.java:94)
 at org.springframework.transaction.support.TransactionSynchronizationUtils.invokeAfterCompletion(TransactionSynchronizationUtils.java:168)
 at org.springframework.transaction.support.AbstractPlatformTransactionManager.invokeAfterCompletion(AbstractPlatformTransactionManager.java:997)
 at org.springframework.transaction.support.AbstractPlatformTransactionManager.triggerAfterCompletion(AbstractPlatformTransactionManager.java:972)
 at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:802)
 at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:726)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:521)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:291)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy149.saveResourceInTransaction(Unknown Source)
 at org.artifactory.repo.service.RepositoryServiceImpl.saveResource(RepositoryServiceImpl.java:1812)
 at sun.reflect.GeneratedMethodAccessor435.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
 at com.sun.proxy.$Proxy149.saveResource(Unknown Source)
 at org.artifactory.engine.UploadServiceImpl.uploadItemWithContent(UploadServiceImpl.java:544)
 at org.artifactory.engine.UploadServiceImpl.uploadItemWithProvidedContent(UploadServiceImpl.java:527)
 at org.artifactory.engine.UploadServiceImpl.uploadItem(UploadServiceImpl.java:416)
 at org.artifactory.engine.UploadServiceImpl.uploadFile(UploadServiceImpl.java:406)
 at org.artifactory.engine.UploadServiceImpl.uploadArtifact(UploadServiceImpl.java:387)
 at org.artifactory.engine.UploadServiceImpl.adjustResponseAndUpload(UploadServiceImpl.java:216)
 at org.artifactory.engine.UploadServiceImpl.validateRequestAndUpload(UploadServiceImpl.java:182)
 at org.artifactory.engine.UploadServiceImpl.upload(UploadServiceImpl.java:136)
 at sun.reflect.GeneratedMethodAccessor245.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
 at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy176.upload(Unknown Source)
 at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:150)
 at org.artifactory.repo.service.deploy.DeployServiceImpl.deploy(DeployServiceImpl.java:105)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
 at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy217.deploy(Unknown Source)
 at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.doDeployment(ArtifactDeployService.java:149)
 at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.deploy(ArtifactDeployService.java:122)
 at org.artifactory.ui.rest.service.artifacts.deploy.ArtifactDeployService.execute(ArtifactDeployService.java:101)
 at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
 at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
 at org.artifactory.ui.rest.resource.artifacts.deploy.DeployArtifactResource.deployArtifact(DeployArtifactResource.java:73)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
 at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
 at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
 at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
 at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
 at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
 at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
 at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
 at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
 at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
 at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
 at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
 at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
 at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
 at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
 at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
 at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
 at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
 at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
 at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
 at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
 at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
 at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
 at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
 at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
 at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
 at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
 at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
 at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
 at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
 at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
 at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
 at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
 at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
 at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
 at java.lang.Thread.run(Thread.java:748)
*2019-05-17 01:18:20,000 [Artifactory event replication 4] [INFO ] (o.a.a.c.BasicStatusHolder:218) - Successfully deployed item: docker-local:BUILD.png on Url:http://mill.jfrog.team:12196/artifactory/docker-local/*",,,,,,,,,,,,,,,,,,"17/May/19 1:20 AM;santhoshp;Screen Shot 2019-05-16 at 6.18.27 PM.png;https://www.jfrog.com/jira/secure/attachment/32305/Screen+Shot+2019-05-16+at+6.18.27+PM.png","17/May/19 1:20 AM;santhoshp;Screen Shot 2019-05-16 at 6.18.41 PM.png;https://www.jfrog.com/jira/secure/attachment/32304/Screen+Shot+2019-05-16+at+6.18.41+PM.png","17/May/19 1:25 AM;santhoshp;push.png;https://www.jfrog.com/jira/secure/attachment/32309/push.png","17/May/19 1:21 AM;santhoshp;target.png;https://www.jfrog.com/jira/secure/attachment/32307/target.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzatz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Edge doesn't block remote downloads,RTFACT-19204,72029,Bug,Reopened,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,inbart,inbart,inbart,16/May/19 8:02 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Artifactory with Edge license doesn't block downloads for all repo types. 
+Steps to reproduce:+
- setup artifactory with pro license
- create npm remote repository
- change license to Edge
- execute: curl -uadmin:password http://localhost:8081/artifactory/api/npm/{npm_remote_repo}/{package_name}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzajb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Exception is thrown if Distribution repo exists and change license to Edge,RTFACT-19203,72022,Bug,In Progress,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,inbart,inbart,inbart,16/May/19 7:26 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
- setup artifactory with pro license
- create distribution repository
- change license to Edge - we'll get this exception:
{code} 
2019-05-16 10:16:25,776 [http-nio-8081-exec-5] [ERROR] (o.a.c.CentralConfigServiceImpl:642) - Failed to reload configuration: Distribution repositories are not supported with Artifactory Edge license
org.artifactory.util.UnsupportedByLicenseException: Remote and Distribution repositories are not supported with Artifactory Edge license
	at org.artifactory.layout.RepositoriesConfigurationChangesInterceptor.onBeforeSave(RepositoriesConfigurationChangesInterceptor.java:76)
	at org.artifactory.config.ConfigurationChangesInterceptorsImpl.onBeforeSave(ConfigurationChangesInterceptorsImpl.java:43)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
	at com.sun.proxy.$Proxy178.onBeforeSave(Unknown Source)
	at org.artifactory.config.CentralConfigServiceImpl.preSaveDescriptor(CentralConfigServiceImpl.java:321)
	at org.artifactory.config.CentralConfigServiceImpl.saveDescriptorInternal(CentralConfigServiceImpl.java:340)
	at org.artifactory.config.CentralConfigServiceImpl.saveDescriptor(CentralConfigServiceImpl.java:312)
	at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContext(CentralConfigServiceImpl.java:621)
	at org.artifactory.config.CentralConfigServiceImpl.lambda$saveAndReloadContextWithRetry$0(CentralConfigServiceImpl.java:575)
	at org.jfrog.common.ExecutionUtils.handleFunctionExecution(ExecutionUtils.java:57)
	at org.jfrog.common.ExecutionUtils.lambda$generateExecutionRunnable$0(ExecutionUtils.java:48)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:111)
	at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:58)
	at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:75)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:260)
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
	at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:56)
	at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:36)
	at org.jfrog.common.ExecutionUtils.retry(ExecutionUtils.java:41)
	at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:574)
	at org.artifactory.config.CentralConfigServiceImpl.saveEditedDescriptorAndReload(CentralConfigServiceImpl.java:516)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
	at com.sun.proxy.$Proxy142.saveEditedDescriptorAndReload(Unknown Source)
	at org.artifactory.repo.service.RepositoryServiceImpl.createEdgeUploadsRepoIfNeeded(RepositoryServiceImpl.java:2872)
	at org.artifactory.repo.service.RepositoryServiceImpl.onLicenseLoaded(RepositoryServiceImpl.java:2842)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
	at com.sun.proxy.$Proxy148.onLicenseLoaded(Unknown Source)
	at java.util.LinkedHashMap$LinkedValues.forEach(LinkedHashMap.java:608)
	at org.artifactory.addon.AddonsManagerImpl.activateLicense(Artifactory:328)
	at org.artifactory.addon.AddonsManagerImpl.addAndActivateLicenses(Artifactory:802)
	at org.artifactory.addon.AddonsManagerImpl.addAndActivateLicense(Artifactory:809)
	at org.artifactory.ui.rest.service.admin.configuration.registerpro.UpdateLicenseKeyService.execute(UpdateLicenseKeyService.java:68)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.admin.configuration.registerpro.ProLicenseResource.updateLicense(ProLicenseResource.java:54)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:427)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745) {code}
  
We should allow the user to have Distribution repos from before the Edge license change but should make them inactive.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzahr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Error while trying to delete BuildInfos ,RTFACT-19202,72015,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Ricardf,Ricardf,16/May/19 5:47 AM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,6.3.3,,,,,,,Build Info,Build Info Repository,,,,,,0,,,,,,"When trying to delete some builds we get the following error:

{
 ""errors"": [
 {
 ""status"": 500,
 ""message"": ""Could not delete build 0 XXXXXX:12382:2018-04-30T09:05:59.669+0200""
 }
 ]
}

When the job of jenkins tries to execute the deletion of old builds log shows this error for multiple build infos.

The performance of artifactory drops significantly while these actions are performed which causes a big problem.","Windows Server 2012 R2
 MySQL 5.7 Database
 Binarystore in filesystem
 Artifactory 6.3.3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzag7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"16/May/19 8:11 AM;Ricardf;Issue can be closed, during the upgrade to 6.10 the binarystore was incorrectly configured on the first run and some migration was done into an incorrect path.

Merging the files to correct binarystore fixed the issue.","16/May/19 11:29 AM;Ricardf;Well, after seeing a lot of problems we had to rollback the upgrade to 6.10 and this is the new error which is happening, so ignore the last message.","16/May/19 11:31 AM;Ricardf;btw, some builds have been correctly deleted, but older builds seem to give this error.",,,,,,,,
Remote docker registry with auth fails to test or work,RTFACT-19189,71882,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,maltatwex,maltatwex,14/May/19 12:58 AM,05/Jan/21 11:23 AM,18/Feb/21 8:59 AM,,6.9.0,,,,,,,,,,,,,,0,,,,,,"I have an OnDemand artifactory (OD)and a hosted artifactory. (HOST)

 

On the OD I create a virtual registry (REMOTE) containing a number of local and remote registries

 

I have a user which I use to pull from the REMOTE to my local machine the credentials are fine

 

On the HOST i set up a remote pointing at REMOTE using the same credentials it fails with 403

 

Note that I have maven repositories setup exactly the same way with the same creds and it works seamlessly","The hosted system is running in AWS on EC2 an enterprise licence in a 3 node HA setup.

 

I have seen the same behaviour hosting via docker on vmware with 5.6.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz9rj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cache FS in Storage Summary UI is not updated if the cache was cleared manually,RTFACT-19183,71830,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valeriyp,valeriyp,13/May/19 10:21 AM,17/Feb/21 12:32 PM,18/Feb/21 8:59 AM,,6.5.9,6.8.9,6.9.1,,,,,UI,,,,,,,2,,,,,,"+*Steps to reproduce:*+

1. Configure binarystore.xml to make use of _*cache-fs*_
2. Check Storage Summary in the UI, for eg:

Directory: /home/valeriyp/artifactory/data/cache
+Used: 587.7 MB+ / 4.7 GB (12.3%)

3. Clear the cache manually by running:    $ cd /home/valeriyp/artifactory/data/cache && rm -fr

4. Check disk utilization:  $ du -sh
4.0K	.

5. Refresh the Storage Summary in the UI, for eg:

Directory: /home/valeriyp/artifactory/data/cache
+Used: 587.7 MB+ / 4.7 GB (12.3%)

+*Workaround:*+

On the restart, Artifactory will pick and display the right values",,,,,,,,,,,,,,,,,,,"13/May/19 10:24 AM;valeriyp;cache-fs.jpg;https://www.jfrog.com/jira/secure/attachment/32226/cache-fs.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz9k7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"07/Sep/20 9:59 AM;shane.kindermans_ext@softathome.com;Any updates on this issue? I am having the same problem running artifactory 7.6.1",,,,,,,,,,
Timed out waiting for join.key when CATALINA_OPTS is exported in the 'default' file,RTFACT-19174,71779,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,12/May/19 8:45 AM,17/Feb/21 12:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,QF,QF-P2,S-P1,,,"There is an issue with the Artifactory startup scripts, whereby if ""CATALINA_OPTS"" is declared somewhere, it will fail to start.

*+Steps to reproduce:+*
1. Install Artifactory RPM installation.
2. In $ARTIFACTORY_HOME/etc/default export something to ""CATALINA_OPTS"", for example:
{code:java}
export CATALINA_OPTS="" -Xms2g -Xmx12g -Xss256k""
{code}
3. Start Artifactory.

Artifactory will fail to start with the below errors:
{code:java}
2019-05-12 08:40:05,945 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Timed out waiting for join.key file to be made available at /var/opt/jfrog/artifactory/etc/security/join.key
java.lang.reflect.InvocationTargetException: null
...
Caused by: org.springframework.beans.factory.BeanInitializationException: Failed to initialize bean 'org.artifactory.security.access.AccessService'.; nested exception is java.lang.IllegalStateException: Timed out waiting for join.key file to be made available at /var/opt/jfrog/artifactory/etc/security/join.key
...
Caused by: java.lang.IllegalStateException: Timed out waiting for join.key file to be made available at /var/opt/jfrog/artifactory/etc/security/join.key
{code}

+*Workaround:*+
In the export of ""CATALINA_OPTS"", it should append to existing ""CATALINA_OPTS"":
{code:java}
export CATALINA_OPTS=""$CATALINA_OPTS -Xms2g -Xmx12g -Xss256k""
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz9bz:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Jul/19 7:15 AM;galba;Should be a joint effort with the guys who write the scrips.",,,,,,,,,,
Timeout while uploading big artifacts from conan,RTFACT-19170,71716,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dadom85,dadom85,10/May/19 8:17 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Conan,,,,,,,0,,,,,,"!image-2019-05-10-10-15-25-834.png!

We are using conan virtualenv together with a local conan repository in artifactory. When we try to upload large packages the connection is closed due to 60 seconds timeout. We have checked all network nodes and we assume that the timeout is directly coming from the application. Is there any default timeout setting of 60 seconds in artifactory?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz90v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Filter in the Admin -> Permissions Section does not filter by resource in 6.9.1,RTFACT-19167,71702,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ol-metaswitch,ol-metaswitch,09/May/19 1:15 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,permissions,UI,,,,,,0,artifactory,permissions,ui,,,"From the Admin -> Permissions view in the Artifactory UI when attempting to filter the permissions objects by the resources that are allocated to them, the objects filter by only the permissions name.

This worked prior to upgrading to version 6.9.1 of Artifactory from version 6.5.9.",,,,,,,,,,,,,RTFACT-18356,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz8xr:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
unable to sync with remote conda repository,RTFACT-19162,71662,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mwimpelberg,mwimpelberg,08/May/19 9:49 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,Conda,,,,,,,0,,,,,,"You can see from the below log messages, I can't reach conda.anaconda.org from the artifactory application.  The GUI gives me a 404 error and the logs show the below issues.  I was able to wget the site from the same server which proves that it's probably not a network issue.

 

-rw-r----- 1 artifactory prometheus 435142844 May 8 10:40 catalina.out
[root@lonpart01 /var/opt/jfrog/artifactory/logs/catalina]# tailf catalina.out
2019-05-08 10:35:40,108 [http-nio-8081-exec-8] [JFrog-Access] [INFO ] (o.j.a.s.s.h.HttpServiceImpl:55) - [10.10.72.130] X-Forwarded-For header found, ignoring
2019-05-08 10:35:40,109 [http-nio-8081-exec-8] [JFrog-Access] [INFO ] (o.j.a.s.s.h.HttpServiceImpl:55) - [10.10.72.130] X-Forwarded-For header found, ignoring
May 08, 2019 10:38:13 AM org.artifactory.security.ldap.NewSpringSecurityLdapTemplate searchForSingleEntryInternal
INFO: Ignoring PartialResultException
May 08, 2019 10:38:13 AM org.artifactory.security.ldap.NewSpringSecurityLdapTemplate searchForSingleEntryInternal
INFO: Ignoring PartialResultException
2019-05-08 10:39:39,758 [http-nio-8081-exec-4] [INFO ] (o.a.r.RemoteRepoBase:1026) - Error listing remote resources https://conda.anaconda.org/conda-forge/linux-64/: Couldn't detect S3 root URL. Unknown error code: null
2019-05-08 10:39:39,956 [http-nio-8081-exec-4] [INFO ] (o.a.r.RemoteRepoBase:1026) - Error listing remote resources https://repo.anaconda.com/pkgs/free/linux-64/: Couldn't detect S3 root URL. Unknown error code: null

 


[root@lonpart01 /var/opt/jfrog/artifactory/logs/catalina]# wget conda.anaconda.org/conda-forge/linux-64/
--2019-05-08 10:48:41-- http://conda.anaconda.org/conda-forge/linux-64/
Resolving conda.anaconda.org (conda.anaconda.org)... 104.17.93.24, 104.17.92.24, 2606:4700::6811:5d18, ...
Connecting to conda.anaconda.org (conda.anaconda.org)|104.17.93.24|:80... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: https://conda.anaconda.org/conda-forge/linux-64/ [following]
--2019-05-08 10:48:41-- https://conda.anaconda.org/conda-forge/linux-64/
Connecting to conda.anaconda.org (conda.anaconda.org)|104.17.93.24|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Saving to: ‘index.html’

[ <=> ] 16,155,181 71.5MB/s in 0.2s

2019-05-08 10:48:42 (71.5 MB/s) - ‘index.html’ saved [16155181]

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz8qf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Search screen issues the setMeUp UI request - causes significant delay in loading the screen,RTFACT-19161,71660,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,omriz,andreik,andreik,08/May/19 9:25 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Web UI,,,,,,,0,S-P1,,,,,Search screen issues the setMeUp UI request - causes significant delay in loading the screen,,,,,,,,,,,,,,,,RTFACT-19568,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz8pz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Aggregating Three of CentOS Remote Repositories Corrupt The Metdata Of RPM Virtual ,RTFACT-19156,71646,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,08/May/19 1:25 AM,17/Feb/21 12:46 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,,,,,,,,3,,,,,,"Running Artifactory v6.9.1 on CentOS 7

 

Steps to reproduce the behavior:

1. Create the following RPM remote repositories & virtual repository:

rpm-remote1 --> [https://dl.iuscommunity.org/pub/ius/stable/CentOS/7/x86_64/]

rpm-remote2 --> [http://mirror.centos.org/centos/7/os/x86_64/]

rpm-remote3 --> [https://mirror.csclub.uwaterloo.ca/fedora/epel/7Server/x86_64]

Created rpm-virtual, but did not aggregated any remote repositories into it yet.

 

2. We pointed artifactory.repo to rpm-remote1:

3. Executed: sudo yum install git2u - +*Download successful*+

4. Added rpm-remote1 to rpm-virtual

5. We pointed artifactory.repo to rpm-virtual:

6. Ran sudo yum clean all && sudo yum install git2u - +*Download successful*+

7. Added rpm-remote2 to rpm-virtual

8. Ran sudo yum clean all && sudo yum install git2u - +*Download successful*+

9. Added rpm-remote3 to rpm-virtual

10. Ran sudo yum clean all && sudo yum install git2u - +*Download failed*+

No package git2u1 available.
 Error: Nothing to do

11. Removed rpm-remote2 & rpm-remote3 from rpm-virtual repository.

12. Ran sudo yum clean all && sudo yum install git2u - +*Download failed*+

13. Ran REST API to re-calculate rpm-virtual repository

14. Ran sudo yum clean all && sudo yum install git2u - +*Download failed*+

15. To overcome this issue we deleted the rpm-virtual and re-created rpm-virtual repository

16. Added rpm-remote1 to rpm-virtual 

17. Executed: sudo yum clean all && sudo yum install git2u - +*Download successful*+

18. This time we added rpm-remote3 to rpm-virtual, instead of rpm-remote2

19. Executed: sudo yum clean all && sudo yum install git2u - +*Download successful*+

20.  We then added rpm-remote2 to rpm-virtual

21. Ran sudo yum clean all && sudo yum install git2u - +*Download failed*

22. Ran REST API to re-calculate rpm-virtual repository

23. Ran sudo yum clean all && sudo yum install git2u - +*Download failed*+

24. Removed rpm-remote2 & rpm-remote3 from rpm-virtual repository.

25. Ran REST API to re-calculate rpm-virtual repository

26. Ran sudo yum clean all && sudo yum install git2u - +*Download failed*+

 

{{This leads us to believe that the metadata gets corrupted when either rpm-remote2 and rpm-remote3 are aggregated in a virtual repository along with rpm-remote1 repository. In addition to that, removing rpm-remote2 and rpm-remote3 from rpm-virtual repository does not solve the problem with corrupted metadata, even when API for metadata calculation is being executed against rpm-virtual repository. This test also reveals that only rpm-remote1 & rpm-remote2 OR rpm-remote1 & rpm-remote3 can be aggregated together, and not all three together.}}

 

The following ERROR can be seen in artifactory.log:

 

2019-05-07 23:56:41,884 [art-exec-12] [ERROR] (o.a.a.y.v.i.YumVirtualIndexesCollector:271) - Can't resolve index paths from repomd.xml at path rpm-remote1/repodata/repomd.xml : No entry for primary.xml index found in repomd.xml in location: rpm-remote1/repodata/

 ",CenOS 7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz8nb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Nov/19 9:34 PM;pbusque;Any progress on this issue?

This render virtual RPM  repository useless as we need to define each repository on the machines in order to circumvent  this issue.",,,,,,,,,,
AQL query with certain large number of lines returns 500 error ,RTFACT-19155,71640,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,07/May/19 10:45 PM,17/Feb/21 12:48 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory,,,,,,,1,,,,,,"Steps to reproduce:

-try running the attached searchbroken.aql. See the request return a 500 ""java.lang.StackOverflowError"" error with no corresponding error in the artifactory log. The request log doesn't show this 500 error. Looking at aql/jdbc loggers, it seems the DB query is never constructed

-add -Xss1g to JVM opts for Artifactory:

ps aux | grep arti

root      4064  8.7  4.3 115063252 2679540 ?   Sl   19:59   4:55 /usr/bin/java -Djava.util.logging.config.file=/opt/jfrog/artifactory/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -server -Xms512m -Xmx6g -Xss1g -XX:+UseG1GC -XX:OnOutOfMemoryError=kill -9 %p -Djruby.compile.invokedynamic=false -Dfile.encoding=UTF8 -Dartdist=zip -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true -Djava.security.egd=file:/dev/./urandom -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005 -Djfrog.join.key.paths=/opt/jfrog/artifactory -Dartifactory.home=/opt/jfrog/artifactory -Dfile.encoding=UTF8 -Djruby.bytecode.version=1.8 -Djruby.compile.invokedynamic=false -Dignore.endorsed.dirs= -classpath /opt/jfrog/artifactory/tomcat/bin/bootstrap.jar:/opt/jfrog/artifactory/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/opt/jfrog/artifactory/tomcat -Dcatalina.home=/opt/jfrog/artifactory/tomcat -Djava.io.tmpdir=/opt/jfrog/artifactory/tomcat/temp org.apache.catalina.startup.Bootstrap start

-try the AQL again with searchbroken.aql. There is no more 500 stack overflow error, but a 400 error instead:

curl -u admin:password -XPOST [http://mill.jfrog.info:12046/artifactory/api/search/aql] -H ""Content-Type: text/plain"" -T ./searchbroken.aql

< HTTP/1.1 400 Bad Request

< Server: Artifactory/6.10.1

< X-Artifactory-Id: a3f832f0b3c5bf4d:49b5fbad:16ae647484f:-8000

< Content-Type: application/json

< Transfer-Encoding: chunked

< Date: Thu, 23 May 2019 20:49:20 GMT

< Connection: close

<

Failed to execute the following sql query...

cause: Statement too complex. Try rewriting the query to remove complexity. Eliminating many duplicate expressions or breaking up the query and storing interim results in a temporary table can often help resolve this error.

 

An AQL query should not be limited by the # of lines in the query itself. This issue makes it so that trying to create release bundles in distribution using lengthy AQL queries fails",,,,,,,,,,,,,,,,,,,"09/Feb/21 6:20 AM;sowjanyak;query.json;https://www.jfrog.com/jira/secure/attachment/51686/query.json","07/May/19 10:45 PM;mattheww;searchbroken.aql;https://www.jfrog.com/jira/secure/attachment/32182/searchbroken.aql",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz8mf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/May/19 5:29 PM;mattheww;increasing JVM -xss fixes the 500 stack overflow error, but results in another 400 error (likely because the query itself is too long): 

Failed to execute the following sql query:

... <long query>

cause: Statement too complex. Try rewriting the query to remove complexity. Eliminating many duplicate expressions or breaking up the query and storing interim results in a temporary table can often help resolve this error",,,,,,,,,,
NPM type repository fails on publish,RTFACT-19144,71571,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,smitty,smitty,06/May/19 5:04 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,5.3.2,,,,,,,Metadata,Upload,,,,,,0,,,,,,"{{When attempting to publish a build to our npm type repo in our artifactory instance we get an - java.lang.Exception: NPM failed to update release tag in Artifactory metadata - error.  We are able to resolve this error when we delete the older builds in the same folder we are attempting to publish to.}}

{{java.lang.Exception: NPM failed to update release tag in Artifactory metadata.}}
{{ at blahblahblah.npm.Npm.publish(/var/jenkins_home/jobs/Common/jobs/reports/branches/qa/builds/154/libs/P-Funk/src/org/daas_blahblahblah/npm/Npm.groovy:245)}}
{{ at WorkflowScript.run(WorkflowScript:112)}}
{{ at ___cps.transform___(Native Method)}}
{{ at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)}}
{{ at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)}}
{{ at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)}}
{{ at java.lang.reflect.Constructor.newInstance(Constructor.java:423)}}
{{ at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:83)}}
{{ at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:105)}}
{{ at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:60)}}
{{ at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:235)}}
{{ at com.cloudbees.groovy.cps.sandbox.DefaultInvoker.constructorCall(DefaultInvoker.java:25)}}
{{ at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.dispatchOrArg(FunctionCallBlock.java:96)}}
{{ at com.cloudbees.groovy.cps.impl.FunctionCallBlock$ContinuationImpl.fixArg(FunctionCallBlock.java:82)}}
{{ at sun.reflect.GeneratedMethodAccessor191.invoke(Unknown Source)}}
{{ at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)}}
{{ at java.lang.reflect.Method.invoke(Method.java:498)}}
{{ at com.cloudbees.groovy.cps.impl.ContinuationPtr$ContinuationImpl.receive(ContinuationPtr.java:72)}}
{{ at com.cloudbees.groovy.cps.impl.ConstantBlock.eval(ConstantBlock.java:21)}}
{{ at com.cloudbees.groovy.cps.Next.step(Next.java:83)}}
{{ at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:174)}}
{{ at com.cloudbees.groovy.cps.Continuable$1.call(Continuable.java:163)}}
{{ at org.codehaus.groovy.runtime.GroovyCategorySupport$ThreadCategoryInfo.use(GroovyCategorySupport.java:122)}}
{{ at org.codehaus.groovy.runtime.GroovyCategorySupport.use(GroovyCategorySupport.java:261)}}
{{ at com.cloudbees.groovy.cps.Continuable.run0(Continuable.java:163)}}
{{ at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.access$101(SandboxContinuable.java:34)}}
{{ at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.lambda$run0$0(SandboxContinuable.java:59)}}
{{ at org.jenkinsci.plugins.scriptsecurity.sandbox.groovy.GroovySandbox.runInSandbox(GroovySandbox.java:108)}}
{{ at org.jenkinsci.plugins.workflow.cps.SandboxContinuable.run0(SandboxContinuable.java:58)}}
{{ at org.jenkinsci.plugins.workflow.cps.CpsThread.runNextChunk(CpsThread.java:174)}}
{{ at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.run(CpsThreadGroup.java:332)}}
{{ at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup.access$200(CpsThreadGroup.java:83)}}
{{ at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:244)}}
{{ at org.jenkinsci.plugins.workflow.cps.CpsThreadGroup$2.call(CpsThreadGroup.java:232)}}
{{ at org.jenkinsci.plugins.workflow.cps.CpsVmExecutorService$2.call(CpsVmExecutorService.java:64)}}
{{ at java.util.concurrent.FutureTask.run(FutureTask.java:266)}}
{{ at hudson.remoting.SingleLaneExecutorService$1.run(SingleLaneExecutorService.java:131)}}
{{ at jenkins.util.ContextResettingExecutorService$1.run(ContextResettingExecutorService.java:28)}}
{{ at jenkins.security.ImpersonatingExecutorService$1.run(ImpersonatingExecutorService.java:59)}}
{{ at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)}}
{{ at java.util.concurrent.FutureTask.run(FutureTask.java:266)}}
{{ at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)}}
{{ at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)}}
{{ at java.lang.Thread.run(Thread.java:748)}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz87j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Build promotion fails when multiple builds with same name and number have been uploaded,RTFACT-19143,71569,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,eyalb,eyalb,06/May/19 3:22 PM,17/Feb/21 12:58 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"I'm opening this issue following:

[https://github.com/jfrog/jfrog-cli-go/issues/362]

Artifactory returns 400 Bad Response when the build promotion REST API is invoked, if two builds have been uploaded with the same name and number.

{{{ ""errors"": [ \{ ""status"": 400, ""message"": ""Unable to find artifacts of build 'my_build_name' #1.2.3: aborting promotion."" } ] }}}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz873:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/May/19 6:29 PM;gilcrease;This is very annoying when using multi stage or multi build systems",,,,,,,,,,
Inconsistency with authentication with lower-case and upper-case username and password / API key,RTFACT-19141,71558,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adiv,adiv,06/May/19 12:04 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,,,,,,,,4,,,,,,"There is inconsistency with authentication with lower-case and upper-case username and password / API key.

When you log in to the UI, it does not matter if you write the username with upper-case or lower-case letters, as long as the password is correct you will be able to log in.

When using username and password with the REST API, this behavior appears again, and you can pass the username with lower-case or upper-case letters and as long as the password is correct you will be able to authenticate.

When using API keys, it is case sensitive, and using the REST API with the API key you will have to pass the username exactly as it is written in Artifactory (i.e. with lower-case letters only).

Attaching screenshots as examples.",,,,,,,,,,,,,,,,,,,"06/May/19 12:05 PM;adiv;1.png;https://www.jfrog.com/jira/secure/attachment/32163/1.png","06/May/19 12:05 PM;adiv;2.png;https://www.jfrog.com/jira/secure/attachment/32164/2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz84v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"08/Sep/20 9:01 AM;Enrice;seems to be a duplicate of [RTFACT-10141|https://www.jfrog.com/jira/browse/RTFACT-10141]",,,,,,,,,,
"When a permission target is updated, Artifactory not printing permission target display name in audit logs.",RTFACT-19139,71540,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sankark,sankark,05/May/19 8:06 PM,17/Feb/21 1:00 PM,18/Feb/21 8:44 AM,,6.8.6,6.9.1,,,,,,permissions,,,,,,,1,PB_Done,,,,,"In Artifacotry, while creating a permission target you can find the *displayName* and respective mapped entityId where as while *updating* a permission target we can only see entityId but *no displayName*. Below loggers for reference.

security.audit.log while creating a permission target
{code}
2019-05-03T18:15:04.005+0530|127.0.0.1|admin|jfrt@01d2pezc1stmza0vtbj1cw1m95|jfrt@01d2pezc1stmza0vtbj1cw1m95:bef18a97-123e-4a6f-a9d0-1abe7889852f|C|PRM|\{""added"":{""customData.updatedBy"":""admin"",""displayName"":""test11"",""name"":""jfrt@01d2pezc1stmza0vtbj1cw1m95:bef18a97-123e-4a6f-a9d0-1abe7889852f"",""serviceId"":""jfrt@01d2pezc1stmza0vtbj1cw1m95"",""resourceType"":""repo""}}
{code}

security.audit.log while updating a permission target
{code}
2019-05-03T18:15:24.085+0530|127.0.0.1|admin|jfrt@01d2pezc1stmza0vtbj1cw1m95|jfrt@01d2pezc1stmza0vtbj1cw1m95:bef18a97-123e-4a6f-a9d0-1abe7889852f|U|PRM|{}
{code}

ASK:

Artifactory should log the permission target display name and any other required information to the security audit logs while performing any actions on permission targets.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz80f:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker remote registry changes tag digest when a list manifest is pulled,RTFACT-19131,71485,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rafael,rafael,02/May/19 3:15 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,,,,,,,,3,,,,,,"I'm actually issuing this as a bug because it allows users without Delete / overwrite permission to effectively change the digest of a tag. Which is a bit worrying. Please let us know more about the status of this one, we are very keen to see it fixed.

After I run docker pull in a remote docker registry it will pull the image and create a manifest.json file. New docker pulls for the same tag will pull the same image digest. Eg.:

{code}
$ sudo docker pull docker.example.com/testimage:test
test: Pulling from testimage
Digest: sha256:0f3912b46d862f452623af56d11da1d08b0b6cb298f67b4102498ae7af113386
Status: Image is up to date for docker.example.com/testimage:test
{code}

Then, if some process makes a request to the registry not passing {{application/vnd.docker.distribution.manifest.v2+json}} in the Accept header, then a list.manifest.json file is created and the request is served as expected.  Eg.:

{code}
curl -i -H 'Accept: application/vnd.docker.distribution.manifest.list.v2+json' 'https://docker.example.com/v2/testimage/manifests/test'
{code}

However, that changes the state of that image subsequent docker pulls won't be served the {{application/vnd.docker.distribution.manifest.v2+json}} digest. Eg. (notice the different digest):

{code}
$ sudo docker pull docker.example.com/testimage:test
test: Pulling from testimage
e280bd282c7f: Already exists
67bb9c17fbfb: Already exists
8edb474e0aa4: Already exists
9f72ad58edd8: Already exists
4f81095ecd5c: Already exists
775fdd146fa3: Already exists
cd3d66c1d830: Already exists
5a90c3e9632a: Already exists
88760fde47e4: Already exists
acfbbae1d5ce: Already exists
fdb9f56a9347: Already exists
d21aaf4f944a: Already exists
7e365f042cce: Already exists
ddc104f479cf: Already exists
Digest: sha256:d84e3b7fe2cf8d221426cb7e12dd08f80bee0ab5ac627bbe709864984bc34264
Status: Downloaded newer image for docker.example.com/testimage:test
{code}

That's very inconvenient and a breach in the security model, as users without overwrite permissions can effectively change the digest of an image. After an arbitrary get request to the registry new docker pulls to the same tag will use different digest. We'd like to be able to run all our containers from a tag and always with the same digest. But that makes it really hard to do so.

Moreover, in local docker registries that doesn't happen. Requesting the same image an tag with docker will always yield the same digest, unless the tag is overwritten.

Finally, note that there seems to be other situations where the digest of a docker image may change, even though no modifying action was issued (in our experience, just requesting the same image multiple times with the docker client the default Metadata Retrieval Cache period would eventually cause the issue. see: https://www.jfrog.com/jira/browse/RTFACT-19096). I think this behaviour was not observed in version 6.7.0","This was tested with the following docker clients:

Client: Docker Engine - Community
 Version:           18.09.2
 API version:       1.39
 Go version:        go1.10.8
 Git commit:        6247962
 Built:             Sun Feb 10 04:12:39 2019
 OS/Arch:           darwin/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          18.09.2
  API version:      1.39 (minimum version 1.12)
  Go version:       go1.10.6
  Git commit:       6247962
  Built:            Sun Feb 10 04:13:06 2019
  OS/Arch:          linux/amd64
  Experimental:     false

It was also tested with:
Client:
 Version:      17.09.0-ce
 API version:  1.32
 Go version:   go1.8.3
 Git commit:   afdb6d4
 Built:        Tue Sep 26 22:41:23 2017
 OS/Arch:      linux/amd64

Server:
 Version:      17.09.0-ce
 API version:  1.32 (minimum version 1.12)
 Go version:   go1.8.3
 Git commit:   afdb6d4
 Built:        Tue Sep 26 22:42:49 2017
 OS/Arch:      linux/amd64
 Experimental: false",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz7nb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Puppet Enterprise only modules not found,RTFACT-19130,71481,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mike.surato@dart.biz,mike.surato@dart.biz,02/May/19 3:03 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.8.6,,,,,,,Puppet,,,,,,,0,artifactory,,,,,"We are currently using Artifactory to mirror the Puppet Forge and have run into a problem. When we attempt to retrieve a forge module that is licensed for Puppet Enterprise only (e.g. [https://forge.puppet.com/puppetlabs/sqlserver]) Artifactory returns a 404 error for the modules query. It does return a valid response for the releases query. e.g.:

{{dd866426@SPMASV-PEMA02:~> curl https://forgeapi.puppetlabs.com/v3/modules/puppetlabs-sqlserver | head -30}}
{{ % Total % Received % Xferd Average Speed Time Time Time Current}}
{{ Dload Upload Total Spent Left Speed}}
{{ 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0{}}
{{ ""uri"": ""/v3/modules/puppetlabs-sqlserver"",}}
{{ ""slug"": ""puppetlabs-sqlserver"",}}
{{ ""name"": ""sqlserver"",}}
{{ ""downloads"": 91585,}}
{{ ""created_at"": ""2014-12-11 07:45:57 -0800"",}}
{{ ""updated_at"": ""2019-03-26 11:15:38 -0700"",}}
{{ ""deprecated_at"": null,}}
{{ ""deprecated_for"": null,}}
{{ ""superseded_by"": null,}}
{{ ""supported"": false,}}
{{ ""endorsement"": ""supported"",}}
{{ ""module_group"": ""pe_only"",}}
{{ ""owner"": {}}
{{ ""uri"": ""/v3/users/puppetlabs"",}}
{{ ""slug"": ""puppetlabs"",}}
{{ ""username"": ""puppetlabs"",}}
{{ ""gravatar_id"": ""fdd009b7c1ec96e088b389f773e87aec""}}
{{ },}}
{{ ""current_release"": {}}
{{ ""uri"": ""/v3/releases/puppetlabs-sqlserver-2.5.0"",}}
{{ ""slug"": ""puppetlabs-sqlserver-2.5.0"",}}
{{ ""module"": {}}
{{ ""uri"": ""/v3/modules/puppetlabs-sqlserver"",}}
{{ ""slug"": ""puppetlabs-sqlserver"",}}
{{ ""name"": ""sqlserver"",}}
{{ ""deprecated_at"": null,}}
{{ ""owner"": {}}
{{ ""uri"": ""/v3/users/puppetlabs"",}}
{{ ""slug"": ""puppetlabs"",}}{{dd866426@SPMASV-PEMA02:~> curl https://artifactory/artifactory/api/puppet/puppet/v3/modules/puppetlabs-sqlserver}}
{{ % Total % Received % Xferd Average Speed Time Time Time Current}}
{{ Dload Upload Total Spent Left Speed}}
{{100 30 0 30 0 0 115 0 --:--:-- --:--:-- --:--:-- 116}}
{{{""errors"": [""404 Not found""] }}}

{{}dd866426@SPMASV-PEMA02:~> curl https://artifactory.dartcontainer.com/artifactory/api/puppet/puppet/v3/releases/puppetlabs-sqlserver-2.5.0 | head -30}}
{{ % Total % Received % Xferd Average Speed Time Time Time Current}}
{{ Dload Upload Total Spent Left Speed}}
{{ 0 0 0 0 0 0 0 0 --:--:-- --:--:-- --:--:-- 0{}}
{{ ""uri"" : ""/v3/releases/puppetlabs-sqlserver-2.5.0"",}}
{{ ""slug"" : ""puppetlabs-sqlserver-2.5.0"",}}
{{ ""module"" : {}}
{{ ""uri"" : ""/v3/modules/puppetlabs-sqlserver"",}}
{{ ""slug"" : ""puppetlabs-sqlserver"",}}
{{ ""name"" : ""sqlserver"",}}
{{ ""owner"" : {}}
{{ ""uri"" : ""/v3/users/puppetlabs"",}}
{{ ""slug"" : ""puppetlabs"",}}
{{ ""username"" : ""puppetlabs"",}}
{{ ""gravatar_id"" : ""fdd009b7c1ec96e088b389f773e87aec""}}
{{ },}}
{{ ""deprecated_at"" : null}}
{{ },}}
{{ ""version"" : ""2.5.0"",}}
{{ ""metadata"" : {}}
{{ ""name"" : ""puppetlabs-sqlserver"",}}
{{ ""version"" : ""2.5.0"",}}
{{ ""source"" : ""https://github.com/puppetlabs/puppetlabs-sqlserver"",}}
{{ ""author"" : ""Puppet Inc"",}}
{{ ""license"" : ""proprietary"",}}
{{ ""summary"" : ""The `sqlserver` module installs and manages MS SQL Server 2012, 2014, 2016, 2017, and 2019 on Windows systems."",}}
{{ ""description"" : null,}}
{{ ""project_page"" : ""https://github.com/puppetlabs/puppetlabs-sqlserver"",}}
{{ ""issues_url"" : ""https://tickets.puppet.com/browse/MODULES/component/12400"",}}
{{ ""tags"" : [ ""sql"", ""mssql"", ""sqlserver"", ""microsoft"", ""sql2012"", ""sql2014"", ""sql2016"", ""sql2017"", ""sql2019"", ""tsql"", ""database"" ],}}
{{ ""dependencies"" : [ {}}
{{ ""name"" : ""puppetlabs/stdlib"",}}
{{ ""version_requirement"" : "">= 4.13.1 < 6.0.0""}}

Is this expected?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz7mf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Intermittent API Token Error - Token Failed Verification, reason: audience",RTFACT-19123,71431,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lreading,lreading,01/May/19 9:06 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,API Key,,,,,,,1,xray,,,,,"Tokens generated by the token endpoint will sometimes fail when making requests to the licensesReport/components endpoint.  I haven't found a consistent way of reproducing the issue, but it has happened about 10 times within a couple hours during testing of a new API integration.

 

Steps to Reproduce
 * Get a token by using the /v1/auth/token endpoint, with a user that has permission to access the /v1/licensesReport/generate endpoint
 * Make a GET request to /v1/licensesReport/generate

Expected
 * The server returns a 200 response

Actual
 * The server returns a 500 error with with:

{code:java}
{
  ""error"": ""Authentication Failed""
}{code}
 * Artifactory server logs container an error:

{code:java}
2019-05-01 15:48:13,864 [http-nio-8083-exec-68511] [ERROR] (o.a.a.s.o.OpenIdGatewayResource:260) - Artifactory admin or Access service admin token is accepted. Token failed verification, reason: audience{code}",Hosted Artifactory/XRay instance,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz7ef:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Pull replication fails if the source contain "":"" character in the artifact path",RTFACT-19119,71424,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,santhoshp,santhoshp,01/May/19 4:58 PM,17/Feb/21 1:20 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,Replication,,,,,,,0,,,,,,"Steps to reproduce:
 1) In Artifactory-1(source), Create a local Debian repository and deploy a Debian package by giving the path ""jfrog:path/<debianpackage>"" (Uploaded Debian package using UI) and check ""filtered"" for that artifact.

2) In Artifactory -2 (Target), create a Debian remote repository and point the URL to the source Artifactory Debian local repository. So this repository act as a smart repository.

3)  In target remote repository, Enable Active Replication of This Repository and give Cron expression and also check  ""Sync Deleted Artifacts"" and  ""Sync Artifact Properties""

4) In target Artifactory, the Debian artifact is not pulled and we see the following error in the target logs:
{quote}{{2019-05-01 16:49:10,040 [replication-consumer-1556729350002-0] [WARN ] (o.a.r.RemoteRepoBase:437) - debian-remote: Error in getting information for 'jfrog:sales/amavisd-milter-dbg_1.5.0-5_amd64.deb' (null).}}

{{2019-05-01 16:49:10,045 [art-exec-13] [INFO ] (o.a.a.c.BasicStatusHolder:218) - Completed remote folder replication for debian-remote/ with 0 deployed files, 0 deleted files, 0 properties change, 0 statistics change, 0 mkDirs... average events per second 0}}

{{2019-05-01 16:49:10,046 [replication-consumer-1556729350002-0] [ERROR] (o.a.p.PropertiesServiceImpl:191) - Cannot set properties for debian-remote-cache:jfrog:sales/amavisd-milter-dbg_1.5.0-5_amd64.deb: Item not found.}}

{{2019-05-01 16:49:10,046 [replication-consumer-1556729350002-0] [ERROR] (o.a.a.c.BasicStatusHolder:211) - Unable to set properties for debian-remote-cache:jfrog:sales/amavisd-milter-dbg_1.5.0-5_amd64.deb}}
{quote}
 

(This behavior is seen for all type of repositories)

 

For the above package, if the ""filtered resource"" is enabled, then we can see the Warning:
 2019-05-01 16:49:10,040 [replication-consumer-1556729350002-0] [WARN ] (o.a.r.RemoteRepoBase:437) - debian-remote: Error in getting information for 'jfrog:sales/amavisd-milter-dbg_1.5.0-5_amd64.deb' (null).

 

If we didn't enable ""Filtered resources"", That warning cannot be seen in the logs",,,,,,,,,,,,,,,,,,,"01/May/19 4:58 PM;santhoshp;SOURCE.png;https://www.jfrog.com/jira/secure/attachment/32129/SOURCE.png","01/May/19 4:58 PM;santhoshp;Target.png;https://www.jfrog.com/jira/secure/attachment/32131/Target.png","01/May/19 4:58 PM;santhoshp;Targetlogs.png;https://www.jfrog.com/jira/secure/attachment/32130/Targetlogs.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz7cv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Mar/20 1:28 PM;obogdan;Also affects version 5.6.3 as the source Artifactory, with 6.17.0 as destination.","09/Mar/20 1:41 PM;obogdan;Please ignore my previous comment. I have similar symptoms, but a different issue.",,,,,,,,,
Artifactory UI will crash if request in UI takes over 60 seconds of idle due to Tomcat ,RTFACT-19116,71416,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,01/May/19 2:01 PM,17/Feb/21 1:35 PM,18/Feb/21 8:59 AM,,,,,,,,,UI,,,,,,,0,S-P1,,,,,"By default Artifactory uses the Tomcat default ""connectionTimeout"" which is 60 seconds.

If you try to open a page in the UI that will take over 60 seconds to load, the Artifactory UI will crash (see attached screenshot).
A possible reason for UI request to take over 60 seconds: [RTFACT-19050|https://www.jfrog.com/jira/browse/RTFACT-19050].

As a workaround, you can configure the Tomcat with: 
{code:java}
connectionTimeout=""-1""
{code}
",,,,,,,,,,,,,,,,RTFACT-19568,,,"01/May/19 2:01 PM;arielk;Snip 2019-05-01 16.58.54.png;https://www.jfrog.com/jira/secure/attachment/32128/Snip+2019-05-01+16.58.54.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz7bj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Add release-bundle permissions for UI endpoints ,RTFACT-19113,71407,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,inbart,inbart,inbart,01/May/19 11:28 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,6.11.0,,,,,,,,,0,,,,,,"Add all permissions actions for:
GET ‘ui/bundles/target’
GET ’ui/bundles/target/{bundle_name}'
Add delete permission for:
GET ’ui/bundles/target/{bundle_name}/{bundle_version}'",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz79z:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deletion of whole folder possible without delete/overwrite permissions for sub-folder,RTFACT-19103,71374,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,petermbauer,petermbauer,30/Apr/19 12:32 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.7.6,,,,,,,Conan,permissions,,,,,,0,artifactory,permissions,ui,,,"I need to have Conan packages with channel {{release}} (e.g. {{unity/2.4.3-1@peter/release}} which ends up in the folder hierarchy {{peter/unity/2.4.3-1/release/...}}) protected from being modified or deleted. Therefore i configured the following permission targets:

Delete/Overwrite for Include Pattern {{\*\*}} and Exclude Pattern {{\*/\*/\*/release/\*\*}}
Deploy/Cache for Include Pattern {{\*/\*/\*/release/\*\*}} only

This works well except that it is still possible to delete all packages including those with channel {{release}} in the UI by simply deleting one of the the parent folders, so one of {{2.4.3-1}}, {{unity}} or {{peter}} in this example. Apparently the delete permissions of a sub-folder are not considered when determining the delete permissions of a folder. This renders the permission target patterns useless for such cases.

Of course it would be possible to use an additional repository for the {{release}} packages with Deploy/Cache permissions only but this leads to administrative effort and user errors.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz70n:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Pypi remote cache repository is not available in Limit Search list for package search,RTFACT-19102,71372,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Disham,Disham,30/Apr/19 11:46 AM,17/Feb/21 1:42 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"Problem statement:
Pypi remote cache repository is not available for selection in 'Limit Search to specific repositories' list for package search

Impact:
Pypi remote cache packages cannot be searched specifically using Package search

Steps to reproduce:
- Create pypi repositories - local, remote and virtual
- Search using package search for pypi and use 'Limit Search to specific repositories' - Note that only pypi local repositories are visible in the list

Expected results:
Pypi local and remote cache repositories should be visible in the above dropdown list",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz707:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory does not free up memory after some Rubygems actions,RTFACT-19099,71324,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avivb,avivb,29/Apr/19 3:36 PM,17/Feb/21 1:43 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,,,,,,,,3,QF,QF-P2,S-P1,,,"Steps to reproduce:
1. Connect Artifactory to bullfrog or any other Java APM
2. Create local, remote and virtual repositories of Rubygem in Artifactory
3. Run index calculation on the virtual repo:
{code}
curl -XPOST -uadmin:password ""http://localhost:8081/artifactory/api/gems/gems/reindex""
{code}
4. See that memory starts to rise and even after the calculation finishes (±4 minutes) it stays around the same value

Note: based on the system property:
{code}
artifactory.gems.virtualIndexTaskIntervalSecs=300 (default)
{code}
Artifactory runs the calculation every 5 minutes, which makes it worse.
After some time (can be minutes or days, depends on Rubygem usage in Artifactory) Artifactory will crash with OOM error.

 !rubyg2.png|thumbnail! 

Added newer screenshot:
 !Screen Shot 2019-05-05 at 17.01.01.png|thumbnail! ",,,,,,,,,,,,,,,,,,JFES-312,"05/May/19 2:02 PM;avivb;Screen Shot 2019-05-05 at 17.01.01.png;https://www.jfrog.com/jira/secure/attachment/32155/Screen+Shot+2019-05-05+at+17.01.01.png","01/May/19 11:15 AM;avivb;rubyg2.png;https://www.jfrog.com/jira/secure/attachment/32127/rubyg2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz6qf:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"07/May/19 6:57 AM;Maras;We also observe permanent memory consumption progress.","01/Aug/19 8:48 AM;roman;[~Maras] any news about this ticket? what have you done?

i suspect we are having this issue as well",,,,,,,,,
"Replacing plugin script with soon after the previous change, does not propagate to other nodes",RTFACT-19095,71312,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexd,alexd,29/Apr/19 10:36 AM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,High Availability,User Plugins,,,,,,0,,,,,,"Flow:

# In HA system, plant some user plugin and reload
# Then, replace this file with an another one and reload
# As a result, the propagation might collide with the previous one
# So, the target node will use the new version of the plugin, while other nodes, in contrast, will continue using the old version of the plugin

The test that does the plugin injection: artifactory-sanity/UserPluginSpec#Check altAllResponses feature in a user plugin

The victims are other tests, which start receiving HTTP code 256 (as per the working version of the plugin)

In the attached request logs, note that 2nd node continues responding with code 256 on GET/HEAD request with original status 2xx
","artifactory-pro:6.x.master-7265 (6.11.0), HA 2 nodes",,,,,,,,,,,,,,,,,,"29/Apr/19 10:39 AM;alexd;request-ha-2.log;https://www.jfrog.com/jira/secure/attachment/32104/request-ha-2.log","29/Apr/19 10:39 AM;alexd;request.log;https://www.jfrog.com/jira/secure/attachment/32105/request.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz6o7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Incorrectly base url resolving,RTFACT-19093,71303,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tamirh,tamirh,tamirh,29/Apr/19 8:21 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,6.10.0,,,,,6.11.0,,,,,,,,,0,,,,,,"In case a load balancer was configured to listen *not* on port 80 or 443 and:
 1. base url wasn't 

2. ""X-Artifactory-Override-Base-Url"" wasn't set

Wrong url will be resolved.

We are taking the port from the request but tomcat is changing it, [https://bz.apache.org/bugzilla/show_bug.cgi?id=63196]
 before checking the port and scheme on the request we should check for 

X-Forwarded-Port and X-Forwarded-Proto headers 

 

 ",,,,,,,,,,,,,,,,,,RTFACT-19218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz6mf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
yum metadata api always return true,RTFACT-19085,71240,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,paulp,paulp,25/Apr/19 8:48 PM,17/Feb/21 1:54 PM,18/Feb/21 8:59 AM,,6.4.3,6.8.4,6.9.1,,,,,,,,,,,,0,,,,,,"The api always returns true for the virtual repo. Even if the request is made to root level or path does not exist.  

To reproduce:
 # $ curl -uadmin:password -X POST [http://localhost:8081/artifactory/api/yum/rpm
]
returns: yum metadata calculation on path /repodata in virtual repo rpm completed

But the documents specify *path* parameter must be passed for virtual calculation


 # $ curl -uadmin:password -X POST http://localhost:8081/artifactory/api/yum/rpm\?path\=OL12327/latest/x86_64

returns: yum metadata calculation on path OL12327/latest/x86_64/repodata in virtual repo rpm completed

The path does not exist

 

You would not see any logs in artifactory.log that indicates failure or success.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz69j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
offline remote NPM reports newer version than what is in repository,RTFACT-19078,71170,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mnewcomb,mnewcomb,24/Apr/19 5:40 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I have an offline install of artifactory. We move artifacts from an online install to the offline install. I did this procedure and when we were installing angular cli on a fresh machine. It failed asking for component-emitter 1.3.0.  I went into our online artifactory and sure enough, there is no mention of 1.3.0 and it only has 1.1.2 and 1.2.1...

Now, nothing actually requests 1.3.0, but because of the stupid '^' npm uses, it asks for the latest version when pulling dependencies and artifactory responds with 1.3.0!

I have no problem with the online version responding this way, but when marked offline, artifactory should only respond with the latest version it has... somehow it found out there was a 1.3.0 and kept that information through exporting the repo and reported it to my offline version, even though the offline artifactory only has 1.1.2 and 1.2.1.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5w7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Log mentions that notification was sent to mail even when no mail server is configured,RTFACT-19075,71164,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,avivb,avivb,24/Apr/19 2:00 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:

- Create admin user with an email
- Run Artifactory backup but make sure it produces an error (for example insufficient permissions to the destination dir)

You will see this in the logs:
{code}
2019-04-24 16:43:19,218 [art-exec-21] INFO  o.a.s.ArtifactoryApplicationContext:626 - Beginning full system export...
2019-04-24 16:43:19,218 [art-exec-21] INFO  o.a.s.ArtifactoryApplicationContext:653 - Creating temp export directory: /Users/test/work/backup/current
2019-04-24 16:43:19,219 [art-exec-21] ERROR o.a.s.ArtifactoryApplicationContext:657 - Failed to create backup dir: /Users/test/work/backup/current: Unable to create directory /Users/test/work/backup/current
2019-04-24 16:43:19,238 [art-exec-26] WARN  o.a.m.MailServiceImpl:69 - Unable to send E-mail: No mail server configuration found.
2019-04-24 16:43:19,238 [art-exec-26] WARN  o.a.m.MailServiceImpl:69 - Unable to send E-mail: No mail server configuration found.
2019-04-24 16:43:19,238 [art-exec-26] WARN  o.a.m.MailServiceImpl:69 - Unable to send E-mail: No mail server configuration found.
2019-04-24 16:43:19,239 [art-exec-26] INFO  o.a.b.BackupServiceImpl:282 - Error notification for backup 'daily2' was sent by mail.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5vb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Add validation for creating permission target that contains virtual repository,RTFACT-19069,71137,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerh,omerh,24/Apr/19 7:34 AM,17/Feb/21 1:56 PM,18/Feb/21 8:59 AM,,,,,,,,,REST API,,,,,,,0,QF,QF-P2,S-P1,,,"While in Artifactory UI it's not permitted to create a permission target that contains virtual repository there is no validation for creating permission target that contains a virtual repository via ""[Create or Replace Permission Target|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CreateorReplacePermissionTarget]"" REST API command",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5pj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory search rest api provides all artifacts when used with parameter from =0 and results in heap exhaustion,RTFACT-19067,71127,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,prasannan,prasannan,23/Apr/19 9:43 PM,17/Feb/21 1:57 PM,18/Feb/21 8:59 AM,,6.5.9,6.9.1,,,,,,REST API,,,,,,,1,,,,,,"One of the customer faced this issue in 6.5.9. The search API, while used with the *from* parameter of 0, will try to fetch all the artifacts from all repositories and nodes and end up causing heap exhaustion. 

*GET /api/search/creation?from=0*

The artifactory system properties were set as mentioned below:

*artifactory.search.userQueryLimit=1000*
*artifactory.search.maxResults = 500*

But these system properties are not considered and the API went on to generate millions of rows which resulted in memory issues in multiple nodes. 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5nj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Apr/19 12:32 AM;prasannan;This was resolved on setting the property 'artifactory.search.limitAnonymousUsersOnly' to false. Then 'artifactory.search.userQueryLimit' will work for non anonymous users.",,,,,,,,,,
Promoting Docker path that exists but does not contain any files return 200 promotion succeeded,RTFACT-19065,71114,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adiv,adiv,23/Apr/19 4:00 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,QF,QF-P3,,,"When we are performing a Docker promotion of an image which doesn't exist (the folder is empty), the API call gives back an HTTP 200, when it should be 404.

For example:

If you will check Screenshot 1 you can see that the directory is empty, there is no image to promote.

By running the promotion API I see that a 200 is generated, but is in opposition with logs message:

curl -i -uadmin:password ""http://localhost:8081/artifactory/api/docker/docker-sandbox-local/v2/promote"" -H ""Content-Type:application/json"" -d '\{""targetRepo"":""docker-release-local"",""dockerRepository"":""eventservice/zookeeper"",""tag"":""3.4.9-b9""}'

HTTP/1.1 200 OK

*Promotion ended successfully*

 

From Artifactory logs:

2019-04-23 12:44:33,813 [http-nio-8081-exec-40] [INFO ] (o.a.a.d.r.v.p.DockerV2Promoter:63) - Promoting docker image 'eventservice/zookeeper/3.4.9-b9' from 'docker-sandbox-local' to 'docker-release-local'

2019-04-23 12:44:34,561 [http-nio-8081-exec-40] [ERROR] (o.a.p.PropertiesServiceImpl:173) - Cannot set properties for docker-release-local:eventservice/zookeeper/3.4.9-b9: Item not found.

 ",,,,,,,,,,,,,,,,,,,"23/Apr/19 4:01 PM;adiv;1.jpg;https://www.jfrog.com/jira/secure/attachment/32057/1.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5kn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory License scan for Debian packages does not find licenses,RTFACT-19063,71112,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,balajis,balajis,23/Apr/19 3:37 PM,17/Feb/21 1:58 PM,18/Feb/21 8:59 AM,,6.8.7,6.9.0,6.9.1,,,,,,,,,,,,2,,,,,,"Artifactory License scan feature for Debian packages does not find licenses. The license for debian packages are under the /usr/share/doc/<package_name>/copyright file.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5k7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
DB Environment variables with odd characters causes incorrect replacement,RTFACT-19058,71080,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,matt_a,matt_a,22/Apr/19 7:25 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"If a DB_* property (say, DB_URL) includes a character with special {{sed}} meaning, then the {{entrypoint-artifactory.sh}} script will incorrectly encode it.

For example, if DB_URL=""jdbc:blah/blah?x&1"", the ""&"" will duplicate the matched expression.

A solution would be to escape the variable before using it in the sed expression, so something like:

{{DB_URL_ESCAPED=$( echo ""$DB_URL"" | sed -E 's/([.\[\\*+^$()?&/])/\\\1/g' )}}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5d3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
go repos - pulling versions with special characters fails,RTFACT-19057,71075,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerk,omerk,22/Apr/19 2:14 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,Go,,,,,,,0,entplus,go,,,,"1. create a go repo linked to [gocenter-remote|https://entplus.jfrog.io/artifactory/gocenter-remote], so we can get dependencies from github
2. create a go project locally
3. 
{code:java}
GOPROXY=<artifactory> go get github.com/moby/moby@v17.03.2-ce{code}

without $GOPROXY:
{code:java}
$ go get github.com/moby/moby@v17.03.2-ce
go: finding github.com/moby/moby v17.03.2-ce
go: downloading github.com/moby/moby v0.0.0-20170601211448-f5ec1e2936dc
go: extracting github.com/moby/moby v0.0.0-20170601211448-f5ec1e2936dc
go: finding github.com/moby/moby v1.13.1
go: downloading github.com/moby/moby v1.13.1
go: extracting github.com/moby/moby v1.13.1{code}

with $GOPROXY:
{code:java}
go get github.com/moby/moby@v17.03.2-ce
go: finding github.com/moby/moby v17.03.2-ce
go: finding github.com/moby v17.03.2-ce
go: finding github.com v17.03.2-ce
go get github.com/moby/moby@v17.03.2-ce: unexpected status (https://***:***@entplus.jfrog.io/artifactory/api/go/metadata-go-virtual/github.com/moby/moby/@v/v17.03.2-ce.info): 404 Not Found{code}

explanation:
[[https://golang.org/cmd/go/#hdr-Module_proxy_protocol|http://example.com]|https://golang.org/cmd/go/#hdr-Module_proxy_protocol]

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz5c7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/May/19 9:30 AM;omerk;observed behavior was a result of non-conforming version names and/or manually inserted hidden special characters in jenkins builds.
see further explanation: [https://git.jfrog.info/projects/COMMON/repos/jfrog-access-go-client/pull-requests/21/overview]

*the only remaining issue is Artifactory allowing uploads with non-conforming version names.*",,,,,,,,,,
Support Bundle has to be resilient to filestore corruption,RTFACT-19049,71025,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,21/Apr/19 11:04 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,QF,QF-P2,S-P1,,"Starting Artifactory 6.8 there is a new Support Bundle.
The new implementation is not resilient to filestore corruption, and if the binary of ""service_manifest.json"" is gone, the Support Bundle UI page won't load.

*+Steps to reproduce:+*
1. Install Artifactory 6.9.1 (for example).
2. Take a Support Bundle.
3. Identify the SHA1 checksum of the ""service_manifest.json"" file.
4. Delete the binary file of the ""service_manifest.json"" from the Artifactory filestore based on the SHA1 value.
5. Open the ""Support Zone"" page in the UI, it will result in a blank page (see screenshot)

*+Workaround:+*
1. Remove the corrupted support bundles via tree browser in Artifactory UI.
2. In case trash can is enabled, remove the file from the trash can.
3. Run Garbage Collection.",,,,,,,,,,,,,,,,,,,"26/May/20 8:57 AM;valeriyp;7x-500.jpg;https://www.jfrog.com/jira/secure/attachment/42461/7x-500.jpg","21/Apr/19 11:11 AM;arielk;Snip 2019-04-21 14.11.22.png;https://www.jfrog.com/jira/secure/attachment/32047/Snip+2019-04-21+14.11.22.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzrao6:zoc",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Smart docker remote repo with anonymous user (no user) fails with token auth disabled,RTFACT-19044,70994,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,18/Apr/19 11:30 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When trying to have a smart remote repo access the repo it is proxying anonymously (by having no user in the advanced tab), the receiving side gets the request as an non_authenticated_user and fails.

 

Steps to reproduce:

-create smart docker remote repo A proxying another artifactory repo B

-disable token auth, and have no credentials in the advanced tab so it is supposed to use anonymous user (tool tip says: Leave empty to access anonymously)

-try pulling an image, see it fails with 404 not found. 

-on Repo B, see in request logs:

20190418232216|1|REQUEST|104.196.245.50|non_authenticated_user|GET|/api/docker/docker/v2/busybox/manifests/latest|HTTP/1.0|401|0

-We should have the request hit repo B as the actual anonymous user, or change the tooltip.

 

Workaround:

In the advanced tab, put in anonymous user with no password.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz4u7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"mvn site deploy to Artifactory with dav protocol results in a failure due to the presence of dot dot "".."" as path element ",RTFACT-19041,70990,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,18/Apr/19 10:38 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,Maven,,,,,,,4,,,,,,"mvn site deploy to Artifactory with dav protocol results in a failure due to the presence of dot dot "".."" as path element.

{{maven-site-plugin}} creates upload URLs containing a dot dot, so uploading a site to Artifactory with {{mvn site-deploy}} is resulting in failures. 

Artifactory version – 6.7.2

 

 ",,,,,,,,,,,,,,,,RTFACT-16457,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz4tb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Dec/19 6:32 PM;loreny;Possible workaround 1
https://serverfault.com/questions/910754/is-it-possible-to-normalize-double-dots-url-using-nginx

Possible workaround 2
{code}
import org.artifactory.repo.RepoPath
import org.artifactory.repo.RepoPathFactory
import org.artifactory.request.Request

upload {

    beforeUploadRequest { Request request, RepoPath path ->
        def repoConfig = repositories.getRepositoryConfiguration(path.getRepoKey())
        // if trying to match on repo key specifically, use path.getRepoKey().equals(""maven-local"") below in if statement instead of pkg type matching to maven
        // optional, can also match to repoType with repoConfig.getType().equals <your repo type here, e.g. local>

        if (repoConfig.getPackageType().equals(""maven"") && (path.toString().contains(""..""))){ // path cannot be null
            log.info(""Detected original request path which contains double dots in it: "" + path.toString() + "". Trying to fix it..."")
            try {
                def tmpPath = path.getPath()
                while (tmpPath.lastIndexOf(""../"")!=-1){
                    start = tmpPath.substring(0,tmpPath.indexOf(""../"")-1)
                    end = tmpPath.substring(tmpPath.indexOf(""../"")+3)
                    start = start.substring(0,start.lastIndexOf(""/"")+1)
                    tmpPath = start+end
            }
            log.info(""The original path: "" + path.getPath() + "" was modified to: "" + tmpPath)
            modifiedRepoPath = RepoPathFactory.create(path.repoKey, tmpPath)
            } catch (Exception e){
                log.warn(""Unable to override path: "" + e.getMessage())
            }
        }
    }
}
{code}",,,,,,,,,,
Maven Indexer is broken for virtual repositories,RTFACT-19038,70985,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,18/Apr/19 3:55 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.9.0,,,,,,,,,,,,,,8,QF,QF-P2,,,,"*Problem statement and Impact*

Maven Indexer is broken for virtual repositories

 

*Steps to reproduce the error*

 
 # Create Maven repositories
 # Include Maven repositories under Artifactory UI > Admin > Services > Maven Indexer.
 # Press “Run indexing now”
 # View ‘libs-release’ or ‘libs-snapshot’

 

*Expected results*

 

Expected to see the ‘.index’ folder in the virtual repositories.

 

*Actual results*

 

The virtual repository doesn’t display the ‘.index’ folder and when manually downloading the nexus-maven-repository-index.gz via curl, and extracting the file, it shows the following content:

j1 Ê

DESCRIPTOR

NexusIndexIDXINFO1.0|libs-snapshot allGroups allGroups

allGroupsList

rootGroups

rootGroupsrootGroupsList",,,,,,,,,,,,,RTFACT-10621,,,RTFACT-24058,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz4s7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"01/Sep/19 11:21 AM;davidp;Workaround:
Add the local/remote repositories to the Maven settings.xml and then it will work","13/Dec/19 5:36 PM;oyarzun;Still broken in Artifactory Version 6.16.0. ","14/Feb/20 8:30 PM;alan-czajkowski;this problem makes it _virutally_ impossible to use virtual repos (pun intended)","14/Feb/20 8:32 PM;alan-czajkowski;this problem makes it _virtually_ impossible to use Virtual Repositories (pun intended)",,,,,,,
Download package from local npm repo fails with no anonymous user read permission,RTFACT-19027,70941,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Lee,Lee,17/Apr/19 12:56 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.3.3,,,,,,,NuGet,permissions,Security,,,,,0,,,,,," 

nuget install command returns error.

Console log contains:

 
{code:java}
PM> nuget install sibur
Feeds used:
https://repo.dev002.local/api/nuget/fct-dp-sicore-nuget-dev

Installing package 'sibur' to 'C:\Users\lila\source\repos\ConsoleApp1'.
GET https://repo.dev002.local/api/nuget/fct-dp-sicore-nuget-dev/FindPackagesById()?id='sibur'&semVerLevel=2.0.0
OK https://repo.dev002.local/api/nuget/fct-dp-sicore-nuget-dev/FindPackagesById()?id='sibur'&semVerLevel=2.0.0 17ms
nuget.exe : Unable to find package 'sibur'
At line:1 char:6
+ nuget <<<< install sibur
+ CategoryInfo : NotSpecified: (Unable to find package 'sibur':String) [], RemoteException
+ FullyQualifiedErrorId : NativeCommandError

{code}
If you follow the link:
{code:java}
https://repo.dev002.local/api/nuget/fct-dp-sicore-nuget-dev/FindPackagesById()?id='sibur'&semVerLevel=2.0.0{code}
You will find something like this:
{code:java}
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns:d=""http://schemas.microsoft.com/ado/2007/08/dataservices"" xmlns:m=""http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"" xmlns=""http://www.w3.org/2005/Atom"" xml:base=""https://repo.dev002.local:443/api/nuget/fct-dp-sicore-nuget-dev/"">
<title type=""text""></title>
<id>http://schemas.datacontract.org/2004/07/</id>
<updated>2019-04-16T08:56:40Z</updated>
<link rel=""self"" title=""FindPackagesById"" href=""FindPackagesById""/>
<entry>
<id>https://repo.dev002.local:443/api/nuget/fct-dp-sicore-nuget-dev/Packages(Id='Sibur.NotificationService.Grpc',Version='0.2.4')</id>
<title type=""text"">Sibur.NotificationService.Grpc</title>
<summary type=""text"">Notifications microservice (send email, push via Firebase)</summary>

...
{code}
If I add read permission to user anonymous for this repo, I am able to fetch this dependency.","Server Env:

Artifactory 6.3.3

Centos 7

Local NuGet repository

Privilege for this repo does not contain anonymous user at all (only authenticated users allowed to view content)

 

Client env:

Win 2008R2

VS2017

file

C:\Users\lila\AppData\Roaming\NuGet\NuGet.Config

contains only one local NPM repository with api-key ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz4k7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Configuration of the KMS-KEY-ID doesn't work as expected ,RTFACT-19019,70910,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,17/Apr/19 9:44 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,3,,,,,,"When configuring Artifactory with KMS-KEY-ID as the following example:

 
<property name=""s3service.server-side-encryption"" value=""aws:kms""></property>

<property name=""s3service.server-side-encryption-aws-kms-key-id"" value=KMS-KEY-ID></property> 

Artifactory always uses the old default configuration, you can easily check this by running the following command on the aws cli:

aws s3api head-object --bucket <bucket_name> --key path/<Path_to_file> 

 

 ",,,,,,,,,,,,,,,,RTFACT-18511,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz4dj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deployment of several artifacts with long names that include foreign/chinese characters cause DB locks,RTFACT-19018,70859,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,16/Apr/19 11:29 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:

-use Oracle DB and HA cluster

-archive deploy and explode attached zip.

curl -u admin:password -XPUT [http://10.6.17.93:12000/artifactory/example-repo-local/] -T ./h.zip -H ""X-Explode-Archive: true""

-see that deployment fails with 500 lock error:

{

  ""errors"" : [

{     ""status"" : 500,     ""message"" : ""Error during deployment: Lock on LockEntryId example-repo-local:???????/V1_???????__LINUX_DTS2019021511489?19.0 CLEAN ????????????CGP?????RSAS????CGP?????? OpenSSH SSH????????(CVE-2016-6210)?????CGP????.doc not acquired in 120 seconds. Lock info: org.artifactory.storage.db.locks.provider.DbMapLockWrapper@809d751.""   }

]

}

-redeploying the zip returns another lock error

-trying to delete several of these files from the zip will also result in lock errors

-downloading problem files work fine

 

Workaround:

Rename problem artifacts (move files into same repo with different target path)",,,,,,,,,,,,,,,,,,,"18/Apr/19 5:48 PM;mattheww;artifactory.log;https://www.jfrog.com/jira/secure/attachment/32033/artifactory.log","16/Apr/19 11:29 PM;mattheww;h.zip;https://www.jfrog.com/jira/secure/attachment/32014/h.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz433:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The application fails at startup,RTFACT-19011,70826,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,domingogc,domingogc,16/Apr/19 8:13 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,Access Client,,,,,,,2,artifactory,,,,,"2019-04-16 09:02:51,001 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Timed out waiting for join.key file to be made available at /var/opt/jfrog/artifactory/etc/security/join.key
java.lang.reflect.InvocationTargetException: null
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
 at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
 at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
 at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
 at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: org.springframework.beans.factory.BeanInitializationException: Failed to initialize bean 'org.artifactory.security.access.AccessService'.; nested exception is java.lang.IllegalStateException: Timed out waiting for join.key file to be made available at /var/opt/jfrog/artifactory/etc/security/join.key
 at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:261)
 at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:144)
 ... 7 common frames omitted
Caused by: java.lang.IllegalStateException: Timed out waiting for join.key file to be made available at /var/opt/jfrog/artifactory/etc/security/join.key
 at org.jfrog.security.common.KeyUtils.waitForKey(KeyUtils.java:77)
 at org.jfrog.security.joinkey.JoinKeyBootstrapper.readJoinKeyFromFile(JoinKeyBootstrapper.java:60)
 at org.jfrog.security.joinkey.JoinKeyBootstrapper.initAndGetJoinKey(JoinKeyBootstrapper.java:55)
 at org.jfrog.security.joinkey.JoinKeyBootstrapper.getJoinKey(JoinKeyBootstrapper.java:33)
 at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClient(AccessServiceImpl.java:1147)
 at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClient(AccessServiceImpl.java:1133)
 at org.artifactory.security.access.AccessServiceImpl.initAccessService(AccessServiceImpl.java:305)
 at org.artifactory.security.access.AccessServiceImpl.initAccessClientIfNeeded(AccessServiceImpl.java:294)
 at org.artifactory.security.access.AccessServiceImpl.init(AccessServiceImpl.java:287)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
 at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
 at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy147.init(Unknown Source)
 at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:259)
 ... 8 common frames omitted",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz3wn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/May/19 9:08 AM;Ricardf;We also have a version 6.3.3 and when updating to 6.10 the same issue happens, it should be created automatically but something is not working correctly.",,,,,,,,,,
API returning http 500 errors user requests bad path,RTFACT-19009,70821,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,greg.mattson,greg.mattson,16/Apr/19 12:00 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,REST API,Web REST API,,,,,,3,QF,QF-P2,,,,"When a user requests a bad path from artifactory such as a path with no Repository Key or a path to a folder instead of a file the request results in an http 500 error suggesting that there is an error on the server. These should be returning http 400 errors telling the user and system administrators that it was a bad request.

 

Example1:

Request: https://<artifactory_domain>/artifactory//path/to/artifact.json

Response: 500, ""Repo key cannot be empty...""

Expected: 400, ""Repo key cannot be empty...""

 

Example2:

Request: https://<artifactory_domain>/artifactory/repo/path/to

Response: 500, ""Expected a file but found a folder...""

Expected: 400, ""Expected a file but found a folder...""

 

Correctly classifying these as bad requests from a user allows system administrators to be able to correctly investigate and respond to server problems when there are 500 errors.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz3vj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker v2 API Tags listing, pagination doesn't work. next_page returns the same tags and a new next_page Link header",RTFACT-19008,70816,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Reenberg,Reenberg,15/Apr/19 8:59 PM,08/Feb/21 3:20 PM,18/Feb/21 8:59 AM,,5.5.0,6.0.0,6.9.1,7.7.3,,,,Docker,,,,,,,1,,,,,,"I originally reported this issue as RTFACT-18971, however I found out that there were another bug in the {{Link}} header path returned when using the ""repository path"" proxy method during my investigation, so i changed that bug report to be about that, and are now creating this for the root issue.

I have tried to setup a remote of the quay.io docker repository, using 6.9.1 rev 60901900.  The quay.io/coreos/etcd image has a huge number of tags (~242), and when trying to list the tags, which the skopeo tool does as part of installing OKD (OpenShift Origin), it hangs.

Each time you follow the {{Link}} header with the next_page query parameter, it returns the same list of 50 tags, but with a new next_page token.

I have verified that this looping happens in ""all"" versions since 5.5.0 (i testet a few representative versions), as this seems to be where paginations was implemented by RTFACT-14007.

My investigations from RTFACT-18971 indicates that when set up using the Port method, then it just loops forever, when following the {{Link}} header.  I haven't tried the Sub Domain method as this is a bit more cumbersome on my laptop.  But I'm quite sure that the Sub Domain method, which we use in production, suffers from the same issue the repository path method, as I originally observed a 404 Not Found error in production, which lead me to try and investigate on my laptop. ","Using Debian Buster, Linux evelin 4.19.0-2-amd64 #1 SMP Debian 4.19.16-1 (2019-01-17) x86_64 GNU/Linux, artifactory 6.9.1 rev 60901900 running inside a container, installed using apt jfrog-artifactory-pro from [https://jfrog.bintray.com/artifactory-pro-debs]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz3un:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Apr/19 9:03 PM;Reenberg;[~shayb], as the assignee of RTFACT-14007, you may easily be able to tell if I'm missing something here or if this truly just never worked?",,,,,,,,,,
User plugins needs life cycle event handlers,RTFACT-19003,70800,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefanga,stefanga,15/Apr/19 2:43 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,User Plugins,,,,,,,1,,,,,,"As a user I might write a user plugin that needs to use a ThreadPool.
This pool needs to be shut down before a plugin reloads else all its theads will still be consuming resources and the reload will create a new ThreadPool.

Example:
https://github.com/jfrog/artifactory-user-plugins/blob/master/webhook/webhook.groovy#L540

When this fixed thread pool is constructed, the only time shutdown is called on that is when the configuration is reloaded.

But when a user plugin is reloaded by calling the [Artifactory REST API endpoint|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-ReloadPlugins] there is no callback available for the plugins to act before the plugin is reloaded.

Since there are several closures available for other events in Artifactory there should also be closures for when a user calls the plugin reload API.


Currently the only solution around this issue is to create an execution endpoint in the user plugin and call shutdown from there.
But this makes it cumbersome and prone to issues if one forgets to call the custom endpoint before reloading the plugin.



----

Below is the old content of this ticket. Above section better describes what is needed to solve the underlying issue.

I don't know if this works as intended, but if I have a user plugin that has started a thread and I update the plugin and reload the plugin, it will spawn a new thread without terminating the old one.

 
 * Create a simple user plugin that writes to a log file from a thread.

{code:java}
class Test {
    File logfile = new File(""/tmp/lib_test_script.log"")

    def startThreadOne() {
        new Thread(new Runnable(){
            void run() {
                while (true) {
                    logfile.append(""My thread 1\n"")
                    Thread.sleep(2000)
                }
            }
        }).start()
    }
}

Test test = new Test()
test.startThreadOne(){code}
 * Upload the groovy file to etc/plugins and reload user plugins.
 * Check the log file

{noformat}
My thread 1
My thread 1
My thread 1
My thread 1{noformat}
 * Update the groovy script to print ""My thread 2"" and upload it to the plugin directory and reload the plugins again.
 * Check the log file

{noformat}
My thread 1
My thread 2
My thread 1
My thread 2
My thread 1
My thread 2
My thread 1
My thread 2{noformat}
If this is working as intended, how would I as a user stop the previous thread on plugin updates?

Deleting the plugin and reloading does not terminate the threads either.","Dockerized Artifactory pro 6.9.1
{code:java}
---
version: ""3""
services:
  artifactory:
    image: docker.bintray.io/jfrog/artifactory-pro:6.9.1
    container_name: artifactory
    ports:
     - 8081:8081
    volumes:
     - artifactory-data:/var/opt/jfrog/artifactory
     - /tmp:/tmp
    restart: always
    ulimits:
      nproc: 65535
      nofile:
        soft: 32000
        hard: 40000

volumes:
  artifactory-data:
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz3rj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Delete Build Permissions not working in UI,RTFACT-18973,70642,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,manojt,manojt,13/Apr/19 12:28 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,UI,,,,,,,0,,,,,,"When a user is given delete permissions, they won't be able to delete the individual build's

  !Artifactory-4.gif!

 

And the user cannot delete individual builds:

!Artifactory-5.gif!

 

They are still able to delete it under the build-info browser. 

 ",,,,,,,,,,,,,,,,,,,"13/Apr/19 12:26 AM;manojt;Artifactory-4.gif;https://www.jfrog.com/jira/secure/attachment/31973/Artifactory-4.gif","13/Apr/19 12:26 AM;manojt;Artifactory-5.gif;https://www.jfrog.com/jira/secure/attachment/31972/Artifactory-5.gif",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz2hr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
refresh token document wrong or implementation has bug,RTFACT-18972,70641,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,paulp,paulp,13/Apr/19 12:11 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,5.8.4,,,,,,,,,,,,,,0,,,,,,"In documentation, we said to refresh token requires a valid user (unless both access token and refresh token are provided). But it is not true:

 
 # The refresh token api always need both access token and refresh token, so the ""unless"" is really confusing.
 # You can refresh token without authentication or even if the user is removed.

 

Steps to reproduce, case 1:
 # Create an LDAP user, give it admin privileges and generate a refreshable access token (username is the same as subject). 
 # Hit the refresh api with basic authentication and with just the access token or refresh token, and get errors that says it requires both.

 

Steps to reproduce, case 2:
 # Create an LDAP user, give it admin privileges and generate a refreshable access token, username is the same as subject. 
 # Disable LDAP, and hit the refresh token api without authentication but with both access token and refresh token, able to refresh
 # Delete the LDAP user and hit the refresh token api, able to refresh

 

So to refresh access token, you always need both access token and refresh token and do not need a valid user.

The example uses LDAP user but it is the same for internal users

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz2hj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker v2 API Tags listing, pagination, wrong Link header returned when using the ""repository path"" proxy method",RTFACT-18971,70640,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Reenberg,Reenberg,13/Apr/19 12:02 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.0.5,6.9.1,,,,,,Docker,,,,,,,0,,,,,,"I have just tried to setup a remote of quay.io docker repository, using 6.9.1 rev 60901900, because i needed to install OKD (OpenShift origin).  The proxy method used, was ""repository path"".

One of the images that OKD needs, is coreos/etcd, which has way more than 50 tags (~242), and thus uses pagination.

The OKD ansible playbooks, use [https://github.com/containers/skopeo] to verify which tags are available.

When running the skopeo tool directly agains quay.io/coreos/etcd, it works fine, but when running against the configured remote repository in artifactory, it returns a 404 Not Found when the skopeo tool first tries to follow the pagination url:

*UPDATE:* I have noticed that the returned {{Link}} header, contains the wrong path.  It is missing the repository name, as I'm using the ""repository path"" http proxy method, which is the reason why I'm getting 404 results the first time the skopeo client tries to follow the pagination url.
{code:java}
GET /v2/coreos/etcd/tags/list?next_page=gAAAA...uUBnu-OFx5...2H53oA%3D&n=50 HTTP/1.1
Host: evelin:8081
User-Agent: Go-http-client/1.1
Authorization: Bearer AKCp5c...6EA
Docker-Distribution-Api-Version: registry/2.0
Accept-Encoding: gzip
Connection: close

HTTP/1.1 404 Not Found
Server: Artifactory/6.9.1
X-Artifactory-Id: 2bf5cca...:-8000
Content-Type: application/json
Transfer-Encoding: chunked
Date: Fri, 12 Apr 2019 23:41:07 GMT
Connection: close

{
  ""errors"" : [ {
    ""status"" : 404,
    ""message"" : ""Not Found""
  } ]
}
{code}
Note that this is just a toy setup, with the remote docker repository configured using the ""repository path"" http proxy method.

Currently this is a showstopper for me, installing OKD out of the box, using Artifactory as a caching proxy, for later use in an offline setup.

For reference:
 *This fails*: {{./skopeo-0.1.30 inspect --tls-verify=false docker://evelin:8081/dck-quay-io/coreos/etcd}}
 *This works*: {{./skopeo-0.1.30 inspect --tls-verify=false docker://quay.io/coreos/etcd}}

 

*UPDATE:* I have split this up into two distinct reports.  This one for my original issue with the 404 file not found due to the wrong {{Link}} header path, and RTFACT-19008 for the more severe issue with pagination that doesn't work, which I found in the comments while trying to debug this.","Using Debian Buster, Linux evelin 4.19.0-2-amd64 #1 SMP Debian 4.19.16-1 (2019-01-17) x86_64 GNU/Linux, artifactory 6.9.1 rev 60901900 running inside a container, installed using apt jfrog-artifactory-pro from https://jfrog.bintray.com/artifactory-pro-debs
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz2hb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Apr/19 5:25 PM;Reenberg;Given RTFACT-14007 suggests that pagination was implemented in 5.4.6, I just testet jfrog-artifactory-pro=5.5.0.
 Again installed in a simple container from the [https://jfrog.bintray.com/artifactory-pro-debs] repo.

This doesn't give me a 404, though it seems to generate an endless amount of paginations, however the returned tags, are always the same.
{code}
GET /v2/coreos/etcd/tags/list HTTP/1.1
Host: localhost:9090
User-Agent: Go-http-client/1.1
Authorization: Bearer AKCp5ccRhBjHdBHjrgKEQw2X3rEq2p4FL6sY552FWHCNQX4xycwm7osRvtCCukubtnJdpqum8
Docker-Distribution-Api-Version: registry/2.0
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Date: Mon, 15 Apr 2019 17:16:05 GMT
Content-Type: application/json
Transfer-Encoding: chunked
Connection: close
Server: Artifactory/5.5.0
X-Artifactory-Id: b5ba553faa7a16d3:-1c703b0b:16a21deed76:-8000
Docker-Distribution-Api-Version: registry/2.0
Link: </v2/coreos/etcd/tags/list?next_page=gAAAAABctLxVO4PZYDiV2VvHMabeh9WTAzrM5o0pG-vBqfV0bqsFyBkJ6KMmUQhO8aaU43n8DRmbiPvSEuRoZYlJ7hIxY7U_RlIDYdnw7QVh5ViyC7cmTQQ%3D&n=50>; rel=""next""

{
  ""name"" : ""coreos/etcd"",
  ""tags"" : [ ""3.1"", ""3.2"", ""latest"", ""test"", ""v0.4.6"", ""v0.4.8"", ""v0.5.0_alpha.0"", ""v0.5.0_alpha.1"", ""v0.5.0_alpha.2"", ""v0.5.0_alpha.3"", ""v0.5.0_alpha.4"", ""v0.5.0_alpha.5"", ""v2.0.0"", ""v2.0.0_rc.1"", ""v2.0.10"", ""v2.0.11"", ""v2.0.12"", ""v2.0.13"", ""v2.0.3"", ""v2.0.4"", ""v2.0.5"", ""v2.0.6"", ""v2.0.7"", ""v2.0.8"", ""v2.0.9"", ""v2.1.0-alpha.0"", ""v2.1.0-alpha.1"", ""v2.1.0-rc.0"", ""v2.1.1"", ""v2.1.2"", ""v2.1.3"", ""v2.2.0"", ""v2.2.0-alpha.0"", ""v2.2.0-alpha.1"", ""v2.2.0-rc.0"", ""v2.2.1"", ""v2.2.2"", ""v2.2.3"", ""v2.2.4"", ""v2.2.5"", ""v2.3.0"", ""v2.3.0-alpha.0"", ""v2.3.0-alpha.1"", ""v2.3.1"", ""v2.3.2"", ""v2.3.3"", ""v2.3.4"", ""v2.3.5"", ""v2.3.6"", ""v2.3.7"" ]
}
{code}
{code}
GET /v2/coreos/etcd/tags/list?next_page=gAAAAABctLxVO4PZYDiV2VvHMabeh9WTAzrM5o0pG-vBqfV0bqsFyBkJ6KMmUQhO8aaU43n8DRmbiPvSEuRoZYlJ7hIxY7U_RlIDYdnw7QVh5ViyC7cmTQQ%3D&n=50 HTTP/1.1
Host: localhost:9090
User-Agent: Go-http-client/1.1
Authorization: Bearer AKCp5ccRhBjHdBHjrgKEQw2X3rEq2p4FL6sY552FWHCNQX4xycwm7osRvtCCukubtnJdpqum8
Docker-Distribution-Api-Version: registry/2.0
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Date: Mon, 15 Apr 2019 17:16:06 GMT
Content-Type: application/json
Transfer-Encoding: chunked
Connection: close
Server: Artifactory/5.5.0
X-Artifactory-Id: b5ba553faa7a16d3:-1c703b0b:16a21deed76:-8000
Docker-Distribution-Api-Version: registry/2.0
Link: </v2/coreos/etcd/tags/list?next_page=gAAAAABctLxWiNoQ6XvTMuZ_IZn3yYAWIwCyUNlVeTZ8nz1t2u60oFH5jjWaP-XZ4_a-3DV33LOWiTmpHP8d_thHZ8hOljhlofu7RBVWlzjJ8l14sfgLwEw%3D&n=50>; rel=""next""

{
  ""name"" : ""coreos/etcd"",
  ""tags"" : [ ""3.1"", ""3.2"", ""latest"", ""test"", ""v0.4.6"", ""v0.4.8"", ""v0.5.0_alpha.0"", ""v0.5.0_alpha.1"", ""v0.5.0_alpha.2"", ""v0.5.0_alpha.3"", ""v0.5.0_alpha.4"", ""v0.5.0_alpha.5"", ""v2.0.0"", ""v2.0.0_rc.1"", ""v2.0.10"", ""v2.0.11"", ""v2.0.12"", ""v2.0.13"", ""v2.0.3"", ""v2.0.4"", ""v2.0.5"", ""v2.0.6"", ""v2.0.7"", ""v2.0.8"", ""v2.0.9"", ""v2.1.0-alpha.0"", ""v2.1.0-alpha.1"", ""v2.1.0-rc.0"", ""v2.1.1"", ""v2.1.2"", ""v2.1.3"", ""v2.2.0"", ""v2.2.0-alpha.0"", ""v2.2.0-alpha.1"", ""v2.2.0-rc.0"", ""v2.2.1"", ""v2.2.2"", ""v2.2.3"", ""v2.2.4"", ""v2.2.5"", ""v2.3.0"", ""v2.3.0-alpha.0"", ""v2.3.0-alpha.1"", ""v2.3.1"", ""v2.3.2"", ""v2.3.3"", ""v2.3.4"", ""v2.3.5"", ""v2.3.6"", ""v2.3.7"" ]
}
{code}
{code}
GET /v2/coreos/etcd/tags/list?next_page=gAAAAABctLxWiNoQ6XvTMuZ_IZn3yYAWIwCyUNlVeTZ8nz1t2u60oFH5jjWaP-XZ4_a-3DV33LOWiTmpHP8d_thHZ8hOljhlofu7RBVWlzjJ8l14sfgLwEw%3D&n=50 HTTP/1.1
Host: localhost:9090
User-Agent: Go-http-client/1.1
Authorization: Bearer AKCp5ccRhBjHdBHjrgKEQw2X3rEq2p4FL6sY552FWHCNQX4xycwm7osRvtCCukubtnJdpqum8
Docker-Distribution-Api-Version: registry/2.0
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Date: Mon, 15 Apr 2019 17:16:06 GMT
Content-Type: application/json
Transfer-Encoding: chunked
Connection: close
Server: Artifactory/5.5.0
X-Artifactory-Id: b5ba553faa7a16d3:-1c703b0b:16a21deed76:-8000
Docker-Distribution-Api-Version: registry/2.0
Link: </v2/coreos/etcd/tags/list?next_page=gAAAAABctLxWpAd46IWhbGdiPFqRKE431qgTO3TCexvCvz3myOQ3NvYiW2zRtCY84mAoQPZyqZWFwW6SaskLrITbnBOx6pbUA_-2xARIqYu3W5kDPxL109I%3D&n=50>; rel=""next""

{
  ""name"" : ""coreos/etcd"",
  ""tags"" : [ ""3.1"", ""3.2"", ""latest"", ""test"", ""v0.4.6"", ""v0.4.8"", ""v0.5.0_alpha.0"", ""v0.5.0_alpha.1"", ""v0.5.0_alpha.2"", ""v0.5.0_alpha.3"", ""v0.5.0_alpha.4"", ""v0.5.0_alpha.5"", ""v2.0.0"", ""v2.0.0_rc.1"", ""v2.0.10"", ""v2.0.11"", ""v2.0.12"", ""v2.0.13"", ""v2.0.3"", ""v2.0.4"", ""v2.0.5"", ""v2.0.6"", ""v2.0.7"", ""v2.0.8"", ""v2.0.9"", ""v2.1.0-alpha.0"", ""v2.1.0-alpha.1"", ""v2.1.0-rc.0"", ""v2.1.1"", ""v2.1.2"", ""v2.1.3"", ""v2.2.0"", ""v2.2.0-alpha.0"", ""v2.2.0-alpha.1"", ""v2.2.0-rc.0"", ""v2.2.1"", ""v2.2.2"", ""v2.2.3"", ""v2.2.4"", ""v2.2.5"", ""v2.3.0"", ""v2.3.0-alpha.0"", ""v2.3.0-alpha.1"", ""v2.3.1"", ""v2.3.2"", ""v2.3.3"", ""v2.3.4"", ""v2.3.5"", ""v2.3.6"", ""v2.3.7"" ]
}
{code}
 
  
 ... and so it continues.  I stopped it after a few minutes.  All requests seem to have the right {{next_page}} token, however Artifactory seems to only returns the first 50 tags.","15/Apr/19 7:24 PM;Reenberg;I just tried 6.0.0, and went back to using the ""repository path"", when i noticed the the pagination url that it sends back is incorrect, which is also the case in the original problem description I made.  I just din't notice it then.

See how the initial GET request  has the *dck-quay-io* in its path, however the returned {{Link}} header doesn't have this as part of its path.
{code:java}
GET /v2/dck-quay-io/coreos/etcd/tags/list HTTP/1.1
Host: localhost:8081
User-Agent: Go-http-client/1.1
Authorization: Bearer AKCp5ccRhCChWECSZ1THfwcPPAv47xPVxVLJqDdXfDvAxa1auYecds5aKWhxG4DXJH6awZW5A
Docker-Distribution-Api-Version: registry/2.0
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Server: Artifactory/6.0.0
X-Artifactory-Id: 41666dbb238293f3:378579e4:16a220ff231:-8000
Docker-Distribution-Api-Version: registry/2.0
Link: </v2/coreos/etcd/tags/list?next_page=gAAAAABctMtvW1AwlJ816Odk8EhgWoX5CnHq2wfZpkgEyyWaq5L_yjn2NOjPgYIgb7g2zMfq-ya8kPEJ22wCDr8yfkJx2TusP_tcgPGe2ugpruQSHJk04YM%3D&n=50>; rel=""next""
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 15 Apr 2019 18:20:30 GMT
Connection: close

{
  ""name"" : ""coreos/etcd"",
  ""tags"" : [ ""3.1"", ""3.2"", ""latest"", ""test"", ""v0.4.6"", ""v0.4.8"", ""v0.5.0_alpha.0"", ""v0.5.0_alpha.1"", ""v0.5.0_alpha.2"", ""v0.5.0_alpha.3"", ""v0.5.0_alpha.4"", ""v0.5.0_alpha.5"", ""v2.0.0"", ""v2.0.0_rc.1"", ""v2.0.10"", ""v2.0.11"", ""v2.0.12"", ""v2.0.13"", ""v2.0.3"", ""v2.0.4"", ""v2.0.5"", ""v2.0.6"", ""v2.0.7"", ""v2.0.8"", ""v2.0.9"", ""v2.1.0-alpha.0"", ""v2.1.0-alpha.1"", ""v2.1.0-rc.0"", ""v2.1.1"", ""v2.1.2"", ""v2.1.3"", ""v2.2.0"", ""v2.2.0-alpha.0"", ""v2.2.0-alpha.1"", ""v2.2.0-rc.0"", ""v2.2.1"", ""v2.2.2"", ""v2.2.3"", ""v2.2.4"", ""v2.2.5"", ""v2.3.0"", ""v2.3.0-alpha.0"", ""v2.3.0-alpha.1"", ""v2.3.1"", ""v2.3.2"", ""v2.3.3"", ""v2.3.4"", ""v2.3.5"", ""v2.3.6"", ""v2.3.7"" ]
}
{code}
 

If I add the repository name to the path, then it seems that I'm back to the behavior I observed of 5.5.0, with an infinite loop, where the same first 50 tags are returned. 

After playing around a bit with curl, I noticed that it just returns the first 50 tags no matter wich query parameters you give it.  So perhaps it doesn't properly handle the parameters?

I confirmed the loop, by switching to ""port"" type proxy method, which resulted in the same behaviour as 5.5.0 

 

 ",,,,,,,,,
Adding Property sets ADD button gets disabled when adding multiple values with special characters,RTFACT-18969,70629,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,balajis,balajis,12/Apr/19 10:55 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.8.7,6.9.0,6.9.1,,,,,,,,,,,,0,,,,,,"Adding Property sets from Admin> Configuration > Property sets, the ADD button gets disabled when adding multiple values with special characters. 

 

Steps to reproduce:-
 # Go to Admin> Configuration > Property
 # Add a new property
 # Add the first property with special character, try to add a second property with a special character. 
 # Observe that ADD button is disabled

Same works when adding the property in the repository and the REST API",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzuggf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Event-based pull replication fails,RTFACT-18966,70617,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,11/Apr/19 7:09 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Replication,,,,,,,5,,,,,,"Symptoms: Deployments to the local Artifactory repository are not replicated to the remote repository with event-based pull replication enabled. Only the Cron job or a manual run replicates the file.

Steps to reproduce:

You need 2 Artifactory installations, the source (Artifactory-1) and the target (Artifactory-2)
 # Set up a generic local repository on Artifactory-1
 # On Artifactory-2, set up a Generic Remote repository pointed to the local Artifactory-1 repo
 # Configure Pull Replication as normal in the UI, enable Event based pull replication
 # Deploy a file to Artifactory-1 generic local
 # Observe that the file does not get pulled to the Artifactory-2 remote repository cache

 

On the backend, it looks like Artifactory-2 is establishing the connection but then cuts it off with a 499 HTTP error:

[Nginx debug logs]

10.138.0.2 - - [06/Apr/2019:00:29:37 +0000] ""POST /artifactory/api/replications/channels/establishChannel HTTP/1.1"" 499 0 ""-"" ""Artifactory/6.7.0""

There are also errors in the Artifactory logs about timeouts:

2019-04-09 08:12:26,029 [Incoming-Replication-Channel-test-generic-remote] [ERROR] (o.a.a.r.c.r.e.InboundReplicationChannel:263) - Could not establish remote replication stream for test-generic-remote
java.net.SocketTimeoutException: Read timed out
 at java.net.SocketInputStream.socketRead0(Native Method)
 at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
 at java.net.SocketInputStream.read(SocketInputStream.java:171)
 at java.net.SocketInputStream.read(SocketInputStream.java:141)
 at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:139)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzroon:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Apr/19 7:10 PM;patrickr;Full stack trace from the error:

2019-04-09 08:12:26,029 [Incoming-Replication-Channel-test-generic-remote] [ERROR] (o.a.a.r.c.r.e.InboundReplicationChannel:263) - Could not establish remote replication stream for test-generic-remote
java.net.SocketTimeoutException: Read timed out
 at java.net.SocketInputStream.socketRead0(Native Method)
 at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
 at java.net.SocketInputStream.read(SocketInputStream.java:171)
 at java.net.SocketInputStream.read(SocketInputStream.java:141)
 at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:139)
 at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:155)
 at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:284)
 at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)
 at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)
 at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)
 at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:165)
 at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:167)
 at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)
 at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)
 at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:271)
 at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
 at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
 at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
 at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
 at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:71)
 at org.jfrog.client.http.CloseableHttpClientDecorator.doExecute(CloseableHttpClientDecorator.java:104)
 at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
 at org.artifactory.repo.HttpRepo.doExecuteMethod(HttpRepo.java:489)
 at org.artifactory.repo.HttpRepo.doExecuteMethod(HttpRepo.java:483)
 at org.artifactory.repo.HttpRepo.executeMethod(HttpRepo.java:505)
 at org.artifactory.repo.HttpRepo.executeMethod(HttpRepo.java:454)
 at org.artifactory.addon.replication.core.remote.event.InboundReplicationChannel$IncomingStreamReader.openInboundStream(InboundReplicationChannel.java:238)
 at org.artifactory.addon.replication.core.remote.event.InboundReplicationChannel$IncomingStreamReader.handleThreadWaitAndReconnect(InboundReplicationChannel.java:206)
 at org.artifactory.addon.replication.core.remote.event.InboundReplicationChannel$IncomingStreamReader.run(InboundReplicationChannel.java:165)
 at java.lang.Thread.run(Thread.java:748)
2019-04-09 08:15:28,964 [Incoming-Replication-Channel-t","20/Sep/20 2:57 PM;miyaket;This happens in the latest SaaS environment (7.7.6) as of Sep 20, 2020 which is a bit of show-stopper because this simple configuration using a generic repo is most likely used for demo and users might feel event-driven pull replication would not work at all. Please fix this ASAP.",,,,,,,,,
Fresh Artifactory install fails to start,RTFACT-18962,70610,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shane@thermoanalytics.com,shane@thermoanalytics.com,11/Apr/19 2:49 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Artifactory 6.9.0 (Revision: 60900900)

MariaDB 10.3.14 database server

Driver: MariaDB Connector/J 2.4.1

 

The database is configured with the tables, I can login with the account and password which are also stored in db.properties.  Upon starting artifactory the logs show the following error:

Unsupported Database: MariaDB 10.3

This is troubling since the Artifactory documentation here [https://www.jfrog.com/confluence/display/RTF/MariaDB]   states that ""{color:#333333}Artifactory supports MariaDB v10.2.9 and above.{color}""

 

Please advise.

Thanks

Shane","[root@artifactory catalina]# cat /etc/centos-release
CentOS Linux release 7.6.1810 (Core)

[root@artifactory catalina]# uname -sr
Linux 3.10.0-957.10.1.el7.x86_64


[root@artifactory catalina]# df -h
Filesystem Size Used Avail Use% Mounted on
/dev/mapper/System-Root 8.1G 2.3G 5.4G 30% /
devtmpfs 899M 0 899M 0% /dev
/dev/sda1 976M 146M 764M 17% /boot
/dev/mapper/Disk2-Artifactory 217G 71M 206G 1% /artifactory
/dev/mapper/System-Var 6.1G 489M 5.3G 9% /var
/dev/mapper/Disk3-Mariadb 5.8G 217M 5.3G 4% /var/lib/mysql",,,,,,,,,,,,JA-593,,,JA-877,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz2bb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Sep/19 9:05 AM;kwoitzick;Same problem for me on CentOS 7.6 with
 * Artifactory Pro 6.12.2
 * Database: MariaDB 10.2.27-MariaDB.
 * Driver: MariaDB Connector/J 2.4.2
 * Java version: {{openjdk version ""11.0.4"" 2019-07-16 LTS}}

{{access.log}} states:
{noformat}
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'accessJdbcHelperImpl': Invocation of init method failed; nested exception is org.flywaydb.core.api.FlywayException: Unsupported Database: MariaDB 10.2{noformat}
 

Any idea what's causing this issue?","28/Oct/19 7:23 PM;cisaksen;Same problem,  SUSE 15SP1 MaraDB 10.2.25 , JDBC connector 2.4.4, artifactory oos-6.13.1, Java openjdk 1.8

Fresh install, on initial start:

2019-10-28 15:06:06,657 [localhost-startStop-1] [JFrog-Access] [WARN ] (o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext:557) - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration': Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jerseyConfig' defined in URL [jar:file:/opt/jfrog/artifactory/tomcat/webapps/access/WEB-INF/lib/access-application-4.6.10.jar!/org/jfrog/access/rest/config/JerseyConfig.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'httpServiceImpl' defined in URL [jar:file:/opt/jfrog/artifactory/tomcat/webapps/access/WEB-INF/lib/access-server-core-4.6.10.jar!/org/jfrog/access/server/service/http/HttpServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'internalConfigurationServiceImpl' defined in URL [jar:file:/opt/jfrog/artifactory/tomcat/webapps/access/WEB-INF/lib/access-server-core-4.6.10.jar!/org/jfrog/access/server/service/configuration/InternalConfigurationServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'accessConfigurationStorageServiceImpl' defined in URL [jar:file:/opt/jfrog/artifactory/tomcat/webapps/access/WEB-INF/lib/access-server-core-4.6.10.jar!/org/jfrog/access/server/service/db/AccessConfigurationStorageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'accessConfigsDao' defined in URL [jar:file:/opt/jfrog/artifactory/tomcat/webapps/access/WEB-INF/lib/access-server-core-4.6.10.jar!/org/jfrog/access/server/db/dao/AccessConfigsDao.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'accessJdbcHelperImpl': Invocation of init method failed; nested exception is org.flywaydb.core.api.FlywayException: Unsupported Database: MariaDB 10.2

Really need to get this up and running.

 ","31/Oct/19 2:01 PM;cisaksen;I was able to get this working by downgrading the Mariadb jdbc connector to version 2.3.0.   Though I'm having other issues but I can connect to the DB.","31/Oct/19 2:44 PM;cisaksen;I was able to connect to my MariaDB but I now receive these errors:  

**SEVERE: Unable to create initial connections of pool.
java.sql.SQLException: Unable to load class: org.mariadb.jdbc.Driver from ClassLoader:ParallelWebappClassLoader 
 context: access 
 delegate: false

 

Tried several older jdbc connectors with no luck.","21/Nov/19 4:20 PM;mbochenk@tibco.com;Found this: [https://github.com/flyway/flyway/issues/2339]
By adding {{useMysqlMetadata=true}} to my URI was able to make MariaDB 10.4 work.","22/Oct/20 10:36 PM;gnaaromat;Sadly, adding the useMysqlMetadata=true didnt work for me on JDBC 2.7 and MariaDB 10.4

jdbc:mariadb://localhost:3306/artdb?characterEncoding=UTF-8&elideSetAutoCommits=true&useSSL=false&useMysqlMetadata=true

 

Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MariaDB 10.4 

 

I'll try different JDBC driver versions...

 ",,,,,
Regression in Artifactory 6.9 in conan search with properties queries,RTFACT-18952,70583,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,alexeiv,diegor,diegor,11/Apr/19 7:40 AM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,,,,,,,,Conan,,,,,,,4,community,Conan,CPE,P0,,"Github ticket: [https://github.com/conan-io/conan/issues/4951]

 

The queries

{{conan search my-product/1.0.0@usr/stable -q ""(build_type=Release AND os=Windows) OR os=Linux"" -r repo}}

 

Worked in previous versions, now it is failing with:

{{ERROR: Unknown query key: (build_type. [Remote: releases]}}

 

Tested previous versions of Artifactory CE down to 6.3, they worked fine. Artifactory 6.9.1 also fails.

 

*Steps to reproduce:*
 * Start Artifactory CE 6.9.1 (in Windows, double click on .bat launcher)
 * Create a conan local repo, named ""repo"" in Artifactory
 * Set the remote ""repo"" in a conan client (conan 1.14.3, Windows)
 * Create and upload a conan package (with binary)
 * conan search my-product/1.0.0@usr/stable -q ""(build_type=Release AND os=Windows)"" -r repo

As a python script: 
{code:java}
import os
os.system(""conan new pkg/0.1 --bare"")
os.system(""conan create . pkg/0.1@user/testing"")
os.system(""conan remote add local http://localhost:8081/artifactory/api/conan/conan-local -f"")
os.system(""conan upload pkg/0.1@user/testing -r=local --all"")
os.system('conan search pkg/0.1@user/testing -r=local -q ""(build_type=Release AND os=Windows)""')
{code}
Same steps with a previous Artifactory work fine

*28-08-2020:* Latest Artifactory (7.6.3) is still failling. The problem has a workaround in the Conan client from version 1.20 (see bellow) but can be reproduced calling the endpoint in Artifactory with a query like this one:
{code:java}
curl -uadmin:conan2020 'http://localhost:8081/artifactory/api/conan/conan-local/v1/conans/pkg/0.1/user/testing/search?q=%28build_type%3DRelease+AND+os%3DMacos%29'{code}
 

*Workaround*:

*28-08-2020:* From Conan 1.20 the query filtering is made on the Conan side with this fix: [https://github.com/conan-io/conan/pull/5960] but the problem in Artifactory still persists.

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzrany:d01",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"06/May/19 5:03 PM;diegor;I have updated the original post, to include reproducible script.","15/May/19 11:58 AM;ngerke;Will this be fixed in Artifactory 6.10.1 ?","17/Jul/19 5:03 AM;ngerke;When will this be fixed? Its critical for us and blocking us from updating! Please Respond!","08/Aug/19 3:33 PM;ngerke;Any News? Fix Version? Anything?","04/Sep/19 6:18 AM;ngerke;Is this still unfixed?","02/Jan/20 3:06 PM;diegor;Conan issue [https://github.com/conan-io/conan/issues/4951] was closed in [https://github.com/conan-io/conan/issues/4951] (Conan 1.19.3), moved the resolution of queries to the client side, to workaround this issue.

I would say that yes, it would be good if Artifactory wouldn't report the ""complex_search"" capability, for consistency, but not necessary at the moment, probably not worth the effort.",,,,,
"Migration of Conan Repository to V2 failed, when installing V6.9.1",RTFACT-18946,70541,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,climblinne,climblinne,10/Apr/19 8:51 AM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,6.9.1,,,,,,,Conan,Upgrade,,,,,,0,,,,,,"We installed yesterday Artifactory V6.9.1 coming from a V6.8.x Version.


{code}
2019-04-09 10:37:56,201 [art-exec-15] [INFO ] (o.a.a.c.s.ConanServiceImpl:280) - Conan index calculation for pf.fa.ivc.cpu.conan-local:demo/pf_idf_serialization/1.0.0-dev.4+master.g9bc4c5e/testing/0/package/5ab84d6acfe1f23c4fae0ab88f26e3a396351ac9 finished successfully
2019-04-09 10:37:56,263 [art-exec-11] [ERROR] (o.j.s.b.p.t.FilePersistenceHelper:87) - Failed moving  'D:\artifactory\data\filestore\temp\dbRecord752956740790339454.bin'  to  'D:\artifactory\data\filestore\c7\c7672add06c5fe700330e395343d777a8ca2069e'. Access to file denied null


2019-04-09 10:38:07,639 [art-exec-3] [INFO ] (o.a.a.c.s.ConanServiceImpl:280) - Conan index calculation for pf.fa.ivc.cpu.conan-local:demo/pf_com_vsx/1.1.0-dev.5+master.gb9e3319/testing/0/package/fdb31d9506255d357a92e943e42c13fde0e81685 finished successfully
2019-04-09 10:38:08,871 [art-exec-4] [ERROR] (o.a.a.c.m.ConanV2MigrationJobDelegate:334) - The Conan V2 migration job has finished with 65 errors (out of 176 total Conan package roots entries that needed conversion), it will continue to run on each restart until you resolve the errors.

2019-04-09 10:38:08,871 [art-exec-4] [ERROR] (o.a.a.c.m.ConanV2MigrationJobDelegate:346) - The failed packages ids list has been written to c:\artifactory\etc\conan_v2_migration_badPackagesIds-1554799088871.list for convenience.
{code}

We restarted the computer, still the same problem, but less errors.
We restarted the services multiple times and every time we had fewer error until after 8-10 restarts the migration was done.

I have saved a support log and I would be happy to upload to your server.","Windows Server, Artifactory 6.9.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz1x3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Scope of a dependency is not being considered when doing diff between two builds,RTFACT-18940,70504,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,09/Apr/19 10:13 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,Build Info,,,,,,,1,,,,,,"Scope of a dependency is not being considered when doing diff between two builds, as the diff result shows that there is no change between the builds. When we check the build info manually we can see that the scope for that particular dependency has changed between the two builds.

Steps to Reproduce:
 # Publish a build with a dependency that has scope ""compile""
 # Make changes, so that the dependency doesn't change and only the scope has changed to ""test"" or ""provided""
 # Publish the build again with the updated scope
 # Perform a Diff in the build browser in Artifactory and you will see that dependency is unchanged between these two builds.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz1pz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Http encoding does not take place on for Artifactory build info repository.,RTFACT-18929,70372,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,ohadl,ohadl,07/Apr/19 5:38 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.9.0,,,,,,,,,,,,,,1,PB_Done,,,,,"If you have the following build name:

 

test::build::see

 

It will be seen as below in the Artifactory build info repository:

 

test%3A%3Abuild%3A%3Asee

 

However under the Builds Tab in Artifactory the name is presented as it should.

 

see screenshots below:

!pic1.png|width=368,height=57!

!pic2.png|width=217,height=66!",,,,,,,,,,,,,,,,,,,"07/Apr/19 5:37 AM;ohadl;pic1.png;https://www.jfrog.com/jira/secure/attachment/31890/pic1.png","07/Apr/19 5:35 AM;ohadl;pic1.png;https://www.jfrog.com/jira/secure/attachment/31892/pic1.png","07/Apr/19 5:38 AM;ohadl;pic2.png;https://www.jfrog.com/jira/secure/attachment/31889/pic2.png","07/Apr/19 5:36 AM;ohadl;pic2.png;https://www.jfrog.com/jira/secure/attachment/31891/pic2.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0zb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
helm virtual repo has incorrect urls for aggregated remote proxying https://storage.googleapis.com/kubernetes-charts-incubator ,RTFACT-18928,70354,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,05/Apr/19 5:10 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.9.0,,,,,,,,,,,,,,1,,,,,,"Steps to reproduce:

-set up kubernetes-charts to [https://storage.googleapis.com/kubernetes-charts]

-set up kubernetes-charts-incubator to [https://storage.googleapis.com/kubernetes-charts-incubator]

-aggregate both repos in a virtual. 

-download the index.yaml from the virtual. See that repositories from kubernetes-charts-incubator still point to the [https://storage.googleapis.com/kubernetes-charts-incubator.] For example, aws-alb-ingress-controller has a url of:
urls:
 - [https://kubernetes-charts-incubator.storage.googleapis.com/aws-alb-ingress-controller-0.1.6.tgz]

meanwhile, grafana (from [https://storage.googleapis.com/kubernetes-charts]) has a url for Artifactory of:

urls:
 - [https://loren.jfrog.team:443/artifactory/helm/grafana-3.0.1.tgz|https://loren.jfrog.team/artifactory/helm/grafana-3.0.1.tgz]

-issue also persists when only aggregating kubernetes-charts-incubator repo in the virtual repo",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0vr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"20/Aug/20 9:07 PM;hussambutt;I am facing the same issue when I added the remote repo directly to helm or when using it behind a virtual repo.

I am getting a 401 unauthorized as it tries to authenticate with `https://kubernetes-charts-incubator.storage.googleapis.com/sparkoperator-0.8.2.tgz` instead of artifactory.

 ",,,,,,,,,,
"No REST API to configure Mail Configuration, Mail Server Settings",RTFACT-18927,70352,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gmzwinge482,gmzwinge482,05/Apr/19 5:08 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,REST API,,,,,,,0,,,,,,"According to [https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API,] there is not API to configure Mail Configuration, Mail Server Settings",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0vb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Apr/19 6:57 PM;arturoa;This can be done with YAML configuration via the REST API: https://www.jfrog.com/confluence/display/RTF/YAML+Configuration+File#YAMLConfigurationFile-General(General,PropertySets,Proxy,Mail)",,,,,,,,,,
Nuget artifact properties overwritten by recalculation,RTFACT-18922,70335,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,04/Apr/19 8:37 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,Metadata,NuGet,,,,,,0,,,,,,"When uploading a nuget package, the properties are taken directly from the nuspec file.  Users can then update any of these properties within Artifactory and this gives off the impression the properties were updated.  A recalculation of the repository will reset these properties to the nuspec ones.  In order to actually change one of these files, you need to update the nuspec file directly.

The fact is that Artifactory allows the users to add properties to the package after upload. By doing so, JFrog is setting the expectation that those values will persist and not be mysteriously deleted or mutated without the customer's explicit awareness. No matter how you spin it, the current behavior is data loss to the customer. It's inconsistent across frameworks and there's no way the customer could know about this caveat without spending a bunch of developer time QAing the product.

 

REPRODUCE

deploy nuget package

update a property given through calculating metadata e.g. nuget.tags

run recalculation on the repository and see the updated property is reverted back

 

POSSIBLE SOLUTIONS
 # Physically update nuspec file when these properties are updated(most likely not since the metadata is within the package and not external)
 # Do not allow these metadata properties to be overwritten with an error that explains why (this would pertain to more than just nuget)
 # Update documentation to reflect that there are some metadata properties that will be overwritten when calculating index so customers can be aware of this behavior",,,,,,,,,,,,,,,,RTFACT-14324,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0rj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
I can't install purestorage plugin from dockerhub (remote),RTFACT-18921,70329,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rafael,rafael,04/Apr/19 5:52 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,Docker,,,,,,,0,,,,,,"If I create a remote registry pointing to dockerhub, I can download plugins such as https://hub.docker.com/plugins/hpe-3par-docker-volume-plugin. However, https://hub.docker.com/r/purestorage/docker-plugin/ does not work.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0qf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Apr/19 7:42 AM;rafael;I think this issue that I tried to report to dockerhub is why these plugins don't work in artifactory: https://forums.docker.com/t/incorrect-scope-class-when-trying-to-access-plugins-via-v2-api/72568 maybe you can influence them to change more than I can.",,,,,,,,,,
Slow MSSQL db query,RTFACT-18918,70300,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,04/Apr/19 2:26 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.8.6,,,,,,,,,,,,,,2,,,,,,"The query is:

Select bb.* From (Select aa.*  ,ROW_NUMBER() OVER ( order by aa.itemId ASC  ) AS RN  from ( select distinct  n.node_id as itemId,n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName from  nodes n left outer join node_props np100 on np100.node_id = n.node_id where ( n.repo = @P0 and np100.prop_key = @P1) and n.node_type = @P2  ) aa ) bb Where bb.RN >= 164534 AND bb.RN < 164634 

 
MSSQL suggests to create a non-clustered index on node_props.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0mn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Apr/19 6:45 AM;klaus.wening@datev.de;Message of MSSQL query optimizer:

 

/*
Missing Index Details from ExecutionPlan1.sqlplan
The Query Processor estimates that implementing the following index could improve the query cost by 90.0954%.
*/

/*
USE [artifactory]
GO
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [dbo].[node_props] ([prop_key])
INCLUDE ([node_id])
GO
*/","09/Jun/20 9:04 AM;steffel;Same problem here with 7.4.1 - sometimes, we get a timeout because of this query.

I would say, priority is not ""normal"", but a ""blocker"".",,,,,,,,,
store artifacts locally option doesn't allow non admin users to resolve the pakckage,RTFACT-18916,70290,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lakshmip,lakshmip,04/Apr/19 12:36 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.2.0,6.9.0,,,,,,,,,,,,,1,,,,,,"steps to reproduce the issue: 

-> create a remote repository - e.g jcenter

-> create a non admin user - e.g laks

-> give the non admin user full permission to the repositpry in the permission target

-> disable store artifacts locally option on jcenter repository

-> try downloading any package using curl or UI

expected result: as the remote repository is the public repository a non admin user as well as have the full permissions to the repository, user should be able to download the package 

actual result: getting the following error message

""message"" : ""Download request for repo:path 'jcenter-cache:abengoa/clj-stripe/1.0.3/clj-stripe-1.0.3.jar' is forbidden for user 'laks'.""

scenario has been tested with generic (smart) repository configured pointing to another artifactory and got the same result (version 6.2.0.)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0kn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Error 500 is thrown when sending HEAD request to Artifactory root ,RTFACT-18914,70287,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ariels,ariels,04/Apr/19 12:21 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,PB_Done,,,,,"Steps to reproduce:
 # Start Artifactory.
 # send the following: 
curl -I [http://localhost:8081/artifactory/]
 # You will receive the following: 

{code:java}
HTTP/1.1 500 Internal Server Error
Server: Artifactory/6.8.1
X-Artifactory-Id: d2184c08b2bf1e5e:-1acd9fe2:169e8480a61:-8000
Content-Type: application/json;charset=ISO-8859-1
Transfer-Encoding: chunked
Date: Thu, 04 Apr 2019 12:19:26 GMT
Connection: close{code}
There are no errors in the logs, (artifactory.log, catalina.out, localhost)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0jz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"17/Feb/20 4:03 PM;martin.rueegsegger;We encountered the same behavior today with version 6.16.0

{{curl -v -X HEAD http://<artifactory ip>:<artifactory port>/artifactory/}}
{{* About to connect() to <artifactory ip> port <artifactory port> (#0)}}
{{* Trying <artifactory ip>...}}
{{* Connected to <artifactory ip> (<artifactory ip>) port <artifactory port> (#0)}}
{{> HEAD /artifactory/ HTTP/1.1}}
{{> User-Agent: curl/7.29.0}}
{{> Host: <artifactory ip>:<artifactory port>}}
{{> Accept: */*}}
{{>}}
{{< HTTP/1.1 500 Internal Server Error}}
{{< Server: Artifactory/6.16.0}}
{{< X-Artifactory-Id: 7b106135668e443fcd2e3faeaf448aee5621f7ea}}
{{< X-Artifactory-Node-Id: artifactorytest2}}
{{< Content-Type: application/json;charset=ISO-8859-1}}
{{< Transfer-Encoding: chunked}}
{{< Date: Mon, 17 Feb 2020 15:59:26 GMT}}
{{< Connection: close}}",,,,,,,,,,
artifactory parent pom job fails because of dependency resolution,RTFACT-18913,70281,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yoazm,yoazm,04/Apr/19 10:39 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,package indexer and metadata client should be built before artifactory.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0in:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
max failed attempts locking users when there is communication issues,RTFACT-18910,70273,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lakshmip,lakshmip,04/Apr/19 8:28 AM,16/Feb/21 10:51 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,4,,,,,,"steps to reproduce the issue:

-> configure artifactory with default LDAP timeout values

-> configure artifactory with a LDAP server

> make sure to set delay in the latency between Artifactor-y <-> LDAP node so that requests to LDAP fail - I tried with tcset 

-> enable 'Lock User After Exceeding Max Failed Login Attempts'

-> try login with the LDAP user and observe that the user is getting locked

expected: the user should be locked when the password attempt/authorisation is failed with LDAP

actual: the user is getting blocked though he is a valid user because of communication issues 

Artifactory should block the user if it is a ""failed password attempt"" not for a failed attempt? ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz0gv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
java.lang.NoClassDefFoundError: org/jruby/ir/runtime/IRRuntimeHelpers when pushing rubygems,RTFACT-18897,70197,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fmarin,fmarin,03/Apr/19 5:52 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,1,artifactory,,,,,"I'm getting the following error when trying to push rubygems, this used to work a couple days ago, and the rubygem doesn't have any jruby dependencies.  We have an Artifactory Pro license

 
{code:java}
00:00:23.537 For more info see:
00:00:23.537 https://github.com/svenfuchs/i18n/releases/tag/v1.1.0
00:00:23.537
00:00:24.448 pcapi 2.2.5 built to pkg/pcapi-2.2.5.gem.
00:00:24.448 $ gem push pkg/pcapi-2.2.5.gem --host https://personalcapital.artifactoryonline.com/personalcapital/api/gems/pcap-gems-local
00:00:28.570 Pushing gem to https://personalcapital.artifactoryonline.com/personalcapital/api/gems/pcap-gems-local...
00:00:28.570 {
00:00:28.570 ""errors"" : [ {
00:00:28.570 ""status"" : 500,
00:00:28.570 ""message"" : ""java.lang.NoClassDefFoundError: org/jruby/ir/runtime/IRRuntimeHelpers""
00:00:28.570 } ]
00:00:28.570 }
[Pipeline] }{code}",,,,,,,,,,,,,,,,,,JFES-274,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz01j:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Apr/19 8:34 AM;Maras;What message is displayed in artifactory logs files for that error?",,,,,,,,,,
Artifactory violates RFC-7231 (HTTP 1.1) §6.5.5,RTFACT-18896,70195,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,larry_west,larry_west,02/Apr/19 10:06 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.7.6,,,,,,,Web REST API,,,,,,,0,http,https,,,,"When using {{Artifactory Enterprise 6.7.6 rev 60706900}} at $WORK, I tried a:

{quote}
curl --verbose  -H auth_stuff -T xxxfilexxx https://host/path/
{quote}

And got a 405 ""Method not allowed"" response, but no {{Allow}} header (actually no headers displayed).

Per the [HTTP 1.1 spec|https://tools.ietf.org/html/rfc7231], [§6.5.5 ""405 Method Not Allowed""|https://tools.ietf.org/html/rfc7231#section-6.5.5]:

{quote} 
[...] The origin server MUST generate an Allow header field in a 405 response containing a list of the target resource's currently supported methods.
{quote}

I've done this several times. The curl verbose output indicates it's switching to HTTP/2, in case that matters. (Perhaps that's why no response headers at all are displayed in this case?)

 ","I've used curl 7.52.1 on Linux and curl 7.54.0 on a Mac.

I don't know the Artifactory server environment.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzz013:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remote cache cannot be found by AQL unless manually download once,RTFACT-18894,70143,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,leiyang,leiyang,02/Apr/19 11:46 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,AQL,,,,,,,0,AQL,cache,master,slave,,"In our company we use Artifactory enterprise master-slave infrastructure.

We upload artifacts(normal zips) to master repo daily.

And we need download it in slaves(remote cache repo).

 

But we cannot find it using AQL.

Instead, we open the repo by web browser, and manually download it, and then we the AQL is successful.",Artifactory Version 6.8.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyz1r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Support bundle should include effective system info under the system-info.json,RTFACT-18886,70090,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,01/Apr/19 12:19 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,Support Zone,,,,,,,2,PB_Done,QF,QF-P2,S-P2,,"*Summary:*

Support bundle should include effective system properties (equivalent of the 'api/system/' call) under the system-info.json

This used to be the case before the major support bundle overhaul. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyytb:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Bintray Remote Repo can't download binaries,RTFACT-18885,70089,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,fiebrig.vw,fiebrig.vw,01/Apr/19 12:18 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,NPM,,,,,,,0,,,,,,"I created a remote repo for [https://api.bintray.com/npm/unity/unity] or [https://packages.unity3d.com|https://packages.unity3d.com/] (which both link to the same).

 

When running `npm view com.autodesk.fbx versions –registry https://myurl/api/npm/npm-unity` I get all the metadata, but as soon as you try `npm install com.autodesk.fbx –registry https://myurl/api/npm/npm-unity`.

On the remote is a proxy defined and in the logs is no specific error message seen.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyyt3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Conda returns md5mismatch error,RTFACT-18869,69913,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wailoont,wailoont,28/Mar/19 8:26 AM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,6.8.1,,,,,,,Conda,,,,,,,0,artifactory,conda,,,,"Conda install using Artifactory as main channel

returns MD5MismatchError.

Example error :

 

Downloading and Extracting Packages
mkl-2019.1 | 204.6 MB | ########################################################################################################################################### | 100%
pip-19.0.3 | 1.8 MB | ########################################################################################################################################### | 100%
conda-4.6.8 | 876 KB | ########################################################################################################################################### | 100%
openssl-1.0.2r | 3.1 MB | ########################################################################################################################################### | 100%
liblapack-3.8.0 | 6 KB | ########################################################################################################################################### | 100%
pycparser-2.19 | 173 KB | ########################################################################################################################################### | 100%
pysocks-1.6.8 | 22 KB | ########################################################################################################################################### | 100%
pytz-2018.9 | 260 KB | ########################################################################################################################################### | 100%
urllib3-1.24.1 | 148 KB | ########################################################################################################################################### | 100%
certifi-2019.3.9 | 149 KB | ########################################################################################################################################### | 100%
chardet-3.0.4 | 190 KB | ########################################################################################################################################### | 100%
intel-openmp-2019.1 | 885 KB | ########################################################################################################################################### | 100%
setuptools-40.8.0 | 626 KB | ########################################################################################################################################### | 100%
python-dateutil-2.8. | 281 KB | ########################################################################################################################################### | 100%
numpy-1.16.2 | 4.3 MB | ########################################################################################################################################### | 100%
cryptography-2.5 | 645 KB | ########################################################################################################################################### | 100%
pycosat-0.6.3 | 104 KB | ########################################################################################################################################### | 100%
wheel-0.33.1 | 34 KB | ########################################################################################################################################### | 100%
ruamel_yaml-0.15.71 | 257 KB | ########################################################################################################################################### | 100%
libcblas-3.8.0 | 6 KB | ########################################################################################################################################### | 100%
cffi-1.12.2 | 222 KB | ########################################################################################################################################### | 100%
python-3.6.0 | 18.9 MB | ########################################################################################################################################### | 100%
ncurses-5.9 | 1.1 MB | ########################################################################################################2 | 75%
pandas-0.24.2 | 11.1 MB | ########################################################################################################################################### | 100%
idna-2.8 | 132 KB | ########################################################################################################################################### | 100%
asn1crypto-0.24.0 | 154 KB | ########################################################################################################################################### | 100%
requests-2.21.0 | 84 KB | ########################################################################################################################################### | 100%
pyopenssl-19.0.0 | 81 KB | ########################################################################################################################################### | 100%
readline-6.2 | 606 KB | ########################################################################################################################################### | 100%
six-1.12.0 | 22 KB | ########################################################################################################################################### | 100%
tk-8.5.19 | 1.9 MB | ########################################################################################################################################### | 100%
sqlite-3.13.0 | 4.9 MB | ########################################################################################################################################### | 100%
libblas-3.8.0 | 6 KB | ########################################################################################################################################### | 100%
libedit-3.1.20170329 | 160 KB | ########################################################################################################################################### | 100%

MD5MismatchError: Conda detected a mismatch between the expected content and downloaded content
for url 'https://artifactory.com/api/conda/conda/linux-64/ncurses-5.9-10.tar.bz2'.
 download saved to: /tmp/miniconda/pkgs/ncurses-5.9-10.tar.bz2
 expected md5 sum: 385305fdf1ea5dabff1fd7a1f5e1e115
 actual md5 sum: 5c5719081d53b73c8e854829067ce2f2

 

Notice that : ncurses is downloaded at 75%. ",Operating system : RHEL 7 Linux,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxvz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Sep/19 3:47 PM;wulfrog;Duplicate of RTFACT-18411 ?","03/Oct/19 6:33 AM;wailoont;Hi,

Yes, its the same issue.

Since the fix has been released, this issue can be closed. 

Thanks lot to those who fix this. ",,,,,,,,,
Exception thrown under the artifactory.log if an invalid crowd.token_key cookie is found ,RTFACT-18868,69912,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,28/Mar/19 8:21 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"*Problem statement and Impact*

User sees in artifactory.log the following error:

 

 
{code:java}
2019-02-13 10:15:37,179 [http-nio-8081-exec-49] [ERROR] (o.a.a.s.a.c.CrowdSsoAuthenticationFilter:73) - Could not get login identifier
{code}
It seems there are no harmful effects.

 

*Steps to reproduce the error*

 

Artifactory version: 6.7.6

Crowd server version: 3.3.2

 
 # Install Artifactory 6.7.6 (zip installation)
 # Run crowd docker container.
 # Start artifactory and set up crowd server in Artifactory UI > admin > Security > Crowd/JIRA.
 # Login to crowd server
 # Go to http://<ARTIFACTORY_URL>:<PORT> (Crowd user automatically logged in).
 # Open DevTools in google chrome
 # Change crowd token under DevTools > Application > Cookies > ARTIFACTORY_URL > crowd.token_key from:

 

{color:#ff0000}y{color}mKNIWK35JY6TbrJ9llxyQAAAAAAAoABZGF2aWRw

To:

{color:#ff0000}1{color}mKNIWK35JY6TbrJ9llxyQAAAAAAAoABZGF2aWRw
 # Refresh the page.

*Actual results*

 

As we refreshed the page, the error “Could not get login identifier” appeared in our artifactory.log file. This issue occurs due to a caching issue. crowd.token_key is a cookie token for Crowd SSO and it is cached in the browser. If one expired/invalid one exists on the browser cache, the below harmless exception is thrown. upon refreshing, and after signing on to any crowd SSO connected application, the login will be valid.

 

*Expected results*

 

Expire the cookie cleanly and without polluting the logs.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxvr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
JFROG RPM issues.,RTFACT-18867,69909,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ritesh,ritesh,28/Mar/19 7:14 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifact Storage,Maven,,,,,,0,,,,,,"Hi Team,

We are building RPM using 'rpm-maven-plugin' and were trying to upload the rpm file into jfrog repository.

While uploading we are getting below error.
[Error] [Thread 2] Artifactory response: 403 Forbidden
 {
   ""errors"": [
     {
       ""status"": 404,
       ""message"": ""Checksum deploy failed. No existing file with SHA-1: 88541a871cd355569efed07dc9c4237452672d9b""
     }
   ]
 }
 [Error] Failed uploading 1 artifacts.
 {
   ""status"": ""failure"",
   ""totals"":{
     ""success"": 0,
     ""failure"": 1
   }
 }
Maven RPM plugin:
<plugin>
 <groupId>org.codehaus.mojo</groupId>
 <artifactId>rpm-maven-plugin</artifactId>
 <executions>
 <execution>
 <id>generate-rpm</id>
 <phase>install</phase>
 <goals>
 <goal>rpm</goal>
 </goals>
 </execution>
 </executions>
 <configuration>
 <needarch>noarch</needarch>
 <targetOS>linux</targetOS>
 <name>${artifact_name}</name>
 <version>${rpm_version}</version>
 <license>${name}</license>
 <group>default</group>
 <release>${rpm_release}</release>
 <keyname />
 <repackJars>false</repackJars>
 <copyTo>${directory}/${artifact_name}-${version}-${release}.noarch.rpm</copyTo>
 <requires>
 <require>jre8 &gt;= 1.8</require>
 </requires>
 <repackJars>false</repackJars>
 <defineStatements>
 <defineStatement>_build_sign DSA</defineStatement>
 <defineStatement>_source_filedigest_algorithm md5</defineStatement>
 <defineStatement>_binary_filedigest_algorithm md5</defineStatement>
 <defineStatement>_source_payload w0.gzdio</defineStatement>
 <defineStatement>_binary_payload w0.gzdio</defineStatement>
 <defineStatement>__os_install_post %\{nil}</defineStatement>
 </defineStatements>
 <preinstallScriptlet>
 <scriptFile>${directory}/scripts/preinstall.sh</scriptFile>
 </preinstallScriptlet>
 <postinstallScriptlet>
 <scriptFile>${directory}/scripts/postinstall.sh</scriptFile>
 </postinstallScriptlet>
 <preremoveScriptlet>
 <scriptFile>${directory}/scripts/preremove.sh</scriptFile>
 </preremoveScriptlet>
 <postremoveScriptlet>
 <scriptFile>${directory}/scripts/postremove.sh</scriptFile>
 </postremoveScriptlet>
 <defaultFilemode>644</defaultFilemode>
 <defaultDirmode>711</defaultDirmode>
 <defaultUsername>${user}</defaultUsername>
 <defaultGroupname>${groupname}</defaultGroupname>
 <mappings>
 <mapping>
 <directory>${dir_path}</directory>
 <sources>
 <source>
 <location>${basedir}/../target/service-test.jar</location>
 </source>
 </sources>
 </mapping>
 </mappings>
 </configuration>
 </plugin>
 
CMD: jfrog rt u ""(*.rpm)"" service/ --recursive=false --props=rpm.metadata.version=test
 
We have updated in maven settings.xml and deploymentRepo tag in maven for jfrog repo but still failing.
 
We were successfully deploying the RPM in YUM repository and checksum updated in repodata as well but not working with JFROG.
 
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxvb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Circle of trust"" breaks with the destruction of the HA primary node",RTFACT-18863,69895,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,felipe.ramirez,felipe.ramirez,27/Mar/19 3:11 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.6,,,,,,,Access Server,DR,HA,High Availability,Mission-Control,Upgrade,,3,,,,,,"According to this section in the Mission Control user guide [https://www.jfrog.com/confluence/display/MC/Disaster+Recovery#DisasterRecovery-EstablishingaCircleofTrust-Artifactory6.3.0andabove] a ""circle of trust"" must be established between the Master and Target services by copying each other's root.crt to each others _{{$ARTIFACTORY_HOME/access/etc/keys/trusted}}_ folder. Assuming this task happens on the primary node for each service/site, the circle of trust will be broken upon the destruction of that primary node.

The folder mentioned isn't replicated amongst each node in an HA cluster like some other files are. Even if you recover the primary node back into the cluster using *master.key* you will still need to re-establish the circle of trust on that node as an additional step. ","Master service/site:
 * OS: Ubuntu 17.10
 * Artifactory v6.8.6
 * Number of nodes: 3

Target service/site:
 * OS: Ubuntu 17.10
 * Artifactory v6.8.6
 * Number of nodes: 2

Mission Control:
 * OS: Ubuntu 16.04
 * Mission Control v3.4.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxnj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
test,RTFACT-18856,69872,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,uripld1+testmyjira,uripld1+testmyjira,27/Mar/19 11:08 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can't use the product altogether, certain processes are not working, can't use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxif:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Yum repo not showing some packages,RTFACT-18853,69854,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dianasa,dianasa,26/Mar/19 11:02 PM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,5.4.4,,,,,,,RPM,,,,,,,1,,,,,,"windows 5.4.4 artifactory server

we have a 3rd party p;ackages yum repo that is not showing some rpms when you do a local yum rpm list

We cant upgrade just now , is there any work arounds that we can use ?

e.g. from web browser, we can see all rpms 

from centos7 client, we can see most, missing 3 postgres rpms we can see in web browser","windows 

5.4.4 artifactory pro",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

Unable to install e.g. postgres from yum repo that should be available

Steps to reproduce
1. Browser shows all rpms
2. sudo yum -v --disablerepo=* --enablerepo=Artifactory-3rdparty* list available --showduplicates
does not show postgres rpms 


Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxef:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't resolve NuGet packages when the node.id in ha-node.properties has a long value,RTFACT-18851,69833,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,omerh,omerh,26/Mar/19 3:03 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,7.3.2,,,,,,,,,,,,,,1,PB_Done,QF,QF-P3,,,"+*Description*+

An unexpected error occurs When resolve NuGet packages when node.id in ha-node.properties has a long value

 

+*Steps to reproduce*+

1. Artifactory setup in HA.

2. Set the node.id in the ha-node.properties file to a long value( for example 42 characters) .

3.Try to resolve a package using the NuGet CLI

for example: nuget install moq -Source Artifactory1  -verbosity detailed

 

{{2019-03-26 14:39:34,497 [http-nio-8081-exec-17] [WARN ] (o.a.s.d.l.s.DBConflictGuard:55) - Timed out while trying to acquire lock: local-primary12121212121212121212121212121212121211-NuGetCacheBuilder:nuget-local. Couldn't acquire lock for: 420000 milliseconds}}
{{2019-03-26 14:39:34,498 [http-nio-8081-exec-17] [WARN ] (o.a.a.n.NuGetServiceImpl:162) - Could not obtain lock for :nuget-local}}
{{2019-03-26 14:39:34,500 [http-nio-8081-exec-17] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null}}
{{java.lang.NullPointerException: null}}
{{ at org.artifactory.addon.nuget.NuGetPackagesFilterDelegate$ById.subset(NuGetPackagesFilterDelegate.java:64)}}
{{ at org.artifactory.addon.nuget.NuGetPackagesFilterDelegate$ById.subset(NuGetPackagesFilterDelegate.java:54)}}
{{ at org.artifactory.addon.nuget.NuGetPackagesFilterDelegate.accept(NuGetPackagesFilterDelegate.java:22)}}
{{ at org.artifactory.addon.nuget.NuGetServiceImpl.filtercachedPackages(NuGetServiceImpl.java:401)}}
{{ at org.artifactory.addon.nuget.NuGetServiceImpl.getPackagesFromCache(NuGetServiceImpl.java:353)}}
{{ at org.artifactory.addon.nuget.NuGetServiceImpl.assembleLocalPackages(NuGetServiceImpl.java:344)}}
{{ at org.artifactory.addon.nuget.repomd.NuGetPackageWorkContext.lambda$getODataProducer$0(NuGetPackageWorkContext.java:79)}}
{{ at org.odata4j.producer.inmemory.InMemoryProducer.getEntities(InMemoryProducer.java:462)}}
{{ at org.jfrog.repomd.nuget.odata.response.PackagesResponseBuilder.createResponse(PackagesResponseBuilder.java:31)}}
{{ at org.jfrog.repomd.nuget.rest.handler.NuGetLocalRepoHandler.findPackagesById(NuGetLocalRepoHandler.java:156)}}
{{ at org.artifactory.addon.nuget.search.delegate.id.FindPackagesByIdFeedRequestDelegate.getLocalResponse(FindPackagesByIdFeedRequestDelegate.java:42)}}
{{ at org.artifactory.addon.nuget.search.delegate.BaseRequestDelegate.getLocalFeed(BaseRequestDelegate.java:61)}}
{{ at org.artifactory.addon.nuget.search.delegate.VirtualRepoSearchHandler.getRepoFeed(VirtualRepoSearchHandler.java:81)}}
{{ at org.artifactory.addon.nuget.search.delegate.VirtualRepoSearchHandler.getFeedFromRepo(VirtualRepoSearchHandler.java:63)}}
{{ at org.artifactory.addon.nuget.search.delegate.BaseRequestDelegate.responseFromVirtual(BaseRequestDelegate.java:154)}}
{{ at org.artifactory.addon.nuget.search.delegate.id.FindPackagesByIdFeedRequestDelegate.handleRequestForVirtual(FindPackagesByIdFeedRequestDelegate.java:37)}}
{{ at org.artifactory.addon.nuget.search.delegate.id.FindPackagesByIdFeedRequestDelegate.handleRequestForVirtual(FindPackagesByIdFeedRequestDelegate.java:23)}}
{{ at org.artifactory.addon.nuget.search.NuPkgSearchRequestHandler.delegateSearchRequestToRepos(NuPkgSearchRequestHandler.java:83)}}
{{ at org.artifactory.addon.nuget.search.NuPkgSearchRequestHandler.findPackagesById(NuPkgSearchRequestHandler.java:51)}}
{{ at org.artifactory.addon.nuget.repo.NuGetVirtualRepoHandler.findPackagesById(NuGetVirtualRepoHandler.java:177)}}
{{ at org.jfrog.repomd.nuget.rest.NuGetSubResource.findPackagesById(NuGetSubResource.java:137)}}
{{ at sun.reflect.GeneratedMethodAccessor356.invoke(Unknown Source)}}
{{ at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)}}
{{ at java.lang.reflect.Method.invoke(Method.java:498)}}
{{ at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)}}
{{ at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)}}
{{ at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)}}
{{ at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)}}
{{ at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)}}
{{ at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)}}
{{ at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)}}
{{ at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)}}
{{ at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)}}
{{ at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)}}
{{ at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)}}
{{ at org.glassfish.jersey.internal.Errors.process(Errors.java:316)}}
{{ at org.glassfish.jersey.internal.Errors.process(Errors.java:298)}}
{{ at org.glassfish.jersey.internal.Errors.process(Errors.java:268)}}
{{ at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)}}
{{ at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)}}
{{ at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)}}
{{ at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)}}
{{ at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)}}
{{ at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)}}
{{ at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)}}
{{ at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)}}
{{ at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)}}
{{ at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:391)}}
{{ at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)}}
{{ at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:74)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)}}
{{ at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)}}
{{ at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)}}
{{ at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)}}
{{ at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)}}
{{ at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)}}
{{ at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)}}
{{ at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)}}
{{ at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)}}
{{ at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)}}
{{ at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)}}
{{ at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)}}
{{ at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)}}
{{ at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)}}
{{ at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)}}
{{ at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)}}
{{ at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)}}
{{ at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)}}
{{ at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)}}
{{ at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)}}
{{ at java.lang.Thread.run(Thread.java:748)}}

 

+*Workarounds*+

Set the node.id in the ha-node.properties file to a small value( up to 30 characters) .",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzg4s:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Saml SSO button from UI does not allow Get method in response headers,RTFACT-18850,69832,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sharmasu,sharmasu,26/Mar/19 2:48 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,SAML SSO,,,,,,,0,,,,,,"From Artifactory UI (version:6.8.7),  If I try to login by clicking on SAML SSO button, it should redirect me to IDP login page but it fails with following error:

{ ""errors"" : [ \{ ""status"" : 405, ""message"" : ""Method Not Allowed"" } ] }

Reason of error is it does not allow in response headers HTTP Get methos but only POST,OPTIONS.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyxaf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The repomd.xml getting downloaded is different then the actual present on artifactory ,RTFACT-18846,69815,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Memon,Memon,26/Mar/19 10:43 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.2.0,,,,,,,,,,,,,,0,,,,,,"I have a virtual YUM repository with few remote and local repo's. And suddenly the virtual yum has stopped working with error.
{noformat}
(process:62): GLib-WARNING **: 10:16:48.556: GError set over the top of a previous GError or uninitialized memory.
This indicates a bug in someone's code. You must ensure an error is NULL before it's set.
The overwriting error message was: Parsing primary.xml error: Extra content at the end of the document{noformat}

Upon digging further I found that the repomd.xml file in the virtual repo which is getting downloaded is different vs what I have in artifactory. I tried creating the new virtual altogether but that didn't help.

Here is the curl command which shows the md5/sha256 everuthing different than actual 

{noformat}
[root@0cd9ffc61d18 yum.repos.d]# curl -I https://MASKED/artifactory/virtual-yum-rhel7-juned/repodata/repomd.xml
HTTP/1.1 200
Accept-Ranges: bytes
Cache-Control: no-store
Content-Disposition: attachment; filename=""repomd.xml""; filename*=UTF-8''repomd.xml
Content-Length: 1413
Content-Type: application/xml
Date: Tue, 26 Mar 2019 10:41:17 GMT
ETag: 25e165cdd491bb2bdbfe5bb89762ba2e5b09cade
Last-Modified: Tue, 26 Mar 2019 10:18:53 GMT
Server: Artifactory/6.2.0
X-Artifactory-Filename: repomd.xml
X-Artifactory-Id: ad37a14b09cc8598:77dca39d:169b8d4fb65:-8000
X-Checksum-Md5: 05bd1ee82671cc91ebd1e582ea152cef
X-Checksum-Sha1: 25e165cdd491bb2bdbfe5bb89762ba2e5b09cade
X-Checksum-Sha256: b9c109c6d728629c416141e40ff87939afb095456652907471f68dd628e85a40
Connection: keep-alive
{noformat}

And below is what I got from UI for same file 
{noformat}
Checksums
SHA-256: f0a063f2a10f4ef200745e2e19be5bd0aad47c271d0226a6b39b1e1d9cb5ff60 (Uploaded: Identical)
SHA-1: ecf82e921ea3b96a9329cf97d63f49467a84ee52 (Uploaded: Identical)
MD5: f8e19e8590b06ce510351b365b49e547 (Uploaded: Identical)
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyx6n:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
duplicated jvm options shows in RPM installation,RTFACT-18844,69808,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,25/Mar/19 9:39 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.1,6.8.4,6.8.6,,,,,Installer,,,,,,,5,,,,,,"When Artifactory is installed by RPM (yum installation), duplicated jvm input arguments shows as below.
I suspect this might be caused by  https://www.jfrog.com/jira/browse/RTFACT-18538


 JVM Input arguments                                   | -Djava.util.logging.config.file=/opt/jfrog/artifactory/tomcat/conf/logging.properties

                                                                         | -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager

                                                                         | -Djdk.tls.ephemeralDHKeySize=****

                                                                         | -Djava.protocol.handler.pkgs=org.apache.catalina.webresources

                                                                         | -Dorg.apache.catalina.security.SecurityListener.UMASK=0027

                                                                     
 {color:#f79232}   | -Xms512m

                                                                         | -Xmx2g

                                                                         | -Xss256k

                                                                         | -XX:+UseG1GC

                                                                         | -XX:OnOutOfMemoryError=kill -9 %p

                                                                         | -Djruby.bytecode.version=1.8

                                                                         | -Djruby.compile.invokedynamic=false

                                                                         | -Dfile.encoding=UTF8

                                                                         | -Dartdist=rpm

                                                                         | -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true

                                                                         | -Djava.security.egd=file:/dev/./urandom

{color}





                                                                         | -Djfrog.join.key.paths=**************************

                                                                       

     {color:#f79232}{color:#d04437}   | -Xms512m

                                                                       | -Xmx2g

                                                                         | -Xss256k

                                                                         | -XX:+UseG1GC

                                                                         | -XX:OnOutOfMemoryError=kill -9 %p

                                                                         | -Djruby.bytecode.version=1.8

                                                                         | -Djruby.compile.invokedynamic=false

                                                                         | -Dfile.encoding=UTF8

                                                                         | -Dartdist=rpm

                                                                         | -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true

                                                                         | -Djava.security.egd=file:/dev/./urandom{color}{color}



                                                                         | -Dartifactory.home=/var/opt/jfrog/artifactory

                                                                         | -Dignore.endorsed.dirs=

                                                                         | -Dcatalina.base=/opt/jfrog/artifactory/tomcat

                                                                         | -Dcatalina.home=/opt/jfrog/artifactory/tomcat

                                                                         | -Djava.io.tmpdir=/opt/jfrog/artifactory/tomcat/temp",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyx5b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Mar/19 10:17 PM;epurins;I also see this in 6.8.7.","07/May/19 2:30 AM;rho;Also 6.10.0 (OSS).","09/May/19 9:29 PM;epurins;Working around this in 6.8.7 rpm install by patching /opt/jfrog/artifactory/bin/artifactoryManage.sh 

Is this generally safe?

 
{noformat}
    # JAVA_OPTIONS=""$JAVA_OPTIONS -Djfrog.join.key.paths=$JOIN_PATHS""
    # export CATALINA_OPTS=$JAVA_OPTIONS
    export JAVA_OPTIONS=""$JAVA_OPTIONS -Djfrog.join.key.paths=$JOIN_PATHS""
    export CATALINA_OPTS=""$CATALINA_OPTS -Djfrog.join.key.paths=$JOIN_PATHS""
{noformat}
 ","31/May/19 1:23 PM;joe.henshaw;Think it's better to update setenv.sh by removing the $JAVA_OPTIONS from the exported $CATALINA_OPTS variable in $ARTIFACTORY_HOME/tomcat/bin/setenv.sh file.","31/May/19 1:27 PM;joe.henshaw;I'm unable to link this to RTFACT-18923.",,,,,,
Concurrent requests for deployPlugin result in NPE,RTFACT-18837,69758,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yonatanb,yonatanb,24/Mar/19 3:47 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,User Plugins,,,,,,,0,,,,,,"When we try to run concurrent requests for deployPlugin REST API, we will receive eventually Null pointer exception.

To reproduce the behaviour, run the below against Artifactory

URL: [http://localhost:8080/artifactory/api/plugins/test?scriptName=]""test""
 Content-Type: text/x-groovy
 Body:
{code:java}
executions {
    dummyPlugin(users: ['anonymous']) {
        message = '{""status"":""okay""}'
        status = 200
    }
}
code}

Try to run the query a few times and fast, and you will encounter the below issue: 


{code:java}
2019-03-24 15:31:37,747 [http-nio-8081-exec-9] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null
	at org.artifactory.addon.plugin.PluginsAddonImpl.deployPlugin(PluginsAddonImpl.java:96)
	at org.artifactory.addon.rest.RestAddonImpl.deployPlugin(RestAddonImpl.java:1267)
	at sun.reflect.GeneratedMethodAccessor418.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
	at com.sun.proxy.$Proxy284.deployPlugin(Unknown Source)
	at org.artifactory.rest.resource.plugin.PluginsResource.deploy(PluginsResource.java:184)
	at sun.reflect.GeneratedMethodAccessor417.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
	at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywu7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Properties are not created within the directory creation which causes beforeDirectoryReplication to not replicate folders in certain condition ,RTFACT-18836,69756,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mohammadt,mohammadt,24/Mar/19 1:29 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,,,,,,,,1,QF,QF-P2,,,,"*Problem statement and Impact:*
When creating a new directory and specifying specific property at the creation command, it seems like if we have an event based replication and beforeDirectoryReplication block in a user plugin where this block triggers the replication only if we have this specific property on the folder, the property is not yet attached to the directory when calling the beforeDirectoryReplication block which causes the folder to not get replicated.

*Steps to reproduce:*

1. Configure event based replication for a local repo.
2. Configure the below user plugin:


{code:java}

import com.google.common.collect.HashMultimap
import com.google.common.collect.SetMultimap
import org.artifactory.repo.RepoPath

replication {
 beforeDirectoryReplication { localRepoPath ->
        SetMultimap<String, String> props = HashMultimap.create()
        props.put(""foo"", ""true"")
        List<RepoPath> found = searches.itemsByProperties(props,localRepoPath.getRepoKey())
        log.info(""Found items with property - "" + found.toString())
        if (found.contains(localRepoPath)) {
            log.info(""Replicating folder: ${localRepoPath.getPath()} as it has"" +
                     "" the right property"")
            skip = false
        } else {
            log.info(""Skipping replication of a folder:"" +
                     "" ${localRepoPath.getPath()} as it does not have the"" +
                     "" right property"")
            skip = true
        }
   }
}
{code}

This user plugin will trigger folder replication only if we have the foo=true property.

3. Create a folder with the ""foo=true"" property


{code:java}
curl -XPUT -u admin:password ""http://localhost:8081/artifactory/generic-local/test-folder/;foo=true""
{code}

You will notice that the folder has not been replicated and that it has been skipped, printing via the plugin the folders that have the property we get no results.


{code:java}
2019-03-24 15:17:23,750 [http-nio-8081-exec-4] [INFO ] (o.a.e.UploadServiceImpl:240) - MKDir request to 'generic-local:test-folder'
*2019-03-24 15:17:23,755 [http-nio-8081-exec-4] [INFO ] (replication         :26) - Found items with property - []*
*2019-03-24 15:17:23,756 [http-nio-8081-exec-4] [INFO ] (replication         :33) - Skipping replication of a folder: test-folder as it does not have the right property*
{code}


4. Create one more folder with the ""foo=true"" property:

{code:java}
curl -XPUT -u admin:password ""http://localhost:8081/artifactory/generic-local/test-folder-2/;foo=true"" 
{code}

We will skip again the replication of the new created folder, but now we will see that the previous directory from the previous creation command is in the list of the folders that have the property:

{code:java}
2019-03-24 15:17:35,103 [http-nio-8081-exec-9] [INFO ] (o.a.e.UploadServiceImpl:240) - MKDir request to 'generic-local:test-folder-2'
*2019-03-24 15:17:35,107 [http-nio-8081-exec-9] [INFO ] (replication         :26) - Found items with property - [generic-local:test-folder]*
2019-03-24 15:17:35,108 [http-nio-8081-exec-9] [INFO ] (replication         :33) - Skipping replication of a folder: test-folder-2 as it does not have the right property
{code}


*Actual results:*

beforeDirectoryReplication is triggered before the property is attached to the directory. while the property has been mentioned in the directory creation command.

*Expected results:*
beforeDirectoryReplication should be triggered only after the property is attached to the directory. We mention in the wiki:

https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CreateDirectory

Description: Create new directory at the specified destination.
Notes: You can also *attach properties as part of creating directories.*

*Workarounds:*

Run the replication manually again or wait until the cron expression is triggering the replication again.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywtr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
maven algorithm in replicator fail to handle manually packed jar ,RTFACT-18835,69752,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,galba,aviva,aviva,24/Mar/19 12:12 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"this issue is discovered during distribution of a jar file packed in house ""jruby-complete-1.7.26.jar""

when trying to distribute it replicator responded with 404 response code and fails to replicate.

should be a fallback when maven algorithm fail to break jar file. (try to replicate as generic)

error from distributor:
{code:java}
Http error response with status code: '500', when trying to replicate artifact 'scale300Mixed/org/jruby/jruby-complete/1.7.26/jruby-complete-1.7.26.jar' to edge node 'Node service id: jfrt@01d6dhbwtsahct1kew8mbh0cm0, url: http://35.244.101.147:8081/artifactory': Unexpected response from replicator, status: 404
{code}
jar location in entplus.jfrog.io:
{code:java}
https://entplus.jfrog.io/artifactory/webapp/#/artifacts/browse/tree/General/jcenter-cache/org/jruby/jruby-complete/1.7.26/jruby-complete-1.7.26.jar
{code}
 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywsv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Issues while pushing a docker images using genuinetools/img client to artifactory,RTFACT-18825,69714,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,sylvain,sylvain,21/Mar/19 6:43 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.5.9,,,,,,,,,,,,,,0,artifactory,docker,repository,,,"RTFACT-18583 : not solved.

[https://github.com/genuinetools/img/issues/128]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

Described in RTFACT-18583 marked as solved, but still not working.
Container images pushed by https://github.com/genuinetools/img is not working. Artifactory is not full ""docker registry"" compliant.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywl3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
UI login sessions saved on DB can cause slowness on HA environments,RTFACT-18822,69709,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,21/Mar/19 3:23 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.2.0,6.8.7,6.9.0,,,,,Web UI,,,,,,,0,,,,,,"*Summary:*

UI Requests bound to have user related information saved on the DB (UI_SESSION_ATTRIBUTES table) can cause high CPU utilization and slowness.

*Workaround:*

This is relevant for version above 6.2.0 and can be worked around by switching to LB stickiness + switching to a JVM session management instead:

*artifactory.map.provider.type=jvm*

* Should be placed on the primary node and requires a restart for all cluster nodes in order to take affect ",,,,,,,,,,,,,,,,,,,"21/Mar/19 8:32 PM;andreik;Screen Shot 2019-03-21 at 17.59.25.png;https://www.jfrog.com/jira/secure/attachment/31768/Screen+Shot+2019-03-21+at+17.59.25.png","21/Mar/19 4:21 PM;andreik;encodeBase58_thd.txt;https://www.jfrog.com/jira/secure/attachment/31765/encodeBase58_thd.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywjz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Content-Disposition does not return the filename accordingly for archived files,RTFACT-18820,69695,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Nimerb,Nimerb,21/Mar/19 9:18 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,,,,,,,,1,,,,,,"h2. Problem statement and Impact

The issue is that when requesting a file that is part of an archive (ZIP, WAR, JAR, etc) the header returned ""Content-Disposition"" does not return the ""filename"" accordingly.

If the content requested is a regular file, the filename is returned accordingly.
h2. Steps to reproduce

1 - Setup Artifactory with an archive file

2 - Request the file that is inside a ZIP

 

Run the following request:

{{curl -I ""http://localhost:8081/artifactory/generic-local/mysql-connector-java-8.0.12.zip\!/mysql-connector-java-8.0.12/src/build/misc/pom.xml""}}
h2. Actual results

HTTP/1.1 200 OK
Server: Artifactory/6.8.4
X-Artifactory-Id: 4b6edec8313e49ee:-11e4d92a:169966f6329:-8000
Last-Modified: Thu, 21 Mar 2019 08:34:53 GMT
ETag: 2a758af16c20f792032d0651dc873ba5d5f759a2
X-Checksum-Sha1: 2a758af16c20f792032d0651dc873ba5d5f759a2
X-Checksum-Sha256: dd7e3bfcd6c464b3a0242c9f224cb0625255910eaea9240c938d7a1dd563f889
X-Checksum-Md5: 697b153bfa85eeed8ea6dd8701959961
Accept-Ranges: bytes
X-Artifactory-Filename: mysql-connector-java-8.0.12/src/build/misc/pom.xml
*Content-Disposition: attachment; filename=""mysql-connector-java-8.0.12/src/build/misc/pom.xml""; filename*=UTF-8''mysql-connector-java-8.0.12/src/build/misc/pom.xml*
Content-Type: application/xml
Content-Length: 1080
Date: Thu, 21 Mar 2019 08:35:33 GMT
h2. Expected results

HTTP/1.1 200 OK
Server: Artifactory/6.8.4
X-Artifactory-Id: 4b6edec8313e49ee:-11e4d92a:169966f6329:-8000
Last-Modified: Thu, 21 Mar 2019 08:34:53 GMT
ETag: 2a758af16c20f792032d0651dc873ba5d5f759a2
X-Checksum-Sha1: 2a758af16c20f792032d0651dc873ba5d5f759a2
X-Checksum-Sha256: dd7e3bfcd6c464b3a0242c9f224cb0625255910eaea9240c938d7a1dd563f889
X-Checksum-Md5: 697b153bfa85eeed8ea6dd8701959961
Accept-Ranges: bytes
X-Artifactory-Filename: mysql-connector-java-8.0.12/src/build/misc/pom.xml
*Content-Disposition: attachment; filename=""pom.xml""; filename*=UTF-8''pom.xml*
Content-Type: application/xml
Content-Length: 1080
Date: Thu, 21 Mar 2019 08:35:33 GMT
h2. Workarounds 

The current workaround is to disable the response of the mentioned header by adding 

{{""artifactory.response.disableContentDispositionFilename=true"" to ${ART_HOME}/etc/artifactory.system.properties}}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywgv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
java.lang.IllegalStateException: getWriter() has already been called for this response,RTFACT-18816,69689,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,vlarionov,vlarionov,21/Mar/19 7:24 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,4,,,,,,"Standalone installation on SLES11SP4
{code:java}
java version ""1.8.0_181""
Java(TM) SE Runtime Environment (build 1.8.0_181-b25)
Java HotSpot(TM) 64-Bit Server VM (build 25.181-b25, mixed mode)
{code}
After upgrading 6.6.5 => 6.7.5 version I see a lot of errors in the catalina.out log
{code:java}
Mar 21, 2019 7:03:04 AM org.glassfish.jersey.server.ServerRuntime$Responder release
WARNING: Attempt to release request processing resources has failed for a request.
java.lang.IllegalStateException: getWriter() has already been called for this response
at org.apache.catalina.connector.Response.getOutputStream(Response.java:590)
at org.apache.catalina.connector.ResponseFacade.getOutputStream(ResponseFacade.java:194)
at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100)
at org.springframework.session.web.http.OnCommittedResponseWrapper.getOutputStream(OnCommittedResponseWrapper.java:138)
at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100)
at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100)
at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100)
at org.glassfish.jersey.servlet.internal.ResponseWriter.writeResponseStatusAndHeaders(ResponseWriter.java:180)
at org.glassfish.jersey.server.ServerRuntime$Responder$1.getOutputStream(ServerRuntime.java:652)
at org.glassfish.jersey.message.internal.CommittingOutputStream.commitStream(CommittingOutputStream.java:195)
at org.glassfish.jersey.message.internal.CommittingOutputStream.commitStream(CommittingOutputStream.java:189)
at org.glassfish.jersey.message.internal.CommittingOutputStream.commit(CommittingOutputStream.java:257)
at org.glassfish.jersey.message.internal.CommittingOutputStream.close(CommittingOutputStream.java:271)
at org.glassfish.jersey.message.internal.OutboundMessageContext.close(OutboundMessageContext.java:848)
at org.glassfish.jersey.server.ContainerResponse.close(ContainerResponse.java:413)
at org.glassfish.jersey.server.ServerRuntime$Responder.release(ServerRuntime.java:760)
at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:466)
at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:285)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:391)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:74)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:74)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:728)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:470)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:395)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:316)
at org.artifactory.webapp.servlet.RepoFilter.doRepoListing(RepoFilter.java:313)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:133)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:391)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:210)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:74)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)

{code}
Our instance is a bit loaded, serves about 700 requests PER SECOND, therefore, in the last 7 hours I have received over a _million_ such errors

At the same time it looks like it works fine. The server has been operating and serving clients for a week.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywfj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"01/Apr/19 6:24 AM;Maras;We use Artifactory as a rubygems repository for Chef. We see a lot of given errors in the log. Is there ETA for this error?","09/May/19 2:10 PM;sfaiz;We are having this similar issue and it is effecting a lrge number of our Jenkins builds that interacts with Artifactory. 

 
*/artifactory/api/gems/rubygems/versions* export
*ERROR*
Transaction type: 
Web
Transaction name: 
GET /artifactory/api/gems/*/*
Error: 
getWriter() has already been called for this response
exception
java.lang.IllegalStateException: getWriter() has already been called for this responseat org.apache.catalina.connector.Response.getOutputStream(Response.java:590) at org.apache.catalina.connector.ResponseFacade.getOutputStream(ResponseFacade.java:194) at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100) at org.springframework.session.web.http.OnCommittedResponseWrapper.getOutputStream(OnCommittedResponseWrapper.java:138) at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100) at javax.servlet.ServletResponseWrapper.getOutputStream(ServletResponseWrapper.java:100) at org.glassfish.jersey.servlet.internal.ResponseWriter.writeResponseStatusAndHeaders(ResponseWriter.java:180) at org.glassfish.jersey.server.ServerRuntime$Responder$1.getOutputStream(ServerRuntime.java:652) at org.glassfish.jersey.message.internal.CommittingOutputStream.commitStream(CommittingOutputStream.java:195) at org.glassfish.jersey.message.internal.CommittingOutputStream.commitStream(CommittingOutputStream.java:189) at org.glassfish.jersey.message.internal.CommittingOutputStream.write(CommittingOutputStream.java:223) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$UnCloseableOutputStream.write(WriterInterceptorExecutor.java:300) at org.codehaus.jackson.impl.Utf8Generator._flushBuffer(Utf8Generator.java:1754) at org.codehaus.jackson.impl.Utf8Generator.flush(Utf8Generator.java:1088) at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:1615) at org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:558) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.invokeWriteTo(WriterInterceptorExecutor.java:266) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:251) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163) at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:109) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163) at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:85) at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:163) at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1135) at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:662) at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:395) at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:385) at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:280) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272) at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268) at org.glassfish.jersey.internal.Errors.process(Errors.java:316) at org.glassfish.jersey.internal.Errors.process(Errors.java:298) at org.glassfish.jersey.internal.Errors.process(Errors.java:268) at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289) at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256) at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703) at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416) at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342) at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186) at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426) at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:305) at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208) at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:74) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164) at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80) at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800) at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800) at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471) at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) at java.lang.Thread.run(Thread.java:745)__
Start: 
2019-05-09 6:57:13.512 am (-04:00)
Duration: 
5.2 milliseconds
Request http method: 
GET
|Breakdown:|total (ms)|count|
|http request|5.2|1|
|jaxrs resource|1.9|1|
|logging|1.1|3|
|jdbc execute|0.55|1|
|jdbc get connection|0.0045|1|
| |
 
switch to tree view
JVM Thread Stats
CPU time: 4.8 milliseconds
Blocked time: 0.0 milliseconds
Waited time: 0.0 milliseconds
Allocated memory: 1.5 MB
 
Trace entries (6)
 
 
 
jaxrs resource: org.artifactory.addon.gems.GemsResource.install()
 
jdbc execution: SELECT * FROM nodes WHERE repo = ? AND node_path = ? AND node_name = ? ['rubygems-cache', '.', 'versions'] => 0 rows
 
log error: o.a.r.c.e.m.GlobalExceptionMapper - getWriter() has already been called for this response
*getWriter() has already been called for this response*
exception
 
*setStatus, HTTP status code 500*
location stack trace
 
log severe: o.g.j.server.ServerRuntime$Responder - Error occurred when processing a response created from an already mapped exception.
*Error occurred when processing a response created from an already mapped exception.*
location stack trace
 
log warning: o.g.j.server.ServerRuntime$Responder - Attempt to release request processing resources has failed for a request.
*getWriter() has already been called for this response*
exception",,,,,,,,,
Unable to setup the LDAP Connection,RTFACT-18815,69685,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Bhanu,Bhanu,21/Mar/19 7:16 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Hi Team ,

 

I am trying to setup the LDAP Connection but getting an below error while trying to save the LDAP setting in application.Please suggest me .",Artifactory Version -6.3.3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can't use the product altogether, certain processes are not working, can't use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywen:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"21/Mar/19 7:16 AM;Bhanu;!image-2019-03-21-12-46-25-667.png!","21/Mar/19 7:19 AM;Bhanu;Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed :Code
exception.Not trying again (Failed to reload Configuration:null)]


2019-03-20 13:00:01,664 [http-nio-8081-exec-2] [ERROR] (o.j.c.ExecutionUtils:89) - Last retry failed: code exception. Not trying again (Failed to reload configuration: null)
2019-03-20 13:00:01,665 [http-nio-8081-exec-2] [ERROR] (o.a.r.c.e.GlobalExceptionMapper:48) - Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: null)]
java.lang.IllegalStateException: Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: null)]
        at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:585)
        at org.artifactory.config.CentralConfigServiceImpl.saveEditedDescriptorAndReload(CentralConfigServiceImpl.java:514)
        at sun.reflect.GeneratedMethodAccessor964.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
        at com.sun.proxy.$Proxy136.saveEditedDescriptorAndReload(Unknown Source)
        at org.artifactory.ui.rest.service.admin.security.
.ldapsettings.CreateLdapSettingsService.createNewLdapSetting(CreateLdapSettingsService.java:60)
        at org.artifactory.ui.rest.service.admin.security.ldap.ldapsettings.CreateLdapSettingsService.execute(CreateLdapSettingsService.java:48)
        at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
        at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
        at org.artifactory.ui.rest.resource.admin.security.ldap.LdapSettingResource.createLdapSetting(LdapSettingResource.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:183)
        at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:93)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:433)
        at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:215)
        at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:168)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:66)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
        at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
        at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
        at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
        at java.lang.Thread.run(Thread.java:748)
Caused by: java.util.concurrent.ExecutionException: org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: null)
        at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)
        at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)
        at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:580)
        ... 73 common frames omitted
Caused by: org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: null)
        at org.jfrog.common.ExecutionUtils.handleStopError(ExecutionUtils.java:90)
        at org.jfrog.common.ExecutionUtils.lambda$generateExecutionRunnable$0(ExecutionUtils.java:50)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:111)
        at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:58)
        at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:75)
        at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:260)
        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
        at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:56)
        at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:36)
        at org.jfrog.common.ExecutionUtils.retry(ExecutionUtils.java:41)
        at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:572)
        ... 73 common frames omitted
Caused by: java.lang.RuntimeException: Failed to reload configuration: null
        at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContext(CentralConfigServiceImpl.java:642)
        at org.artifactory.config.CentralConfigServiceImpl.lambda$saveAndReloadContextWithRetry$0(CentralConfigServiceImpl.java:573)
        at org.jfrog.common.ExecutionUtils.handleFunctionExecution(ExecutionUtils.java:57)
        at org.jfrog.common.ExecutionUtils.lambda$generateExecutionRunnable$0(ExecutionUtils.java:48)
        ... 83 common frames omitted
Caused by: org.jfrog.security.crypto.exception.CryptoRuntimeException: null
        at org.jfrog.security.crypto.EncryptionWrapperBase.decryptFallback(EncryptionWrapperBase.java:195)
        at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:129)
        at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:115)
        at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:101)
        at org.jfrog.security.crypto.EncryptionWrapperBase.decryptIfNeeded(EncryptionWrapperBase.java:92)
        at org.jfrog.security.crypto.EncryptionWrapperBase.encryptIfNeeded(EncryptionWrapperBase.java:253)
        at org.artifactory.common.crypto.CryptoHelper.encryptIfNeeded(CryptoHelper.java:73)
        at org.artifactory.layout.EncryptConfigurationInterceptor.getNewPassword(EncryptConfigurationInterceptor.java:181)
        at org.artifactory.layout.EncryptConfigurationInterceptor.encryptOrDecrypt(EncryptConfigurationInterceptor.java:77)
        at org.artifactory.layout.EncryptConfigurationInterceptor.encrypt(EncryptConfigurationInterceptor.java:203)
        at org.artifactory.layout.EncryptConfigurationInterceptor.onBeforeSave(EncryptConfigurationInterceptor.java:193)
        at org.artifactory.config.ConfigurationChangesInterceptorsImpl.onBeforeSave(ConfigurationChangesInterceptorsImpl.java:43)
        at sun.reflect.GeneratedMethodAccessor965.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
        at com.sun.proxy.$Proxy181.onBeforeSave(Unknown Source)
        at org.artifactory.config.CentralConfigServiceImpl.preSaveDescriptor(CentralConfigServiceImpl.java:319)
        at org.artifactory.config.CentralConfigServiceImpl.saveDescriptorInternal(CentralConfigServiceImpl.java:338)
        at org.artifactory.co",,,,,,,,,
Delete,RTFACT-18809,69667,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Dudim,Dudim,20/Mar/19 2:36 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Problem statement and Impact

     <Describe the issue and how it impacts user (e.g. can’t use the product altogether, certain processes are not working, can’t use a functionality, etc.)>

Steps to reproduce

     <Also include: product version; installation setup which affects the issue (e.g. local storage w/ sharding), environment (OS, database, etc.)>

Actual results

Expected results

Workarounds (if any)

Customer impacted

Link(s) to environments or logs
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzywbb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
REST API to create or update permission targets allow us to enter duplicate include and exclude patterns,RTFACT-18803,69640,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,balajis,balajis,20/Mar/19 9:57 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,,,,,,,,0,,,,,,"REST API to create or update permission targets allow us to enter duplicate include and exclude patterns. 

 

Steps to reproduce : -

1) Run the below rest Api 

curl -u admin:password -XPUT ""http://localhost:8082/artifactory/api/v2/security/permissions/java-developers""  -H 'content-type: application/json'  -d @permissions.json

+*permissions.json*+

{
 ""name"": ""java-developers"",
 ""repo"": {
 ""include-patterns"": [ ""org/apache/**"", ""org/apache/**""],
 ""exclude-patterns"": [""""] ,
 ""repositories"": [""local-repo1"",""local-repo3"",""rpm-local"",""jcenter""],
 ""actions"": {
 ""users"" : {
 ""adam"": [""read"",""write"",""manage""]
 },
 ""groups"" : {
 ""users"" : [""manage"",""read"",""annotate""],
 ""readers"" : [""read""]
 }
 }
 } }

 

It will allow you to add duplicate include patterns for the first time.

 

3) Try to add the same include pattern through UI it warns us ""Value already exists""

 

REST API should not be allowed to add duplicate include and exclude patterns

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyw5j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
POST /api/chef/ returns 404 instead of 403 error,RTFACT-18788,69525,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valeriyp,valeriyp,17/Mar/19 12:04 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.8.7,,,,,,,Chef,,,,,,,1,QF,QF-P2,,,,"When uploading a cookbook to Artifactory (without *'Delete/Overwrite'* permissions) for a version that already exists will result in *_""404 Not Found""_* error:

*_artifactory.log:_*

{{20190317115512|8|REQUEST|82.81.195.5|user|POST|/api/chef/chef/api/v1/cookbooks/test.tgz|HTTP/1.1|404|2798}}


{code:title=$ knife artifactory share test|borderStyle=solid}
WARN: knife cookbook site share has been deprecated in favor of knife supermarket share. In Chef 16 (April 2020) this will result in an error!
Generating metadata for test from /var/folders/rb/sc2wmy3d1bl5byrmt2glgfwm0000gn/T/chef-test-build20190317-12893-1fhl8gn/test/metadata.rb
Making tarball test.tgz
Upload complete
{code}

{code:title=$ knife artifactory share test|borderStyle=solid}
WARN: knife cookbook site share has been deprecated in favor of knife supermarket share. In Chef 16 (April 2020) this will result in an error!
Generating metadata for test from /var/folders/rb/sc2wmy3d1bl5byrmt2glgfwm0000gn/T/chef-test-build20190317-12980-1bh63ax/test/metadata.rb
Making tarball test.tgz
ERROR: Error uploading cookbook test to Supermarket: 404 ""Not Found"". Increase log verbosity (-VV) for more information.
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Test Template,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyvfj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Native ui - package view repo is missing and wrong last modified date,RTFACT-18785,69509,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,evgenid,moshey,moshey,17/Mar/19 9:05 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,MDS,,,,,Eli M: Will not be part of the version,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Test Template,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyvc7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot delete builds or build info json artifacts if the binary is missing,RTFACT-18775,69472,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,14/Mar/19 10:29 PM,06/Jan/21 3:10 PM,18/Feb/21 8:59 AM,,6.7.1,6.8.3,,,,,,,,,,,,,4,,,,,,"Steps to reproduce:

-deploy a build

-remove the binary from the file store for the build-info.json for that build

-try to delete the build in the UI, and see that you will get a 500 error:

""status"" : 500,

    ""message"" : ""Could not process download request: sharding-cluster can't locate 1a3a95462c8a601f4c9cf6e37d0e2ab5241cd320 in any of it's sub providers ""

or ""binary provider has no content""

-this makes it so that you cant remove the build from the DB, and cannot fix the above ""binary provider has no content"" errors.",,,,,,,,,,,,,,,,RTFACT-21101,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Test Template,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyv4v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"17/Mar/20 8:32 PM;mattheww;workaround:
You can create the sha1 binary file in the file system, and then add the following name, number, and started fields:
{

  ""name"" : ""My-build-name"",

  ""number"" : ""28"",

  ""started"" : ""2014-09-30T12:00:19.893+0300""

 

}

I don't believe the values for the name/number/started matter.

For example, if my build for My-build-name # 28 has sha1 sum of acc5ded0f508ecd9ef4fe1b0208144f16acd1c7a, I can create a file in the filestore under filestore/ac/acc5ded0f508ecd9ef4fe1b0208144f16acd1c7a with the contents above. Then, I will be able to delete the build info json from the build-info repository in the UI.",,,,,,,,,,
Remote repository [https://download.arangodb.com/ ]  is not supported? or bug ?,RTFACT-18774,69467,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,14/Mar/19 6:10 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,Remote Repository ,,,,,,,1,,,,,,"When we set remote repository as https://download.arangodb.com/ in Artifactory and we can see below.

It seems like we don't support the remote repository yet or is this bug ?
Otherwise, please provide us with ETA.


2019-03-07 22:37:47,341 [http-nio-8081-exec-2] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Failed to build dom document
java.lang.RuntimeException: Failed to build dom document
	at org.artifactory.util.XmlUtils.parse(XmlUtils.java:55)
	at org.artifactory.repo.remote.browse.S3RepositoryBrowser.detectRootUrl(S3RepositoryBrowser.java:142)
	at org.artifactory.repo.remote.browse.S3RepositoryBrowser.listContent(S3RepositoryBrowser.java:94)
	at org.artifactory.repo.HttpRepo.getChildUrls(HttpRepo.java:900)
	at org.artifactory.repo.RemoteRepoBase.listRemoteResources(RemoteRepoBase.java:1017)
	at org.artifactory.repo.service.RepositoryBrowsingServiceImpl.listRemoteBrowsableChildren(RepositoryBrowsingServiceImpl.java:270)
	at org.artifactory.repo.service.RepositoryBrowsingServiceImpl.getRemoteRepoBrowsableChildrenData(RepositoryBrowsingServiceImpl.java:261)
	at org.artifactory.repo.service.RepositoryBrowsingServiceImpl.getRemoteRepoBrowsableChildren(RepositoryBrowsingServiceImpl.java:213)
	at org.artifactory.ui.rest.model.artifacts.browse.treebrowser.nodes.JunctionNode.getChildren(JunctionNode.java:111)
	at org.artifactory.ui.rest.model.artifacts.browse.treebrowser.nodes.JunctionNode.fetchItemTypeData(JunctionNode.java:90)
	at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.tree.BrowseTreeNodesService.execute(BrowseTreeNodesService.java:41)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.artifacts.browse.treebrowser.tree.TreeBrowserResource.browseTreeNodes(TreeBrowserResource.java:54)
	at sun.reflect.GeneratedMethodAccessor254.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.jdom2.input.JDOMParseException: Error on line 1: Content is not allowed in prolog.
	at org.jdom2.input.sax.SAXBuilderEngine.build(SAXBuilderEngine.java:232)
	at org.jdom2.input.sax.SAXBuilderEngine.build(SAXBuilderEngine.java:303)
	at org.jdom2.input.SAXBuilder.build(SAXBuilder.java:1196)
	at org.artifactory.util.XmlUtils.parse(XmlUtils.java:53)
	... 80 common frames omitted
Caused by: org.xml.sax.SAXParseException: Content is not allowed in prolog.
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:203)
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:400)
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)
	at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1472)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:994)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:602)
	at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:505)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:842)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:771)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
	at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)
	at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:643)
	at org.jdom2.input.sax.SAXBuilderEngine.build(SAXBuilderEngine.java:217)
	... 83 common frames omitted
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Test Template,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyv3r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Tasks doesn't resume other tasks they have paused, in case they never actually run",RTFACT-18770,69447,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,14/Mar/19 1:55 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,7,PB_Done,,,,,"The tasks in Artifactory have different priorities.
For example, the Garbage Collection task is prioritized higher than Archive Indexer.
Therefore, when GC is about to run, it pauses the Archive Indexer task.
Once the GC finishes, it resumes the Archive Indexing.

However, there are situations were GC pauses Archive Indexer as it is about to run.
Then, GC is unable to start because Archive Indexer is still running( the way it pauses it, is to say don't archive new files, but if current file indexing is taking a long time, GC will be unable to start).
As the GC never actually runs, it doesn't reach the ""resume"" phase, and therefore the Archive Indexer will be stopped/paused forever (until next restart).


*+Steps to Reproduce+*
(We have encountered this in a default environment, the below steps are to easier reproduce this)
For better reviewing the behavior, these debug loggers can be added:
{code:java}
<logger name=""org.artifactory.search.archive"">
	<level value=""trace""/>
</logger>
<logger name=""org.artifactory.schedule"">
	<level value=""trace""/>
</logger>
{code}

1. Set these system properties:
{code:java}
artifactory.task.completionLockTimeoutRetries=1
artifactory.locks.timeoutSecs=1
{code}
2. Configure GC to run as frequent as possible ""0 0/1 * 1/1 * ? *"".
3. Deploy lots of ZIP files (I have ~200). It is important to have big zip files that archiving them will take over 1 minute. I used CLI to quickly upload them using this command:
{code:java}
 ./jfrog rt u ""*.zip"" generic-local
{code}
4. While ZIPs are being uploaded try to trigger GC via the UI several times.

You will see in the logs that Archive Indexing will be paused and GC can run:

{code:java}
2019-03-14 11:43:32,387 [http-nio-8081-exec-7] [WARN ] (o.a.s.TaskServiceImpl:329) - Task org.artifactory.search.archive.ArchiveIndexerImpl$ArchiveIndexJob will be paused by running org.artifactory.storage.binstore.service.BinaryStoreGarbageCollectorJob !
2019-03-14 11:43:32,388 [http-nio-8081-exec-7] [DEBUG] (o.a.s.TaskServiceImpl:337) - Task org.artifactory.storage.binstore.service.BinaryStoreGarbageCollectorJob can run.
2019-03-14 11:43:32,389 [http-nio-8081-exec-7] [TRACE] (o.a.s.TaskBase      :484) - Thread Thread[http-nio-8081-exec-7,5,main] trying lock (activeLocks=0) on artifactory.BinaryStoreGarbageCollectorJob#2f6a9e1c-d3ed-469e-ada1-7664cf979eb6
2019-03-14 11:43:32,390 [http-nio-8081-exec-7] [TRACE] (o.a.s.TaskBase      :470) - Changing state: artifactory.BinaryStoreGarbageCollectorJob#2f6a9e1c-d3ed-469e-ada1-7664cf979eb6: VIRGIN-->SCHEDULED
2019-03-14 11:43:32,390 [http-nio-8081-exec-7] [TRACE] (o.a.s.TaskBase      :447) - Entering wait for next step from SCHEDULED on: artifactory.BinaryStoreGarbageCollectorJob#2f6a9e1c-d3ed-469e-ada1-7664cf979eb6
{code}

However, when GC is about to run it will fail because there is archive indexing in the background:
{code:java}
2019-03-14 11:43:33,393 [art-exec-288] [WARN ] (o.a.s.TaskCallback  :90) - Couldn't start task artifactory.BinaryStoreGarbageCollectorJob#2f6a9e1c-d3ed-469e-ada1-7664cf979eb6: Timeout after 1 seconds when trying to wait for next state in 'PAUSING'.
2019-03-14 11:43:33,393 [http-nio-8081-exec-7] [ERROR] (o.a.s.s.StorageServiceImpl:249) - Error activating Artifactory Storage Garbage Collector: Timeout after 1 seconds when trying to wait for next state in 'SCHEDULED'.: Timeout after 1 seconds when trying to wait for next state in 'SCHEDULED'.
{code}

After the above log entry, as the GC task has paused the Archive Indexing and never resumed it, Archive Indexing has stopped and will not be resumed.

In order to resume the Archive Indexing a restart is required.
Until restarting, you will see errors as below:

{code:java}
2019-03-14 11:43:52,337 [art-exec-273] [ERROR] (o.a.s.a.ArchiveIndexerImpl:197) - Exception indexing generic-local:support-bundle-20180403-0530133-1522751413337-artifactory-lon02-02-node-03.zip
org.artifactory.concurrent.LockingException: Task artifactory.ArchiveIndexJob#7ca06371-6057-47b4-bdda-76d62b1a1ab6 paused for more than 1 times.
	at org.artifactory.schedule.TaskBase.blockIfPausedAndShouldBreak(TaskBase.java:287)
	at org.artifactory.schedule.TaskServiceImpl.pauseOrBreak(TaskServiceImpl.java:574)
	at sun.reflect.GeneratedMethodAccessor368.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
	at com.sun.proxy.$Proxy143.pauseOrBreak(Unknown Source)
	at org.artifactory.search.archive.ArchiveIndexerImpl.shouldStop(ArchiveIndexerImpl.java:210)
	at org.artifactory.search.archive.ArchiveIndexerImpl.triggerQueueIndexing(ArchiveIndexerImpl.java:192)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
	at com.sun.proxy.$Proxy224.triggerQueueIndexing(Unknown Source)
	at org.artifactory.search.archive.ArchiveIndexerImpl$ArchiveIndexJob.onExecute(ArchiveIndexerImpl.java:321)
	at org.artifactory.schedule.quartz.QuartzCommand.execute(QuartzCommand.java:48)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:30)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:748)
{code}

If you get the output of the Background Tasks API, you will see the task is paused/stopped

{code:java}
{
    ""id"" : ""artifactory.ArchiveIndexJob#7ca06371-6057-47b4-bdda-76d62b1a1ab6"",
    ""type"" : ""org.artifactory.search.archive.ArchiveIndexerImpl$ArchiveIndexJob"",
    ""state"" : ""stopped"",
    ""description"" : ""Archive Files Indexer""
  },
{code}
OR

{code:java}
{
    ""id"" : ""artifactory.ArchiveIndexJob#c7d773a7-87af-4ccb-a5f0-dd2791767e99"",
    ""type"" : ""org.artifactory.search.archive.ArchiveIndexerImpl$ArchiveIndexJob"",
    ""state"" : ""paused"",
    ""description"" : ""Archive Files Indexer"",
    ""nodeId"" : ""art-1544113846""
  }
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Test Template,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyuz3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"31/Mar/20 11:00 AM;timakamystery;any ETA?",,,,,,,,,,
Startup animation on portrait monitor is cut off,RTFACT-18766,69437,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tdillon,tdillon,14/Mar/19 12:20 PM,07/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.8.6,,,,,,,,,,,,,,0,,,,,,"While Artifactory is starting up, the ""JFrog Artifactory is getting ready to work..."" animation is displayed.  On a monitor that is in portrait orientation with the browser maximized, only the left 15% (or so) of the animation is visible.  There is a horizontal scroll bar, but I don't think that is the desired method of viewing your outstanding animation.","* Artifactory Pro 6.8.6
 * Viewing the startup animation using the latest version of Chrome on Windows 10",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyux3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
API Docs Permission Target Version Mismatch,RTFACT-18764,69432,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,william.dee.arm,william.dee.arm,14/Mar/19 11:45 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,Documentation,permissions,REST API,,,,,5,api,documentation,ErrorMessage,,,"The [Artifactory API docs|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CreateorReplacePermissionTarget] for the creation/modification of permission targets reference the [V2 API JSON payload|https://www.jfrog.com/confluence/display/RTF/Security+Configuration+JSON#SecurityConfigurationJSON-application/vnd.org.jfrog.artifactory.security.PermissionTarget+json] format but dictate the V1 endpoint URL. Despite implying compatibility with both formats, an error is thrown, whose message is not helpful:
{code:java}
# my-permission.json
{
  ""name"":""my-permission"",
  ""repo"": {
    ""repositories"":[""repo-local""],
    ""actions"": {
      ""users"": {
        ""my-user"":[""read""]
      }
    }
  },
  ""build"": {
    ""repositories"":[""artifactory-build-info""],
    ""actions"": {
      ""users"": {
        ""my-user"":[""read""]
      }
    }
  }
}
# Steps to reproduce
$ curl -d @my-permission.json $ARTIFACTORY_BASE/artifactory/api/security/permissions/my-permission
{
  ""errors"" : [ {
    ""status"" : 400,
    ""message"" : ""Permission target request missing repositories.""
  } ]
}
# Sending the same request to the v2 endpoint works
$ curl -d @my-permission.json $ARTIFACTORY_BASE/artifactory/api/v2/security/permissions/my-permission{code}
Also, it is strange that you must specify the repositories for build permissions even though there is a default value that you can't change.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyuw7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Mar/19 2:04 PM;william.dee.arm;Another thing of note is the change in response codes between the v1 and v2 APIs:

When creating a permission target in v1, a 201 is returned whereas in v2 it is 200.

An unauthorised request in v1 returns a 401 but for the v2 API it is 500.","15/May/19 10:03 AM;fedotenko;Any news on when this is expected to be fixed. Its a stopper for us. We need to be able to use the API to set BuildPermissions.

 

Please refer to our ticket: 102360","15/May/19 10:07 AM;william.dee.arm;You should still be able to use the v2 endpoint to set build permissions. The API is there, it's just that the docs weren't correct. You can find the v2 API docs for permission targets here:https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API+V2#ArtifactoryRESTAPIV2-CreatePermissionTarget",,,,,,,,
Intermittent slowdown for maven-metadata.xml download,RTFACT-18763,69431,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,colferai,colferai,14/Mar/19 11:36 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.6.5,,,,,,,,,,,,,,1,,,,,,"We migrated to the Artifactory a few days ago and noticed an intermittent slowdown in the maven-metadata.xml download on some builds. It seems that the problem occurs every 30 minutes and when it occurs they greatly hinder the construction time.

The whole environment is in AWS (Jenkins, Artifactory and slaves). We tested with Nexus in this environment and the problem does not occur.

We followed the [link|https://jfrog.com/blog/monitoring-and-optimizing-artifactory-performance] performance instructions to try a solution, but were unsuccessful.","  Artifactory Server 4 core and 16GB  
    - Artifactory OSS ver. 6.6.5 rev 60605900
    - OS - Ubuntu 18
    - Java 1.8.0_201
  Build environment
    - Maven 3.3.3
    - Java 1.7.0_75",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyuvz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Mar/19 11:27 AM;colferai;We changed the Missed Retrieval Cache Period parameter, which expires the cache of the configured proxies, and the behavior of slowness has changed. The default value for this parameter was 1800 seconds, and each time the process executes the Artifactory gets slow in responses.  We changed to 12 hours and the result was good.

I believe the problem occurred in our environment because we have many proxies configured.",,,,,,,,,,
"File beginning with ""._"" is always rejected/excluded.",RTFACT-18761,69405,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,julienvaslet,julienvaslet,13/Mar/19 6:00 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.7.1,,,,,,,Include/Exclude Patterns,Upload,,,,,,0,artifactory,repository,,,,"Hello,

I am trying to store an Xcode project workspace in my Artifactory installation and I am experiencing a problem while uploading the files. Some filenames begin with ""._"" like a binary file named ""._build"". A ""409 Conflict"" error is thrown during this file upload.

My repository have no exclusion pattern - it is a generic repository with default configuration. An error also happens when trying to access the file even if it does not exists in the repository.

Here are some example with simplified URLs:
 * https://<artifactory url>/artifactory/generic-repository/.build
 ** Returns a 404, File not found.
 * https://<artifactory url>/artifactory/generic-repository/_build
 ** Returns a 404, File not found.
 * https://<artifactory url>/artifactory/generic-repository/._build
 ** Returns a 404, The repository 'generic-repository' rejected the artifact 'generic-repository:._build' due to its include/exclude pattern settings.

I did not found any configuration that could explain this exclusion.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyuq7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
rpm.metadata properties don't get generated,RTFACT-18758,69393,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,georgestockfisch,georgestockfisch,13/Mar/19 1:08 PM,07/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,Metadata,,,,,,,1,,,,,,"When I publish a rpm to a yum repo, with properties the rpm.metadata doesn't get generated until I click the ""rpm info"" tab in the web ui. So after publishing a rpm, if I go to the ""properties"" tab, there is no rpm.metadata.name property. Then I click the ""rpm info"" tab, then go back to the properties tab, and now I see rpm.metadata.name property populated. This shows up when making api calls. After I publish a rpm, a 

curl --s 'https://arti.server/artifactory/api/search/prop?rpm.metadata.name=my_rpm_name*&branch.name=my_branch&repos=my--repo--name'

doesn't return any rpms. Once I click the ""rpm info"" tab in the GUI, then the same curl command returns results. This breaks all my builds that make curl calls, since I can't curl anything from the server if nothing gets returned to me",server is centos 7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyunr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Mar/19 3:02 PM;georgestockfisch;Sigh. Looks like a full root disk cause rpm indexing to fail, which caused the props to not get updated. None of the artifactory data is not stored on the root disk, so I'm not sure what artifactory process is writing to the root disk during the index operation. ",,,,,,,,,,
"""go build"" not working with non git tagged modules",RTFACT-18757,69392,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ghe.rivero,ghe.rivero,13/Mar/19 1:03 PM,07/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.7.3,,,,,,,Go,,,,,,,0,go,golang,,,,"Using a non tagged module with ""go build"" fails with a 404.

Ex.

go.mod:

require github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b

GOPROXY=""https://user:pass@artifacts.domain.com/api/go/go-domain""

{{$ go build}}
{{ go: finding github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b}}
{{ go: github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b: unexpected status (https://user:pass@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/23def4e6c14b.mod): 404 Not Found}}
{{ go: error loading module requirements}}

But using jfrog cli works:

{{JFROG_CLI_LOG_LEVEL=DEBUG jfrog rt go build go-domain --url=https://artifacts.domain.com/ --user=user --password=pass}}
{{ The CLI commands require the Artifactory URL and authentication details}}
{{ Configuring JFrog CLI with these parameters now will save you having to include them as command options.}}
{{ You can also configure these parameters later using the 'config' command.}}
{{ Configure now? (y/n): n}}
{{ [Info] Using go: go version go1.12 darwin/amd64}}{{[Debug] Initializing protocol regexp}}
{{ [Debug] Initializing not found regexp}}
{{ [Debug] Initializing unrecognized import path regexp}}
{{ [Debug] Initializing unknown revision regexp}}
{{ go: finding github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b}}
{{ go: github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b: unexpected status (https://***.***@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/23def4e6c14b.mod): 404 Not Found}}
{{ [Info] Received 404 Not Found:github.com/golang/glog@v0.0.0-20160126235308-23def4edomain6c14b from Artifactory. Trying to download dependencies from VCS...}}
{{ [Debug] Trying download the dependencies from the VCS...}}
{{ [Debug] Sum file exists: /Users/ghe.rivero/code/github.com/gherivero/hello}}
{{ [Debug] Removing file: /Users/ghe.rivero/code/github.com/gherivero/hello/go.sum}}
{{ [Info] Running 'go mod graph' in /Users/ghe.rivero/code/github.com/gherivero/hello}}
{{ go: finding github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b}}
{{ github.com/GheRivero/hello github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b}}
{{ [Debug] github.com/GheRivero/hello github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b}}{{[Debug] Restoring file: /Users/ghe.rivero/code/github.com/gherivero/hello/go.sum}}
{{ [Debug] Sum file exists: /Users/ghe.rivero/code/github.com/gherivero/hello}}
{{ [Debug] Removing file: /Users/ghe.rivero/code/github.com/gherivero/hello/go.sum}}
{{ [Debug] Artifactory head request response for https://artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.mod : 404}}
{{ [Debug] Downloading dependency from VCS: github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b}}
{{ [Debug] Running go mod download -json github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b}}
{{ {}}
{{ ""Path"": ""github.com/golang/glog"",}}
{{ ""Version"": ""v0.0.0-20160126235308-23def4e6c14b"",}}
{{ ""Info"": ""/Users/ghe.rivero/go/pkg/mod/cache/download/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.info"",}}
{{ ""GoMod"": ""/Users/ghe.rivero/go/pkg/mod/cache/download/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.mod"",}}
{{ ""Zip"": ""/Users/ghe.rivero/go/pkg/mod/cache/download/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.zip"",}}
{{ ""Dir"": ""/Users/ghe.rivero/go/pkg/mod/github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b"",}}
{{ ""Sum"": ""h1:VKtxabqXZkF25pY9ekfRL6a582T4P37/31XEstQ5p58="",}}
{{ ""GoModSum"": ""h1:SBH7ygxi8pfUlaOkMMuAQtPIUF8ecWP5IEl/CR7VP2Q=""}}
{{ }}}
{{ [Debug] Restoring file: /Users/ghe.rivero/code/github.com/gherivero/hello/go.sum}}
{{ [Info] Publishing: github.com/golang/glog:v0.0.0-20160126235308-23def4e6c14b to go-domain:1/1}}
{{ [Debug] The Artifactory version is: 6.7.3}}
{{ [Info] Done building and publishing 1 go dependencies to Artifactory out of a total of 1 dependencies.}}

 

Once cached, (using jfrog cli), “go build” is still facing problems.

Manually testing with curl:

{{$ curl https://user:AKCp5cbwZMTWb5mmvGFWpa54MXSQb3rk7WSbj19GnRLC3aQdre1PaPscgykkkCHQjgPRZiw9k@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/23def4e6c14b.mod}}{{{""error"": ""not_found"", ""reason"": ""document not found""}%}}

But if we use the full module version: (v0.0.0-20160126235308-23def4e6c14b.mod vs 23def4e6c14b.mod)

{{$ curl https://user:AKCp5cbwZMTWb5mmvGFWpa54MXSQb3rk7WSbj19GnRLC3aQdre1PaPscgykkkCHQjgPRZiw9k@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.mod}}{{module github.com/golang/glog}}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyunj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"13/Mar/19 1:42 PM;ghe.rivero;More info: The mismatched version strings, came from the .info file

 

$go build -v
go: finding github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b
Fetching https://user:pass@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.info
Fetching https://user:pass@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/23def4e6c14b.mod
go: github.com/golang/glog@v0.0.0-20160126235308-23def4e6c14b: unexpected status (https://user:pass@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/23def4e6c14b.mod): 404 Not Found
go: error loading module requirements

$ curl https://user:pass@artifacts.domain.com/api/go/go-domain/github.com/golang/glog/@v/v0.0.0-20160126235308-23def4e6c14b.info
{
 ""Name"" : ""23def4e6c14b4da8ac2ed8007337bc5eb5007998"",
 ""Short"" : ""23def4e6c14b"",
 ""Version"" : ""23def4e6c14b"",
 ""Time"" : ""2016-01-26T23:53:08Z""
}%

 

From a working module:

$curl https://user:pass@artifacts.domain.com/api/go/go-domain/rsc.io/quote/@v/v1.5.2.info
{
 ""Name"" : ""c4d4236f92427c64bfbcf1cc3f8142ab18f30b22"",
 ""Short"" : ""c4d4236f9242"",
 ""Version"" : ""v1.5.2"",
 ""Time"" : ""2018-02-14T15:44:20Z""
}%",,,,,,,,,,
Artifactory does not validate metadata in the $ART_HOME/data/.cache,RTFACT-18754,69369,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,12/Mar/19 7:46 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,Debian,,,,,,,1,QF,QF-P3,,,,"Symptoms: The Debian ""Packages"" file contains only the checksum and filepath, but not the actual Debian metadata information.

 

Steps to reproduce:
 # Have a local Debian repository with valid packages and metadata
 # Navigate to $ARTIFACTORY_HOME/data/.cache/debian/<Path_to_deb>/
 # Remove the *.deb file 
It is a text file containing the Debian package metadata for faster recalculation speeds
 # Touch a new, empty *.deb file with the exact same filename
 # Download the Packages file
 # Recalculate Debian indexes
 # Re-download the Packages file
 # Observe that the new Packages file does +not+ contain required Debian information

Artifactory should validate its debian cache or produce an error when processing 0 byte files. Currently the workaround is to clear the repository folder within the .cache/debian directory.

(Working .cache)

./pool/main/x/x11-xserver-utils-lts-quantal:
total 4
-rw-r----- 1 root root 2207 Mar 12 18:58 x11-xserver-utils-lts-quantal_7.7~3ubuntu1~precise1_amd64.deb

 

(Broken .cache)
./debian/debian-local/pool/main/x/x11-xserver-utils-lts-quantal:
total 0
-rw-r--r-- 1 root root 0 Mar 12 19:19 x11-xserver-utils-lts-quantal_7.7~3ubuntu1~precise1_amd64.deb


 

(Working Packages file)

Package: x11-xserver-utils-lts-quantal
Version: 7.7~3ubuntu1~precise1
Architecture: amd64
Maintainer: Ubuntu X-SWAT <ubuntu-x@lists.ubuntu.com>
Installed-Size: 156
Depends: libc6 (>= 2.14), libx11-6, libxrandr-ltsq2 (>= 2:1.4.0), cpp, x11-xserver-utils (>= 0~)
Suggests: nickle, cairo-5c, xorg-docs-core
Conflicts: iceauth, sessreg, x11-xserver-utils-renamed, xgamma, xhost, xmodmap, xrandr, xrdb, xrefresh, xrgb, xset, xsetmode, xsetpointer, xsetroot, xstdcmap, xvidtune
Replaces: iceauth, sessreg, xbase-clients (<< 1:7.3), xgamma, xhost, xmodmap, xrandr, xrdb, xrefresh, xrgb, xset, xsetmode, xsetpointer, xsetroot, xstdcmap, xutils (<< 1:7.2), xvidtune
Provides: x11-xserver-utils-renamed, xorg-renamed-package, xorg-renamed-package-lts-quantal
Section: x11
Priority: optional
Description: X server utilities
 An X client is a program that interfaces with an X server (almost always via
 the X libraries), and thus with some input and output hardware like a
 graphics card, monitor, keyboard, and pointing device (such as a mouse).
 .
 This package provides a miscellaneous assortment of X Server utilities
 that ship with the X Window System, including:
 - iceauth, a tool for manipulating ICE protocol authorization records;
 - rgb;
 - sessreg, a simple program for managing utmp/wtmp entries;
 - xcmsdb, a device color characteristic utility for the X Color Management
 System;
 - xgamma, a tool for querying and setting a monitor's gamma correction;
 - xhost, a very dangerous program that you should never use;
 - xmodmap, a utility for modifying keymaps and pointer button mappings in X;
 - xrandr, a command-line interface to the RandR extension;
 - xrdb, a tool to manage the X server resource database;
 - xrefresh, a tool that forces a redraw of the X screen;
 - xset, a tool for setting miscellaneous X server parameters;
 - xsetmode and xsetpointer, tools for handling X Input devices;
 - xsetroot, a tool for tailoring the appearance of the root window;
 - xstdcmap, a utility to selectively define standard colormap properties;
 - xvidtune, a tool for customizing X server modelines for your monitor.
Original-Maintainer: Debian X Strike Force <debian-x@lists.debian.org>
Filename: pool/main/x/x11-xserver-utils-lts-quantal/x11-xserver-utils-lts-quantal_7.7~3ubuntu1~precise1_amd64.deb
SHA1: 3dcd7585fb0c4f2bfda874e771ae2e495e953501
SHA256: 6a373d183cd2ed5a087a0bfa3a99fe187d3873f80ada8e95041c4f25486800e5
Size: 38270

(Broken Packages file)

Filename: pool/main/x/x11-xserver-utils-lts-quantal/x11-xserver-utils-lts-quantal_7.7~3ubuntu1~precise1_amd64.deb
SHA1: 3dcd7585fb0c4f2bfda874e771ae2e495e953501
SHA256: 6a373d183cd2ed5a087a0bfa3a99fe187d3873f80ada8e95041c4f25486800e5
Size: 38270

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzzo6k:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Helm delete gives NPE when an 'afterDelete' callback is used in plugin ,RTFACT-18743,69332,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Disham,Disham,12/Mar/19 10:17 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,,,,,,,,1,QF,QF-P2,,,,"Hi,
We have an issue where Helm delete is throwing a NPE when an 'afterDelete' callback is used in plugin.

Steps to reproduce:
 - Create an Helm repositories with multiple charts
 - Create an afterDelete user plugin (attached herewith)
 - Install the plugin
 - Delete an Helm chart
 - The log should contain the stack trace below


{noformat}
[ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null
{noformat}
",,,,,,,,,,,,,,,,,,,"12/Mar/19 10:17 AM;Disham;afterDelete.groovy;https://www.jfrog.com/jira/secure/attachment/31681/afterDelete.groovy",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyucv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Mar/19 3:57 PM;arielk;
{code:java}
2019-03-11 12:06:05,834 [http-nio-8081-exec-249] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - null

java.lang.NullPointerException: null

    at org.artifactory.addon.helm.HelmAddonImpl.removeHelmPackage(HelmAddonImpl.java:77)

    at org.artifactory.addon.helm.repo.interceptor.HelmMetadataInterceptor.afterDelete(HelmMetadataInterceptor.java:46)

    at org.artifactory.repo.interceptor.storage.StorageInterceptorsImpl.afterDelete(StorageInterceptorsImpl.java:112)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

    at java.lang.reflect.Method.invoke(Method.java:498)

    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

    at com.sun.proxy.$Proxy154.afterDelete(Unknown Source)

    at org.artifactory.storage.db.fs.model.DbMutableItem.fireAfterDeleteEvent(DbMutableItem.java:369)

    at org.artifactory.storage.db.fs.model.DbMutableFile.delete(DbMutableFile.java:214)

    at org.artifactory.repo.db.DbStoringRepoMixin.undeploy(DbStoringRepoMixin.java:728)

    at org.artifactory.repo.db.DbLocalRepo.undeploy(DbLocalRepo.java:204)

    at org.artifactory.repo.service.RepositoryServiceImpl.undeployInTx(RepositoryServiceImpl.java:1375)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

    at java.lang.reflect.Method.invoke(Method.java:498)

    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)

    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)

    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)

    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)

    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)

    at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)

    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)

    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)

    at com.sun.proxy.$Proxy147.undeployInTx(Unknown Source)

    at org.artifactory.repo.service.RepositoryServiceImpl.deleteSingleLeaf(RepositoryServiceImpl.java:1367)

    at org.artifactory.repo.service.RepositoryServiceImpl.undeploySingleItemTransactions(RepositoryServiceImpl.java:1335)

    at org.artifactory.repo.service.RepositoryServiceImpl.undeployMultiTransaction(RepositoryServiceImpl.java:1319)

    at org.artifactory.repo.service.RepositoryServiceImpl.undeployMultiTransaction(RepositoryServiceImpl.java:187)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

    at java.lang.reflect.Method.invoke(Method.java:498)

    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)

    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)

    at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)

    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)

    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)

    at com.sun.proxy.$Proxy147.undeployMultiTransaction(Unknown Source)

    at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.actions.DeleteArtifactService.deleteArtifact(DeleteArtifactService.java:79)

    at org.artifactory.ui.rest.service.artifacts.browse.treebrowser.actions.DeleteArtifactService.execute(DeleteArtifactService.java:53)

    at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)

    at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)

    at org.artifactory.ui.rest.resource.artifacts.browse.treebrowser.actions.ArtifactActionsResource.deleteArtifact(ArtifactActionsResource.java:127)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

    at java.lang.reflect.Method.invoke(Method.java:498)

    at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)

    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)

    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)

    at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)

    at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)

    at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)

    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)

    at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)

    at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)

    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)

    at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)

    at org.glassfish.jersey.internal.Errors.process(Errors.java:316)

    at org.glassfish.jersey.internal.Errors.process(Errors.java:298)

    at org.glassfish.jersey.internal.Errors.process(Errors.java:268)

    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)

    at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)

    at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)

    at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)

    at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)

    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)

    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)

    at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:201)

    at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:178)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)

    at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)

    at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)

    at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)

    at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)

    at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)

    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)

    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)

    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)

    at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)

    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)

    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)

    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)

    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)

    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)

    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)

    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)

    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)

    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)

    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)

    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

    at java.lang.Thread.run(Thread.java:748)


{code}
",,,,,,,,,,
Basic authentication cannot work for npm publish,RTFACT-18742,69323,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Harry Zhang,Harry Zhang,12/Mar/19 3:24 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,Set Me Up,,,,,,,0,,,,,,"Following the guide of set me up:

-------------------------------------------

_auth = <USERNAME>:<PASSWORD> (converted to base 64)
email = youremail@email.com
always-auth = true

 

I create my .npmrc file and have text like this:

_auth=xxxxxxxxxxxxxxxxxxxx
email=zhangcux@cn.ibm.com
always-auth=true
registry=[https://na.artifactory.swg-devops.com/artifactory/api/npm/gbs-isg-design-sys-npm-virtual/]

 

The xxxxxxxxxxxxxxxxxxxx means base64 string of zhangcux@cn.ibm.com:mypassword
And I am the aministrator having publish access to the my artifacts.

However, I get error when I run: npm publish
----------------------------------------------------------

npm ERR! Linux 4.4.0-141-generic
npm ERR! argv ""/usr/bin/nodejs"" ""/usr/bin/npm"" ""publish""
npm ERR! node v4.2.6
npm ERR! npm v3.5.2
npm ERR! code ENEEDAUTH

npm ERR! need auth auth required for publishing
npm ERR! need auth You need to authorize this machine using `npm adduser`

 

Is it a bug or how can I fix it? Thank you.",Linux,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyuav:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Mar/19 8:06 AM;Harry Zhang;Please close it. The cause is base64 string generated by some websites can not work",,,,,,,,,,
Getting random 401 Unauthorized errors when downloading from generic repo,RTFACT-18740,69321,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dan_wiegert,dan_wiegert,11/Mar/19 7:24 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,,,,,,,,1,,,,,,"I have a user that keeps getting random 401 Unauthorized errors when downloading from a generic repo. The user has appropriate permissions. When I look in the artifactory logs I see that for whatever reason the authorized account is not used and NA is listed instead.

2019-03-11 10:57:11,069 [DENIED DOWNLOAD] generic-local-wifi:FPGA_images/kt_axe_at/3635/kt_axe_at.bin for NA/156.140.13.71.
2019-03-11 10:57:11,075 [ACCEPTED DOWNLOAD] generic-local-wifi:FPGA_images/kt_axe_at/3635/kt_axe_at.bin for srvcbvwuser/156.140.13.71.
2019-03-11 10:57:11,146 [ACCEPTED DOWNLOAD] generic-local-wifi:FPGA_images/kt_axe_at/3635/kt_axe_at.bin for srvcbvwuser/156.140.13.71.

 

Here is the users description of the problem

""We’re seeing random failures on our Jenkins instance where it is downloading artifacts and gets an “unauthorized” error for no reason.

Small, noop changes to the filespec seems to affect the behavior, and we’re currently able to run with the attached filespec.

Changing the locations of the downloaded artifacts results in the failure condition. (IE: changing target directory names.)""

 

Below is logs from the user

Downloading 'http://artifactory.it.keysight.com/artifactory/generic-local-wifi/FPGA_images/kt_axe_at/3635/kt_axe_at.bin'...
[Thread downloader_0] downloading /tmp/1552323430978-0/FPGA_images/kt_axe_at/3635/kt_axe_at.bin0 as part of file http://artifactory.it.keysight.com/artifactory/generic-local-wifi/FPGA_images/kt_axe_at/3635/kt_axe_at.bin threw an exception: java.io.IOException: Error downloading http://artifactory.it.keysight.com/artifactory/generic-local-wifi/FPGA_images/kt_axe_at/3635/kt_axe_at.bin. Code: 401 Message: Unauthorized
 at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryDependenciesClient.execute(ArtifactoryDependenciesClient.java:210)
 at org.jfrog.build.extractor.clientConfiguration.client.ArtifactoryDependenciesClient.downloadArtifact(ArtifactoryDependenciesClient.java:174)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.saveRequestToFile(DependenciesDownloaderHelper.java:385)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.access$000(DependenciesDownloaderHelper.java:41)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper$1.run(DependenciesDownloaderHelper.java:349)
 at java.lang.Thread.run(Thread.java:748)

ERROR: java.lang.Exception: Error occurred while downloading http://artifactory.it.keysight.com/artifactory/generic-local-wifi/FPGA_images/kt_axe_at/3635/kt_axe_at.bin, please refer to logs for more information
java.io.IOException: java.lang.Exception: Error occurred while downloading http://artifactory.it.keysight.com/artifactory/generic-local-wifi/FPGA_images/kt_axe_at/3635/kt_axe_at.bin, please refer to logs for more information
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.downloadArtifact(DependenciesDownloaderHelper.java:289)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.downloadArtifact(DependenciesDownloaderHelper.java:252)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.downloadDependencies(DependenciesDownloaderHelper.java:148)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderImpl.download(DependenciesDownloaderImpl.java:49)
 at org.jfrog.build.extractor.clientConfiguration.util.AqlDependenciesHelper.downloadDependencies(AqlDependenciesHelper.java:80)
 at org.jfrog.build.extractor.clientConfiguration.util.WildcardsDependenciesHelper.retrievePublishedDependencies(WildcardsDependenciesHelper.java:89)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.downloadDependencies(DependenciesDownloaderHelper.java:92)
 at org.jfrog.build.extractor.clientConfiguration.util.spec.SpecsHelper.downloadArtifactsBySpec(SpecsHelper.java:141)
 at org.jfrog.hudson.generic.FilesResolverCallable.invoke(FilesResolverCallable.java:48)
 at org.jfrog.hudson.generic.FilesResolverCallable.invoke(FilesResolverCallable.java:20)
 at hudson.FilePath$FileCallableWrapper.call(FilePath.java:3086)
 at hudson.remoting.UserRequest.perform(UserRequest.java:212)
 at hudson.remoting.UserRequest.perform(UserRequest.java:54)
 at hudson.remoting.Request$2.run(Request.java:369)
 at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
 at java.util.concurrent.FutureTask.run(FutureTask.java:266)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
 at java.lang.Thread.run(Thread.java:748)
 Suppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to buildmachine1
 at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1741)
 at hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:357)
 at hudson.remoting.Channel.call(Channel.java:955)
 at hudson.FilePath.act(FilePath.java:1072)
 at hudson.FilePath.act(FilePath.java:1061)
 at org.jfrog.hudson.generic.ArtifactoryGenericConfigurator.setUp(ArtifactoryGenericConfigurator.java:305)
 at hudson.model.Build$BuildExecution.doRun(Build.java:157)
 at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:504)
 at hudson.model.Run.execute(Run.java:1810)
 at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
 at hudson.model.ResourceController.execute(ResourceController.java:97)
 at hudson.model.Executor.run(Executor.java:429)
Caused by: java.lang.Exception: Error occurred while downloading http://artifactory.it.keysight.com/artifactory/generic-local-wifi/FPGA_images/kt_axe_at/3635/kt_axe_at.bin, please refer to logs for more information
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.doConcurrentDownload(DependenciesDownloaderHelper.java:369)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.downloadFileConcurrently(DependenciesDownloaderHelper.java:321)
 at org.jfrog.build.extractor.clientConfiguration.util.DependenciesDownloaderHelper.downloadArtifact(DependenciesDownloaderHelper.java:276)
 ... 18 more
Archiving artifacts
[htmlpublisher] Archiving HTML reports...
[htmlpublisher] Archiving at PROJECT level /disk/0/jenkins/workspace/CMCC/install_test/axe_test/results/152 to /var/lib/jenkins/jobs/CMCC/jobs/install_test/htmlreports/HTML_20Report
ERROR: Specified HTML directory '/disk/0/jenkins/workspace/CMCC/install_test/axe_test/results/152' does not exist.
Finished: FAILURE",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyu9b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory does not recognise the sha2 that is created by the client,RTFACT-18738,69305,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Maayana,Maayana,11/Mar/19 2:47 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Web UI,,,,,,,2,,,,,,"Steps to reproduce:

1.Deploy a file either to a generic repository (add the header ""X-Checksum-Sha256: sha2"") or by using nuget client (nuget publish) for example

2.Via Artifactory UI notice that there is a warning ""Client did not publish a checksum value.""

 ",,,,,,,,,,,,,,,,,,,"11/Mar/19 2:49 PM;Maayana;UIWarn.png;https://www.jfrog.com/jira/secure/attachment/31674/UIWarn.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyu6n:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
HIGH vulnerabilities in artifactory-pro docker images,RTFACT-18737,69300,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kenneth.s.brooks,kenneth.s.brooks,11/Mar/19 1:41 PM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,Docker Image,,,,,,,1,artifactory,docker,helm,,,"docker.bintray.io/jfrog/artifactory-pro:6.8.4 has the following vulnerabilities.
 
 * *23* High-level vulnerabilities.
 * *89* Medium-level vulnerabilities.
 * *52* Low-level vulnerabilities.
 * *71* Negligible-level vulnerabilities.
 * *10* Unknown-level vulnerabilities.
 

Our company (and I would assume most) has a stance that no images will be brought in with HIGH vulnerabilities.

Most of them are fixable via updating to newer dependencies.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyu5r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"11/Mar/19 3:00 PM;kenneth.s.brooks;We used Clair as the scanning tool.

 

I'll try to attach info about the findings (for at least the high vulnerabilities).",,,,,,,,,,
Artifactory may not be able to find metadata of some Python Eggs packages,RTFACT-18727,69267,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,10/Mar/19 12:22 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,QF,QF-P3,,,,"Artifactory is currently searching for the PKG-INFO at lvl 0 and lvl1 - this was implemented according to the Wheel official PEP spec:
https://www.python.org/dev/peps/pep-0376/
However, with Egg the case may be different, the PKG-INFO in Python egg should be under .egg-info file, which might not be resided on the root or lvl1 of the Python project.
See Egg Python spec:
https://svn.python.org/projects/sandbox/trunk/setuptools/doc/formats.txt

See example of two packages that upon installation Artifactory will not be able to parse metadata since the PKG-INFO cannot be found:

multiprocess-0.70.7.tar.gz

dill-0.2.9.tar.gz
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzytyn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
impossible replications can be created,RTFACT-18726,69261,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,orene,orene,10/Mar/19 10:50 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"a push replication can be created against a

*remote repository on the same/another artifactory* 

as well as to a

*local repository on an edge node*

 

These replication are doing nothing but generating error messages in the log and even this message in the UI

Error scheduling push replication task: Unable to identify target URL as an Artifactory instance: HTTP/1.1 401 Unauthorized

 

Although the target was tested for successful connection",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzytxb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
broken tooltip link,RTFACT-18723,69249,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,orene,orene,10/Mar/19 8:55 AM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"the tooltip link of crontab expressions in the replication wizard is broken due to re-constructing of the quartz site.

this is the link:

!image-2019-03-10-10-54-33-672.png!

 

 

this is where it leads:

!image-2019-03-10-10-53-18-614.png!

 ",,,,,,,,,,,,,,,,,,,"10/Mar/19 8:53 AM;orene;image-2019-03-10-10-53-18-614.png;https://www.jfrog.com/jira/secure/attachment/31662/image-2019-03-10-10-53-18-614.png","10/Mar/19 8:54 AM;orene;image-2019-03-10-10-54-33-672.png;https://www.jfrog.com/jira/secure/attachment/31661/image-2019-03-10-10-54-33-672.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzytuv:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"virtual npm repo non ""latest"" dist tag always takes tags from last/bottom repository in resolution order",RTFACT-18721,69245,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,09/Mar/19 12:43 AM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,,,,,,,,0,,,,,,"When looking at npm metadata regarding dist tags for a virtual repository, any tag that is not the ""latest"" tag will automatically use the dist-tag metadata from the last/bottom repository in the virtual repo. This behavior contrasts with the latest dist tag, which always takes the actual latest version of all the latest tags in the aggregated repositories.

Steps to reproduce:

-create two local repositories, Repo A and Repo B. Aggregate them in a Virtual called Repo C, with Repo A on top (order or resolution is Repo A then Repo B)

-deploy versions 3.0.0 and 4.0.0 to both repo A and B. 

-on Repo A, set dist-tag test to 4.0.0:

npm dist-tag add matthewwtest@4.0.0 test

-on Repo B, set dist-test to 3.0.0:

npm dist-tag add matthewwtest@3.0.0 test

-on Repo C Virtual repo, see that the test dist-tag is set to 3.0.0 (since Repo B's test tag is last in order of resolution in the virutal), even though version 4.0.0 is tagged on repo A, and 4.0.0 > 3.0.0.

[http://localhost:8081/artifactory/api/npm/repoC/matthewwtest]

[http://localhost:8081/artifactory/api/npm/npm/-/package/matthewwtest/dist-tags|http://localhost:8081/artifactory/api/npm/npm-local2/-/package/matthewwtest/dist-tags]

 

$ npm view matthewwtest

matthewwtest@6.0.0 | ISC | deps: none | versions: 6
adf2

dist
.tarball: [http://10.6.17.93:8081/artifactory/api/npm/npm/matthewwtest/-/matthewwtest-6.0.0.tgz]
.shasum: 954c3f3423d2579ebcdfc0ad4eb9fa1c3d02aa26

dist-tags:
canary: 3.0.0 latest: 6.0.0

published 3 days ago
$ npm dist-tag ls matthewwtest
canary: 3.0.0
latest: 6.0.0

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyttz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker Registry Catalog call in repository path mode , provides non standard output",RTFACT-18720,69243,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jobanputrajayn,jobanputrajayn,08/Mar/19 11:06 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,artifactory,docker,,,,"When call is made to docker repositories exposed as repository path mode, the catalog call returns blank, rather then listing docker image repositories , this might be because of api path translation definition.



According to [https://docs.docker.com/registry/spec/api/#listing-repositories] this should return repositories.

Call that doesn't work in repository path mode,

[https://artifactory/v2/_catalog]



Call that works is 
[https://artifactory/v2/docker-repo/_catalog] (remnant of how the path translation is done, this doesn't follow the spec)

 

This would be really helpful so that solutions that rely on listing of images in registry can rely on spec provided by docker.",Artifactory in repository path mode for docker,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyttj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
 How can we grant permissions for Build Actions?,RTFACT-18719,69240,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Uma,Uma,08/Mar/19 9:46 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"I am admin in Jfrog Artifactory.  One of our build is failing  at  ""Artifactory Discard Builds"" task in CI Pipeline is failing with below error
User '***' is not authorized to delete build info. Delete permission is needed."" 
we are adding this task to regularly clean up repository by deleting older builds.
what access do we require to delete builds from the build build browser in Artifactory?
How can we grant permissions for *Build Actions?*  

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzytsv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"10/Apr/19 9:29 PM;zweg;We are impacted with the same issue for the same reasons. We are running Artifactory Enterprise
 6.8.7 rev 60807900","10/Apr/19 10:58 PM;zweg;Actually I think the ""bug"" in Artifactory is that ""Build Actions"" permissions show up in ""Repositories"" resource permission targets for users and groups and ""Repository Actions"" permissions show up in ""Builds"" resource permission targets for users and groups. This is very confusing.",,,,,,,,,
jFrog CLI AQL search on stats domain fails,RTFACT-18708,69182,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,PatG,PatG,07/Mar/19 1:36 PM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,AQL,,,,,,,0,aql,artifactory,cli,,,"A jFrog CLI search with the following .spec file:
{code:java}
{
 ""files"":[
 {
 ""aql"": {
   ""stats.find"": { 
   ""downloaded"": { ""$gt"" : ""2019-03-06"" } 
   }
 }
 }
 ]
}{code}
is strangely translated to this, incorrect, request in the *items* domain, instead of the expected *stats* domain:

is strangely translated to:
{code:java}
jfrog rt search --server-id my_server_id --spec file.spec
 [Info] Searching artifacts...
 [Error] Artifactory response: 400 Bad Request
 Failed to parse query: items.find({
 ""downloaded"":
{ ""$gt"" : ""2019-03-06"" }
}
 ).include(""name"",""repo"",""path"",""actual_md5"",""actual_sha1"",""size"",""type"",""property""), it looks like there is syntax error near the following sub-query: downloaded"":
{ ""$gt"" : ""2019-03-06"" }
}
 ).include(""name"",""repo"",""path"",""actual_md5"",""actual_sha1"",""size"",""type"",""property"")
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzytjr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Mar/19 10:49 AM;sankark;Please use syntax something like below to retrieve download stats from Artifactory.
{
 ""files"":[
{ ""aql"": {
   ""items.find"": {
      ""stat.downloaded"": {
          ""$gt"" : ""2019-03-10""
      }
   } } } ] 

}",,,,,,,,,,
NPE to Debian remote https://packages.confluent.io/deb/4.1,RTFACT-18689,69142,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,07/Mar/19 9:29 AM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When using the following url [https://packages.confluent.io|https://packages.confluent.io/]/deb/4.1 with Debian remote you will get a NPE however if you set the following [https://packages.confluent.io|https://packages.confluent.io/] the NPE will not take place.

 

Steps to reproduce:

1.) step up a remote Debian repository with the following URL: [https://packages.confluent.io|https://packages.confluent.io/]/deb/4.1. Press the test button, you will get the NPE error in the logs. 

{code:java}
2019-03-07 11:17:46,590 [http-nio-8081-exec-7] [ERROR] (o.a.r.c.e.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null
	at org.artifactory.util.HttpUtils.getRequestPath(HttpUtils.java:262)
	at org.artifactory.util.HttpUtils.encodeUrl(HttpUtils.java:311)
	at org.artifactory.ui.rest.service.admin.configuration.repositories.util.TestMethodFactory.createTestMethod(TestMethodFactory.java:89)
	at org.artifactory.ui.rest.service.admin.configuration.repositories.util.RemoteRepositoryTestUrl.tryS3(RemoteRepositoryTestUrl.java:137)
	at org.artifactory.ui.rest.service.admin.configuration.repositories.util.RemoteRepositoryTestUrl.handleSpecialCases(RemoteRepositoryTestUrl.java:106)
	at org.artifactory.ui.rest.service.admin.configuration.repositories.util.RemoteRepositoryTestUrl.testConnection(RemoteRepositoryTestUrl.java:84)
	at org.artifactory.ui.rest.service.admin.configuration.repositories.util.RemoteRepositoryTestUrl.execute(RemoteRepositoryTestUrl.java:61)
	at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
	at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
	at org.artifactory.ui.rest.resource.admin.configuration.repositories.RepoConfigResource.remoteRepositoryUrlTest(RepoConfigResource.java:131)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
	at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
	at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
	at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
	at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
	at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
	at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
	at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
	at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)
	at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)
	at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)
	at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)
	at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)
	at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)
	at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:183)
	at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:93)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:433)
	at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:215)
	at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:168)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:66)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
	at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
	at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:121)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
	at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
{code}

 

2.) step up a remote Debian repository with the following URL: [https://packages.confluent.io|https://packages.confluent.io/]/.

Press the test button you will get ""Successfully connected to server"".

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzytc7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"09/Apr/19 5:27 PM;sean.mcafee;Also seeing this behavior and same stack trace on RPM/yum for Newrelic, e.g. [http://download.newrelic.com/infrastructure_agent/linux/yum/el/7.] 

We're on 6.5.13 rev 60513900.

I can do a new ticket, but stack trace similarity made me think it was going to be a shared bug.",,,,,,,,,,
Artifactory secondary node will fail startup with NPE if ha-node.properties file is missing,RTFACT-18683,69078,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,06/Mar/19 10:44 AM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,startup,,,,,,,0,,,,,,"Summary:

We should better indicate what is missing to have a successful startup.

Steps to reproduce:

1. Setup a working cluster
2. Stop secondary and remove the ha-node.properties (keep primary running)
3. Remove the secondary's etc/ha-node.properties file
4. Start secondary and it will fail with NPE for the context (though it will print out the Artifactory Pro instead of the Artifactory HA banner):

{code}
2019-03-06 10:25:35,323 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:236) - Refreshing artifactory: startup date [Wed Mar 06 10:25:35 UTC 2019]; root of context hierarchy
2019-03-06 10:25:44,192 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:242) - Database: PostgreSQL 9.5.2. Driver: PostgreSQL JDBC Driver 42.2.5 Pool: postgresql
2019-03-06 10:25:44,193 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:245) - Connection URL: jdbc:postgresql://10.156.0.57:5432/artifactory2
2019-03-06 10:25:45,572 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'empty, external-file, external-wrapper, file-system, cache-fs, retry' from jar:file:/home/andreik/Nokia634Node2/artifactory-pro-6.3.4/tomcat/webapps/artifactory/WEB-INF/lib/binary-store-core-3.1.15.jar!/
2019-03-06 10:25:45,575 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'blob' from jar:file:/home/andreik/Nokia634Node2/artifactory-pro-6.3.4/tomcat/webapps/artifactory/WEB-INF/lib/artifactory-storage-db-6.5.9.jar!/
2019-03-06 10:25:45,581 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'remote' from jar:file:/home/andreik/Nokia634Node2/artifactory-pro-6.3.4/tomcat/webapps/artifactory/WEB-INF/lib/binary-store-client-3.1.15.jar!/
2019-03-06 10:25:45,663 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'eventual, eventual-cluster, google-storage, hdfs, s3Old, s3, sharding, sharding-cluster, state-aware, azure-blob-storage' from jar:file:/home/andreik/Nokia634Node2/artifactory-pro-6.3.4/tomcat/webapps/artifactory/WEB-INF/lib/artifactory-addon-filestore-6.5.9.jar!/
2019-03-06 10:25:52,013 [art-init] [INFO ] (o.a.s.ArtifactorySchedulerFactoryBean:647) - Starting Quartz Scheduler now
2019-03-06 10:25:52,182 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:243) - Artifactory context starting up 53 Spring Beans...
2019-03-06 10:25:52,602 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:386) - Initialized new service id: jfrt@01d47kmr9ww2gz1qff4mew1tx3
2019-03-06 10:25:52,632 [art-init] [INFO ] (o.j.s.c.EncryptionWrapperFactory:33) - createArtifactoryKeyWrapper  EncryptionWrapperBase{ encodingType=ARTIFACTORY_MASTER, topEncrypter=BytesEncrypterBase{ Cipher='AES128',  keyId='32Mgr'}, formatUsed=DotFormat, decrypters=[BytesEncrypterBase{ Cipher='AES128',  keyId='32Mgr'}, BytesEncrypterBase{ Cipher='AES128',  keyId='23mGe'}]}
2019-03-06 10:25:52,988 [art-init] [INFO ] (o.a.s.a.ArtifactoryAccessClientConfigStore:643) - Using Access Server URL: http://localhost:8040/access (bundled) source: detected
2019-03-06 10:25:53,025 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:325) - Waiting for access server...
2019-03-06 10:25:54,437 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:332) - Got response from Access server after 1412 ms, continuing.
2019-03-06 10:25:54,680 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:282) - Initialized access service successfully with client id 1822135656, closing old client id [null]
2019-03-06 10:25:54,680 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:1121) - Updating access configuration with password expiration data
2019-03-06 10:25:55,429 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:92) - Application could not be initialized: null
java.lang.reflect.InvocationTargetException: null
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
        at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:207)
        at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:63)
        at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:88)
Caused by: org.springframework.beans.factory.BeanInitializationException: Failed to initialize bean 'org.artifactory.state.model.ArtifactoryStateManager'.; nested exception is java.lang.NullPointerException
        at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:253)
        at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:136)
        ... 7 common frames omitted
Caused by: java.lang.NullPointerException: null
        at org.artifactory.state.ArtifactoryStateManagerImpl.handleError(ArtifactoryStateManagerImpl.java:101)
        at org.artifactory.state.ArtifactoryStateManagerImpl.init(ArtifactoryStateManagerImpl.java:84)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
        at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
        at com.sun.proxy.$Proxy244.init(Unknown Source)
        at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:251)
        ... 8 common frames omitted
2019-03-06 10:31:37,360 [art-init] [INFO ] (o.a.w.s.ArtifactoryContextConfigListener:265) -
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyt3j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Security data is lost on App pod when DB pod restarts,RTFACT-18680,69033,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,petercrotty,petercrotty,05/Mar/19 8:36 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.5.9,,,,,,,Kubernetes,,,,,,,0,artifactory,backup,kubernetes,recovery,Restore,"We run Artifactory Pro on kubernetes based on the following yaml configs (helm is not used):

[https://github.com/helm/charts/tree/master/stable/artifactory/templates]

 

We have noticed in some scenarios where the DB pod restarts, the App pod then restarts but comes back with no security data (permissions, users etc) and although artifacts are visible, not ability to download them.  The only workaround we've found is to do a complete system import from last backup but this loses us data.   No data seems to be lost in either the DB or in the filesystem so is there a way to better recover data from such a scenario? 

 ","We run Artifactory Pro on Kubernetes using yaml config files (with some bespoke customisation):

[https://github.com/helm/charts/tree/master/stable/artifactory/templates]

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzysuf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Some artifacts always return 404,RTFACT-18675,68976,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,blindpirate,blindpirate,05/Mar/19 8:17 AM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"We have an artifactory 6.8.2 deployed in docker. We noticed that some artifacts are always returning 404 (remote repository):

[http://dev12.gradle.org:8081/artifactory/list/gradle-libs/org/scalatest/scalatest_2.12/maven-metadata.xml] returns 404.

However, its upstream repository returns good value:

[https://repo.gradle.org/gradle/list/libs/org/scalatest/scalatest_2.12/maven-metadata.xml]

 

I tried everything I can:

 
 * Set all cache time configuration to 0 in ""Advanced setting"".
 * Delete the remote repository then recreate it.
 * Restart artifactory container.

 

But non of them works. Now I have to delete all local file cache and start a brand new artifactory container.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyshz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Metadata Retrieval Cache Period of CRAN Virtual repositories cannot be changed,RTFACT-18674,68965,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,muhammeds,muhammeds,05/Mar/19 6:01 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.8.4,,,,,,,,,,,,,,0,,,,,,"In Artifactory Virtual repository we have an option to tune the Metadata Retrieval Cache Period, However, making any change to the default parameter(600) won't take effect.

Steps to reproduce.

1. Change the Metadata Retrieval Cache Period of a cran virtual repository(from the UI or REST call) and save the configuration.

2. Login to the configuration page and check the value of Metadata Retrieval Cache Period",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzysen:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
After upgrade to 6.8.3 all Admin menu items greyed out,RTFACT-18667,68940,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,david.schmidt,david.schmidt,04/Mar/19 1:44 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,,,,,,,,0,,,,,,"Hi Jfrog Team,

 

I updated to 6.8.3 last week, all works as expected.

Unless nobody is able to administer anything anymore.

 

See the screenshot attached, can't attach one... :(

 

My user is coming synched from AD, but has administrative rights.

 

Any hint?

 

Thanks
 David","Ubuntu 18.04.2 server

Installed from deb package.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzys9r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Mar/19 6:00 AM;david.schmidt;Duplicate of https://www.jfrog.com/jira/browse/RTFACT-18664

Can be closed!",,,,,,,,,,
Error parsing json body error should be more informative ,RTFACT-18665,68931,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,batelt,batelt,04/Mar/19 10:08 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,ErrorMessage,PB_Done,UI,,,"Today in some cases users insert wrong values on the repository configuration for example string in the 'Max Unique Snapshots' field and we are getting the ""Error parsing json body"" in the UI.

I think that this error should be more informative and include the exact fields that contains the wrong data for example ""Error parsing json body of the maxUniqueSnapshots field""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzys7r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"18/Apr/19 3:04 PM;arlington1985;Indeed it's what I always struggling ","27/May/19 8:37 AM;orene;there is also the log message which is rather awkward and should be more informative as well",,,,,,,,,
Upgrade fails with MSSQL due to database name validation,RTFACT-18657,68889,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,03/Mar/19 12:04 PM,05/Jan/21 5:10 PM,18/Feb/21 8:59 AM,,,,,,,,,Database,,,,,,,0,,,,,,"+Environment:+
Artifactory using Microsoft SQL server

+Problem:+
Upgrade to version 6.6.1 and above fails with the following error:
{code:java}
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The database name component of the object qualifier must be the name of the current database.
{code}
+Cause:+
The database name in the configuration doesn't match the actual DB name.
Typically, this would happen due to case-sensitivity mismatch.
The case-sensitivity validation was added in version 6.6.1.

+Resolution:+
Update the DB name in the $ARTIFACTORY_HOME/etc/db.properties.

You should be able to retrieve the actual name by running:
{code:java}
SELECT name, database_id, create_date  
FROM sys.databases;  
{code}
+Steps to reproduce:+
1. Install Artifactory 6.5.13 with MSSQL. Setup the DB name as ""artifactory"".
2. In the db.properties configuration file, setup the DB using the name ""Artifactory"" (here with capital case). It works.
3. Upgrade to version 6.6.1 or above, upgrade will fail as Artifactory isn't able to connect to the DB with the error above.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyrzr:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"When ""Allow Created Users Access To Profile Page"" in LDAP is disabled, users still can access this page",RTFACT-18646,68825,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mohammadt,mohammadt,28/Feb/19 5:19 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,,,,,,,,0,,,,,,"When ""Allow Created Users Access To Profile Page"" is disabled in LDAP, users still can access this page

Steps to reproduce:
1. Configure LDAP and disable Allow Created Users Access To Profile Page
2. Log in with the LDAP user, you will be able to access this page and to generate API Key.",,,,,,,,,,,,,,,,,,,"12/Mar/19 8:36 AM;ariels;LDAP_Conf_Help_Bubble.png;https://www.jfrog.com/jira/secure/attachment/31677/LDAP_Conf_Help_Bubble.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyro7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Docker compose upgrade from version 6.6.5 or below to version above 6.6.5 would fail,RTFACT-18641,68807,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mohammadt,mohammadt,28/Feb/19 1:46 PM,05/Jan/21 1:14 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,,,,,,,1,,,,,,"We have changed our Docker compose PostgreSQL image version to 9.6.11:
https://github.com/jfrog/artifactory-docker-examples/commit/a748c1c921f728bd88d1d0c4eb544828a2cd9208#diff-a35ac227c83a2d8ac1d9f1279526fa26

Due to this change if we try upgrading Docker compose installation from version below 6.6.5 which was installed with PostgreSQL version 9.5.2, to version above 6.6.5, Artifactory will not start and in the PostgreSQL logs we would see:

FATAL:  database files are incompatible with server
DETAIL:  The data directory was initialized by PostgreSQL version 9.5, which is not compatible with this version 9.6.11.

Steps to reproduce:

1. Docker compose install Artifactory with artifactory-pro.yml from the below link which installs PostgreSQL 9.5.2:

https://github.com/jfrog/artifactory-docker-examples/tree/ee26f30ad7e2b57b9b0bbdd34eb225333c08597a/docker-compose/artifactory

2. Validate that it starts as expected.

3. Docker compose upgrade Artifactory to the latest version with the artifactory-pro.yml from the below link :
https://github.com/jfrog/artifactory-docker-examples/tree/master/docker-compose/artifactory

4. Upgrade with the below commands:
{code:java}
1. $ docker-compose -f artifactory-pro.yml stop
2. $ docker-compose -f artifactory-pro.yml up -d
{code}


5. Artifactory will not start and in the PostgreSQL logs we would see:

FATAL:  database files are incompatible with server
DETAIL:  The data directory was initialized by PostgreSQL version 9.5, which is not compatible with this version 9.6.11.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyrkf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Uploading a file to a path with a slash after a space in the name is allowed, but the same with a space in the file name also is disallowed.",RTFACT-18638,68801,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,adiv,adiv,28/Feb/19 12:53 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Uploading a file to a path with a slash after a space in the name is allowed, but the same with a space in the file name also is disallowed.

The error that is shown in the second scenario is:

""Path cannot have a slash after a space: generic-local/puppet /puppet .conf""

This error should cover the first scenario also.

*For example, this works:*

{color:#205081}_curl -_{color}uadmin:password{color:#205081} _-T puppet.conf ""http://localhost:8081/artifactory/generic-local/puppet%20/puppet.conf""_{color}

This command succeeds, although the folder name in the path really does contain a slash after a space.

*And for example, this does not work:*

{color:#205081}_curl -_{color}uadmin:password{color:#205081} _-T puppet.conf ""http://localhost:8081/artifactory/generic-local/puppet%20/puppet%20.conf""_{color}

{color:#333333}This command fails to upload and throws the following 500 error:{color}

{color:#d04437}_{_
_""errors"" : [ {_
_""status"" : 500,_
_""message"" : ""Path cannot have a slash after a space: generic-local/puppet /puppet .conf""_
_} ]_
_}_{color}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyrjb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remote deploy starts anonymously,RTFACT-18637,68799,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreas.pelzer,andreas.pelzer,28/Feb/19 11:57 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.5.2,,,,,,,Remote Repository ,,,,,,,0,,,,,,"In our local Artifactory repo1 has been defined as remote repository for http://repo.maven.apache.org/maven2/. The virtual repository libs-release includes repo1.

Requesting a remote file (here: jsonschema2pojo-gradle-plugin-1.0.0.jar) has the effect, that the first request seems to be done by an anonymous user from an unknown IP, as the access.log shows:
{noformat}
2019-02-28 09:39:14,725 [DENIED DEPLOY] repo1-cache:org/jsonschema2pojo/jsonschema2pojo-gradle-plugin/1.0.0/jsonschema2pojo-gradle-plugin-1.0.0.jar for NA/10.64.145.105.
2019-02-28 09:39:14,786 [ACCEPTED DEPLOY] repo1-cache:org/jsonschema2pojo/jsonschema2pojo-gradle-plugin/1.0.0/jsonschema2pojo-gradle-plugin-1.0.0.jar for tec_devops_artifacto/10.64.200.26.
2019-02-28 09:39:14,788 [ACCEPTED DOWNLOAD] repo1:org/jsonschema2pojo/jsonschema2pojo-gradle-plugin/1.0.0/jsonschema2pojo-gradle-plugin-1.0.0.jar for tec_devops_artifacto/10.64.200.26.
2019-02-28 09:39:14,813 [ACCEPTED DOWNLOAD] libs-release:org/jsonschema2pojo/jsonschema2pojo-gradle-plugin/1.0.0/jsonschema2pojo-gradle-plugin-1.0.0.jar.sha1 for tec_devops_artifacto/10.64.200.26.
{noformat}

First question: Why is the first request by anonymous (here: NA) with an unknown IP address (here: 10.64.145.105)? Obviously, the user tec_devops_artifacto is known.

This becomes an issue in a different project, because after the first ""DENIED DEPLOY"" no more requests to Artifactory are sent:
{noformat}
2019-02-28 09:31:06,238 [DENIED DEPLOY] repo1-cache:org/jsonschema2pojo/jsonschema2pojo-gradle-plugin/1.0.0/jsonschema2pojo-gradle-plugin-1.0.0.jar for NA/10.64.130.100.
{noformat}
which leads to not downloading the artifact and therefore a failure of the build.

Second question: why does the request in the second case not continue with the specific user?",Artifactory behind Apache httpd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyriv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Mar/19 2:35 PM;andreas.pelzer;For some unknown reason the previously wrong user name and IP are now correct (before: NA/10.64.145.105). How does Artifactory get these parameters?",,,,,,,,,,
AQL does not honor resolution order in virtual repository,RTFACT-18631,68791,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,stefan.lengauer,stefan.lengauer,28/Feb/19 10:06 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.8.1,,,,,,,AQL,Virtual Repositories,,,,,,1,artifactory,virtual,,,,"We have a configuration that allows different users requesting the same artifact to be served different ones based on their permissions. This is done in the following way:
 # Configure Artifactory to return 404 for artifacts on which the user has no permission to download.
 # Setup three repos:
 ## RepoA - Maven
 ## RepoB - Maven
 ## RepoV - Virtual
 RepoA and RepoB are members of RepoV and the order of resolution is RepoB before RepoA.
 # Upload two different artifacts (ArtA and ArtB) to the same path in RepoA and RepoB (e.g. /path/to/my/testartifact.zip)
 # Create two users:
 ## UserA who has read permissions on RepoA but not RepoB
 ## UserB who has read permissions on RepoA and RepoB

This is basically the setup we have right now.
----
The following usecases work:

*As UserA*
 # Downloading the artifact via URL: RepoV/path/to/my/testartifact.zip
 This gets ArtA
 # Downloading the artifact via filespec:
{noformat}
{
  ""files"": [
    {
      ""pattern"": ""RepoV/path/to/my/testartifact.zip"",
      ""target"": ""testartifact.zip"",
      ""flat"": true 
    }
  ]
}{noformat}
This gets ArtA

*As UserB*
 # Downloading the artifact via URL: RepoV/path/to/my/testartifact.zip
 This gets ArtB

----
The following usecases *do not* work:

*As UserB*
 # Downloading the artifact via filespec:
{noformat}
{
  ""files"": [
    {
      ""pattern"": ""RepoV/path/to/my/testartifact.zip"",
      ""target"": ""testartifact.zip"",
      ""flat"": true 
    }
  ]
}{noformat}
This gets ArtA and ArtB from both repos.

The underlying problem seems to be that when downloading via filespec an AQL query is issued that returns both artifacts as both are found and UserB has the required permissions. But the resolution order configured on the virtual repo is ignored. ","CentOS 7
Artifactory RPM 6.8.1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyrhb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
deleting a RB doesnt remove its empty folders,RTFACT-18630,68730,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,orene,orene,27/Feb/19 9:01 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"!Screen Shot 2019-02-27 at 10.57.49.png! when deleting a release bundle version from distribution it removes the actual artifacts both from the source artifactory and from all destinations but the empty folders remains on the release-bundles repo on the source artifactory as well as on the relevant repo on the destination node.

see relevant pics attached",,,,,,,,,,,,,,,,,,,"27/Feb/19 12:48 PM;orene;Screen Shot 2019-02-27 at 10.57.49.png;https://www.jfrog.com/jira/secure/attachment/31573/Screen+Shot+2019-02-27+at+10.57.49.png","27/Feb/19 12:48 PM;orene;Screen Shot 2019-02-27 at 10.59.09.png;https://www.jfrog.com/jira/secure/attachment/31572/Screen+Shot+2019-02-27+at+10.59.09.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyr5b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"When Replication EventQueue is initialised (async) in the meantime replication events created are ""discarded"" ",RTFACT-18628,68783,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,barh,barh,28/Feb/19 8:10 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"InitQueuesContextJob is a quartz command that responsible for initialising  queues.

when replication event queue for certain repository is not initialised replication events will be discarded since the queue is not ready.

how they are discarded ? 

when EventQueueConsumer is running executing won't start because on method pollEvents (method run call it) the loop guard queue.contextInitialized() is false.

-------------------------------------------------------------

the situation is best understandable when looking at: 

GenericRepoPushReplicationITest (attached below)

in order to make the test passed there are two calls to the function

_forceInitQueue_ after each replication descriptor is loaded 

so we can make sure that the EventQueue initialised before deploying files and causing replication event.

 

 valid test for this fix will be making the test pass without the call above.",,,,,,,,,,,,,,,,,,,"07/Mar/19 4:07 PM;barh;GenericRepoPushReplicationITest.java;https://www.jfrog.com/jira/secure/attachment/31656/GenericRepoPushReplicationITest.java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyrfz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
pricing calculator - subscribe button is not working from artifactory buy now ,RTFACT-18627,68779,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,iland,alons,alons,28/Feb/19 7:43 AM,06/Jan/21 2:53 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,website,,,,,"go to [https://jfrog.info/artifactory/buy-now/#pricing-cloud-x-aws] 

click on subscribe 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyrf3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Create permissions REST API allows duplicate repository names,RTFACT-18611,68714,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,Disham,Disham,27/Feb/19 7:26 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,,,,,,,,1,,,,,,"Hi,

While using the create permissions REST API, if we give duplicate names in the API call, it succeeds - It should throw an error?!

Regards,

Disha",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyr27:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Create Virtual REST API allows to include duplicate repository name ,RTFACT-18610,68710,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shaharz,Disham,Disham,27/Feb/19 7:11 AM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,REST API,,,,,,,1,PB_Done,QF,QF-P2,S-P1,,"Hi,

When using REST API to create repository, if a virtual repository is created with included repositories as duplicate names, it allows and shows the same in UI.

Steps to reproduce:
 # Create a virtual repository name my-virtual-repo
 # Create a local repository name my-local-repo
 # Use the following REST API :

 curl -X POST -H ""Content-Type: application/json"" -uadmin http://localhost:8081/artifactory/api/repositories/my-virtual-repo -d '\{""repositories"": [""my-local-repo"", ""my-local-repo""]}'

As Disha mentioned you will see the local repository twice 

 ",,,,,,,,,,,,,,,,,,,"27/Feb/19 7:10 AM;Disham;Screenshot 2019-02-27 at 12.40.29 PM.png;https://www.jfrog.com/jira/secure/attachment/31556/Screenshot+2019-02-27+at+12.40.29+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyr1b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Kubernetes persistentvolume permissions using Rook,RTFACT-18609,68697,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andrewjkrull,andrewjkrull,26/Feb/19 8:58 PM,05/Jan/21 11:21 AM,18/Feb/21 8:59 AM,,6.8.3,,,,,,,Artifact Storage,Kubernetes,,,,,,0,,,,,,"I am attempting to to follow the guide found here on getting Artifactory running on Kubernetes:

[https://github.com/jfrog/artifactory-docker-examples/tree/master/kubernetes]

Issue I am getting is the persistentVolume is mounted to the container with root privileges and the permissions checks fail when the artifactory container starts.  

$ kubectl create -f artifactory-oss.yml 
deployment.extensions/artifactory-k8s-deployment created
service/artifactory created
$ kubectl logs -f artifactory-k8s-deployment-b8b9bb5fd-klkh6
Error from server (BadRequest): container ""artifactory-oss-k8s"" in pod ""artifactory-k8s-deployment-b8b9bb5fd-klkh6"" is waiting to start: ContainerCreating
$ kubectl logs -f artifactory-k8s-deployment-b8b9bb5fd-klkh6
2019-02-26 20:08:18 [456 entrypoint-artifactory.sh] Preparing to run Artifactory in Docker
2019-02-26 20:08:18 [457 entrypoint-artifactory.sh] Running as uid=1030(artifactory) gid=1030(artifactory) groups=1030(artifactory)
2019-02-26 20:08:18 [49 entrypoint-artifactory.sh] Dockerfile for this image can found inside the container.
2019-02-26 20:08:18 [50 entrypoint-artifactory.sh] To view the Dockerfile: 'cat /docker/artifactory-oss/Dockerfile.artifactory'.
2019-02-26 20:08:18 [55 entrypoint-artifactory.sh] Checking open files and processes limits
2019-02-26 20:08:18 [58 entrypoint-artifactory.sh] Current max open files is 1048576
2019-02-26 20:08:18 [70 entrypoint-artifactory.sh] Current max open processes is unlimited
2019-02-26 20:08:18 [198 entrypoint-artifactory.sh] Setting up Artifactory data directories if missing
2019-02-26 20:08:19 [169 entrypoint-artifactory.sh] Testing directory /var/opt/jfrog/artifactory has read/write permissions for user 'artifactory' (id 1030)
/entrypoint-artifactory.sh: line 138: /var/opt/jfrog/artifactory/lost+found/test-permissions: Permission denied
2019-02-26 20:08:19 [187 entrypoint-artifactory.sh] ###########################################################
2019-02-26 20:08:19 [188 entrypoint-artifactory.sh] /var/opt/jfrog/artifactory DOES NOT have proper permissions for user 'artifactory' (id 1030)
2019-02-26 20:08:19 [189 entrypoint-artifactory.sh] Directory: /var/opt/jfrog/artifactory, permissions: 2775, owner: root, group: artifactory
2019-02-26 20:08:19 [190 entrypoint-artifactory.sh] Mounted directory must have read/write permissions for user 'artifactory' (id 1030)
2019-02-26 20:08:19 [191 entrypoint-artifactory.sh] ###########################################################
2019-02-26 20:08:19 [39 entrypoint-artifactory.sh] ERROR: Directory /var/opt/jfrog/artifactory has bad permissions for user 'artifactory' (id 1030)

 

I have attempted to modify the artifactory.yml file to use a securityContext to mount the drive with gid=1030 (artifactory) which isn't working

 

$ cat artifactory-oss.yml 
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
 name: artifactory-k8s-deployment
spec:
 replicas: 1
 template:
 metadata:
 labels:
 app: artifactory-oss-k8s
 group: artifactory-k8s-demo
 spec:
 securityContext:
 runAsUser: 1030
 fsGroup: 1030
 containers:
 - name: artifactory-oss-k8s
 image: docker.bintray.io/jfrog/artifactory-oss:6.8.3
 env:
 - name: DB_TYPE
 value: postgresql

---SNIP---

This isn't helping/working.

I know things are working as the postgres container started up and performed the necessary changes to get the mount point permission fixed. Within the postgesql container, the process is running as postgres with permissions set correctly on mount point:

root@postgresql-k8s-deployment-68bfd894dd-hwrsb:/# ls -lah /var/lib/postgresql/
total 12K
drwxr-xr-x 1 postgres postgres 4.0K Nov 16 06:07 .
drwxr-xr-x 1 root root 4.0K Nov 16 06:06 ..
drwx------ 19 postgres root 4.0K Feb 26 17:44 data

This should be addressed so this published deployment works.

 ","$ kubectl version
Client Version: version.Info\{Major:""1"", Minor:""13"", GitVersion:""v1.13.3"", GitCommit:""721bfa751924da8d1680787490c54b9179b1fed0"", GitTreeState:""clean"", BuildDate:""2019-02-01T20:08:12Z"", GoVersion:""go1.11.5"", Compiler:""gc"", Platform:""linux/amd64""}
Server Version: version.Info\{Major:""1"", Minor:""13"", GitVersion:""v1.13.2"", GitCommit:""cff46ab41ff0bb44d8584413b598ad8360ec1def"", GitTreeState:""clean"", BuildDate:""2019-01-10T23:28:14Z"", GoVersion:""go1.11.4"", Compiler:""gc"", Platform:""linux/amd64""}

$ kubectl get nodes
NAME STATUS ROLES AGE VERSION
k8s-1 Ready <none> 24d v1.13.3
k8s-2 Ready <none> 24d v1.13.3
k8s-3 Ready <none> 24d v1.13.3
k8s-master-01 Ready master 24d v1.13.3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyqyn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"03/Aug/19 12:08 AM;hlo;I ran into this issue as well, and here's what I did to fix it

Notice that the failure wasn't the /var/opt/jfrog/artifactory folder but a sub-folder ""lost+found""

 
{code:java}
/entrypoint-artifactory.sh: line 138: /var/opt/jfrog/artifactory/lost+found/test-permissions: Permission denied
{code}
So what I did was define an initContainer that cleans it up before starting

 
{code:java}
initContainers:
- name: remove-lost-found
  image: alpine:3.8
  command:
  - /bin/sh
  - -c
  - rm -rfv /var/opt/jfrog/artifactory/lost+found /var/opt/jfrog/artifactory/data/.lock
  volumeMounts:
  - mountPath: /var/opt/jfrog/artifactory
  name: artifactory-volume
  readOnly: false
{code}
For some reason the container started with a `lost+found` folder, which could be related to [https://wiki.gentoo.org/wiki/Knowledge_Base:What_is_the_lost%2Bfound_directory%3F]

This solution was inspired by the official [JFrog helm chart|[https://github.com/jfrog/charts/blob/master/stable/artifactory/templates/artifactory-statefulset.yaml#L62], for aritfactory.  Of course it wasn't exactly obvious why that was there in the first place until you run into this problem and realize it needs to be cleaned.  Hope that helps

 

 ",,,,,,,,,,
maxCacheSize notation will display NaN in UI if using the gb notation for size,RTFACT-18607,68692,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,paulp,paulp,26/Feb/19 5:34 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"In binarystore.xml, maxCacheSize is in bytes by default, but you can also use gb notation to specify size. 

The change is taking effect but in UI, the max cache size is displayed as NaN.

To confirm the change works in 'gb' notation, we tried:

 
 # changing max cache size to 0.1 gb
 # deploy and download file of size 10 MB and confirm the cache present
 # deploy and download file of size 200 MB and the cache was wiped ( in old version, oversized item will be cached too, but previous cache will be wiped)
 # download the small size file again and confirm it is in the cache location
 # UI display the correct cache size when cache is present. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyqxj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot fetch any packages from remote repository with repo name as single charater,RTFACT-18605,68670,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,muhammeds,muhammeds,26/Feb/19 10:30 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.7.2,6.8.2,,,,,,,,,,,,,1,,,,,,"Remote repositories created with the repo name with a single character doesn't allow artifacts to be resolved from it.

it hits with a http response of 500

 

 
{code:java}
{
  ""errors"" : [ {
    ""status"" : 500,
    ""message"" : ""Could not process download request: null""
  } ]
}
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyqsn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Lost master.key,RTFACT-18601,68633,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,madhu.joshi@u.group,madhu.joshi@u.group,26/Feb/19 1:18 AM,05/Jan/21 11:22 AM,18/Feb/21 8:59 AM,,6.5.0,,,,,,,,,,,,,,1,,,,,," 

Our company was renamed to U.group from Bytecubed.com.  So the license key maybe under that email address. 

We had to rebuild our EC2 server that was hosting the Jfrog Artifactory 6.5.0 running in AWS ECS service.  We didn't backup our master key- so the app wouldn't come up because of key mismatch.  We followed the steps listed at [https://jfrog.com/knowledge-base/how-to-recover-the-master-key/] to recover but that didn't help.  

We do have the license key for PRO version. 

Can you help us get the app started? We get this error:

 

Caused by: org.jfrog.access.client.AccessClientHttpException: HTTP response status 500:Failed on executing /api/v1/system/backup/export, with response: {
 ""errors"" : [

{ ""code"" : ""INTERNAL_SERVER_ERROR"", ""message"" : ""Unable to export access server"", ""detail"" : ""javax.crypto.BadPaddingException: Given final block not properly padded"" }

]
 }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyqkn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""no matched algorithm and key for AES128"" when upgrading from 6.0.0 to 6.5",RTFACT-18586,68533,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ISeCommAppTechCI,ISeCommAppTechCI,22/Feb/19 12:01 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.0.0,6.5.0,,,,,,,,,,,,,0,,,,,,"We're currently evaluating the ideal way to do an upgrade of Artifactory from version 6.0.0 to 6.8.2 (latest at this time).

When attempting to perform the upgrade from version 6.0.0 to 6.5.0, after replacing the binaries and starting Artifactory, we're getting the following error:
{code:java}
2019-02-22 10:01:29,545 [art-init] [ERROR] (o.j.s.c.EncryptionWrapperBase:185) - no matched algorithm and key for AES128
2019-02-22 10:01:29,550 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:92) - Application could not be initialized: no matched algorithm and key forAES128
{code}
followed by an _InvocationTargetException_ and
{code:java}
2019-02-22 10:01:30,350 [http-nio-8081-exec-3] [ERROR] (o.a.w.s.ArtifactoryFilter:191) - Artifactory failed to initialize: Context is null
{code}
If there a specific way of upgrading that would avoid this problem?","Ubuntu 16.04.4 (Linux 4.4.0-93)

Java 1.8.0_121-b13",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyq13:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM pre-release will be set to latest tag,RTFACT-18574,68485,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,scottm,scottm,20/Feb/19 7:38 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,3.8.0,,,,,,,NPM,,,,,,,4,,,,,,"If you publish a pre-release version to an npm repository, this version can be set to latest.

 

REPRODUCE

deploy an npm package e.g. jquery-3.3.1

deploy an npm pre-release package by setting version in package.json e.g. jquery-3.4.0-alpha

You will see in the package.json that the latest tag will show 3.4.1-alpha

 

So here’s what we’re looking for: any of the following would work:
 * a setting to prevent prerelease versions being tagged as latest
 * a setting to suppress latest tagging altogether on certain repos, similar to: [https://www.jfrog.com/confluence/display/RTF/Npm+Registry#NpmRegistry-SpecifyingtheLatestVersion]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzypqf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
'Failed to export metadata' backup error when npm repo contains package with description containing unicode string \u001b,RTFACT-18573,68478,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,gmzwinge482,gmzwinge482,20/Feb/19 5:35 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,5.9.5,,,,,,,Backup,,,,,,,0,,,,,,"After creating an npm repository, create a npm package using 'npm init --force', edit description in package.json and add the string \u001b. Eg: ""description"": ""This Unicode character \u001b gives backup error 'Failed to export metadata for ..."", then deploy the package to the npm repo on Artifactory.

The next Artifactory backup has an error like this: Failed to export metadata for '<repoName>:<packagePath>/<packageName>.tgz'.

Tried another Unicode character like ""\u0101"" and the backup doesn't give the error.",Node.js version v8.11.4.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyppj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Wheel METADATA with lines in the description that look like fields are incorrectly used,RTFACT-18571,68467,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,matthewwalker,matthewwalker,20/Feb/19 11:07 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.1.0,,,,,,,PyPI,,,,,,,0,artifactory,,,,,"It looks like we should only parse up until the first blank line. Example metadata:

{{Metadata-Version: 2.1}}
 {{Name: blah}}
 {{Version: 1.0.2.dev0}}
 {{Summary: Blah summary}}
 {{Home-page: [https://domain/]}}
 {{Author: First Last}}
 {{Author-email: name@email.com}}
 {{License: Proprietary}}
 {{Keywords: keyword}}
 {{Platform: any}}
 {{Classifier: Development Status :: 2 - Pre-Alpha}}
 {{Classifier: License :: Other/Proprietary License}}
 {{Classifier: Operating System :: OS Independent}}
 {{Classifier: Programming Language :: Python}}
 {{Classifier: Programming Language :: Python :: 3}}
 {{Requires-Dist: dep1 (==0.12.0)}}
 {{Requires-Dist: dep2}}

{{# Doc title}}

{{Example usage:}}
 {{```python}}
 {{blah = function(}}
 {{*name: str, # required*}}
 {{timeout: int = -1)}}
 {{```}}

The pypi.name ends up being set to ""str, # required"" when indexing occurs and the package becomes unavailable.

Workaround is to remove the setup(..., description=...)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzypnb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Admin rights not granted to users of 'crowd' realm after upgrade to 6.8.0,RTFACT-18570,68465,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,agrevtcev,agrevtcev,20/Feb/19 11:04 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.8.0,6.8.1,6.8.2,,,,,,,,,,,,2,,,,,,"We have Artifactory integrated with Atlassian Crowd user directory.

After upgrading 6.5.9 to 6.8.0, admin rights not granted to users of 'crowd' realm, so if user is member of 'artifactory-admins' group in 'crowd', and we granted admin permissions to 'artifactory-admins' group - user actually have no admin permissions.",,,,,,,,,,,,,RTFACT-18664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzypmv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"23/Feb/19 1:14 PM;ahochsteger;I can confirm the same problem on our side while upgrading from 6.3.2 to 6.8.2 which is currently blocking our upgrade process.","04/Mar/19 7:32 AM;degelma;I can also confirm the same Problem on our side when upgrading from 6.7.3 to 6.8.x. However we do not use crowd for authentication but LDAP.

After the upgrade our users are still able to login, artifactory still lists them as admin users, but any admin access via UI is inaccesible.","04/Mar/19 11:26 AM;arielk;We were able to identify the issue. RTFACT-18664",,,,,,,,
"ORA-01795 occurs when using UI search by exceeding ""IN"" operator limit",RTFACT-18566,68426,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidx,davidx,19/Feb/19 11:48 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,6.8.2,,,,,,,,,,,,,,1,,,,,,"When the UI REST endpoint is used with a large number of repos:
{code:java}
20190219152718|86|REQUEST|171.129.48.83|username|POST|/ui/artifactsearch/quick|HTTP/1.1|500|52997
{code}
The resulting query exceeds the Database IN operator limit of 1000:
{code:java}
2019-02-19 15:27:18,387 [http-nio-8081-exec-4] [ERROR] (o.a.s.SearcherBase :77) - Could not perform search.
org.artifactory.storage.StorageException: Could not execute query 'Executing SQL: 'SELECT nodes.node_id, nodes.node_type, nodes.repo, nodes.node_path, nodes.node_name FROM nodes WHERE nodes.node_type=1 AND nodes.repo IN (#) AND ROWNUM <= 1000 AND nodes.node_name LIKE ? ' with params: '[petestbu-libs-snapshot-local-npm, snpmtest-libs-release-local-nuget, artdifspk-libs-snapshot-local-nuget, snrtestspk-libs-release-local-npm, twostytrrp-libs-snapshot-local-nuget, petestcj-libs-snapshot-local-nuget, petestcq-libs-release-local-npm, sampspk-libs-snapshot-local-nuget,
.
.
.
petestbx-libs-release-local-nuget, petestbn-libs-snapshot-local-npm]', 'test%'' due to:ORA-01795: maximum number of expressions in a list is 1000

at org.artifactory.storage.db.search.model.VfsQueryDbImpl.executeSelect(VfsQueryDbImpl.java:301)
at org.artifactory.storage.db.search.model.VfsQueryDbImpl.execute(VfsQueryDbImpl.java:244)
at org.artifactory.search.ArtifactSearcher.doSearch(ArtifactSearcher.java:63)
at org.artifactory.search.ArtifactSearcher.doSearch(ArtifactSearcher.java:48)
at org.artifactory.search.SearcherBase.search(SearcherBase.java:66)
at org.artifactory.search.SearchServiceImpl.searchArtifacts(SearchServiceImpl.java:174)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
at com.sun.proxy.$Proxy177.searchArtifacts(Unknown Source)
at org.artifactory.ui.rest.service.artifacts.search.quicksearch.QuickSearchService.execute(QuickSearchService.java:65)
at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
at org.artifactory.ui.rest.resource.artifacts.search.ArtifactSearchResource.quickSearch(ArtifactSearchResource.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLSyntaxErrorException: ORA-01795: maximum number of expressions in a list is 1000

at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)
at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)
at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1054)
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:623)
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:252)
at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:612)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:226)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:59)
at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:747)
at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:904)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1082)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3780)
at oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1343)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3822)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1165)
at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:184)
at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:152)
at org.artifactory.storage.db.search.model.VfsQueryDbImpl.executeSelect(VfsQueryDbImpl.java:262)
... 84 common frames omitted
Caused by: oracle.jdbc.OracleDatabaseException: ORA-01795: maximum number of expressions in a list is 1000

at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)
... 101 common frames omitted
2019-02-19 15:27:18,404 [http-nio-8081-exec-4] [ERROR] (o.a.r.c.e.m.GlobalExceptionMapper:48) - Could not execute search query
org.artifactory.sapi.common.RepositoryRuntimeException: Could not execute search query
at org.artifactory.search.SearcherBase.search(SearcherBase.java:78)
at org.artifactory.search.SearchServiceImpl.searchArtifacts(SearchServiceImpl.java:174)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)
at com.sun.proxy.$Proxy177.searchArtifacts(Unknown Source)
at org.artifactory.ui.rest.service.artifacts.search.quicksearch.QuickSearchService.execute(QuickSearchService.java:65)
at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
at org.artifactory.ui.rest.resource.artifacts.search.ArtifactSearchResource.quickSearch(ArtifactSearchResource.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)
at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800)
at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:800)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1471)
at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748){code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzypfz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"storing release bundle when an older identical bundle is ""FAILED"" doesn't re-create the bundle",RTFACT-18559,68389,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yoazm,yoazm,19/Feb/19 12:08 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.8.1,,,,,,,,,,,,,,0,,,,,,"storing release bundle when an older identical bundle is ""FAILED"" doesn't re-create the bundle but just stores the artifacts, thus ending up with a new ""failed bundle"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyp7r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Error downloading nuget packages from nuget.org when jfrog artifactory configured behind nginx ,RTFACT-18554,68359,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,santoshchennuri,santoshchennuri,18/Feb/19 10:29 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,5.9.0,,,,,,,,,,,,,,1,,,,,,"Hi, 

Our Jfrog Artifactory is configured to run behind nginx reverse proxy and https is enabled. 

Jfrog Artifactory Version: 

Artifactory Professional
5.9.0 rev 50900900
Licensed 
© Copyright 2019 JFrog Ltd

nginx config file:

=========================

user nginx;
worker_processes 1;

error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;


events {
worker_connections 1024;
}


http {
include /etc/nginx/mime.types;
default_type application/octet-stream;

log_format main '$remote_addr - $remote_user [$time_local] ""$request"" '
'$status $body_bytes_sent ""$http_referer"" '
'""$http_user_agent"" ""$http_x_forwarded_for""';

access_log /var/log/nginx/access.log main;

sendfile on;
# tcp_nopush on;

keepalive_timeout 65;
client_max_body_size 50M;

#gzip on;

include /etc/nginx/conf.d/*.conf;

server {
#listen 443 ssl;
listen 443 ssl http2 default_server;
listen [::]:443 ssl http2 default_server;
server_name XYZ.com;
#root /usr/share/nginx/html;

ssl_certificate ""/etc/pki/nginx/xyz.com.pem"";
ssl_certificate_key ""/etc/pki/nginx/private/xyz.com.key"";
ssl_session_cache shared:SSL:1m;
ssl_session_timeout 10m;
ssl_ciphers HIGH:!aNULL:!MD5;
ssl_prefer_server_ciphers on;

# Load configuration files for the default server block.
include /etc/nginx/default.d/*.conf;

if ($http_x_forwarded_proto = '') {
set $http_x_forwarded_proto $scheme;
}

rewrite ^/$ /artifactory/webapp/ redirect;
rewrite ^/artifactory/?(/webapp)?$ /artifactory/webapp/ redirect;
chunked_transfer_encoding on;
client_max_body_size 0;

location / {
proxy_read_timeout 900;
proxy_pass_header Server;
proxy_cookie_path ~*^/.* /;

if ($request_uri ~ ^/artifactory/(.*)$ ) {
proxy_pass http://localhost:8081/artifactory/$1;
}

proxy_pass http://localhost:8081/artifactory/;
proxy_set_header X-Artifactory-Override-Base-Url $http_x_forwarded_proto://$host:$server_port/artifactory;
proxy_set_header X-Forwarded-Port $server_port;
proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;
proxy_set_header Host $http_host;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
}

error_page 404 /404.html;
location = /40x.html {
}

error_page 500 502 503 504 /50x.html;
location = /50x.html {
}
}
}

==========================

 

configured nuget repository local, remote, virtual, using nuget.exe as client to download nuget packages, jfrog artifactory is added as source to nuget client, so when client requests nuget package, artifactory downloads it and client downloads from artifactory, 

but I get below error:

=================

PS D:\.nuget> .\NuGet.exe install Newtonsoft.Json
Feeds used:
https://xyz.com/api/nuget/nuget

Installing package 'Newtonsoft.Json' to 'D:\.nuget'.
CACHE https://xyz.com/api/nuget/nuget/FindPackagesById()?id='Newtonsoft.Json'&semVerLevel=2.0.0
CACHE https://xyz.com:443/artifactory/api/nuget/nuget/FindPackagesById()?$skip=80&semVerLevel=2.0.0
&id='Newtonsoft.Json'


Attempting to gather dependency information for package 'Newtonsoft.Json.12.0.1' with respect to project 'D:\patientquic
kview\.nuget', targeting 'Any,Version=v0.0'
Gathering dependency information took 36.34 ms
Attempting to resolve dependencies for package 'Newtonsoft.Json.12.0.1' with DependencyBehavior 'Lowest'
Resolving dependency information took 0 ms
Resolving actions to install package 'Newtonsoft.Json.12.0.1'
Resolved actions to install package 'Newtonsoft.Json.12.0.1'
Retrieving package 'Newtonsoft.Json 12.0.1' from 'Artifactory'.
GET https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1
InternalServerError https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1 147
0ms
WARNING: Error downloading 'Newtonsoft.Json.12.0.1' from 'https://xyz.com/artifactory/api/nuget/nuget
/Download/Newtonsoft.Json/12.0.1'.
Response status code does not indicate success: 500 (Internal Server Error).
GET https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1
InternalServerError https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1 660
ms
WARNING: Error downloading 'Newtonsoft.Json.12.0.1' from 'https://xyz.com/artifactory/api/nuget/nuget
/Download/Newtonsoft.Json/12.0.1'.
Response status code does not indicate success: 500 (Internal Server Error).
GET https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1
InternalServerError https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1 890
ms
WARNING: Install failed. Rolling back...
Executing nuget actions took 3.1 sec
Error downloading 'Newtonsoft.Json.12.0.1' from 'https://xyz.com/artifactory/api/nuget/nuget/Download
/Newtonsoft.Json/12.0.1'.
Response status code does not indicate success: 500 (Internal Server Error).
PS D:\.nuget> .\NuGet.exe install Newtonsoft.Json
Feeds used:
https://xyz.com/api/nuget/nuget

Installing package 'Newtonsoft.Json' to 'D:\.nuget'.
CACHE https://xyz.com/api/nuget/nuget/FindPackagesById()?id='Newtonsoft.Json'&semVerLevel=2.0.0
CACHE https://xyz.com:443/artifactory/api/nuget/nuget/FindPackagesById()?$skip=80&semVerLevel=2.0.0
&id='Newtonsoft.Json'


Attempting to gather dependency information for package 'Newtonsoft.Json.12.0.1' with respect to project 'D:\patientquic
kview\.nuget', targeting 'Any,Version=v0.0'
Gathering dependency information took 35.52 ms
Attempting to resolve dependencies for package 'Newtonsoft.Json.12.0.1' with DependencyBehavior 'Lowest'
Resolving dependency information took 0 ms
Resolving actions to install package 'Newtonsoft.Json.12.0.1'
Resolved actions to install package 'Newtonsoft.Json.12.0.1'
Retrieving package 'Newtonsoft.Json 12.0.1' from 'Artifactory'.
GET https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1
InternalServerError https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1 956
ms
WARNING: Error downloading 'Newtonsoft.Json.12.0.1' from 'https://xyz.com/artifactory/api/nuget/nuget
/Download/Newtonsoft.Json/12.0.1'.
Response status code does not indicate success: 500 (Internal Server Error).
GET https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1
InternalServerError https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1 899
ms
WARNING: Error downloading 'Newtonsoft.Json.12.0.1' from 'https://xyz.com/artifactory/api/nuget/nuget
/Download/Newtonsoft.Json/12.0.1'.
Response status code does not indicate success: 500 (Internal Server Error).
GET https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1
InternalServerError https://xyz.com/artifactory/api/nuget/nuget/Download/Newtonsoft.Json/12.0.1 746
ms
WARNING: Install failed. Rolling back...
Executing nuget actions took 2.68 sec
Error downloading 'Newtonsoft.Json.12.0.1' from 'https://xyz.com/artifactory/api/nuget/nuget/Download
/Newtonsoft.Json/12.0.1'.
Response status code does not indicate success: 500 (Internal Server Error).

===============

 

 

Error in log:

 

2019-02-18 17:08:32,006 [http-nio-8081-exec-15] [ERROR] (o.a.r.c.e.GlobalExceptionMapper:48) - null
java.lang.NullPointerException: null
 at org.artifactory.rest.response.JerseyArtifactoryResponse.close(JerseyArtifactoryResponse.java:312)
 at org.artifactory.engine.DownloadServiceImpl.respondFoundResource(DownloadServiceImpl.java:392)
 at org.artifactory.engine.DownloadServiceImpl.respond(DownloadServiceImpl.java:263)
 at org.artifactory.engine.DownloadServiceImpl.process(DownloadServiceImpl.java:197)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
 at org.artifactory.request.aop.RequestAdvice.invoke(RequestAdvice.java:67)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy187.process(Unknown Source)
 at org.artifactory.addon.nuget.repo.NuGetRemoteRepoHandler.download(NuGetRemoteRepoHandler.java:157)
 at org.artifactory.addon.nuget.repo.NuGetRemoteRepoHandler.download(NuGetRemoteRepoHandler.java:88)
 at org.artifactory.addon.nuget.repo.NuGetVirtualRepoHandler.getResponse(NuGetVirtualRepoHandler.java:140)
 at org.artifactory.addon.nuget.repo.NuGetVirtualRepoHandler.download(NuGetVirtualRepoHandler.java:120)
 at org.jfrog.repomd.nuget.rest.NuGetSubResource.download(NuGetSubResource.java:113)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
 at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
 at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
 at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)
 at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
 at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:137)
 at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
 at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
 at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
 at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
 at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)
 at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)
 at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)
 at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)
 at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)
 at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)
 at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:184)
 at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:93)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:403)
 at org.artifactory.webapp.servlet.AccessFilter.useAnonymousIfPossible(AccessFilter.java:362)
 at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:208)
 at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:166)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:67)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)
 at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)
 at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:128)
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
 at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
 at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)
 at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
 at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
 at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)
 at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)

 

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyp13:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Maven builds can cause deadlocks on MSSQL database.,RTFACT-18553,68358,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,18/Feb/19 10:00 PM,05/Jan/21 1:11 PM,18/Feb/21 8:59 AM,,6.7.1,6.8.1,,,,,,,,,,,,,7,,,,,,"Steps to reproduce:
1. Create an environment with MSSQL database.
2. Create a maven build project - I used the pipeline maven example:
 [https://github.com/jfrog/project-examples/blob/master/jenkins-examples/pipeline-examples/scripted-examples/maven-example/Jenkinsfile]

3. Create 1-2 build attempts and the issue should be reproduced with the below errors:
{code:java}
2019-02-18 21:53:28,559 [http-nio-8081-exec-3] [ERROR] (o.a.r.HttpRepo      :1235) - jcenter: Failed to download 'https://jcenter.bintray.com/org/apache/maven/maven-model/2.0.6/maven-model-2.0.6.jar'. Received status code 200 and caught exception: class java.lang.reflect.UndeclaredThrowableException
2019-02-18 21:53:28,574 [http-nio-8081-exec-3] [WARN ] (o.a.r.ArtifactoryResponseBase:125) - Sending HTTP error code 500: Could not process download request: null
2019-02-18 21:53:28,628 [http-nio-8081-exec-1] [ERROR] (o.a.r.d.DbStoringRepoMixin:290) - Couldn't save resource jcenter:org/codehaus/plexus/plexus-interactivity-api/1.0-alpha-4/plexus-interactivity-api-1.0-alpha-4.jar, reason:
java.lang.reflect.UndeclaredThrowableException: null
	at com.sun.proxy.$Proxy68.next(Unknown Source)
	at org.artifactory.storage.db.fs.dao.PropertiesDao.getNodeProperties(PropertiesDao.java:84)
	at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.loadProperties(DbPropertiesServiceImpl.java:161)
	at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.getPropertiesById(DbPropertiesServiceImpl.java:100)
	at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.getProperties(DbPropertiesServiceImpl.java:94)
	at org.artifactory.storage.db.fs.service.DbPropertiesServiceImpl.getProperties(DbPropertiesServiceImpl.java:84)
	at org.artifactory.storage.db.fs.model.DbFsItem.getProperties(DbFsItem.java:105)
.
.
.
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Transaction (Process ID 64) was deadlocked on lock resources with another process and has been chosen as the deadlock victim. Rerun the transaction.
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)
	at com.microsoft.sqlserver.jdbc.SQLServerResultSet$FetchBuffer.nextRow(SQLServerResultSet.java:4853)
	at com.microsoft.sqlserver.jdbc.SQLServerResultSet.fetchBufferNext(SQLServerResultSet.java:1781)
	at com.microsoft.sqlserver.jdbc.SQLServerResultSet.next(SQLServerResultSet.java:1034)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyp0v:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Memory leak in the binary store,RTFACT-18551,68355,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yossis,yossis,18/Feb/19 7:21 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,,,,,,,,Binarystore,,,,,,,0,,,,,,"The binary store holds a map of binaries not to delete - org.artifactory.storage.db.binstore.service.BinaryServiceImpl#deleteProtectedBinaries

This map is consulted and cleaned by the binaries garbage collector. Since the binaries GC only executes in the primary node, this map is never cleaned in non primary nodes.

Note also that the usefulness of this map is dubious since it doesn't really protect binaries that were just added and it not required for binaries that are currently read.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyp07:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Multiple builds of same helm chart (same name and version) not updating index.yaml,RTFACT-18548,68348,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,wojciechka,wojciechka,18/Feb/19 3:21 PM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.6.5,,,,,,,Helm,,,,,,,1,,,,,,"I was able to reproduce it consistently by creating a local helm repository and a virtual helm repository using the local helm repository as default backend.

The doing the following steps:
 * upload build A of a chart (to either local or virtual repository - same effect)
 * index.yaml points to build A for the chart
 * upload build B of same chart (to either local or virtual repository - same effect)
 * delete build A of a chart (delete can only be done on local repository, not the virtual repository)
 * index.yaml has no reference to the chart at all
 * run re-indexing of the local repository
 * index.yaml points to build B for the chart

This is when using Artifactory as a helm chart repository where multiple builds of same helm chart are pushed - such as daily builds that have same chart name and chart version.

The index.yaml points to first build that was pushed and even a deletion of old builds is not sufficient to have the index.yaml point to latest version.

The helm chart repository should have a setting that defines behavior in case of multiple instances of same helm chart being present - i.e. so that I can configure a repository to pick up the earliest, latest or other version.

As an alternative, if this scenario is not supported, I would expect Artifactory to throw an error like 409 when uploading multiple instances of helm chart with same name and version.

 ","This was reproduced using a trial instance of Artifactory on AWS, but was noticed for multiple instances of Artifactory.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyoyn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory UI vendorScript reload is slow on IE 11,RTFACT-18546,68337,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,18/Feb/19 12:50 PM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.8.1,,,,,,,Web UI,,,,,,,0,,,,,,"Currently when browsing Artifactory with internet explorer version 11 the first reload of the vendorScript is slow and can take approximately 30 seconds.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyow7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Cannot login to preconfigured scoped npm registry,RTFACT-18537,68312,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davidp,davidp,17/Feb/19 12:46 PM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,QF,QF-P2,,,"After configuring .npmrc with the following command ""npm login"" fails with error 401:

npm config set @<SCOPE>:registry [https://davidpart.jfrog.io/davidpart/api/npm/npm/]

Steps to reproduce:
 # npm config set @<SCOPE>:registry https://<ARTIFACTORY_URL>:8081/artifactory/api/npm/npm/
 # npm login with Artifactory credentials 

Output:

npm ERR! code E401

npm ERR! Incorrect or missing password.

npm ERR! If you were trying to login, change your password, create an

npm ERR! authentication token or enable two-factor authentication then

npm ERR! that means you likely typed your password in incorrectly.

npm ERR! Please try again, or recover your password at:

npm ERR!     https://www.npmjs.com/forgot

npm ERR!

npm ERR! If you were doing some other operation then your saved credentials are

npm ERR! probably out of date. To correct this please try logging in again with:

npm ERR!     npm login

 

Workaround:
 # Remove .npmrc file
 # Configure your default npm registry with an Artifactory npm repository with the next command:

npm config set registry https://<ARTIFACTORY_URL>:8081/artifactory/api/npm/npm/
 # Npm login with your Artifactory login credentials
 # Install the npm scoped package with the next command:
 # Npm install @angular/<Example>",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzze2c:i",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Setting environment variables to configure tomcat server.xml is not working for Artifactory docker installation when using custom uid:gid to run the container,RTFACT-18531,68280,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,15/Feb/19 10:15 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,Docker Image,,,,,,0,,,,,,"Setting environment variables to configure tomcat server.xml is not working for Artifactory docker installation when using custom uid:gid to run the container. It fails with the below error when trying to update the server.xml.template with the env variable value, as the ""server.xml.template"" file under the /opt/jfrog/artifactory/ is still owned by the ""artifactory"" user.

2019-02-15 21:03:01   [87 entrypoint-artifactory.sh] Customising Tomcat server.xml if needed

sed: couldn't open temporary file /opt/jfrog/artifactory/sedYljrHx: Permission denied

2019-02-15 21:03:01   [47 entrypoint-artifactory.sh] ERROR: Updating SERVER_XML_FULL in /opt/jfrog/artifactory/server.xml.template failed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyojz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory Docker Container should be able to change the admin password when initially run,RTFACT-18530,68276,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,markg,markg,15/Feb/19 5:40 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker Image,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyoj3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
License Control feature may use too much memory and DB temp table space,RTFACT-18527,68261,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,joshuah,joshuah,15/Feb/19 5:14 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,5.8.9,6.7.0,,,,,,AQL,License Control,,,,,,0,,,,,,"h2. Issue

When there are many builds associated with License Control, it may consume excessive amount of Artifactory's allocated memory and database's temp table space while License Control's AQL runs.
h2. Request

Enhance AQL used by the license control and/or limit memory and DB temp table space usage by it
h2. Stack trace

2019-01-25 08:13:26,958 [art-exec-47851] [ERROR] (o.a.s.a.AsyncAdvice :251) - Could not execute async method: 'public abstract com.google.common.collect.Multimap org.artifactory.addon.license.service.LicensesService.populateLicenseInfo(org.jfrog.build.api.Build,boolean,boolean)'.

org.artifactory.aql.AqlException: Failed to execute the following sql querySqlQuery\{query='select distinct  n.updated as itemUpdated,b.ci_url as buildUrl,b.build_name as buildName,b.build_number as buildNumber,b.created as buildCreated,b.created_by as buildCreatedBy,b.modified as buildModified,b.modified_by as buildModifiedBy,bd.dependency_name_id as buildDependencyName,n.sha1_actual as itemActualSha1,n.md5_actual as itemActualMd5,n.sha1_original as itemOriginalSha1,n.md5_original as itemOriginalMd5,n.created as itemCreated,n.modified_by as itemModifiedBy,n.created_by as itemCreatedBy,n.repo as itemRepo,n.node_path as itemPath,n.node_name as itemName,n.bin_length as itemSize from  builds b left outer join build_modules bm on bm.build_id = b.build_id left outer join build_dependencies bd on bd.module_id = bm.module_id left outer join nodes n on n.sha1_actual = bd.sha1 where ( b.build_name = ? and b.build_number = ?) order by itemUpdated ASC ', params=[plugin-demo, 1]}

       at org.artifactory.storage.db.aql.dao.AqlDao.executeQueryEager(AqlDao.java:71) ~[artifactory-storage-db-5.8.9.jar:na]

       at org.artifactory.storage.db.aql.service.AqlServiceImpl.getAqlQueryResult(AqlServiceImpl.java:190) ~[artifactory-storage-db-5.8.9.jar:na]

       at org.artifactory.storage.db.aql.service.AqlServiceImpl.executeQueryEager(AqlServiceImpl.java:144) ~[artifactory-storage-db-5.8.9.jar:na]

       at org.artifactory.build.BuildServiceImpl.getBuildDependenciesFileInfos(BuildServiceImpl.java:603) ~[artifactory-core-5.8.9.jar:na]

       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]

       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]

       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]

       at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]

       at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317) ~[spring-aop-4.1.5.RELEASE.jar:4.1.5.RELEASE]

       at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201) ~[spring-aop-4.1.5.RELEASE.jar:4.1.5.RELEASE]

       at com.sun.proxy.$Proxy198.getBuildDependenciesFileInfos(Unknown Source) ~[na:na]

       at org.artifactory.addon.license.service.LicensesServiceImpl.uniqueDependencyFileInfoMap(LicensesServiceImpl.java:804) ~[artifactory-addon-license-5.8.9.jar:na]

       at org.artifactory.addon.license.service.LicensesServiceImpl.populateLicenseInfo(LicensesServiceImpl.java:486) ~[artifactory-addon-license-5.8.9.jar:na]

       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]

       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]

       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]

       at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]

       at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317) ~[spring-aop-4.1.5.RELEASE.jar:4.1.5.RELEASE]

              at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) ~[spring-aop-4.1.5.RELEASE.jar:4.1.5.RELEASE]

       at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) ~[spring-aop-4.1.5.RELEASE.jar:4.1.5.RELEASE]

       at org.artifactory.schedule.aop.TraceableMethodInvocation.proceed(TraceableMethodInvocation.java:58) ~[artifactory-core-5.8.9.jar:na]

       at org.artifactory.schedule.aop.AsyncAdvice.doInvoke(AsyncAdvice.java:325) ~[artifactory-core-5.8.9.jar:na]

       at org.artifactory.schedule.aop.CompoundInvocation.proceed(CompoundInvocation.java:58) ~[artifactory-core-5.8.9.jar:na]

       at org.artifactory.schedule.aop.AsyncAdvice.lambda$1(AsyncAdvice.java:246) ~[artifactory-core-5.8.9.jar:na]

       at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_144]

       at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:30) ~[artifactory-common-5.8.9.jar:na]

       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_144]

       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_144]

       at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_144]

Caused by: java.sql.SQLException: ORA-01652: unable to extend temp segment by 128 in tablespace TEMP2

       at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:450) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:399) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1059) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:522) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:257) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:587) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:225) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:53) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:774) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:925) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1111) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:4798) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:4845) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1501) ~[ojdbc7-12.1.0.2.0-.jar:12.1.0.2.0]

       at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:170) ~[jfrog-db-infra-1.3.16.jar:na]

       at org.jfrog.storage.JdbcHelper.executeSelect(JdbcHelper.java:139) ~[jfrog-db-infra-1.3.16.jar:na]

       at org.artifactory.storage.db.aql.dao.AqlDao.executeQueryEager(AqlDao.java:65) ~[artifactory-storage-db-5.8.9.jar:na]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyofz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Hide Existence of Unauthorized Resources resulting 401 instead of 404,RTFACT-18522,68238,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lakshmip,lakshmip,14/Feb/19 5:03 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.7.3,,,,,,,,,,,,,,0,PB_Done,QF,QF-P2,,,"Here are the steps to reproduce the issue

Make sure the repository doesn't have anonymous read permissions

1. Enable ‘Allow Anonymous Access’ from ‘General Security Configuration

2. Enable ‘Hide Existence of Unauthorized Resources’ from ‘General Security Configuration’

ip-10-8-16-47:~ lakshmiprasad$ curl http://<Artifactory_URL>/artifactory/list/libs-release-local

 { ""errors"" : [ {

    ""status"" : 404,

   ""message"" : ""Resource not found"" }]

 

However, when we add slash '/' at the end it is throwing 401 instead of 404

ip-10-8-16-47:~ lakshmiprasad$ curl http://<Artifactory_url>/artifactory/list/libs-release-local/

{ ""errors"" : [ {

    ""status"" : 401,

    ""message"" : ""Unauthorized""} ]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc6fjp:w",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Delete Versions"" from the UI does not delete files that do not have an extension",RTFACT-18521,68230,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jam736,jam736,14/Feb/19 4:04 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,6.5.0,,,,,,,Web UI,,,,,,,0,,,,,,"I have a repository layout defined as [orgPath]/[module]/[baseRev]/[fileName<.*>] that groups all related files for an artifact. When I select ""Delete Versions"" in the Web UI, I am presented with all the version that I wish to select to delete. The deletion executes and completes successfully. This resulted in all associated files being deleted with the baseRev except for any file without an extension.

Example:

There are two files in the bin directory of the test-repository for versions 98 and 99:

test-repository/artifact/1.0/1.0-98/bin/executable.exe

test-repository/artifact/1.0/1.0-98/bin/keystore

test-repository/artifact/1.0/1.0-99/bin/executable.exe

test-repository/artifact/1.0/1.0-99/bin/keystore

Selecting ""Delete Versions"" at the 1.0 directory level and choosing 1.0-98 deletes

test-repository/artifact/1.0/1.0-98/bin/executable.exe but does not delete

test-repository/artifact/1.0/1.0-98/bin/keystore.

 

I'm not sure if this is a configuration issue with my layout or a bug. Any guidance is appreciated.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyoan:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory wrongfully returns 404 as a general error in deployment (and other cases),RTFACT-18518,68223,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,danf,danf,14/Feb/19 2:44 PM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,,,,,,,,Upload,,,,,,,0,,,,,,"In some cases, e.g encountering unexpected EOF in deployment (client fault) an exception is correctly thrown and caught but the return code is 404 instead of 500.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyo9b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Go module is not fetched and goget.html file is in artifactory instead,RTFACT-18516,68218,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,brg@kaloom.com,brg@kaloom.com,14/Feb/19 1:34 PM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.7.3,,,,,,,Go,,,,,,,5,go,golang,,,,"Using the latest artifactory release 6.7.3, we are still encountering the issue of having goget.html instead of the real go module. This was reported to be fixed in 6.7 release.

 

Here is the go.mod file:

module org/mod1

require (
        github.com/olekukonko/tablewriter v0.0.1
        github.com/ugorji/go v1.1.1 // indirect
)

 

Content of goget.html stored in Go repository:

goget.html

<html>
 <head>
  <meta name=""go-import"" content=""github.com/olekukonko/tablewriter git https://github.com/olekukonko/tablewriter.git"">
 </head>
 <body></body>
</html>


<html>
 <head>
  <meta name=""go-import"" content=""github.com/ugorji/go git https://github.com/ugorji/go.git"">
 </head>
 <body></body>
</html>

 

Errors when running go mod tidy:

$ echo $GO111MODULE
on
$ echo $GOPROXY
https://<user>:<Token>@<Artifactory URL>/artifactory/api/go/go

$ go mod tidy
go: github.com/ugorji/go@v1.1.1: unexpected status (https://<user>:<Token>@<Artifactory URL>/artifactory/api/go/go/github.com/ugorji/go/@v/v1.1.1.mod): 404 Not Found
go: github.com/olekukonko/tablewriter@v0.0.1: unexpected status (https://<user>:<Token>@<Artifactory URL>/artifactory/api/go/go/github.com/olekukonko/tablewriter/@v/v0.0.1.mod): 404 Not Found
go: error loading module requirements

 

 

From artifactory logs, here are the related entries in different logs:

requests.log:
-------------
20190214072607|6|REQUEST|192.168.32.156|<user-id>|GET|/api/go/go/github.com/olekukonko/tablewriter/@v/v0.0.1.mod|HTTP/1.1|404|0
20190214072607|7|REQUEST|192.168.32.156|<user-id>|GET|/api/go/go/github.com/ugorji/go/@v/v1.1.1.mod|HTTP/1.1|404|0
20190214072607|5|REQUEST|192.168.32.156|<user-id>|GET|/api/go/go/github.com/ugorji/go/@v/v1.1.1.mod|HTTP/1.1|404|0
20190214072607|6|REQUEST|192.168.32.156|<user-id>|GET|/api/go/go/github.com/olekukonko/tablewriter/@v/v0.0.1.mod|HTTP/1.1|404|0


artifactory.log:
----------------
2019-02-14 07:26:07,795 [http-nio-8081-exec-2465] [ERROR] (o.a.a.g.r.r.f.GoRemoteFetcher:138) - Could not download to 'go-remote:github.com/olekukonko/tablewriter/@v/v0.0.1.mod': Not Found
2019-02-14 07:26:07,796 [http-nio-8081-exec-2489] [ERROR] (o.a.a.g.r.r.f.GoRemoteFetcher:138) - Could not download to 'go-remote:github.com/ugorji/go/@v/v1.1.1.mod': Not Found
2019-02-14 07:26:07,830 [http-nio-8081-exec-2473] [ERROR] (o.a.a.g.r.r.f.GoRemoteFetcher:138) - Could not download to 'go-remote:github.com/ugorji/go/@v/v1.1.1.mod': Not Found



 

The same error is encountered when importing the following go modules as well:

go: github.com/Microsoft/go-winio@v0.4.11: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/%21microsoft/go-winio/@v/v0.4.11.info): 404 Not Found
go: github.com/stretchr/testify@v1.2.2: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/stretchr/testify/@v/v1.2.2.info): 404 Not Found
go: github.com/gorilla/websocket@v1.4.1-0.20190205004414-7c8e298727d1: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/gorilla/websocket/@v/v1.4.1-0.20190205004414-7c8e298727d1.info): 404 Not Found
go: github.com/jtolds/gls@v4.2.1+incompatible: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/jtolds/gls/@v/v4.2.1+incompatible.info): 404 Not Found
go: golang.org/x/sys@v0.0.0-20190116161447-11f53e031339: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/golang.org/x/sys/@v/v0.0.0-20190116161447-11f53e031339.info): 404 Not Found
go: github.com/mattn/go-runewidth@v0.0.5-0.20181218000649-703b5e6b11ae: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/mattn/go-runewidth/@v/v0.0.5-0.20181218000649-703b5e6b11ae.info): 404 Not Found
go: github.com/gopherjs/gopherjs@v0.0.0-20181103185306-d547d1d9531e: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/gopherjs/gopherjs/@v/v0.0.0-20181103185306-d547d1d9531e.info): 404 Not Found
go: github.com/davecgh/go-spew@v1.1.0: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/davecgh/go-spew/@v/v1.1.0.info): 404 Not Found
go: github.com/smartystreets/assertions@v0.0.0-20190116191733-b6c0e53d7304: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/smartystreets/assertions/@v/v0.0.0-20190116191733-b6c0e53d7304.info): 404 Not Found
go: github.com/pmezard/go-difflib@v1.0.0: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/pmezard/go-difflib/@v/v1.0.0.info): 404 Not Found
go: nanomsg.org/go-mangos@v1.4.0: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/nanomsg.org/go-mangos/@v/v1.4.0.info): 404 Not Found
go: github.com/google/uuid@v0.0.0-20161128191214-064e2069ce9c: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/google/uuid/@v/v0.0.0-20161128191214-064e2069ce9c.info): 404 Not Found
go: github.com/smartystreets/goconvey@v0.0.0-20181108003508-044398e4856c: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/smartystreets/goconvey/@v/v0.0.0-20181108003508-044398e4856c.info): 404 Not Found
go: github.com/go-mangos/mangos@v1.4.0: unexpected status (https://<user>:<TOKEN>@<ARTIFACTORY-URL>/artifactory/api/go/go/github.com/go-mangos/mangos/@v/v1.4.0.info): 404 Not Found

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyo87:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Test Connection from Xray will always go via System Default Proxy,RTFACT-18512,68172,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,13/Feb/19 7:56 PM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.7.2,,,,,,,Xray,,,,,,,1,,,,,,"When triggering a ""Test Connection"" in Xray, it uses ""POST /api/system/verifyconnection"" to Artifactory.
In case a System Default Proxy is configured in Artifactory, when Artifactory will try to connect to Xray, it will always try to go via proxy, also when ""Bypass System Default Proxy Configuration"" is enabled.

*+Steps to reproduce:+*
1. Configure Artifactory & Xray integration.
2. In Artifactory, configure a System Default Proxy. (an actual proxy is not needed to reproduce the issue)
3. Select ""Bypass System Default Proxy Configuration"" for Xray.
4. From Xray, invoke the ""Test Connection"", it will not work (in case there is no actual proxy or no communication from the proxy to Xray)

*+Impact+*
This bug seem to be only related to the test connection, however is very confusing for initial setup and causes lots of confusion and a huge waste of time when configuring, as you think there is an issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzynyv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Mar/19 10:20 PM;mcarlton;I also ran into this. It's very confusing! It's also frustrating because you cannot change the admin username, password, or URL of the artifactory instance you are connecting to once it is made. You have to completely delete it and start over which sucks when you already have it completely indexed.",,,,,,,,,,
Deploying artifact bundle (archive) fails,RTFACT-18507,68130,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jsexton,jsexton,12/Feb/19 10:06 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.6.3,,,,,,,,,,,,,,2,,,,,,"When deploying artifact bundles ([UI|https://www.jfrog.com/confluence/display/RTF/Deploying+Artifacts#DeployingArtifacts-DeployinganArtifactBundle], [API|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-DeployArtifactsfromArchive]), Artifactory can fail when multiple archives are uploaded in a short period of time, and are being handled in parallel by the server. This is an example from the Artifactory logs of such a failure (many such lines, just pasted the first few):

{{2019-02-12 07:29:29,725 [https-jsse-nio-443-exec-27] [ERROR] (o.a.u.ZipUtils :438) - Failed to create directory 'C:\artifactory-pro\data\tmp\artifactory-uploads\99bef622c0b14568bc92eb5791443c91.zip_extracted_1549978169725\doctrees'}}
 {{2019-02-12 07:29:29,725 [https-jsse-nio-443-exec-27] [ERROR] (o.a.u.ZipUtils :438) - Failed to create directory 'C:\artifactory-pro\data\tmp\artifactory-uploads\99bef622c0b14568bc92eb5791443c91.zip_extracted_1549978169725\generated'}}
 {{2019-02-12 07:29:29,725 [https-jsse-nio-443-exec-27] [ERROR] (o.a.u.ZipUtils :438) - Failed to create directory 'C:\artifactory-pro\data\tmp\artifactory-uploads\99bef622c0b14568bc92eb5791443c91.zip_extracted_1549978169725\html'}}
 {{2019-02-12 07:29:29,991 [https-jsse-nio-443-exec-27] [ERROR] (o.a.u.ZipUtils :438) - Failed to create directory 'C:\artifactory-pro\data\tmp\artifactory-uploads\99bef622c0b14568bc92eb5791443c91.zip_extracted_1549978169725\html_modules'}}
 {{2019-02-12 07:29:29,991 [https-jsse-nio-443-exec-27] [ERROR] (o.a.u.ZipUtils :438) - Failed to create directory 'C:\artifactory-pro\data\tmp\artifactory-uploads\99bef622c0b14568bc92eb5791443c91.zip_extracted_1549978169725\html_sources'}}
 {{2019-02-12 07:29:29,991 [https-jsse-nio-443-exec-27] [ERROR] (o.a.u.ZipUtils :438) - Failed to create directory 'C:\artifactory-pro\data\tmp\artifactory-uploads\99bef622c0b14568bc92eb5791443c91.zip_extracted_1549978169725\html_static'}}

On the client side, the uploader sees this error message

{{requests.exceptions.HTTPError: 500 Server Error: Internal Server Error}}

Note that in this case, the archives are being uploaded to a ""Generic"" repository.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzynqv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Virtual CRAN repository returns empty metadata on anonymous request,RTFACT-18498,68086,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,11/Feb/19 9:53 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,CRAN,,,,,,,1,,,,,,"*Problem: On Windows R clients, the exact same package search returns an error compared to the same command on Linux.*

 

This is an error because the same behavior does not occur on Linux. The error looks to be due to Artifactory not returning the correct response when an Anonymous query is ran against a virtual repository.

 

When Anonymous access is enabled, but the anonymous user does not have access to all the repositories in a virtual CRAN repository, Artifactory will return an empty response instead of the expected 401 Forbidden.

*Expected behavior: Artifactory should return a 401 Forbidden error if the client making the request does not have access to the repository, not an empty 200 OK.*

This has occurred for other repository types as well, such as for P2 virtual repositories (RTFACT-13834).

 

It looks like the Windows CRAN client expects a 401 Forbidden response before it will send credentials, even when the client is configured as per our Documentation.

 

Steps to reproduce:
 # Set up a virtual Cran repository containing a remote Cran repository
 # Remove Anonymous Read and Write access to the remote repository
 # Attempt the R ""List packages"" command:
 *available.packages(repos=c(CRAN='[http://admin:password@artifactory.com:8081/artifactory/cran/'))]*
 # Observe that the client lists 0 packages

It looks like when Anonymous Access is allowed, but the Anonymous user cannot read or write the virtual repository's aggregated repos, Artifactory sends an empty file:

20190211214110|29|REQUEST|12.244.40.18|anonymous|GET|/cran/src/contrib/PACKAGES.rds|HTTP/1.1|404|0

20190211214110|6|REQUEST|12.244.40.18|anonymous|GET|/cran/src/contrib/PACKAGES.gz|HTTP/1.1|404|0

*20190211214110|208|REQUEST|12.244.40.18|anonymous|GET|/cran/src/contrib/PACKAGES|HTTP/1.1|200|0*

Versus the same output with Anonymous Access disabled:

*20190211214205|2|REQUEST|12.244.40.18|non_authenticated_user|GET|/cran/src/contrib/PACKAGES.rds|HTTP/1.1|401|0*

20190211214205|44|REQUEST|12.244.40.18|admin|GET|/cran/src/contrib/PACKAGES.rds|HTTP/1.1|404|0

20190211214205|5|REQUEST|12.244.40.18|admin|GET|/cran/src/contrib/PACKAGES.gz|HTTP/1.1|404|0

*20190211214205|175|REQUEST|12.244.40.18|admin|GET|/cran/src/contrib/PACKAGES|HTTP/1.1|200|2329405*

This has only been observed on the Windows R client, version 3.5.2.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzynj3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Reenable/rewrite flaky test,RTFACT-18493,68073,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,galba,galba,11/Feb/19 2:25 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,HAPropagationServiceOnlyPrimaryImportBundledTest,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyngv:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory fails to start if linked to a Bintray account that parameters start with numeric characters or includes spaces,RTFACT-18490,68067,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaharl,shaharl,11/Feb/19 12:36 PM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,0,,,,,,"When a distribution repository in Artifactory is linked to a Bintray account that has parameters i.e.: username, organization name etc... that start with numerical characters, pushing can be done, but artifactory fails to load after a restart.

Step to reproduce:

1) Sign up for a new Bintray account

2) Fill in the sign up form using numerical values - username, organization name etc...

3) Set up a distribution account on Artifactory (It was tested with a saas account)

4) Link the distribution repository to the new Bintray account

5) Publish some file to Bintray

6) Restart Artifactory

When trying to start Artifactory, the following error is being shown:

{code}

Caused by: org.xml.sax.SAXParseException: cvc-datatype-valid.1.2.1: '123456789-1549618360936' is not a valid value for 'NCName'.

 

`<bintrayApplicationRef>123456789-1549618360936</bintrayApplicationRef>`

 

n xsd:NCName value must start with either a letter or underscore (_) and may contain only letters, digits, underscores (_), hyphens (-), and periods (.).

{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyuan:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Docker registry 'Test' button returns ""Successfully connected"" for bad credentials",RTFACT-18488,68060,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,valeriyp,valeriyp,11/Feb/19 9:53 AM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Docker,Remote Repository ,,,,,,2,QF,QF-P3,,,,"*+Steps to reproduce:+*
 # Create a docker remote repository with one of the following URL's:

[https://registry.redhat.io|https://registry.redhat.io/], [https://registry.access.redhat.com|https://registry.access.redhat.com/] 
 # Set wrong username/password
 # Press the 'Test' button
 # 
""Successfully connected to server"" returned instead of expected ""Connection failed""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyne7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Xray integration shows resources from release bundles,RTFACT-18484,68005,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,orene,orene,10/Feb/19 12:39 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"when using the package viewer within artifactory instance that is used as a source artifactory for distribution - xray shows resources that are located under the ""release-bundle"" special repo.

!image-2019-02-10-14-39-11-296.png!",,,,,,,,,,,,,,,,,,,"10/Feb/19 12:39 PM;orene;image-2019-02-10-14-39-11-296.png;https://www.jfrog.com/jira/secure/attachment/31442/image-2019-02-10-14-39-11-296.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzymjz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Upgraded and fail to start,RTFACT-18473,67917,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rappen,rappen,07/Feb/19 4:57 PM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.7.2,,,,,,,,,,,,,,0,artifactory,,,,,"Possible a bug.
I have upgraded my pro installation from 5.8.3 to 6.7.2 by following the instructions.
It's a standalone zip installation.

When I try to start it, I get the following error: 

Caused by: javax.crypto.BadPaddingException: *{color:#FF0000}Given final block not properly padded{color}*
 at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:989)
 at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:845)
 at com.sun.crypto.provider.PKCS12PBECipherCore.implDoFinal(PKCS12PBECipherCore.java:399)
 at com.sun.crypto.provider.PKCS12PBECipherCore$PBEWithSHA1AndDESede.engineDoFinal(PKCS12PBECipherCore.java:431)
 at javax.crypto.Cipher.doFinal(Cipher.java:2165)
 at org.jfrog.security.crypto.JFrogCryptoHelper.decryptSymmetric(JFrogCryptoHelper.java:302)
 at org.jfrog.security.crypto.encrypter.DESedeBytesEncrypter.decrypt(DESedeBytesEncrypter.java:43)
 at org.jfrog.security.crypto.EncryptionWrapperBase.decrypt(EncryptionWrapperBase.java:124)",LHREL ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzylzz:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"15/Feb/19 10:01 AM;rappen;Now I did a clean installation of 6.7.2 and I can start it, however when trying to do a system import I get the same error.
The only thing I replaced in the configuration after unzipping was the server.xml which is pointing to the .jks file.
Are there any PKCS changes between 5.8.3 and 6.7.2?",,,,,,,,,,
Permission on admin/security/permission not checked properly,RTFACT-18472,67911,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kPshi,kPshi,07/Feb/19 3:24 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,6.7.0,,,,,,,permissions,,,,,,,0,,,,,,"When logged in as a non-admin user and opening a permissions edit pane directly (e.g. by link, copy/paste, ...) I get notified

 

{{You are not authorized to view this page}}

 

and a warning about unsaved changes. Hitting cancel here I can still browse the page although some information is missing I can still find some which seems not to be intended.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzylzb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Empty virtual repositories are not listed in the Get Repositories REST API,RTFACT-18471,67898,Bug,Pending QA,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,ohadl,mohammadt,mohammadt,07/Feb/19 1:19 PM,05/Jan/21 5:11 PM,18/Feb/21 8:59 AM,,6.7.2,,,,,7.11.1,,REST API,,,,,,,5,PB_Done,QF,QF-P2,S-P1,,"Empty virtual repositories are not listed in the Get Repositories REST API

Steps to reproduce:

1. Create a new empty virtual repo.
2. Run the Get Repositories REST API:
curl ""http://localhost:8081/artifactory/api/repositories"" -uadmin:password -v

3. You will not get the empty virtual repository in the results.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc4qk7:zc",,,Yes,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/20 3:01 PM;joe.henshaw;Any chance of this being fixed?","14/Feb/20 3:14 PM;Raphaël BI;We have the same behavior 
Artifactory version : 6.16.0","12/Aug/20 5:03 PM;mcarlton;We are having this same issues in the latest JFrog Platform 7.6.3. This is blocking some of our automation because we can't get a full listing of virtual repos to configure.",,,,,,,,
handle and recover panics in gofrog package,RTFACT-18466,67884,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,yoazm,yoazm,07/Feb/19 9:27 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"process crashes when panic is invoked

top priority:
 * runner - async task can crash the replicator server easily

more:
 * fanout
 * lru",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyltj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
npm metadata api request on remote repository returns 403 for a cached artifact if user does not have deploy permission,RTFACT-18463,67861,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,06/Feb/19 10:23 PM,05/Feb/21 12:51 PM,18/Feb/21 8:59 AM,,6.7.2,,,,,,,,,,,,,,5,,,,,,"Currently, if a user with only read permissions tries to use the api/npm endpoint to grab expired metadata (like the npm client does), Artifactory fails the request with a 403:

curl http://35.193.64.65:8081/artifactory/api/npm/npm-remote/ajv-keywords/

{ ""errors"" : [ \{ ""status"" : 403, ""message"" : ""User testperson is not permitted to deploy '.npm/ajv-keywords/package.json' into 'npm-remote-cache:.npm/ajv-keywords/package.json'."" } ] }

However, trying to resolve the package directly without the api/npm endpoint works, and the package is unexpired:

[http://35.193.64.65:8081/artifactory/npm-remote/.npm/ajv-keywords/package.json]?trace

returns:

2019-02-06T22:17:47.241Z Using remote request URL - https://registry.npmjs.org/.npm/ajv-keywords/package.json
2019-02-06T22:17:47.241Z Executing HEAD request to https://registry.npmjs.org/.npm/ajv-keywords/package.json
2019-02-06T22:17:47.311Z Received status 404 (message: Not Found) on remote info request - returning unfound resource
2019-02-06T22:17:47.311Z Resource doesn't exist remotely but is expired in the caches - returning expired cached resource
2019-02-06T22:17:47.311Z Hosting repository stores locally and the resource is expired - un-expiring if still exists
2019-02-06T22:17:47.313Z Found the resource in the cache - checking for expiry
2019-02-06T22:17:47.313Z Found request parameter {}=artifactory.forceDownloadIfNewer
2019-02-06T22:17:47.313Z Returning cached resource
2019-02-06T22:17:47.316Z Requested resource is found = true

If a user does not have deploy permissions for a remote repository and is trying to grab an expired metadata package.json file via the api/npm endpoint, the cached metadata should be unexpired instad of returning a 403 and failing the request.

A workaround may be to increase the metadata retrieval cache period to something really large

Steps to reproduce:

-expire remote repository cache

-try resolving metadata of package via api (api/npm/npm-remote/<package>/), see the 403

-try resolving package directly ([npm-remote/.npm/<package>/package.json|http://35.193.64.65:8081/artifactory/npm-remote/.npm/ajv-keywords/package.json]), see the request succeed. Trying to resolve package metadata via api will succeed now.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzylov:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"05/Feb/21 12:51 PM;pbaenziger;We're encountering this still with 7.12.5 (EnterpriseX license).

It's nice to have a workaround (thanks Matthew Wang) but has to be repeated for every package, which is a huge pain if your build fails and you have to iteratively do this for every package.",,,,,,,,,,
(Crowd integration) Loading large number of groups causes slow logins,RTFACT-18462,67860,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,06/Feb/19 8:54 PM,05/Jan/21 1:12 PM,18/Feb/21 8:59 AM,,6.5.9,,,,,,,Crowd,,,,,,,0,,,,,,"Symptoms: Logging onto Artifactory takes a very long time

Steps to reproduce:
 # Have an Artifactory 6.5.9 HA cluster, connected to Crowd
 # Import over 200 crowd groups linked to a single Crowd user
 # Attempt to log in as the Crowd user
 # Observe long login times:

[100 Groups]

20190206204546|7731|REQUEST|12.244.40.18|anonymous|POST|/ui/auth/login|HTTP/1.1|200|55

2019-02-06 20:45:39,817 [http-nio-8081-exec-4] [DEBUG] (o.a.a.s.ArtifactoryCrowdClientImpl:247) - Loading Crowd groups

2019-02-06 20:45:45,997 [http-nio-8081-exec-4] [DEBUG] (o.a.a.s.ArtifactoryCrowdClientImpl:249) - Finished Loading Crowd groups

 

[200 Groups]

20190206205016|10223|REQUEST|12.244.40.18|anonymous|POST|/ui/auth/login|HTTP/1.1|200|55

2019-02-06 20:50:07,096 [http-nio-8081-exec-10] [DEBUG] (o.a.a.s.ArtifactoryCrowdClientImpl:247) - Loading Crowd groups

2019-02-06 20:50:14,631 [http-nio-8081-exec-10] [DEBUG] (o.a.a.s.ArtifactoryCrowdClientImpl:249) - Finished Loading Crowd groups

 ",,,,,,,,,,,,,,,,,,,"28/Jul/20 9:50 PM;patrickr;Screen Shot 2020-07-28 at 2.49.08 PM.png;https://www.jfrog.com/jira/secure/attachment/44429/Screen+Shot+2020-07-28+at+2.49.08+PM.png","28/Jul/20 9:50 PM;patrickr;crowd-groups.csv;https://www.jfrog.com/jira/secure/attachment/44430/crowd-groups.csv","28/Jul/20 9:50 PM;patrickr;crowd-users.csv;https://www.jfrog.com/jira/secure/attachment/44431/crowd-users.csv",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzylon:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"""Set Me Up"" claims I do not have permission to deploy to virtual repo",RTFACT-18455,67799,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,eric.griswold,eric.griswold,05/Feb/19 10:22 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Set Me Up,,,,,,,0,,,,,,"A user, ""artifactory.test"" has ""Push_to_repos"" permissions to ""npm__local"" repository

A virtual repo, ""npm"" contains ""npm__local"" as its Default Deployment Repository

If the user artifactory.test authenticates to ""Set Me Up"" in the Artifactory GUI and looks for ""npm__local"", it all looks correct.

Instead if the user goes to the ""npm"" repository, there is an (incorrect) warning displayed: ""You do not have deploy permissions to this repository""

I believe that is confusing behavior because I can, as user ""artifactory.test"" deploy to the repo ""npm"", which will internally store the artifact in ""npm__local""

Correct behavior would be to only warn if the target repo was undeployable by the user.

I've seen this behavior with generic virtual/local repos as well.","Artifactory 6.7.2

Centos 7.3

Firefox 64.0.2",,,,,,,,,,,,RTFACT-14848,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzylcf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Get Support Bundle REST API doesn't work properly,RTFACT-18454,67791,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,guyco,guyco,05/Feb/19 12:24 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"When using the Get Bundle REST call for *non-existing* bundle, we should expect a 404 response. However, a 200 response is shown instead:

{code}
 * Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 8081 (#0)
* Server auth using Basic with user 'admin'
> GET /artifactory/api/support/bundles/support-bundle-20190205-1358425-1549367922509.zip HTTP/1.1
> Host: localhost:8081
> Authorization: Basic YWRtaW46cGFzc3dvcmQ=
> User-Agent: curl/7.54.0
> Accept: */*
>
*< HTTP/1.1 200 OK*
< Server: Artifactory/6.5.2
< X-Artifactory-Id: a1236bbbeedbf73ecb8573aa9c65698d3d724587
< X-Artifactory-Node-Id: node-b56e12ae7320
< Content-Type: application/octet-stream
< Content-Length: 0
< Date: Tue, 05 Feb 2019 12:04:06 GMT
<
* Connection #0 to host localhost left intact

{code}

 

The issue is reproducible. (reproduced in versions 6.5.2 and 6.6.1).

Just use the REST call for non-existing bundle to reproduce the behavior.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzylav:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Web server information disclosure,RTFACT-18440,67723,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nadavy,nadavy,04/Feb/19 11:34 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,The server discloses internal information such as the web server version within the response in error messages.,,,,,,,,,,,,,,,,,,,"04/Feb/19 11:35 AM;nadavy;Screen Shot 2019-02-04 at 13.34.58.png;https://www.jfrog.com/jira/secure/attachment/31393/Screen+Shot+2019-02-04+at+13.34.58.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzykwf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Remove application supports multiple concurrent logins for each user,RTFACT-18439,67722,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nadavy,nadavy,04/Feb/19 11:33 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Malicious users might use this vulnerability to log in from several computers, and as a result, leverage attacks such as bypassing business logic restrictions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzykw7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Improper error handling when returning 500,RTFACT-18438,67721,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nadavy,nadavy,04/Feb/19 11:31 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The application discloses a full path and stack trace information within the error messages. This reveals S3 bucket folders and technologies. When a malicious user deploys a new artifact, the HTTP response discloses the internal path on the application's server. Malicious users can take advantage of this exposure to better understand the application's technology and architecture.

A malicious user deploys a new artifact into a long path multiple times, and receives an error in the response:
reproductions:
- Deploy a new artifact into a really long name folder path. (reveal  information about the database)
- Deploy a new artifact into a long name folder path twice or more. (reveal inner path)

see attached request and response.

  ",,,,,,,,,,,,,,,,,,,"31/Mar/19 2:02 PM;nadavy;Screen Shot 2019-03-31 at 17.01.46.png;https://www.jfrog.com/jira/secure/attachment/31815/Screen+Shot+2019-03-31+at+17.01.46.png","31/Mar/19 2:02 PM;nadavy;Screen Shot 2019-03-31 at 17.02.21.png;https://www.jfrog.com/jira/secure/attachment/31816/Screen+Shot+2019-03-31+at+17.02.21.png","31/Mar/19 2:04 PM;nadavy;Screen Shot 2019-03-31 at 17.04.20.png;https://www.jfrog.com/jira/secure/attachment/31818/Screen+Shot+2019-03-31+at+17.04.20.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzykvz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Add convertor for special characters like '<>' that doesn't support on windows ,RTFACT-18432,67712,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,batelt,batelt,04/Feb/19 9:33 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,PB_Done,,,,,"Currently when export Artifactory on windows machine with a build that contains ""<> and :"" for example ""NEW:: Packages :: NEW :: <CONFIGURATIO>feature_a :: NEW N""

the export will fail with the following error:

2019-01-29 06:27:13,404 [art-exec-10] [ERROR] (o.a.r.d.i.DbRepoExportHandler:122) - Export error: from: artifactory-build-NEW%3A%3A Packages %3A%3A NEW %3A%3A <CONFIGURATIO>feature_a %3A%3A NEW N to: c:\export\20190202.082649.tmp\repositories\artifactory-build-info reason: Unable to create directory c:\export\20190202.082649.tmp\repositories\artifactory-build-info\NEW%3A%3A Packages %3A%3A NEW %3A%3A <CONFIGURATIO>feature_a %3A%3A NEW N : *Unable to create directory* 

 

As you can see in the followign screenshot we can't create directories with a spaciel chearecters and spaces on windows:

 

!Win10__Running_.jpg!",,,,,,,,,,,,,,,,,,,"04/Feb/19 9:34 AM;batelt;Win10__Running_.jpg;https://www.jfrog.com/jira/secure/attachment/31384/Win10__Running_.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyktz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
NPM dist-tag is working as resolution order reversely and latest tag is never updated,RTFACT-18422,67649,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,02/Feb/19 1:22 AM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,6.6.5,6.7.1,,,,,,NPM,,,,,,,1,,,,,,"npm virtual includes two npm local repository (npm-local / npm-local-2)
It seems like resolution order working as reversely when npm dist-tag ls <package-name> execution


Steps to reproduce
1. npm publish 
+ npm-test@1.0.0

2. npm dist-tag add npm-test@1.6.6 dev
+dev: npm-test@1.6.6

3. After change default deployment respository to npm-local-2
$ npm publish 
+ npm-test@1.0.0

$ npm dist-tag add npm-test@3.2.1 dev
+dev: npm-test@3.2.1

4. Resolution order is : npm-local and then npm-local-2
$ npm dist-tag ls npm-test
dev: 3.2.1
latest: 1.0.0

5. Now, change resolution order as npm-local-2 and then npm-local 
$ npm dist-tag ls npm-test
dev: 1.6.6
latest: 1.0.0

It seems like resolution order is working as reversely.

==================

Regarding latest tag, it never updated even if the resolution order is changed.

Step to reproduce.

1. npm dist-tag add npm-test@1.6.6 latest
+latest: npm-test@1.6.6
$ npm dist-tag ls npm-test
dev: 1.6.6
latest: 1.0.0

2. Even after change resolution order differently, It always has the same result. It is never updated.
$ npm dist-tag ls npm-test
dev: 1.6.6
latest: 1.0.0




",,,,,,,,,,,,,,,,,,,"27/Feb/19 10:23 PM;davids;Artifactory_david_vm_1.png;https://www.jfrog.com/jira/secure/attachment/31579/Artifactory_david_vm_1.png","27/Feb/19 10:23 PM;davids;Artifactory_david_vm_2.png;https://www.jfrog.com/jira/secure/attachment/31580/Artifactory_david_vm_2.png","27/Feb/19 10:23 PM;davids;Artifactory_david_vm_3.png;https://www.jfrog.com/jira/secure/attachment/31581/Artifactory_david_vm_3.png","27/Feb/19 10:23 PM;davids;Artifactory_david_vm_4.png;https://www.jfrog.com/jira/secure/attachment/31582/Artifactory_david_vm_4.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzykhj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Dependency Declaration snippets for unique snapshot artifacts should declare non-unique versions like nuxus,RTFACT-18419,67625,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,victorfun,victorfun,01/Feb/19 7:37 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.6.3,,,,,,,Gradle,Ivy,Maven,Web UI,,,,0,,,,,,"Currently generates:
{code:xml}
<dependency>
    <groupId>org.jfrog.bob</groupId>
    <artifactId>bob</artifactId>
    <version>2.0.x-20120215.131124-1</version>
</dependency>
{code}
But should actually generate as nexus do:
{code:xml}
<dependency>
    <groupId>org.jfrog.bob</groupId>
    <artifactId>bob</artifactId>
    <version>2.0.x-SNAPSHOT</version>
</dependency>
{code}
This is applicable to all build tools.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzykcv:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Package path already exists on OJO,RTFACT-18418,67623,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,bailin,bailin,01/Feb/19 4:47 AM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,,,,,,,,JCenter,,,,,,,0,artifactory,,,,,"[https://bintray.com/beta/#/bailinsong/reindeer/spring-boot-starter-ced]

[https://bintray.com/beta/#/bailinsong/reindeer/spring-boot-starter-actuate-ced]

[https://bintray.com/beta/#/bailinsong/reindeer/springboot-starter-cedf]

 

can't use  ""Add package to Jcenter"" link to the OJO

errorMessage : ""Package path already exists on OJO""

!image-2019-02-01-12-49-51-210.png!",bintray.com link to oss.jfrog.org,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzykcf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Artifactory <> Xray connection will remain opened in case an error happened on Xray's side, affects CI plugins",RTFACT-18408,67591,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,31/Jan/19 1:11 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,6.7.1,,,,,,,Xray,,,,,,,0,,,,,,"*Summary:*

If an issue happened on Xray's side, e.g. build scan (scanBuild endpoint causes a failure on Xray's side) - a connection will still be remained opened until Xray times out it (default 40 minutes). Artifactory should have it's own time out.

The effect is to have builds taking 40 minutes to fail due to an errornous scanBuild step.

Check related HAP-1140 JIRA.",,,,,,,,,,,,,,,,HAP-1140,XRAY-3340,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyk53:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deleting a file that is deployed in a folder that already exists in the trashcan as a file fails,RTFACT-18407,67589,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,itamarb,itamarb,31/Jan/19 12:36 PM,10/Feb/21 2:16 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,7,,,,,,"Steps to reproduce:

1. Upload: example-repo-local/a (where 'a' is a file)
2. Delete this file so it goes to the trash can
3. Upload: example-repo-local/a/b/c (where 'c' is a file and 'a' is a folder)
4. Try to delete this file and it fails with the message: 
{code}
Could not create file system item Parent example-repo-local/a/b must be a folder
{code}

This is similar to https://www.jfrog.com/jira/browse/RTFACT-9649 with the difference that in this case, the second file is deployed in a folder depth of 2 folders and not only 1.

In addition to fixing this problem, we should show a clear message stating why the file cannot be deleted, rather than throwing ""Could not create file system item Parent <file path in Artifactory> must be a folder""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyk4v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Jun/19 5:42 PM;itamarb;If we are not going to change this behavior, maybe we should add a more verbose message to the user that explains the reason the folder cannot be created, so he can take the appropriate action.","20/Apr/20 9:23 AM;stefanga;Why wouldn't you change this behaviour? The existing reality have change the path from a file to a folder. It would make sense to permanently delete the file and replace that node with the now deleted file.

Since the trashcan is limited to admin access a user can't easily resolve this issue without notifying an admin.

This should be fixed asap since it's a pain to debug and the current behaviour doesn't make sense.

We've put in at least a full workday in total for all the times we've been bitten by this. It's starting to come more easliy now but that's just because we have gotten used to it.",,,,,,,,,
"multipush ""Scheduled Replication Status"" REST API return incorrect information when the target repositories have the same name",RTFACT-18401,67553,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,kfira,kfira,30/Jan/19 4:13 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,Replication,,,,,,,7,,,,,,"when configuring multipush replication and the target repositories have the same name in the status field in the response of [Scheduled Replication Status|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-ScheduledReplicationStatus] REST API the value is taken only from one of the repositories and being set for both.

 

Steps to reproduce:
 # Configure multipush replication to two targets with the same repository name
 # During the replication process stop on of the instances to fail the replication
 # In the repository properties it should have both ""*ok*"" and ""*error*"" (for the replication result property)
 # Issue the [Scheduled Replication Status|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-ScheduledReplicationStatus] and notice the output is different then the UI:
 # 
{code:java}
$ curl -s -X GET -k -u admin:password http://localhost:8082/artifactory/api/replication/generic-local
{
""status"" : ""error"",
""lastCompleted"" : ""2019-01-30T15:22:01.660+02:00"",
""targets"" : [ {
""url"" : ""http://localhost:8081/artifactory/g-local-push"",
""repoKey"" : ""g-local-push"",
""status"" : ""ok"",
""lastCompleted"" : ""2019-01-30T15:29:27.437+02:00""
}, {
""url"" : ""http://10.1.16.225:8081/artifactory/g-local-push"",
""repoKey"" : ""g-local-push"",
""status"" : ""ok"",
""lastCompleted"" : ""2019-01-30T15:29:27.437+02:00""
} ],
""repositories"" : {
""g-local-push"" : {
""status"" : ""ok"",
""lastCompleted"" : ""2019-01-30T15:29:27.437+02:00""
}
}
}
{code}

 # In addition, notice the in the repositories section above there is only one repository name and not two as the number of the target repositories.
 # In case the repositories name on the targets are different the output of the REST API call is correct:
 # 
{code:java}
{
""status"" : ""error"",
""lastCompleted"" : ""2019-01-30T16:21:52.133+02:00"",
""targets"" : [ {
""url"" : ""http://localhost:8081/artifactory/test-ka1"",
""repoKey"" : ""g-local-push1"",
""status"" : ""error"",
""lastCompleted"" : ""2019-01-30T16:21:52.133+02:00""
}, {
""url"" : ""http://10.1.16.225:8081/artifactory/test-ka2"",
""repoKey"" : ""g-local-push2"",
""status"" : ""ok"",
""lastCompleted"" : ""2019-01-30T16:22:06.935+02:00""
} ],
""repositories"" : {
""g-local-push2"" : {
""status"" : ""ok"",
""lastCompleted"" : ""2019-01-30T16:22:06.935+02:00""
},
""g-local-push1"" : {
""status"" : ""error"",
""lastCompleted"" : ""2019-01-30T16:21:52.133+02:00""
}
}
}
{code}",,,,,,,,,,,,,,,,,,,"24/Jun/19 2:24 AM;saiu;Case__107663.png;https://www.jfrog.com/jira/secure/attachment/32915/Case__107663.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyjwf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"30/Oct/19 6:27 AM;prakritish;Hello!

Is there an ETA on this bug?

Thanks,

Prakritish",,,,,,,,,,
Use correct header to decide the npm metadata format. And verify the format.,RTFACT-18398,67541,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,galba,galba,30/Jan/19 12:29 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"Currently we are using the referer header of the npm install to decide weather to return the full metadata or a shorter version.

This should be changed to the referer header.

See bellow:

You can request package metadata from this endpoint:

GET https://registry.npmjs.org/:package

The registry responds with a JSON-formatted string containing metadata for the package named, either in full or abbreviated form depending on what you request in the Accept header. If you provide no Accept header, the full document is returned. To request an abbreviated document with only the fields required to support installation, set the Accept header in your request to the following string:

application/vnd.npm.install-v1+json

A more typical accept header might request json as a fallback, like this:

application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*



See:
https://github.com/npm/registry/blob/master/docs/responses/package-metadata.md

Example of request headers the client actually send on install:
GET /artifactory/api/npm/npmjs/npm-proxy

{code}
accept : application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*
accept-encoding : gzip,deflate
authorization : Basic *****
connection : keep-alive
host : repo.jfrog.io:443
npm-in-ci : false
npm-scope : 
npm-session : 4ea9d043dddc24f2
pacote-pkg-id : registry:manifest
pacote-req-type : packument
referer : install npm-proxy
user-agent : npm/6.4.1 node/v11.5.0 darwin x64

{code}

See curl:
{code}
curl 'https://repo.jfrog.io:443/artifactory/api/npm/npmjs/npm-proxy' -H 'connection: keep-alive' -H 'user-agent: npm/6.4.1 node/v11.5.0 darwin x64' -H 'npm-in-ci: false' -H 'npm-scope: ' -H 'npm-session: 9d7d19f5aa38848b' -H 'referer: install npm-proxy' -H 'pacote-req-type: packument' -H 'pacote-pkg-id: registry:manifest' -H 'accept: application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*' -H 'authorization: ***' -H 'if-none-match: d839dc31e1f77bd91d01cbbd5e04cae8e868e4a7' -H 'accept-encoding: gzip,deflate' --compressed --insecure
{code}

You can try removing the accept header and see the response is getting larger.

Please see that we comply with the same response format with npm official registry for the short version.

See:
RTFACT-17650
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyjuf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Error: Failed to read admin credentials,RTFACT-18396,67530,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lepe,lepe,30/Jan/19 9:17 AM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,6.7.0,,,,,,,,,,,,,,1,artifactory,,,,,"h2. Original Issue:

Suddenly my repository stopped working. I updated today to the last version (6.7.0) but still is not starting. 

This is the log:
{noformat}
2019-01-30 18:06:43,341 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:503) - Artifactory application context set to NOT READY by refresh
2019-01-30 18:06:43,363 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:243) - Refreshing artifactory: startup date [Wed Jan 30 18:06:43 JST 2019]; root of context hierarchy
2019-01-30 18:06:49,881 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:236) - Database: MySQL 5.7.25-0ubuntu0.16.04.2. Driver: MySQL-AB JDBC Driver mysql-connector-java-5.1.24 ( Revision: ${bzr.revision-id} ) Pool: mysql
2019-01-30 18:06:49,882 [art-init] [INFO ] (o.a.s.d.DbServiceImpl:239) - Connection URL: jdbc:mysql://localhost:3306/jfrog?characterEncoding=UTF-8&elideSetAutoCommits=true
2019-01-30 18:06:50,247 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'blob' from jar:file:/opt/jfrog/artifactory/tomcat/webapps/artifactory/WEB-INF/lib/artifactory-storage-db-6.7.0.jar!/
2019-01-30 18:06:50,254 [art-init] [INFO ] (o.j.s.b.p.t.BinaryProviderClassScanner:76) - Added 'empty, external-file, external-wrapper, file-system, cache-fs, retry' from jar:file:/opt/jfrog/artifactory/tomcat/webapps/artifactory/WEB-INF/lib/binary-store-core-3.1.37.jar!/
2019-01-30 18:06:52,543 [art-init] [INFO ] (o.a.s.ArtifactorySchedulerFactoryBean:647) - Starting Quartz Scheduler now
2019-01-30 18:06:52,636 [art-init] [INFO ] (o.a.s.ArtifactoryApplicationContext:250) - Artifactory context starting up 39 Spring Beans...
2019-01-30 18:06:52,924 [art-init] [INFO ] (o.a.s.a.AccessServiceImpl:408) - Initialized new service id: jfrt@01bwqtrcvtthxn0hy33v361717
2019-01-30 18:06:52,962 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Index: 0, Size: 0
java.lang.reflect.InvocationTargetException: null
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
 at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
 at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
 at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
 at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: org.springframework.beans.factory.BeanInitializationException: Failed to initialize bean 'org.artifactory.security.access.AccessService'.; nested exception is java.lang.RuntimeException: Failed to read admin credentials.
 at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:260)
 at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:143)
 ... 7 common frames omitted
Caused by: java.lang.RuntimeException: Failed to read admin credentials.
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.getBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:424)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.initCachedBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:430)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.<init>(ArtifactoryAccessClientConfigStore.java:96)
 at org.artifactory.security.access.AccessServiceImpl.initAccessService(AccessServiceImpl.java:298)
 at org.artifactory.security.access.AccessServiceImpl.initAccessClientIfNeeded(AccessServiceImpl.java:288)
 at org.artifactory.security.access.AccessServiceImpl.init(AccessServiceImpl.java:282)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:498)
 at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
 at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
 at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
 at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
 at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
 at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
 at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
 at com.sun.proxy.$Proxy96.init(Unknown Source)
 at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:258)
 ... 8 common frames omitted
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
 at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2217)
 at com.google.common.cache.LocalCache.get(LocalCache.java:4154)
 at com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:5060)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.getBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:402)
 ... 28 common frames omitted
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
 at java.util.ArrayList.rangeCheck(ArrayList.java:657)
 at java.util.ArrayList.get(ArrayList.java:433)
 at org.jfrog.security.crypto.KeyTool.getTopKey(KeyTool.java:84)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createTopEncryptor(EncryptionWrapperFactory.java:175)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createMultiKeyFileEncryptionWrapper(EncryptionWrapperFactory.java:160)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createMultiKeyFileWrapper(EncryptionWrapperFactory.java:135)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createArtifactoryKeyWrapper(EncryptionWrapperFactory.java:31)
 at org.artifactory.common.ArtifactoryHome.getArtifactoryEncryptionWrapper(ArtifactoryHome.java:428)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.readAdminCredentials(ArtifactoryAccessClientConfigStore.java:440)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.lambda$getBootstrapAdminCredentials$6(ArtifactoryAccessClientConfigStore.java:413)
 at com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:5065)
 at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3716)
 at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2424)
 at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2298)
 at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2211)
 ... 31 common frames omitted
{noformat}
Whatever the issue is, I believe the system should handle it in a more graceful way (either by giving more explanation on how to fix it, fixing it automatically or giving you the option to reset the credentials). That is why I decided to reported it as a bug.

According to: [https://www.jfrog.com/confluence/display/RTF/Managing+Users#ManagingUsers-RecreatingtheDefaultAdminUser] 

_If you don't know the Access service's admin password, you can reset it using the Access service's bootstrap.creds file by following the instructions under Preparing the Credentials File in the JFrog Access User Guide while populating it with:_
|access-admin@localhost=<{{new}}-password>|

However doing so, the file get renamed:
{noformat}
2019-01-31 13:26:21,829 [art-init] [INFO ] (o.a.s.a.ArtifactoryAccessClientConfigStore:471) - Saving Access bootstrap.creds file backup to: /var/opt/jfrog/artifactory/etc/security/access/bootstrap.creds.1548908781828.bak
2019-01-31 13:26:21,855 [art-init] [ERROR] (o.a.w.s.ArtifactoryContextConfigListener:96) - Application could not be initialized: Index: 0, Size: 0
java.lang.reflect.InvocationTargetException: null
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.configure(ArtifactoryContextConfigListener.java:211)
at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener.access$200(ArtifactoryContextConfigListener.java:67)
at org.artifactory.webapp.servlet.ArtifactoryContextConfigListener$1.run(ArtifactoryContextConfigListener.java:92)
Caused by: org.springframework.beans.factory.BeanInitializationException: Failed to initialize bean 'org.artifactory.security.access.AccessService'.; nested exception is java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:260)
at org.artifactory.spring.ArtifactoryApplicationContext.<init>(ArtifactoryApplicationContext.java:143)
... 7 common frames omitted
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
at java.util.ArrayList.rangeCheck(ArrayList.java:657)
at java.util.ArrayList.get(ArrayList.java:433)
at org.jfrog.security.crypto.KeyTool.getTopKey(KeyTool.java:84)
at org.jfrog.security.crypto.EncryptionWrapperFactory.createTopEncryptor(EncryptionWrapperFactory.java:175)
at org.jfrog.security.crypto.EncryptionWrapperFactory.createMultiKeyFileEncryptionWrapper(EncryptionWrapperFactory.java:160)
at org.jfrog.security.crypto.EncryptionWrapperFactory.createMultiKeyFileWrapper(EncryptionWrapperFactory.java:135)
at org.jfrog.security.crypto.EncryptionWrapperFactory.createArtifactoryKeyWrapper(EncryptionWrapperFactory.java:31)
at org.artifactory.common.ArtifactoryHome.getArtifactoryEncryptionWrapper(ArtifactoryHome.java:428)
at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.encryptOrDecryptAccessCreds(ArtifactoryAccessClientConfigStore.java:528)
at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.readIntoAccessCredsFile(ArtifactoryAccessClientConfigStore.java:473)
at java.util.Optional.ifPresent(Optional.java:159)
at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.discardBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:458)
at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.initCachedBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:431)
at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.<init>(ArtifactoryAccessClientConfigStore.java:96)
at org.artifactory.security.access.AccessServiceImpl.initAccessService(AccessServiceImpl.java:298)
at org.artifactory.security.access.AccessServiceImpl.initAccessClientIfNeeded(AccessServiceImpl.java:288)
at org.artifactory.security.access.AccessServiceImpl.init(AccessServiceImpl.java:282)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
at org.artifactory.storage.fs.lock.aop.LockingAdvice.invoke(LockingAdvice.java:76)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:207)
at com.sun.proxy.$Proxy96.init(Unknown Source)
at org.artifactory.spring.ArtifactoryApplicationContext.refresh(ArtifactoryApplicationContext.java:258)
... 8 common frames omitted
{noformat}
 

Looking at artifactory.bootstrap.log :
{noformat}
2019-01-31 13:26:02 [ARTIFACTORY] [INFO ] Master key file found.
2019-01-31 13:26:07 [ARTIFACTORY] [INFO ] Starting file sync
2019-01-31 13:26:08 [ARTIFACTORY] [INFO ] Starting Artifactory [artifactory.home=/var/opt/jfrog/artifactory].
2019-01-31 13:26:21 [ARTIFACTORY] [INFO ] [Node ID: 448264c41a4a09f1:1c9184d9:168a2281106:-8000] detected local modify for config 'artifactory.security.access/keys/access.creds' {noformat}
it seems that credentials are fine. 
h2. Import System Issue:

So I gave up trying to fix the installation and I reinstalled all again. I'm now able to login to the system but I can't import my settings or at least my repositories from the previous installation. The error log is:

import.export.log : (simplified log)

 
{noformat}
2019-02-05 13:14:22,251 [INFO ] (o.a.a.c.ImportExportStatusHolder:43) ### Beginning full system import ###
2019-02-05 13:14:22,343 [ERROR] (o.a.a.c.ImportExportStatusHolder:43) Error during access server restore
org.jfrog.access.client.AccessClientHttpException: HTTP response status 401:Failed on executing /api/v1/system/backup/import, with response: {""errors"":[{""code"":""UNAUTHORIZED"",""detail"":""Bad credentials"",""message"":""HTTP 401 Unauthorized""}]}
 at org.jfrog.access.client.http.AccessHttpClient.createRestResponse(AccessHttpClient.java:163)
 at org.jfrog.access.client.http.AccessHttpClient.restCall(AccessHttpClient.java:114)
 at org.jfrog.access.client.system.SystemClientImpl.importAccessServer(SystemClientImpl.java:34)
 at org.artifactory.security.access.AccessServiceImpl.importAccessServer(AccessServiceImpl.java:1326)
 at org.artifactory.security.access.AccessServiceImpl.importFrom(AccessServiceImpl.java:1289)
 at org.artifactory.spring.ArtifactoryApplicationContext.importFrom(ArtifactoryApplicationContext.java:574)
 at org.artifactory.ui.rest.service.admin.importexport.importdata.ImportSystemService.importSystem(ImportSystemService.java:173)
 at org.artifactory.ui.rest.service.admin.importexport.importdata.ImportSystemService.execute(ImportSystemService.java:95)
 at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
 at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
 at org.artifactory.ui.rest.resource.admin.importexport.ImportArtifactResource.importSystem(ImportArtifactResource.java:77)
 at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
 at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
 at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
 at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
 at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
 at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
 at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
 at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
 at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
2019-02-05 13:14:22,466 [ERROR] (o.a.a.c.ImportExportStatusHolder:43) Failed system import
java.lang.RuntimeException: Failed to read admin credentials.
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.getBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:424)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.initCachedBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:430)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.<init>(ArtifactoryAccessClientConfigStore.java:96)
 at org.artifactory.security.access.AccessServiceImpl.initAccessService(AccessServiceImpl.java:298)
 at org.artifactory.security.access.AccessServiceImpl.afterImport(AccessServiceImpl.java:1295)
 at org.artifactory.spring.ArtifactoryApplicationContext.importFrom(ArtifactoryApplicationContext.java:578)
 at org.artifactory.ui.rest.service.admin.importexport.importdata.ImportSystemService.importSystem(ImportSystemService.java:173)
 at org.artifactory.ui.rest.service.admin.importexport.importdata.ImportSystemService.execute(ImportSystemService.java:95)
 at org.artifactory.rest.common.service.ServiceExecutor.process(ServiceExecutor.java:38)
 at org.artifactory.rest.common.resource.BaseResource.runService(BaseResource.java:92)
 at org.artifactory.ui.rest.resource.admin.importexport.ImportArtifactResource.importSystem(ImportArtifactResource.java:77)
 at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:186)
 at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:96)
 at org.artifactory.webapp.servlet.AccessFilter.useAuthentication(AccessFilter.java:426)
 at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:214)
 at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:167)
 at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:77)
 at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:85)
 at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)
 at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
 at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2217)
 at com.google.common.cache.LocalCache.get(LocalCache.java:4154)
 at com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:5060)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.getBootstrapAdminCredentials(ArtifactoryAccessClientConfigStore.java:402)
 ... 85 common frames omitted
 Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
 at java.util.ArrayList.rangeCheck(ArrayList.java:657)
 at java.util.ArrayList.get(ArrayList.java:433)
 at org.jfrog.security.crypto.KeyTool.getTopKey(KeyTool.java:84)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createTopEncryptor(EncryptionWrapperFactory.java:175)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createMultiKeyFileEncryptionWrapper(EncryptionWrapperFactory.java:160)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createMultiKeyFileWrapper(EncryptionWrapperFactory.java:135)
 at org.jfrog.security.crypto.EncryptionWrapperFactory.createArtifactoryKeyWrapper(EncryptionWrapperFactory.java:31)
 at org.artifactory.common.ArtifactoryHome.getArtifactoryEncryptionWrapper(ArtifactoryHome.java:428)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.readAdminCredentials(ArtifactoryAccessClientConfigStore.java:440)
 at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.lambda$getBootstrapAdminCredentials$6(ArtifactoryAccessClientConfigStore.java:413)
 at com.google.common.cache.LocalCache$LocalManualCache$1.load(LocalCache.java:5065)
 at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3716)
 at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2424)
 at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2298)
 at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2211)
 ... 88 common frames omitted
{noformat}
 

 As some of the errors are similar as before, I believe the previous credentials got broken for some reason. I couldn't find any problem inside ""security.xml"" file. ","Ubuntu 16.04  x64 (running inside LXD container)

jfrog-artifactory-oss 6.7.0",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyjrz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Feb/19 1:14 AM;lepe;I gave up. I installed an old version via docker and published the last packages versions and now its working. Not ideal, but it works. I hope this report is useful in any way.",,,,,,,,,,
When deleting a file at the source of smart remote repository it will still show it on the target,RTFACT-18376,67446,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,shaibz,shaibz,29/Jan/19 7:57 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,6.7.0,,,,,,,,,,,,,,4,,,,,,"To reproduce this:

1.     Create a local repo on server 1

2.     Upload some files into it

3.     Create a remote repo on server 2. Make it point to the first repo on server 1, and enable smart remote repo features

4.     Enable active replication and run it. Enable event based replication too.

5.     See your files in the remote repo browser on server 2

6.     Everything is OK so far. Now delete a file on server 1

7.     See log on server 2: 2019-01-29 09:12:34,856 [art-exec-18] [INFO ] (o.a.a.r.c.r.e.RemoteEventReplicationProducer:135) - Detected remote resource deletion and sync deletes is enabled for this repo, undeploying path generic-remote/MariaDB-10.0.28-centos7-x86_64-shared.rpm

8.     Now open the remote repo on server 2

 
Expected: Deleted file disappear from the list on both the remote repo, and the corresponding cache repo

Actual: Deleted file remain in the list for the remote repo. Only: “this item is not cached” message is shown.

The deleted file should not be available, as it does not exist in the source repo.
It seems like a bug with the file list.
After I zapped the cache and refreshed - the file was no longer presented on the remote, however I expected that after Artifactory already received the event that the file was deleted, it should not represent it already on the remote.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyjbj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Path checksum migration falsely triggered ,RTFACT-18367,67388,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,28/Jan/19 9:59 AM,06/Jan/21 3:07 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,PB_Done,,,,,"During a startup, we check if the Path checksum migration has finalized in:
org.artifactory.storage.jobs.migration.pathchecksum.RepoPathChecksumMigrationJob#finalizeMigrationIfNeeded

The way we check it is finalized, is by checking an index exists in the DB.
In case we got an exception from the DB during the check of index existence, we will still continue to run the migration, while we shouldn't.

For example, below we can see that DB returned an exception during the index check, but continued with an attempt to run the migration and creation if the index, which is already there.

{code:java}
2019-01-24 01:53:35,605 [art-exec-4] [WARN ] (o.a.s.d.DbServiceImpl:384) - Can't determine the uniqueness of 'repo_path_checksum' column column in nodes table: ERROR: column am.amcanorder does not exist
  Position: 427
2019-01-24 01:53:35,620 [art-exec-4] [INFO ] (o.a.s.d.v.c.DbSqlConverterUtil:93) - Starting schema conversion: /conversion/postgresql/postgresql_v550e.sql
2019-01-24 01:53:35,624 [art-exec-4] [ERROR] (o.j.s.u.DbStatementUtils:60) - Failed to execute query: ERROR: relation ""nodes_repo_path_checksum"" already exists:
CREATE UNIQUE INDEX nodes_repo_path_checksum ON nodes (repo_path_checksum)
2019-01-24 01:53:35,629 [art-exec-4] [ERROR] (o.a.s.d.v.c.DbSqlConverterUtil:87) - Could not convert DB using v550e converter due to ERROR: relation ""nodes_repo_path_checksum"" already exists
org.postgresql.util.PSQLException: ERROR: relation ""nodes_repo_path_checksum"" already exists
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2182)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1911)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:173)
	at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:615)
	at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:451)
	at org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:379)
	at org.jfrog.storage.util.DbStatementUtils.executeSqlStream(DbStatementUtils.java:55)
	at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.doConvert(DbSqlConverterUtil.java:94)
	at org.artifactory.storage.db.version.converter.DbSqlConverterUtil.convert(DbSqlConverterUtil.java:83)
	at org.artifactory.storage.db.version.converter.DBSqlConverter.lambda$convert$0(DBSqlConverter.java:49)
	at org.jfrog.storage.util.DbUtils.doWithConnection(DbUtils.java:435)
	at org.artifactory.storage.db.version.converter.DBSqlConverter.convert(DBSqlConverter.java:49)
	at org.artifactory.storage.jobs.migration.MigrationJobBase.executeDbConversion(MigrationJobBase.java:343)
	at org.artifactory.storage.jobs.migration.pathchecksum.RepoPathChecksumMigrationJob.finalizeMigrationIfNeeded(RepoPathChecksumMigrationJob.java:237)
	at org.artifactory.storage.jobs.migration.pathchecksum.RepoPathChecksumMigrationJob.init(RepoPathChecksumMigrationJob.java:126)
	at org.artifactory.storage.jobs.migration.MigrationJobBase.onExecute(MigrationJobBase.java:93)
	at org.artifactory.schedule.quartz.QuartzCommand.execute(QuartzCommand.java:48)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at org.artifactory.concurrent.ArtifactoryRunnable.run(ArtifactoryRunnable.java:50)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyj13:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"04/Feb/20 8:25 PM;wrobson;Hi we've been getting this error for awhile too. It started after our upgrade to 6.10.0 and has lingered for all subsequent updates. Wondering is there a way to make it go away.","05/Feb/20 8:05 AM;arielk;Hi [~wrobson].
Sorry if it is unclear from the issue description itself.
This is usually caused due to a compatibility issue between JDBC driver and the DB. ",,,,,,,,,
checksum mismatch with VCS repository,RTFACT-18366,67371,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,shays,seshur,seshur,28/Jan/19 5:42 AM,06/Jan/21 10:40 AM,18/Feb/21 8:59 AM,,6.7.0,,,,,,,,,,,,,,1,PB_Done,,,,,"*When downloaded through the GitHub-remote VCS remote repo the release tars have different checksums.*

*Steps to reproduce :*

*1) Set up VCS remote* 

*2) Download the file ""rules_go-0.15.4.tar.gz"" from VCS remote using curl* 

$ curl -uadmin:XXXX -XGET 'http://mill.jfrog.info:12018/artifactory/api/vcs/downloadRelease/github-remote/bazelbuild/rules_go/0.15.4?ext=tar.gz'

*Verified the checksum value from UI, it shows as stated below* 

 
SHA-256:
 *adae6fa6937e4f8997349d2365a8b2e97c1c4182127072c0a9ddc92462e4a650 (Uploaded: Identical)*

 

*Verified  the checksum value for the same file which is manually downloaded from github.*

$ sha256sum rules_go-0.15.4.tar.gz

*7519e9e1c716ae3c05bd2d984a42c3b02e690c5df728dc0a84b23f90c355c5a1  rules_go-0.15.4.tar.gz*

 

Did upload the same file to generic local repo, for which it gives the right checksum value and verified from the UI.

*The checksum mismatch is observed only  when pulled from VCS remote for this package* 

 

*Here is the below example :*

$ curl -Ls 'https://github.com/bazelbuild/rules_go/releases/download/0.15.4/rules_go-0.15.4.tar.gz' | sha256sum

*7519e9e1c716ae3c05bd2d984a42c3b02e690c5df728dc0a84b23f90c355c5a1  -*

$ curl -Ls -uadmin:XXXX -XGET 'http://mill.jfrog.info:12002/artifactory/api/vcs/downloadRelease/vcs/bazelbuild/rules_go/0.15.4?ext=tar.gz' | sha256sum

*adae6fa6937e4f8997349d2365a8b2e97c1c4182127072c0a9ddc92462e4a650  -*

 

 

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzr4ih:r4aj",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Aug/19 4:13 PM;krihelis;We will probably need to use the new following API so we don't have this checksum mismatch: 
[https://developer.github.com/v3/repos/releases/#get-a-single-release]",,,,,,,,,,
Permissions Management Filter no longer works for resource name,RTFACT-18356,67285,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,26/Jan/19 5:25 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,4,,,,,,"Permission target no longer show names that are associated to a repository configured under said permission Target. This was working on version 6.4.2.
This is no longer working on Artifactory version 6.6.5.
 
Steps to reproduce:
 
 # Create a repo (e.g. example-generic).
 # Verify that there are no existing permissions with the name ""example-perm"" nor any that target the new repo. 
 # create the permission with the name ""example-perm"" to ensure that the permission name is distinct from the target repo-name and make sure it targets the ""example-generic"" repo.
 # Filter for ""example-perm"".
 # The new permission, example-perm, shows in the search results
 # Filter for ""example-generic"" (since the search bar suggests that you should be able to filter by ""Permission Target Name or Resources"".
 # no results show despite the fact that we just created a permission targeting the ""example-generic"" repo. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyie7:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"19/Mar/20 7:10 AM;marek.wasilewski;Please fix it. It's really annoying.",,,,,,,,,,
Deploying Snapshots to oss.jfrog.org Access denied,RTFACT-18355,67279,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andrej.petras,andrej.petras,25/Jan/19 9:29 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,Artifactory Cloud,,,,,,,0,jfrog,oss,,,,"Hi,
 
I have maven plugin *org.lorislab.maven:wildfly-maven-plugin*
 
I can not deploy the maven plugins snapshot to the OJO. Plugin it self is deployed correctly only for the plugin group maven-metadata.xml I get access denied.
 
Please check the this issue.
 
Thank you
Andrej
 
Error: Access denied 
Uploading to bintray2: [http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/maven-metadata.xml]
 
Logs
[INFO] Downloaded from bintray2: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/maven-metadata.xml (259 B at 641 B/s)
[INFO] Uploading to bintray2: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/wildfly-maven-plugin/1.2.1-SNAPSHOT/maven-metadata.xml
[INFO] Uploaded to bintray2: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/wildfly-maven-plugin/1.2.1-SNAPSHOT/maven-metadata.xml (788 B at 3.2 kB/s)
[INFO] Uploading to bintray2: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/wildfly-maven-plugin/maven-metadata.xml
[INFO] Uploaded to bintray2: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/wildfly-maven-plugin/maven-metadata.xml (334 B at 1.1 kB/s)
[INFO] Uploading to bintray2: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/maven-metadata.xml
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 11.761 s
[INFO] Finished at: 2019-01-25T20:38:58Z
[INFO] Final Memory: 24M/84M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project wildfly-maven-plugin: Failed to deploy metadata: Could not transfer metadata org.lorislab.maven/maven-metadata.xml from/to bintray2 (http://oss.jfrog.org/artifactory/oss-snapshot-local): Access denied to: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/maven-metadata.xml, ReasonPhrase: . -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project wildfly-maven-plugin: Failed to deploy metadata: Could not transfer metadata org.lorislab.maven/maven-metadata.xml from/to bintray2 (http://oss.jfrog.org/artifactory/oss-snapshot-local): Access denied to: http://oss.jfrog.org/artifactory/oss-snapshot-local/org/lorislab/maven/maven-metadata.xml, ReasonPhrase: .
 at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)
 at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyid3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Artifactory import throws exception when using exported data,RTFACT-18353,67275,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ejohnson,ejohnson,25/Jan/19 3:54 PM,05/Jan/21 11:25 AM,18/Feb/21 8:59 AM,,6.1.0,,,,,,,Artifact Storage,,,,,,,1,,,,,,"*When importing a system import we see the following error:*

Beginning full system import ###

500 : Failed system import

500 : Received uncaught exception

{

  ""errors"" : [

{     ""status"" : 500,     ""message"" : ""Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: Failed to generate service admin token using bootstrap credentials.)]""   }

]

}

 

*Steps to re-create the error:*

 

*Running Artifactory 6.1.0 rev 60100900, we performed an export of the system via the REST API (our repos are large and stored in S3 and therefore are not part of the export):*

curl --insecure --header ""X-JFrog-Art-Api: ${API_KEY}"" -H ""Content-Type: application/json"" --data ""\{\""exportPath\"":\""${LOCAL_DIR}\"",\""includeMetadata\"":\""true

\"",\""createArchive\"":\""true\"",\""bypassFiltering\"":\""false\"",\""verbose\"":\""false\"",\""failOnError\"":\""true\"",\""failIfEmpty\"":\""true\"",\""m2\"":\""false\"",\""increm

ental\"":\""false\"",\""excludeContent\"":\""true\""}"" [https://$|https://%24/]{SITE}/artifactory/api/export/system
  
 *On a clean install of Artifactory we performed an import of the system via the REST API:*
 curl --insecure --header ""X-JFrog-Art-Api: ${API_KEY}"" -H ""Content-Type: application/json"" --data ""\{\""importPath\"":\""${BACKUP_DIR}/\"",\""includeMetadata\"":\""true\"",\""verbose\"":\""false\"",\""failOnError\"":\""true\"",\""failIfEmpty\"":\""true\""}"" [https://$|https://%24/]{SITE}/artifactory/api/import/system
  

*Then we received the error above.*  
 # 
 ## 
 ### Beginning full system import ###

500 : Failed system import

500 : Received uncaught exception

{

  ""errors"" : [

{     ""status"" : 500,     ""message"" : ""Could not merge and save new descriptor [org.jfrog.common.ExecutionFailed: Last retry failed: code exception. Not trying again (Failed to reload configuration: Failed to generate service admin token using bootstrap credentials.)]""   }

]

}

 

*At this point the system becomes unusable and the web interface no longer responds, which requires stopping and restarting the Artifactory service.  The import appears to invalidate the admin API Key credentials that we pass to the import mid-way through the process, which makes no sense.  My guess is that the import changes the password then invalidates all the keys, but that is just a guess.*

 

*In the artifactory.log we see:*

2018-11-09 19:43:03,078 [http-nio-8081-exec-10] [INFO ] (o.a.s.ArtifactoryApplicationContext:545) - ### Beginning full system import ###

2018-11-09 19:43:03,082 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:1182) - Triggering import in access server...

2018-11-09 19:43:04,162 [http-nio-8081-exec-10] [INFO ] (o.a.s.ArtifactoryApplicationContext:954) - Artifactory is currently encrypted. Replacing artifactory key with a new one.

2018-11-09 19:43:04,163 [http-nio-8081-exec-10] [INFO ] (o.j.c.w.ConfigurationManagerImpl:303) - [Node ID: primary] detected local delete for config 'artifactory.security.artifactory.key'

2018-11-09 19:43:04,164 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:303) - [Node ID: primary] detected local delete for config 'artifactory.security.artifactory.key'

2018-11-09 19:43:04,179 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.7616.201811091943004163'

2018-11-09 19:43:04,179 [http-nio-8081-exec-10] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.7616.201811091943004163'

2018-11-09 19:43:04,206 [http-nio-8081-exec-10] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key'

2018-11-09 19:43:04,231 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.595.201809281548041139'

2018-11-09 19:43:04,242 [http-nio-8081-exec-10] [WARN ] (o.a.s.a.AccessServiceImpl:416) - ServiceId overwrite: detected service_id file. In case of HA: if you want to set a new ServiceId you need to restart each node. Old value: jfrt@01cvta2v4t2f390d6fmv0q1d66, new value: jfrt@01cm7wbq921pz21e45gw0t0g13

2018-11-09 19:43:04,244 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:340) - The service_id has changed. This will entail re-generation of the Access admin token and re-registration in Access Federation

2018-11-09 19:43:04,244 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:365) - Initialized new service id: jfrt@01cm7wbq921pz21e45gw0t0g13

2018-11-09 19:43:04,249 [http-nio-8081-exec-10] [INFO ] (o.j.s.c.EncryptionWrapperFactory:33) - createArtifactoryKeyWrapper  EncryptionWrapperBase

{ encodingType=ARTIFACTORY_MASTER, topEncrypter=BytesEncrypterBase\\{ Cipher='AES128',  keyId='31Dny'}

, formatUsed=DotFormat, decrypters=[BytesEncrypterBase\\{ Cipher='AES128',  keyId='33WgE'}, BytesEncrypterBase\\{ Cipher='AES128',  keyId='31Dny'}, BytesEncrypterBase\\{ Cipher='AES128',  keyId='31Dny'}, BytesEncrypterBase\\{ Cipher='AES128',  keyId='31Dny'}, BytesEncrypterBase\\{ Cipher='AES128',  keyId='2wvk1'}, BytesEncrypterBase\\{ Cipher='AES128',  keyId='31Dny'}]}

2018-11-09 19:43:04,256 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.6577.201810281350007658'

2018-11-09 19:43:04,259 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.ArtifactoryAccessClientConfigStore:572) - Using Access Server URL: [http://localhost:8040/access] (bundled) source: detected

2018-11-09 19:43:04,262 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:304) - Waiting for access server...

2018-11-09 19:43:04,270 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:311) - Got response from Access server after 8 ms, continuing.

2018-11-09 19:43:04,282 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.3258.201809281540027585'

2018-11-09 19:43:04,289 [http-nio-8081-exec-10] [INFO ] (o.j.a.c.AccessClientBootstrap:136) - Revoking invalid adminToken for Service ID jfrt@01cm7wbq921pz21e45gw0t0g13

2018-11-09 19:43:04,290 [http-nio-8081-exec-10] [WARN ] (o.j.a.c.AccessClientBootstrap:148) - Admin token of service 'jfrt@01cm7wbq921pz21e45gw0t0g13' is invalid, revoking and creating a new token: Admin token failed verification.

2018-11-09 19:43:04,306 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:278) - [Node ID: primary] detected local modify for config 'artifactory.security.access/keys/access.creds'

2018-11-09 19:43:04,312 [http-nio-8081-exec-10] [INFO ] (o.a.c.CentralConfigServiceImpl:605) - Reloading configuration... old revision 5, new revision 6

2018-11-09 19:43:04,319 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.7343.201810281356020366'

2018-11-09 19:43:04,356 [Thread-6] [INFO ] (o.j.c.w.ConfigurationManagerImpl:28) - [Node ID: primary] detected local modify for config 'artifactory.security.artifactory.key.1632.201810281348057046'

2018-11-09 19:43:04,418 [http-nio-8081-exec-10] [INFO ] (o.a.c.CentralConfigServiceImpl:369) - New configuration with revision 6 saved.

2018-11-09 19:43:04,419 [http-nio-8081-exec-10] [INFO ] (o.a.s.ArtifactoryApplicationContext:496) - Artifactory application context set to NOT READY by reload

2018-11-09 19:43:04,513 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:992) - Reloading Access Service

2018-11-09 19:43:04,741 [http-nio-8081-exec-10] [INFO ] (o.a.c.CentralConfigServiceImpl:605) - Reloading configuration... old revision 6, new revision 7

2018-11-09 19:43:04,800 [http-nio-8081-exec-10] [INFO ] (o.a.c.CentralConfigServiceImpl:369) - New configuration with revision 7 saved.

2018-11-09 19:43:04,854 [http-nio-8081-exec-10] [INFO ] (o.a.s.a.AccessServiceImpl:992) - Reloading Access Service

2018-11-09 19:43:04,872 [http-nio-8081-exec-10] [ERROR] (o.a.s.a.AccessServiceImpl:972) - Failed to verify access token with id '34041c34-cc35-40c3-8246-f84f04ecfff9': HTTP response status 401:Failed on executing /api/v1/auth/verify/eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiJxcXNoRXZMU0pTTXktNVJ0cGJfY2I1dGFvNWFvN0FRWk5oWkljSFVaOUpzIn0.eyJzdWIiOiJqZnJ0QDAxY3Z0YTJ2NHQyZjM5MGQ2Zm12MHExZDY2XC9ub2Rlc1wvcHJpbWFyeSIsInNjcCI6ImhhLXByb3BhZ2F0ZSBhcGk6KiIsImF1ZCI6ImpmcnRAMDFjdnRhMnY0dDJmMzkwZDZmbXYwcTFkNjYiLCJpc3MiOiJqZnJ0QDAxY3Z0YTJ2NHQyZjM5MGQ2Zm12MHExZDY2IiwiaWF0IjoxNTQxNzAyNTEzLCJqdGkiOiIzNDA0MWMzNC1jYzM1LTQwYzMtODI0Ni1mODRmMDRlY2ZmZjkifQ.ZqtUnJTyyxkDUvRHjqbD1E1ZvyZECS4JPFh-eJeA6XLfhs9-mDEvkFoJXtlflQTDA297qUA-BgUtgGSLDVXBfBRqaTJkOeL8gb55iU_dIJzwvvKTz5ZnshclYM2jrVZfTuuHPX8qmM0fz5iCXQkhEJ3gDVwDD-PyzoXuuSQu4JI_f-OU3gwswsoUAXXxXAKw2zOM5DHPgDCz48OedFMpmA6lTht4PlA7gFID7ri8wmYxX6xVq9nT6AOoH6TWMc5NSgi_Po3tyK8yLRNjy5uXuYDZBqBzwpTA202CuNFjF4rHpHZKP3hNPjcxPA3Of1whueMFMBw0EJw3SzvJqsHJpQ, with response: {

  ""errors"" : [

{     ""code"" : ""UNAUTHORIZED"",     ""message"" : ""Bearer authentication failed"",     ""detail"" : ""invalid token""   }

]

}

2018-11-09 19:43:04,913 [http-nio-8081-exec-10] [INFO ] (o.a.s.ArtifactoryApplicationContext:496) - Artifactory application context set to READY by reload on error: Failed to verify access token with id '34041c34-cc35-40c3-8246-f84f04ecfff9'

2018-11-09 19:43:04,921 [http-nio-8081-exec-10] [ERROR] (o.a.c.CentralConfigServiceImpl:640) - Failed to reload configuration: Failed to verify access token with id '34041c34-cc35-40c3-8246-f84f04ecfff9'

java.lang.RuntimeException: Failed to verify access token with id '34041c34-cc35-40c3-8246-f84f04ecfff9'

at org.artifactory.security.access.AccessServiceImpl.verifyAndGetResult(AccessServiceImpl.java:974)

at org.artifactory.security.access.AccessServiceImpl.verifyToken(AccessServiceImpl.java:955)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy140.verifyToken(Unknown Source)

at org.artifactory.addon.ha.propagate.HaPropagationServiceImpl.readCommunicationToken(HaPropagationServiceImpl.java:165)

at org.artifactory.addon.ha.propagate.HaPropagationServiceImpl.initCommunicationToken(HaPropagationServiceImpl.java:135)

at org.artifactory.addon.ha.propagate.HaPropagationServiceImpl.init(HaPropagationServiceImpl.java:106)

at org.artifactory.addon.ha.propagate.HaPropagationServiceImpl.reload(HaPropagationServiceImpl.java:113)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy246.reload(Unknown Source)

at org.artifactory.spring.ArtifactoryApplicationContext.reload(ArtifactoryApplicationContext.java:393)

at org.artifactory.config.CentralConfigServiceImpl.callReload(CentralConfigServiceImpl.java:538)

at org.artifactory.config.CentralConfigServiceImpl.reloadConfiguration(CentralConfigServiceImpl.java:522)

at org.artifactory.config.CentralConfigServiceImpl.saveDescriptor(CentralConfigServiceImpl.java:311)

at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContext(CentralConfigServiceImpl.java:619)

at org.artifactory.config.CentralConfigServiceImpl.lambda$saveAndReloadContextWithRetry$0(CentralConfigServiceImpl.java:573)

at org.jfrog.common.ExecutionUtils.handleFunctionExecution(ExecutionUtils.java:57)

at org.jfrog.common.ExecutionUtils.lambda$generateExecutionRunnable$0(ExecutionUtils.java:48)

at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)

at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:111)

at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:58)

at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:75)

at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:260)

at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)

at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:56)

at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:36)

at org.jfrog.common.ExecutionUtils.retry(ExecutionUtils.java:41)

at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:572)

at org.artifactory.config.CentralConfigServiceImpl.saveEditedDescriptorAndReload(CentralConfigServiceImpl.java:514)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy138.saveEditedDescriptorAndReload(Unknown Source)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.lambda$saveConfigDescriptor$11(ArtifactoryAccessClientConfigStore.java:586)

at org.artifactory.security.SecurityServiceImpl.doAsSystem(SecurityServiceImpl.java:2591)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy133.doAsSystem(Unknown Source)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.saveConfigDescriptor(ArtifactoryAccessClientConfigStore.java:586)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.lambda$setAdminToken$4(ArtifactoryAccessClientConfigStore.java:299)

at org.artifactory.security.access.AccessServiceImpl$ContextStateDependantActionRunner.runAfterContextCreated(AccessServiceImpl.java:1269)

at org.artifactory.security.access.AccessServiceImpl.runAfterContextCreated(AccessServiceImpl.java:1277)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.setAdminToken(ArtifactoryAccessClientConfigStore.java:293)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.storeAdminToken(ArtifactoryAccessClientConfigStore.java:249)

at org.jfrog.access.client.AccessClientBootstrap.createAndStoreServiceAdminToken(AccessClientBootstrap.java:93)

at org.jfrog.access.client.AccessClientBootstrap.bootstrapServiceAdminToken(AccessClientBootstrap.java:86)

at org.jfrog.access.client.AccessClientBootstrap.<init>(AccessClientBootstrap.java:45)

at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClient(AccessServiceImpl.java:1027)

at org.artifactory.security.access.AccessServiceImpl.lambda$bootstrapAccessClientIfNeeded$15(AccessServiceImpl.java:1004)

at java.util.Optional.ifPresent(Optional.java:159)

at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClientIfNeeded(AccessServiceImpl.java:1002)

at org.artifactory.security.access.AccessServiceImpl.reload(AccessServiceImpl.java:993)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy140.reload(Unknown Source)

at org.artifactory.spring.ArtifactoryApplicationContext.reload(ArtifactoryApplicationContext.java:393)

at org.artifactory.config.CentralConfigServiceImpl.callReload(CentralConfigServiceImpl.java:538)

at org.artifactory.config.CentralConfigServiceImpl.reloadConfiguration(CentralConfigServiceImpl.java:522)

at org.artifactory.config.CentralConfigServiceImpl.saveDescriptor(CentralConfigServiceImpl.java:311)

at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContext(CentralConfigServiceImpl.java:619)

at org.artifactory.config.CentralConfigServiceImpl.lambda$saveAndReloadContextWithRetry$0(CentralConfigServiceImpl.java:573)

at org.jfrog.common.ExecutionUtils.handleFunctionExecution(ExecutionUtils.java:57)

at org.jfrog.common.ExecutionUtils.lambda$generateExecutionRunnable$0(ExecutionUtils.java:48)

at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)

at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:111)

at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:58)

at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:75)

at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:260)

at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)

at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:56)

at com.google.common.util.concurrent.AbstractListeningExecutorService.submit(AbstractListeningExecutorService.java:36)

at org.jfrog.common.ExecutionUtils.retry(ExecutionUtils.java:41)

at org.artifactory.config.CentralConfigServiceImpl.saveAndReloadContextWithRetry(CentralConfigServiceImpl.java:572)

at org.artifactory.config.CentralConfigServiceImpl.saveEditedDescriptorAndReload(CentralConfigServiceImpl.java:514)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy138.saveEditedDescriptorAndReload(Unknown Source)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.lambda$saveConfigDescriptor$11(ArtifactoryAccessClientConfigStore.java:586)

at org.artifactory.security.SecurityServiceImpl.doAsSystem(SecurityServiceImpl.java:2591)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy133.doAsSystem(Unknown Source)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.saveConfigDescriptor(ArtifactoryAccessClientConfigStore.java:586)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.lambda$setAdminToken$4(ArtifactoryAccessClientConfigStore.java:299)

at org.artifactory.security.access.AccessServiceImpl$ContextStateDependantActionRunner.runAfterContextCreated(AccessServiceImpl.java:1269)

at org.artifactory.security.access.AccessServiceImpl.runAfterContextCreated(AccessServiceImpl.java:1277)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.setAdminToken(ArtifactoryAccessClientConfigStore.java:293)

at org.artifactory.security.access.ArtifactoryAccessClientConfigStore.revokeAdminToken(ArtifactoryAccessClientConfigStore.java:284)

at org.jfrog.access.client.AccessClientBootstrap.revokeAdminToken(AccessClientBootstrap.java:150)

at org.jfrog.access.client.AccessClientBootstrap.revokeServiceAdminTokenIfInvalid(AccessClientBootstrap.java:137)

at org.jfrog.access.client.AccessClientBootstrap.bootstrapServiceAdminToken(AccessClientBootstrap.java:83)

at org.jfrog.access.client.AccessClientBootstrap.<init>(AccessClientBootstrap.java:45)

at org.artifactory.security.access.AccessServiceImpl.bootstrapAccessClient(AccessServiceImpl.java:1027)

at org.artifactory.security.access.AccessServiceImpl.initAccessService(AccessServiceImpl.java:283)

at org.artifactory.security.access.AccessServiceImpl.afterImport(AccessServiceImpl.java:1171)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)

at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:201)

at com.sun.proxy.$Proxy140.afterImport(Unknown Source)

at org.artifactory.spring.ArtifactoryApplicationContext.importFrom(ArtifactoryApplicationContext.java:571)

at org.artifactory.rest.resource.system.ImportResource.activateImport(ImportResource.java:101)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

at java.lang.reflect.Method.invoke(Method.java:498)

at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)

at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)

at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)

at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:302)

at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)

at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)

at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)

at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)

at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1542)

at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1473)

at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1419)

at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1409)

at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:409)

at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:558)

at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:733)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.artifactory.webapp.servlet.RepoFilter.execute(RepoFilter.java:184)

at org.artifactory.webapp.servlet.RepoFilter.doFilter(RepoFilter.java:93)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.lambda$doFilter$1(ArtifactoryAuthenticationFilterChain.java:133)

at org.artifactory.webapp.servlet.authentication.PropsAuthenticationFilter.doFilter(PropsAuthenticationFilter.java:131)

at org.artifactory.webapp.servlet.authentication.ArtifactoryAuthenticationFilterChain.doFilter(ArtifactoryAuthenticationFilterChain.java:169)

at org.artifactory.webapp.servlet.AccessFilter.authenticateAndExecute(AccessFilter.java:312)

at org.artifactory.webapp.servlet.AccessFilter.doFilterInternal(AccessFilter.java:209)

at org.artifactory.webapp.servlet.AccessFilter.doFilter(AccessFilter.java:168)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.artifactory.webapp.servlet.RequestFilter.doFilter(RequestFilter.java:78)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.artifactory.webapp.servlet.ArtifactoryCsrfFilter.doFilter(ArtifactoryCsrfFilter.java:66)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.springframework.session.web.http.SessionRepositoryFilter.doFilterInternal(SessionRepositoryFilter.java:164)

at org.springframework.session.web.http.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:80)

at org.artifactory.webapp.servlet.SessionFilter.doFilter(SessionFilter.java:62)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.artifactory.webapp.servlet.ArtifactoryFilter.doFilter(ArtifactoryFilter.java:124)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)

at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)

at org.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:279)

at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)

at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)

at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)

at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)

at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)

at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)

at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)

at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)

at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)

at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)

at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)

at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

at java.lang.Thread.run(Thread.java:748)

Caused by: org.jfrog.access.client.AccessClientHttpException: HTTP response status 401:Failed on executing /api/v1/auth/verify/eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiJxcXNoRXZMU0pTTXktNVJ0cGJfY2I1dGFvNWFvN0FRWk5oWkljSFVaOUpzIn0.eyJzdWIiOiJqZnJ0QDAxY3Z0YTJ2NHQyZjM5MGQ2Zm12MHExZDY2XC9ub2Rlc1wvcHJpbWFyeSIsInNjcCI6ImhhLXByb3BhZ2F0ZSBhcGk6KiIsImF1ZCI6ImpmcnRAMDFjdnRhMnY0dDJmMzkwZDZmbXYwcTFkNjYiLCJpc3MiOiJqZnJ0QDAxY3Z0YTJ2NHQyZjM5MGQ2Zm12MHExZDY2IiwiaWF0IjoxNTQxNzAyNTEzLCJqdGkiOiIzNDA0MWMzNC1jYzM1LTQwYzMtODI0Ni1mODRmMDRlY2ZmZjkifQ.ZqtUnJTyyxkDUvRHjqbD1E1ZvyZECS4JPFh-eJeA6XLfhs9-mDEvkFoJXtlflQTDA297qUA-BgUtgGSLDVXBfBRqaTJkOeL8gb55iU_dIJzwvvKTz5ZnshclYM2jrVZfTuuHPX8qmM0fz5iCXQkhEJ3gDVwDD-PyzoXuuSQu4JI_f-OU3gwswsoUAXXxXAKw2zOM5DHPgDCz48OedFMpmA6lTht4PlA7gFID7ri8wmYxX6xVq9nT6AOoH6TWMc5NSgi_Po3tyK8yLRNjy5uXuYDZBqBzwpTA202CuNFjF4rHpHZKP3hNPjcxPA3Of1whueMFMBw0EJw3SzvJqsHJpQ, with response: {

  ""errors"" : [

{     ""code"" : ""UNAUTHORIZED"",     ""message"" : ""Bearer authentication failed"",     ""detail"" : ""invalid token""   }

]

}

 

*From there on it continues on with a ton more stack traces.*",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyicf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Deletion events are getting lost intermittently when using GCP as storage provider,RTFACT-18351,67214,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,gidis,shaibz,shaibz,24/Jan/19 3:50 PM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,6.6.5,,,,,,,,,,,,,,0,,,,,,"From time to time we can see that customers that uses GCP as their storage provider, get into a minor issue where delete events get lost. Due to that, some files remain at the $ARTIFACTORY_HOME/data/eventual/_delete which causes Artifactory eventual to send delete events on files that are no longer exists on the bucket.

It's most likely an issue with the implementation of GCS via the Jets3t.

While this doesn't affect anything, it can cause a flooding in logs, for example:
{code:java}
ops-artifactory-51f7 /mnt/stateful_partition/artifactory/data/eventual/_delete # find . -name 34573f7c5fadf8a05aa353XXXXXX

./34/34573f7c5fadf8a05aXXXXXX

ops-artifactory-51f7 /mnt/stateful_partition/artifactory/data/eventual/_delete # find . -name 9e9aee37e3b966761dXXXXXX

./9e/9e9aee37e3b966761d18beXXXXXX

ops-artifactory-51f7 /mnt/stateful_partition/artifactory/data/eventual/_delete # find . -name cf0e067b8c2a56b924cfaXXXXXXX

./cf/cf0e067b8c2a56b924cfaXXXXXX
{code}
To resolve it, you can simple delete those files under $ARTIFACTORY_HOME/data/eventual/_delete",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyiaf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't re-order Distribution Repo's rules between pages,RTFACT-18344,67169,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,angellom,angellom,23/Jan/19 11:26 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,5.5.1,6.5.9,6.7.0,,,,,,,,,,,,1,Removed-from-QF,,,,,"When creating rules for distribution repositories in Artifactory, according to the docs ""While it is possible to specify rules that conflict, since rules are applied in the order in which they appear, the first rule that is applied will take precedence."" To change the the order in which they appear you may drag and drop items along the list. 

The problem is that this list is paginated, and it doesn't allow to move the rules between different pages.

 

The behavior is easily reproduce-able with the following steps:
 * Spin up instance (furthest back tested is 5.5.1)
 * Create distribution repository
 * Create enough rules to create a second page
 * Try to change the priority of the rule by dragging it to top
 * Now try to move one from the second page to the top of the first (or anywhere on the first)

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyi27:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Immutability requirement for the producer if virtual repositories are used,RTFACT-18336,67128,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ankushc,ankushc,23/Jan/19 6:32 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Let's consider the following scenario:

1. We have 2 local repositories A (default deployment repo) and B that are part of a virtual repository C. Local repository A is the default deployment repo. And we always access the virtual repository C for both RW operations.

2. The producer pushes all artifacts to C using a user that does not have overwrite access. Before it pushes an artifact, it first checks whether the artifact exists in the virtual repository C. If not, only then it publishes artifact to C.

3. Move-based promotion occurs from A to B.

Let's now try to publish any artifact such as go.mod (for module github.com/foo/bar v1.0.0 file to C. It first goes to A, then gets promoted to B and is always accessible via C. 

What we observed is that the go.mod file for the same module exists on both A and B even though all access was done via C. The CLI checks if an artifact exists on C or not and this check failed even though the artifact used to exist in the repository. What's more problematic is that even if the user doesn't have overwrite permissions, still then we see multiple copies of go.mod files part of the same virtual repository.

We will add more scenarios shortly. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyhtr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"25/Oct/19 8:51 PM;sarikak;Workaround is to use copy based promotion. Closing. Not an active requirement ",,,,,,,,,,
SHA256 search REST API returns empty list although the artifact has SHA256 value,RTFACT-18330,67104,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,liorg,mohammadt,mohammadt,22/Jan/19 3:27 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.6.5,,,,,,,REST API,,,,,,,1,,,,,,"SHA256 search REST API returns empty list although the artifact has SHA256 value.

Steps to reproduce:
1. Install Artifactory 5.3.0.
2. Upgrade it to 6.X
3. Deploy an artifact.
4. Use the below checksum search api to search for the artifact by it SHA256:
https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-ChecksumSearch

You will get an empty response:
  ""results"" : [ ]

Workaround - Enable the SHA256 migration job:
https://www.jfrog.com/confluence/display/RTF/Checksum-Based+Storage
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyhof:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
puppet not being able to authenticate with Artifactory when using a SAML SSO user,RTFACT-18326,67074,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mariy,mariy,22/Jan/19 12:36 AM,05/Jan/21 5:00 PM,18/Feb/21 8:59 AM,,6.6.3,,,,,,,,,,,,,,2,,,,,,"When using the puppet client, puppet is unable to authenticate with Artifactory when using a SAML SSO user and throws a 401 Unauthorized error. 

reproduction steps: 
 # generate API key for SAML user 
 # edit puppet.conf file with the following: 
 ## [main]

module_repository=http://<user>%40jfrog.com%3A<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet

 # pull using the following command: 
 ## puppet module install  --module_repository=http://<user>%40jfrog.com%3A<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet vauto-puppet --debug --verbose

Debug: Runtime environment: puppet_version=4.10.12, ruby_version=2.1.9, run_mode=user, default_encoding=UTF-8

Notice: Preparing to install into /Users/mariy/.puppetlabs/etc/code/modules ...

Notice: Downloading from http://<user>%40jfrog.com%3A<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet ...

Debug: Evicting cache entry for environment 'production'

Debug: Caching environment 'production' (ttl = 0 sec)

Debug: Failed to load library 'pe_license' for feature 'pe_license'

Debug: Failed to load library 'pe_license' for feature 'pe_license'

Debug: HTTP GET http://mattheww%40jfrog.com:AKCp5buTmXMQKUMhVaMregoXScupZsB2bGbLJAroXsncFDtWdGiPqJdwLqRiu9NVX99F2cYzj@mill.jfrog.info:12105/artifactory/api/puppet/puppet/artifactory/api/puppet/puppet/v3/releases?module=vauto-puppet&sort_by=version

Error: Request to Puppet Forge failed.

  The server being queried was http://<user>%40jfrog.com:<api_key>@mill.jfrog.info:12105/v3/releases?module=vauto-puppet&sort_by=version

  *The HTTP response we received was '401 Unauthorized'*

Additional notes: 
 * tested using an internal admin user the pull request is successful 
 * when ""Anonymous Access"" is enabled,  the request works as seen below: 
 ** puppet module install  --module_repository=http://<user>%40jfrog.com%3<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet vauto-puppet 

Notice: Preparing to install into /Users/mariy/.puppetlabs/etc/code/modules ...

Notice: Downloading from http://<user>%40jfrog.com%3<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet ...

Error: Could not install 'vauto-puppet' (latest)

  No releases are available from http://<user>%40jfrog.com%3<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet

    Does 'vauto-puppet' have at least one published release?

 * when using curl with the same url that fails, the command is successful as seen below: 
 ** curl ""http://<user>%40jfrog.com:<api_key>@mill.jfrog.info:12105/artifactory/api/puppet/puppet/v3/releases?module=vauto-puppet&sort_by=version""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyhcf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Jan/19 2:23 PM;jniesen;We recently upgraded to Version 6.6.5 and have verified that the issue still occurs in that version as well.",,,,,,,,,,
Running Artifactory as ROOT application breaks configuration with SAML SSO,RTFACT-18295,66906,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,mattheww,mattheww,16/Jan/19 10:59 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,PB_Done,QF,QF-P3,,,"If you configure Artifactory as the root application ([https://jfrog.com/knowledge-base/how-do-i-setup-artifactory-to-run-as-the-root-application-in-tomcat/]), then the AssertionConsumerServiceURL (or entityID as seen in [https://jfrog.com/knowledge-base/how-do-i-configure-artifactory-saml-sso-with-azure-ad/)] is hard coded to have ""/webapp/saml/loginResponse"" in the URL. However, viewing https://<url>/webapp/saml/loginResponse returns a 404. https://<url>/api/saml/loginResponse does work, however it seems like Artifactory is hard coding the AssertionConsumerServiceURL when sending to the SAML server side:

2019-01-16 22:29:10,535 [http-nio-8081-exec-3] [DEBUG] (o.a.a.s.s.SamlHandlerImpl:438) - XML login request '<saml2p:AuthnRequest xmlns:saml2p=""urn:oasis:names:tc:SAML:2.0:protocol"" AssertionConsumerServiceURL=""https://mill.jfrog.info:12075//webapp/saml/loginResponse""

Other SAML providers like OneLogin seem to be affected as well when running Artifactory as the ROOT app.

There should be a way to configure the AssertionConsumerServiceURL.

Workaround:

-With a reverse proxy, rewrite (not redirect) /webapp/saml/loginResponse to /api/saml/loginResponse",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzze2c:b",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Latest uploaded helm chart was not pulled when used helm install,RTFACT-18290,66898,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pradnyas,pradnyas,16/Jan/19 6:50 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Use case: When there are 2 subfolders in a local helm repository - if there are 2 helm charts(one in each subfolder) with the same name and same version number but with different contents then which helm chart is downloaded in 'helm install'?

Issue: in this use case the Artifactory's behavior is - the first chart that was uploaded to artifactory is downloaded. This issue exists in the latest version Artifactory 6.6.5(issue existence also confirmed on version 6.5.9 testing)

Expected behavior: Latest uploaded chart should be downloaded

Steps to reproduce:
 # Create a local helm repository and create 2 subfolders folder01 and folder02 in it.
 # Deploy 2 helm charts (one in each subfolder). Ensure the Chart.yaml is the same used in both the helm charts so the chart name and version is the same.

 
{code:java}
Following are the sample commands used to deploy the charts.
curl -uadmin:<password> -T <file path>/artifactory-7.4.1.tgz ""http://<artifactory server>/artifactory/helm-local/folder01/artifactory-7.4.1.tgz""

curl -uadmin:<password> -T <file path>/artifactory-7.4.1.tgz ""<artifactory server>/artifactory/helm-local/folder02/artifactory-7.4.1.tgz""

The following was used to install:
helm repo add helm <artifactory server>/artifactory/helm --username admin --password <password>
helm repo update
helm install helm/artifactory{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzygh3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Regression - Build Info link is broken, when there's no trailing slash",RTFACT-18284,66872,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,eyalb,eyalb,16/Jan/19 10:36 AM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Opening this issue following:

https://www.jfrog.com/jira/browse/HAP-1130

The following URL pattern leads to a 404:

[http://localhost:8081/artifactory/webapp/builds/free-maven-1]

This one however works, but does not lead to the latest build:

[http://localhost:8081/artifactory/webapp/#/builds/free-maven-1/]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzygbr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Startup of Artifactory that uses S3 bucket fails when there is a failure to add or download an item from the s3 bucket,RTFACT-18256,66727,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,nihalc@jfrog.com,nihalc@jfrog.com,11/Jan/19 3:37 AM,05/Jan/21 4:59 PM,18/Feb/21 8:59 AM,,6.6.3,,,,,,,,,,,,,,0,,,,,,"Startup of Artifactory that uses S3 bucket fails when there is a failure to test the add or download of an item from the s3 bucket. Although the S3 binary provider has a retry logic for upload and download of blobs. This logic is not being applied during the startup, as Artifactory gives up after just one attempt to download the blob has failed and fails the startup as well. The one attempt to download blob during the startup could have failed due to some reason. This is after a successful connection to the S3 bucket.

Due to this issue even though the connection to S3 bucket is successful and the bucket is available, the startup of Artifactory fails as there was some issue with the S3 bucket that resulted in the failure to download the blob. 

The Artifactory startup should also use the retry logic when doing the test to download or upload a blob to the S3 bucket, if there is a failure due to some issue. This will avoid the scenario where the Artifactory startup fails even after successfully connecting to the S3 bucket due to the download blob failure.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyflz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Modified/Updated date of Docker images not updated,RTFACT-18245,66669,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreas.pelzer,andreas.pelzer,09/Jan/19 5:16 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,6.5.2,,,,,,,Docker,,,,,,,1,,,,,,"When uploading a docker image, Artifactory stores the created date. The modified date and updated date are same as the created date. If another image is uploaded with the same tag, then the updated date and the modified date still remain as the create date. This is important for docker images with the tag ""latest"" because here the created date and updated date differ very often.
Note: updated date and modified date are not visible for docker images but can be received from the REST API.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyf9r:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"07/Feb/19 12:00 PM;jamiet;I would also appreciate it if the modified date were visible on the artifactory UI","31/May/19 12:40 AM;alanm;This is quite confusing, can it be prioritised?","06/Feb/20 1:15 PM;jfagan;Our developers just hit this situation and asked me (DevOps) about it.  I found this bug and would like to see if there's a way to get this fix.",,,,,,,,
npm remotes should serve stale metadata if upstream is not working,RTFACT-18233,66629,Bug,Pending QA,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,Oleksis,gmartinez,gmartinez,09/Jan/19 12:27 AM,12/Feb/21 1:25 PM,18/Feb/21 8:59 AM,,,,,,,,,NPM,,,,,,,0,,,,,,"Artifactory should serve stale metadata for npm remotes if the upstream is having issues (timeout, corrupt JSON, etc). It should print an error in the system logs, but otherwise still function for end users. The current behavior is to return a 404 for the package metadata instead.

 

For example, if the upstream has invalid JSON for the metadata, the request would fail with a 404 and log:

""Error while parsing the response of a remote npm JSON query on 'https://registry.npmjs.org/package': Can not deserialize instance of java.lang.String out of START_OBJECT token",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyezj:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,"22/Sep/20 10:57 AM;evgenyka;If the Metadata Expired Retrieval is met and the metadata is expired AND the repository is not in offline mode, Artifactory should not serve the request for download. 
No plans to change this behaviour.",,,,,,,,,,
wrong http response code for upload request,RTFACT-18231,66614,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,orene,orene,08/Jan/19 2:20 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When upload an artifact (using the cli or the rest API) to a repo that doesn’t exist the response is http 403.

I would expect 400 or 404 instead.",,,,,,,,,,,,,,,,,,,"08/Jan/19 2:17 PM;orene;image-2019-01-08-16-17-20-232.png;https://www.jfrog.com/jira/secure/attachment/31063/image-2019-01-08-16-17-20-232.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyew7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
File path has contains '+' charater should need to show in Artifact Repository Browser when set List Remote Folder Items,RTFACT-18224,66581,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,davids,davids,08/Jan/19 1:56 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,5.11.0,6.6.3,,,,,,Web UI,,,,,,,0,,,,,,"When we mirror a remote repository which has a file name containing ""+"" character, we can't see the file in Artifact Repository Browser

Step to reproduce

1. set up a generic local repository and upload a file which name contains ""+"" character 
   for example,  file_contain_+_here.txt
 !Artifactory_remote.png|thumbnail! 

2. In another instance, set up generic remote repository mirroring above repository with checked List Remote Folder Items
3. we can't see the file which contains ""+"" character.

 !Artifactory_mirroring.png|thumbnail! 

Note, once we resolve the file through the remote repository, it then shows up
 !Artifactory_and_after_resolve.png|thumbnail! ",,,,,,,,,,,,,,,,,,,"08/Jan/19 1:55 AM;davids;Artifactory_and_after_resolve.png;https://www.jfrog.com/jira/secure/attachment/31058/Artifactory_and_after_resolve.png","08/Jan/19 1:55 AM;davids;Artifactory_mirroring.png;https://www.jfrog.com/jira/secure/attachment/31057/Artifactory_mirroring.png","08/Jan/19 1:55 AM;davids;Artifactory_remote.png;https://www.jfrog.com/jira/secure/attachment/31056/Artifactory_remote.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyeqf:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Nuget latest version package in Search Tab,RTFACT-18222,66567,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,ohadl,ohadl,07/Jan/19 7:42 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"Nuget latest version does not show when using Artifactory Search → Search Type:Nuget → ID:<Package Name> → Limit specific repository:<choose repositories>

The order in which the version order is presented is not consistent.

Step to reproduce.

Create a nuget repository.

Upload packages (above 50)

Go to Search tab in Artifactory (mentioned above)

 

See screenshot below

!nugetsearchui.png!

 ",,,,,,,,,,,,,,,,,,,"09/Jan/19 2:50 PM;ohadl;nugetsearchui.png;https://www.jfrog.com/jira/secure/attachment/31077/nugetsearchui.png","09/Jan/19 2:49 PM;ohadl;nugetsearchui.png;https://www.jfrog.com/jira/secure/attachment/31078/nugetsearchui.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyenz:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Sonar missing indication when exception accrue   ,RTFACT-18211,66514,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,tamirh,tamirh,06/Jan/19 8:36 AM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"During some test the tests coverage has dropped from 67% to 61%.
After investigating the issue we have found that the HA tests didn't run, due to class not found exception. 
We are missing indication an exception accrue, expected the test to fail in that case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyed3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Connection timeout of detection of a smart remote repository is to high,RTFACT-18208,66474,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,arielk,arielk,03/Jan/19 3:32 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"When you open any remote repository in Artifactory (via Admin -> Remote -> any remote repository), it automatically sends an HTTP request to the configured URL endpoint with ""/api/system/version"".

In cases where the remote is not reachable, the UI hangs as the connection timeout is too high. It should be no more than 15 seconds (probably less) in my opinion.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzye3j:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
'Created' and 'Last modified' fields are not the same after deploying an artifact,RTFACT-18205,66467,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,inbart,inbart,03/Jan/19 12:33 PM,06/Jan/21 3:09 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"When first uploading an artifact we expect that the 'created' and 'last modified' fields will have the same value.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzye1z:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"Replication API returns 200 OK, despite failing internally",RTFACT-18200,66444,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexd,alexd,02/Jan/19 3:44 PM,07/Jan/21 3:11 PM,18/Feb/21 8:59 AM,,,,,,,,,Replicator,,,,,,,0,,,,,,"This happened in test during unsuccessful distribution attempt

{code}
POST /artifactory/api/replication/replicate/file/streaming/_intransit/sameBundle1546434713577/0.1.0 HTTP/1.1[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""Content-type: application/json[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""X-Auth-Token-Delegate: eyJ2ZXIiOiIyIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYiLCJraWQiOiJ4T0p0M0R3d3FRNGZpTXZvZThKRmlDU1c0Tm50Q0FUOTYtaHYyOFlpVk5RIn0.eyJzdWIiOiJqZnJ0QDAxZDA3YXhlZWc0amtoMDE3dzU1NDIxNXpoXC91c2Vyc1wvYWRtaW4iLCJzY3AiOiJqZnJ0QDAxZDA3YXhlZWc0amtoMDE3dzU1NDIxNXpoOmFkbWluIGFwaToqIiwiYXVkIjoiamZydEAwMWQwN2F4ZWVnNGpraDAxN3c1NTQyMTV6aCIsImlzcyI6ImpmcnRAMDFkMDdheGVlZzRqa2gwMTd3NTU0MjE1emgiLCJleHAiOjE1NDY0MzgzMTksImlhdCI6MTU0NjQzNDcxOSwianRpIjoiZmI0ZjZhN2EtYTU2Ny00NGY5LTg1MmItNTFiNjBjNGJhNTVjIn0.OyFlqDg_yv9xuLiEG2rA395woTN-iLAyO61nDNmcZiWZh_tAWVaZBskoXGzb638MLXwWMK2qbCNqQywQBtmcJ_gYZyzMzZwzFUZDzEYTcjqRttXRh53CGVB0fNNEQGP811IaosDt2zArNdI_ZWReN8KwK9fCfVeUCMDzKo5SOsNxM-wx9Rrm2Sl-u_rRkzssdrq8I_vC8biFo7ecBNLMI2nXR-3c-TPct2GRhQ-Oju88l3BZZHMzeSvn5Y64ZdemQ2uUZWASFXfpVfnmZpIrP3oMYQ27nWJN0V2oWE5EKo-FQiLgwVAdL7KEbMXdOLVB1viVWD6ICCzcsnZDkjEq1Q[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""Content-Length: 216[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""Host: localhost:32801[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""Connection: Keep-Alive[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""User-Agent: artifactory-client-java/2.7.0[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""Accept-Encoding: gzip,deflate[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""Authorization: Basic YWRtaW46cGFzc3dvcmQ=[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""[\r][\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""{[\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""  ""target_artifactory_url"" : ""http://localhost:8081/artifactory"",[\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""  ""source_path"" : ""transaction-source-repo/hello/indexer-tests-0.2.0.tgz"",[\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""  ""target_path"" : ""dstabc1546434713576/hello/0/indexer-tests-0.2.0.tgz""[\n]""
13:12:01.853 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 >> ""}""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""HTTP/1.1 200 OK[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""Date: Wed, 02 Jan 2019 13:12:01 GMT[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""Content-Type: application/octet-stream[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""Transfer-Encoding: chunked[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""Connection: keep-alive[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""Server: Artifactory/6.x.master[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""X-Artifactory-Id: 00126846537dc7957f7f78e8f986adb649f2e967[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""X-Artifactory-Node-Id: node-6ee868d3c0e9[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""70[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""{""status"":""ERROR"",""message"":""Forbidden"",""status_code"":403,""bytes_transferred"":null,""file_transaction_id"":null}[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""0[\r][\n]""
13:12:01.958 [Test worker] DEBUG org.apache.http.wire - http-outgoing-75 << ""[\r][\n]""
{code}

Please note that replicator failed with 403, but Artifactory wrapped it in 200 response",artifactory-pro:6.6.3 in HA configuration (2 nodes behind nignx),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzydyn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Low,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Distribution to HA cluster for the 1st time won't work until explicitly syncing nodes,RTFACT-18195,66438,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,tomern,alexd,alexd,02/Jan/19 2:39 PM,17/Feb/21 8:50 AM,18/Feb/21 8:59 AM,,,,,,,,,High Availability,,,,,,,2,PB_Done,,,,,"When distributing package, we are creating generic repository named ""_intransit"" on target node
The problem is that generation of this repo does not trigger sync on HA cluster, Therefore, the transfer request fails (if the copy request comes to non-notified node)

The workaround is to manually trigger sync between HA nodes and repeat the transaction (api/release/bundle/transaction)

",artifactory-pro:6.6.3 in HA configuration (2 nodes behind nignx),,,,,,,,,,,,,,,,,,"25/Mar/20 9:57 AM;andreyt;artifactory.log-node1;https://www.jfrog.com/jira/secure/attachment/40822/artifactory.log-node1","25/Mar/20 9:57 AM;andreyt;artifactory.log-node2;https://www.jfrog.com/jira/secure/attachment/40823/artifactory.log-node2","25/Mar/20 9:57 AM;andreyt;artifactory.log-node3;https://www.jfrog.com/jira/secure/attachment/40824/artifactory.log-node3","25/Mar/20 10:07 AM;andreyt;request.log-node1;https://www.jfrog.com/jira/secure/attachment/40825/request.log-node1","25/Mar/20 10:07 AM;andreyt;request.log-node2;https://www.jfrog.com/jira/secure/attachment/40826/request.log-node2","25/Mar/20 10:07 AM;andreyt;request.log-node3;https://www.jfrog.com/jira/secure/attachment/40827/request.log-node3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|zc40li:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,dev-artifactory-packages,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Aug/19 9:05 PM;mattheww;still reproduces on 6.11.6:

-Set up edge cluster with two nodes (i did it with helm)

-distribute a bundle to edge node

-check artifactory.config.latest.xml on both nodes after distribution of release bundle. See that only the member node has the _intransit repo

-any other action that would reload the config descriptor would fix issue (such as upgrading or creating a repo)",,,,,,,,,,
Virtual repository is not suppose to include different package types,RTFACT-18193,66427,Bug,Closed,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,orene,orene,02/Jan/19 10:18 AM,06/Jan/21 2:52 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"I was able to create virtual repo that ""holds"" a couple of other repos of different package types !Screen Shot 2019-01-02 at 12.10.00.png!",,,,,,,,,,,,,,,,,,,"02/Jan/19 10:18 AM;orene;Screen Shot 2019-01-02 at 12.10.00.png;https://www.jfrog.com/jira/secure/attachment/30999/Screen+Shot+2019-01-02+at+12.10.00.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzydvb:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Debian metadata calculation can fail due to file save race condition.,RTFACT-18179,66375,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,galba,yehudah,yehudah,31/Dec/18 7:10 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.5.9,,,,,,,Debian,Metadata,,,,,,6,,,,,,"In edge case when there are high number of concurrent Debian packages deployments, the calculation of one or more Debian packages will fail since although an ADD event have been created to the artifact it haven't been committed yet, therefore, Artifactory will not manage to find it and the metadata calculation for this fail will fail with the following error:

2018-12-11 17:59:19,567 [art-exec-597790] [WARN ] (o.j.r.d.e.DpkgMetadataExtractor:206) - Can't read Artifact at path <PATH> --> Failed to retrieve resource <PATH>: Could not get resource stream. Path ‘<PATH>’ not found in <REPO NAME>

 

the workaround for the issue is to manually trigger metadata calculation - it is possible to trigger the operation using the following [REST api call|https://www.jfrog.com/confluence/display/RTF/Artifactory+REST+API#ArtifactoryRESTAPI-CalculateDebianRepositoryMetadata].",,,,,,,,,,,,,,,,RTFACT-20595,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzydkn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Block mismatching mimetypes not done on 302 redirects,RTFACT-18173,66347,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,27/Dec/18 6:59 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,Maven,,,,,,,1,,,,,,"Symptoms: A JAR file that is requested from a remote repository instead returns a 404 HTML page. The content-type from the upstream site does not match the content-type that was requested.

Steps to reproduce:
 # Create a remote repository going to [http://build.eclipse.org/common/xtend/maven]
 # Ensure that the ""Block mismatching mimetypes"" option is checked
 # Attempt to download a nonexistent file, and specify the content-type header:
 curl -vvv -uadmin:password -H""Content-type: application/java-archive"" [http://localhost:8081/artifactory/maven-test-remote/org/eclipse/xtend2/org.eclipse.xtend2.standalone/2.2.1/org.eclipse.xtend2.standalone-2.2.2.jar] 
 # Observe that Artifactory will not block the mismatching mimetypes, sending HTML text instead of a JAR:

< HTTP/1.1 200 OK
 < Server: Artifactory/6.5.9
 < X-Artifactory-Id: 9f7ed9d681cae12b:-4dcb0dab:167c974c19d:-8000
 < Last-Modified: Mon, 30 Oct 2017 20:48:56 GMT
 < ETag: c143977810d6345b60e0d28515110a949a29a3a8
 < X-Checksum-Sha1: c143977810d6345b60e0d28515110a949a29a3a8
 < X-Checksum-Sha256: d46d58c000b511cd0fde4eb331fb09810511709ab0107974bb6148c583a3c2ff
 < X-Checksum-Md5: f8e6bc5ae55d38ad5e7e092679104d37
 < Accept-Ranges: bytes
 < X-Artifactory-Filename: org.eclipse.xtend2.standalone-2.2.2.jar
 < Content-Disposition: attachment; filename=""org.eclipse.xtend2.standalone-2.2.2.jar""; filename*=UTF-8''org.eclipse.xtend2.standalone-2.2.2.jar
 *< Content-Type: application/java-archive*
 < Content-Length: 1156
 < Date: Thu, 27 Dec 2018 18:55:54 GMT
 < 
 <!doctype html public ""-//w3c//dtd html 4.0 transitional//en"">
 <html>
 <head>
 <title>Not Found</title>
 <link rel=""stylesheet"" href=""/default_style.css"">
 <meta http-equiv=""Content-Type"" content=""text/html; charset=iso-8859-1"">
 </head>
 <body>
 <h1> 404 file not found</h1>
 <h2>We're sorry!</h2>
 <p> The page you requested cannot be found. You can
 <a href=""http://www.eclipse.org/search/search.cgi"">Search</a> to find the correct url.</p>
 <p>F[...]
 </p>
 </body>

 

This occurs even if ""text/html"" is added to the ""Override Default Blocked Mime Types"" list. Artifactory should block mismatching mimetypes if an upstream performs a redirect.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzydef:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Distribution Repo - overrides the wrong Content-Type file in Bintray,RTFACT-18165,66319,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,liorha,liorha,27/Dec/18 7:58 AM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,2,,,,,,"In Maven repository type, the ""Distribution Repo"" uploads jar files to Bintray with Content-Type: ""application/octet-stream"" instead of  ""application/java-archive""

 

 case 95115",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyd8f:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
createOrhpanItems repair API uses a broken (and complex) SQL query,RTFACT-18151,66261,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,25/Dec/18 7:23 AM,06/Jan/21 3:32 PM,18/Feb/21 8:59 AM,,5.5.2,6.6.0,,,,,,Database,,,,,,,0,,,,,,"*Overview:*

Migrating from case insensitive database, could have path aggregations (and conflicts) if there were files deployed in similar manner as below:

fatherDir/childrepo/file.ext
fatherDir/ChiLdrEpo/file2.ext

You would see the two files above under fatherDir/childrepo only.

Artifactory has a built-in mechanism that scans and detects which folders has no father and create the folder automatically. 

However the *query used for it* (below in the JIRA) is broken for at least 2 cases and considered very complex (O(n^2) complexity) which can cause it to run for days (and possibility not complete) with millions of artifacts, and other registered paths scenarios.

*Workaround*:

Set up replication between two instances, original one should be case *insensitive* - target should be *sensitive*


----

*Steps to reproduce 3 scenario the query would be broken for:*

1. If there are paths in *other repositories* which have the same *parent* paths as in the repository the query was issued for. E.g.:

a. Create paths like below on one repo like below (this already creates a conflict the query should repair):
curl -i -Lvv -X PUT -uadmin:password ""localhost:8081/artifactory/generic-local/father/child/foo.bar״
curl -i -Lvv -X PUT -uadmin:password ""localhost:8081/artifactory/generic-local/father/chilD/foo.bar""

b. Create similar parent path like below on a *different repo*:
curl -i -Lvv -X PUT -uadmin:password ""localhost:8081/artifactory/generic-local-2/father/chilD/foo.bar""

The createOrphans repair REST API for generic-local repo will return an empty result.


----


2.  If a father path *under the same repository* will contain the same directory component but a different ancestor to the father:

a. Create paths like below on one repo like below (this already creates a conflict the query should repair):
curl -i -Lvv -X PUT -uadmin:password ""localhost:8081/artifactory/generic-local/father/child/foo.bar״
curl -i -Lvv -X PUT -uadmin:password ""localhost:8081/artifactory/generic-local/father/chilD/foo.bar""

b. Create a different ancestor path while keeping the same orphan father directory like below:
curl -i -Lvv -X PUT -uadmin:password ""localhost:8081/artifactory/generic-local/boo/chilD/foo.bar2""


----

3. Half a million of conflicts out of total million artifacts on a single repository:

a. Create large repository with conflicts (half million affected)
b. Issue the repair createOrphan API for that repo:

api/repairPaths/createOrphanItems/<repoKey>

c. It will ""never"" complete

{code}
""SELECT * FROM nodes n1"" +
                            "" WHERE n1.repo = ?"" +
                            "" AND n1.node_path like ?"" +
                            "" AND n1.node_name NOT IN"" +
                            "" (SELECT n2.node_name FROM nodes n2, nodes n3"" +
                            "" WHERE (n2.node_path like '%/%' AND n2.node_path like CONCAT('%/', n3.node_name))"" +
                            "" OR (n2.node_path not like '%/%' AND n2.node_path like CONCAT('%', n3.node_name)))"",
                    path.getRepo(), emptyIfNullOrDot(path.getPath()) + ""%""
{code}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzycxr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"31/Dec/18 3:50 PM;andreik;Workaround:

Set up replication between two instances, original one should be case *insensitive* - target should be *sensitive*
",,,,,,,,,,
console error while editing repo with replication,RTFACT-18143,66241,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,matang,anastasiyam,anastasiyam,24/Dec/18 9:18 AM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"steps to reproduce:
edit local repository
add replication
save
edit again the repository
you will see this error in console
{noformat}
TypeError: Cannot read property 'blockPushReplications' of undefined
    at Object.visibleWhen (repository_form.controller.js:922)
    at Array.fn2 (eval at compile (vendorScripts.1236.js:13), <anonymous>:4:1929)
    at vendorScripts.1236.js:9
    at Scope.$digest (vendorScripts.1236.js:10)
    at Scope.$apply (vendorScripts.1236.js:10)
    at done (vendorScripts.1236.js:8)
    at completeRequest (vendorScripts.1236.js:9)
    at XMLHttpRequest.xhr.onload (vendorScripts.1236.js:9)
(anonymous) @ vendorScripts.1236.js:9
(anonymous) @ vendorScripts.1236.js:8
$digest @ vendorScripts.1236.js:10
$apply @ vendorScripts.1236.js:10
done @ vendorScripts.1236.js:8
completeRequest @ vendorScripts.1236.js:9
xhr.onload @ vendorScripts.1236.js:9
load (async)
(anonymous) @ vendorScripts.1236.js:9
$httpBackend @ vendorScripts.1236.js:16
sendReq @ vendorScripts.1236.js:8
serverRequest @ vendorScripts.1236.js:8
processQueue @ vendorScripts.1236.js:9
(anonymous) @ vendorScripts.1236.js:10
$digest @ vendorScripts.1236.js:10
$apply @ vendorScripts.1236.js:10
(anonymous) @ vendorScripts.1236.js:10
completeOutstandingRequest @ vendorScripts.1236.js:6
(anonymous) @ vendorScripts.1236.js:7
setTimeout (async)
Browser.self.defer @ vendorScripts.1236.js:7
timeout @ vendorScripts.1236.js:10
(anonymous) @ vendorScripts.1236.js:19
dispatch @ vendorScripts.1236.js:3
elemData.handle @ vendorScripts.1236.js:3
{noformat}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzycl3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
issues validating pom.xml file containing '<?m2e',RTFACT-18132,66136,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,lakshmip,lakshmip,20/Dec/18 4:53 PM,06/Jan/21 3:34 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,1,,,,,,"there are issues with maven plugin with versions <=3.3.9  where we are running into the issue with pom.xml validation containing ""<?m2e"". Hence upgrading the maven plugin version in Artifactroy will help us.

current maven plugin version in Artifactroy is 3.0.4 

/appl/artifactory/artifactory/tomcat/webapps/artifactory/WEB-INF/lib

maven-artifact-3.0.4.jar
maven-artifact-manager-2.2.1.jar
maven-model-3.0.4.jar
maven-plugin-api-3.0.4.jar
maven-plugin-descriptor-2.2.1.jar
maven-project-2.2.1.jar
maven-repository-metadata-3.0.4.jar
maven-settings-3.0.4.jar


 ",,,,,,,,,,,,,,,,,,,"27/Feb/19 6:20 AM;lakshmip;JFrogSupport.pom;https://www.jfrog.com/jira/secure/attachment/31553/JFrogSupport.pom","27/Feb/19 6:20 AM;lakshmip;error_log_trace.rtf;https://www.jfrog.com/jira/secure/attachment/31552/error_log_trace.rtf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyc5b:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
artifactory.search.limitAnonymousUsersOnly System Property does nothing,RTFACT-18130,66072,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,patrickr,patrickr,19/Dec/18 9:30 PM,06/Jan/21 3:26 PM,18/Feb/21 8:59 AM,,,,,,,,,Search,,,,,,,1,,,,,,"Due to the fix in RTFACT-12512, Anonymous searches are intentionally limited in order to prevent large queries from draining system resources.

An Artifactory System Property was created to disable this restriction. However, enabling or disabling the property does not change the limits placed on the Anonymous user.

Steps to reproduce:
 # Set the following tags in your $ART_HOME/etc/artifactory.system.properties
artifactory.search.limitAnonymousUsersOnly=false
artifactory.search.userQueryLimit=2
 # Restart Artifactory
 # Run a GAVC search against a repository with at least 3 file coordinates anonymously:
curl -vvv ""http://localhost:8081/artifactory/api/search/gavc?g=jfrog&repos=libs-snapshot-local""


 # Observe that only 2 results are returned when the request is ran anonymously. 

Setting the value to ""true"" produces the same results, indicating the setting is not being used. The only setting that affects anonymous searches is the artifactory.search.userQueryLimit argument.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzybt3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"26/Apr/19 9:06 AM;czardis;My understanding is that ""artifactory.search.limitAnonymousUsersOnly"" means ""apply the limit only to anonymous users"", so turning it off applies the userQueryLimit to other users too. i.e. the ""artifactory.search.limitAnonymousUsersOnly"" option cannot be used to open up anonymous users to unlimited search sizes, and that this is by design. Perhaps someone from JFrog can confirm this.",,,,,,,,,,
Helm repository does not support pagination,RTFACT-18115,65990,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,dancc,dancc,17/Dec/18 9:48 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,helm,,,,,"Not sure if this is a known issue/limitation but we hit this when trying to request the traefik chart from Artifactory and found that only the first 1000 charts were returned (basically everything from A - G). I asked the helm guys about this, thinking it was a helm issue, and they noted in the issue below that basically pagination is just not supported by your client (that being Artifactory). Any thoughts/opinions one way or another?

https://github.com/helm/helm/issues/5057",,,,,,,,,,,,,,,,,,,"06/Jan/19 1:38 PM;nadavy;Screen Shot 2019-01-06 at 15.37.31.png;https://www.jfrog.com/jira/secure/attachment/31026/Screen+Shot+2019-01-06+at+15.37.31.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzybfr:",Yes,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
The rest api for download folder is not working in case Artifactory integrated with Xray,RTFACT-18113,65974,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,gidis,galr,galr,17/Dec/18 2:31 PM,06/Jan/21 3:33 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"* Connect Xray to Artifactory 
 * Deploy to Artifactory random artifact without vulnerabilities under folder 
 * Enable in Artifactory 'Enable Folder Download'
 * Download the folder of the deployed artifact via API:

{code:java}
POST /artifactory/api/archive/download/generic-local/test?archiveType=zip{code}
Result:

Although the artifact without vulnerabilities:
{code:java}
{
""errors"": [
{
""status"": 403,
""message"": ""Path 'generic-local/test' contains blocked artifacts by Xray""
}
]
}{code}
 

and although Xray returns:
{code:java}
{""status"":""Scanned - No Issues"",""artifact_download_status"":{""download_blocked"":false,""download_blocked_reason"":""""}{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzybcn:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Steps to Migrate data from one repository type to another,RTFACT-18066,65802,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,rathan.kumar,rathan.kumar,12/Dec/18 2:50 PM,05/Jan/21 1:13 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,conda,generic,,,,"Hi Team,

planning to upgrade to 6.5.x version of artifactory.

current version is 5.10.4

 

Since the Artifactory support for Conda type we have been planning to migrate all of our data to Conda type repositories from Generic/Maven type repositories.

 

What is the best way of migrating all the data from a generic/Maven type to Conda type repositories ?

we have an internal indexing job that runs against these repositories, do we need to run any kind of indexing, or Conda type will take care of indexing  ?

 

Thanks,

Rathan

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzyaf3:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"12/Dec/18 2:53 PM;rathan.kumar;I think i created this in the wrong project, can you please move it to the right project ?","12/Dec/18 7:37 PM;salehs;[~rathan.kumar] Hi Rathan, to address this question, please open a support case by sending your query to support@jfrog.com
Thanks",,,,,,,,,
High DB connections peak post upgrade 6.5.6  ,RTFACT-18060,65767,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,pradnyas,pradnyas,11/Dec/18 7:31 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.5.6,,,,,,,,,,,,,,1,,,,,,"# Upgrade Artifactory from 5.4.x to 6.5.6
 # Monitoring tool graphs observation:

 * Post upgrade there is an increase in the DB connections spike

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzya8f:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
"In AQL, when .limit() is set with .include(), it also affects the length of the properties array returned",RTFACT-18059,65766,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,saraa,saraa,11/Dec/18 7:29 PM,06/Jan/21 3:08 PM,18/Feb/21 8:59 AM,,6.5.8,,,,,,,,,,,,,,3,,,,,,"With the following query:

*items.find({*
*""repo"":\{""$eq"":""docker""}*
*}).include(""@docker.repoName"", ""@docker.manifest.digest"").limit(1)*

Actual properties output:
*""properties"" : [ {*
*""key"" : ""docker.manifest.digest"",*
*""value"" : ""a96cd68a27eef4bb7bfe99896e7662ef3a1b53afb4cc8cea6f17e568a1004aaa""*
*} ]*

Expected output:

 *""properties"" : [ {*
 *""key"" : ""docker.repoName"",*
 *""value"" : ""kolla/centos-binary-neutron-openvswitch-agent""*
 *}, {*
 *""key"" : ""docker.manifest.digest"",*
 *""value"" : ""2b9cf69abad07f4496308ac000e8e2dd6d060978ebfa01df662949ee1745ff4c""*
 *} ]*

Setting a value to the limit should not affect the length of the properties returned",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzya87:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"24/Sep/19 3:11 PM;stefanga;It also limits the number of returned results.

{code:java}
items.find({""repo"":""firmware-releases-cfp"",""type"":""folder"",""@release.version_number"":""19.39.0"",""@fwrt.upload_status"":""complete""}).include(""property"")
...
""range"" : {
  ""start_pos"" : 0,
  ""end_pos"" : 103,
  ""total"" : 103
}
{code}

{code:java}
items.find({""repo"":""firmware-releases-cfp"",""type"":""folder"",""@release.version_number"":""19.39.0"",""@fwrt.upload_status"":""complete""}).include(""property"").limit(20)
...
""range"" : {
  ""start_pos"" : 0,
  ""end_pos"" : 2,
  ""total"" : 2,
  ""limit"" : 20
}
{code}

The result stops after returning the specified number of properties. In the case above the two items that were returned contained 18 and 2 properties respectively.

I would consider this to be a bug with higher than normal priority since it affects the possibility to get the expected result from Artifactory.
A user can't trust the returned result since its both partial in the number of items it returned and the last item it returned will not contain all expected properties.

Please consider this to a release in the near future.

Tested with 6.11.3",,,,,,,,,,
Docker API returns 404 instead of 304 on cache revalidation,RTFACT-18046,65719,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,jkang,jkang,10/Dec/18 6:59 PM,06/Jan/21 3:27 PM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"Hi, 

We are using Nginx as the front-end proxy to Artifactory 6.1.0 and we notice Docker cache

revalidation returns 404. We expect 304.

 

Running curl/GET with just authorization
* About to connect() to 10.32.32.41 port 8081 (#0)
* Trying 10.32.32.41...
* Connected to 10.32.32.41 (10.32.32.41) port 8081 (#0)
> GET /artifactory/api/docker/virtual-docker-irdevops/v2/nginx-v4/blobs/sha256:e391f272bb903b87630a42d2423af7b66f02c62667cb4da7760f48a3d4a2bc07 HTTP/1.1^M
> User-Agent: curl/7.29.0^M
> Host: 10.32.32.41:8081^M
> Accept: */*^M
> Authorization: Bearer AKCp2VokVRAYToiTtR7wjTz47bd9AicvoCdeVEtKn6re6TuKyEAk92esasaddBz5QcAmDcj^M
> ^M
< HTTP/1.1 200 OK^M
< Server: Artifactory/6.1.0^M
< X-Artifactory-Id: e2acf74e7de9285243bfae019fd03c280b708805^M
< X-Artifactory-Node-Id: artif1^M
< Last-Modified: Sat, 17 Nov 2018 00:05:13 GMT^M
< ETag: a935b5706a6d17fccc3b92a7b6d5592b2b20bbbd^M
< X-Checksum-Sha1: a935b5706a6d17fccc3b92a7b6d5592b2b20bbbd^M
< X-Checksum-Sha256: e391f272bb903b87630a42d2423af7b66f02c62667cb4da7760f48a3d4a2bc07^M
< X-Checksum-Md5: 35e308b10a0c0b47a7f1fbab24378530^M
< Accept-Ranges: bytes^M
< X-Artifactory-Filename: sha256__e391f272bb903b87630a42d2423af7b66f02c62667cb4da7760f48a3d4a2bc07^M
< Content-Disposition: attachment; filename=""sha256__e391f272bb903b87630a42d2423af7b66f02c62667cb4da7760f48a3d4a2bc07""^M
< Docker-Distribution-Api-Version: registry/2.0^M
< Docker-Content-Digest: sha256:e391f272bb903b87630a42d2423af7b66f02c62667cb4da7760f48a3d4a2bc07^M
< Content-Type: application/octet-stream^M
< Content-Length: 21420714^M
< Date: Mon, 10 Dec 2018 18:49:17 GMT^M
< ^M
{ [data not shown]
* Connection #0 to host 10.32.32.41 left intact

Running curl/GET with auth, If-Modified-Since, If-None-Match
* About to connect() to 10.32.32.41 port 8081 (#0)
* Trying 10.32.32.41...
* Connected to 10.32.32.41 (10.32.32.41) port 8081 (#0)
> GET /artifactory/api/docker/virtual-docker-irdevops/v2/nginx-v4/blobs/sha256:e391f272bb903b87630a42d2423af7b66f02c62667cb4da7760f48a3d4a2bc07 HTTP/1.1^M
> User-Agent: curl/7.29.0^M
> Host: 10.32.32.41:8081^M
> Accept: */*^M
> If-None-Match: a935b5706a6d17fccc3b92a7b6d5592b2b20bbbd^M
> If-Modified-Since: Sat, 17 Nov 2018 00:05:13 GMT^M
> Authorization: Bearer AKCp2VokVRAYToiTtR7wjTz47bd9AicvoCdeVEtKn6re6TuKyEAk92esasaddBz5QcAmDcj^M
> ^M
< HTTP/1.1 404 Not Found^M
< Server: Artifactory/6.1.0^M
< X-Artifactory-Id: e2acf74e7de9285243bfae019fd03c280b708805^M
< X-Artifactory-Node-Id: artif1^M
< Docker-Distribution-Api-Version: registry/2.0^M
< Content-Type: application/json^M
< Content-Length: 157^M
< Date: Mon, 10 Dec 2018 18:49:17 GMT^M
< ^M
{ [data not shown]
* Connection #0 to host 10.32.32.41 left intact",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzy9xr:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"14/Jan/19 8:30 AM;mfriedenhagen;Hello, paying customer here. We see this behavior as well.",,,,,,,,,,
Artifactory does not start as a service after running InstallService.sh on RedHat  ,RTFACT-18009,65559,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,timt,timt,08/Dec/18 3:58 AM,06/Jan/21 3:25 PM,18/Feb/21 8:59 AM,,6.5.9,,,,,,,startup,,,,,,,11,Installer,,,,,"Artifactory does not start as a service after running _InstallService.sh_ script on RedHat 7.5.

It looks like you do not need to run _InstallService.sh_ script when installing an RPM. Once the RPM installation of Artifactory is complete, you can easily start the instance by running service artifactory start command. The problem arises when a user is unaware of that, and runs the _/opt/jfrog/artifactory/bin/installService.sh_ script unintentionally. After that, when running _service artifactory start_ it fails fails with the following ERRORs:

[root@ip-10-0-3-223 bin]# service artifactory start
Redirecting to /bin/systemctl start artifactory.service
Job for artifactory.service failed because a configured resource limit was exceeded. See ""systemctl status artifactory.service"" and ""journalctl -xe"" for details.
.

.

[root@ip-10-0-3-223 ~]# systemctl status artifactory.service
● artifactory.service - Setup Systemd script for Artifactory in Tomcat Servlet Engine
   Loaded: loaded (/usr/lib/systemd/system/artifactory.service; enabled; vendor preset: disabled)
   Active: activating (auto-restart) (Result: resources) since Sat 2018-12-08 03:34:19 UTC; 789ms ago
  Process: 11805 ExecStart=/opt/jfrog/artifactory/bin/artifactoryManage.sh start (code=exited, status=0/SUCCESS)
 Main PID: 30831 (code=exited, status=0/SUCCESS)

Dec 08 03:34:19 ip-10-0-3-223.us-west-2.compute.internal systemd[1]: Failed to start Setup Systemd script for Artifactory in Tomcat Servlet Engine.
Dec 08 03:34:19 ip-10-0-3-223.us-west-2.compute.internal systemd[1]: Unit artifactory.service entered failed state.
Dec 08 03:34:19 ip-10-0-3-223.us-west-2.compute.internal systemd[1]: artifactory.service failed.

Also attached the screenshot of an ERROR.

Steps to reproduce:

 
 # Install RedHat 7.5
 # Install Artifactory as RPM- yum install jfrog-artifactory-pro
 # Once installed, run /opt/jfrog/artifactory/bin/installService.sh script
 # It will notify you that the following directories are missing 
 ## /opt/jfrog/artifactory/etc/
 ## /opt/jfrog/artifactory/etc.original/
 # Once you create those two directories, re-run /opt/jfrog/artifactory/bin/installService.sh script
 # Try to start the instance as a service: service artifactory start

 

The only workaround I am aware of is by re-installing the instance/node completely, and not running _/opt/jfrog/artifactory/bin/installService.sh_ script.

OR just start the instance using the /opt/jfrog/artifactory/bin/artifactory.sh.

 ",,,,,,,,,,,,,,,,,,,"08/Dec/18 3:57 AM;timt;2.jpg;https://www.jfrog.com/jira/secure/attachment/30624/2.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzy9e7:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Medium,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,"27/Feb/19 3:18 PM;samir.causevic;We are seeing similar issues with our Artifactory 6..4.0. zip install moving from REHL 7.3 > 7.5. Exact same error. Jfrog confirmed in one of the support tickets that they have done a similar setup/testing scenario and are encountering the issue as well. Seems to be a bug for sure.","28/Feb/19 11:06 AM;bennys;Hi Guys,

i would like to help, any chance to see this happen live? you got demo setup?

 ","02/Mar/19 11:38 PM;cvoinea91;Hi, [~bennys] I think I have just managed to hit this issue using jfrog-artifactory-oss-6.8.3.deb on an Ubuntu 18.04 host.

I have actually managed to fix it albeit manually, but without reinstalling the instance (mostly since I ran into this because my target was to change the ARTIFACTORY_HOME away from that /var/opt/jfrog/artifactory default, and without solving this there is no easy way to do that). 

I will do my best to provide the steps for reproducing as well as the manual fix (if something is not clear let me know):
 # Install Artifactory using the jfrog-artifactory-oss-6.8.3.deb on the host (I guess it will be the same for other release packages)
 # As described above run the /opt/jfrog/artifactory/bin/installService.sh script
 # The script throws an error, this can be easily solved by creating those empty dirs (as mentioned above) on /opt/jfrog/artifactory/
 ## Or creating just the etc one and rerunning the script twice after that
 # At this point after rerunning the script again everything goes through 
 # Trying to launch the systemd service with:  systemctl start artifactory fails as mentioned above
 # Debugging that failure a little bit provides some insight into this issue

 

At this point I actually edited /etc/opt/jfrog/artifactory/default (where the default instance config is stored) and switched the ARTIFACTORY_HOME to a different location in the file system, after that I just moved all the file structure that had been generated under /var/opt/jfrog/artifactory to the new location. 
 # On step 6 above from that systemd failure I learned that what that service actually does is call on the following script:
 ##  /opt/jfrog/artifactory/bin/artifactoryManage.sh with the ""start"" parameter like so: artifactoryManage.sh start
 ## Doing that manually revealed that the script actually relies on a soft link for ""logs"" under /opt/jfrog/artifactory/tomcat
 ## It seems that because of the rerun of /opt/jfrog/artifactory/bin/installService.sh that soft link is getting broken (since it points to a bad location somehow)
 ## In my case I just removed the broken link and fixed it to the right jfrog/artifactory/logs/catalina location under my new ARTIFACTORY_HOME path.
 ## Once that was fixed I just had to fix some permissions for new location (I think that was a local thing, since my new location had some particular requirements) and then everything worked just fine.
 ## If you are not changing the ARTIFACTORY_HOME like I did, maybe check all the other soft links that are required (some others might not point right or folders might be missing under that path hierarchy)

As a debugging option to ensure everything is ok running the ""artifactoryManage.sh start"" manually under a user with permissions over the Artifactory folders is a good way to track this down. In case anybody is facing any permissions issues once the logs link is set properly under /opt/jfrog/artifactory/tomcat/logs check the logs for any error messages.

[~bennys] sorry for the long text, I hope this helps. 

 ","17/Sep/19 5:21 PM;Mohanraj;Any update on this we are facing similar issue  in artifactory pro 6.11.3

-----------------------------------------------------------------------------------------------

It was happening one server now it is happening in all the server.

!image-2019-09-17-22-50-54-179.png!","24/Sep/19 2:45 PM;wattersm;I'm seeing the same problem on a node running CentOS 7.7.  The artifactory process *is* started but the systemd status shows the service as ""failed"" which makes our configuration management attempt to restart the service every time it runs.

I'm able to start the service without any issues by running /opt/jfrog/artifactory/bin/artifactoryManage.sh start manually however using the systemctl start artifactory.service command will fail with an error message like this:

 

```

● artifactory.service - Setup Systemd script for Artifactory in Tomcat Servlet Engine
 Loaded: loaded (/usr/lib/systemd/system/artifactory.service; enabled; vendor preset: disabled)
 Active: activating (auto-restart) (Result: resources) since Tue 2019-09-24 10:45:11 EDT; 4s ago
 Process: 25423 ExecStart=/opt/jfrog/artifactory/bin/artifactoryManage.sh start (code=exited, status=0/SUCCESS)
 Main PID: 1336 (code=exited, status=143)

Sep 24 10:45:11 mdct-artifactory.example.com systemd[1]: Failed to start Setup Systemd script for Artifactory in Tomcat Servlet Engine.
Sep 24 10:45:11 mdct-artifactory.example.com systemd[1]: Unit artifactory.service entered failed state.
Sep 24 10:45:11 mdct-artifactory.example.com systemd[1]: artifactory.service failed.

```

 ","05/Oct/19 11:56 AM;soniya;Any update on this we are facing a similar issue","24/Oct/19 10:54 AM;stefan_kb;We are also seeing something similar on 6.8.0. systemd tells us:
{code:java}
Can't open PID file /var/opt/jfrog/run/artifactory.pid (yet?) after start: No such file or directory{code}
{code:java}
# grep ARTIFACTORY_PID /etc/opt/jfrog/artifactory/default
export ARTIFACTORY_PID=/var/opt/jfrog/run/artifactory.pid{code}
{code:java}
# systemctl cat artifactory.service | grep /var/opt/jfrog/run/artifactory.pid
PIDFile=/var/opt/jfrog/run/artifactory.pid{code}
{code:java}
# cat /var/opt/jfrog/run/artifactory.pid
cat: /var/opt/jfrog/run/artifactory.pid: No such file or directory{code}
It seems, that the pid file is not generated.

Also the systemd unit file has GuessMainPID configured, which according to [systemd documentation,|https://www.freedesktop.org/software/systemd/man/systemd.service.html] is ignored if {{PIDFile}} is set.","24/Oct/19 1:57 PM;wattersm;For those of you having this issue I have updated the systemd unit files and the startup script to work properly under CentOS 7.  Files are available at the following URLs.

[https://gist.github.com/ca98e9039cee8c6457d1e21cec1cd6be]

https://gist.github.com/4311e40fa65085c096710b4e627b76f8",,,
Artifactory should always save the actual artifactory.config.latest.xml after changes,RTFACT-17998,65532,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,andreik,andreik,06/Dec/18 6:14 PM,05/Jan/21 5:01 PM,18/Feb/21 8:59 AM,,6.5.8,,,,,,,Configuration,,,,,,,0,QF,QF-P2,S-P1,,,"The artifactory.config.latest.xml file should be always saved to the disk as the actual latest config. 

This causes much confusion for users thinking it is the latest.

This file is exported to the disk on certain conditions only.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzy98v:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,High,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
Can't perform `vagrant box add`,RTFACT-17993,65519,Bug,Open,RTFACT,Artifactory Binary Repository,software,yanivs,The Universal Repository Manager,http://www.jfrog.com/artifactory/,,,alexander.turbov,alexander.turbov,06/Dec/18 2:24 PM,05/Jan/21 11:24 AM,18/Feb/21 8:59 AM,,,,,,,,,,,,,,,,0,,,,,,"The ""naive"" way specified in ""Set Me Up"" dialog just won't work at all (tested w/ `vagrant` 2.2.2 and 2.1.1):
{noformat}
$ vagrant box add ""https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>""
==> box: Box file was not detected as metadata. Adding it directly...
A name is required when adding a box file directly. Please pass
the `--name` parameter to `vagrant box add`. See
`vagrant box add -h` for more help.
{noformat}
As suggested `<censored-box-name>` is a box_name property of the image in the repo.

 

The following also won't work due to various reasons:
{noformat}
$ vagrant box add --name Some ""https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>""
==> box: Box file was not detected as metadata. Adding it directly...
==> box: Adding box 'Some' (v0) for provider:
    box: Downloading: https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>
An error occurred while downloading the remote file. The error
message, if any, is reproduced below. Please fix this error and try
again.

The requested URL returned error: 401 Unauthorized
$ vagrant box add --name <censored-box-name> ""https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>""
==> box: Box file was not detected as metadata. Adding it directly...
==> box: Adding box '<censored-box-name>' (v0) for provider:
    box: Downloading: https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>
An error occurred while downloading the remote file. The error
message, if any, is reproduced below. Please fix this error and try
again.

The requested URL returned error: 401 Unauthorized
$ vagrant box add --name <censored-box-name> ""https://<username>:<pass>@<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>""
==> box: Loading metadata for box 'https://*****:*****@<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>'
==> box: Adding box '<censored-box-name>' (v6) for provider: OnixS
    box: Downloading: https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-filename>.box
An error occurred while downloading the remote file. The error
message, if any, is reproduced below. Please fix this error and try
again.

The requested URL returned error: 401 Unauthorized
$ vagrant box add --name <censored-box-name> ""https://<username>:<api-key>@<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>""
==> box: Loading metadata for box 'https://*****:*****@<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-name>'
==> box: Adding box '<censored-box-name>' (v6) for provider: OnixS
    box: Downloading: https://<censored>.jfrog.io/<censored>/api/vagrant/vagrant/<censored-box-filename>.box
An error occurred while downloading the remote file. The error
message, if any, is reproduced below. Please fix this error and try
again.

The requested URL returned error: 401 Unauthorized
{noformat}
 

In the web UI in Admin → System Logs I see 401 to the box file in the `request.log`...

 

What is the problem?? How on Earth I can access my vagrant boxes using `vagrant box add`?

 

#ping {color:#339966}Adrian Biderman{color}

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,No,No,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2|hzy96f:",,,,,,,,UNCOVERED,,,,,,,,,,,,,,,,,Critical,,,,,,,,,,,,,,,,,,,,,,,,,,,Artifactory,,,,,,,100.0,,,,,,,,,,,,,,,,,,,,,,
