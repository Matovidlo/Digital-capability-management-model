Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Dependency),Outward issue link (Dependent),Outward issue link (Duplicate),Outward issue link (Reference),Outward issue link (Reference),Outward issue link (dependent),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Affects version (Component)),Custom field (Attachment count),Custom field (Blog - New Blog Administrators),Custom field (Blog - New Blog PMC),Custom field (Blog - Write access),Custom field (Blog Administrator?),Custom field (Blogs - Admin for blog),Custom field (Blogs - Email Address),Custom field (Blogs - Existing Blog Access Level),Custom field (Blogs - Existing Blog Name),Custom field (Blogs - New Blog Write Access),Custom field (Blogs - Username),Custom field (Bug Category),Custom field (Bugzilla - Email Notification Address),Custom field (Bugzilla - List of usernames),Custom field (Bugzilla - PMC Name),Custom field (Bugzilla - Project Name),Custom field (Bugzilla Id),Custom field (Bugzilla Id),Custom field (Change Category),Custom field (Complexity),Custom field (Date of First Response),Custom field (Discovered By),Custom field (Docs Text),Custom field (Enable Automatic Patch Review),Custom field (Epic Link),Custom field (Estimated Complexity),Custom field (Evidence Of Open Source Adoption),Custom field (Evidence Of Registration),Custom field (Evidence Of Use On World Wide Web),Custom field (Existing GitBox Approval),Custom field (External issue ID),Custom field (External issue URL),Custom field (Fix version (Component)),Custom field (Flags),Custom field (Git Notification Mailing List),Custom field (Git Repository Import Path),Custom field (Git Repository Name),Custom field (Git Repository Type),Custom field (GitHub Options),Custom field (Github Integration),Custom field (Github Integrations - Other),Custom field (Global Rank),Custom field (INFRA - Subversion Repository Path),Custom field (Initial Confluence Contributors),Custom field (Last public comment date),Custom field (Level of effort),Custom field (Machine Readable Info),Custom field (New-TLP-TLPName),Custom field (Priority),Custom field (Project),Custom field (Protected Branch),Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Review Date),Custom field (Reviewer),Custom field (Severity),Custom field (Severity),Custom field (Skill Level),Custom field (Source Control Link),Custom field (Space Description),Custom field (Space Key),Custom field (Space Name),Custom field (Tags),Custom field (Target Version/s),Custom field (Target Version/s),Custom field (Test and Documentation Plan),Custom field (Testcase included),Custom field (Tester),Custom field (Workaround),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Support a custom IV in guacamole-auth-json,GUACAMOLE-1286,13358190,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,bnzelic,bnzelic,11/Feb/21 16:10,12/Feb/21 17:07,17/Feb/21 11:13,,,,,,,guacamole-auth-json,,,,,,0,,,,,,"It would be nice to support a custom (not-null) IV in guacamole-auth-json

We have a cryptography expert at our company that took a look at the implementation here:

[https://github.com/apache/guacamole-client/blob/master/extensions/guacamole-auth-json/src/main/java/org/apache/guacamole/auth/json/CryptoService.java#L76]

according to him:
 * Having a null-IV coupled with the cipher that Guacamole is using (CBC) is far from ideal from security perspective, even with the signature in the payload it's possible to generate the same cipher-text thus it is bruteforce-able
 * He also thinks that it could be nice to use a standard like AEAD (https://en.wikipedia.org/wiki/Authenticated_encryption) in Guacamole instead of using a custom implementation.

We believe that allowing a null-IV could be problematic and allowing a configurable IV would be a great short-term solution.",,bnzelic,grintor,mjumper,RomainJufer,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-1218,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2021-02-11 18:42:44.025,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Feb 12 17:07:58 UTC 2021,,,,,,,"0|z0nlqo:",9223372036854775807,,,,,,,,,,,,,,,,,"11/Feb/21 18:42;mjumper;Sure - as long as we maintain backward compatibility with the previous behavior, I'm happy for things to move toward a standard.

Can you clarify regarding:

{quote}
... even with the signature in the payload it's possible to generate the same cipher-text thus it is bruteforce-able
{quote}

Is the concern there that _the server integrating Guacamole_ may happen to generate the same cipher-text? How would that lead to that text being bruteforce-able?","11/Feb/21 21:40;grintor;No, don't do this. [~bnzelic], your cryptography expert is confused. If this were simply AES-CBC encryption of a transmitted encrypted message, then yes, using a random IV would be more secure. But this is not that, it is implementation of CBC-MAC which not only encrypts the transmission, but also provides the mechanism to authenticate the sender. By using a random IV, the authentication part gets weaker ([source1|https://crypto.stackexchange.com/a/1076] | [source2|https://web.archive.org/web/20130206010157/http://www.securityfocus.com/archive/1/archive/1/427150/100/0/threaded#comments:~:text=attack%2C-,all%20uses%20of%20CBC%2DMAC%20should%20use%20a,part%20of%20the%20message,-The%20current%20nCore%20API%20CBC%2DMAC%20mechanisms%20do%20not%20encourage%20their%20use]). Using a zero IV is part of the CBC-MAC protocol itself ([source|https://en.wikipedia.org/wiki/CBC-MAC#mw-content-text:~:text=one%20encrypts%20m%20in%20CBC%20mode%20with%20zero%20initialization%20vector%20and%20keeps%20the%20last%20block]). There is also a comment about this in the source code, [right above the line you linked|https://github.com/apache/guacamole-client/blob/master/extensions/guacamole-auth-json/src/main/java/org/apache/guacamole/auth/json/CryptoService.java#L69-L75]","12/Feb/21 13:18;RomainJufer;Hello [~grintor], I work with [~bnzelic]. I entirely agree with your message above, in the case of CBC-MAC you must have a 0 IV. However, I might be mistaken, but you are not using CBC-MAC in your implementation. CBC-MAC is a way of generating a MAC from a block cipher, the MAC being the last block produced by the block cipher. You must not use it for encryption. According to the comment in the code, you already append a MAC generated by HMAC-SHA256 to the plaintext so there is no need to use CBC-MAC. I might be wrong in saying that you use CBC-MAC for encryption because I don't see the `encrypt` function, but from the implementation of the `decrypt` function it looks like you do, due to the fact that you pass an IV 0. Let me now if my explanation is unclear :)

 

Hello [~mjumper], this is more malleability than bruteforce-able. With a constant IV you could theoretically perform prefix attacks in the case where two plaintext share the same prefix. In addition, since it looks like the implementation use a MAC-then-Encrypt approach, you could eventually forge valid encryption. This is why Encrypt-Then-Mac is often preferred. Another threat could be that an attacker deduce that two plaintexts are the same since the encryption would be the same (no randomized IV). While this is not always a problem, it's often better to stick to the hypothesis made by the cipher implementation in order to avoid any problem. Don't know if that answer your question ?","12/Feb/21 15:11;grintor;Hello [~RomainJufer], I looked at it more closely, and you are correct, this is not implementing CBC-MAC. Furthermore, since the sender and the recipient would presumably be storing the IV as a pre-shared secret, and not transmitting it with each message, then it wouldn't matter anyway. But, I would point out a few things:
  

RE:

 
{noformat}
According to the comment in the code, you already append a MAC generated by HMAC-SHA256 to the plaintext{noformat}
 

Your concern about the prefix attack may be alleviated by knowing that the HMAC is not being appended to the message, but _prepended_. Which means that no two prefixes will be the same in cases where the rest of the message is not identical. Since the timestamp in the json has millisecond precision, then the probability of two messages being identical is already pretty low, but if you wanted to ensure that it was a practical impossibility, then you could set up your implementation so that a 128 bit (or greater) nonce is included with the message. Guacamole ignores fields in the json which it does not understand, so you can add a nonce in there without any risks.

 

RE:

 
{noformat}
Another threat could be that an attacker deduce that two plaintexts are the same since the encryption would be the same{noformat}
 

The proposal of a configurable IV would not solve this issue, to use an IV to solve that issue, you would need to use a random IV and transmit it with each message, because using the same static IV with each message is going to result in the same encrypted end-result when the messages are the same. So at this point we are talking about changing the protocol, but we already have a solution that serves the same purpose without changing the protocol (use a nonce in the json)

 

RE:

 
{noformat}
In addition, since it looks like the implementation use a MAC-then-Encrypt approach, you could eventually forge valid encryption. This is why Encrypt-Then-Mac is often preferred.{noformat}
 

I agree that Encrypt-Then-Mac is often preferred, but I don't know of, and can't find any, practical attacks against MAC-then-Encrypt. 256 Bit AES is often preferred to 192 bit AES, But that doesn't mean 192 bit AES is able to be broken.

 

I don't think that the solution here is to change the implementation, but to add an example to the documentation of using a nonce in the json, and encourage it's use.

 

 

 

 

 

 

 ","12/Feb/21 16:22;RomainJufer;Thanks for you reply [~grintor]. First you're right for the IV, I meant randomized IV, poor choice of words on my side, sorry. Indeed, based on known attacks, probability are very low that this could be exploited. However, we do have security proofs for these cryptographic schemes in the case where their hypotheses are met. On the other hand, we are only convince that they are secure in some cases because no one was able to break them until now. Personally, I would always prefer mathematical proofs when it is possible but as you said I don't think that this could be exploited. In addition, I presume that communications are happening over TLS which will probably preclude any attacks anyway :). We wanted to raise that issue just to be sure that it was not a mistake and to get your point of view so again thanks for your comments.","12/Feb/21 17:07;grintor;Thanks [~RomainJufer], I should point out that I am in no way affiliated with the Guacamole project, I am just a guy who petitioned for guacamole-auth-json to be relocated into the main project, and came across your ticket as a result. I am heavily involved with cryptography and security professionally though, and I just felt like jumping in when I saw this ticket. It's easy to accidently create vulnerabilities in cryptographic implementations, so I wanted to make sure no hasty changes were being made without a lot of thought. It's true that using a random IV would be better than what is in place now just because it would enforce unique messages at a protocol level, but I think that implementing a nonce on the json would be equivalent in terms of security. But [~mjumper] is the one actually with the Guacamole project, and I would love to hear his thoughts on the subject.",,,,,,,,,,,
Sort out JMXMP authentication,KARAF-6888,13335830,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,mattrpav,mattrpav,16/Oct/20 21:07,13/Jan/21 18:21,17/Feb/21 11:13,,4.2.9,,,,,karaf,,,,,,0,,,,,,"Out-of-the-box, karaf's jmxmp support doesn't seem to have a happy path. With the following changes, I'm able to get a list of JMX domains.

Notes:
1. Probably need to support SASL/PLAIN to keep it simple to start, then add TLS
2. JDK's don't ship with a SASL/PLAIN Provider anymore, so we need the attached one is adapted from Apache Hive's implementation
3. The jmxmp classes and sasl modules need to be added to karaf startup and etc/jre.properties
4. Need to solve for a ClassNotFound error for legacy com/sun/jdmk/security/sasl/AuthenticateCallback that is not included in the jmxmp jar in the JaasAuthenticator. 
5. -Consider using the javax.management jar instead (as src jars are available for debugging)-

{noformat}
<dependency>
  <groupId>javax.management</groupId>
  <artifactId>jmx-remote-optional-jmxmp</artifactId>
  <version>1.0-b06</version>
</dependency>
{noformat}",,githubbot,jbonofre,mattrpav,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Oct/20 21:51;mattrpav;ConnectorServerFactory.java;https://issues.apache.org/jira/secure/attachment/13013689/ConnectorServerFactory.java","16/Oct/20 21:52;mattrpav;JMXMPClient.java;https://issues.apache.org/jira/secure/attachment/13013692/JMXMPClient.java","16/Oct/20 21:51;mattrpav;JaasAuthenticator.java;https://issues.apache.org/jira/secure/attachment/13013690/JaasAuthenticator.java","16/Oct/20 21:51;mattrpav;PlainSaslServer.java;https://issues.apache.org/jira/secure/attachment/13013691/PlainSaslServer.java","16/Oct/20 21:55;mattrpav;jre.properties;https://issues.apache.org/jira/secure/attachment/13013695/jre.properties","16/Oct/20 21:55;mattrpav;karaf;https://issues.apache.org/jira/secure/attachment/13013694/karaf","16/Oct/20 21:52;mattrpav;org.apache.karaf.management.server-4.2.9.jar;https://issues.apache.org/jira/secure/attachment/13013693/org.apache.karaf.management.server-4.2.9.jar",,7.0,,,,,,,,,,,,,,,,,,,,2020-10-17 04:19:59.337,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Jan 13 18:20:16 UTC 2021,,,,,,,"0|z0jrps:",9223372036854775807,,,,,,,,,,,,,,,,,"16/Oct/20 21:56;mattrpav;Easy happy path testing:

1. Grab apache-karaf-4.2.9-unix.tar.gz
2. Replace these files: bin/karaf, etc/jre.properties, org.apache.karaf.management.server-4.2.9.jar
3. Start karaf ./bin/karaf debug
4. Run JMXMPClient.java test

Expected output:
{noformat}
Domain[0] = JMImplementation
Domain[1] = java.util.logging
Domain[2] = jdk.management.jfr
Domain[3] = java.lang
Domain[4] = com.sun.management
Domain[5] = connector
Domain[6] = osgi.compendium
Domain[7] = java.nio
Domain[8] = org.apache.karaf
Domain[9] = osgi.core
{noformat}","17/Oct/20 04:16;mattrpav;PR created: https://github.com/apache/karaf/pull/1232

# [x] Built and tested against master
# [x] Tested connect via JMXMP 
# [x] Test local jconsole using jmx:rmi (to confirm no regression)
# [x] management module unit tests pass ([INFO] Tests run: 56, Failures: 0, Errors: 0, Skipped: 0)
# [x] Tested JMXMP with karaf in docker and JMXMP outside of docker

Note:  Apologies ahead of time for the ugly refactor of JaasAuthenticator.. quick and dirty to get things working while juggling the Callback array. Probably could use a second set of eyes to simplify.","17/Oct/20 04:19;githubbot;mattrpav opened a new pull request #1232:
URL: https://github.com/apache/karaf/pull/1232


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","17/Oct/20 04:36;mattrpav;-If we want jvisualvm and jconsole to work, we may not be able to specify a profile.-

Note: jconsole and jvisualvm would need to be updated to support jmx.remote.profiles.

Output from karaf when jvisualvm attempts to connect (jmxmp jar added to jvisualvm cp)
{noformat}
04:35:55.896 WARN [Job_Executor3] Failed to open connection: java.io.IOException: java.io.IOException: The client does not require any profile but the server mandates one
java.io.IOException: java.io.IOException: The client does not require any profile but the server mandates one
	at com.sun.jmx.remote.opt.security.AdminClient.throwExceptionOnError(AdminClient.java:379) ~[opendmk_jmxremote_optional_jar-1.0-b01-ea.jar:?]
	at com.sun.jmx.remote.opt.security.AdminServer.connectionOpen(AdminServer.java:123) ~[opendmk_jmxremote_optional_jar-1.0-b01-ea.jar:?]
	at com.sun.jmx.remote.generic.ServerSynchroMessageConnectionImpl.connect(ServerSynchroMessageConnectionImpl.java:98) ~[opendmk_jmxremote_optional_jar-1.0-b01-ea.jar:?]
	at javax.management.remote.generic.GenericConnectorServer$ClientCreation.run(GenericConnectorServer.java:443) [opendmk_jmxremote_optional_jar-1.0-b01-ea.jar:?]
	at com.sun.jmx.remote.opt.util.ThreadService$ThreadServiceJob.run(ThreadService.java:248) [opendmk_jmxremote_optional_jar-1.0-b01-ea.jar:?]
	at com.sun.jmx.remote.opt.util.JobExecutor.run(JobExecutor.java:99) [opendmk_jmxremote_optional_jar-1.0-b01-ea.jar:?]
{noformat}","19/Oct/20 06:04;jbonofre;Just side node regarding javax.management:jmx-remote-optional-jmxmp artifact: it's just a pom on Maven Central, it doesn't provide the concrete jar, that's why I'm using glassfish one.","13/Jan/21 18:20;mattrpav;[~jbonofre] have you had a chance to look at this? I think the changes are pretty minor to get jmxmp operational. It would be great to get this in 4.2.11 and/or 4.3.1. Thanks!",,,,,,,,,,,
Consider migrating web application from AngularJS,GUACAMOLE-1085,13308088,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,homeuser,homeuser,28/May/20 16:38,07/Jan/21 02:38,17/Feb/21 11:13,,,,,,,guacamole,,,,,,0,,,,,,"[AngularJS is in an LTS period until June 30, 2021|https://blog.angular.io/stable-angularjs-and-long-term-support-7e077635ee9c]. Unless resurrected as a community-driven project, it will be cease being maintained after that date. Assuming no such project surfaces, we should look into migrate the web application to another framework.",,arjunblue,homeuser,james.muehlner,manolan,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-05-29 06:21:17.072,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Jan 07 02:33:22 UTC 2021,,,,,,,"0|z0f9zc:",9223372036854775807,,,,,,,,,,,,,,,,,"29/May/20 06:21;mjumper;{quote}
[AngularJS is in LTS support until June 30, 2021 and will be unsupported from then on|https://blog.angular.io/stable-angularjs-and-long-term-support-7e077635ee9c]. Apache Guacamole still uses AngularJS for its frontend and has to be migrated away after that point except somebody starts working on it again with maintainable fork.
{quote}

Indeed. It would be wonderful if someone does pick up AngularJS before than and begins such a community-driven fork.

{quote}
Does Guacamole intend to migrate to another framework (Vue.js, React, Angular) at some point?
{quote}

Short answer: yes. Unless it becomes clear that AngularJS will continue being maintained by the community, we will migrate to something else.

I'd still caution against looking at that date a hard deadline for all projects using AngularJS to jump ship. It certainly gets progressively worse after that date, but AngularJS will not instantly turn into poison on June 30, 2021.","29/May/20 11:46;vnick;It looks like Angular is the successor to AngularJS - I'm sure migrating is not a trivial exercise, and forgive my ignorance, but is there any reason that moving to Angular is not a natural path forward?

https://angular.io/guide/upgrade","17/Jun/20 11:59;manolan;I would love to see the project move to Angular! I much prefer the structure of Angular components and the use of Typescript is a benefit. I would hugely favour it over React or Vue, which don't provide the same scope at all. For example, we would need to select an Ajax library as well and agree a standard for dependency injection etc.

But I think it would be very difficult.

I have no experience in Angular meta-programming (by which I mean writing applications that modify themselves), so this is just guesswork, but I think it would be quite hard to provide the current flexibility. At the moment, extensions can easily extend the behaviour of the existing interface because they always have access to the enclosing scope. This is not true in Angular, where scope has to be passed explicitly as an input binding to child components. Of course, we could (probably) make it standard that components always pass their whole scope to all dynamic children (children from extensions), but that would be a bit cumbersome. And then there's the Typescript conversion, which means that things may not always be called exactly what they were called in the source code. Not a problem if you are transpiling the whole code-base together, but it might be an issue for extensions. We *could* write Angular in Javascript rather than Typescript, but that loses half the benefit!

Anyway, I would definitely support it and be happy to help, but I think it would be a large and complex undertaking.","04/Jan/21 20:59;james.muehlner;It looks like LTS support for AngularJS has been [extended to December 31st, 2020|https://docs.angularjs.org/misc/version-support-status], but in any case we are now within 1 year of the end of AngularJS.

I agree with [~manolan] that migrating to Angular would be a major undertaking, requiring at least a partial rewrite of the entire application. It does look like there are some tools provided to help upgrade AngularJS apps to Angular, so this is probably the easiest/smoothest path to upgrading.


As far as alternative frameworks, I have the most experience working with react, which I _believe_ is now eligible for use in ASF projects [after being re-licensed under MIT|https://engineering.fb.com/2017/09/22/web/relicensing-react-jest-flow-and-immutable-js/].

 

It looks like upgrading to either React or Angular would likely also require changing the way the build works. We many need to buy at least partially into the whole NPM/Babel/Webpack/Browserify ecosystem.

 

I have no experience with Vue.

 

I'd also be happy to work on migrating to whatever framework comes next. It looks like Angular is probably the leading candidate at the moment.","04/Jan/21 21:19;manolan;You can build Angular applications using a Maven plugin (e.g. frontend plugin), though I have no experience with that in practice. It would probably work for any npm/yarn compatible framework.","07/Jan/21 02:33;james.muehlner;Ah good, I stand corrected. My comments about needing to buy into Babel/Webpack/Browserify were mistaken (which is good!).

I'd say that it looks like using ngUpgrade to upgrade the webapp piece by piece, with both AngularJS and Angular components running in the same application at the same time is the way to go, if possible. This approach should allow dividing up the work of upgrading different parts of the app, and ensuring that all changes are properly tested and released in a timely manner, rather than trying to upgrade everything in one big push, flipping to the new code at the end. (This is the approach we used when originally migrating to AngularJS, and even with the much-smaller webapp at the time, it was a pain)",,,,,,,,,,,
Make usernames case insensitive in DB ,GUACAMOLE-1239,13346427,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,maglub,maglub,16/Dec/20 19:48,28/Dec/20 18:29,17/Feb/21 11:13,,,,,,,guacamole-auth-jdbc,guacamole-auth-jdbc-mysql,guacamole-auth-jdbc-postgresql,guacamole-auth-ldap,,,1,,,,,,"[~cameronp] already summarized this well in GUACAMOLE-404:

 

Quote:

""We have ldap auth working for us via active directory. We have issues with case senstivity around logins. For example most users have no idea if their username is
User.Name
or USER.NAME or whatever. - active directory doesnt care about case, and neither does ldap authentication.

But when they log in to guac and do not match the case of their login exactly, guac allows them to log in, but they just don't have any machines to connect to.

Wondering if it could be made to either fail the logins if it doesn't match correct case, or ignore case when matching the username in the local guac db.""

 

So, when I ran across GUACAMOLE-404, and this email [https://www.mail-archive.com/dev@guacamole.apache.org/msg03715.html] where [~vnick] discuss this topic in depth, I realized that I need to chip in my point of view. In the documentation it is mentioned that one can restrict user login, to avoid confusion that a user can log in per LDAP but not have any connections, http://guacamole.incubator.apache.org/doc/gug/jdbc-auth.html#jdbc-auth-restrict.

I am not sure where I would start lobbying for either asking for a default case insensitive username management, or the option to make the Postgresql/Mysql/etc usernames case insensitive. I would happily chip in time, money, or other stimulus to bring this discussion further.

 

This writeup from google is a text I have visited from time to time, as I think it is well written and makes many points in a clear manner.

[https://cloud.google.com/blog/products/gcp/12-best-practices-for-user-account]

 

Point 11: Make user IDs case insensitive

Quote:

""Your users don't care and may not even remember the exact case of their username. Usernames should be fully case-insensitive. It's trivial to store usernames and email addresses in all lowercase and transform any input to lowercase before comparing.

Smartphones represent an ever-increasing percentage of user devices. Most of them offer autocorrect and automatic capitalization of plain-text fields. Preventing this behavior at the UI level might not be desirable or completely effective, and your service should be robust enough to handle an email address or username that was unintentionally auto-capitalized.""

 

I had a very long discussion about this with a work colleague today. He has to support a group of customers, of which we get a list of CAPITALIZED usernames to import into our Active Directory domain controller. These users are quite used to work in an environment where they don't have to care. I have observed our customers log in and many users either log in with their username in lowercase, some log in with their username's first letter CAPITALIZED. Very rarely do they log in with all caps.

 

To make matters a bit worse, is that we integrate Guacamole with oauth2_proxy in front of it. Oauth2_proxy sends the users first to our KeyCloak installation, which happily authenticates the user with any permutation they choose to enter. Since we do want to have the users log into the RDP servers with their own credentials they are asked to log in again (a 2nd time, since we don't get the password through otherwise). It is very confusing for our users that they can log into KeyCloak but not into Guacamole.",,graimi,maglub,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-28 18:29:31.815,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Dec 28 18:29:31 UTC 2020,,,,,,,"0|z0ll0g:",9223372036854775807,,,,,,,,,,,,,,,,,"28/Dec/20 18:29;vnick;FWIW, I'm in favor of making this change, or at least of adding some sort of option that allows for enabling case-insensitivity within the authentication mechanism in Guacamole Client. Something like always converting usernames to lower-case, or doing case-insensitive string comparisons for usernames.",,,,,,,,,,,,,,,,
Add user story: karaf on k8s,KARAF-6952,13345073,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,09/Dec/20 12:47,15/Dec/20 17:43,17/Feb/21 11:13,,,,,,,karaf,,,,,,0,,,,,,"Even better with Karaf 4.3.0, we have all the pieces to show a great user story running Karaf on k8s (using configmap with configadmin thanks to env variables support, etc).

I would be great to add a ""user story"" section in the documentation to show step by step running Karaf on k8s.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-6921,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-12-09 12:47:36.0,,,,,,,"0|z0lco0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support stronger JAAS Encryption algorithms via spring-security-crypto,KARAF-6925,13342987,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,coheigea,coheigea,27/Nov/20 12:54,14/Dec/20 08:02,17/Feb/21 11:13,,,,,4.2.11,4.3.1,karaf,,,,,,0,encryption,,,,,"Right now for JAAS password encryption, we only support basic digest algorithms, or else salted algorithms via the jasypt provider. However these are no longer considered secure, instead best practice is to use algorithms like scrypt, bcrypt, argon2, etc.

The Spring Security Crypto project has password encoders for all of these algorithms, and has minimal dependencies, so we can leverage this to support a more modern encryption alternative.",,coheigea,githubbot,olli,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-11-27 13:00:09.076,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Dec 14 08:02:44 UTC 2020,,,,,,,"0|z0kzt4:",9223372036854775807,,,,,,,,,,,,,,,,,"27/Nov/20 13:00;githubbot;coheigea opened a new pull request #1259:
URL: https://github.com/apache/karaf/pull/1259


   Some points to note:
    * In jaas/spring-security-crypto/pom.xml it just depends on a servicemix bundle, I wasn't sure whether to just depend on the normal spring jar here.
    * The feature I added could be reworked to remove dependency on a set version of Spring.
    * scrypt, bcrypt, pbkdf2 work well. For argon2, it is performing multiple encryptions, not sure why this is yet.
    * Remaining work: Update the default jaas file comments to show how to use it, and update the documentation.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","27/Nov/20 13:03;githubbot;jbonofre commented on pull request #1259:
URL: https://github.com/apache/karaf/pull/1259#issuecomment-734825299


   I would use a different approach embedding spring-security as private to avoid feature dependency. Let me rework this PR.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","14/Dec/20 08:00;githubbot;jbonofre commented on pull request #1259:
URL: https://github.com/apache/karaf/pull/1259#issuecomment-744253804


   As said, I will rework this one to avoid Spring bundles dependency and prefer spring-security embedded. I will do that tomorrow. Thanks !


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","14/Dec/20 08:02;githubbot;coheigea commented on pull request #1259:
URL: https://github.com/apache/karaf/pull/1259#issuecomment-744254981


   Thanks @jbonofre, I was just making a trivial change to the logic.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
",,,,,,,,,,,,,
Verify goal should deal with requirement,KARAF-6872,13334592,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,09/Oct/20 08:22,09/Oct/20 08:22,17/Feb/21 11:13,,,,,,,karaf,,,,,,0,,,,,,"When possible, it's a good practice to have features linked together via capability/requirement. For instance, instead of defining inner feature {{http}} , it's better to use the http requirement. It allows users to choice between felix http or pax web for instance.

The problem is the {{verify}} goal which expects at least a feature providing the capability ""installed"" to verify the requirement.

It would be great to have a configuration to define a ""default requirement provider"" somehow for a feature.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-10-09 08:22:14.0,,,,,,,"0|z0jk2w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
features-maven-plugin should build a feature for the current artifact,KARAF-47,12424305,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jimbreen,jimbreen,30/Apr/09 14:55,09/Oct/20 04:12,17/Feb/21 11:13,,,,,,,karaf,,,,,,4,,,,,,The generate-features-xml goal of the features-maven-plugin currently generates a feature descriptor for each of the project's direct dependencies.  It would be very helpful if the plugin could create a feature descriptor for the current artifact.  ,,earcam,edwardost,jbonofre,jimbreen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2015-12-18 15:56:58.339,,,false,,,,,,,,,,,,,,,,,,146497,,,Fri Dec 18 15:56:58 UTC 2015,,,,,,,"0|i1ci73:",281079,,,,,,,,,,,,,,,,,"18/Dec/15 15:56;jbonofre;karaf-boot will provide this.",,,,,,,,,,,,,,,,
Support for M2E workspace resolution via reference: protocol,KARAF-1333,12549853,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,tuomas_kiviaho,tuomas_kiviaho,06/Apr/12 08:31,09/Oct/20 04:11,17/Feb/21 11:13,,3.0.0,,,,,karaf,,,,,,0,m2e,reference,workspace,,,"Eclipse M2E plugin provides a 'workspace resolution' mode where Maven projects in Eclipse workspace are provided as workspace repository which takes precedence over other repositories.

This leads to situation where artifact file isn't necessarily yet - depending on Mavens current lifecycle phase - provided as .jar but instead as directory pointing to project's output directory.

{code:xml}
<features xmlns=""http://karaf.apache.org/xmlns/features/v1.0.0"" name=""example"">
    <feature name=""example"" description=""example"">
        <bundle>mvn:com/example/dependency/1.0.0</bundle>
        ...
        <bundle>mvn:com/example/project/0.0.1-SNAPSHOT</bundle>
        ...
    </feature>
</features>
{code}

The patches provided in this issue not only takes care of treating directories as exploded  .jar files (common approach) but also provisions them with reference: protocol that most of the OSGi frameworks understand as direct filesystem references thus allowing exploded .jars to be installed.

{code:xml}
<features xmlns=""http://karaf.apache.org/xmlns/features/v1.0.0"" name=""example"">
    <feature name=""example"" description=""example"">
        <bundle>mvn:com/example/dependency/1.0.0</bundle>
        ...
        <bundle>reference:file:/~/workspace/example-project/classes/</bundle>
        ...
    </feature>
</features>
{code}

Without intermediate round-trip via OSGi framework's bundle cache the 'workspace resolution' mode now offers also hot code replacement.",,jbonofre,rubytuesdaydono,tuomas_kiviaho,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/12 08:35;tuomas_kiviaho;FeaturesServiceImpl.patch;https://issues.apache.org/jira/secure/attachment/12521660/FeaturesServiceImpl.patch","06/Apr/12 08:35;tuomas_kiviaho;maven-plugin.patch;https://issues.apache.org/jira/secure/attachment/12521661/maven-plugin.patch",,,,,,,2.0,,,,,,,,,,,,,,,,,,,,2014-07-10 06:00:10.846,,,false,,,,,,,,,,,,,,,,,,234844,,,Thu Jul 10 06:00:10 UTC 2014,,,,,,,"0|i1cj7j:",281243,,,,,,,,,,,,,,,,,"06/Apr/12 08:35;tuomas_kiviaho;patches contain improvements for both generate and validate goals in backwards compatible manner without new parameters","30/May/12 08:15;tuomas_kiviaho;I noticed that the codebase has had some grooming but the patches still apply with trivial adjustments.","30/May/12 08:44;tuomas_kiviaho;http://team.ops4j.org/browse/PAXURL-144 would provide an alternative approach to deal with the issue provided that Pax URL Reference hander is changed so that it will throw exception at getInputstream instead of postponing it to read() method as it currently does. This way features service could remain totally URL agnostic so that installBundle will only be provided a stream to use when it can be achieved.

URL carrying multiple alternative locations (perhaps using Content-Location header http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.14) would require some sort preference/fallback queue for protocols so that correct url is chosen.","10/Jul/14 06:00;jbonofre;I will first fix PAXURL-144 and update in Karaf, before dealing with this one.",,,,,,,,,,,,,
Be able to disable the default PropertiesLoginModule,KARAF-1385,12551738,Improvement,Reopened,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,20/Apr/12 08:00,09/Oct/20 04:11,17/Feb/21 11:13,,,,,,,karaf,,,,,,0,,,,,,"Currently, the default PropertiesLoginModule is configured in the jaas.modules bundle (in the blueprint descriptor).

It means that an user can't disable this login module easily.

I propose to ""isolate"" the default PropertiesLoginModule configuration in a dedicated bundle in order to be able to uninstall it easily if needed (and replaced by another ""config"" bundle).",,andrei.pozolotin,cschneider,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-07-13 14:13:16.936,,,false,,,,,,,,,,,,,,,,,,236545,,,Mon Jan 14 11:10:54 UTC 2013,,,,,,,"0|i06b9z:",34760,,,,,,,,,,,,,,,,,"13/Jul/12 14:13;cschneider;Found an issue with this change. The ssh single sign on with public key auth does not work anymore. Reverting the change made it work again. ","23/Jul/12 10:33;cschneider;Moving to 3.1.0 as we are nearing the Karaf 3 release","17/Sep/12 15:40;cschneider;[~jbonofre]
Not sure how to proceed with this. Do you have any idea what the problem is?","14/Jan/13 11:10;cschneider;Unassigning as I do not know how to proceeed ",,,,,,,,,,,,,
Extend features:install command to support given a repository name as input,KARAF-2059,12623901,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,xldai,xldai,14/Dec/12 07:40,09/Oct/20 04:10,17/Feb/21 11:13,,2.2.9,,,,,karaf,,,,,,0,,,,,,"In case of there is a feature name which exists in two or many feature repo xmls, and all those feature repo xmls have been installed into Karaf (by features:addurl cmd), then the result of features:install of this feature will be unpredictable.

maybe make improvement to features:install command, let it supports a given features repo name as input.

for example:
    features:install features_a/myfeature/1.0",,jbonofre,xldai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-12-17 06:52:42.466,,,false,,,,,,,,,,,,,,,,,,297800,,,Mon Dec 17 06:52:42 UTC 2012,,,,,,,"0|i14v9r:",236531,,,,,,,,,,,,,,,,,"14/Dec/12 07:44;xldai;more discussion please refer http://mail-archives.apache.org/mod_mbox/karaf-user/201210.mbox/%3CCAK--DP_4P=FmwYBhnxsZ--GRvdvo4DXVYykeFbcwAcf+Etdw+Q@mail.gmail.com%3E","17/Dec/12 06:52;jbonofre;Same change required in the MBeans.",,,,,,,,,,,,,,,
Create a configuration file per cluster group,KARAF-2170,12631402,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,08/Feb/13 08:38,09/Oct/20 04:09,17/Feb/21 11:13,,,,,,,cellar,,,,,,0,,,,,,"Currently, the etc/org.apache.karaf.cellar.groups.cfg gathers configuration for all groups (features, bundles, blacklist, whitelist, ...).
When you use a large number of cluster groups, this file is not easy to read and maintain.
I will create a configuration file dedicated per cluster group, like for instance etc/org.apache.karaf.cellar.groups.default.cfg and etc/org.apache.karaf.cellar.groups.mygroup.cfg.",,achim_nierbeck,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2013-02-08 08:41:38.716,,,false,,,,,,,,,,,,,,,,,,311898,,,Fri Feb 08 08:53:50 UTC 2013,,,,,,,"0|i1htqf:",312244,,,,,,,,,,,,,,,,,"08/Feb/13 08:41;achim_nierbeck;will this behave like a managed service factory? ","08/Feb/13 08:53;jbonofre;Yes, exactly.",,,,,,,,,,,,,,,
Be able to define multiple keys per user in etc/keys.properties,KARAF-2836,12702623,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,20/Mar/14 12:34,09/Oct/20 04:04,17/Feb/21 11:13,,,,,,,karaf,,,,,,0,,,,,,"Currently, if we define multiple keys in etc/keys.properties like this:

{code}
karaf=key,admin
karaf=other,admin
{code}

only the latest one is used/loaded (for instance other here).

It would be great to be able to load multiple keys for one given user.",,jbonofre,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,380962,,,2014-03-20 12:34:52.0,,,,,,,"0|i1tmyv:",381241,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend SystemMBean with additional details,KARAF-2965,12712257,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,lhein,lhein,05/May/14 08:07,09/Oct/20 04:03,17/Feb/21 11:13,,,,,,,karaf,,,,,,0,,,,,,"Currently its not easy to determine from outside if a Karaf is fully up and running. That would require to check several things like checking the feature service if its done installing features etc.

I suggest to provide an mbean for the server state like [STARTING | STARTED | STOPPING] and only set it to STARTED if its fully up. Other useful information can be added later.

",,jbonofre,lhein,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2014-05-05 15:05:03.669,,,false,,,,,,,,,,,,,,,,,,390573,,,Mon May 05 15:05:03 UTC 2014,,,,,,,"0|i1v9xr:",390826,,,,,,,,,,,,,,,,,"05/May/14 15:05;jbonofre;It's a great idea. I think we have already some stuff in the SystemMBean. We can extend it.",,,,,,,,,,,,,,,,
provide mbean operations to upload an artifact to the server and deploy it,KARAF-2987,12715134,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,lhein,lhein,19/May/14 09:56,09/Oct/20 04:03,17/Feb/21 11:13,,,,,,,karaf,,,,,,0,,,,,,"When the karaf server is running on a remote machine and you want to deploy an artifact to it you somehow need access to the remote machine or you have to somehow share some location used as artifact repository. 
A good improvement would be to allow deployments also via JMX operations. The artifact could be uploaded to the server and then deployed. That would need to be done for all possible kinds of deployment formats like bundle, kar, feature file, etc.
",,jbonofre,lhein,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2014-05-19 10:51:49.221,,,false,,,,,,,,,,,,,,,,,,393420,,,Mon May 19 11:33:12 UTC 2014,,,,,,,"0|i1vqv3:",393582,,,,,,,,,,,,,,,,,"19/May/14 10:51;jbonofre;FYI, the Karaf ssh server supports scp allowing to copy an artifact on a target folder (deploy or system repository).","19/May/14 11:33;gnodet;The problem with scp is that it does not allow deletion of files.
It's also not very friendly with JMX based management tools ;-)
But that's right, it's a possibility, especially for existing karaf versions.",,,,,,,,,,,,,,,
Document prod/dev mode of etc/org.ops4j.pax.url.mvn.cfg file,KARAF-3324,12749026,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,18/Oct/14 05:23,09/Oct/20 03:56,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,http://karaf.922171.n3.nabble.com/Best-practice-question-development-cycle-for-a-bundle-td4036017.html,,jbonofre,jeanphiphi,opajonk,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-3334,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-10-18 05:23:08.0,,,,,,,"0|i21bhz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change Karaf to (from) dev mode,KARAF-3334,12750344,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jeanphiphi,jeanphiphi,24/Oct/14 13:18,09/Oct/20 03:56,17/Feb/21 11:14,,3.0.2,,,,,,,,,,,1,,,,,,"Karaf assembly plugin creates a configuration which first looks for artifacts from its internal repository.
A side effect is that assembled bundles would not be updated from user Maven repositories. This is ennoying in dev phase where updating bundles is a daily job :)
Two solutions can be done. Either change the configuration (3 lines must be modified), or remove bundles from the system sub-directory. At present time we are using the second solution as it is more simple.

We would suggest to add a Karaf command line to go to dev mode without manually affect the configuration.

PS: A simple flag inside configuration could also be welcome",,jeanphiphi,sebas10000,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-3324,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-10-24 13:18:17.0,,,,,,,"0|i21jkn:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support name/version in feature condition,KARAF-3454,12768716,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,20/Jan/15 17:14,09/Oct/20 03:55,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently, it's possible to define a feature condition like:

{code}
<conditional>
  <condition>spring</condition>
  <bundle>...</bundle>
</conditional>
{code}

It's only based on the feature name.

In addition, it would be great to support feature version, and feature version range, like:


{code}
<conditional>
  <condition>spring/[3,4)</condition>
  <bundle>...</bundle>
</conditional>
{code}",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Jan 21 20:57:22 UTC 2015,,,,,,,"0|i24khz:",9223372036854775807,,,,,,,,,,,,,,,,,"21/Jan/15 20:57;jbonofre;This syntax:

{code}
<condition>spring/[3,4)</condition>
{code}

* doesn't work at all with Karaf 2.4.x (we have an exception)
* works badly with Karaf 3.0.x: it installs the content of the condition whatever the condition is. For instance, with the spring feature version range, it installs the condition content even if no spring features are installed !
* syntax is accepted with Karaf 4.0.x, but the condition is never matched",,,,,,,,,,,,,,,,
Be able to remotely access to the JNDI InitialContextFactory,KARAF-3726,12829712,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,13/May/15 22:45,09/Oct/20 03:52,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Right now, the ""only"" way to use the Karaf InitialContextFactory is in a ""local"" bundle (using new InitialContextFactory()).
It would be interesting to be able to remotely access to the InitialContextFactory (as we do in an JEE application server). I'm not sure if it should be directly in the Karaf JNDI service or in the Cellar JNDI wrapper.",,jbonofre,tturek,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-05-13 22:45:55.0,,,,,,,"0|i2epf3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extends FeatureMBean with new operations,KARAF-3820,12842010,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,01/Jul/15 14:28,09/Oct/20 03:52,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"We added new commands about features: feature:start, feature:stop, feature:list-requirements, etc.

However, the FeatureMBean doesn't reflect those commands as it doesn't provide the corresponding operations.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-07-01 14:28:53.0,,,,,,,"0|i2gqon:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document resourceRepositories property in etc/org.apache.karaf.features.cfg,KARAF-3828,12842305,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,02/Jul/15 12:35,09/Oct/20 03:51,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The new features resolver is able to use different resource repositories to deal with resources capabilities. Especially, it can use a Cave repository (using the Cave repository generated repository.xml).

To add new resource repositories, we have to modify the resourceRepositories property in etc/org.apache.karaf.features.cfg.

However, this property is not documented, and doesn't appear at least in a comment in the cfg file.

I will document this and add comment in etc/org.apache.karaf.features.cfg.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-07-02 12:35:25.0,,,,,,,"0|i2gsgn:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add feature:* commands (and MBean operations) to manipulate resource repositories,KARAF-3829,12842306,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,02/Jul/15 12:38,09/Oct/20 03:51,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Karaf features resolver is now able to use different resource repositories. A resource repositories is basically a artifact repository providing all the associated metadata (requirements & capabilities).

Right now, the only way to manipulate the resource repositories is by editing the resourceRepositories property in etc/org.apache.karaf.features.cfg.

It would be great to provide specific commands:
- to list the resource repositories, add, remove a resource repositories
- to list the resources (with requirements and capabilities)
- in feature:install/feature:start mention the repository providing the resource",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-07-02 12:38:26.0,,,,,,,"0|i2gsgv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Be able to define the LB policy on DOSGi,KARAF-3980,12862402,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,08/Sep/15 12:35,09/Oct/20 03:51,17/Feb/21 11:14,,,,,,,cellar,,,,,,0,,,,,,,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-09-08 12:35:14.0,,,,,,,"0|i2jvxr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a flag to automatically start child instances with the root instance,KARAF-4013,12896111,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,24/Sep/15 13:34,09/Oct/20 03:50,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Especially when the Karaf root instance is started as a service (with the wrapper), only the root instance starts, not the child instances.

It would be great to add a flag to automatically start (if needed) the child instances with the root instance (in the InstanceService).",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Oct 09 03:50:14 UTC 2020,,,,,,,"0|i2lik7:",9223372036854775807,,,,,,,,,,,,,,,,,"09/Oct/20 03:50;jbonofre;We have another Jira related to that (duplicate).",,,,,,,,,,,,,,,,
Document usage of jaas FileAuditLoginModule and EventadminAuditLoginModule,KARAF-4407,12948060,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,08/Mar/16 16:15,09/Oct/20 03:46,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"AuditLoginModules provide a convenient way to do user actions auditing (who/what/when).

Unfortunately, it's not documented like the other login modules, and we don't provide examples.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-03-08 16:15:00.0,,,,,,,"0|i2uccn:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend JAAS auditing with eventadmin,KARAF-4436,12952803,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,23/Mar/16 12:49,09/Oct/20 03:46,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Right now, we have the Audit JAAS LoginModules (File and EventAdmin) auditing when an user login/logout.

Unfortunately, in the case of the File, we just have something like:

{code}
03/23/2016 13:17:43 - Authentication attempt - karaf
03/23/2016 13:17:43 - Authentication failed - karaf
03/23/2016 13:17:48 - Authentication attempt - karaf
03/23/2016 13:17:48 - Authentication succeeded - karaf
03/23/2016 13:41:14 - Authentication attempt - karaf
03/23/2016 13:41:14 - Authentication failed - karaf
03/23/2016 13:41:15 - Authentication attempt - karaf
03/23/2016 13:41:15 - Authentication succeeded - karaf
{code}

In the audit ""log"", it would be great to ""trap"" the event provided by shell and JMX eventadmin. We would provide a real and complete auditing file.",,jbonofre,shiggs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-04-02 15:27:20.217,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Apr 02 15:33:56 UTC 2019,,,,,,,"0|i2v37b:",9223372036854775807,,,,,,,,,,,,,,,,,"02/Apr/19 15:27;shiggs;[~jbonofre], did you already start work on this one?","02/Apr/19 15:31;jbonofre;[~shiggs] yup I started. Do you wanna take a look ?","02/Apr/19 15:33;shiggs;[~jbonofre] willing to collaborate on this one if that would be helpful, else I will look elsewhere.

--Stephen",,,,,,,,,,,,,,
Add an option to feature:list to list features provided by a given repository,KARAF-4542,12973952,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,30/May/16 11:56,09/Oct/20 03:46,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"When we use {{feature:repo-add}}, it would be great to be able to list all features provided only by this repository (using the repository name or URL).
It would be great to provide an option to {{feature:list}} (like {{-r}}) to list only the features provided by a repository.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-05-30 11:56:02.0,,,,,,,"0|i2yoxj:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support session replication through OSGi 6 http whiteboard,KARAF-4685,13001584,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,roland.hauser@bechtle.ch,roland.hauser@bechtle.ch,31/Aug/16 08:21,09/Oct/20 03:45,17/Feb/21 11:14,,,,,,,cellar,,,,,,0,,,,,,"Currently, session replication can only be done through specifying the Hazelcast filter/listener in the web.xml file of a web-application. This can be a serious disadvantage if you also want to install a web-application to another web-container which does not need clustering, and, consequently, does not contain the Hazelcast libs. In this case, the application won't start.

I suggest an additional way how session replication could be realized without the need of modifying the web-app: it could be done through a Cellar component which implements a http whiteboard. I would realize this as follows:
- Register a Filter/Session listener to the OSGi service registry. Per default, every web-application installed is considered for session replication.
- It should be possible to configure Hazelcast filter properties either through a config file inside the OSGI-INF folder of the web-app, or, through the ConfigAdmin service.
- If the sessions of a specific web-application should not be replicated, then this could be flagged either through a config file inside the OSGI-INF folder of the web-app, or, through the ConfigAdmin service.
- The new Cellar component should be installable as additional feature ""http-failover""

What's your opinion?",,achim_nierbeck,jbonofre,roland.hauser@bechtle.ch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-08-31 12:17:34.336,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed May 10 13:30:13 UTC 2017,,,,,,,"0|i331yf:",9223372036854775807,,,,,,,,,,,,,,,,,"31/Aug/16 12:17;jbonofre;It sounds like a good idea, but the point is: how do you ""inject"" the listener in the web-app ? Just a service is not enough AFAIR.","02/Sep/16 07:58;roland.hauser@bechtle.ch;This should work exactly that way, see OSGi enterprise spec 6.0.0, 140.5 Registering service filters and 140.7 Registering Listeners. The only thing is that a listener must be registered with property osgi.http.whiteboard.listener=true otherwise it will be ignored by the http whiteboard.","02/Sep/16 08:01;achim_nierbeck;This will require Pax-Web 6.0 as it's the version handling OSGi R6 Http-Whiteboard service. 
So this will only be possible on a Karaf 4.1 not lower. ","02/Sep/16 08:11;jbonofre;It's hard to relay on OSGi Enterpsie Spec 6.0.0 in Cellar 4.0.x, or it means such feature will work only with only specific Karaf version.

What I can do is to prepare Cellar 4.1.0 (working with Karaf 4.1.x), and implement such feature for this version serie.","02/Sep/16 08:15;achim_nierbeck;Well the proposed flags are only available from that feature on ... (or better understood with that version)
BUT ... we have a similar thing already available with the current version of Pax-Web :-) ","02/Sep/16 08:16;roland.hauser@bechtle.ch;I'm already working on an implementation. It would be great, if I could use that new Cellar branch ;-)","10/May/17 13:30;jbonofre;I updated master for Cellar 4.1.x (Cellar 4.0.x is now on a dedicated branch). We can play on a feature branch/PR about that.",,,,,,,,,,
Improve JMX MBeans and attributes filtering,KARAF-4776,13012810,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,17/Oct/16 10:07,09/Oct/20 03:45,17/Feb/21 11:14,,,,,,,decanter,,,,,,1,,,,,,"The Decanter JMX collector is now able to filter (exclude) MBeans to collect.

It would be better to improve the way to include/exclude MBeans and attributes, including regex support.

I'm thinking about something like:

{code}
include=MBean_ObjectName1,MBean_ObjectName2:attribute,attribute,
exclude=MBean_ObjectName1,MBean_ObjectName2:attribute,attribute
{code}",,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-10-17 10:07:20.0,,,,,,,"0|i34z13:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Be able to use Unix /etc/passwd directly in the PropertiesLoginModule,KARAF-4939,13034565,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,13/Jan/17 09:53,09/Oct/20 03:40,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,It would be great to  be able to directly use an Unix {{/etc/passwd}} in the {{PropertiesLoginModule}} to authenticate Karaf users.,,fpapon,jamalf,jbonofre,mattrpav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-06-28 22:14:31.859,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Jun 28 22:14:31 UTC 2018,,,,,,,"0|i38nfr:",9223372036854775807,,,,,,,,,,,,,,,,,"28/Jun/18 22:14;mattrpav;[~jbonofre] do you mean to delegate to PAM ? Most systems use /etc/passwd + /etc/shadow and a non-root running karaf instance would not have access to the /etc/shadow file.",,,,,,,,,,,,,,,,
Provide features list on website,KARAF-4952,13036544,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,20/Jan/17 12:49,09/Oct/20 03:39,17/Feb/21 11:14,,,,,,,website,,,,,,0,,,,,,"Even if the features repositories are already listed in {{etc/org.apache.karaf.features.repos.cfg}}, it could be interesting to provide the list on the website or user guide.",,cschneider,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-02-06 12:18:40.678,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri May 11 04:01:27 UTC 2018,,,,,,,"0|i38zmv:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Jan/17 09:13;jbonofre;Due to the change on Karaf 4.1.0 (features moved into legacy feature repo), it's even more important to document and list the features repos.","28/Jan/17 13:37;jbonofre;This Jira is not really related to a Karaf release but website. However, I will do it asap.","06/Feb/17 11:21;jbonofre;I will do that for 4.1.1","06/Feb/17 12:18;cschneider;Aren't you on vacation?","11/May/18 04:01;fpapon;Hi, can I take this issue ?",,,,,,,,,,,,
Support override tag in feature <config/> element,KARAF-5088,13062781,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,10/Apr/17 05:24,09/Oct/20 03:38,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"As we have for {{<configfile/>}}, it would make sense to support override for {{<config/>}} element in features.",,jbonofre,yogu13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-04-14 18:23:52.084,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Apr 14 18:23:52 UTC 2017,,,,,,,"0|i3dezr:",9223372036854775807,,,,,,,,,,,,,,,,,"14/Apr/17 18:23;yogu13;considering  override=""true"" needs to be added, config element also supports append=""true"". Just wondering using append=""true"" and override=""true"" together would make any sense.

<config name=""com.foo.bar"" append=""true"" override=""true"">
  myProperty = myValue
</config>

With above as an example would it mean if myProperty is found it would get overwritten with value as ""myValue"" and if the property is not found then gets appended to the config file.",,,,,,,,,,,,,,,,
A node should be part of only one cluster group (avoid intersect),KARAF-5140,13074193,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,23/May/17 12:59,09/Oct/20 03:37,17/Feb/21 11:14,,,,,,,cellar,,,,,,0,,,,,,"In order to have better predictable behavior, a node should be part of only one unique cluster group.",,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-05-23 12:59:59.0,,,,,,,"0|i3fcq7:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add feature/kar/bundle action report, feature:tree-show & bundle:status/feature:status",KARAF-5193,13078611,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,09/Jun/17 13:33,09/Oct/20 03:37,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Now, when performing {{feature:install}} for instance, we have a lot of details in the log (bundles installed, refreshed, etc), but not a more ""human"" reab-able report. Something like:

{code}
Report:
----------
  Bundles Installed: ...
  Bundles Refreshed: ...
  Features Installed: ...
  Features Updated: ...
{code}

Further more, as we have {{bundle:tree-show}}, it would be interesting to have a {{feature:tree-show}} showing the dependencies between features (inner features).

Finally, to quickly get the status of a feature or a bundle (installed, active, started, ...), {{feature:status}} and {{bundle:status}} commands would be very convenient (including in scripting).",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-5208,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-06-09 13:33:38.0,,,,,,,"0|i3g37j:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add feature status to feature:version-list command,KARAF-5194,13078614,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,09/Jun/17 13:50,09/Oct/20 03:37,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The {{feature:version-list}} is very helpful to provide the list of all versions available for a given feature, however, it doesn't give the information if a version is already installed or not.
It would be convenient to update the display table with the current status of each version.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-06-09 13:50:06.0,,,,,,,"0|i3g387:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add additional information in the Audit login modules,KARAF-5195,13078618,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,09/Jun/17 13:58,09/Oct/20 03:37,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The audit login module is convenient to track all login performed by the user.

However, it systematically displays an authentication failure (with the key logic module fails):

{code}
2017-06-09 15:54:48,168 | INFO  | d]-nio2-thread-2 | LogAuditLoginModule              | 35 - org.apache.karaf.jaas.modules - 4.0.10.SNAPSHOT | Authentication attempt - karaf
2017-06-09 15:54:48,169 | INFO  | d]-nio2-thread-2 | LogAuditLoginModule              | 35 - org.apache.karaf.jaas.modules - 4.0.10.SNAPSHOT | Authentication failed - karaf
2017-06-09 15:54:52,793 | INFO  | d]-nio2-thread-3 | LogAuditLoginModule              | 35 - org.apache.karaf.jaas.modules - 4.0.10.SNAPSHOT | Authentication attempt - karaf
2017-06-09 15:54:52,795 | INFO  | d]-nio2-thread-3 | LogAuditLoginModule              | 35 - org.apache.karaf.jaas.modules - 4.0.10.SNAPSHOT | Authentication succeeded - karaf
{code}

It would be great to add in the audit log the ""original"" login module which throws the error.

More than that, it would be interesting to have details in the audit log (like the subject/action performed).",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-06-09 13:58:55.0,,,,,,,"0|i3g393:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
karaf:run should resolve maven dependencies,KARAF-5507,13121100,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,janesser,janesser,27/Nov/17 21:37,08/Oct/20 14:34,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"h2. Situation
karaf-maven-plugin has learned to support featuresToInstall from KARAF-5104.

h2. Complication
A bundle described by features.xml is not yet supported.
{code:xml}
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>
<features xmlns=""http://karaf.apache.org/xmlns/features/v1.4.0"" name=""servicemix-primer"">
    <feature name=""servicemix-primer"" description=""servicemix-primer"" version=""0.0.1.SNAPSHOT"">
        <feature prerequisite=""true"" dependency=""false"">wrap</feature>
        <bundle>wrap:mvn:org.apache.poi/poi-ooxml/3.17</bundle>
        <bundle>wrap:mvn:org.apache.poi/poi/3.17</bundle>
        <bundle>mvn:commons-codec/commons-codec/1.10</bundle>
        <bundle>mvn:org.apache.commons/commons-collections4/4.1</bundle>
        <bundle>wrap:mvn:org.apache.poi/poi-ooxml-schemas/3.17</bundle>
        <bundle>wrap:mvn:org.apache.xmlbeans/xmlbeans/2.6.0</bundle>
        <bundle>wrap:mvn:stax/stax-api/1.0.1</bundle>
        <bundle>wrap:mvn:com.github.virtuald/curvesapi/1.04</bundle>
    </feature>
</features>
{code}

h2. Solution
Resolve these dependencies and trigger installation.",,janesser,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-11-27 21:37:06.0,,,,,,,"0|i3n8xr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create new WebConsole plugins,KARAF-5638,13140396,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,23/Feb/18 03:57,08/Oct/20 14:32,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"It would be great to add new plugins in the Karaf WebConsole like scheduler, etc.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-02-23 03:57:50.0,,,,,,,"0|i3qi7b:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactoring of Cellar internals: use level triggering instead of edge triggering,KARAF-5969,13189699,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,05/Oct/18 12:17,08/Oct/20 14:23,17/Feb/21 11:14,,,,,,,cellar,,,,,,1,,,,,,"Generally speaking, the Cellar internals and logic are way too much complex.
The main drawbacks are:
1. The cluster events (via the Hazelcast topic) contains all update data
2. The distributed maps are not really used (just to get the state)
3. Lot of Cellar components are useless from an user perspective (producers, handlers, ...)

Instead, it would make more sense:
1. To store all in distributed maps
2. To have kind of distributed map listeners on node to ""react"" when a change is performed (instead of using the topic)
3. Remove the command/topic usage

I will start a PoC around that.",,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-1125,KARAF-2170,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Jan 23 10:21:00 UTC 2020,,,,,,,"0|i3yvlj:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Jan/20 10:21;jbonofre;Basically, today, each Cellar node uses edge triggering: it pushed event to the other nodes.

It would be more efficient to use level triggering, where each node listens/subscribe to each other to update itself.",,,,,,,,,,,,,,,,
Support role based access to web console,KARAF-4889,13027003,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,paulmcculloch,paulmcculloch,09/Dec/16 13:57,08/Oct/20 14:16,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently a user must be in the admin role to access the web console. Once connected they have total control over the karaf instance.

See https://github.com/hawtio/hawtio/issues/465 for an equivalent kind of feature.

It should be possible to grant limited permissions to a user so that they can, for example:
* Read logs
* View (some of?) the configuration
* Edit (some of?) the configuration
But not:
* Stop a bundle
* Modify all the configuration
 In the same way that the shell offers fine grained control.",,jbonofre,paulmcculloch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-12-09 14:50:29.231,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Dec 09 15:09:23 UTC 2016,,,,,,,"0|i37el3:",9223372036854775807,,,,,,,,,,,,,,,,,"09/Dec/16 14:50;gnodet;Can we use a servlet filter for that ?","09/Dec/16 15:09;jbonofre;I think so, it's what we use most of the time with the ActiveMQ admin console.",,,,,,,,,,,,,,,
Simplify the way of creating custom distribution,KARAF-5923,13186944,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,24/Sep/18 08:09,08/Oct/20 14:14,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"As discussed on the mailing list:

https://lists.apache.org/thread.html/a7107ccb52bb662aa9395f18c69ad6cc4a3613d3778f81a8b83b84e8@%3Cdev.karaf.apache.org%3E",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun May 17 05:01:46 UTC 2020,,,,,,,"0|i3yenz:",9223372036854775807,,,,,,,,,,,,,,,,,"17/May/20 05:01;jbonofre;This one is covered by the effort I'm doing on Karaf DevX.",,,,,,,,,,,,,,,,
"Add a GraphQL, React, Angular7 example",KARAF-5970,13189875,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,06/Oct/18 09:50,08/Oct/20 14:13,17/Feb/21 11:14,,,,,,,karaf,,,,,,1,example,,,,,,,csloud,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-10-06 09:50:59.0,,,,,,,"0|i3ywon:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for exclusions based on both groupId/artifactId ,KARAF-5986,13193556,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,nite,nite,23/Oct/18 12:09,08/Oct/20 14:13,17/Feb/21 11:14,,4.2.1,,,,,karaf,,,,,,0,,,,,,"Current mechanism for specifying artifact exclusion based on purely on artifactId is not sufficient to properly specify exclusions when artifact naming relies on groupId, too.

One example is javax.activation:activation – here specifying to exclude ""activation"" may end up excluding other artifacts. This is needed to generate minimal features with JDK9+ and karaf: since jaxb and its dependencies are part of the boot class path, they should not end up being included in generated features.

Add a more flexible scheme, which would handle groupIds, too, perhaps with the same syntax as maven-shade-plugin does here: https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#artifactSet",,jbonofre,nite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-10-24 04:18:27.701,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Dec 16 19:00:16 UTC 2018,,,,,,,"0|i3zj8v:",9223372036854775807,,,,,,,,,,,,,,,,,"24/Oct/18 04:18;jbonofre;It sounds like a good idea to me. +1","06/Dec/18 10:05;jbonofre;Hi [~nite]. Where exactly do you want this ""new"" exclusion mechanism ?","16/Dec/18 19:00;nite;Hello [~jbonofre], I was thinking making it a superset of [https://github.com/apache/karaf/blob/master/tooling/karaf-maven-plugin/src/main/java/org/apache/karaf/tooling/features/GenerateDescriptorMojo.java#L133]",,,,,,,,,,,,,,
Add an option to shutdown Karaf if a boot features fails or repositories not found,KARAF-6110,13211603,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,24/Jan/19 16:06,08/Oct/20 14:12,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Especially when embedding Karaf, it would be great to add an option to not start Karaf if a boot features installation fails.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-6111,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-01-24 16:06:03.0,,,,,,,"0|yi09y8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify the bootstrap service sync concretely waits all boot features started,KARAF-6111,13211604,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,24/Jan/19 16:09,08/Oct/20 14:12,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"It's possible to ""block"" local console waiting all boot features started. The {{Bootstrap}} service should only appear when all boot features are fully started.

It's especially important when embedding Karaf (like in Docker).",,geraldguillaume,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Feb 07 16:45:42 UTC 2019,,,,,,,"0|yi09yg:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Feb/19 16:45;jbonofre;It almost works fine with the local console using {{console.startup.delay=true}}.

We should add a global property which can work with {{daemon}}, {{run}}, {{start}}, etc. For instance, systemd just sees the Karaf PID there (started) but actually Karaf is still starting. We should have some kind of sync between the PID and the boot state.",,,,,,,,,,,,,,,,
Scheduler should be able execute system shell command,KARAF-6206,13223020,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,21/Mar/19 09:14,08/Oct/20 14:10,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,Currently the scheduler is able to execute Karaf scripts and commands. It would be great to be able to execute system shell/scripts.,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-03-21 09:14:56.0,,,,,,,"0|z00xs8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add <stageBootFeatures/> allowing to define the early stage boot features,KARAF-6319,13237997,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,06/Jun/19 16:46,08/Oct/20 14:10,17/Feb/21 11:14,,,,,,,karaf,,,,,,1,,,,,,"Right now, using the {{karaf:assembly}} goal, we can provide the {{<bootFeatures/>}}, ending in {{featuresBoot}} property in {{etc/org.apache.karaf.features.cfg}}.

However, it's not possible during the assembly to specify the ""early"" stage boot features, for instance, something like:

{code}
featuresBoot=(instance,package,log,ssh,framework,feature),myfeature
{code}

I'm proposing to add (in the {{Builder}}) a {{<firstBootFeatures/>}} that will be adding in the early stage, before the ""regular"" {{<bootFeatures/>}}.",,cjonas,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-06-06 16:46:01.0,,,,,,,"0|z03hk8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Be able to ""control/enable/disable"" CTRL-D and logout in the shell",KARAF-6321,13238110,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,07/Jun/19 05:50,08/Oct/20 14:09,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"By default, when running Karaf in foreground, CTRL-D just stops Karaf container. It could be done by mistake.

It would be great to be able to control behavior of CTRL-D and {{shell:logout}} via {{etc/org.apache.karaf.shell.cfg}} at least be able to disable CTRL-D or {{logout}} to allow users to use another command or cleanly use {{halt}} one.",,jbonofre,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-06-07 05:50:40.0,,,,,,,"0|z03i9c:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update documentation with custom login module,KARAF-6424,13258049,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,mshareghi,mshareghi,20/Sep/19 22:14,08/Oct/20 14:04,17/Feb/21 11:14,,4.2.3,,,,,karaf,,,,,,0,documentation,,,,,"Custom LoginModules deriving from AbstractKarafLoginModule are broken since karaf 4.2.3, due to a new precondition to the commit() method. A protected boolean value called ""succeeded"", was added at the base class, and LoginModules which extend AbstractKarafLoginModule must now set *succeeded* to *true* in the login() method before returning, even if the return value itself true.  If they do not, the base class's commit() method clears the user and principals and the login is aborted.

 

This doesn't affect the built-in Karaf LoginModules because they were all updated  to include the succeeded=true login statement. However, I didn't see anything in the documentation that specifies this new requirement.

 

Please consider a base class design that preserve backwards compatibility and doesn't require subclasses to implement new side-effects to continue working.  

[https://github.com/apache/karaf/commit/d2f19a5a89f50970075faba4ecfbd799035e390e#diff-a2ebf916f22840dae40b465b685f50d3]

 ",,coheigea,jbonofre,mshareghi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-09-21 14:34:26.976,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Sep 22 14:41:14 UTC 2019,,,,,,,"0|z06vl4:",9223372036854775807,,,,,,,,,,,,,,,,,"21/Sep/19 14:34;jbonofre;Indeed, my bad, I merged [~coheigea] PR missing the backward compatibility. Let me add a backward compatible method. Sorry about that.","21/Sep/19 15:16;jbonofre;[~mshareghi] would just updating the documentation and adding note be enough for you or do you expect backward  compatible {{AbstractKarafLoginModule}} ?
If it's the later, I would need to have {{AbstractKarafLoginModule}} back (without the boolean) for you, and introduce an {{ExtendedAbstractKarafLoginModule}} extending {{AbstractKarafLoginModule}} adding just the boolean.
Thoughts ?","21/Sep/19 23:15;mshareghi;[~jbonofre] Thanks for the update I went back and looked at the Oracle JAAS developer guide, and surprisingly it appears that storing the login result as a side-effect *is* the correct expectation for method implementations, so the current code is correct even though it broke existing implementations. (MY bad..!)

[https://docs.oracle.com/javase/7/docs/technotes/guides/security/jaas/JAASLMDevGuide.html]

So I think documentation update is fine. Perhaps the doc can make clear which parts the abstract class already handles for you?

Alternatively, you could extend the class with improved behaviors and deprecate the original one. This would keep loginmodules from failing silently when Karaf is upgraded.

 ","22/Sep/19 14:41;jbonofre;[~mshareghi] yes, we did the change as it's a better abstract. Let me postpone to 4.2.8 to give me time to document a bit. Thanks !",,,,,,,,,,,,,
"Include docker resources generation (docker file, image) as part of the build",KARAF-6440,13259958,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,01/Oct/19 16:19,08/Oct/20 14:04,17/Feb/21 11:14,,,,,,,karaf,,,,,,1,,,,,,,,cjonas,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-10-01 16:19:11.0,,,,,,,"0|z077d4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support system property substitution in feature files,KARAF-6511,13266556,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,gianmma,gianmma,06/Nov/19 11:12,08/Oct/20 13:58,17/Feb/21 11:14,,4.2.7,,,,,karaf,,,,,,0,,,,,,"Karaf feature repository should support variable substitution.

This would be particularly handy when non maven URL are used for obtaining artifacts (e.g. file, http).

 ",,gianmma,mattrpav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-05-01 15:25:48.173,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri May 01 15:25:48 UTC 2020,,,,,,,"0|z08b7k:",9223372036854775807,,,,,,,,,,,,,,,,,"01/May/20 15:25;mattrpav;I've written a patch for this in the past and can take this one",,,,,,,,,,,,,,,,
"Replace JaxbUtil by DOM ""handy"" marshal/unmarshal",KARAF-6531,13270447,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,25/Nov/19 13:33,08/Oct/20 13:53,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Karaf has a ""core"" dependency to JAXB mostly for the features model marshalling/unmarshalling. It's probably overkill to load whole JAXB for that, and it means that Karaf has a strong requirement on JAXB. As the feature model is ""static"" (not modified at runtime), I think we can achieve the same using SXC/SAX.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-11-25 13:33:01.0,,,,,,,"0|z08z7s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add exec:groovy command,KARAF-6538,13272171,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,04/Dec/19 09:43,08/Oct/20 13:52,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"For testing purposes, it would be helpful to be able to execute groovy scripts directly in the shell console.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-12-04 09:43:39.0,,,,,,,"0|z099ug:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
framework feature should be in earliest stage in the resolver,KARAF-6577,13277888,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,07/Jan/20 09:09,08/Oct/20 13:52,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently the resolver considers all startupFeatures at the same ""level"". Meaning that if we have prerequisite, it tries to resolve these features in early stage, even before the framework feature.

It causes issue with some features, like jdbc.

At least the framework feature should be the first resolved (whatever prerequisites are) or be able to define ranking/staging attribute on startupFeature.",,cjonas,ggrzybek,jbonofre,nite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-01-07 09:09:16.0,,,,,,,"0|z0a94g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add vaadin example,KARAF-6608,13281574,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,26/Jan/20 06:44,08/Oct/20 13:28,17/Feb/21 11:14,,,,,,,karaf,,,,,,2,,,,,,,,grolfs,jbonofre,jfeinauer,maggu2810,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-01-26 13:58:51.151,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Feb 02 10:50:06 UTC 2020,,,,,,,"0|z0av5c:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Jan/20 13:58;jfeinauer;Hi, I am working on such a Demo here [https://github.com/JulianFeinauer/vaadin-flow-karaf-example.]

Currently there seems ot be an issue with the Polymer Template, without it already works flawlessly.","26/Jan/20 14:06;jfeinauer;[~jbonofre] I can of course spin off something from my stuff, but if you like we can also cooperate on something more impressive. Then, just ping me.","02/Feb/20 10:30;maggu2810;Hi Julian,

I am not really using Vaadin but I tried to get it running in an OSGi environment (the starter application).

I used Vaddin 14.1.5 and Flow 2.1.4.

For the simple demo I don't need to wrap any of the used bundled to get them running into an OSGi runtime (they already contains the respective manifest entries).

I could create a Karaf feature if desired.

Would it make sense or is there an important point why you stick at Vaadin 13?","02/Feb/20 10:50;jfeinauer;Hey [~maggu2810] thas excellent news. And in fact, It needed all those wraps to get it running in 13 so I decided to stick to it until I get everything running : )
But if you can do a feature for 14, that would be highly appreciated.

Although I guess my issue with the Polymer Template will still be present (see my bug report here https://github.com/vaadin/flow/issues/7377).",,,,,,,,,,,,,
Split standard feature repo in smaller features repos,KARAF-6867,13334226,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,07/Oct/20 15:49,08/Oct/20 13:12,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The standard feature repository is very large today and mix lot of different features.

It would be better to use smaller/atomic feature repositories.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-10-07 15:49:45.0,,,,,,,"0|z0jhu0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
the wrap deployer does not calculate symbolic name and version correctly.,KARAF-6853,13327610,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,sekaijin,sekaijin,15/Sep/20 07:56,08/Oct/20 13:12,17/Feb/21 11:14,,2.2.2,4.2.9,,,,karaf,,,,,,0,,,,,,"when we deploy jar using wrap without giving a version or name
wrap create a symbolic name which is the url in which we replaced : and / by _ and version 0
wrap: mvn: foo/bar/2.1.5 will give Bundle-SymbolicName=wrap_mvn_foo_bar_2.1.5 and Bundle-Version=0

exemple karaf 2.2.2: 
Bundle-Name = wrap_mvn_ojdbc_ojdbc_14
Bundle-SymbolicName = wrap_mvn_ojdbc_ojdbc_14
Bundle-Version = 0
Bundle-ManifestVersion = 2
exemple karaf 4.2.9
Bundle-ManifestVersion = 2
Bundle-Name = wrap_mvn_ojdbc_ojdbc_14
Bundle-SymbolicName = wrap_mvn_ojdbc_ojdbc_14
Bundle-Version = 0

It is possible to add this information in the url with $ Bundle-SymbolicName, ...
But wrap could calculate them alone from the url
wrap:mvn:groupId/artifactId/version
should give
Bundle-ManifestVersion = 2
Bundle-Name = artifactId
Bundle-SymbolicName = artifactId
Bundle-Version = version

Or
Bundle-ManifestVersion = 2
Bundle-Name = groupId artifactId
Bundle-SymbolicName = groupId_artifactId
Bundle-Version = version


",,jbonofre,sekaijin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-09-15 08:07:38.779,,,false,,,,,,,,https://issues.apache.org/jira/browse/CAMEL-15513,,,,,,,,,,9223372036854775807,,,Thu Sep 17 07:35:17 UTC 2020,,,,,,,"0|z0ilzk:",9223372036854775807,,,,,,,,,,,,,,,,,"15/Sep/20 08:07;jbonofre;That's not directly a Karaf issue but a Pax URL issue. Anyway, I will tackle that. Thanks for the suggestion.","16/Sep/20 05:58;jbonofre;It could be a bit challenging as wrap and mvn are not related. For instance, you can use wrap with a regular http or file URL (not necessary mvn URL). That's why wrap takes a ""generic"" approach.

Anyway, wrap could parses and use the ""underlying"" URL before delegating to the concrete URL handler.","17/Sep/20 07:33;sekaijin;Yes

moreover it seems to me that karaf relies on org.ops4j.pax.url.wrap
it is perhaps not in karaf but in org.ops4j.pax.url.wrap that it is necessary to process that.","17/Sep/20 07:35;jbonofre;Yeah, it's what I said in my previous comment: it's not directly a Karaf issue, but as the dev communities are basically the same, it's not a big deal ;)

Anyway, I'm improving on PAX URL front.",,,,,,,,,,,,,
Register Karaf commands when their dependencies are fullfilled,KARAF-6771,13312164,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,svogt,svogt,18/Jun/20 08:50,18/Jun/20 08:50,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently ALL commands of a bundle are registered at once. That means if one of multiple commands has its references not fullfilled, no command will be available. 

I think it would be better if those commands which have fullfilled dependencies get registered. If this causes heavy work ""elsewhere"" - there could be some delay / cooldown, but once a certain timeout is reached, everything which is there should get registered... ",,svogt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-06-18 08:50:30.0,,,,,,,"0|z0fz2o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for FreeRDP 3.0.0,GUACAMOLE-1026,13298187,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,mjumper,mjumper,14/Apr/20 06:24,18/May/20 04:49,17/Feb/21 11:14,,,,,,,RDP,,,,,,0,,,,,,"The nightly CI build testing that guacamole-server builds against the FreeRDP {{master}} branch started failing on 2020-04-10 due to the version bump to 3.0.0. It's currently unclear whether the API has changed, as well.

The guacamole-server build should be adjusted such that it recognizes FreeRDP 3.0.0. If further code changes are necessary for this to work, those changes should probably also be made now before things get too hairy.",,luke,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-249,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-05-18 04:49:12.072,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon May 18 04:49:12 UTC 2020,,,,,,,"0|z0dlls:",9223372036854775807,,,,,,,,,,,,,,,,,"18/May/20 04:49;luke;FYI as a result of enquiry on the user list (for Guacamole on RPi) I tried compiling latest freerdp (since guacamole-server couldn't find the packaged freerdp).

As one might expect Guacamole is unable to find libfreerdp2 and RDP is disabled.

 

Freerdp is in located in /usr/local/bin/xfreerdp and ldconfig reports:

libfreerdp-client3.so.3 -> libfreerdp-client3.so.3.0.0

libfreerdp3.so.3 -> libfreerdp3.so.3.0.0

 ",,,,,,,,,,,,,,,,
Keymap: Add ability to specify FreeRDP keyboard type.,GUACAMOLE-951,13284115,Improvement,Reopened,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,mather,mather,09/Feb/20 06:45,09/Feb/20 07:45,17/Feb/21 11:14,,1.0.0,1.1.0,,,,RDP,,,,,,1,,,,,,"On guacamole-server 1.0.0 with FreeRDP 1.0.2 plugin, Japanese keyboard layout (actually I'm using Japanese keyboard) send signal as US keyboard. (ex. {{""}} ({{shift + 2}} in ja ) -> {{@}} ({{shift + 2}} in us))
This problem [fixed in FreeRDP 1.1.0|https://github.com/FreeRDP/FreeRDP/pull/707], but this solution is work around for Japanese IME, and no effect when KeyboardLayout is KBD_JAPANESE.
I think KeyboardType (also KeyboardSubtype, KeyboardFunctionKey) should be specified by guacamole-server (as user of FreeRDP library).",,Enock,mather,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-02-09 07:05:43.229,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Feb 09 07:38:10 UTC 2020,,,,,,,"0|z0bajc:",9223372036854775807,,,,,,,,,,,,,,,,,"09/Feb/20 07:05;mjumper;Please see:

http://guacamole.apache.org/faq/#does-guacamole-support-my-keyboard-layout

If the RDP server you are connecting to is configured to use the Japanese keyboard layout, then you must select that keyboard layout in your Guacamole connection parameters (the {{server-layout}} parameter). If you do not do this, then Guacamole must assume that the RDP server uses the US English layout, and the scancodes it sends will not be correct.","09/Feb/20 07:31;mather;I selected Japanese keyboard layout.","09/Feb/20 07:38;mather;Currently, there is no ability to set KeyboardType by guacamole-server as following.

{code}
--- a/src/protocols/rdp/settings.c
+++ b/src/protocols/rdp/settings.c
@@ -1189,6 +1189,9 @@ void guac_rdp_push_settings(guac_client* client,
     rdp_settings->DesktopHeight = guac_settings->height;
     rdp_settings->AlternateShell = guac_rdp_strdup(guac_settings->initial_program);
     rdp_settings->KeyboardLayout = guac_settings->server_layout->freerdp_keyboard_layout;
+    rdp_settings->KeyboardType = guac_settings->server_layout->freerdp_keyboard_type;
+    rdp_settings->KeyboardSubType = guac_settings->server_layout->freerdp_keyboard_subtype;
+    rdp_settings->KeyboardFunctionKey = guac_settings->server_layout->freerdp_keyboard_function_key;

     /* Performance flags */
     /* Explicitly set flag value */
{code}
",,,,,,,,,,,,,,
Support etcd and s3 in Cave repository,KARAF-6441,13260086,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,02/Oct/19 10:42,25/Nov/19 07:04,17/Feb/21 11:14,,,,,cave-4.2.2,,cave,,,,,,0,,,,,,,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-10-02 10:42:13.0,,,,,,,"0|z0785k:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
provide a Ansible module auto install karaf and feature install,KARAF-6390,13253380,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,minikiller,minikiller,28/Aug/19 02:02,15/Sep/19 18:47,17/Feb/21 11:14,,4.2.6,,,,,karaf,,,,,,0,,,,,,"can we develop a ansible module to support karaf auto install, now i google on the internet, can not find a tool can do it. Now the most recent version 4.2.6 can not run client command under ansible. I can not solved it.",,jbonofre,minikiller,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-08-28 04:23:07.672,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Sep 15 18:47:46 UTC 2019,,,,,,,"0|z063nk:",9223372036854775807,,,,,,,,,,,,,,,,,"28/Aug/19 04:23;jbonofre;Hi,
can you elaborate a bit ? I think Cave Deployer is an interesting point for ansible scripting. Do you imagine ansible directly running commands through Karaf client ?
It's good idea anyway, just want to clarify exactly what you are expecting.","29/Aug/19 00:44;minikiller;I get ansible galaxy from [https://galaxy.ansible.com/islandora-devops/karaf ,|https://galaxy.ansible.com/islandora-devops/karaf]

It can install karaf under ansible, when I use karaf 4.2.6, it show errors when run to install wrapper feature. But when i change karaf version to 4.0.8 it works. I found client command is different between 4.26. and 4.0.8.","30/Aug/19 15:55;jbonofre;Maybe it's the change we did about the way to provide the password on {{bin/client}} ? Can you provide some details how it fails ? Authentication failure ?","15/Sep/19 18:47;jbonofre;I think I will add some ansible resources in Decanter or Karaf (let me think a bit about that). Maybe an example in Karaf at least.",,,,,,,,,,,,,
Shell Table improvements,KARAF-6038,13203031,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,martin.krueger,martin.krueger,07/Dec/18 12:56,09/Jan/19 07:37,17/Feb/21 11:14,,4.2.1,4.2.2,,,,karaf,,,,,,0,,,,,,"The starting point was the warning of Java 11 that there is an ""illegal reflective access operation"" which is not supported in later versions of Java.

Event though currently I see no way of getting rid of it without sacrificing some functionality some other improvements were made along the way. (Mainly shorten the code by getting rid of redundant functionality.)

Please have a look at the attached patch.

Thx.",,martin.krueger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Dec/18 13:00;martin.krueger;0001-KARAF-6038-Several-improvements-of-Shell-Table-code.patch;https://issues.apache.org/jira/secure/attachment/12950985/0001-KARAF-6038-Several-improvements-of-Shell-Table-code.patch",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-12-07 12:56:06.0,,,,,,,"0|s01a4g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cellar events should include all the information required for the processing of the event.,KARAF-1125,12536344,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,iocanel,iocanel,iocanel,24/Dec/11 12:06,05/Oct/18 13:13,17/Feb/21 11:14,,,,,,,cellar,,,,,,0,,,,,,"When an event is processed in Cellar most of the time a lookup to the distributed registry is required.

I can see a couple of issues with this approach:
i) Unnecessary access to the distributed resources. 
ii) The state of the group is only in memory and is not persisted anywhere.
iii) Having the state in the distributed memory its not easy to view the state of a group.

I think that we should not use distributed memory as registry at all. Each event should contain all the information required for its processing and those information should be persisted locally on each node (configuration admin / fileinstall).

The only thing that maybe needs to be addressed, is what happens when a new node joins a group. I am thinking that it should not be really hard to send something like ""request group config"" command and then just process the result.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-12-24 12:35:53.517,,,false,,,,,,,,,,,,,,,,,,222027,,,Sat Dec 24 12:35:53 UTC 2011,,,,,,,"0|i1cj1j:",281216,,,,,,,,,,,,,,,,,"24/Dec/11 12:35;jbonofre;Yes, we can use the ConfigAdmin to store that, and use Cellar itself to replicate the state (using a config listener).",,,,,,,,,,,,,,,,
Introduce -Dkaraf.bind.address property,KARAF-1128,12536411,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,djencks,djencks,27/Dec/11 07:59,16/Sep/18 04:55,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Lets allow people to configure which host the rmi Registry is exposed on.

Currently, Karaf binds network services (RMI registry, HTTP server, etc) on all IP addresses (0.0.0.0 interface).

It could be really helpful to have a property to mention the bind address (something like -Dkaraf.bind.address=192.168.1.1 for instance).

This property should be used by most of the bundle binding network services (Karaf management bundle for the RMI registry/server, HTTP service wia Pax Web, etc).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-12-27 08:04:31.504,,,false,,,,,,,,,,,,,,,,,,222094,,,Tue Apr 10 08:06:16 UTC 2012,,,,,,,"0|i06bbj:",34767,,,,,,,,,,,,,,,,,"27/Dec/11 08:04;jbonofre;AFAIR, I set the 0.0.0.0 as host to bind on all interfaces/host.

If you don't mind David, I will make the change.","28/Dec/11 06:47;djencks;This is unrelated to what I was thinking of.  I really object to using system properties for configuration when we have config admin.  I would like to see a proposal on how to share a piece of config data between multiple config admin config ids, which seems to be what you are thinking of. In the future I would appreciate your opening your own issue instead of changing the meaning of mine so dramatically.","28/Dec/11 06:52;jbonofre;You get me wrong. The -D option is a first option to populate the ConfigAdmin layer by default. If the user doesn't use it, he can already change the corresponding properties in ConfigAdmin.","28/Dec/11 07:06;djencks;OK, I'm not sure I understand what you are thinking yet.  Will there be a map from system properties to lists of configId-property name pairs so setting a single system property on startup will set all the values for the property named in the config id-property name pairs?","10/Apr/12 08:06;jbonofre;Move to 2.3.0 as 2.2.x branch is now bug fixes only.",,,,,,,,,,,,
Use group in shell/webconsole/MBeanServer,KARAF-1148,12538230,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,12/Jan/12 17:12,16/Sep/18 04:43,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently, Karaf shell, MBean server, and WebConsole don't use the JAAS group to define execution permission on actions.

For instance, it could be helpful to define:
- admin: * (allowing all actions for the users)
- group A: features/install, features/uninstall
- group B: features/list, config/list",,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-1698,KARAF-979,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-01-16 10:21:56.54,,,false,,,,,,,,,,,,,,,,,,223736,,,Mon Jan 16 13:12:33 UTC 2012,,,,,,,"0|i1cj07:",281210,,,,,,,,,,,,,,,,,"16/Jan/12 10:21;ldywicki;Actually I started implementing the security layer in the WebConsole. So far it is not commited but I've introduced following roles:
osgi-bundle
osgi-service
osgi-config

etc. The access to whole osgi-* stuff might be granted by giving a osgi role. What will allow user to access all osgi related stuff.
We can introduce roles and permissions. In code we can have a permissions required to access given part of code and configurable roles to let user assign permissions separately.","16/Jan/12 13:12;gnodet;I think the first use case would be to have a read-only console, so any role we defined should allow such a split between actions.  So having bundle:install and bundle:list in the same role doesn't really help I think.",,,,,,,,,,,,,,,
karaf:features-generate-descriptor should pick up feature dependencies from the features configuration,KARAF-5512,13121949,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,sb@dod.no,sb@dod.no,30/Nov/17 16:06,16/Sep/18 04:34,17/Feb/21 11:14,,,,,,,karaf,,,,,,1,,,,,,"If the karaf:features-generate-descriptor could pick up and use the features in the [""features"" configuration parameter defined on the AbstractFeatureMojo|https://github.com/apache/karaf/blob/master/tooling/karaf-maven-plugin/src/main/java/org/apache/karaf/tooling/features/AbstractFeatureMojo.java#L56] then I could get rid of most of my src/main/feature/feature.xml template files and handle feature file generation completly in the POMs.

And that would be nice.",,koldar,sb@dod.no,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-11-30 16:06:51.0,,,,,,,"0|i3ne5z:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
karaf-maven-plugin generates feature descriptor with unexpected snaphot version,KARAF-5788,13166715,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,Nerrière,Nerrière,18/Jun/18 14:26,16/Sep/18 04:34,17/Feb/21 11:14,,4.1.5,4.2.0.M2,,,,karaf,,,,,,0,,,,,,"Hello, 

I'm using the karaf-maven-plugin to generate feature descriptors but I discover that if the related bundle has a SNAPSHOT version, for example ""2.0.0-SNAPSHOT"" then the feature generated has a version like ""2.0.0.SNAPSHOT"" (take note of the dot instead of the dash). It seems that the plugin worked well until the R4 (karaf-maven-plugin 3.0.9 generates the version with the expected dash). 
 In the plugin code, the [VersionCleaner |https://github.com/apache/felix/blob/trunk/utils/src/main/java/org/apache/felix/utils/version/VersionCleaner.java].clean() method used in the  [Feature|https://github.com/apache/karaf/blob/master/features/core/src/main/java/org/apache/karaf/features/internal/model/Feature.java].setVersion() method is responsible of the problem, the following test: 
     public static void main(String[] args)

{          String res = VersionCleaner.clean(""2.0.0-SNAPSHOT"");          System.out.println(res);      }

 
 displays: 
     2.0.0.SNAPSHOT 

In the [Karaf user forum|http://karaf.922171.n3.nabble.com/karaf-maven-plugin-generates-feature-descriptor-with-bad-snaphot-version-td4053313.html], Jean-Baptiste Onofré says it is a normal result because 2.0.0-SNAPSHOT is not a valid OSGi version but 2.0.0.SNAPSHOT is.

I think it will be interesting to have a new configuration property like ""useRawVersion"" 
 (default to false) to let user choose if he wants OSGI or Maven version format.

Thanks",,lichtin,Nerrière,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-06-18 14:26:45.0,,,,,,,"0|i3uz3b:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
maven dependency structure should match feature contents,KARAF-510,12501234,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,djencks,djencks,djencks,12/Mar/11 07:26,16/Sep/18 04:34,17/Feb/21 11:14,,3.0.0,,,,,karaf,,,,,,0,,,,,,In general the dependency structure of the maven projects should agree with the features.xml descriptors or karaf base server contents.  For instance if we use maven-bundle-plugin to include some dependencies into a bundle then these dependencies should be marked <scope>provided</scope> in the pom.  Similarly if we expect a bundle B1 that is a dependency of bundle B2 in feature F2 and we expect B1 to be provided by a different feature F1 then B1 should be marked provided in B2's pom.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-884,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,59944,,,2011-03-12 07:26:41.0,,,,,,,"0|i1cik7:",281138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make karaf-maven-plugin features generation sensitive to maven-bundle-plugin instructions,KARAF-1507,12558358,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,topping,topping,28/May/12 17:35,16/Sep/18 04:34,17/Feb/21 11:14,,3.0.0,,,,,karaf,,,,,,0,,,,,,"Projects that create bundles with certain bundle instructions will create features.xml that are incorrect.  For instance, specifying <Embed-Dependency> in bundle instructions removes a dependency on the specified jar, but features.xml still renders this dependency.  Since the manifest no longer imports the now-embedded dependency, the features inclusion is superfluous at best, but it still should not be there.  ",,jbonofre,topping,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-01-26 09:31:34.617,,,false,,,,,,,,,,,,,,,,,,308524,,,Tue Jan 26 09:31:34 UTC 2016,,,,,,,"0|i1cjf3:",281277,,,,,,,,,,,,,,,,,"28/May/12 17:36;topping;Please assign this to me.","26/Jan/16 09:31;jbonofre;Did you try with the latest karaf maven plugin (Karaf 4.x) ?",,,,,,,,,,,,,,,
Add includeTransitiveDependencies option to generate-features-xml Maven goal on 2.2.x branch,KARAF-1764,12604598,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,peter.gardfjell@gmail.com,peter.gardfjell@gmail.com,23/Aug/12 11:51,16/Sep/18 04:34,17/Feb/21 11:14,,2.2.9,,,,,karaf,,,,,,0,,,,,,"This is a request to backport https://issues.apache.org/jira/browse/KARAF-931 to the 2.2.X branch since the 3.0.x version of the karaf-maven-plugin no longer produces feature descriptors that are compatible with the 2.2.X versions of Karaf.

See http://karaf.922171.n3.nabble.com/karaf-maven-plugin-started-producing-features-with-a-new-namespace-incompatible-with-Karaf-2-2-9-tc4025746.html for some additional background.",,peter.gardfjell@gmail.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,308531,,,2012-08-23 11:51:02.0,,,,,,,"0|i1cjhz:",281290,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make it easier to customize properties like org.osgi.framework.system.packages.extra,KARAF-3509,12773414,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,fabianlange,fabianlange,09/Feb/15 10:08,16/Sep/18 04:34,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"I am using the 4.0M1 maven plugin to generate a Karaf distribution.

I need to include Hyperic Sigar for many bundles. Because Sigar uses some odd resolution mechanism for native libraries (which need to be in the same folder), the easiest solution is to put sigar and the native libs into the lib directory during build.
However I need to add ""org.hyperic.sigar"" to the ""org.osgi.framework.system.packages.extra"".

It turns out that this is not so easy. This value contains some generated values. What I do right ow, is that I copied this long value to the custom.properties, which i copy over using maven-resources plugin, but I also need to specify overwrite, because an empty custom.properties file is already present.

What I dislike most about this solution is that my custom properties needs to contain the value from config.properties + my extension. But if the value in config.properties changes (like when upgrading to M2) I will not notice that I ""destroy"" the value by overwriting with my own.

I wonder if there also use cases for other properties to be modified with the maven plugin.",,fabianlange,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-02-09 10:08:41.0,,,,,,,"0|i25cw7:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Port current kittests to newly added integration test framework,KARAF-1006,12531071,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,pieber,pieber,pieber,10/Nov/11 23:27,15/Sep/18 16:39,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The current kit tests are almost done entirely ""manually"". The new test framework though comes with a ""native"" runner which can do the same as the current framework but with ways less code.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,216809,,,Sun Nov 27 18:43:00 UTC 2011,,,,,,,"0|i1cj5j:",281234,,,,,,,,,,,,,,,,,"27/Nov/11 18:12;pieber;I've reactivated them for now (and upgraded them) till KARAF-1049 is finished; therefore I've only assigned this to 3.1.0 to get some more time.","27/Nov/11 18:43;pieber;Committed r1206799
        M       itests/kittests/pom.xml
        M       itests/pom.xml
r1206799 = d4be5e3b43c8cd62189ecddcee601a6709b7acba (refs/remotes/origin/trunk)",,,,,,,,,,,,,,,
osgi:install command could need a persistent flag,KARAF-814,12518899,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,achim_nierbeck,achim_nierbeck,15/Aug/11 16:57,15/Sep/18 16:36,17/Feb/21 11:14,,,,,,,karaf,,,,,,2,,,,,,"right now if you do a osgi:install <someurl> the bundle is installed and everything is fine. 
After a clean restart either by dropping the cache folder or by running restart -c all installed bundles are removed from cache. 
This is fine the way it works but maybe some certain bundles should be treated more like the ""system"" bundles. 

Therefore I propose a new Flag -p for persisting these certain bundles. 
They could be stored into the system-repository of Karaf. 

One thing still open, how do we tell the restarted server instance to also pull those ""newly"" deployed
bundles into it's running state :-)

",,rwonly,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-08-15 16:59:12.495,,,false,,,,,,,,,,,,,,,,,,64996,,,Wed Nov 09 21:21:52 UTC 2011,,,,,,,"0|i1ciyn:",281203,,,,,,,,,,,,,,,,,"15/Aug/11 16:59;jbonofre;It makes sense for me.
I don't think that we have to take care of the ""purge"" from the system repo, it's the responsibility of the user.","15/Aug/11 17:26;djencks;we have 2 ways to get bundles started in a clean server:
- listed in startup.properties
- mentioned in a boot feature

so along with the flag to copy the bundle into the system repo we need something to do one of these.  Would it make sense to do something like this:

- start with a set of bundles to resolve
- obr figures out all the additional bundles needed for them 
- turn this entire set of bundles into a feature, copy the bundles into the system repo, and make this a boot feature

?","09/Nov/11 21:21;jbonofre;To be consistent, features:addurl should be also able to cache a feature XML into the system repo.

Generally speaking, it makes sense to have this global behavior provided by Pax URL.

Pax URL should be able to use, in priority, the Karaf system folder as Maven cache.",,,,,,,,,,,,,,
Allow @Option and @Argument on method,KARAF-1043,12532681,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,25/Nov/11 08:33,15/Sep/18 16:35,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently, @Option and @Argument annotations are allowed for attributes. I could be interesting (for validation for instance) to have it on methods.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,218414,,,2011-11-25 08:33:04.0,,,,,,,"0|i1cj4n:",281230,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Command output should be output immediately (not buffered) when using SSH client,KARAF-2131,12628395,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,ceefour,ceefour,19/Jan/13 05:27,15/Sep/18 16:35,17/Feb/21 11:14,,2.3.0,,,,,karaf,,,,,,0,,,,,,"When running a long command directly on the shell, output is immediate.

However, when connecting using SSH (using Linux OpenSSH client), output seems to be buffered. So there's no output before command is completed or SSH connection is closed.

Same behavior when using Karaf's own client (bin/client). So this needs to be fixed on the server-side.

For example:

{code}
karaf_stg@luna2:~/karaf_template$ ssh -p 8122 karaf@localhost features:install -v -c soluvas-framework
..................... <-- looong time of silence here, then:
Installing feature soluvas-framework 2.0.0-SNAPSHOT
Installing feature soluvas-deps 2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.mongo/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.commons/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.json/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.async/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.cdi/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.data/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.push/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.jaxrs/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.security/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.facebook/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.ldap/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.image/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.social/2.0.0-SNAPSHOT
Installing bundle mvn:org.soluvas/org.soluvas.social.shell/2.0.0-SNAPSHOT
^^^^^ these lines are outputted all at once, after the command finishes, then the SSH connection is closed
{code}
","$ uname -a
Linux * 3.2.13-grsec-xxxx-grs-ipv6-64 #1 SMP Thu Mar 29 09:48:59 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ java -version
java version ""1.7.0_11""
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)
",ceefour,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,305525,,,2013-01-19 05:27:52.0,,,,,,,"0|i18d1z:",256917,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Per user command history,KARAF-2538,12676681,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,janstey,janstey,30/Oct/13 17:33,15/Sep/18 16:35,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"As mentioned in KARAF-2503, it would be nice to have command history per user. This is what folks used to a shell environment would expect I think.",,janstey,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,356113,,,2013-10-30 17:33:48.0,,,,,,,"0|i1pe4n:",356401,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Get auto update functionality like ""bundle:watch *"" on snapshot artifacts from remote repositories",KARAF-5350,13100485,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,sb@dod.no,sb@dod.no,07/Sep/17 14:33,15/Sep/18 16:35,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"I now have a continous deployment pipeline for [my project|https://github.com/steinarb/ukelonn] almost automated:
# All changes I would like deployed, I merge to master and then push master to github
# New pushes on master triggers a build on travis-ci
# A successful build on travis-ci results in a new snapshot being deployed to a maven repository accessible via HTTP
## The bundles that make up my application have been installed from snapshots in the maven repository, like so (karaf consolle commands):
{noformat}
config:edit org.ops4j.pax.url.mvn
config:property-append org.ops4j.pax.url.mvn.repositories "", https://maven.bang.priv.no/repository/@snapshots, http://maven.vaadin.com/vaadin-addons""
config:property-set org.ops4j.pax.url.mvn.globalUpdatePolicy always
config:update
feature:repo-add mvn:no.priv.bang.ukelonn/ukelonn.karaf/LATEST/xml/features
feature:install ukelonn-db-postgresql
feature:install ukelonn
{noformat}
# The final step I have to do during a deployment, is to log in with ssh to the karaf console and give ""bundle:update"" on each bundle
{noformat}
bundle:update no.priv.bang.ukelonn.api
bundle:update no.priv.bang.ukelonn.db.liquibase
bundle:update no.priv.bang.ukelonn.db.postgresql
bundle:update no.priv.bang.ukelonn
{noformat}

It is the final step I would like to have automated, so that new snapshots deployed to the remote repository is automatically picked up by karaf.",,sb@dod.no,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-09-07 14:58:36.12,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Sep 11 06:10:30 UTC 2017,,,,,,,"0|i3jrmn:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Sep/17 14:58;gnodet;Have you tried running the feautre installation command again:
{code}
feature:install ukelonn
{code}
If new snapshots are available, it should download them and update the bundles, and refresh what's needed.

The only thing to take care about is your maven configuration, as you need to ensure that the snapshots won't be cached too long.  You can do that with the new {{maven:repository-change --update-policy}} command.","07/Sep/17 20:24;sb@dod.no;The issue isn't about actually updating the bundles, just ""bundle:update"" is sufficient for that.

The issue is about watchdogging the remote repository for new snapshots and automatically reloading them.

See the recent threads on the ops4j and karaf-user mailing lists:
* [karaf-user|http://karaf.922171.n3.nabble.com/Can-karaf-cave-be-used-to-watch-remote-repos-for-snapshot-updates-tp4051319p4051364.html]
* [ops4j|https://groups.google.com/d/msg/ops4j/wbiFG6cLLps/Ni_-GKyvAQAJ]","08/Sep/17 05:43;gnodet;A way to automate that is to trigger a feature installation on a regular basis:
{code}
> feature:install scheduler
> scheduler:schedule --period 60 { feature:install shell }
{code}

Note that the code should update all snapshot bundles from remote repositories installed through features (not only the one from the {{shell}} feature).  The reason is that the FeatureService always work on a global way, so any call to it will update all the necessary bundles. ","08/Sep/17 14:39;sb@dod.no;How costly is the ""feature:install"" operation on a feature consisting of snapshot bundles from a remote repository?

(I'm thinking of just the ballpark numbers. Ie. is this so time consuming it should only be run once a day? Or is this so low-cost it could be run once a minute?)

Note that a dedicated ""remote maven listener"" can be made to be cheap in network and CPU usage terms, simply by not doing anything until it has to, first by using conditional HTTP GETs to watch the appropriate maven-metadata.xml files, and after downloading them only do something when there are new timestamps.

See [my outline of a possible karaf component|https://groups.google.com/d/msg/ops4j/wbiFG6cLLps/PPRTW_SrAQAJ] on the OPS4J mailing list.","09/Sep/17 14:01;gnodet;In production, I would not update bundles using polling. The reason is that if you start updating your bundles while they are being deployed, you may end up with an inconsistent state where only part of your bundles set will be updated, which could cause issues too.","09/Sep/17 21:10;sb@dod.no;Using the approach I outlined above should avoid trying to load a bundle in the middle of deployment:
* The listener would do HTTP conditional GETs on the relevant maven-metadata.xml and would do nothing on [304 Not Modified|https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection] responses except for waiting the configured interval and doing a new conditional GET
* When the listener received a 200 response it would parse the file and extract the new snapshot and compare it with the previous snapshot

That means the listener would not try to update a bundle, until:
# It had successfully loaded the maven-metadata.xml file
# It had successfully parsed the loaded maven-metadata.xml file and extracted the newest snapshot in the file
# The extracted snapshot was different from the current snapshot

But the above idea was what I had for my own listener component.

A karaf cave based solution might be different. I don't know much about the capabilities of cave, but from what little I have read the best approach might be to create a local maven snapshot repository in cave shadowing a remote repository, and then have karaf watch that in a similar way to how it watches the local repository...?","11/Sep/17 06:10;gnodet;I was mainly referring to deploying an inconsistent set of artifacts, not a not-fully deployed jar.
For example, if you use {{mvn deploy}} on your project, if the project is big enough, the deployment can take several minutes.  You may end up updating 2 snapshot bundles which are incompatible (api + impl, where the api has changed).  Of course, this will be fixed on the next pass, but in the mean time, your application can be in a bad state.
That also applies to {{bundle:watch}}, but that's why it's not meant to be used in production.
My worry is that you're trying to use such a tool in production, but that's up to you really.

In order to solve the problem, a better way would be to use a mechanism similar to Fuse Fabric.  I.e. have an information somewhere containing informations concerning the deployment on a given server.  The server polls for change and if there is any change, run the FeaturesService and somehow store back the result.  It depends if you have a single or a dozen servers though...

And btw, I would not use snapshot in production either, as it's quite difficult to trace them back to the source revision.  Imho, it's better to use an auto-incremented version and tag them before deploying.

Just some toughts...
",,,,,,,,,,
Provide new convenient shell aliases,KARAF-4110,12912811,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,13/Nov/15 12:05,15/Sep/18 16:34,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"I created some convenient aliases in my custom distribution. I think it could be helpful to provide such aliases to all users.

For instance:
{code}
feature:info .* | grep \(Feature.*[0-9]\|bundle-name-from-la-u\)
...
...
{code}",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-11-13 12:05:15.0,,,,,,,"0|i2ocuv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve the obr:resolve command help,KARAF-676,12510634,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,17/Jun/11 07:17,15/Sep/18 05:30,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The syntax for requirements isn't really described anywhere.
See https://gist.github.com/3da02f8c6b9992eeed5c for some additional information",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,68408,,,2011-06-17 07:17:18.0,,,,,,,"0|i1cirz:",281173,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create separate lib-folder for instances,KARAF-1743,12603832,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,bjoernpollex,bjoernpollex,17/Aug/12 08:55,15/Sep/18 05:03,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Currently it is not possible to deploy a set of extension-libraries just for a child-instance of Karaf. This would be a very useful feature.

As far as I can see this would only require two changes:

 * create a {{lib\ext}}-folder when creating a child-instance
 * change {{%KARAF_HOME%\lib\ext}} to {{%KARAF_BASE%\lib\ext}} in the {{-Djava.ext.dirs}}-option in {{karaf.bat}}

I only tried on Windows and have not seen any problems so far, but I suspect that on Linux it would not be much more complicated.",,bjoernpollex,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,308535,,,2012-08-17 08:55:09.0,,,,,,,"0|i1cjiv:",281294,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Be able to define the instances storage location,KARAF-3789,12838139,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,16/Jun/15 11:45,15/Sep/18 05:03,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The users should have the ability to change the location of the instances folder. Right now, it's based on the KARAF_BASE. Adding etc/org.apache.karaf.instances.cfg configuration containing storage property where users can provide their folder would be helpful.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-06-16 11:45:50.0,,,,,,,"0|i2g3kn:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Warn and override when feature can not install files,KARAF-2266,12642201,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,cschneider,cschneider,12/Apr/13 07:29,14/Sep/18 15:14,17/Feb/21 11:14,,3.0.0.RC1,,,,,karaf,,,,,,0,,,,,,"karaf can deploy files like config files during the installation of a feature. If the file is already present then it is not overwritten.
I wonder if we should print a warning in this case. One use case for this is a new version of a feature that adds a new needed property
to a config file. If the old feature was already present then the old config will be present and the user may also have done changes.

So there might be cases where a feature works if it can install its default configs but does not work when they are already present but invalid.
So we could write for each file that is already present:
""Warning: file <path> to be deployed is already present and will not be changed.""

We could also provide an option in feature:install like -f that forces all files to be overwritten if someone wants to make sure the feature installation should use the defaults. 
",,cschneider,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,322615,,,2013-04-12 07:29:17.0,,,,,,,"0|i1jnuv:",322960,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add -p (--persist) to the bundle:install and feature:install commands,KARAF-2784,12696848,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,24/Feb/14 06:11,14/Sep/18 15:14,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"In addition of populating the bundle cache, it would be great to add a -p (--persist) option to bundle:install and feature:install commands (and corresponding operations in the MBeans).
The purpose is:
- to store the artifacts in the system repository (or any repository defined in etc/org.ops4j.pax.url.mvn.cfg file)
- in the case of features, eventually update the featuresBoot property in etc/org.apache.karaf.features.cfg file",,achim_nierbeck,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2015-06-11 07:02:30.899,,,false,,,,,,,,,,,,,,,,,,375323,,,Thu Jun 11 07:43:34 UTC 2015,,,,,,,"0|i1sodj:",375619,,,,,,,,,,,,,,,,,"11/Jun/15 07:02;gnodet;Fwiw, all artifacts that use the maven url handler will already be cached in the local maven repository.
I'm a bit skeptical about this feature, as the new assembly Builder can be used to easily generate assemblies containing a given set of features.  We could add commands on top of it if there's any real need to do that from inside karaf, but I haven't seen a good use case for that yet.","11/Jun/15 07:08;achim_nierbeck;The Idea had been to ""persist"" certain bundles so they could survive a ""clean"" restart where the data directory is cleaned. ","11/Jun/15 07:40;gnodet;Would it be better to persist the requirements of the features service (they are already persistent, but in the data folder), which can already support bundle requirements ? Currently to add bundle requirements, you need to use the {{feature:requirement-add}} command and specify {{bundle:xxx}}, but we could add a specific command for that.

I understand the use case now, so I've nothing against the proposed solution, just trying to be more generic ...","11/Jun/15 07:43;achim_nierbeck;The idea was born out of the requirement during developing time ... installing certain bundles in a container and doing a ""refresh"" on the data folder ... which resulted in re-installing certain bundles every time. ",,,,,,,,,,,,,
Add feature installation date and a flag indicating if it's a boot feature,KARAF-2810,12699076,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,06/Mar/14 05:17,14/Sep/18 15:14,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Now, there is no way to know when a feature has been installed. And so, it's not easy to find if the feature has been installed as a boot features, or by an user.
It would be great to add some metadata like the feature installation date, displayed in feature:list/feature:info commands output.",,jbonofre,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,377423,,,2014-03-06 05:17:43.0,,,,,,,"0|i1t1an:",377717,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add getRepository(URI uri) to Feature,KARAF-3276,12747346,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,bradhoffman,bradhoffman,10/Oct/14 17:19,14/Sep/18 15:14,17/Feb/21 11:14,,3.0.3,,,,,karaf,,,,,,0,,,,,,"There currently exists a getFeature(String repoName) but there can be multiple feature repositories with the same name and I want to get a Repository using its URI.

The only way to do this currently is iterate through the list of Repositories and return the repository with the matching URI.",,bradhoffman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-10-10 17:19:54.0,,,,,,,"0|i211hz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add default role acl overview,KARAF-3483,12770605,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,28/Jan/15 07:44,14/Sep/18 12:38,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"As discussed on the mailing list, it would be great to have a overview of the default role permissions (gather in one page) for shell commands and MBeans in the user guide.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-01-28 07:44:08.0,,,,,,,"0|i24vx3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
document how users should write commands with the OSGI or META-INF/services way to discover them,KARAF-160,12472379,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jstrachan,jstrachan,24/Aug/10 14:41,14/Sep/18 12:38,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"e.g. here's how Cedric documented JCommander...
http://beust.com/jcommander/

it would be nice to have a page describing how to do similar things",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2010-09-14 18:03:24.709,,,false,,,,,,,,,,,,,,,,,,68462,,,Tue Feb 08 15:42:31 UTC 2011,,,,,,,"0|i1cid3:",281106,,,,,,,,,,,,,,,,,"14/Sep/10 18:03;jgoodyear;Hi James, any update on this issue? We're discussing cutting a Karaf 2.1.0 release soon and I'd like to know if this issue may be worked on / resolved soon, otherwise we may push this one out to 2.2.0. Thanks :)

P.S. I like the way the command documentation looks in the link above -- Karaf has a lot commands now, so thorough documentation on their usage would be very beneficial. ","15/Sep/10 14:06;jstrachan;lets defer to get 2.1.0 out","08/Feb/11 15:42;jgoodyear;Bumping fix version again.",,,,,,,,,,,,,,
Export SUN packages in config.properties like done in ServiceMix,KARAF-245,12476977,Improvement,Reopened,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,davsclaus,davsclaus,11/Oct/10 06:41,14/Sep/18 08:37,17/Feb/21 11:14,,2.0.0,2.1.0,,,,karaf,,,,,,0,,,,,,"I am updating chapter 13 about OSGi and I hit a problem with camel-cxf
and Karaf 2.1

He is what I do

davsclaus:/opt$ mvn -version
Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)
Java version: 1.6.0_20
Java home: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home
Default locale: en_US, platform encoding: MacRoman
OS name: ""mac os x"" version: ""10.6.4"" arch: ""x86_64"" Family: ""mac""

davsclaus:/opt$ tar -xf ~/Downloads/apache-karaf-2.1.0.tar.gz
davsclaus:/opt/apache-karaf-2.1.0$ bin/karaf

karaf@root> features:addurl
mvn:org.apache.camel.karaf/apache-camel/2.5-SNAPSHOT/xml/features

karaf@root> features:install camel-cxf
Error executing command: Could not start bundle
mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.saaj-impl/1.3.2_1
in feature(s) : Unresolved constraint in bundle
org.apache.servicemix.bundles.saaj-impl [90]: Unable to resolve 90.0:
missing requirement [90.0] package;
(package=com.sun.org.apache.xerces.internal.dom)

And I get the above problem with the SUN package.

I have not changed any configuration settings on Karaf.



I just tried with equinox instead of felix as osgi container. Same problem

karaf@root> features:install camel
karaf@root> features:

features:addurl              features:info
features:install             features:list
features:listrepositories    features:listurl
features:listversions        features:refreshurl
features:removerepository    features:removeurl           features:uninstall
karaf@root> features:install camel-cxf
Refreshing bundles org.springframework.context (38),
org.springframework.context.support (39),
org.apache.servicemix.bundles.cglib (47), org.apache.camel.camel-core
(46), org.springframework.aop (34),
org.apache.servicemix.bundles.jaxb-impl (44)
Error executing command: Could not start bundle
mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.saaj-impl/1.3.2_1
in feature(s) : The bundle
""org.apache.servicemix.bundles.saaj-impl_1.3.2.1 [90]"" could not be
resolved. Reason: Missing Constraint: Import-Package:
com.sun.org.apache.xerces.internal.dom; version=""0.0.0""



And the solution suggested by Willem Jiang

Hi Claus,

ServiceMix is using a different etc/config.properties from the karaf, and it exports these sun packages
 com.sun.org.apache.xalan.internal.xsltc.trax, \
 com.sun.org.apache.xerces.internal.dom, \
 com.sun.org.apache.xerces.internal.jaxp, \
 com.sun.org.apache.xerces.internal.xni, \


I'm afraid you need to do the same thing in karaf etc/config.properties file if you are try to using the saaj-impl from sun.","davsclaus:/opt$ mvn -version
Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)
Java version: 1.6.0_20
Java home: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home
Default locale: en_US, platform encoding: MacRoman
OS name: ""mac os x"" version: ""10.6.4"" arch: ""x86_64"" Family: ""mac""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2010-10-21 14:53:19.741,,,false,,,,,,,,,,,,,,,,,,146523,,,Thu Jan 06 09:16:20 UTC 2011,,,,,,,"0|i1cibz:",281101,,,,,,,,,,,,,,,,,"11/Oct/10 06:42;davsclaus;I wonder if Karaf/SMX should export those XML parser packages by default. But also for IBM JDK as it may have a different package name","21/Oct/10 14:53;jbonofre;Not sure it should be make by default as it's JDK vendor dependant.

The etc/jre.properties is only JRE version dependant, not vendor.

We have to enhance the jre.properties or the config.properties to define the Sun packages running on a JDK Sun vendor.","22/Oct/10 13:04;davsclaus;Isn't this in {{jre.properties}}?

I found it here
http://svn.apache.org/repos/asf/servicemix/smx4/features/trunk/assembly/src/main/filtered-resources/etc/jre.properties

And its only for JDK 1.6? Why isn't it done for JDK 1.5 as well? I think the XML stuff is also part of JDK 1.5.

com.sun.org.apache.xalan.internal.xsltc.trax, \
 com.sun.org.apache.xerces.internal.dom, \
 com.sun.org.apache.xerces.internal.jaxp, \
 com.sun.org.apache.xerces.internal.xni, \
 com.sun.jndi.ldap, \","22/Oct/10 13:11;jbonofre;Yes, it's in jre.properties.

Agree that the Sun packages should be defined for JRE 1.5 too.

I fix it right now :)","22/Oct/10 13:40;davsclaus;btw I get some ugly errors starting Karaf 2.1 if I add those to jre 6 entry.","22/Oct/10 13:42;davsclaus;Jesus its one big guess game.

In SMX the jre.properties have selected packages commented out. Looks like someone have done some trail and error and just fixed it by adding and committing out stuff.","22/Oct/10 14:35;gnodet;If you plan to deploy things that use the servicemix specs (or any JEE technology), you should use the karaf jre properties and deploy the appropriate specs and implementations.   In Karaf, we decided not to do so after some users complained that not all packages were exported.
There's no way to satisfy both sides at the same time unfortunately (unless the JRE itself becomes OSGi friendly).","22/Oct/10 14:36;gnodet;Btw, if exporting the SUN packages is not sufficient in Karaf, I'd rather not exporting them at all and eventually provide a second set of jre properties (where the user could then configure easily to choose the plain jre packages or the jee/osgi-friendly packages).","23/Oct/10 10:49;davsclaus;Just to be sure I tried with JDK 1.5 as well and get the same problem as reported.
This was in fact expected, but wanted to be sure.","23/Oct/10 10:50;davsclaus;The workaround is the use the SMX jre properties, which you can override the existing by storing it with the name etc/custom.properties.

From a shell you can do this fairly easily as follows:
davsclaus:/opt/apache-karaf-2.1.0$ curl http://svn.apache.org/repos/asf/servicemix/smx4/features/trunk/assembly/src/main/filtered-resources/etc/jre.properties > etc/custom.properties 

Then it works. However you need to install the http feature before installing CXF as it requires http stuff.","28/Dec/10 08:01;pieber;Is there any solution to this issue, or is it already ""fixed""/""wont fix""?","05/Jan/11 17:12;gnodet;If exporting the com.sun package is sufficient for SAAJ to work, that's doable.","06/Jan/11 09:16;gnodet;I think CXF need to be run with a J2SE-1.5 profile.  I suppose we could tweak the bundles a bit to make sure it works in 1.6 too without having to hide some packages, not sure how it would work though (I guess the main problem would be to ensure clients are wired on the API provided as bundles instead of the JVM by default).
For SAAJ, see http://cxf.547215.n5.nabble.com/running-CXF-service-under-IBM-JDK-on-AIX-td548674.html (the sun parser needs to be put in the lib/ext folder).",,,,
Make it easier to add additional custom property files,KARAF-550,12502970,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,pieber,pieber,pieber,31/Mar/11 02:47,14/Sep/18 08:37,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"The current custom.properties approach has some drawbacks in case you have a structure like karaf <- other framework project like smx <- client project. In this case you may like to add some custom.properties which should not be as easy to overwrite by the client. For example you want to provide a default configuration for activemq webconsole, or some other properties. As the framework you can overwrite the config.properties file now and include additional property files used this way but this has the drawback that you, as framework developer, have to upgrade the config.properties with each karaf upgrade. I've two options in minds:

<<edit>>
After some lengthy discussion with Guillaume and JB we come to the following conclusion for this issue:

In addition to providing directly the files which should be used in config.properties in system.properties and config.properties a pattern could be defined in config.properties and system.properties (besides the ""regular"" includes) to allow that client projects/frameworks could easily add additional config files which are included without any additional work",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-04-11 18:39:40.259,,,false,,,,,,,,,,,,,,,,,,68390,,,Wed Apr 11 18:39:40 UTC 2012,,,,,,,"0|i1ciin:",281131,,,,,,,,,,,,,,,,,"11/Apr/12 18:39;cschneider;Moving to 3.1. Feel free to move back if you think this is essential for 3.0",,,,,,,,,,,,,,,,
"Support additional files in ""auto-start"" property",KARAF-1365,12550790,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pergis,pergis,13/Apr/12 08:03,14/Sep/18 08:37,17/Feb/21 11:14,,2.2.6,,,,,karaf,,,,,,1,,,,,,"Currently it would appear that the ""auto-start"" property supports the values ""all"" or ""startup.properties"".

It would be good to reshape the semantics to support multiple file names to this property. The reason for this is to maintain a simple upgrade path of Karaf in a custom distribution, keeping the karaf-provided startup.properties as is, but still be able to add extra custom_startup.properties files containing start level definitions of custom/locally provided bundles.

The suggested improvement:
Make the auto-start property handle a list of file names instead of only the values ""all"" and ""startup.properties"".
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,235654,,,2012-04-13 08:03:40.0,,,,,,,"0|i1cj6n:",281239,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide an active/active store for ActiveMQ using Cellar Hazelcast,KARAF-3015,12717583,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,30/May/14 17:33,13/Sep/18 13:06,17/Feb/21 11:14,,,,,,,cellar,,,,,,0,,,,,,"It would be great to leverage the Cellar/Hazelcast feature in ActiveMQ.

A first idea would be to use a storage adapter using Hazelcast (with a storage backend of course), allowing to have multiple ActiveMQ instances sharing the same local store all sync/distributed with others.

On the other hand, being able to see the different destinations on the cluster (multiple brokers), would be great and implement a kind of transport connector proxy.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,395787,,,2014-05-30 17:33:03.0,,,,,,,"0|i1w53b:",395905,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Karaf benefits page to Karaf website,KARAF-836,12520254,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jgoodyear,jgoodyear,26/Aug/11 14:20,11/May/18 04:09,17/Feb/21 11:14,,,,,,,website,,,,,,1,,,,,,"Add Karaf benefits page to Karaf website.

This should cover why Karaf is the best OSGi runtime, our extra features, highlight our sub projects, and all the other cool things we have going for Karaf :)",,fpapon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-05-11 04:09:51.624,,,false,,,,,,,,,,,,,,,,,,63636,,,Fri May 11 04:09:51 UTC 2018,,,,,,,"0|i1ciy7:",281201,,,,,,,,,,,,,,,,,"11/May/18 04:09;fpapon;Hi, is this issue still needed ?",,,,,,,,,,,,,,,,
maven:password -eb not working,KARAF-5656,13142559,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jozzan,jozzan,05/Mar/18 15:10,14/Mar/18 07:45,17/Feb/21 11:14,,4.2.0.M2,,,,,,,,,,,0,,,,,,"I couldn't find the component, but its located in the maven feature.

Symptom:

The ""maven:password -ep"" command fails with message: ""Master password is not available"",

(even) when you have configured a master password before.

This happens when there is no maven settings.xml configured/present.

So you have to have a settings.xml in your local maven repo (.m2 folder) present before encrypting a password using this command. (well or u have somehow configured etc/org.ops4j.pax.url.mvn.cfg properties accordingly beforehand/manually)

 

steps to reproduce:
 # install fresh Karaf(-4.2.0.M2) instance
 # run:
 ## feature:install maven
 ## maven:password -emp (–persist)
 ## maven:password -ep",fresh Karaf-4.2.0.M2 instance,jozzan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-03-05 15:10:38.0,,,,,,,"0|i3qvhz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document how to use LDAP with Docker,GUACAMOLE-41,12974114,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,JamesJohnston,JamesJohnston,31/May/16 05:39,04/Feb/18 14:53,17/Feb/21 11:14,,,,,,,guacamole-docker,,,,,,0,,,,,,"As part of GUAC-1467 on the Glyptodon JIRA, the Docker image for guacamole was improved to allow specification of LDAP authentication parameters. However, as an end-user, there is no way for me to even know this functionality is available because it is not documented at all. It appears to be undocumented.

I think the README.md at https://github.com/glyptodon/guacamole-docker/blob/master/README.md should be updated with information about how to use LDAP authentication, so that people can use this new feature. :)",,githubbot,JamesJohnston,pasik,vnick,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-464,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-02-04 14:53:46.55,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Feb 04 14:53:46 UTC 2018,,,,,,,"0|i2ypxj:",9223372036854775807,,,,,,,,,,,,,,,,,"04/Feb/18 14:53;vnick;This will change a little bit with the changes with GUACAMOLE-464, since we'll be able to do much of the configuration by passing environment variables.",,,,,,,,,,,,,,,,
Improve bundle:xxx commands to display a message about a needed refresh,KARAF-5442,13111983,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,25/Oct/17 14:27,25/Oct/17 14:28,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-10-25 14:27:41.0,,,,,,,"0|i3losv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Better error while installing non OSGi bundles,KARAF-5421,13108902,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,paolo.antinori,paolo.antinori,12/Oct/17 12:26,12/Oct/17 12:26,17/Feb/21 11:14,,4.1.2,,,,,,,,,,,0,,,,,,"I understand installing a non OSGi bundle is wrong at a logical level, but the error message when doing so, it's fairly cryptic:

{code}
karaf@root()> install mvn:org.keycloak/keycloak-undertow-adapter/3.3.0.CR2
Bundle IDs: 
Error executing command: Error installing bundles:
	Unable to install bundle mvn:org.keycloak/keycloak-undertow-adapter/3.3.0.CR2: org.osgi.framework.BundleException: OSGi R3 bundle not supported
{code}

Does it make sense for the error message to suggest checking it's a valid bundle?

Manifest of the above file is:

{code}
14:21 $ unzip -c  ~/.m2/repository/org/keycloak/keycloak-undertow-adapter/3.3.0.CR2/keycloak-undertow-adapter-3.3.0.CR2.jar **MANIFEST.MF
Archive:  /home/pantinor/.m2/repository/org/keycloak/keycloak-undertow-adapter/3.3.0.CR2/keycloak-undertow-adapter-3.3.0.CR2.jar
  inflating: META-INF/MANIFEST.MF    
Manifest-Version: 1.0
Implementation-Title: Keycloak Undertow Integration
Implementation-Version: 3.3.0.CR2
Java-Version: 1.8.0_144
Built-By: pantinor
Scm-Connection: scm:git:git://github.com/keycloak/keycloak.git/keycloa
 k-undertow-adapter
Specification-Vendor: JBoss by Red Hat
Os-Arch: amd64
Specification-Title: Keycloak Undertow Integration
Implementation-Vendor-Id: org.keycloak
Java-Vendor: Oracle Corporation
Os-Name: Linux
Scm-Url: https://github.com/keycloak/keycloak/tree/master/keycloak-und
 ertow-adapter/
Implementation-Vendor: JBoss by Red Hat
Os-Version: 4.12.14-300.fc26.x86_64
Scm-Revision: 08d5a7a062fdbf8f2b63ca2a6e14e0fce2d3e3f1
Created-By: Apache Maven 3.5.0
Build-Jdk: 1.8.0_144
Specification-Version: 3.3
Implementation-URL: http://keycloak.org/keycloak-undertow-adapter
{code}
",,paolo.antinori,tadayosi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-10-12 12:26:18.0,,,,,,,"0|i3l6qf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow selection of whole words by double-clicking,GUACAMOLE-192,13039110,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,mjumper,mjumper,31/Jan/17 06:30,31/Jan/17 06:30,17/Feb/21 11:14,,,,,,,Terminal,,,,,,2,,,,,,"{panel:bgColor=#FFFFEE}
*The description of this issue was copied from [GUAC-1060|https://glyptodon.org/jira/browse/GUAC-1060], an issue in the JIRA instance used by the Guacamole project prior to its acceptance into the Apache Incubator.*

Comments, attachments, related issues, and history from prior to acceptance *have not been copied* and can be found instead at the original issue.
{panel}

When using SSH or telnet, users should be able to double-click on a word to select it, as in most text-based interfaces, rather than clicking and dragging over the entire word.",,Aye183,mjumper,nico564122,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-1060,,,,,,,,,,9223372036854775807,,,2017-01-31 06:30:03.0,,,,,,,"0|i39elr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure Karaf shutdown,KARAF-4826,13022151,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jeanphi,jeanphi,21/Nov/16 10:25,21/Nov/16 10:25,17/Feb/21 11:14,,4.0.7,,,,,,,,,,,4,,,,,,"At present time Karaf may fail to shutdown due to blocking bundles. The improvement is to provide a way to ensure Karaf to shutdown within a time limit.

I would suggest:
* Having a default global/config timeout - used when bundle 0 is stopped or when user presses Ctrl-D within the Karaf prompt
* Add the ""shutdown"" command an optional parameter which allows to override the default timeout",,fpapon,jeanphi,lichtin,mit_jones,sebas10000,yangfan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-11-21 10:25:53.0,,,,,,,"0|i36kmv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
karaf-maven-plugin creates 'wrap' bundle specs for non-jar dependencies,KARAF-4741,13008586,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,bmargulies,bmargulies,29/Sep/16 16:09,30/Sep/16 06:34,17/Feb/21 11:14,,4.0.6,,,,,,,,,,,0,,,,,,"For reasons of managing bnd default, I have a dependency:

{code}
   <groupId>mygroup</groupId>
   <artifactId>myartifact</artifactId>
   <type>bnd</type>
{code}

this is a text file (a bnd.bnd file, to be exact).

I was bemused to discover:

wrap_file__Users_benson_x_rosapi1.5_assemblies_full-test_target_assembly_system_com_basistech_buildtools_14.1.1_buildtools-14.1.1.bnd

in my bundle list: the maven plugin has asked the wrap feature to convert my text file into an OSGi bundle.

I submit that it would be better if the maven plugin excluded this case.

",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-09-30 05:45:18.043,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Sep 30 06:34:27 UTC 2016,,,,,,,"0|i3493r:",9223372036854775807,,,,,,,,,,,,,,,,,"30/Sep/16 05:45;jbonofre;It's normal: your jar is not a bundle.","30/Sep/16 06:31;gnodet;yes, but it's not a jar either ;-)","30/Sep/16 06:34;gnodet;As a generic workaround to ignore some dependencies, you can put them in the ""provided"" scope and set the ""ignoreScopeProvided"" flag of the plugin to true.",,,,,,,,,,,,,,
Allow disabling registration of StandardManageableRegionDigraph,KARAF-4633,12991616,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,fabianlange,fabianlange,21/Jul/16 21:13,01/Aug/16 16:18,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"As part of my activities to reduce karaf footprint, I was wondering what was triggering the mbean server infrastructure to come up in karaf.
I saw that org.apache.karaf.features.internal.osgi.Activator.doStart() registers the StandardManageableRegionDigraph.

As i could not find any internal interaction with that mbean, could we make it configurable to not register? That would avoid initializing a lot of mbean server stuff.",,fabianlange,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-08-01 16:04:20.208,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Aug 01 16:18:47 UTC 2016,,,,,,,"0|i31cgv:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Aug/16 16:04;gnodet;I'd rather go a bit further.  
Imho the whole digraph service and hooks should be lazily registered / loaded.
I'm not aware of anyone actually using regions atm, so I think it's safe to turn them off by default. 
 * when the features service is loaded, check to see if there are regions, if so, load the service and register everything
 * else, create the empty digraph, but do not register it nor the hooks / mbeans, etc...
  * if a resolution using regions is about to be applied (or if a region is manually created), then register everything before applying the output of the resolution

Thoughts ?
","01/Aug/16 16:18;fabianlange;If thats the case, then thats even better.
I have to admit I have no clue about the whole Digraph thingy. Thats why I did not question it :)
As our use case calls for low memory footprint, I would welcome any change in that direction.",,,,,,,,,,,,,,,
Testing with pax-exam - Allow to specify the name of the real unpack directory,KARAF-4455,12953824,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,davsclaus,davsclaus,27/Mar/16 07:22,27/Mar/16 07:29,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"When testing with pax-exam and you run a bunch of tests its really annoying that it uses random directory names.

Then its hard to track down which of these directory has the karaf container you want to inspect, such as its logs, or try to start it manually etc.

For example
{code}
davsclaus:~/workspace/camel/tests/camel-itest-karaf/target/paxexam/unpack (master)/$ ls
0901403a-88f0-47dd-8853-30d424419b17	3b3dc26e-7186-4c85-a11a-d19e9b24211a	66227858-ce1c-400d-a276-1ddcee2c6f18	caf36185-315c-4fff-ada5-472ea6288160
0f0c5c99-26fa-462f-a394-45212bd10ad9	3d1b8af9-fc10-48f1-83d4-1fb09461d3cc	7e82acca-19db-44dd-8c6b-04c0101df22f	cf9636d0-f44f-4be7-a149-bce392530a46
11bd7128-a93d-4fbd-9def-279dfcc07204	400a761d-71d5-47d7-84c1-203cbbec5b9f	80961ac2-e0d6-4f0f-9460-d7ef077f0c3c	d1daf2ed-b661-4ab5-8950-069f4f7772ad
129eca6c-39cd-46dc-887b-870c666a5bb0	47d86021-c604-4cce-87aa-d5f168e7f329	945aae77-f15a-4445-939c-22df23267d3b	e13af1f7-ebe3-4e9d-89f2-cc2acd8608d0
149374c0-da94-40ac-9073-2c3717479771	4ece834c-7095-4fd3-9f55-e686f217e7ee	99dbab81-7769-406d-8b2f-9de7e516b3e8	eba1a3c8-acc7-4b87-ab75-abccfdf45bb5
1617ee3f-b128-4883-a52a-56c557242b6a	52f82410-cd44-4d8c-abac-d93615586f5b	9b9eded6-4732-473f-9a92-be93f18f1073	f1ba6e7d-52bd-47dd-bbb5-50d026b59f04
2adde2e8-3dcd-4d42-875e-b9ed8fd77227	55d1d84d-be28-4d3e-80ef-b25f8ce74492	acd39400-bf91-465b-8cc2-34119393e92f	f379a0c3-8f9c-457c-8fa9-fffb94662d1d
2e371760-99c2-49c8-94e4-b7a037f9e5bd	57c803e5-219d-4184-a506-6371a409596d	ace1f473-8102-42dc-b8a3-23c1ea153a48	f91a762c-83cf-4bd8-9f40-67cf7dcddff7
3201d6ef-bd16-40c4-af07-d6b651acca39	5f04f917-4f61-482b-99f8-3cdd66e8e9d7	beed3685-4a12-4bca-a9b3-1f2d6a5353be
{code}

So if you could set the unpack directory and its name its using, then you give those names a meaning name, such as the name of your unit test etc.

For example with a new unpackName(""myTestName"") method.
{code}
            KarafDistributionOption.karafDistributionConfiguration()
                    .frameworkUrl(maven().groupId(""org.apache.karaf"").artifactId(""apache-karaf"").type(""tar.gz"").versionAsInProject())
                    .karafVersion(karafVersion)
                    .name(""Apache Karaf"")
                    .useDeployFolder(false).unpackDirectory(new File(""target/paxexam/unpack/"")).unpackName(""myTestName""),
{code}",,davsclaus,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-03-27 07:29:03.842,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Mar 27 07:29:03 UTC 2016,,,,,,,"0|i2v9i7:",9223372036854775807,,,,,,,,,,,,,,,,,"27/Mar/16 07:29;jbonofre;Hi Claus,

it's a Pax Exam feature request (I will create the Jira there) (or you use the very old pax-exam-karaf from 2.3.x).

I have something for https://ops4j1.jira.com/browse/PAXEXAM-614 that might help.",,,,,,,,,,,,,,,,
Add a -i option for bin/client and ssh:ssh command to specify a private key to use,KARAF-1505,12558105,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,25/May/12 14:19,12/Aug/15 04:52,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"bin/client and ssh:ssh by default use a fixed private key that is deployed in the karaf.ssh jar. To use public key auth in a secure way this key needs to be exchanged by the user.

We should have a default location for a private key file that is used instead of the built in private key if it exists. Additionally the -i option should allow to specify a path to an alternative private key file.

The default location for the privat key should be ~/.sshkaraf/id_dsa and etc/id_dsa

",,cschneider,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-07-09 10:46:43.61,,,false,,,,,,,,,,,,,,,,,,308525,,,Wed May 27 20:10:28 UTC 2015,,,,,,,"0|i1cjfb:",281278,,,,,,,,,,,,,,,,,"09/Jul/12 10:46;cschneider;Moving to 3.1.0 as you can use unix ssh or putty in production. So this is not essential for Karaf 3.0.0","27/May/15 20:10;jbonofre;We already added:

{code}
  -k [keyFile]    specify the private keyFile location when using key login, need have BouncyCastle registered as security provider using this flag
{code}

However, a default location (like .karafssh/id_dsa) is good idea.",,,,,,,,,,,,,,,
Improve diagnosing of unresolved optional requirements,KARAF-3725,12829540,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,13/May/15 12:15,12/Aug/15 04:35,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"KARAF-3722 is a good example of the problem.
Diagnosing that the optional requirement is not resolved is the first problem, then understanding why is another big problem.

We need a way to inform the user when / why optional requirements are not resolved.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-05-13 12:15:34.0,,,,,,,"0|i2eofr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename some config files to more meaningful names,KARAF-364,12494989,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,07/Jan/11 21:22,26/May/15 08:25,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"org.apache.karaf.log.cfg could be renamed to org.apache.karaf.shell.log.cfg or org.apache.karaf.commands.log.cfg
org.apache.karaf.shell.cfg could be renamed to org.apache.karaf.ssh.cfg or org.apache.karaf.shell.remote.cfg

Maybe there are some others too...

Set for 3.0.0 because this will break backward compatibility...

btw, first issue created for 3.0.0 :D",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,68463,,,2011-01-07 21:22:54.0,,,,,,,"0|i1cifr:",281118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Logback appender,KARAF-2238,12637177,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,kdong,kdong,15/Mar/13 10:46,20/Jun/13 19:48,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"Can we have logback as the default logging implementation of pax-logging-service and have a way to load custom appender?

We want to create a log appender with custom threading control and found that we can't with log4j 1.x (https://issues.apache.org/jira/browse/LOG4J2-3). Karaf's pax-logging-service uses (slf4j+log4j), so we replaced pax-logging-logback. But we find it difficult to do because pax-logging-logback embeds Logback jars inside the bundle without exporting packages and faced with osgi class loading issues. We can do it by defining custom appender fragment for pax-logging-logback host at startup.properties and set the org.ops4j.pax.logging.cfg for logback configuration. But we find that is not convenient for development for having to copy updated Jars to <kavaf_home>/system folder in every iteration.

We are wondering if there is better way dynamically add the appender when we install our bundle on a standard Karaf distribution?",,achim_nierbeck,gcollins,jbonofre,kdong,mitaes,neoramon,powerpk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2013-03-15 11:10:53.8,,,false,,,,,,,,,,,,,,,,,,317669,,,Thu Jun 20 19:48:55 UTC 2013,,,,,,,"0|i1itbb:",318010,,,,,,,,,,,,,,,,,"15/Mar/13 11:10;gnodet;Did you experiment with paxlogging ? The threading issues have been fixed in the custom version of log4j which is embedded.

For custom appenders, paxlogging has a dedicated api you can use so that it's independant of the backend being log4j or logback.","15/Mar/13 11:44;powerpk;We didn't experiment with pax logging. If log4j is fixed in paxlogging, can we just extend org.ops4j.pax.logging.spi.PaxAppender in a fragment to add our custom thread safe appender? ","15/Mar/13 11:59;achim_nierbeck;yep, I wrote a [blog|http://notizblog.nierbeck.de/2011/08/adding-custom-log-appender-to-pax-logging/] about it. ","15/Mar/13 12:14;gnodet;If you use PaxAppender, you can deploy it as an OSGi service instead of using fragments.  That's how it's done in Karaf, and the paxlogging api has been recently enhanced to also support custom layouts, filters and error handlers.","22/May/13 06:53;jbonofre;I discussed with Guillaume about that.

1/ thanks for Pax Logging 1.7.0 (and the support of OSGi services ""registration""), it's possible to create a logback appender that implement an interface provided by pax-logging, and register it as a service. This part should be documented.
2/ on the other hand, an interesting improvement can be added to pax-logging: a wrapper that implements the pax-logging interface using an existing appender.","20/Jun/13 19:48;gcollins;PaxAppender does not get passed markers, does it (markers are only supported by logback and log4j 2)?",,,,,,,,,,,
When deploying new realms the old ones can still be active for a while,KARAF-1543,12560488,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,13/Jun/12 11:50,02/May/13 02:29,17/Feb/21 11:14,,2.2.7,2.3.0,3.0.0,,,,,,,,,0,,,,,,"When we deploy new realms for security, the way is to expose a service using the jaas namespace handler with a higher ranking.
However, this is not really secured, especially at boot time, where the bundles are not all loaded.
One problem is that the login modules provided reside in the same bundles as the realm configuration, so we need to externalize the configuration to a single file in the etc/ folder imho.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,308516,,,2012-06-13 11:50:45.0,,,,,,,"0|i1cjdb:",281269,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow feature-maven-plugin:add-features-to-repo to resolve dependencies without specifying the directory to copy to,KARAF-1495,12556735,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,szhemzhitsky,szhemzhitsky,21/May/12 19:20,21/May/12 19:20,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"Allow feature-maven-plugin:add-features-to-repo to resolve dependencies without specifying the directory to copy to.

For example

{code}
<plugin>
    <groupId>org.apache.karaf.tooling</groupId>
    <artifactId>features-maven-plugin</artifactId>
    <version>${karaf.version}</version>
    <executions>
        <execution>
            <id>add-features-to-repo</id>
            <phase>generate-resources</phase>
            <goals>
                <goal>add-features-to-repo</goal>
            </goals>
            <configuration>
                <descriptors>
                    <descriptor>mvn:org.apache.camel.karaf/apache-camel/${camel.version}/xml/features</descriptor>
                </descriptors>
                <features>
                    <feature>camel-blueprint</feature>
                </features>
                <addTransitiveFeatures>true</addTransitiveFeatures>
                <failOnArtifactResolutionError>false</failOnArtifactResolutionError>
                <includeMvnBasedDescriptors>true</includeMvnBasedDescriptors>
                <resolveOnly>true</resolveOnly>            
            </configuration>
        </execution>
    </executions>
</plugin>
{code}

The *<resolveOnly>true</resolveOnly>* will tell the feature-maven-plugin to
resolve (like http://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html) the specified features without copying them into the target directory.

It can be rather useful when doing integration testing with karaf testing framework. 
As a rule a feature has more dependencies than maven dependency and embedded karaf always connects to Internet do resolve dependencies of the specified feature, which are not listed in the pom.xml",,szhemzhitsky,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,258231,,,2012-05-21 19:20:17.0,,,,,,,"0|i0kpkf:",118959,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Misc choose URL improvements,KARAF-1329,12549743,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,iocanel,iocanel,05/Apr/12 15:53,05/Apr/12 15:59,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"1. openejb-core fails to properly install. We need to identify a working version range and use that instead.
2. activemq: It does work, but the activemq commands complain about the jmx url. We might want to fix that at activemq and narrow the version range down.
3. jclouds url was outdated - This is already fixed.

As it will be really hard to main this, maybe we need add some functionality that will pull the repo definitions from the internet, were we can apply post release updates.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,234734,,,2012-04-05 15:53:02.0,,,,,,,"0|i1cj7r:",281244,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow completers to be statically defined in the action metadata by specifying the classname on the annotations for Option / Argument,KARAF-194,12473720,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,09/Sep/10 19:56,28/Nov/11 15:58,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-11-25 09:33:57.672,,,false,,,,,,,,,,,,,,,,,,146520,,,Mon Nov 28 15:58:06 UTC 2011,,,,,,,"0|i1cicn:",281104,,,,,,,,,,,,,,,,,"25/Nov/11 09:33;iocanel;Is this still valid? Is this something that we want to do?
","28/Nov/11 15:58;gnodet;The use would of course be more limited as you could not parameterize the completer in any way, but it might be interesting, especially when using the shell outside osgi (like bin/shell).",,,,,,,,,,,,,,,
add an osgi/imports and osgi/exports to show a pretty-printed output of the imports/exports packages for a bundle,KARAF-55,12429723,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jstrachan,jstrachan,07/Jul/09 15:50,23/Dec/10 13:14,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"e.g. 

{code}
> osgi/imports 22

com.acme.bar=....
com.acme.bar.something =...
com.acme.foo =...
{code}

So its really easy to see the scope of import/exports in a nice sorted display",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2009-07-07 16:44:45.967,,,false,,,,,,,,,,,,,,,,,,146503,,,Thu Dec 23 13:14:00 UTC 2010,,,,,,,"0|i1ci9j:",281090,,,,,,,,,,,,,,,,,"07/Jul/09 16:44;gnodet;Have you tried ""packages/imports 22"" ?","10/Jul/09 14:34;jstrachan;the packages/imports is great!

However I'd prefer an option to list the output in java package order","21/Jan/10 17:41;ccustine;I'm going to add a variety of sorting options.","23/Dec/10 13:14;gnodet;I think sorting the imports / exports by default would be nice too.",,,,,,,,,,,,,
[testing] Provide platform definitions so that the right frameworks are used when testing,KARAF-131,12469719,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,20/Jul/10 14:33,20/Jul/10 14:33,17/Feb/21 11:14,,2.1.0,,,,,,,,,,,0,,,,,,"Using http://blog.knowhowlab.org/2010/06/pax-runnerexam-felix-300-gogo-support.html and

  rawPaxRunnerOption(""--definitionURL"", ""http://osgilab.googlecode.com/svn/trunk/org.osgilab.tips/pax-platforms/platform-felix-3.0.0.xml"")  

We should build those platforms definitions using a filtered resource so that we're sure we use the exact same version of felix / equinox than the one we embed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,146515,,,2010-07-20 14:33:58.0,,,,,,,"0|i1cibb:",281098,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve the web demos to include the console through the http servlet bridge,KARAF-49,12433317,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,18/Aug/09 09:39,28/Jun/10 09:57,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,See http://www.eclipse.org/equinox/server/http_in_container.php,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,146499,,,2009-08-18 09:39:58.0,,,,,,,"0|i1cia7:",281093,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
features XML file for the karaf components required to be able to use features within an osgi container (e.g. to add the karaf pieces to felix/equinox inside pax-exam),KARAF-46,12430192,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jstrachan,jstrachan,13/Jul/09 10:17,28/Jun/10 09:57,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"I'd like to be able to use the Karaf FeaturesService to deploy features into OSGi - from within a vanilla felix/equinox/knoplerfish container - via Pax-Exam; so having a features XML for the core of Karaf would be great.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2010-01-21 17:44:54.334,,,false,,,,,,,,,,,,,,,,,,146496,,,Thu Jan 21 17:44:54 UTC 2010,,,,,,,"0|i1ci9z:",281092,,,,,,,,,,,,,,,,,"21/Jan/10 17:44;ccustine;I'm working on a native Pax-Exam profile definition to accomplish the exact same thing.  This will also allow us to specify properties, and other Pax-Exam config items to exactly duplicate a Karaf container.  I'll leave this issue open for now and link to the new one when I add it.",,,,,,,,,,,,,,,,
Add OPENID_MAX_TOKEN_VALIDITY to Guacamole-Client Docker start.sh,GUACAMOLE-1284,13357687,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Tom Schoonjans,Tom Schoonjans,09/Feb/21 06:46,09/Feb/21 17:43,17/Feb/21 11:14,,,,,1.4.0,,Documentation,guacamole-docker,,,,,0,,,,,,"Due to the settings of the OIDC provider, I was forced to set openid-max-token-validity to 24 hours. This was not supported by the start.sh script so I was forced to create a build myself. I think it would be justified for this small patch to go into the script though.",,Tom Schoonjans,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-02-09 06:46:50.0,,,,,,,"0|z0nin4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Display the password requirements in change form,GUACAMOLE-1273,13355911,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,sporeno,sporeno,01/Feb/21 12:24,01/Feb/21 12:24,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"Dear all

I would be a nice feature when the user is requested to change his password, the password requirements from the config file are shown in the form for changing the password during the logon process.

 BG Stefan",,sporeno,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-02-01 12:24:42.0,,,,,,,"0|z0n7oo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When installing features, order bundles using the wiring",KARAF-4825,13021841,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,gnodet,gnodet,18/Nov/16 20:28,21/Jan/21 15:47,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"The idea would be that ""used"" bundles are installed before ""using"" bundles, sort-of.",,jwcarman,ryeats,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-11-22 14:31:21.356,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Nov 22 19:55:20 UTC 2016,,,,,,,"0|i36ipz:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Nov/16 20:29;gnodet;See https://github.com/gnodet/karaf/tree/KARAF-4825","18/Nov/16 20:32;gnodet;The output with the default distribution is the following:

{code}
karaf@root()> la -l                                                                                                                                  21:22:18
START LEVEL 100 , List Threshold: 0
ID │ State    │ Lvl │ Version        │ Location
───┼──────────┼─────┼────────────────┼────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 0 │ Active   │   0 │ 5.6.1          │ System Bundle
 1 │ Resolved │   1 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.features/org.apache.karaf.features.extension/4.1.0-SNAPSHOT
 2 │ Active   │   5 │ 1.1.2          │ mvn:org.apache.felix/org.apache.felix.metatype/1.1.2
 3 │ Active   │   5 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.services/org.apache.karaf.services.eventadmin/4.1.0-SNAPSHOT
 4 │ Active   │   5 │ 2.5.1          │ mvn:org.ops4j.pax.url/pax-url-aether/2.5.1
 5 │ Active   │   8 │ 1.9.1          │ mvn:org.ops4j.pax.logging/pax-logging-api/1.9.1
 6 │ Active   │   8 │ 1.9.1          │ mvn:org.ops4j.pax.logging/pax-logging-log4j2/1.9.1
 7 │ Active   │  10 │ 1.8.12         │ mvn:org.apache.felix/org.apache.felix.configadmin/1.8.12
 8 │ Active   │  11 │ 3.5.6          │ mvn:org.apache.felix/org.apache.felix.fileinstall/3.5.6
 9 │ Active   │  15 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.features/org.apache.karaf.features.core/4.1.0-SNAPSHOT
10 │ Active   │  20 │ 1.0.1          │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.api/1.0.1
11 │ Active   │  20 │ 1.1.3          │ mvn:org.apache.aries/org.apache.aries.util/1.1.3
12 │ Active   │  20 │ 1.0.1          │ mvn:org.apache.aries.proxy/org.apache.aries.proxy.api/1.0.1
13 │ Active   │  20 │ 1.7.1          │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.core/1.7.1
14 │ Active   │  20 │ 1.0.9          │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.cm/1.0.9
15 │ Resolved │  20 │ 1.0.0          │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.core.compatibility/1.0.0
16 │ Active   │  30 │ 1.1.5          │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.api/1.1.5
17 │ Active   │  30 │ 1.1.5          │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.blueprint.api/1.1.5
18 │ Active   │  30 │ 1.1.5          │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.blueprint.core/1.1.5
19 │ Active   │  30 │ 1.1.7          │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.core/1.1.7
20 │ Active   │  30 │ 1.1.5          │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.whiteboard/1.1.5
21 │ Active   │  20 │ 1.0.6.SNAPSHOT │ mvn:org.apache.aries.proxy/org.apache.aries.proxy.impl/1.0.6-SNAPSHOT
22 │ Active   │  24 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.blueprint/4.1.0-SNAPSHOT
23 │ Active   │  26 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.features/4.1.0-SNAPSHOT
24 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.diagnostic/org.apache.karaf.diagnostic.core/4.1.0-SNAPSHOT
25 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.features/org.apache.karaf.features.command/4.1.0-SNAPSHOT
26 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.jaas/org.apache.karaf.jaas.config/4.1.0-SNAPSHOT
27 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.jaas.blueprint/org.apache.karaf.jaas.blueprint.config/4.1.0-SNAPSHOT
28 │ Active   │  30 │ 1.14.0         │ mvn:org.fusesource.jansi/jansi/1.14
29 │ Active   │  30 │ 3.0.1          │ mvn:org.jline/jline/3.0.1
30 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.core/4.1.0-SNAPSHOT
31 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.bundle/org.apache.karaf.bundle.core/4.1.0-SNAPSHOT
32 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.bundle/org.apache.karaf.bundle.blueprintstate/4.1.0-SNAPSHOT
33 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.config/org.apache.karaf.config.core/4.1.0-SNAPSHOT
34 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.instance/org.apache.karaf.instance.core/4.1.0-SNAPSHOT
35 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.kar/org.apache.karaf.kar.core/4.1.0-SNAPSHOT
36 │ Active   │  24 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.kar/4.1.0-SNAPSHOT
37 │ Active   │  24 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.wrap/4.1.0-SNAPSHOT
38 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.jaas/org.apache.karaf.jaas.modules/4.1.0-SNAPSHOT
39 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.jaas/org.apache.karaf.jaas.command/4.1.0-SNAPSHOT
40 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.log/org.apache.karaf.log.core/4.1.0-SNAPSHOT
41 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.management/org.apache.karaf.management.server/4.1.0-SNAPSHOT
42 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.package/org.apache.karaf.package.core/4.1.0-SNAPSHOT
43 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.service/org.apache.karaf.service.core/4.1.0-SNAPSHOT
44 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.commands/4.1.0-SNAPSHOT
45 │ Resolved │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.console/4.1.0-SNAPSHOT
46 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.ssh/4.1.0-SNAPSHOT
47 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.table/4.1.0-SNAPSHOT
48 │ Active   │  30 │ 4.1.0.SNAPSHOT │ mvn:org.apache.karaf.system/org.apache.karaf.system.core/4.1.0-SNAPSHOT
49 │ Active   │  30 │ 0.3.11.1       │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.not-yet-commons-ssl/0.3.11_1
50 │ Active   │  30 │ 1.2.0          │ mvn:org.apache.sshd/sshd-core/1.2.0
51 │ Active   │  20 │ 6.0.0.ALPHA    │ mvn:org.ow2.asm/asm-all/6.0_ALPHA
52 │ Active   │   5 │ 2.5.1          │ mvn:org.ops4j.pax.url/pax-url-wrap/2.5.1/jar/uber
{code}","22/Nov/16 14:31;jwcarman;What happens when you install Microbule? ;)

repo-add mvn:org.microbule/microbule-features/0.1.0/xml/features
feature:install microbule
","22/Nov/16 16:36;gnodet;You should add a dependency on the aries-blueprint feature so that it can be installed on karaf minimal distribution.

Here's the output, which isn't very satisfying.
I think instead of considering bundle wiring, we should consider feature wiring and use it to order their contained bundles instead.

{code}
  0 │ Active   │   0 │ 5.6.1            │ System Bundle
  1 │ Resolved │   1 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.features/org.apache.karaf.features.extension/4.1.0-SNAPSHOT
  2 │ Active   │   5 │ 2.5.1            │ mvn:org.ops4j.pax.url/pax-url-aether/2.5.1
  3 │ Active   │   8 │ 1.9.1            │ mvn:org.ops4j.pax.logging/pax-logging-api/1.9.1
  4 │ Active   │   8 │ 1.9.1            │ mvn:org.ops4j.pax.logging/pax-logging-log4j2/1.9.1
  5 │ Active   │  10 │ 1.8.12           │ mvn:org.apache.felix/org.apache.felix.configadmin/1.8.12
  6 │ Active   │  11 │ 3.5.6            │ mvn:org.apache.felix/org.apache.felix.fileinstall/3.5.6
  7 │ Active   │  15 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.features/org.apache.karaf.features.core/4.1.0-SNAPSHOT
  8 │ Active   │  30 │ 1.1.5            │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.api/1.1.5
  9 │ Active   │  30 │ 1.1.5            │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.whiteboard/1.1.5
 10 │ Active   │  20 │ 1.1.3            │ mvn:org.apache.aries/org.apache.aries.util/1.1.3
 11 │ Active   │  30 │ 1.1.7            │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.core/1.1.7
 12 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.config/org.apache.karaf.config.core/4.1.0-SNAPSHOT
 13 │ Active   │  26 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.features/4.1.0-SNAPSHOT
 14 │ Active   │  30 │ 3.0.1            │ mvn:org.jline/jline/3.0.1
 15 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.diagnostic/org.apache.karaf.diagnostic.core/4.1.0-SNAPSHOT
 16 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.features/org.apache.karaf.features.command/4.1.0-SNAPSHOT
 17 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.jaas/org.apache.karaf.jaas.config/4.1.0-SNAPSHOT
 18 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.jaas/org.apache.karaf.jaas.modules/4.1.0-SNAPSHOT
 19 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.management/org.apache.karaf.management.server/4.1.0-SNAPSHOT
 20 │ Active   │  30 │ 1.14.0           │ mvn:org.fusesource.jansi/jansi/1.14
 21 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.core/4.1.0-SNAPSHOT
 22 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.bundle/org.apache.karaf.bundle.core/4.1.0-SNAPSHOT
 23 │ Active   │  24 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.kar/4.1.0-SNAPSHOT
 24 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.instance/org.apache.karaf.instance.core/4.1.0-SNAPSHOT
 25 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.jaas/org.apache.karaf.jaas.command/4.1.0-SNAPSHOT
 26 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.kar/org.apache.karaf.kar.core/4.1.0-SNAPSHOT
 27 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.log/org.apache.karaf.log.core/4.1.0-SNAPSHOT
 28 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.package/org.apache.karaf.package.core/4.1.0-SNAPSHOT
 29 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.service/org.apache.karaf.service.core/4.1.0-SNAPSHOT
 30 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.commands/4.1.0-SNAPSHOT
 31 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.system/org.apache.karaf.system.core/4.1.0-SNAPSHOT
 32 │ Active   │  30 │ 0.3.11.1         │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.not-yet-commons-ssl/0.3.11_1
 33 │ Active   │  30 │ 1.2.0            │ mvn:org.apache.sshd/sshd-core/1.2.0
 34 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.shell/org.apache.karaf.shell.ssh/4.1.0-SNAPSHOT
 35 │ Active   │  80 │ 1.3.1            │ mvn:com.fasterxml/classmate/1.3.1
 36 │ Active   │  35 │ 2.6.6            │ mvn:com.fasterxml.jackson.core/jackson-annotations/2.6.6
 37 │ Active   │  35 │ 2.6.6            │ mvn:com.fasterxml.jackson.core/jackson-core/2.6.6
 38 │ Active   │  35 │ 2.6.6            │ mvn:com.fasterxml.jackson.core/jackson-databind/2.6.6
 39 │ Active   │  35 │ 2.6.6            │ mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.6.6
 40 │ Active   │  80 │ 2.7.0            │ mvn:com.google.code.gson/gson/2.7
 41 │ Active   │  35 │ 1.5.10           │ mvn:io.swagger/swagger-models/1.5.10
 42 │ Active   │  30 │ 3.19.0.GA        │ mvn:org.javassist/javassist/3.19.0-GA
 43 │ Active   │  10 │ 1.2              │ mvn:javax.annotation/javax.annotation-api/1.2
 44 │ Active   │  35 │ 2.6.6            │ mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/2.6.6
 45 │ Active   │  35 │ 2.6.6            │ mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/2.6.6
 46 │ Active   │  80 │ 18.0.0           │ mvn:com.google.guava/guava/18.0
 47 │ Active   │  80 │ 1.1.0            │ mvn:com.savoirtech.eos/eos-core/1.1.0
 48 │ Active   │  35 │ 1.5.10           │ mvn:io.swagger/swagger-annotations/1.5.10
 49 │ Active   │  35 │ 1.5.10           │ mvn:io.swagger/swagger-jaxrs/1.5.10
 50 │ Active   │  80 │ 2.2.5            │ mvn:javax.el/javax.el-api/2.2.5
 51 │ Active   │  10 │ 1.4.4            │ mvn:javax.mail/mail/1.4.4
 52 │ Active   │  30 │ 3.1.0            │ mvn:javax.servlet/javax.servlet-api/3.1.0
 53 │ Active   │  80 │ 1.1.0.Final      │ mvn:javax.validation/validation-api/1.1.0.Final
 54 │ Active   │  30 │ 1.1              │ mvn:javax.websocket/javax.websocket-api/1.1
 55 │ Active   │  20 │ 1.7.1            │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.core/1.7.1
 56 │ Active   │  20 │ 1.0.9            │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.cm/1.0.9
 57 │ Resolved │  20 │ 1.0.0            │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.core.compatibility/1.0.0
 58 │ Active   │  30 │ 1.1.5            │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.blueprint.api/1.1.5
 59 │ Active   │  30 │ 1.1.5            │ mvn:org.apache.aries.jmx/org.apache.aries.jmx.blueprint.core/1.1.5
 60 │ Active   │  20 │ 1.0.6.SNAPSHOT   │ mvn:org.apache.aries.proxy/org.apache.aries.proxy.impl/1.0.6-SNAPSHOT
 61 │ Active   │  30 │ 1.0.1            │ mvn:org.apache.aries.spifly/org.apache.aries.spifly.dynamic.bundle/1.0.1
 62 │ Active   │  80 │ 3.5.0            │ mvn:org.apache.commons/commons-lang3/3.5
 63 │ Active   │  35 │ 1.5.10           │ mvn:io.swagger/swagger-core/1.5.10
 64 │ Active   │  20 │ 1.0.1            │ mvn:org.apache.aries.blueprint/org.apache.aries.blueprint.api/1.0.1
 65 │ Active   │  20 │ 1.0.1            │ mvn:org.apache.aries.proxy/org.apache.aries.proxy.api/1.0.1
 66 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-core/3.1.8
 67 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-transports-http/3.1.8
 68 │ Active   │   9 │ 1.1              │ mvn:org.apache.geronimo.specs/geronimo-osgi-registry/1.1
 69 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.bundle/org.apache.karaf.bundle.blueprintstate/4.1.0-SNAPSHOT
 70 │ Active   │  24 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.deployer/org.apache.karaf.deployer.blueprint/4.1.0-SNAPSHOT
 71 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.jaas.blueprint/org.apache.karaf.jaas.blueprint.config/4.1.0-SNAPSHOT
 72 │ Active   │  30 │ 1.2.13.1         │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.fastinfoset/1.2.13_1
 73 │ Active   │  20 │ 2.2.11.1         │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxb-impl/2.2.11_1
 74 │ Active   │  30 │ 0.9.10.3         │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.reflections/0.9.10_3
 75 │ Active   │  25 │ 1.2.0.5          │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xmlresolver/1.2_5
 76 │ Active   │  10 │ 2.6.0            │ mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jsr339-api-2.0.1/2.6.0
 77 │ Active   │  20 │ 4.1.0            │ mvn:org.apache.xbean/xbean-bundleutils/4.1
 78 │ Active   │  20 │ 4.1.0            │ mvn:org.apache.xbean/xbean-finder/4.1
 79 │ Active   │  30 │ 1.3.8            │ mvn:org.codehaus.jettison/jettison/1.3.8
 80 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-continuation/9.2.19.v20160908
 81 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-util/9.2.19.v20160908
 82 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-http/9.2.19.v20160908
 83 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-io/9.2.19.v20160908
 84 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-security/9.2.19.v20160908
 85 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/websocket-common/9.2.19.v20160908
 86 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/websocket-servlet/9.2.19.v20160908
 87 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-frontend-jaxrs/3.1.8
 88 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-rs-client/3.1.8
 89 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-rs-service-description/3.1.8
 90 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-rs-service-description-swagger/3.1.8
 91 │ Active   │  30 │ 1.1.1            │ mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1
 92 │ Active   │  20 │ 2.2.11.1         │ mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxb-xjc/2.2.11_1
 93 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-client/9.2.19.v20160908
 94 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-jmx/9.2.19.v20160908
 95 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-jaas/9.2.19.v20160908
 96 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-jaspi/9.2.19.v20160908
 97 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-jndi/9.2.19.v20160908
 98 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-rewrite/9.2.19.v20160908
 99 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-servlet/9.2.19.v20160908
100 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-servlets/9.2.19.v20160908
101 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-util-ajax/9.2.19.v20160908
102 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-webapp/9.2.19.v20160908
103 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-plus/9.2.19.v20160908
104 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/websocket-api/9.2.19.v20160908
105 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/websocket-client/9.2.19.v20160908
106 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/javax-websocket-client-impl/9.2.19.v20160908
107 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/websocket-server/9.2.19.v20160908
108 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty.websocket/javax-websocket-server-impl/9.2.19.v20160908
109 │ Active   │  80 │ 2.2.6            │ mvn:org.glassfish.web/javax.el/2.2.6
110 │ Active   │  80 │ 3.3.0.Final      │ mvn:org.jboss.logging/jboss-logging/3.3.0.Final
111 │ Active   │  80 │ 5.2.4.Final      │ mvn:org.hibernate/hibernate-validator/5.2.4.Final
112 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-api/0.1.0
113 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-core/0.1.0
114 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-circuitbreaker/0.1.0
115 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-cors/0.1.0
116 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-requestlog/0.1.0
117 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-tracer/0.1.0
118 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-errormap-api/0.1.0
119 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-errormap-spi/0.1.0
120 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-spi/0.1.0
121 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-gson/0.1.0
122 │ Active   │  20 │ 5.0.2            │ mvn:org.ow2.asm/asm-all/5.0.2
123 │ Active   │  20 │ 3.1.4            │ mvn:org.codehaus.woodstox/stax2-api/3.1.4
124 │ Active   │  20 │ 4.4.1            │ mvn:org.codehaus.woodstox/woodstox-core-asl/4.4.1
125 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-management/3.1.8
126 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-rs-extension-providers/3.1.8
127 │ Active   │  40 │ 3.1.8            │ mvn:org.apache.cxf/cxf-rt-rs-extension-search/3.1.8
128 │ Active   │  30 │ 1.1              │ mvn:org.apache.geronimo.specs/geronimo-jaspic_1.0_spec/1.1
129 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-server/9.2.19.v20160908
130 │ Active   │  30 │ 9.2.19.v20160908 │ mvn:org.eclipse.jetty/jetty-xml/9.2.19.v20160908
131 │ Active   │  30 │ 4.1.0.SNAPSHOT   │ mvn:org.apache.karaf.http/org.apache.karaf.http.core/4.1.0-SNAPSHOT
132 │ Active   │  30 │ 2.2.1            │ mvn:org.apache.ws.xmlschema/xmlschema-core/2.2.1
133 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-annotation/0.1.0
134 │ Active   │  30 │ 4.4.0            │ mvn:org.ops4j.pax.web/pax-web-api/4.4.0
135 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-cache/0.1.0
136 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-validation/0.1.0
137 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-errormap-impl/0.1.0
138 │ Active   │  30 │ 4.4.0            │ mvn:org.ops4j.pax.web/pax-web-jetty/4.4.0
139 │ Active   │  30 │ 4.4.0            │ mvn:org.ops4j.pax.web/pax-web-runtime/4.4.0
140 │ Active   │  30 │ 4.4.0            │ mvn:org.ops4j.pax.web/pax-web-spi/4.4.0
141 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-decorator-errormap/0.1.0
142 │ Active   │  80 │ 0.1.0            │ mvn:org.microbule/microbule-osgi/0.1.0
{code}","22/Nov/16 19:55;jwcarman;It's interesting that the microbule-spi module is installed later than all those ""decorator"" modules.  All the decorators implement an interface from ""spi"".  ",,,,,,,,,,,,
Update docker containers,GUACAMOLE-1226,13343565,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,zybster,zybster,01/Dec/20 13:34,19/Jan/21 17:01,17/Feb/21 11:14,,1.2.0,,,,,guacamole-docker,,,,,,0,,,,,,"Most recent offical docker containers of guacamole-server are not able to handle ECDSA & ED25519 SSH Keys to connect to hosts.

Reason for this is that libssh2-1 is version Version: 1.8.0-2.1 but needs to be version 1.9.0 to support both.

Version 1.9. also is not available in the debian repositories.

It's possible to build the new version from git repository.

[https://libssh2.org/changes.html#1.9.0]

Also in Ubuntu there is no recent version available.

Alpine as well as Arch Linux provide packages - however they do not have libtelnet in their repositories.

Is there any chance to build up-to-date docker containers including Guacamole 1.3 and libssh2-1.9.0 ?

 ",,vnick,zybster,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-01 14:53:12.855,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Jan 19 17:01:54 UTC 2021,,,,,,,"0|z0l3dc:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Dec/20 14:53;vnick;{quote}
It's possible to build the new version from git repository.
{quote}

We have intentionally avoided custom-building packages to support these containers, instead relying upon the packages in the repositories. Building custom code (other than our own) adds a level of support that I don't know that we want to be responsible for, so I hesitate to do this.","01/Dec/20 15:15;zybster;Dear Nick. thanks for your quick reply - how about changing the base image to cent_os ?

There is libssh in version 1.9.0 as well as libtelnet available ?

Maybe it's also possible to contact the debian maintainers to update the package in debian. Maybe they are not really aware of the version even it's already out released for 1,5 years. I'm not very experienced in those things - just thinking about ways to get this fixed.

Since ECDSA and ED25519 SSH Keys are the new standard it would be fantastic if it would be possbile to use the with the guacamole docker release.","19/Jan/21 17:01;vnick;[~zybster]: 
We actually recently went from CentOS to Debian due to the FreeRDP libraries present in one versus the other, so I'm not sure we want to change back at this point. That said, in the 1.3.0 release we did change to a slightly different Debian base image and added the Debian backports repository in order to get access to more recent libraries (again, primarily centered around FreeRDP), so it's possible that we've also picked up newer versions of libssh2 and libtelnet. You might give the 1.3.0 Docker images a shot and see if you have anything more recent, there.",,,,,,,,,,,,,,
Rearrange How Logouts are Handled,GUACAMOLE-680,13204700,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,vnick,vnick,16/Dec/18 00:09,18/Jan/21 13:32,17/Feb/21 11:14,,,,,1.4.0,,guacamole-client,,,,,,9,,,,,,"Rearrange how the AngularJS application handles logouts, firing a warning event before the logout occurs and then one after the logout (token deletion) has happened.  This is to prep for changes that will allow Single-Sign Out/Single Log-out to happen correctly.",,Brett Dickson,brodymac95,CampinCarl,igor-sweet,jpellman,luketainton,Martti,michaelmiklis,vnick,xia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-05-07 15:59:00.739,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu May 07 16:26:16 UTC 2020,,,,,,,"0|u000l4:",9223372036854775807,,,,,,,,,,,,,,,,,"16/Dec/18 00:10;vnick;dev@ mailing list discussion on issue.","07/May/20 15:59;jpellman;Hi,

I was curious about the current state of this issue.  I recently deployed a Guacamole test server using CAS, and, while definitely not a dealbreaker (this is an amazing piece of software and I'm extremely appreciative all of the voluntary effort that's gone into it), it's a bit inelegant that the sign out button doesn't work as expected.  The linked CAS-specific issue (GUACAMOLE-361) indicates that this issue is blocking its resolution.

I believe I found the relevant dev@ discussion [here|https://mail-archives.apache.org/mod_mbox/guacamole-dev/201812.mbox/%3Cgit-pr-346-guacamole-client%40git.apache.org%3E], and a few other posts eventually led me to the GitHub pull request [here|https://github.com/apache/guacamole-client/pull/346].  It looks like the last activity was this past December and involved a bit of code review.  Does it look like this will require more code review, or does it look like a logout-handling fix is ready to be merged into master?
","07/May/20 16:26;vnick;[~jpellman]: Thanks for the kind words.  I believe the Pull Request needs a little more work prior to merge - I think Mike had suggested a couple of changes to it that I need to complete prior to another review and merge.  Focus has been on getting 1.2.0 ready to release, so some of these have fallen by the wayside in that effort.",,,,,,,,,,,,,,
Implement Single Logout on OpenID Extension,GUACAMOLE-519,13143043,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kevinmsrs,kevinmsrs,07/Mar/18 00:05,18/Jan/21 11:42,17/Feb/21 11:14,,,,,,,guacamole-auth-openid,,,,,,14,,,,,,"Currently when using OpenID Connect for authentication, when a user uses the logout link, they get re-authenticated and logged back in.

Would like to override the logout to send an SLO and/or redirect user to a different site.","Ubuntu 16.04
Tomcat 8",ashok.mohanty,CampinCarl,eikoe,FoxyAshea,Ghost_Knight,haeringd,igor-sweet,kevinmsrs,luketainton,Martti,mechanix,pasik,Schoinas,sreeranj4droid,swhitman,vnick,,,,,,,,,,,,GUACAMOLE-361,,GUACAMOLE-680,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-07-24 03:40:21.534,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Nov 10 16:41:46 UTC 2020,,,,,,,"0|i3qyhj:",9223372036854775807,,,,,,,,,,,,,,,,,"24/Jul/18 03:40;sreeranj4droid;Tried authenticating to Azure AD using openid and same issue persists. When logout is used after openid authentication, user gets re-authenticated and logged in back.

Any solution or workaround would be highly appreciated.","25/Sep/18 07:07;Martti;Has anybody come across a solution or a workaround for this issue?","25/Sep/18 12:25;vnick;The solution is to implement it, and it has not been implemented, yet.","05/Jan/20 11:19;mechanix;Any progress on this matter?","05/Jan/20 14:54;vnick;[~mechanix]: There has been some activity on related issues GUACAMOLE-680 and GUACAMOLE-361 that I think will allow several of these issues to move forward once they are implemented.","05/Jan/20 19:48;mechanix;[~vnick] thanks for your reply. I got Guacamole running inside k8s with auth-openid connector (Keycloak) for better scaling. The only thing that's missing, is a proper logout function.

Very cool project indeed.","02/Nov/20 21:04;Ghost_Knight;[~vnick] I am trying to look into implementing this – is there an event for user logouts?  I can't seem to find one.","02/Nov/20 21:08;vnick;[~Ghost_Knight]:

Sounds good.  See:

https://github.com/apache/guacamole-client/blob/9ab3e854ab4bb92913576f58cdb2657dc7c25df0/guacamole/src/main/webapp/app/auth/service/authenticationService.js#L278-L302

Also, we had some discussion about re-arranging some things related to logout to better handle these scenarios so that you can both delete the Guacamole token, invalidating the Guacamole Login, and then also call an external URL to potentially invalidate some upstream login.  This was handled via GUACAMOLE-680 - PR (sorely lacking any attention) is here:

https://github.com/apache/guacamole-client/pull/346","10/Nov/20 16:41;Ghost_Knight;[~vnick]   What is the proper way to pass configuration variables from `guacamole.properties` to the front-end javascript?  In this case I have added the OpenID logout endpoint and the client ID to the backend but I need to pass those to the openid module on the UI in order to utilize them.",,,,,,,,
Notify connecting client on unrecognized connection ID,GUACAMOLE-1047,13300567,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,holograph,holograph,23/Apr/20 13:46,18/Jan/21 03:13,17/Feb/21 11:14,,,,,1.4.0,,guacd,,,,,,0,,,,,,"When a client starts the handshake with an invalid connection ID (i.e. sends a {{select}} with an argument prefixed with {{$}}), guacd immediately drops the connection. Although this is logged on the server said, the client is completely unaware of what's going on.

Beyond being just plain rude, this makes error reporting and handling difficult in some cases. The protocol specifically allows an {{error}} command to be sent by the server during the handshake, which would be very handy in this case; please expect a pull request addressing this in guacd, hopefully it meets the contribution guidelines :)

(Incidentally, the handshake implementation in guacamole-common's tunneling code does not actually handle error commands, expect a separate issue + pull request to address that.)",,holograph,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-23 14:01:47.033,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Apr 23 14:02:41 UTC 2020,,,,,,,"0|z0dzy8:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Apr/20 14:01;vnick;[~holograph]: Thanks, and a pull request would be great!","23/Apr/20 14:02;holograph;The pull request, as promised: [https://github.com/apache/guacamole-server/pull/271]",,,,,,,,,,,,,,,
Support server control commands during handshake,GUACAMOLE-1048,13300568,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,holograph,holograph,23/Apr/20 14:08,18/Jan/21 03:13,17/Feb/21 11:14,,,,,1.4.0,,guacamole-common,,,,,,0,,,,,,"The current implementation of client handshake in {{ConfiguredGuacamoleSocket}} doesn't handle the case where a server sends an error command mid-handshake, which is allowed by the protocol. This hampers error handling/reporting in some cases; for instance, when an invalid connection ID is specified by the {{select}} command, a resulting {{error}} would be misinterpreted by the client as an unexpected opcode.

Please expect a pull request aimed at improving this situation soon; incidentally, the scenario described above is hypothetical, guacd currently drops the connection instead of sending an error command. This is handled separately in GUACAMOLE-1047.",,holograph,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Apr 23 14:56:07 UTC 2020,,,,,,,"0|z0dzyg:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Apr/20 14:56;holograph;And the PR, as promised: [https://github.com/apache/guacamole-client/pull/500]",,,,,,,,,,,,,,,,
Allow QuickConnect Extension to Block Certain Parameters,GUACAMOLE-1025,13298103,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vnick,vnick,13/Apr/20 18:57,18/Jan/21 03:08,17/Feb/21 11:14,,,,,1.4.0,,guacamole-auth-quickconnect,,,,,,0,,,,,,"Based on knowledge (as documented in the manual) about some of the security implications of the QuickConnect module, and a recent conversation on the mailing list, it seems like it would be good to add an option or two to the QuickConnect authentication module that allows the server administrator to control which connection parameters can be used when creating connections and which ones will be vetoed or ignored.  I'm thinking that two options could be implemented:

quickconnect-allowed-parameters
quickconnect-denied-parameters

The logic would be as follows:
* If quickconnect-allowed-parameters is set, ONLY the parameters specified in that option will be allowed, and ALL others will be discarded.
* If quickconnect-denied-parameters is set, the parameters specified in that option will be discarded, and ALL others will be allowed.
* If both are set (which shouldn't happen under normal circumstances), the parameters set in quickconnect-allowed-parameters will be allowed, unless they also occur in quickconnect-denied-parameters, in which case they will be discarded along with anything else not set in quickconnect-allowed-parameters.",,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-04-13 18:57:40.0,,,,,,,"0|z0dl34:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ignore non-relevant attributes for objects returned by LDAP Queries,GUACAMOLE-1130,13315726,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,erodriguez19,erodriguez19,08/Jul/20 21:11,18/Jan/21 02:57,17/Feb/21 11:14,,,,,1.4.0,,guacamole-auth-ldap,,,,,,0,,,,,,"I will briefly try to summarize my motivation on this, since guacamole got migrated to Apache Directory API ( GUACAMOLE-234 ) I began to see several messages like this on my logs.
 * Approximately 8 times per-login (I have approx 80 user-logins per day, so logs get quite big because of this).
 * This certainly has to do with my infrastructure (the attributed that is duplicated and the amount of logs), so pattern might vary and mostly being noticed on Active-Directory environments. Others already mentioned this and it`s shown in issue mentioned above. Other examples from a quick-search: [example1|http://mail-archives.apache.org/mod_mbox/guacamole-dev/201906.mbox/%3C156081210953.28315.1595760006523730577.gitbox@gitbox.apache.org%3E] [example2|https://www.mail-archive.com/search?l=dev@guacamole.apache.org&q=subject:%22%5C%5BGitHub%5C%5D+%5C%5Bguacamole%5C-client%5C%5D+mike%5C-jumper+commented+on+issue+%23345%5C%3A+GUACAMOLE%5C-234%5C%3A+Migrate+to+Apache+Directory+API+for+LDAP+Extension%22&o=newest&f=1]
 * Logs are like these:

{code:java}
19:28:51.564 [NioProcessor-7] WARN o.a.d.a.l.m.entry.DefaultAttribute - ERR_13207_VALUE_ALREADY_EXISTS The value 'CN=DC1,OU=Friday,OU=Domain Controllers,DC=super,DC=awesome,DC=domain,DC=com' already exists in the attribute (msDS-RevealedDSAs)
19:28:51.564 [NioProcessor-7] WARN o.a.d.a.l.m.entry.DefaultAttribute - ERR_13207_VALUE_ALREADY_EXISTS The value 'CN=DC1,OU=Friday,OU=Domain Controllers,DC=super,DC=awesome,DC=domain,DC=com' already exists in the attribute (msDS-RevealedDSAs)
19:28:51.564 [NioProcessor-7] WARN o.a.d.a.l.m.entry.DefaultAttribute - ERR_13207_VALUE_ALREADY_EXISTS The value 'CN=DC1,OU=Friday,OU=Domain Controllers,DC=super,DC=awesome,DC=domain,DC=com' already exists in the attribute (msDS-RevealedDSAs)
19:28:51.564 [NioProcessor-7] WARN o.a.d.a.l.m.entry.DefaultAttribute - ERR_13207_VALUE_ALREADY_EXISTS The value 'CN=DC1,OU=Friday,OU=Domain Controllers,DC=super,DC=awesome,DC=domain,DC=com' already exists in the attribute (msDS-RevealedDSAs){code}
The key for me was, why was guacamole considering in any way attributes that are completely irrelevant like *msDS-RevealedDSAs*?

 

I made a few tweaks in the code to filter returned data from ldap using *SearchRequest* [addAttribute|https://docs.oracle.com/cd/E49437_01/apirefs.111220/e38583/oracle/oud/requests/SearchRequest.html#addAttribute_java_lang_String____] and taking advantage of already ""knowing"" which attributes are really relevant (and looking forward to retrieve). In this way for example:
Instead of (wasting memory?) retrieving all the attributes an object might hold we tell SearchRequest to, in case of a group, get the attribute defined in configuration that hold group name (*ldap-group-name-attribute*) and the attribute defined in configuration that tells which attributes hold group members(*ldap-member-attribute-type*). The same applies for user objects.

In case of LDAP being used for connection storage (guac* attributes) the original ""way"" should be in place for retrieving anything as I can not replicate such scenario. Perhaps I am wrong, but I really need someone to help me out in this matter.



As for ""normal"" LDAP use, the pull request that will be submitted was tested, also *ldap-user-attributes* is being used so it's working OK (e.g. not being filtered out).

 ",,erodriguez19,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-07-08 21:11:36.0,,,,,,,"0|z0gkuo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow for clearing TOTP Data in Admin Interface,GUACAMOLE-770,13225408,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vnick,vnick,02/Apr/19 01:44,18/Jan/21 02:49,17/Feb/21 11:14,,,,,1.4.0,,guacamole-auth-totp,,,,,,4,,,,,,"Currently the TOTP attributes for a particular user are completely hidden from the Administrative interface, even to admin-level users.  While hiding this data is sound security practice - there is no reason why any user, including an admin, within Guacamole would need to actually see the ""key material"" for the TOTP token, it might be nice to come up with some way to allow that data to be cleared from within the Admin UI such that a user's TOTP status could be ""reset,"" allowing that user to re-enroll.  I'm not sure this is really possible with any of the current field types, but I'm thinking perhaps there is some sort of new field type within Guacamole that could be generated, perhaps specific to the TOTP module, that would allow for clearing out this data.",,lucasmogari,mjumper,sporeno,stevebelongie,vnick,welyqrson,yoda-ict,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-06-28 14:09:22.135,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Sep 03 12:06:42 UTC 2020,,,,,,,"0|z01ceo:",9223372036854775807,,,,,,,,,,,,,,,,,"28/Jun/19 14:09;welyqrson;Olá também observei isso, estou instalando sistema em uma base de testes aqui para implementar... e me deparei com isso. Como resetar um touch de um usuário que por ventura tenha perdido o dispositivo.

"" Hello also I noticed this, I am installing system on a test base here to implement ... and I came across this. How to reset a touch of a user who may have lost the device. ""","01/Jul/19 14:42;welyqrson;I see that if you change the attribute_value attribute in the guacamole_user_attribute table ... it asks for the device confirmation again ... if you can add an option to change that key next to the user record it might be enough to resolve the issue.

the update I ran was this:

{color:#ff0000}{{[UPDATE|http://192.168.4.193/phpmyadmin/url.php?url=http://dev.mysql.com/doc/refman/5.5/en/update.html] `guacamole_user_attribute` [SET|http://192.168.4.193/phpmyadmin/url.php?url=http://dev.mysql.com/doc/refman/5.5/en/set.html] `attribute_value` = 'false' WHERE `guacamole_user_attribute`.`user_id` = 3 [AND|http://192.168.4.193/phpmyadmin/url.php?url=http://dev.mysql.com/doc/refman/5.5/en/logical-operators.html#operator_and] `guacamole_user_attribute`.`attribute_name` = 'guac-totp-key-confirmed';}}{color}

{{The point I found a bit complex is to identify the correct user ... but it was ... in my case it solved.}}

 ","23/Apr/20 06:26;sporeno;Will this option be for admins only or also for users? I think it should be limited to admins?

Bg

 ","23/Apr/20 15:20;vnick;[~sporeno]: Yes, this would be limited to admin users, although it is possible at this point for users who have access to update their own accounts to wipe out their own TOTP information.","03/Sep/20 12:03;yoda-ict;Is there any progress regarding this request?

In the meantime; does anyone know how to get the Id from the username?","03/Sep/20 12:06;vnick;[~yoda-ict]: There is a pull request open for this - hopefully something we can get into the next release...

https://github.com/apache/guacamole-client/pull/495",,,,,,,,,,,
Client Body Size Limit in NGINX,GUACAMOLE-1060,13302820,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,Roemer,Roemer,05/May/20 08:29,18/Jan/21 02:48,17/Feb/21 11:14,,,,,1.4.0,,Documentation,,,,,,0,,,,,,"While trying to get the RDP file transfer working, I mostly got the error ""you do not have permission to upload this file"" while uploading a file. I then found out that files below 1 mb worked and larger ones not.
As I am using an nginx reverse proxy, this is because the default of `client_max_body_size` is set to 1mb.
So it should be set higher or even indefinite (0).
I think this should be added to the example nginx configuration in `Chapter 4. Proxying Guacamole`.",,Roemer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-05-05 08:29:14.0,,,,,,,"0|z0eduo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add ability to reuse the classes from the `guacamole` module,GUACAMOLE-1071,13305029,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,cmosguy,cmosguy,14/May/20 20:02,18/Jan/21 02:31,17/Feb/21 11:14,,1.1.0,,,,,guacamole,,,,,,0,,,,,,"The purpose of this PR is to enable reuse of the classes from the guacamole module. What I found was it was not possible before because everything is deployed in a self-contained {{.war}} file. Now, with this PR, you can see a {{guacamole-1.2.0-classes.jar}} file in your {{.m2/repository}} directory tree that can be now used for development of other custom servlets.",,cmosguy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-05-14 20:02:18.0,,,,,,,"0|z0er5s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Connection permissions inheritance,GUACAMOLE-1264,13352926,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,haeringd,haeringd,17/Jan/21 19:21,18/Jan/21 02:23,17/Feb/21 11:14,,1.3.0,,,,,guacamole,,,,,,0,,,,,,"Currently, I am able to create connections and user groups. But I have to assign connection read permissions to the group manually. It would be great to have the opportunity to assign the read permission of a connection group to a user group and inheritate that for new connections.

In that was, I could add a new connection to the connection group and every user in the user group has automatically access to this.",Docker,haeringd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-01-17 19:21:27.0,,,,,,,"0|z0mpa0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Russian keyboard support for RDP,GUACAMOLE-925,13279514,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,adroman,adroman,15/Jan/20 07:38,04/Jan/21 12:18,17/Feb/21 11:14,,1.0.0,,,,,RDP,,,,,,2,,,,,,"Hello, dear support team!

I'm using Unicode layout because Russian layout isn't presented there, but with Unicode layout I can't send keyboard shortcuts to remote RDP machine (CTRL + C for example).
If I switch Unicode to English layout in connection settings, I can do keyboard shortcuts but unfortunately some signs doesn't match when I use RU layout, for example instead of period sign I got Russian letter ""ю"". 
The keyboard layouts on remote and local machine are identical, that's 100%, tested many times on different clean windows 10 installs, on work, on VMs, on friend's PCs, etc. The issue always the same.
As I can see Russian layout isn't presented in Guacamole connection settings by itself so it would be highly appreciated if you can suggest any workaround for Russian users.",,adroman,mjumper,NFisher,vnick,wghost,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/20 07:38;adroman;SCREEN.jpg;https://issues.apache.org/jira/secure/attachment/12990951/SCREEN.jpg","18/Sep/20 04:01;NFisher;apache_guacamole_Russian_layouts.txt;https://issues.apache.org/jira/secure/attachment/13011722/apache_guacamole_Russian_layouts.txt","04/Jan/21 11:42;NFisher;image-2021-01-04-14-42-50-393.png;https://issues.apache.org/jira/secure/attachment/13018110/image-2021-01-04-14-42-50-393.png","29/Dec/20 08:44;NFisher;ru_ru_qwerty.keymap;https://issues.apache.org/jira/secure/attachment/13017803/ru_ru_qwerty.keymap",,,,,4.0,,,,,,,,,,,,,,,,,,,,2020-09-18 04:03:23.479,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jan 04 12:18:45 UTC 2021,,,,,,,"0|z0aits:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Sep/20 04:03;NFisher;The issue is actual for v.1.2.0 as well.
In the same time the Russian layout is ok on SSH connections.

See attachment for correct layout.","29/Dec/20 04:26;vnick;[~NFisher]: It would be great to have this code submitted in a pull request so that it could be included in the RDP code for Guacamole Server. Would you be able to do that?","29/Dec/20 06:01;NFisher;I'm unable to submit it by myself (or need detailed instructions), but you feel free to use it.","29/Dec/20 08:36;NFisher;I've added ""ru_ru_qwerty.keymap"" to attachments.
 It is made on the basis of 
 ""guacamole-server-1.2.0/src/protocols/rdp/keymaps/en_us_qwerty.keymap""

I'm unaware if double quotes ('""') and backslash ('\') should be escaped.
 In ""en_us"" keymap they are not. I didn't escape them in ""ru_ru"" too.

To whom who can - please submit a pull request.","29/Dec/20 17:50;NFisher;I've also edited Makefiles in protocols/rdp and rebuilt and reinstalled ""guacd"".
During the ""make"" process i saw that ru_ru_qwerty.keymap was catched up to the build. But there's no option in ""Keyboard layout"" anyway. 
","31/Dec/20 05:12;mjumper;{quote}
During the ""make"" process i saw that ru_ru_qwerty.keymap was catched up to the build. But there's no option in ""Keyboard layout"" anyway.
{quote}

If you're referring to the user interface within the webapp, the available parameters, value, etc. are not driven by guacd but by parameter definitions and corresponding translations that are part of the webapp:

https://github.com/apache/guacamole-client/blob/156a19967ae64bc0a74480db94624b01cefc17c6/guacamole/src/main/webapp/translations/en.json#L550-L567
https://github.com/apache/guacamole-client/blob/156a19967ae64bc0a74480db94624b01cefc17c6/guacamole-ext/src/main/resources/org/apache/guacamole/protocols/rdp.json#L89-L112

When a new possible value is added to a parameter (or when a new parameter is added entirely), the client-side parameter definitions and at least the English translation need to be updated for that to be visible in the UI.","31/Dec/20 05:40;mjumper;{quote}
If I switch Unicode to English layout in connection settings, I can do keyboard shortcuts but unfortunately some signs doesn't match when I use RU layout, for example instead of period sign I got Russian letter ""ю"".
{quote}

This shouldn't be happening, even without a Russian layout definition. The only case where it might occur is if you switch the _server_ layout to Russian, but tell Guacamole that the server layout is English. I'll try to clarify:

* When you type a character that isn't defined for the *server layout* (not local keyboard layout, but the _server_ keyboard layout), Guacamole will fall back to sending a Unicode event.
* When you select the Unicode keyboard layout, what you are actually doing is _selecting a keymap that has zero keys defined_. This has the effect of forcing all typed characters to use Unicode events, because Guacamole has to use its Unicode event fallback for everything. The option exists, but really should never need to be used.
* If you tell Guacamole that the server layout is X but actually set the server layout to Y, Guacamole cannot send the correct key events. It will believe that a particular sequence of scancodes will produce a particular character, but will be incorrect because the layout on the server does not match the definition selected for the connection.

So, breaking down what likely happened when you typed ""."" but got ""ю"":

# Guacamole has been told that the RDP server uses the English keyboard layout via the connection configuration.
# The Windows machine in question has actually been configured to use Russian, or has been switched from English to Russian after connecting.
# You attempt to type "".""
# Guacamole checks the keyboard layout it's been configured to use and says ""Great! I know exactly what scancode to send for _that_!"" and sends the scancode used for ""."" on the English keyboard.
# But nope - Windows has actually been configured to assume a Russian keyboard layout. The English ""."" key has the same scancode as the Russian ""ю"" key. The scancode it receives, though correct for English, will actually produce ""ю"" - the key that has that scancode in the Russian layout.

If Guacamole is set to English and Windows is set to English, then ""."" would produce ""."" via traditional scancodes and ""ю"" would produce ""ю"" via Unicode. Characters common to both keyboards would be typed using scancodes, while characters unique to Russian would use Unicode.

To be clear, a Russian keyboard layout is a welcome contribution and beneficial. It's necessary for any RDP server that does not support Unicode events and for any case where the Windows keyboard layout cannot be changed from Russian. For most cases, however, you really should be able to type without any trouble. All that's needed is for the setting in Guacamole to match reality. If reality differs from what you told Guacamole, then that's when things fall apart.","31/Dec/20 06:14;NFisher;Thanks. I'll rebuilt the client app and let you know.
So can I hope that ru_ru keymap will be added to the next release?","31/Dec/20 08:03;NFisher;[~mjumper]: I've added 'ru-ru' layout to rdp.json in guacamole-ext.jar and menu option to translations/en.json
Now Russian layout works ok, but English layout is broken:

asdfghjkl$

zxcvbnm?/|

ASDFGHJKL^@

ZXCVBNM<>&

 

Also [Ctrl]+<key> combinations in English layout are broken.

I guess some extra mappings should be added.

 ","01/Jan/21 19:55;mjumper;The English layout is definitely correct, and adding a new keyboard layout cannot have an impact on existing layouts. What you are seeing is probably due to the layout selected in Guacamole not matching the layout selected in Windows.","04/Jan/21 12:18;NFisher;[~mjumper] It looks like we're treading water ;)
I have 2 layouts and 2 languages installed on local Windows 10 and on remote Windows 2016 - ENG (English United States with US keyboard) and RUS (Russian with Russian keyboard).
On both systems I have [Ctrl]+[Shift] combination to switch between input languages and no combination to switch keyboard layouts explicitly (in terms of standard Windows ""Change key sequence"" form).
!image-2021-01-04-14-42-50-393.png!


Now let's go back to the start post.
1. If I set Unicode layout - both Russian and English keyboards work ok but [Ctrl]+<key> combinations don't. Like [Ctrl]+[F], [Ctrl]+[C], etc...
2. When I added Russian keymap to guacamole-server and guacamole-client, Russian keyboard worked ok along with [Ctrl]+<key> sequences. But English layout was broken for some keys and [Ctrl]-sequences as well.

That's all I know. 

Since all systems are now Unicode-compatible, I think there's no need to add more layouts explicitly. Just [Ctrl]-sequences should be fixed for Unicode-layout. 
I guess the trouble is that the [Ctrl]-sequences are treated literally when should be treated via scan-codes.

Also keep in mind that the bug is 1 year (and 3 releases) old ;) ",,,,,,
Failure to get SFTP list when there are many file lists,GUACAMOLE-1247,13348441,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kwanghee83.lee,kwanghee83.lee,30/Dec/20 09:26,30/Dec/20 09:34,17/Feb/21 11:14,,1.2.0,,,,,guacamole-client,,,,,,0,,,,,,"When there are many files in the Linux directory, an error occurs and the connection is disconnected. 

Currently, there are more than 40,000 files in a specific directory, and an error occurs when searching the file list through SFTP. I think, this case is not ideal, but some users operate servers that way.

After profiling to find the cause of the problem, it seems that the connection is disconnected because a lot of time is consumed when rendering the DOM after parsing the json by getting the list of SFTP files. (Please refer to the attached photos.)
{code:java}
//guacFileBrowser.js
// Watch directory contents once file template is available $templateRequest('app/client/templates/file.html').then(function fileTemplateRetrieved(html) {
   // Store file template statically 
   fileTemplate = html;

   // Update the contents of the file browser whenever the current directory (or its contents) changes      
   $scope.$watch('filesystem.currentDirectory.files', function currentDirectoryChanged(files) {
     // Clear current content 
     currentDirectoryContents.html('');
 
     // Display all files within current directory, sorted 
     angular.forEach(sortFiles(files), function displayFile(file) {     
         currentDirectoryContents.append(createFileElement(file)); });
     });
}, angular.noop); // end retrieve file template{code}
 

In my opinion, it takes a lot of time to render the DOM. If you use the lazy loading technique, it seems that you can immediately show the list to the user without disconnecting.

Thanks.",,kwanghee83.lee,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Dec/20 09:25;kwanghee83.lee;err1.png;https://issues.apache.org/jira/secure/attachment/13017880/err1.png","30/Dec/20 09:25;kwanghee83.lee;err2.png;https://issues.apache.org/jira/secure/attachment/13017879/err2.png",,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-12-30 09:26:03.0,,,,,,,"0|z0lxfs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for OpenSSH private key format,GUACAMOLE-745,13219013,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,nicoulaj,nicoulaj,01/Mar/19 20:52,29/Dec/20 21:17,17/Feb/21 11:14,,,,,,,guacd,SSH,,,,,0,,,,,,"Since OpenSSH 7.8, {{ssh-keygen}} does not generate keys in PEM format by default anymore: [https://www.openssh.com/txt/release-7.8]

Attempting to use keys in the new format in Guacamole does not work, and does not print any helpful error message even in debug mode:
{code:java}
guacd_1      | guacd[296]: DEBUG:        Attempting private key import (WITHOUT passphrase)
guacd_1      | guacd[296]: DEBUG:        Initial import failed: (null)
guacd_1      | guacd[296]: DEBUG:        Re-attempting private key import (WITH passphrase)
guacd_1      | guacd[296]: ERROR:        Auth key import failed: (null){code}

It would be nice if keys in OpenSSH new format were supported. At least a more helpful error message should be printed (like ""unrecognized key format"").",Docker official images 1.0.0,catheyc,mjumper,nicoulaj,vnick,vsundin,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-746,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-03-01 21:52:08.547,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Dec 29 21:16:38 UTC 2020,,,,,,,"0|z0094g:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Mar/19 21:03;nicoulaj;Looks like libssh2 supports it since [this commit|https://github.com/libssh2/libssh2/commit/03092292597ac601c3f9f0c267ecb145dda75e4e], but it is not released yet.","01/Mar/19 21:52;vnick;{quote}
Looks like libssh2 supports it since this commit, but it is not released yet.
{quote}

Since it's a libssh2 issue, I don't know that there's any point in keeping this particular JIRA issue opened - if libssh2 supports it, then I doubt anything special will have to be done in Guacamole to gain that support.  For the Docker images, we'll have to wait until libssh2 libraries are released for the Debian Stable images before it can be integrated there.  All of these I consider ""upstream"" issues.","01/Mar/19 22:22;nicoulaj;I believe modifications are required in guacd to support it, [this code|https://github.com/apache/guacamole-server/blob/master/src/common-ssh/key.c#L53] requires the key to start with either {{\-\-\-\-\-BEGIN RSA PRIVATE KEY\-\-\-\-\-}} or {{\-\-\-\-\-BEGIN DSA PRIVATE KEY\-\-\-\-\-}} and rejects anything else. The new format headers is {{\-\-\-\-\-BEGIN OPENSSH PRIVATE KEY\-\-\-\-\-}}, I can see RFC4716 mentions another format {{\-\-\-\- BEGIN SSH2 PUBLIC KEY \-\-\-\-}} (https://tools.ietf.org/html/rfc4716#section-3.2). So I am not sure how this should be parsed, but it looks like the current method is too restrictive.
","02/Mar/19 00:13;vnick;Fair point.  We'll leave this open and we can add support for the new header formats.","30/Aug/19 20:12;catheyc;Like [~nicoulaj], I agree that the modifications to the format headers are necessary.  I notice that this is listed as a Minor improvement but it prohibits the use of FIPS=1 enabled hosts to generate {{----BEGIN RSA PRIVATE KEY----}} keys (PKCS#5 vs PKCS#8 keys).  This is presently blocking some of our progress using 1.0.0.  I see the ticket is unassigned.  Has anyone already worked this?  If not we may take it on.","30/Aug/19 21:28;vnick;[~catheyc]: It's minor because the number of people demanding it is low, relatively speaking.  The project has other things that have bubbled to the top to focus on.

We would welcome your contributions if it's something you or someone on your team would like to help with - I love closing out tasks/issues, so I certainly wouldn't turn down the help :-).  Contribution guidelines, including style guidelines, are on the web site, here: http://guacamole.apache.org/open-source/.

Thanks!!","06/Sep/20 10:25;vsundin;I got so fed up with this, but finally got it working without the use of the ssh-keygen utility....
The commands below will get you the correct headers


{code:java}
KEYFILE=~/.ssh/<keyname>{code}
{code:java}
openssl genrsa -out ${KEYFILE} 2048{code}
{code:java}
ssh-keygen  -y -f ${KEYFILE} > ${KEYFILE}.pub
{code}","29/Dec/20 17:52;vnick;Digging into this issue and GUACAMOLE-746 a little more, it looks like the changes are going to be a bit more involved than just allowing another header format - currently the code uses the header to detect the type of key (RSA, DSA, etc.); however, it appears that generating an OpenSSH key in either RSA format or ED25519 format both result in the new header ""BEGIN OPENSSH PRIVATE KEY"" - the header is no longer a valid indication of the key format. This means our code is likely going to have to loop through supported formats and attempt to load the key, or we're going to have to have an option for the user to specify the key format.
{code:java}
[nick_couchman@localhost ~]$ ssh-keygen -t rsa -b 4096 -f ./openssh-rsa
Generating public/private rsa key pair.
...
[nick_couchman@localhost ~]$ head -n 1 ./openssh-rsa
-----BEGIN OPENSSH PRIVATE KEY-----
[nick_couchman@localhost ~]$ ssh-keygen -t ed25519 -b 4096 -f ./openssh-ed25519
Generating public/private ed25519 key pair.
...
[nick_couchman@localhost ~]$ head -n 1 ./openssh-ed25519
-----BEGIN OPENSSH PRIVATE KEY-----
{code}","29/Dec/20 19:38;mjumper;For OpenSSH itself to be able to read these keys, there's likely some way that it identifies the type beyond simply brute forcing through all supported types. Decoding generated keys with base64, I see ""ssh-ed25519"" in the content of the key for the {{-t ed25519}} one and ""ssh-rsa"" for the {{-t rsa}} one. Perhaps this format is documented and our code just needs to do a bit more for OpenSSH keys?","29/Dec/20 19:44;mjumper;I wonder if perhaps libssh would magically support this without us having to manually parse provided keys.","29/Dec/20 21:16;vnick;{quote}Perhaps this format is documented and our code just needs to do a bit more for OpenSSH keys?
{quote}

Yeah, i was also looking at some of the OpenSSL functions for this, and there seems to be a more generic `PEM_read_bio_PrivateKey()` function that reads more generically and perhaps can be combined with other functions to determine the type of the key on-the-fly?

{quote}I wonder if perhaps libssh would magically support this without us having to manually parse provided keys.
{quote}

That would be lovely - it does seem like something that would be implemented in a client library, though apparently libssh2 doesn't do it. Or maybe it does, but the documentation on public key authentication for libssh2 is missing :(.

I was also looking at possible ways to use the Passphrase Callback prompt the user for a private key passphrase rather than requiring it be specified in the configuration, particularly now that we have parameter prompting included. This would pave the way for user-specific private keys as mentioned in a different JIRA issue.",,,,,,
Add Keyboard function to allow removal of event listeners,GUACAMOLE-1178,13327066,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Asaf.S,Asaf.S,11/Sep/20 10:41,29/Dec/20 04:28,17/Feb/21 11:14,,1.2.0,,,,,guacamole-common-js,,,,,,0,,,,,,"*Background*

In some cases where the ""document"" element of a page is passed to the guacamole keyboard as the base element to listen for events on text type input elements in the page stop receiving change events as a result.

By removing through the Dev Tools the specific onkeydown,onkeyup,onkeypress events that the commons-js lib is listening to those input elements start working again.

*Improvement* (and how we solved it)

We changed the way the listenTo works to start working with non-anonymous functions and added a ""cleanUp"" function that removes the following event listeners from the given ""element"" argument given at the constructor level.

At this point we could hook our inner logic to affect how dom events were subscribed to and unsubscribed at the guacamole commons code level which solved our issue

 

Ill be happy to provide a PR if necessary to fix this issue :) 

Tnx in advance",,Asaf.S,vnick,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-29 04:28:40.671,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Dec 29 04:28:40 UTC 2020,,,,,,,"0|z0iimo:",9223372036854775807,,,,,,,,,,,,,,,,,"29/Dec/20 04:28;vnick;[~Asaf.S]: If you'd like to do a PR for this, we'd be happy to review those changes and see if the approach is acceptable for the code. I think the biggest concern would be making sure that the changes do not break any other expected functionality.",,,,,,,,,,,,,,,,
Upgrade to Awaitility 4.0.3,KARAF-6674,13297422,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,skitt,skitt,09/Apr/20 15:46,25/Dec/20 07:29,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Release notes: [https://github.com/awaitility/awaitility/wiki/ReleaseNotes40]

Changelog: [https://raw.githubusercontent.com/awaitility/awaitility/master/changelog.txt]

None of the backwards-incompatible changes in 4.0 affect Karaf.",,githubbot,jbonofre,skitt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-09 15:47:41.37,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Apr 10 16:19:13 UTC 2020,,,,,,,"0|z0dgvs:",9223372036854775807,,,,,,,,,,,,,,,,,"09/Apr/20 15:47;githubbot;skitt commented on pull request #1094: [KARAF-6674] Upgrade to Awaitility 4.0.2
URL: https://github.com/apache/karaf/pull/1094
 
 
   Release notes:
   https://github.com/awaitility/awaitility/wiki/ReleaseNotes40
   Changelog:
   https://raw.githubusercontent.com/awaitility/awaitility/master/changelog.txt
   
   None of the backwards-incompatible changes in 4.0 affect Karaf.
   
   Signed-off-by: Stephen Kitt <skitt@redhat.com>
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","10/Apr/20 05:13;jbonofre;AFAIR, this requires an update in pax-exam as well. Let me check.","10/Apr/20 16:19;githubbot;jbonofre commented on pull request #1094: [KARAF-6674] Upgrade to Awaitility 4.0.2
URL: https://github.com/apache/karaf/pull/1094
 
 
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org
",,,,,,,,,,,,,,
 Inject values from files in config files,KARAF-6733,13307755,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,lexsoto,lexsoto,27/May/20 14:12,24/Dec/20 06:58,17/Feb/21 11:14,,4.2.8,,,,,karaf,,,,,,0,,,,,,"Currently, I can have the following in a configuration file:
  
      org.ops4j.pax.web.ssl.password={color:#2a00ff}${env:MYPASSWORD}{color}
  
 And,  as the documentation states:
{quote}Environment variables can be referenced inside configuration files using the syntax {{$\{env:<name>}}} (e.g. {{property=$\{env:FOO}}} will set ""property"" to the value of the enviroment variable ""FOO""). 
{quote}
 
 Karaf will use the value from the environment variable. It's all good, but... 
  
 When used with Docker secrets, this forces you to copy the secret from the default location ""/run/secrets/"" to an environment variable. 
  
 This is a proposal to add a Karaf mechanism to inject values from files in config files. For example: 
  
     org.ops4j.pax.web.ssl.password={color:#2a00ff}${[file:/run/secrets/mypassword|file:///run/secrets/mypassword]}{color}
  
 So, when Karaf’s see the prefix _$[file:_|file:///_]  it will get the content of the file and use it as the value of the configuration key.
  
 This way:
  
   1) I don’t have to write a complex script to copy the secret into the environment variable, and
   2) the secret is only in one place.
  
  
 (prefix ""file"" is just for illustration, it can be something else)
  

See discussion here:  [http://karaf.922171.n3.nabble.com/Using-Docker-Secrets-in-Karaf-Configuration-td4058215.html]


  ",,jbonofre,lexsoto,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-24 06:58:17.141,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Dec 24 06:58:17 UTC 2020,,,,,,,"0|z0f7zc:",9223372036854775807,,,,,,,,,,,,,,,,,"24/Dec/20 06:58;jbonofre;That's actually an improvement on the Felix configadmin interpolation plugin (that we now use in Karaf 4.3.x).",,,,,,,,,,,,,,,,
Clipboard issue that can't paste the image data when changing the focus,GUACAMOLE-1186,13329686,Improvement,Reopened,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,MyJimmy,MyJimmy,28/Sep/20 06:19,21/Dec/20 13:05,17/Feb/21 11:14,,1.2.0,,,,,guacamole-client,guacamole-server,,,,,0,features,,,,,"I found one clipboard issue when working on the remote server over the apache guacamole client built from the latest source.

 

The test case follows as below:
 # Connect to the {color:#de350b}*remote server*{color} (Windows 10, 64bit) via the Apache Guacamole Client.
 # {color:#de350b}*In the remote server,*{color} open NotePad, type some text, press Ctrl+A to select all text, copy it by pressing Ctrl+C.
 # {color:#de350b}*In the remote server,* {color}open WordPad and press Ctrl+V to paste the clipboard.
 # {color:#de350b}*In the remote server,* {color}open Paint, draw any shapes, press CTrl+A to select all, and press Ctrl+C to copy it.
 # *{color:#de350b}In the remote server,{color}* select WordPad to press Ctrl+V to paste the clipboard.
 # *In the client computer,* move the focus from Chrome with the opened guacamole client to another application.
 # *In the client computer,* move back to the guacamole client page of Chrome.
 # *In the remote server,* select WordPad to press Ctrl+V to paste the clipboard.

 

In step 8, we can see the issue.

That's, we can't paste the image, but can paste only the text copied in the previous step.

 

When performed the above test case in the FreeRDP (xfreerdp) and the MS RDP client (mstsc.exe), I can't see this issue.

 

For more information, please see the attached video files.

 

Thanks.","Ubuntu 18.04 64bit, Windows 10 64 bit",mjumper,MyJimmy,vnick,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-55,,,"28/Sep/20 06:18;MyJimmy;apache-guacd-clipboard-issue.mp4;https://issues.apache.org/jira/secure/attachment/13012215/apache-guacd-clipboard-issue.mp4","28/Sep/20 06:18;MyJimmy;xfreerdp-clipboard-issue.mp4;https://issues.apache.org/jira/secure/attachment/13012214/xfreerdp-clipboard-issue.mp4",,,,,,,2.0,,,,,,,,,,,,,,,,,,,,2020-09-28 06:49:02.265,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Dec 21 06:41:22 UTC 2020,,,,,,,"0|z0iyrk:",9223372036854775807,,,,,,,,,,,,,,,,,"28/Sep/20 06:49;mjumper;I don't believe this is a bug. Guacamole does not currently support copy/paste of images, and so the client side cannot be aware of any non-text changes to the remote clipboard. When you switch to another tab, application, etc. on the client side, Guacamole will attempt to resync the remote clipboard with the contents of the client clipboard. This is intentional, however since the client clipboard does not contain the previously-copied image, it has the counterintuitive effect of clearing what was copied.","28/Sep/20 07:12;MyJimmy;[~mjumper], thanks for your reply.

But I can't understand why the clipboard feature of the guacamole interrupts the clipboard content of the remote server.

I didn't use the clipboard of the guacamole and I performed the clipboard actions in only the remote server.

In order to keep the clipboard content based on a text in the guacamole, is the clipboard of the remote server reset by the guacamole?","28/Sep/20 07:19;mjumper;When Guacamole loses and regains focus, it attempts to read the local clipboard (as it may have changed). If the browser allows this, and the clipboard has changed, it streams the clipboard contents to the server, resyncing the remote end with the local clipboard.","28/Sep/20 07:46;MyJimmy;I think that when resyncing the remote server with the local clipboard, the guacamole can adjust the local clipboard based on the clipboard content of the remote server.

That's, my idea follows as below:
a) When working on the remote server over the guacamole, we can manipulate not only the text content but also the non-text content in the clipboard unless changing the focus of the web browser.
b) When changing the focus, based on the remote clipboard content the guacamole changes the clipboard like the circumstance before changing the focus.

So, if the guacamole always keeps the *a) status* for the clipboard manipulation, I think that we can resolve this issue.","02/Oct/20 19:10;MyJimmy;This issue is related to the copy/paste operation in the remote server.","02/Oct/20 19:16;MyJimmy;[~mjumper], I changed the description of this issue.

I think that you confuse this issue because I didn't describe the details of this issue well.

Please check it again.","18/Dec/20 20:02;MyJimmy;[~mjumper], *Users require that they can paste the copied data (text & image copied from the remote server) into the remote server without any limitation.*

But when copying any images in MS Excel or MS Word of the remote server, if users change the focus to another application in the client computer and get back to the remote server by clicking the guacamole client, the clipboard of the remote server is reset so that users can't paste the copied image and they have to copy the images again.

So, I think that we have to fix this issue.

If you think that I'm right, I'll fix this issue.","18/Dec/20 20:09;vnick;[~MyJimmy]: Support for formatted text and images has not been implemented in Guacamole's clipboard, yet. There are already issues out there to address this:

GUACAMOLE-55
GUACAMOLE-420","18/Dec/20 20:15;MyJimmy;[~vnick], I don't mean the formatted text and images.

Users copy/paste any data in only the remote server and they didn't copy/paste any data outside of the remote server.

But because the guacamole server resets the clipboard of the remote server whenever activating the guacamole client, users have to copy the text & image within the remote server again.

This is inconvenient for users.","18/Dec/20 20:20;vnick;[~MyJimmy]: Thanks for the clarification. I don't know that there's much to be done aside from 1) implementing the required image and text support within Guacamole such that the contents are synchronized rather than cleared, or 2) disable the clipboard support for the connection so that Guacamole won't interact with the clipboard at all.","18/Dec/20 20:21;MyJimmy;[~vnick], The copy/paste of the guacamole is very convenient for users.

But to enable/disable this feature whenever needed is very inconvenient for users.

So I think that the guacamole server doesn't need to reset the clipboard of the remote server when users copy any data within the remote server.

This is possible.

*If you agree, I'll fix this issue.*","18/Dec/20 20:35;vnick;[~MyJimmy]: If you'd like to take a shot at fixing the issue and submit the pull request, that would be great. The only concerns that I would have is that whatever changes you make not interfere with the overall manner in which the clipboard functions - that is, the synchronization of local <-> remote clipboard still function as expected. But we can look at that when you submit the PR.

Thanks!","18/Dec/20 22:33;MyJimmy;[~vnick], I just have submitted a pull request: [https://github.com/apache/guacamole-server/pull/317]

You can check the pull request by following the below steps (step 4 to step 8 in the description of this issue):
 # {color:#de350b}*In the remote server,* {color}open Paint, draw any shapes, press CTrl+A to select all, and press Ctrl+C to copy it.
 # *{color:#de350b}In the remote server,{color}* select WordPad to press Ctrl+V to paste the clipboard.
 # *In the client computer,* move the focus from Chrome with the opened guacamole client to another application on your computer.
 # *In the client computer,* move back to the guacamole client page of Chrome.
 # *In the remote server,* select WordPad to press Ctrl+V to paste the clipboard.","19/Dec/20 16:08;vnick;[~MyJimmy]: I'm reviewing both this issue and your proposed changes, and I have some concerns about the changes.

First, let me make sure I understand the overall goal of your changes. Currently, Guacamole forcibly keeps the local clipboard in sync with any/all remote clipboards, resetting the remote clipboard when focus changes back to that browser window. Your proposed changes allow for a remote clipboard to stay ""out-of-sync"" with the local/Guacamole clipboard, particularly when the remote clipboard receives data that Guacamole does not support (e.g. images) - at least until the local clipboard changes, at which point the remote clipboard gets re-synchronized with the local clipboard, wiping out any changes. Correct?

I did some basic testing with your changes and came up with the following scenarios and results:
* Text to Local Clipboard: Works as expected, text appears in both local and remote clipboards and is synchronized.
* Text to Remote Clipboard: Works as expected, text appears in both remote and local clipboards, and is synchronized.
* Image to Local Clipboard: Works as expected, image is available locally but not remotely.
* Image to Remote Clipboard: Image remains in remote clipboard as long as nothing is changed in the local clipboard. However, the local clipboard ends up cleared/reset. Isn't this just the inverse of the original behavior you were trying to resolve - we're now keeping the contents of the remote clipboard, but wiping out anything on the local clipboard?

I did not test situations where multiple remote servers are in use, but I would imagine that this could very, very quickly get out of hand. I connect to anywhere from 1 to 10 or 12 remote servers concurrently, and, today, at least I know what the contents of the clipboard are going to be. It seems like introducing these changes could lead to a lot of confusion about what remote servers are actually synced with local clipboard changes and which ones are ignored, particularly for an end user who will not see warnings in the Guacamole logs about the missing data format support.

Beyond that, I agree with Mike: this is not a bug. It is intended behavior based on how Guacamole's clipboard is currently implemented - that is, only supports texts and endeavors to keep all clipboards synchronized. It seems like this issue and the changes suggested are really just a work-around for one corner case that is due to the lack of non-text support in Guacamole, no? If Guacamole supported rich text and images (from aforementioned Jira issues), and kept the local clipboard in sync with one or more remote clipboards with that data, would this even be an issue?","21/Dec/20 06:41;MyJimmy;[~vnick], Thanks for your reply.

I leave my opinions on some questions.

 
{quote}First, let me make sure I understand the overall goal of your changes. Currently, Guacamole forcibly keeps the local clipboard in sync with any/all remote clipboards, resetting the remote clipboard when focus changes back to that browser window. Your proposed changes allow for a remote clipboard to stay ""out-of-sync"" with the local/Guacamole clipboard, particularly when the remote clipboard receives data that Guacamole does not support (e.g. images) - at least until the local clipboard changes, at which point the remote clipboard gets re-synchronized with the local clipboard, wiping out any changes. Correct?
{quote}
I think that some are correct and others are incorrect. The remote clipboard will not receive data that Guacamole does not support (e.g. images) from the guacamole server.

 
{quote}Beyond that, I agree with Mike: this is not a bug. It is intended behavior based on how Guacamole's clipboard is currently implemented - that is, only supports texts and endeavors to keep all clipboards synchronized. 
{quote}
Yes, this issue isn't a bug.
 This issue doesn't mean the bug of the Apache Guacamole project.
 I thought this issue incorrectly. So I changed the issue type of this issue from ""Bug"" to ""Improvement"".

 
{quote}Image to Remote Clipboard: Image remains in remote clipboard as long as nothing is changed in the local clipboard. However, the local clipboard ends up cleared/reset. Isn't this just the inverse of the original behavior you were trying to resolve - we're now keeping the contents of the remote clipboard, but wiping out anything on the local clipboard?
{quote}
Yes, this is the original behavior I was trying to resolve.

 
{quote}If Guacamole supported rich text and images (from aforementioned Jira issues), and kept the local clipboard in sync with one or more remote clipboards with that data, would this even be an issue?
{quote}
Yes. If so, we don't need this.

 
{quote}I did not test situations where multiple remote servers are in use, but I would imagine that this could very, very quickly get out of hand. I connect to anywhere from 1 to 10 or 12 remote servers concurrently, and, today, at least I know what the contents of the clipboard are going to be. It seems like introducing these changes could lead to a lot of confusion about what remote servers are actually synced with local clipboard changes and which ones are ignored, particularly for an end user who will not see warnings in the Guacamole logs about the missing data format support.
{quote}
Sorry, I didn't understand this.
 Do you mean that the local clipboard will be synced with the remote clipboards of all of the remote servers (he connecting) when an end-user is connecting to multiple remote servers and he is doing some copy/paste operations in one remote server?

 

The purpose of this issue is that users conveniently is to do some kinds of works such as image manipulation and documentation with Word/PowerPoint/Excel by using the remote desktop protocol.
 The current clipboard architecture of this Apache Guacamole project isn't flexible. Because the content of the remote clipboard is sometimes reset, users have to copy the data (images & rich text & others) again. So, this gives users some inconveniences.
 I tried to fix these inconveniences by adding flexibility to the clipboard feature.
 Moreover, we can't know when the rich text & image of the clipboard will be supported in Apache Guacamole.
 *So, I think that this change is currently needed.*

 ",,
Complete support for keyboard interactive authentication,GUACAMOLE-141,13028167,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,roleohibachi,roleohibachi,14/Dec/16 18:10,11/Dec/20 06:41,17/Feb/21 11:14,,,,,,,SSH,,,,,,1,features,security,,,,"SSH servers using two-factor or two-step authentication generally require multiple keyboard-interactive prompts. An example is the google-authenticator-libpam PAM module; others exist as well. Although Guacamole supports keyboard-interactive password authentication for SSH, only the first prompt is handled (which is assumed to be the prompt for a password).

Full support for keyboard interactive must be added for two factor SSH authentication to work.

This had been successfully patched previously (GUAC-836 in the old JIRA, circa version 0.9.2), but the patch was not implemented in the master branch, and so was not maintained. Using the patch on 0.9.10-incubating or 0.9.9 results in no change in functionality. ","guacamole: all
SSH server: google-authenticator-libpam 1.03",cantlep,MathiasM,roleohibachi,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-02-03 12:56:32.775,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-836,,,,,,,,,,9223372036854775807,,,Tue Jan 02 04:18:29 UTC 2018,,,,,,,"0|i37lrj:",9223372036854775807,,,,,,,,,,,,,,,,,"03/Feb/17 12:56;cantlep;I realise this isn't the ""perfect"" solution, but you could use the 2FA on the web server URL itself. I know that this would require then turning 2FA off for users who may well be accessing systems via another method (i.e onsite using PuTTY, etc). or, you could do something like this...

What I have done is  create a generic user in AD that has SSH access permissions to a server (but with no elevated privilege), In the .bash_profile of that user, trap the ability to ctrl +c and then execute an ssh properuser@localhost (where properuser is the normal user who would log in and get prompted for 2FA).

This works for me and offers a solution to still use 2FA. 

As I said though, it's just a work-around...","02/Jan/18 04:18;vnick;This issue still seems to exist in the latest versions, and, unfortunately the patch doesn't apply to the current code.",,,,,,,,,,,,,,,
Provide audit log for system modifications,GUACAMOLE-1224,13343066,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,leo87las,leo87las,28/Nov/20 04:31,01/Dec/20 01:40,17/Feb/21 11:14,,,,,,,guacamole-client,,,,,,0,,,,,,"Guacamole Client could potentially log system modification events, including:
* User administration (create, delete, update, and password events)
* Connection administration (create, delete, update)

These events could at least be logged into Tomcat somewhere, or potentially tracked within a separate table in the database.",,leo87las,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-11-28 04:31:56.0,,,,,,,"0|z0l0ao:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support 2FA Directly in LDAP Extension,GUACAMOLE-1212,13340563,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,nayruden,nayruden,13/Nov/20 17:08,13/Nov/20 18:54,17/Feb/21 11:14,,,,,,,guacamole-auth-ldap,,,,,,0,,,,,,"I'm using FreeIPA in my environment. I have guacamole-auth-ldap enabled and configured and it works fine for users who do not have 2FA enabled. For our users with 2FA enabled, we are using TOTP tokens provided by FreeIPA.

When investigating a tcpdump between guacamole and the LDAP server, I can see that guacamole passes the username and password to the LDAP server twice. This works fine for a traditional username and password, but for a 2FA-enabled user, the second authentication attempt returns failure since the TOTP is one-time use. 2FA login attempts result in the guacamole logs outputting ""successfully authenticated"" while the web UI shows ""Invalid Login"" in a red banner.",,nayruden,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-11-13 17:15:45.143,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Nov 13 18:54:12 UTC 2020,,,,,,,"0|z0kkw0:",9223372036854775807,,,,,,,,,,,,,,,,,"13/Nov/20 17:15;vnick;Are you able to try the 1.3.0 code from git? I'm wondering if this is related to GUACAMOLE-1149, so wondering if this is already resolved?","13/Nov/20 17:29;nayruden;No, I can't easily try this out with the latest from Git. However, I think this is a different issue. Even if I disable 2FA on a user and log in successfully, I cannot enable 2FA and log in after Guacamole has created resources for the user (the linked issue says it's only a problem on the first login). Additionally, I am not using guacamole-auth-totp – the TOTP is provided by LDAP/FreeIPA directly.","13/Nov/20 18:54;vnick;[~nayruden]: Ah, okay, sorry about that - sounds like we may need some additional hooks in the LDAP module to handle the 2FA request, similar to how we do things with the RADIUS module. I've never worked with an LDAP server that supported 2FA directly, so I may have to try to spin up FreeIPA and see what happens.",,,,,,,,,,,,,,
"Sort files by ""date modified"" in File Browser",GUACAMOLE-1208,13339236,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,FG74,FG74,06/Nov/20 19:45,06/Nov/20 20:50,17/Feb/21 11:14,,1.2.0,,,,,guacamole-client,,,,,,0,,,,,,"Currently it is only possible to sort files alphabetically in the File Browser. If it were possible to order them alternatively also by ""modification date"" it would facilitate the selection by the user (usually you want to download the recently created file).

!image-2020-11-06-16-41-51-920.png|width=387,height=362!",,FG74,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Nov/20 19:41;FG74;image-2020-11-06-16-41-51-920.png;https://issues.apache.org/jira/secure/attachment/13014849/image-2020-11-06-16-41-51-920.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2020-11-06 20:50:48.87,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Nov 06 20:50:48 UTC 2020,,,,,,,"0|z0kcp4:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Nov/20 20:50;mjumper;That information is currently not communicated within the Guacamole protocol, where these files are described as name+type pairs. That information would need to somehow be added, ideally in a backward-compatible way. Including that information within a MIME type parameter like {{application/octet-stream; modified=2020-11-06Z20:49:09}} might make sense, assuming these parameters are indeed arbitrary and we can define our own (or use an existing one) without violating standards.",,,,,,,,,,,,,,,,
OpenID -- Add Implementation of Authorization Code Flow,GUACAMOLE-1200,13337898,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Ghost_Knight,Ghost_Knight,29/Oct/20 15:50,29/Oct/20 15:50,17/Feb/21 11:14,,,,,,,guacamole-auth-openid,guacamole-client,,,,,2,,,,,,"Currently the openid implementation only implements the Implicit Flow which is not regarded as industry standard anymore.

Reference: https://auth0.com/docs/flows/authorization-code-flow

This ticket is to expand the current implementation to allow the following features:
 # Configuration parameters to enable Authorization Code Flow (Still want to have Implicit Flow support)
 # Add front-end support for Authorization Code Flow using open source libraries that are approved implementations of what we need.  I.e. [oidc-client-js|https://openid.net/developers/certified/#RPLibs:~:text=oidc%2Dclient%2Djs%201.3]

I have been unable to find direct AngularJS modules that would solve this issue, but I will keep looking.",,army1349,Ghost_Knight,haeringd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-10-29 15:50:34.0,,,,,,,"0|z0k4gg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add auto resize to VNC sessions,GUACAMOLE-1196,13336931,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mbo77,mbo77,23/Oct/20 13:56,23/Oct/20 18:46,17/Feb/21 11:14,,1.2.0,,,,,VNC,,,,,,0,,,,,,"As discussed on the mailing list:

{quote}
I'm running a TigerVNC session on the server where Guacamole is installed. If I connect with the TigerVNC viewer there is this nice feature that the remote desktop is automatically resized if the viewer window is resized, like this if offered with RDP already.

Is there a configuration how to achieve this with a Guacamole session as well for my VNC connection?
{quote}

Historically, this could not be done without corresponding support within libvncclient. This should now be possible through handling the required message type ({{SetDesktopSize}}):

{quote}
Unfortunately my team had to come up with a home baked solution for this about 2 years ago. But it involved hacking up libvnc.

BUT, I think it is feasible to submit a feature request for it because now libvnc recently tagged a new version that includes the message type that guacamole needs to do this:
Tag: https://github.com/LibVNC/libvncserver/releases/tag/LibVNCServer-0.9.13
New message: https://github.com/rfbproto/rfbproto/blob/master/rfbproto.rst#setdesktopsize
{quote}

See: [http://apache-guacamole-general-user-mailing-list.2363388.n4.nabble.com/Auto-resize-of-VNC-sessions-td9511.html]",,mbo77,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-10-23 18:38:07.961,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Oct 23 18:46:26 UTC 2020,,,,,,,"0|z0jyhk:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Oct/20 18:38;mjumper;The support mentioned above appears to be specific to server message handling (libvncserver), not the capabilities of the libvnc client (libvncclient). The only mention of {{SetDesktopSize}} that I can find within the source so far is specific to messages received by libvnc's server implementation. There does not appear to be any facility for sending that message as a client.","23/Oct/20 18:46;mjumper;It may yet be possible, even without specific support from libvnc, by using the library's support for sending any generic message to the VNC server. The example cited within GUACAMOLE-609 shows something similar being done with {{WriteToRFBServer()}}:

{code:none}
        rfbQemuExtKeyEventMsg ke;
        memset(&ke, 0, sizeof(ke));
        ke.type = 255;
        ke.subtype = 0;
        ke.down = pressed ? 1 : 0;
        ke.keysym = rfbClientSwap32IfLE(keysym);
        ke.keycode = rfbClientSwap32IfLE(keycode);
        WriteToRFBServer(client, (char *)&ke, sz_rfbQemuExtKeyEventMsg);
{code}

See: https://github.com/rainforestapp/guacamole-server/pull/1/commits/9b03aaf6339442d6e8346719a846d5375858d4ef",,,,,,,,,,,,,,,
Karaf service wrapper not working on Raspberry Pi,KARAF-2734,12691033,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,st.huber,st.huber,24/Jan/14 13:51,09/Oct/20 04:05,17/Feb/21 11:14,,2.3.3,,,,,,,,,,,3,features,newbie,,,,"Hello,

I tried to install the Karaf service wrapper on a Raspberry Pi as described on this site http://karaf.apache.org/manual/latest-2.3.x/users-guide/wrapper.html. There it is said that it ??should work with any distribution??.

Unfortunately if I try to execute the created script with _/etc/init.d/KARAF-service_ start I get following error:
{quote}
 $ sudo update-rc.d KARAF-service defaults
update-rc.d: using dependency based boot sequencing
insserv: warning: script 'K01karaf-service' missing LSB tags and overrides
insserv: warning: script 'KARAF-service' missing LSB tags and overrides
insserv: warning: script 'karaf-service' missing LSB tags and overrides

 $ /etc/init.d/KARAF-service start
Starting Karaf...
/home/pi/apache-karaf-2.3.3/bin/KARAF-wrapper: 1: /home/pi/apache-karaf-2.3.3/bin/KARAF-wrapper: *Syntax error: ""("" unexpected*
{quote}

If I then change the first line of KARAF-service from  #! / bin / sh to #! / bin / bash I don't get that error anymore but another one:
{quote}
 $ /etc/init.d/KARAF-service start       Starting Karaf...
/etc/init.d/KARAF-service: line 417: /home/pi/apache-karaf-2.3.3/bin/KARAF-wrapper: cannot execute binary file
/etc/init.d/KARAF-service: line 417: /home/pi/apache-karaf-2.3.3/bin/KARAF-wrapper: Success

 $ /etc/init.d/KARAF-service status
Karaf is not running.
{quote}
My assumption is that the service wrapper is not working, because the Raspberry Pi is build on an ARM architecture, rather than an intel one, which seems to be not supported.

Could you please help me fix this issue as it's important for me to be able to run Karaf as a service.

Best regards.
",Rasbian Wheezy 3.10,bhamail,daveismith,iodb,jbonofre,ldywicki,raboczi,st.huber,,,,,,,,,,172800,172800,,0%,172800,172800,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2014-01-24 21:10:54.468,,,false,,,,,,,,,,,,,,,,,,369776,,,Fri Jan 23 09:55:49 UTC 2015,,,,,,,"0|i1rqdj:",370078,,,,,,,,,,,,,,,,,"24/Jan/14 21:10;iodb;I ran into the same problem a while ago.

The Karaf wrapper feature uses Tanuki Software's Java Service Wrapper library. This library's native code is compiled for ARMv7, not the Raspberry Pi's ARMv6. 

Options include:
 - recompile JSW for the correct processor architecture (http://sourceforge.net/mailarchive/message.php?msg_id=30767505) 
 - file a bug report with Tanuki software and wait
 - switch to another service wrapper, like YAJSW (http://yajsw.sourceforge.net), which is all-Java, and therefore should run on any architecture

","25/Jan/14 17:38;jbonofre;We have to stay with the Tanuki JSW 3.2.3 because it's the latest one compliant with the Apache license.

For Windows 8 platform, I recompiled JSW for the target platform. I will check to cross-compile for ARMv6.

Regarding switching to another service wrapper library, I started some update/evaluation of Apache commons-daemon. As yajsw is under LGPL license, unfortunately, it's not fully compliant with the Apache license and so can't be included in Karaf.","06/Dec/14 22:00;daveismith;You can get Tanuki JSW 3.2.3 to work on a beaglebone black (also arm based) without too much hackery. Some instructions:
# download latest version of ant and put in a location of your preference (for me /opt/apache-ant-<version>).
# download Tanuki JSW 3.2.3 and uncompres to somewhere like (~/wrapper_3.2.3_src)
# cd ~/wrapper_3.2.3_src
# edit build32.sh and update WRAPPER_TOOLS to point to your ant install (/opt/apache-ant-<version>)
# cp src/c/Makefile-linux-x86-32 src/c/Makefile-linux-arm-32
# edit src/c/Makefile-linux-arm-32
#* {code:none}< COMPILE = gcc -O3 -Wall --pedantic
---
> COMPILE = gcc -O3 -Wall --pedantic -lm -fPIC
{code}
#* {code:none}
< 	${COMPILE} -shared -fPIC $(libwrapper_so_OBJECTS) -o $(LIB)/libwrapper.so
---
> 	${COMPILE} -fPIC -shared $(libwrapper_so_OBJECTS) -o $(LIB)/libwrapper.so
{code}
# run build32.sh

you may not need the second modification to the make file.","23/Jan/15 09:55;ldywicki;I checked yajsw and starting from version 12 is licensed under ASL v2 except two components which are not mandatory to run service: service manager and mail script: http://yajsw.sourceforge.net/#mozTocId236130
",,,,,,,,,,,,,
Optional KAR feature installation,KARAF-2960,12711713,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,siwatson,siwatson,01/May/14 14:34,09/Oct/20 04:04,17/Feb/21 11:14,,3.0.1,,,,,karaf,,,,,,0,,,,,,"I find the KAR feature of Karaf very useful, and a great way to manage server deployments. I notice that when a KAR is installed (via console, or from deploy dir), that all features are automatically installed.

Is it possible to only install the KAR's feature-repos and leave the features to be installed manually?

This would help where we have feature A and feature B, both depending on feature C. It's easy to include all three in one features XML but we might not want both A and B installing on every server. As things stand, we have to manually uninstall the ones we don't want.",,jbonofre,siwatson,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2014-05-01 15:11:39.383,,,false,,,,,,,,,,,,,,,,,,390034,,,Sun Sep 28 17:38:49 UTC 2014,,,,,,,"0|i1v6kf:",390272,,,,,,,,,,,,,,,,,"01/May/14 15:11;jbonofre;It sounds good to me. I will add an option to the KarService.","01/May/14 15:15;siwatson;Thanks, it would be great if it could be a config property for the Karaf installation (solely, or in addition to a console kar:install command switch) in order to minimise human error i.e. forgetting the optional command switch.","28/Sep/14 04:42;jbonofre;By the way, I created another Jira where the Kar service should use the start/startup mode attribute on the feature.","28/Sep/14 10:28;siwatson;Which JIRA did you create?","28/Sep/14 17:38;jbonofre;KARAF-3160",,,,,,,,,,,,
Kar installer/deployer should use the feature install attribute,KARAF-3160,12733262,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,jbonofre,jbonofre,11/Aug/14 15:21,09/Oct/20 03:57,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"By default, when installing a kar file (by directly dropping the kar file into the deploy folder, or using kar:* commands), all features contained in the kar file will be installed by default.
Karaf doesn't check the feature install attribute.
The feature install attribute can contains ""auto"" indicating that this feature should be automatically installed.

The kar deployer should check the feature install attribute to determine if the feature should be installed automatically or not.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-2960,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,411290,,,2014-08-11 15:21:02.0,,,,,,,"0|i1yrcf:",411282,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
karaf-maven-plugin install=auto support for aggregate features,KARAF-3263,12746115,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,GKTheOne,GKTheOne,06/Oct/14 12:07,09/Oct/20 03:57,17/Feb/21 11:14,,3.0.1,,,,,karaf,,,,,,0,,,,,,"When using karaf-maven-plugin:features-generate-descriptor, the generated <feature> tags for xml/feature dependencies are not merged with the feature.xml template so I cannot add install=""auto"" to the feature tag.

eg,
POM:
{code}
...
<packaging>feature</packaging>
...
<dependencies>
    <dependency>
        ....
        <artifactId>featureA</artifactId>
        <type>xml</type>
        <classifier>features</classifier>
    </dependency>
</dependencies>
...
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.karaf.tooling</groupId>
            <artifactId>karaf-maven-plugin</artifactId>
            <version>3.0.1</version>
            <extensions>true</extensions>
            <configuration>
                <aggregateFeatures>true</aggregateFeatures>
            </configuration>
        </plugins>
    </plugins>
</build>
{code}

feature.xml template (src/main/feature/feature.xml):
{code}
<?xml ...>
<features ...>
    <feature name=""featureA"" install=""auto"" />
</features>
{code}

results in:
{code}
<?xml ...>
<features ...>
    <feature name=""featureA"" install=""auto"" />
    <feature name=""featureA"" version=""..."" description=""..."">
        <!-- Generated descriptor -->
    </feature>
</features>
{code}

Since this is for generating an ""application"" feature from individual ""component"" features, and none of the ""component"" features are auto-install in one ""application"" and no-auto-install in another, I can work around this by specifying the install attribute in the ""component"" feature.xml.

So, would it be possible to merge aggregated features with the feature template? (eg, matching on name and only overriding the feature tag attributes except for version, so only install/description/resolver/start-level. Contents to be replaced with dependency feature content - we don't want to mess with those)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-10-06 12:07:47.0,,,,,,,"0|i20u1z:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cellar: cleanup Hazelcast maps when a group is deleted,KARAF-5633,13139897,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,shyrkov,shyrkov,21/Feb/18 13:08,08/Oct/20 14:32,17/Feb/21 11:14,,cellar-4.0.4,cellar-4.1.1,,,,cellar,,,,,,0,,,,,,"When a Cellar group is deleted, the corresponding Hazelcast maps remain there (org.apache.karaf.cellar.bundle.map.<group-name>, org.apache.karaf.cellar.repositories.<group-name>,  org.apache.karaf.cellar.features.<group-name>, etc.).

In effect, when the group is created again, those maps are taken with ""stale"" data.

 

My use case:

1) Create a new group ""temp""

2) Move one node (node1) to that group ""temp"" (the node is removed from ""default"" group)

3) Deploy some bundles on group ""temp""

4) Remove node1 from group ""temp"" and bring it back to group ""default""

5) Delete group ""temp"" (at this point the Hazelcast map date remains for that group)

6) When I create again the group ""temp"" and join node1, the cluster state is pulled from the old data and applied to my node1.

Thank you!",,jbonofre,shyrkov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-10-09 07:16:01.911,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Oct 09 07:16:01 UTC 2018,,,,,,,"0|i3qf4v:",9223372036854775807,,,,,,,,,,,,,,,,,"09/Oct/18 07:16;jbonofre;That's not so easy as the group lifecycle is decoupled from  the resources lifecycle. Let me check if I can add a hook there without too much deep refactoring. Else, I will postpone to Cellar 4.3.x with internals refactoring.",,,,,,,,,,,,,,,,
Use karaf:deploy goal to deploy feature,KARAF-5643,13140737,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,jozzan,jozzan,24/Feb/18 18:33,08/Oct/20 14:32,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"I think it would be great if you could use the karaf:deploy goal to deploy  a whole feature on a Karaf instance.

I've implemented it for my own use already. But I'm not sure about the actual implementation.

For now I just added an isFeatureArtifact parameter to the DeployPojo which requires the useProjectArtifact to be true as well.   ",,jbonofre,jozzan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-02-26 03:13:51.965,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Feb 26 03:13:51 UTC 2018,,,,,,,"0|i3qkb3:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Feb/18 03:13;jbonofre;I think feature and kar could make sense and I already planned this while ago. As I didn't have a lot feedback after I've implemented those goals, I didn't move forward. I will do that.",,,,,,,,,,,,,,,,
KAR:Create update feature file based on list of features provided,KARAF-5198,13078745,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,gmccone,gmccone,09/Jun/17 20:11,08/Oct/20 14:16,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"When you create a KAR file using the kar:create command, you can give it a list of features of the specified repo to include in the KAR file.

It appears that the feature file that is included in the KAR is copied straight out of the repo and includes all the features regardless of the those specified.

When the KAR is deployed, it is starting all the features in the feature file. In many cases this is resulting in the starting of numerous other features.

One good example of this is the cxf-dosgi repo's feature ""cxf-dosgi-base"" which has a feature defined for libs needed when running outside Karaf (or at least that is what the description says for the feature). It references a bunch of bundles that come with core Karaf and when this feature tries to install, it hangs the KAR deployer and Karaf won't shutdown correctly.

It would be nice if the feature file either removed those features that were not exported, or mark the feature with install=""manual"", assuming KARAF-5197 adds this capability.",N/A,gmccone,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-02-10 06:58:10.674,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Feb 10 06:58:10 UTC 2018,,,,,,,"0|i3g41b:",9223372036854775807,,,,,,,,,,,,,,,,,"10/Feb/18 06:58;jbonofre;That's good idea, the {{kar:create}} command could use a releases set optionally to define the feature started automatically (using the {{install}} flag).",,,,,,,,,,,,,,,,
Create dependant feature KAR files when KAR:Create find external feature dependancy,KARAF-5204,13079229,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,gmccone,gmccone,12/Jun/17 14:46,08/Oct/20 14:16,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"It would be nice if the KAR:Create command could create additional KAR files to capture all the listed dependencies for the requested feature. Currently you have to manually review the feature that you are exporting to a KAR and look for feature references that are external to the feature. This external feature review then has to be performed recursively on each external feature.

A good example of this is the aries-rsa repo which references the feature ""scr"", which is defined in the ""standard"" repository. After I exported aries-rsa, and tried to start it, it was missing the bundle org.apache.karaf.scr:org.apache.karaf.scr.management. Manually created the ""standard"" KAR to include the ""scr"" feature and aries-rsa-core feature then started successfully.",N/A,gmccone,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-12-13 14:02:23.033,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Dec 13 14:02:23 UTC 2017,,,,,,,"0|i3g65z:",9223372036854775807,,,,,,,,,,,,,,,,,"13/Dec/17 14:02;jbonofre;It could work if the provided features repository cleanly provides {{<repository/>}}. Then, we can iterate in the inner defined {{<repository/>}} and create the corresponding kar files.

However, unfortunately, in the case of the Aries RSA, it doesn't define {{<repository/>}} for the SCR feature (which is basically wrong).",,,,,,,,,,,,,,,,
Avoid repeated calls to ACLConfigurationParser.trimKeys/removeSpaces,KARAF-6115,13212066,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,lichtin,lichtin,27/Jan/19 08:29,08/Oct/20 14:12,17/Feb/21 11:14,,4.1.7,,,,,karaf,,,,,,0,,,,,,"Repeated calls to this method allocate quite a bit of memory that is showing during GC.

Excerpt from flight recorder:

!image-2019-01-27-09-23-40-248.png!

It would be better to 'trim' the configuration once only, e.g. in SecuredSessionFactoryImpl",,jbonofre,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jan/19 08:23;lichtin;image-2019-01-27-09-23-40-248.png;https://issues.apache.org/jira/secure/attachment/12956488/image-2019-01-27-09-23-40-248.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2019-01-27 14:52:15.099,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Jan 27 14:52:15 UTC 2019,,,,,,,"0|yi0ct4:",9223372036854775807,,,,,,,,,,,,,,,,,"27/Jan/19 14:52;jbonofre;Good idea, even if I don't think it's a huge memory consumption.",,,,,,,,,,,,,,,,
Provide a possibility to specify the Java debug port for child instances,KARAF-6653,13293361,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,jbonofre,oklimberg,oklimberg,23/Mar/20 18:19,08/Oct/20 13:27,17/Feb/21 11:14,,,,,,,karaf,,,,,,1,instance,,,,,"When using the '-d' option of 'instance:start', each instance JVM will listen on the same port 5005 for a debugger. There should be an easy option to specify the port instead of specifying all Java options using '-o'

 

 ",,cjonas,jbonofre,oklimberg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-03-23 18:22:24.197,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Mar 29 17:48:07 UTC 2020,,,,,,,"0|z0ct9k:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Mar/20 18:22;jbonofre;Yeah, it makes sense.","23/Mar/20 18:28;oklimberg;My first thought was to change the type of the debug option of the start command to String so users could specify the port using the known option. But this would make it impossible to distinguish between 'debug mode off' and 'debug mode on with default port'.","24/Mar/20 05:16;jbonofre;I would use a dedicated ""debug_options"" as we have ""java_options"". Thoughts ?","24/Mar/20 08:46;oklimberg;If I understood the code correctly, the current Java options are always stored in the instance.properties file upon start, correct? So even if you would have to specify the whole debug obptions '-Xdebug -Xnoagent -Djava.compiler=NONE Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=<CUSTOM_PORT>', you have to do it only once, correct?","28/Mar/20 07:16;jbonofre;I'm thinking more the property like we have for sshd or RMI. It's just a storage, used only if you start in debug mode.","29/Mar/20 17:48;oklimberg;Ah, okay, so you suggest to also provide a new shell command to set those specified debug options.
By default, those match the current ones, but your are able to override them. ",,,,,,,,,,,
"Improve Bundle state ""Waiting"" when some SCR components are not active",KARAF-6770,13312161,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,svogt,svogt,18/Jun/20 08:47,08/Oct/20 13:18,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Components are optional, so the ScrBundleState should return Active even though some components are not yet activated due to missing references.

Possible downside: Hard to see if components are missing. Maybe bundle:list should have another flag for printing waiting components. ",,svogt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-06-18 08:47:24.0,,,,,,,"0|z0fz20:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate SSH support (back) to libssh,GUACAMOLE-945,13283217,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,mjumper,jootuom,jootuom,04/Feb/20 10:36,07/Oct/20 14:21,17/Feb/21 11:14,,,,,,,SSH,,,,,,1,,,,,,"It appears Red Hat / CentOS stopped shipping libssh2 in version 8 which makes building Guacamole a hassle on those platforms - of course, this has nothing to do with Guacamole as such, but would it make sense to consider other libraries?

I didn't look into this in depth so not sure if there's major benefits feature-wise and how much work this would entail...

libssh seems to have undergone an external security audit recently so security could be one consideration.

re: CentOS, this is discussed here: https://bugs.centos.org/view.php?id=16492",,jootuom,mjumper,randeffects,shishax,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-02-04 12:24:30.57,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Oct 07 14:21:44 UTC 2020,,,,,,,"0|z0b4zs:",9223372036854775807,,,,,,,,,,,,,,,,,"04/Feb/20 12:24;vnick;Interesting, and a shame.  The power of libssh2 is that it's very simple and straight-forward to use - it does a few things very well, and that's pretty much all we need.  We could look at adding support for or migrating to the OpenSSH library - I'm guessing that's the most available and popular one - it's just going to take some work to make the switch, and I don't know if there are any licensing issues, although that tends to be less of an issue with guacd since we don't distribute binary code.

Thanks for submitting this - definitely good to know for our roadmap.","04/Feb/20 12:25;vnick;...and, looks like RHEL8 ships with libssh (vs. libssh2), so not sure how much work it would be to support both of those options.","27/Feb/20 03:52;mjumper;I think it shouldn't be too bad, and I'm willing to give it a shot. I took care of the original migration from libssh to libssh2 (which was motivated by a need for SSH agent forwarding support), and I think it was a relatively easy migration:

https://jira.glyptodon.com/browse/GUAC-432","27/Feb/20 04:05;mjumper;Regarding licensing, yes, I agree this shouldn't be an issue given that it's not a required feature nor distributed as part of a release in binary form. The libssh library is LGPLv2, which is indeed [Category X|https://www.apache.org/legal/resolved.html#category-x], but the same would apply to libvncclient (which is GPLv2).","07/Oct/20 13:19;shishax;Any update about adding support to the OpenSSH library?

I'm dealing with some sshd instances with very strict policies (e.g. only EtM MACs allowed) and since OpenSSH seems to be the only library that supports these features so far, it would be great to have it supported in guacd.","07/Oct/20 14:21;vnick;[~shishax]: To be clear, this is not about adding OpenSSH library support, this is about moving back toward (or perhaps adding the option of) libssh support (vs. libssh2).  libssh is *not* the OpenSSH library/API.",,,,,,,,,,,
Add support for connecting to kubernetes pods using exec,GUACAMOLE-1174,13326631,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,yaroslav.n,yaroslav.n,09/Sep/20 08:54,09/Sep/20 11:07,17/Feb/21 11:14,,1.2.0,,,,,guacamole-server,,,,,,0,,,,,,"Hi there,

We are using guacamole for connecting to kubernetes pods from inside a
cluster.
Current implementation is attaching to a running application, if it is not a shell you are not able to see a command prompt.

When guacd initiate a session it send a request using ""attach"" call, like
""/api/v1/namespaces/test/pods/test-pod/attach?stdin=true&stdout=true&tty=true"".

There is another way to initiate a session, using call ""exec"" with parameter
""command"",  ""/api/v1/namespaces/test/pods/test-pod/exec?command=/bin/sh&stdin=true&stdout=true&tty=true"".

This is important for us and I think it could be a useful feature and would
be great to add this to a codebase.
Thanks.",,yaroslav.n,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-09-09 08:54:08.0,,,,,,,"0|z0ifyo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hide download folder with disable-download parameter off.,GUACAMOLE-1166,13325541,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,pzab,pzab,01/Sep/20 14:52,01/Sep/20 14:57,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"Download folder doesn't work for us. It would be nice to have option to hide it but not to disable download capability completely.

We performed the test with 5 applications and got different errors while saving in each of them. It looks like application can not check that the file was saved successfully. We can not set disable-download parameter ""on"" because we need possibility to save file at user PC.

We mount shared folder between guacamole and VM so user can save the file at guacamole folder. Then we use guacamole combination (ctrl+alt+shift) to save it at local PC.",,pzab,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-09-01 14:57:10.789,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Sep 01 14:57:10 UTC 2020,,,,,,,"0|z0i98g:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Sep/20 14:57;vnick;If you're having trouble with that Download folder, it's probably worth posting over on the mailing list to try to resolve that and see if others can help you with that. I'm not sure that adding the capability to disable the Download folder while leaving downloads enabled is a good solution for a functionality issue with the Download folder.",,,,,,,,,,,,,,,,
Improve logging of RDP connection failures,GUACAMOLE-1142,13318327,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,georgi.yankov@sirma.bg,georgi.yankov@sirma.bg,20/Jul/20 19:49,20/Jul/20 21:07,17/Feb/21 11:14,,1.2.0,,,,,RDP,,,,,,0,,,,,,"I lost quite a bit of time today due to an issue. It would have been resolved WAY faster, if the logging for the FreeRDP was more verbose.

Issue was as follow:
 Tomcat9 from package manager, for the guacamole-client, v1.2, running under TOMCAT:TOMCAT; 
 guacamole-server v1.2, running as systemd service under USER1:USER1.

Issue was, that i had set the USER1 home directory as `/var/lib/tomcat9`, which was with TOMCAT:TOMCAT ownership.

As such, when trying to create a RDP session through the guacamole, it was failing in the GUI with generic error, and in the `guacd` logs with the following:
{code:none}
guacd[86198]: INFO: Creating new client for protocol ""rdp""
 guacd[86198]: INFO: Connection ID is ""$7a42dbb9-c455-456d-b3c7-de3e55d996f1""
 guacd[86239]: WARNING: FreeRDP initialization may fail: The current user's home directory (""/var/lib/tomcat9"") is not writable, but FreeRDP generally requires a writable home directory for storage of configuration files and certificates.
 guacd[86239]: INFO: Security mode: TLS
 guacd[86239]: INFO: Resize method: none
 guacd[86239]: INFO: User ""@d9c76574-ff04-41eb-8f09-e045a2e202a4"" joined connection ""$7a42dbb9-c455-456d-b3c7-de3e55d996f1"" (1 users now present)
 guacd[86239]: INFO: Loading keymap ""base""
 guacd[86239]: INFO: Loading keymap ""en-us-qwerty""
 guacd[86239]: ERROR: Error connecting to RDP server
 guacd[86239]: INFO: User ""@d9c76574-ff04-41eb-8f09-e045a2e202a4"" disconnected (0 users remain)
 guacd[86239]: INFO: Last user of connection ""$7a42dbb9-c455-456d-b3c7-de3e55d996f1"" disconnected
 guacd[86198]: INFO: Connection ""$7a42dbb9-c455-456d-b3c7-de3e55d996f1"" removed.{code}

 As you can see, there is a simple `ERROR`, which means ABSOLUTELY nothing. Its terribly descriptive.
 But thats not all.
 The main issue is, that the `WARNING` present, is also misleading. The cause of the issue was in fact permissions, because the user under which `guacd` runs, needs to have write permissions for its $HOME directory, to create the FreeRDP `.config` folder.

 

Meaning, the `WARNING` should actually be `ERROR` and a bit more descriptive.",Ubuntu 20.04 LTS Server,georgi.yankov@sirma.bg,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-07-20 21:04:11.16,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jul 20 21:04:11 UTC 2020,,,,,,,"0|z0h0vc:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Jul/20 21:04;mjumper;{quote}
Meaning, the `WARNING` should actually be `ERROR` ...
{quote}

That message is logged at the ""warning"" level rather than ""error"" because it is not necessarily an error. There is no way to know at the point that the message is logged that the connection will fail, and no way to know at the point that the failure occurs that it is due to the condition warned about. It is a warning because it is a known incorrect configuration which may cause trouble, and should be noted by the administrator if things are misbehaving.

{quote}
... and a bit more descriptive.
{quote}

The message reads:

""FreeRDP initialization may fail: The current user's home directory (""/var/lib/tomcat9"") is not writable, but FreeRDP generally requires a writable home directory for storage of configuration files and certificates.""

Certainly that is descriptive enough?

I don't disagree that there should be better logging of the failure that occurs within FreeRDP, however:

* I don't think the issue here is the log level of the warning (which I would argue is correct)
* Internal log messages from FreeRDP are available via guacd's ""debug"" log level, but beware that we relegated the internal FreeRDP messages to the ""debug"" level for a reason. They are very low level, and often more confusing than helpful, particularly when things are actually functioning without issue.
* FreeRDP does expose additional error information that we can hook in to for the benefit of a better error message, but beware that the failure in this case would likely also be confusing, with FreeRDP reporting that security negotiation has failed or similar.

So, overall:

* Yes, logging should be improved.
* No, that message is correct in being a warning.
* Given the information exposed by the FreeRDP library, improved logging would not have helped you here. Or ... perhaps more accurately: it is not possible to improve the logging to the point that it would have helped you in this specific case, and the existing warning already covers this to the degree possible.

{quote}
I lost quite a bit of time today due to an issue. It would have been resolved WAY faster, if the logging for the FreeRDP was more verbose.
{quote}

If things are not behaving as expected, reading through the logs for things like warnings would be a best practice. For the case at hand, that warning really does seem pretty darn verbose.",,,,,,,,,,,,,,,,
Add support for tracking the time drift between guacamole and TOTP-tokens,GUACAMOLE-1056,13301777,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,sporeno,sporeno,29/Apr/20 11:10,14/Jul/20 12:24,17/Feb/21 11:14,,,,,,,guacamole-auth-totp,,,,,,0,,,,,,"Tokens/Display cards which generate codes directly on the device have an internal clock. According our investigates it seams to be normal that a time drift of 2 second per week seems to be in a common range. At some point the time drift of these token is to high so the TOTP- extensions rejects the generated codes. Because it is not possible to correct the on an easy way, we will add a tracking of this time drift.

We added a new attribute for storing the value of the time drift next to the TOTP-Key. The module will accept 3 codes, one previous, one on time and one in the future. Depending on the accepted code the value will be decremented (previous) or incremented (future) or unchanged (on time). The new value will be used to compensate the timedrift on the next login.

The changed code will follow the next days.",,mjumper,sporeno,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-29 17:19:42.198,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Jun 16 06:40:40 UTC 2020,,,,,,,"0|z0e7ew:",9223372036854775807,,,,,,,,,,,,,,,,,"29/Apr/20 17:19;vnick;{quote}
Tokens/Display cards which generate codes directly on the device have an internal clock. According our investigates it seams to be normal that a time drift of 2 second per week seems to be in a common range.
{quote}

These doesn't seem right - the tokens that I've dealt with in the past (RSA SecurID and Gemalto eToken PASS) seem to be very reliable in terms of time-keeping, and are built specifically with a Real Time Clock that avoids this drift.

I'm not necessarily opposed to the improvement you suggest - and, if it's something you've already done and want to put in a pull request for it, that would be fine - but 2 seconds per week seems like an outrageous amount of drift and not something I've ever experienced.","30/Apr/20 06:52;sporeno;I am with you; these drifts are not ok. I also expected more accuracy. May it's an issue of the used token vendor, but changing the tokens is currently not an option.

The code is online.

 ","16/Jun/20 02:16;mjumper;I was initially wary of these proposed changes, but [RFC 6238 contains a recommendation for a similar mechanism to manage drift|https://tools.ietf.org/html/rfc6238#section-6]:

{quote}
h2. 6.  Resynchronization

Because of possible clock drifts between a client and a validation server, we RECOMMEND that the validator be set with a specific limit to the number of time steps a prover can be ""out of synch"" before being rejected.

This limit can be set both forward and backward from the calculated time step on receipt of the OTP value.  If the time step is 30 seconds as recommended, and the validator is set to only accept two time steps backward, then the maximum elapsed time drift would be around 89 seconds, i.e., 29 seconds in the calculated time step and 60 seconds for two backward time steps.

This would mean the validator could perform a validation against the current time and then two further validations for each backward step (for a total of 3 validations).  Upon successful validation, the validation server can record the detected clock drift for the token in terms of the number of time steps.  When a new OTP is received after this step, the validator can validate the OTP with the current timestamp adjusted with the recorded number of time-step clock drifts for the token.

Also, it is important to note that the longer a prover has not sent an OTP to a validation system, the longer (potentially) the accumulated clock drift between the prover and the verifier.  In such cases, the automatic resynchronization described above may not work if the drift exceeds the allowed threshold.  Additional authentication measures should be used to safely authenticate the prover and explicitly resynchronize the clock drift between the prover and the validator.
{quote}

Given the above, I think the idea is OK as long as the maximum allowed drift is configurable.","16/Jun/20 06:40;sporeno;I updeaded the commit with a totp-max-offset parameter....

 

 ",,,,,,,,,,,,,
Implement Maximum auto-reconnect attempts,GUACAMOLE-1126,13315184,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,erodriguez19,erodriguez19,06/Jul/20 15:59,11/Jul/20 00:29,17/Feb/21 11:14,,,,,,,guacamole-client,,,,,,0,,,,,,"Using guacamole for 60+ users I've realized that sometimes, RDP hosts ""go away"" because of hardware issues, dns issues, etc and users might not be aware of it. 
 For example, they leave their computer with the browser open with session established and going on... When this happens, Guacamole tries to auto-reconnect every 15 seconds without any limitation (some times indefinitely) and also, SESSION TIMER is renewed because of fake? user activity.
 I've implemented a counter which allows automatic reconnection attempts for up to 4 tries. When tried 4 times, countdown timer is not further applied and so user is left with manual Reconnect dialog prompt as usual.
I `ve not implemented a visual indication like 1/4 2/4,etc because it involves transalations and other ""more complex"" stuff.",,erodriguez19,manolan,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-07-06 16:21:34.965,,,false,,,,,,,,,,Patch,,,,,,,,9223372036854775807,,,Sat Jul 11 00:29:51 UTC 2020,,,,,,,"0|z0ghjc:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Jul/20 16:04;erodriguez19;Do you find this [proposed patch|https://github.com/echu2013/guacamole-client/commit/1ba5f18dc0a4569d24f35d5ff7d464dbc08f91a8] OK ?
Ready to create pull request if approved","06/Jul/20 16:21;vnick;[~erodriguez19]: I think we've discussed this in the past as something we'd like to implement; however, I would suggest that it be a configurable setting rather than a set number of tries, and that it default to continuous retries (the current behavior) unless otherwise configured.  This should likely be a Connection Attribute (vs. Parameter), similar to the load balancing stuff.  I also think it's probably worth taking the time to work through implementing the counter (1/4, 2/4, etc.) - we can help you through that.

Feel free to submit the pull request (maybe put it in draft mode) and we can work through it.","06/Jul/20 16:24;erodriguez19;[~vnick] OK Nick , I will now submit PR and I will try to make further changes to achieve to goals you suggested.","06/Jul/20 16:38;manolan; 

+1 for default being current behaviour.

 

In my configuration, when you try to connect, the remote host is started on Google Cloud. While this is usually very quick, it can sometimes take a little while. Our users are ""trained"" to let it keep trying.

 ","11/Jul/20 00:29;erodriguez19;[~manolan] IMHO it's not OK to rely on errors indefinitely...

I can't imagine any user standing in front of a browser waiting ""for ever"" until a connection gets established... In this case it will be fine to discuss maximum retries (in this proposal 4 rounds of 15 seconds totalling 1 minute).

In any case defining a ""sane"" parameter will get the user to wait X amount of seconds and then if the upper limit was reached they will just need to tick on ""Reconnect"" button which is pretty much effortless. ",,,,,,,,,,,,
"Add the ability to specify separate permissions for ""History"" and ""Active sessions"" tabs",GUACAMOLE-538,13150371,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,magicfab,magicfab,05/Apr/18 16:10,04/Jul/20 22:39,17/Feb/21 11:14,,,,,,,guacamole,,,,,,1,,,,,,"In Settings > Users > $USER > Permissions, I'd like to be able to set two extra permissions:
 * access sessions History tab
 * access Active Sessions tab.

This would help when it's required to provide a manager access to history and active sessions, while avoiding giving them full admin rights (change/add users/connections).",,igvazal,magicfab,mjumper,pasik,vnick,vwguac,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-460,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-04-06 02:09:51.095,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Apr 06 15:26:18 UTC 2018,,,,,,,"0|i3s75j:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Apr/18 02:09;mjumper;Rather than add such specific permissions, I think it would be better to establish more reasonable criteria for whether those screens are displayed. Having {{ADMINISTER}} permission on one or more connections, for example, might be a good one.","06/Apr/18 12:29;vnick;This is at least related to, if not a duplicate of GUACAMOLE-460.","06/Apr/18 15:16;magicfab;The current ADMINISTER permission is all inclusive as I understand it. This issue is about having the choice to assign more granular permissions to the ""History"" and ""Acrives sessions"" tabs.

Another use case is giving a junior tech the ability to manage connections while not having access to active sessions and/or history.","06/Apr/18 15:26;vnick;{quote}
The current ADMINISTER permission is all inclusive as I understand it.
{quote}

That's not entirely true.  The way the Guacamole Client currently presents the ability to assign permissions, both at a global level and at a per-connection level, is simplified over what the back-end table actually supports.  If you look at the guacamole_connection_permission table, you will see that the rows in that table get inserted include several different permissions.  One of the changes that would go along with what Mike mentioned would be the ability to control at a more granular level the permissions that get assigned in that table.

{quote}
Another use case is giving a junior tech the ability to manage connections while not having access to active sessions and/or history.
{quote}

Again, going back to that table, this should already be possible in how the permissions are stored - there are permissions for READ, UPDATE, DELETE, and ADMINISTER.  The Junior Tech you mention could have READ and UPDATE privileges, allowing for modifying the connection, but may not have system-level permissions to create new connections.  Also, if ability to see history and active sessions was tied either to the ADMINISTER privilege for a connection or to some permission on user objects, then this should be possible.

I was also thinking about the possibility of adding an AUDIT permission.  I don't know if this is even necessary, but might be worth considering.",,,,,,,,,,,,,
Support redirecting to originally requested URL after successful OpenID login,GUACAMOLE-808,13238100,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,parth.mishra,parth.mishra,07/Jun/19 04:06,04/Jul/20 21:32,17/Feb/21 11:14,,1.0.0,,,,,guacamole,guacamole-auth-openid,,,,,3,,,,,,"Upon successful authentication via OIDC, the user is returned to the redirect URI (e.g. {{https://myserver.com/guacamole/}}) even if they were requesting another Guacamole resource such as a Connection link. It would be nice if the user could be routed to the requested resource after successful authentication.

This way, if they were to click a direct link to a guacamole Connection they have access too, the successful authentication via the IDP can reroute them directly to the requested connection URL rather than the guacamole UI. Typically this is done with encoding the request URL with the ""state"" parameter of OIDC and verifying with the nonce. 

This feature could be really useful for relying on custom frontends without having to modify or reimplement the web app.",,bfloriang,mjumper,parth.mishra,tanakakz,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-560,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-06-07 17:43:22.334,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Aug 06 17:43:21 UTC 2019,,,,,,,"0|z03i74:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Jun/19 17:43;mjumper;Using the ""state"" parameter sounds like a reasonable solution, but this will need to be done carefully. It would need to be guaranteed that the application state stored within ""state"" (in this case the user's requested in-application path) cannot be manipulated externally, perhaps by cryptographically tying that state to the nonce.","07/Jun/19 19:29;parth.mishra;Right, because you verify with nonce anyways, tying state to it is an easy way to ensure no manipulation occured. 

Auth0 has a good explanation of how this works: [https://auth0.com/docs/protocols/oauth2/redirect-users]","06/Aug/19 01:59;tanakakz;I have a problem related to this case.  
There are guacamoles on the internal network and a reverse proxy for publishing to external networks. Guacamole and reverse proxy are published with different FQDNs (for example, aaa.local for internal and bbb.local for external). However, since openid-redirect-uri is a fixed value, everything is redirected to the internal FQDN. I think it would be desirable to be redirected to the requesting URI.  ","06/Aug/19 17:43;mjumper;[~tanakakz] - assuming what you describe is not bad practice, the ability to define multiple possible redirect URIs for the case that a single Guacamole instance is actually being served via multiple domains is a different issue. This issue deals only with the path within the application.",,,,,,,,,,,,,
Docker instructions shall stop using --link to link containers,GUACAMOLE-531,13147272,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,artisticcheese,artisticcheese,22/Mar/18 20:26,03/Jul/20 20:07,17/Feb/21 11:14,,,,,,,guacamole-docker,,,,,,0,,,,,,"As per docker documentation ([https://docs.docker.com/network/links/)] use of  `-link` is deprecated and will eventually be removed in future versions of docker, it shall be replaced with user defined networks.",,artisticcheese,casperl,pasik,starke.gardner,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-07-03 09:27:04.41,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Jul 03 20:07:16 UTC 2020,,,,,,,"0|i3ro3z:",9223372036854775807,,,,,,,,,,,,,,,,,"03/Jul/20 09:27;casperl;This seems to be a very old ticket but still not resolved. This might confuse new users since it is deprecated in Docker 1.9.","03/Jul/20 20:07;vnick;[~casperl]: Yes, no one has taken up the challenge, yet :-D.  If you're game, you are welcome to work on it!",,,,,,,,,,,,,,,
TOTP authentication dialog has no focus,GUACAMOLE-1118,13314338,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jsmaldone,jsmaldone,30/Jun/20 15:58,30/Jun/20 15:59,17/Feb/21 11:14,,1.2.0,,,,,guacamole-auth-totp,,,,,,0,,,,,,"When prompted to enter the TOTP access code, the input is not automatically focused.",,jsmaldone,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-06-30 15:58:20.0,,,,,,,"0|z0gcgg:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support to disable auto-complete on credential fields,GUACAMOLE-1105,13312000,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,tusharjain,tusharjain,17/Jun/20 16:39,24/Jun/20 12:37,17/Feb/21 11:14,,,,,,,guacamole-client,,,,,,0,,,,,,"Looking for a way to disable storage of user credentials in the browser. The user can select to save the credentials in the browser accidently or unknowingly. And if it is a shared computer, anyone who opens the login page again, can just select the username and the password automatically gets displayed in the password box. Want to disable this auto-complete feature from Guacamole itself, something similar to what happens on net banking sites",,mjumper,tusharjain,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-06-23 18:29:48.848,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Jun 24 12:37:47 UTC 2020,,,,,,,"0|z0fy20:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Jun/20 18:25;tusharjain;Just wanted to know, if the resolution for this is planned in 1.2.0.... Would really appreciate, if it was,......though i understand that there may not be much time left for the release.","23/Jun/20 18:29;vnick;[~tusharjain]: No, it will not be in version 1.2.0 - it hasn't even been started, yet.  Scope for 1.2.0 is fixed and there will be no further additions to it other than identified regressions from 1.1.0.","23/Jun/20 18:33;tusharjain;Okay.","23/Jun/20 18:41;mjumper;Please also keep in mind:

# This issue is not currently being actively worked on.
# If/when this feature becomes part of a future release depends on how important the Guacamole community as a whole considers the feature.

If this issue is particularly important to you, contributions are more than welcome - please feel free to take a shot at it and send a PR our way.","24/Jun/20 12:37;tusharjain;Sure Mike, .....Would love try this out myself as soon i get a hang of Angularjs!",,,,,,,,,,,,
Spanish translations for TOTP and other authentication plugins,GUACAMOLE-1097,13310930,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Mezo,Mezo,11/Jun/20 15:06,11/Jun/20 16:02,17/Feb/21 11:14,,,,,,,guacamole-auth-cas,guacamole-auth-duo,guacamole-auth-openid,guacamole-auth-radius,guacamole-auth-totp,,0,,,,,,Spanish translations for some authentication plugins. I will open a pull request.,,Mezo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-06-11 15:06:14.0,,,,,,,"0|z0frhk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable true touchscreen multi-touch event forwarding,GUACAMOLE-1075,13305695,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,nstohler,nstohler,18/May/20 14:41,18/May/20 15:14,17/Feb/21 11:14,,1.1.0,,,,,guacamole,,,,,,0,,,,,,"Instead of converting touchscreen events into mouse events and send those to the RDP client, we would like to forward the touchscreen multi-touch events directly to the RDP client. 

 

Currently (1.1.0), any touch events get converted to mouse events. It's possible to enable the touchpad events, which adds then the option to scroll with two fingers and pinch-zoom.

 

Our target app (RDP client) will be touch only, with the following gestures:
 * 2 hands, 2 fingers each, move: drag an object around
 * 2 hands, 3 fingers each, wheel turning motion: rotate an object

 

Is this achievable this with the current version of Guacamole?",Windows 10 (rdp client),nstohler,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-05-18 14:41:21.0,,,,,,,"0|z0ev9s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow load balancing groups to fail to next connection,GUACAMOLE-1022,13297721,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kangaroo22,kangaroo22,11/Apr/20 00:43,11/May/20 15:28,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"I have 78 hosts in a balanced connection group.  Let's say that the first host is down.  Now, when the user click on the connection group expecting to get a connection, they instead get a message that Guacamole can't connect.  If it can't connect to the first one, it should try the next one, then the next one until it finds one that works.

 ",,jcharaoui,kangaroo22,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-11 00:55:38.707,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon May 11 15:28:36 UTC 2020,,,,,,,"0|z0diq8:",9223372036854775807,,,,,,,,,,,,,,,,,"11/Apr/20 00:55;vnick;[~kangaroo22]: The load balancing in Guacamole does not currently check the status of the individual connections within that group.  I agree this is a potential improvement, though I'm going to mark it is Minor.

Thanks for the suggestion!","11/Apr/20 01:09;vnick;Actually, i see that you're not even suggesting status checks, per se, just the ability to continue to the next connection if one isn't available.","12/Apr/20 01:27;kangaroo22;Hi Nick.  Although I would *love* Guacamole to check the status of individual hosts, I understand why this would be difficult.  However, load balanced groups without having the ability to continue to the next connection are not very useful as I discovered when the first host in a list of 78 was down.

There are other issues with load balanced groups that I would like to bring to your attention as well.  For example, to the user, there is no visual difference between the appearance of an organizational group and a load balanced group.  Load balanced groups open up just like organization groups.  Unless the user knows that it's a load balanced group (and there's nothing to tell them that it is), the user is more likely to just open up the group, and select a host.  Load balanced groups need to display differently to distinguish themselves from organization groups.  As an admin, I would also like an option to not allow even allow opening the group.   I'd like the user to see the group name maybe followed by how many hosts total in the group, and how many in use (ideally how many are down, but as per above, I know this isn't easy).","12/Apr/20 12:14;vnick;[~kangaroo22]: Yes, that's understandable.

Regarding your other points...
* I would not be opposed to coming up with some other graphical representation for a Load Balancing group vs. an Organizational group.  I agree this could be useful.
* It's been a while since I did anything with Load Balancing groups in Guacamole, but I seem to remember that it is possible to give users access to just the load balancing group and not the underlying connections, and they'll still be able to connect to one of the underlying connections even without direct access to them or the ability to see them.","13/Apr/20 08:48;mjumper;This should already be the case. Since GUACAMOLE-267, if a connection within a balancing group fails, Guacamole should transparently try another available connection within the group. This will only happen if you connect to the group. If you expand the group and explicitly click on one of its connections, you'll be connecting to that connection directly without any balancing.

{quote}
As an admin, I would also like an option to not allow even allow opening the group.
{quote}

This option already exists. You do not need to grant users access to connections within a balancing group (and generally probably shouldn't, as it will allow your users to bypass the balancing). To a user that can see only the group, the group appears to be a connection.","13/Apr/20 13:35;kangaroo22;I tried again with slightly different result.  After some experimentation, I'm going to assume that the result was probably due to session affinity.  If session affinity is enabled, and the host the user was connected to is no longer available, the user won't be able to connect to another host.  A sub-option of session affinity might allow the admin to allow the user to switch host in the event of host failure (""session affinity failover"" maybe).

 ","14/Apr/20 07:21;mjumper;I'm not sure that would make sense. The point of session affinity is to allow the user to be routed to the same underlying connection due to some underlying session state which must be maintained. In a situation where session affinity is desired, isn't the best option to present the user with an error so that they know their previous session is gone / temporarily unavailable due to a failure? They can then decide whether to log off and give up, in which case they'll be routed to a different machine next time, or to continue retrying in the hopes that the failure is transient.

I would think that automatically failing over despite session affinity would be confusing in the case of a true failure and dangerous in the case of a transient failure.","16/Apr/20 01:12;kangaroo22;Hi Mike.  It wasn't obvious at all to me that if I logged out of Guacamole completely then logged back in, I could get another connection.  After more testing, it seems that's how it works.  I just don't know if this is clear to a user using the system.  It wasn't clear to me.

 ","11/May/20 15:28;jcharaoui;I've been testing session affinity and I also think there could be improvements.

For example, if a connection becomes unavailable because the connexion weight is changed to ""-1"", the Load Balanced Group will fail for that user until they log out. The same happens if the client was disconnected, and in the mean time another user logged into the target computer.

In both of these cases the error message displayed is ""This connection is currently in use, and concurrent access to this connection is not allowed. Please try again later."" If the user doesn't care about their previous connection, it's not clear at all that what they need to do is log out and log back in.

Perhaps a more acceptable approach to this problem would be to implement *optional* failover. If for whatever reason the client is unable to reestablish the connection using the affinity parameter, instead of failing hard it could display a more informative error message which includes the option to attempt to reconnect to the Load Balanced Group while ignoring affinity parameters. For example:

""We were unable to reconnect you to your previous connection. Would you like to attempt to reconnect using a new connection?""",,,,,,,,
Randomize generation of TOTP key until enrollment is confirmed,GUACAMOLE-1068,13303854,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Mezo,Mezo,09/May/20 15:05,09/May/20 16:16,17/Feb/21 11:14,,,,,,,guacamole-auth-totp,,,,,,1,,,,,,"When activating TOTP 2 factor authentication, the first time a user enters his credentials, the TOTP key is inserted in the database and the QR code is shown. If the user does not complete the enrollment by entering the OTP code, the key remains in the database and it will be reused next time he tries again.

This opens a window between when the account is created and when the user indeed verifies the OTP token, where an attacker that already knows the username and password of the user, can get the generated OTP token. It will be the same that the user gets when he finishes enrolment. The user doesn't know that this key has been stolen and can be used in the future.

Security would be increased if the key would be generated randomly every time until the pin code is entered and the enrolment process is finished, as the malicious user would get a different key, and only the key validated by entering the pin would be stored in the database. The attacker would be able to get a key, but when the legitimate user tries to login and the QR code is not displayed anymore the attack would be uncovered.",,lucasmogari,Mezo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-05-09 15:05:24.0,,,,,,,"0|z0ejww:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optional notification and delay on session kill,GUACAMOLE-1063,13303494,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jcharaoui,jcharaoui,07/May/20 22:02,07/May/20 22:02,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"When killing a session, allow administrators the option to send targetted users a warning message asking them to end their session. At the end of a configurable delay, the connection, if still active, would be forcibly killed.",,jcharaoui,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-05-07 22:02:55.0,,,,,,,"0|z0ehpc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for arbitrary LDAP bind patterns,GUACAMOLE-536,13150321,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,jcasale,jcasale,05/Apr/18 14:39,02/May/20 20:20,17/Feb/21 11:14,,,,,,,guacamole-auth-ldap,,,,,,0,,,,,,"The current LDAP authentication scheme can recursively search the base DN only when a bind DN is used. When biding with the user attempting to log on, the bind DN format pattern is not exposed through configuration which imposes unnatural restrictions forcing the user to exist in a single container.

If the format pattern was exposed for configuration, for DSA's which allow flexible bind patterns such as Active Directory, configuration could allow ""DOMAIN
 %s"" or ""%s@domain.com"" and for those DSA's which do not, you would simply configure the restrictive full DN as the pattern.

The use case is that we use Active Directory anddo not allow bind accounts so the restriction prevents all users from accessing the application as our topology is not flat (we need to pick a single container therefor excluding everyone else).

A working Java implementation of an LDAP auth scheme that facilitates this is [Gitblit|http://gitblit.com/properties.html], see the realm.ldap.* configuration properties. Setting the bind pattern to the UPN such as:
{code:java}
realm.ldap.bindpattern = ${username}@domain.com
{code}
allows the flexible configuration in our Active Directory environment.",,jcasale,pasik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-04-05 14:39:43.0,,,,,,,"0|i3s6uf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow Guacamole Server to Maintain Disconnected Sessions,GUACAMOLE-685,13207189,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,vnick,vnick,01/Jan/19 22:23,01/May/20 12:32,17/Feb/21 11:14,,,,,,,guacd,,,,,,3,,,,,,"I'm proposing a change to Guacamole, particularly guacd, to allow for disconnecting sessions in such a way that guacd maintains the sessions in the background and allows those sessions to be resumed later.  This would allow for overall session persistence, even with connections that don't natively support it (pretty much everything but RDP).

This would, at a minimum, require some sort of signaling between the Guacamole Client and guacd stating that a session is being disconnected, or, perhaps, a change in the default behavior such that sessions are maintained by guacd unless they are explicitly shut down by the client.  The API and guacd already support joining an existing session, so the support should already be in place to allow for joining the existing session, so long as it is maintained by guacd.",,davebarkerxyz,homeuser,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-01-01 22:23:43.0,,,,,,,"0|u00fog:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a new shortcut for ALT+TAB,GUACAMOLE-1033,13298917,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,erodriguez19,erodriguez19,16/Apr/20 23:21,26/Apr/20 09:25,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,easyfix,features,,,,"Provide a new shortcut in addition of Ctrl-Alt-Shift and Ctrl-Alt-End that sends to the client through RDP they Alt-Tab combo keyspress.
I have the working code, should I issue a Pull Request?",,erodriguez19,mjumper,salia,vnick,,,,,,,,,,,,,60,60,,0%,60,60,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-17 13:07:27.937,,,false,,,,,,,,https://github.com/echu2013/guacamole-client/commit/60299bb944abb03cdd0457cccfa003ab3b070e3b,,,,,,,,,,9223372036854775807,,,Sun Apr 26 09:25:46 UTC 2020,,,,,,,"0|z0dq4o:",9223372036854775807,,,,,,,,,,,,,,,,,"17/Apr/20 13:07;vnick;If you have changes, feel free to submit them.

I did look at the URL you posted for the updated branch, and I'm wondering what made you choose ""Alt-Q"" as the key combo for this?  Is this a standard for other RDP clients?  The other key combos we've implemented - for example Ctrl-Alt-End to substitute for Ctrl-Alt-Del, is because it is a common key combo in other RDP clients.","17/Apr/20 13:51;erodriguez19;{noformat}
and I'm wondering what made you choose ""Alt-Q"" as the key combo for this?  Is this a standard for other RDP clients?  
{noformat}
It is not a standard.through RDP you just press ALT-TAB and it works just fine, but using Google Chrome or Firefox ALT-TAB never reaches the client so it´s captured by the host running the web browser.

I chose Q because it's just to the right of the original Key TAB.","17/Apr/20 18:52;mjumper;I would think Alt+Q is pretty likely to be used by other applications, and this would interfere with normal operations of those.","17/Apr/20 21:35;erodriguez19;{noformat}
I would think Alt+Q is pretty likely to be used by other applications, and this would interfere with normal operations of those.{noformat}
Which Applications for example?","26/Apr/20 05:51;salia;How about using Shift+Tab? I think it's not really used, browsers let it through and is more in line with using just 'modifier' keys. ","26/Apr/20 06:04;mjumper;Shift+Tab is commonly used for un-indent in word processors.","26/Apr/20 09:25;salia;Maybe then this should be customizable in the connection settings (like many window managers allow mapping key combos to functions) - otherwise there will always be some conflict (in the connection settings at least it's the user's choice) . Being able to switch windows via keyboard would be very useful. ",,,,,,,,,,
Implement Active Session and History Tracking in LDAP Module,GUACAMOLE-305,13073302,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kkellner,kkellner,19/May/17 01:57,09/Apr/20 18:47,17/Feb/21 11:14,,,,,,,guacamole-auth-ldap,,,,,,2,,,,,,"If users and connections are defined within LDAP the negative impact is that  session are not logged in ""History"" records or show any ""Active Sessions"" in the Guacamole settings area. 

I assume this because of referential integrity within MySQL (e.g., if there is no user or connection record within MySQL, the history table can't hold the record).   As LDAP becomes more popular as a store of users/connections need to figure out a way to enable the Active sessions and History functionality.   Maybe the data should just be inserted with username and connection name.",,kkellner,lucasmogari,mjumper,pasik,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-05-19 02:30:22.278,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Aug 02 13:02:56 UTC 2017,,,,,,,"0|i3f787:",9223372036854775807,,,,,,,,,,,,,,,,,"19/May/17 02:30;mjumper;The reason connections within LDAP do not show up within Active Sessions and History is that the LDAP auth doesn't currently implement those features. The only authentication backend which does thus far is the database auth.

Within Guacamole's extension architecture, it is up to each extension to provide its own connection tracking semantics. That's not to say this isn't doable. I'd say that some of the internals of the database auth should be moved into a common library which the other auth backends could share, rather than reimplement.","19/May/17 02:58;kkellner;Is this true of the ""Active Sessions"" code as well?   I'm assuming there is a in-memory HashMap that is holding this data as there isn't a MySQL table for Active Sessions.","02/Aug/17 13:02;vnick;Currently Active Sessions are stored completely in-memory - there is a history table for historical connections, but it is only populated after the connection completes.  There are some discussions about changing this for the purposes of HA, but no direction has been decided upon, yet.",,,,,,,,,,,,,,
Support Token Based Authentication for Kubernetes,GUACAMOLE-1012,13296643,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,ChadSikorra,ChadSikorra,06/Apr/20 19:45,06/Apr/20 19:48,17/Feb/21 11:14,,,,,,,Kubernetes,,,,,,0,,,,,,"Currently, the only supported way for authentication to the Kubernetes API is by supplying a client key, as documented here:

[https://guacamole.apache.org/doc/gug/configuring-guacamole.html#kubernetes]

However, Kubernetes also supports token based authentication in the form of an authorization header:

[https://kubernetes.io/docs/reference/access-authn-authz/authentication/#putting-a-bearer-token-in-a-request]

It would be useful to have support for this in general as an alternative authentication mechanism. And for some environments, this is the only thing possible for authentication (EKS in AWS).",,ChadSikorra,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-04-06 19:45:12.0,,,,,,,"0|z0dc2o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide configuration for filtering LDAP groups,GUACAMOLE-996,13294457,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,ruhrmann,ruhrmann,27/Mar/20 13:02,03/Apr/20 23:36,17/Feb/21 11:14,,,,,,,Documentation,guacamole-auth-ldap,,,,,1,,,,,,"*Problem:*

If you have an LDAP-Directory where Users and Groups are in the same subtree and you don't use LDAP for Connection-Storage (guacConfigGroup) you get all objects under the DN configured as ldap-group-base-dn returned as groups.

*Example:*

Our directory looks like this:

DC=AD,DC=company,DC=de
 * OU=faculty
 ** Group1
 ** Group2
 ** Group3
 ** ...
 ** OU=students
 *** Student0001
 *** Student0002
 *** Student0003
 *** ...
 *** Student1999

As ldap-group-base-dn I have to configure OU=faculty,DC=AD,DC=company,dc=de

But then I get in the Web-UI all Groups and all Students as Group-Objects which makes no sense

*Suggested fix*

I have a fix for me but as I am not a programmer, I don't know how to implement it the right way.

I changed in UserGroupService.java line 92 from:

{{return new PresenceNode(""objectClass"");}}

to

{{return new AndNode(new EqualityNode(""objectClass"",""group""));}}

and added

{{import org.apache.directory.api.ldap.model.filter.AndNode;}}

at line 34.

Thanks for making this great project!

 

Peter

 

 ",,erodriguez19,lucasmogari,mjumper,ruhrmann,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/20 19:02;erodriguez19;UserGroupService_donotretrieveall.patch;https://issues.apache.org/jira/secure/attachment/12998026/UserGroupService_donotretrieveall.patch",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2020-03-27 13:27:33.453,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Apr 03 23:36:28 UTC 2020,,,,,,,"0|z0czds:",9223372036854775807,,,,,,,,,,,,,,,,,"27/Mar/20 13:27;vnick;Good catch, thank you, Peter.  I think your fix is perfect - if you'd like to submit a pull request for this change we would welcome it!  Otherwise I'm happy to do it with your suggested changes.","27/Mar/20 13:36;vnick;Actually, looking at the code a little closer, it looks like maybe the original intention was that this would behave this way.  That said, I think it might be good to limit these, and provide a way to configure what object class and/or filter is used to find groups, similar to the ldap-user-search-filter option.  Since the object class used for group varies implementation-to-implementation, I think that we'll want to make it configurable rather than hard-coding it.","27/Mar/20 14:36;ruhrmann;Thanks Nick. I think you are right, there should be a configuration option ldap-group-search-filter or something like that.","27/Mar/20 18:40;erodriguez19;Ups sorry, I`ve duplicated this! Just found the same thing! Great catch here","27/Mar/20 23:16;ruhrmann;[~erodriguez19]: Thanks, this was quick! Your patch would work in my situation, but it would only work as long as there are no other objects in the subtree containing an attribute with that name. And it would not return empty groups as they don't have a member attribute. This should not be a problem in most situations but maybe implementing a new configuration option ldap-group-search-filter would be more flexible (but perhabs slower?).","28/Mar/20 01:39;vnick;I believe ldap-group-search-filter is the way to go - it'll only be as slow as the filter that you enter and your LDAP server at applying the filter, and allows someone to either use the presence filter as Edgardo specified or their own custom filter.  It also follows after the precedent set by the code using the ldap-user-search-filter.","02/Apr/20 19:04;vnick;[~ruhrmann] or [~erodriguez19] Care to submit a pull request with your changes for this?","02/Apr/20 19:56;erodriguez19;Check if it is correct: [https://github.com/apache/guacamole-client/pull/491]

Note that I am using my original proposed solution, not the one proposed here (which is indeed better), right now I have not invested time in a filter for groups.","02/Apr/20 23:45;vnick;[~erodriguez19]: Thanks for that, but, sorry, I think I wasn't clear.  I was talking about pushing forward with the solution that involves allowing a ldap-group-search-filter to be specified within guacamole.properties so that the group search is configurable similar to the ldap-user-search-filter for users.","03/Apr/20 00:09;erodriguez19;[~vnick] Don't worry, I thought so. Either way, IMHO I think that this a good start. Having or not ldap-group-search-filter implemented, it's not right to retrieve everything (containing objectClass) from LDAP. ldap-group-search-filter should be complementary (or substitute if declared) to ldap-member-attribute, because if not, that attribute should be removed from configuration.","03/Apr/20 00:39;mjumper;{quote}
Having or not ldap-group-search-filter implemented, it's not right to retrieve everything (containing objectClass) from LDAP. ldap-group-search-filter should be complementary (or substitute if declared) to ldap-member-attribute
{quote}

The expectation for users and groups is that they will be separated in distinct subtrees of the directory, and that the base DN of each will therefore separate objects into users and groups.

In the case of a directory where users and groups are mingled, a filter would be needed to separate these, and that filter would be specific to the directory in question. Defaulting things to a filter involving the member attribute would not be correct, as it would exclude empty groups.

{quote}
... because if not, that attribute should be removed from configuration.
{quote}

Why should any attribute be removed from the configuration?","03/Apr/20 01:05;erodriguez19;Retrieving anything from LDAP as a ""group"" is not effective and so is pretty much undesired. Thinking always in scenarios where LDAP is not used as a configuration store. So, I think that having a filter is very useful but having a concrete fallback is also needed. Retrieving groups without members is needless and pointless because a group is formed by members, otherwise it's just a named object.","03/Apr/20 01:18;erodriguez19;Think the following: ldap member attribute is defined to be *miembros*, but ldap group search filter seeks objects containing the attribute *computers* (and miembros is never defined on these kind of objects), why would be use those as groups if the other condition logically excludes them (when matching users with their corresponding groups ) when applying groups permissions?
I think of ldap group search filter as a complementary and finegrained way to reduce ammount of objects retrieved by an admin.","03/Apr/20 01:20;vnick;[~erodriguez19]: I think part of implementing this filter would also include implementing a reasonable default value for the filter, such as (objectClass=group) or something similar and relatively compatible with as many LDAP schemas as possible.  However, I agree with Mike that filtering (by default) for anything that has a defined member attribute is probably not the best route.","03/Apr/20 08:02;ruhrmann;[~vnick]: Feel free to submit a pull request with a solution. I think you need to add a getGroupSearchFilter() to ConfigurationService.java and a LdapFilterGuacamoleProperty LDAP_GROUP_SEARCH_FILTER to LDAPGuacamoleProperties.java.

The hard-coded lines of my suggested fix in UserGroupService.java line 92 would change to something like

{{if (confService.getGroupSearchFilter() != null)}}
 {{    return new AndNode(new EqualityNode(""objectClass"",conService.getGroupSearchFilter()));}}

This is all untested and just what I think from having a quick look to the code. I am not a programmer but I think something like this would be a solution.

Regarding the default behaviour: Mike is right. The most directories separate users from groups, so the default should be no filtering. But if you have that problem with the weird directory structure I have, filtering would take place if the LDAP_GROUP_SEARCH_FILTER attribute is defined.

 ","03/Apr/20 19:55;ruhrmann;[~vnick]: Thanks for submitting this! I looked at your code and this looks all good. The only thing I would consider is if it wouldn't be more consistent to return just a a PresenceNode(""objectClass"") in ConfigurationService.java if nothing is configured. This would be consistent with the behavior of the LDAP_USER_SEARCH_FILTER. For ""normal"" directories with separeted users and groups it would return all group objects without configuration (except those with ""objectClass""=""guacConfigGroup"").

But this is just a question how the default behavior should be. For my needs your solution is perfect. Thanks a lot!","03/Apr/20 23:36;erodriguez19;There you go

 

[https://github.com/apache/guacamole-client/pull/496]

Testeted and fully working."
Provide GuacamoleProperty List Implementations,GUACAMOLE-1006,13295846,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vnick,vnick,02/Apr/20 17:33,02/Apr/20 17:43,17/Feb/21 11:14,,,,,,,guacamole-auth-ldap,,,,,,0,,,,,,"In light of several questions that have surfaced on the mailing list over the past few days, it seems like it would be a good idea to implement a handful of list properties in guacamole-ext such that some of the properties - like LDAP and RADIUS servers - could make sure of these implementations to provide multiple options that could be looped.",,PinkyAndTheBrain,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-04-02 17:33:32.0,,,,,,,"0|z0d7xs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for QEMU extended key events,GUACAMOLE-609,13178856,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,faelis,faelis,14/Aug/18 13:36,25/Mar/20 16:17,17/Feb/21 11:14,,,,,,,VNC,,,,,,0,,,,,,"When guacamole is connected to a VM running inside qemu using the built in VNC, my physical azerty keyboard looks like acting as a qwerty keyboard.

If the layout inside the VM is set to qwerty it works nearly correct.

If the layout inside the VM is set to azerty it doesn't work (a=q,z=w, etc...).

If I use novnc instead of guacamole, the keyboard works fine.",Parrot VM inside KVM-QEMU,faelis,mjumper,ubergeek42,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-08-14 17:58:27.977,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Dec 06 19:57:03 UTC 2019,,,,,,,"0|i3x14v:",9223372036854775807,,,,,,,,,,,,,,,,,"14/Aug/18 17:58;mjumper;The difference here is actually in whether the VNC client supports QEMU's extension to the VNC protocol which allows keys to be sent with scancodes rather than keycodes:

https://github.com/rfbproto/rfbproto/blob/e4984de15832285df6f3ecfcaa6815a7d32239dd/rfbproto.rst#qemu-extended-key-event-message

The library Guacamole currently uses for VNC support, libvncclient, does not have support for this message, so adding support would likely mean migrating away from that library. This may well be necessary for adding other VNC protocol extensions not supported by libvncclient.

The issue you're encountering is not actually due to Guacamole not having the correct layout (VNC does not depend on keyboard layout and the Guacamole client is independent of keyboard layout), but rather QEMU being configured to expect that the client has a particular layout. For VNC clients which do not support QEMU's scancode extension, QEMU must translate key events into scancodes based on its own internal keymap. If that keymap does not actually match the layout selected within the guest OS, or you change the layout after the fact, this translation will fail and you will see strange effects like you've described.

In this case, the sequence of events actually is:

# You press ""A"" on your local azerty keyboard. Guacamole reads this as an ""A"" keypress and sends it as such.
# The Guacamole server receives your ""A"" keypress and sends it to the VNC server (QEMU) as an ""A"" keypress.
# QEMU receives the ""A"" keypress from Guacamole and needs to translate it into a scancode. It looks at the settings for the virtual machine, which is set either explicitly or by default to assume that the keyboard layout is qwerty. It sends the scancode for an ""A"" on a qwerty keyboard.
# The guest OS is configured for azerty. When it receives the scancode from QEMU, that scancode actually represents ""Q"".","06/Dec/19 16:42;ubergeek42;[~mjumper] It doesn't appear to be strictly required that libvncclient support this extension out of the box, as it's possible to implement support for custom messages/encodings as a client application using libvncclient. I've made a proof of concept of the changes required to support the qemu extended key message in the guacd server here:

[https://github.com/rainforestapp/guacamole-server/pull/1/commits/9b03aaf6339442d6e8346719a846d5375858d4ef]

The changes extend the `key` message to take a third argument containing the scancode. I have not tested it against non-qemu vnc servers yet. Is this an approach you'd consider merging upstream?","06/Dec/19 19:57;mjumper;It is definitely worth considering, however I'm hesitant about including scancodes within the {{key}} instruction. Doing so would be a step backward from Guacamole's intent to be layout-independent on the client side.

What about using a keysym-to-scancode translation layer similar to the RDP support? In that case, similar to RDP connections, VNC connections using QEMU would need to be configured with the keyboard layout of the machine within QEMU, but things would remain layout-independent on the client side.",,,,,,,,,,,,,,
Add non-nullable modifier to return type of functions never returning null,GUACAMOLE-986,13291068,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,vrana,vrana,11/Mar/20 12:26,13/Mar/20 08:34,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"If a function never returns null then it's return type should be marked as non-nullable.

This is an issue for [https://github.com/apache/guacamole-client/pull/479].",,mjumper,vrana,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-03-13 07:45:43.853,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Mar 13 08:34:13 UTC 2020,,,,,,,"0|z0cf4g:",9223372036854775807,,,,,,,,,,,,,,,,,"13/Mar/20 07:45;mjumper;[~vrana], can you add a description to your issue?","13/Mar/20 08:34;vrana;Done.",,,,,,,,,,,,,,,
"Automatically select ""text input"" on mobile devices",GUACAMOLE-380,13102248,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,mjumper,fxchef,fxchef,14/Sep/17 13:03,24/Feb/20 18:16,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"Selecting an appropriate input method on mobile devices can be difficult, particularly when the browser in use does not allow JavaScript to take control of the swipe-from-the-left gesture that Guacamole uses to show the menu. Ideally, a mechanism should be provided which allows the ""text input"" method to be selected automatically, either by default or based on context.",,fxchef,mjumper,pasik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-06-24 21:20:45.367,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jun 24 21:27:10 UTC 2019,,,,,,,"0|i3k2fj:",9223372036854775807,,,,,,,,,,,,,,,,,"24/Jun/19 21:20;mjumper;{quote}
Is this possible, or is there another way to do it?
{quote}

You can set the default input method on a per-browser basis within the ""Preferences"" tab of the settings screen. Once selected, that will be the default within the browser from that point forward.

{quote}
I can't seem to get the guac menu to show when connecting to a desktop through an ipad.
{quote}

Unfortunately, this is because iOS uses the swipe-from-the-left gesture to navigate backward in the browser history, and this gesture takes priority over JavaScript handling of the same. For Guacamole to see the gesture and open the menu, you would need to:

* Open the connection in a new tab, such that there _is_ no history.
* Bookmark the application to the device's home screen. Doing this grants the application greater control of what keyboard events can be captured, what gestures can be overridden, etc. I believe this would allow Guacamole to take full control of the relevant swipe gesture.","24/Jun/19 21:27;mjumper;Relevant to this, I recently looked into alternative ways that ""text input"" might automatically show/hide based on context. While it's been asked on the mailing list whether it's possible to have this happen automatically when an input field is focused, and we've explained that, no, it's not possible for Guacamole to know that you've clicked in an input field within the remote desktop (as the remote desktop does not expose this information), I think we _may_ be able to determine this heuristically.

It occurred to me that there is one indicator of context that remote desktops are fairly consistent with: the mouse cursor. If it were possible to identify when the mouse cursor changes to the typical ""I"" bar indicating text input, then the client side of Guacamole could use that as a hint to select a more appropriate input method on touch devices.

I've had some success with a proof-of-concept JavaScript neural network that recognizes ""I"" bar cursors. It's an unexpected application of machine learning, to be sure, but it seems to work pretty darn well.",,,,,,,,,,,,,,,
RDP French Canadian,GUACAMOLE-607,13177654,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,lvalerojb,lvalerojb,08/Aug/18 11:39,22/Feb/20 23:02,17/Feb/21 11:14,,,,,,,RDP,,,,,,0,,,,,,"Hello,

French Canadian is not available.

Is there a way to build it ?

Regards",,kavenr,lvalerojb,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Aug/18 11:38;lvalerojb;image-2018-08-08-07-38-14-043.png;https://issues.apache.org/jira/secure/attachment/12934798/image-2018-08-08-07-38-14-043.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2018-08-24 16:38:36.753,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Feb 22 23:02:01 UTC 2020,,,,,,,"0|i3wtpz:",9223372036854775807,,,,,,,,,,,,,,,,,"24/Aug/18 16:38;vnick;Yes, it is possible to add it - there have been several other layouts add for RDP.  I'm not familiar with it, nor do I have access to one, so I may not be of much help.","22/Feb/20 22:45;kavenr;I added it to my forked repo. Feel free to add it to your project. I'm not sure what's the procedure to have this code merged to the main project.

 

[https://github.com/kavenr/guacamole-server/commit/962b48fae4d6ea9f5a447b34e93fc26b9d3c30d3]","22/Feb/20 22:49;mjumper;[~kavenr], see:

https://github.com/apache/guacamole-server/blob/master/CONTRIBUTING

And:

http://guacamole.apache.org/open-source/#contribute

Essentially, open a PR against the upstream repo, ensuring your commit messages follow established convention.","22/Feb/20 23:02;kavenr;[~mjumper] thank you for the links. I'll try to open the pull request next week.",,,,,,,,,,,,,
Select all group members with one button or checkbox,GUACAMOLE-181,13037671,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,phoenixbb76,phoenixbb76,25/Jan/17 12:01,13/Feb/20 17:45,17/Feb/21 11:14,,,,,,,guacamole,,,,,,1,,,,,,"We need to select all group members of a connection group at once.

When a group contains too many connections it takes too long to select each of these connections to be added to an existing user (e.g. a sub-admin or an user that should be allowed to use each of these connections).",,Jhnk,mjumper,phoenixbb76,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-01-26 21:28:08.8,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Jan 26 21:28:08 UTC 2018,,,,,,,"0|i396l3:",9223372036854775807,,,,,,,,,,,,,,,,,"22/Dec/17 09:39;phoenixbb76;Just to know about the status of that feature request ...

When could we get such a feature?
For our company it is too time intensive to manage our connection for that huge amount of users (i.e. for each user we have to select each connection [up to 40 connections, for example] of a group).

Thanks for any response.

Kind regards and ... merry christmas.","25/Jan/18 10:35;phoenixbb76;Hi there,

I have added the following releases just to be up-to-date with that feature request.

Kind regards...","26/Jan/18 21:28;mjumper;{quote}
I have added the following releases just to be up-to-date with that feature request.
{quote}

While it's gratifying that you're watching the issues in JIRA which matter to you, there's no need to continuously update the list of versions which lack a requested feature. The ""affects versions"" field makes sense for bug reports, where something which was working is no longer working in a particular version, but it doesn't make sense for feature requests; the field would be a list of all past Guacamole versions.

I'll clear out this field.

{quote}
Just to know about the status of that feature request ...
{quote}

There's no need to ping the issue to discover this; you can see the status of this issue right here in JIRA. The issue is open, so it hasn't been completed, and it's not in progress nor assigned, so there is no work currently underway to implement this. As an open issue, it is on the table should anyone decide that they want to work on it.

If you are a developer yourself and would like to scratch your own itch, you're definitely more than welcome to take a stab at doing the necessary work and contribute the result upstream. This is how the project grows.",,,,,,,,,,,,,,
Allow connections to open directly as full-screen,GUACAMOLE-124,13022041,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,edekkers,edekkers,20/Nov/16 21:36,12/Feb/20 09:06,17/Feb/21 11:14,,,,,,,guacamole,,,,,,1,,,,,,"Within Guacamole right now, you have to open the remote desktop first, and then explicitly interact with the browser to make it fullscreen. It would be nice if Guacamole provided its own convenient mechanism for entering/leaving fullscreen mode, as well allow connections to open in fullscreen mode by default.",none yet,edekkers,mathieu.brunot,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/20 12:06;mathieu.brunot;guacamole_fullscreen.JPG;https://issues.apache.org/jira/secure/attachment/12992325/guacamole_fullscreen.JPG",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2016-11-20 22:40:47.749,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Feb 11 09:23:56 UTC 2020,,,,,,,"0|i36jyf:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Nov/16 22:40;mjumper;{quote}
Another great thing within Vmware is the on-top menu, there you can see several options like exit fullscreen, send keys, etc,. If we could change the CTRL-ALT-SHIFT function with this one I think it's more clear to end users.
{quote}

Perhaps, but such changes would need to be made carefully. The UI design principles of a virtualization solution (or a traditional remote desktop client) and Guacamole are very different. There's no question that sending common key combinations or providing fullscreen enter/exit buttons would be useful features, but there are other factors specific to Guacamole which need to be kept in mind as we consider approach.

Guacamole is above all intended to provide a seamless experience. To us, this means:

# To the extent possible with current technology, and given the state of the user's network/computer, full-screen Guacamole should not be distinguishable from local access. Consider this the ultimate goal of the software.
# To the extent that this is *not* possible (it definitely currently isn't), anything which mitigates these deficiencies must not itself make things worse (ie: must not be a step backward from that ultimate goal).

In practice, this means that the only UI component that should be visible at all by default is the display itself. Everything else needs to be kept out of the way, yet accessible if necessary.

This is not to say that these features are incompatible with the design of Guacamole ... it just means there is much thinking to be done.","31/Jan/20 11:53;mathieu.brunot;Maybe adding a comment in this old ticket is not the best but I think the original idea of having in Guacamole a simple ""fullscreen"" button would be very nice.

I have been testing Guacamole on an Android tablet for a few days and it works really well... the only problem is that on Android Chrome, there is no way to trigger the fullscreen like we can do on a computer.
 Having a button in the ""side"" menu to trigger the fullscreen would be perfect and even follow the objective of providing a seamless experience (see attachment for sample view).","11/Feb/20 09:23;mathieu.brunot;Hi [~mjumper],

I created a PR on Github for this : [https://github.com/apache/guacamole-client/pull/470]

Do you think this could be part of the release [1.2.0|https://issues.apache.org/jira/projects/GUACAMOLE/versions/12345046] ?",,,,,,,,,,,,,,
Migrate away from including auth token within REST API URLs,GUACAMOLE-956,13284498,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,mjumper,mjumper,mjumper,11/Feb/20 05:37,11/Feb/20 05:37,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"Guacamole's current REST API relies on including the user's auth token within the {{token}} query parameter. Using a query parameter in this way is generally regarded as bad practice, as other software between the user and the webapp may log the content of URLs and GET requests insecurely, including these parameters.

We should instead leverage HTTP headers, allowing the {{token}} parameter to be used only for compatibility's sake.",,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-02-11 05:37:04.0,,,,,,,"0|z0bcwo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Guacamole/Guacd Docker Process Privilege Drop,GUACAMOLE-890,13260632,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,aboccia,aboccia,04/Oct/19 20:16,30/Jan/20 19:19,17/Feb/21 11:14,,,,,,,guacamole-docker,,,,,,2,docker,security,,,,"Hello,

I noticed after deploying Guacamole in docker that the processes all run as the root user. Are there any plans to add support for specifying a user for the processes to drop privs to and run as instead of root? I am currently doing this rebuilding the containers for guacamole and guacd adding in my own user and using docker compose to exec all processes triggered within the container as that user. I feel like the option to specify this should be done upstream.

Thank You",,aboccia,hnz101,manolan,tortue,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-12-18 06:10:05.822,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Jan 30 19:19:15 UTC 2020,,,,,,,"0|z07b4g:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Dec/19 06:10;tortue;I've had no issue specifying a uid/gid in a compose file for the standard guacd image and having everything function as expected. I think the majority of the work in this area is on the guacamole container.","29/Jan/20 14:29;Jotam;You're right, we can easily choose a non-root user for the _guacd_ container, through the compose file, or using _-u_ option of the _docker run_ command.

Unfortunately, this does not work for the guacamole container... We then have one of the 2 components running as root, which is not really a good thing...

Could we then have a look at this security issue please ?

Would be nice to have this fixed for the 1.1.0 release.

Many thanks !","29/Jan/20 14:36;vnick;{quote}
Unfortunately, this does not work for the guacamole container... We then have one of the 2 components running as root, which is not really a good thing...
{quote}

Why not?

{quote}
Would be nice to have this fixed for the 1.1.0 release.
{quote}

This will not be fixed or changed in the 1.1.0 release - the release is almost completed and is in final RC stages, now.  *If* any changes need to be made they will be in a future release.","29/Jan/20 14:42;Jotam;Thank you Nick for your feedback.

Server processes are usually ment to be run as non-root user, so I think this report is rather important.

Perhaps it's a minor thing which prevents the guacamole container from starting using a non-root user ?

In its startup script perhaps ? Some permission issue ?

If so tiny / non-impacting thing, perhaps we could think about it as  a security improvement for 1.1.0 ?

Thank you again for your support & understanding !","29/Jan/20 14:51;vnick;{quote}
Server processes are usually ment to be run as non-root user, so I think this report is rather important.

Perhaps it's a minor thing which prevents the guacamole container from starting using a non-root user ?

In its startup script perhaps ? Some permission issue ?
{quote}

Yes, I understand and agree, and I would not suggest that anyone run something like Guacamole as a root user.  I do not use Docker, but I routinely run as non-root users in my environment.

My question to you is for you to provide us with more detail on what you're seeing that prevents you from running as a non-root user?  Please help us understand why this doesn't work, as I believe it should work perfectly fine.

{quote}
If so tiny / non-impacting thing, perhaps we could think about it as  a security improvement for 1.1.0 ?
{quote}

No, the only issues that will be included in 1.1.0 from this point are those that are considered regressions in functionality.  Because we haven't even determined that there is an issue here, to begin with, let alone what needs to be changed or the level of effort to change it, we will not alter the 1.1.0 release.  The only way this would make it into the 1.1.0 release at this point is if we determine very quickly that this is a regression due to another change in 1.1.0.  And, even then, it's getting a little late.","29/Jan/20 15:16;Jotam;So, below you can see that I easily start a guacd container using the 65534:65534 user.

I then try to do the same with the guacamole container, but it fails.

I then start it without the docker _-u_ option, and it flawlessly starts, but then the _java_ process runs as root user.

Feel free if you need more test / info to try to sort this out.

Thank you Nick for your support (y)

{{# docker run --name some-guacd -d {color:#00875a}-u 65534:65534{color} guacamole/guacd:1.1.0-RC1}}

{{# docker ps -a}}
{{CONTAINER ID IMAGE                     COMMAND                CREATED        STATUS       PORTS    NAMES}}
{{e145bb6006a2 guacamole/guacd:1.1.0-RC1 ""/bin/sh -c '/usr/lo…"" 10 seconds ago {color:#00875a}Up 9 seconds{color} 4822/tcp some-guacd}}

{{# ps -ef | grep guacd}}
{{{color:#00875a}nobody{color} 21286 21266 0 15:57 ? 00:00:00 /bin/sh -c /usr/local/guacamole/sbin/guacd -b 0.0.0.0 -L $GUACD_LOG_LEVEL -f}}
{{{color:#00875a}nobody{color} 21344 21286 0 15:57 ? 00:00:00 /usr/local/guacamole/sbin/guacd -b 0.0.0.0 -L info -f}}

{{# docker run --name some-guacamole --link some-guacd:guacd -e MYSQL_HOSTNAME=10.10.10.10 -e MYSQL_DATABASE=guacamole -e MYSQL_USER=guacamole -e MYSQL_PASSWORD='guacamole' -d {color:#00875a}-u 65534:65534{color} -p 8080:8080 guacamole/guacamole:1.1.0-RC1}}

{{# docker ps -a}}
{{CONTAINER ID IMAGE                         COMMAND                CREATED       STATUS                   PORTS    NAMES}}
{{b0826b7240c0 guacamole/guacamole:1.1.0-RC1 ""/opt/guacamole/bin/…"" 6 seconds ago {color:#de350b}Exited (1) 4 seconds ago{color}          some-guacamole}}
{{e145bb6006a2 guacamole/guacd:1.1.0-RC1     ""/bin/sh -c '/usr/lo…"" 2 minutes ago Up 2 minutes             4822/tcp some-guacd}}

{{# docker rm b0826b7240c0}}

{{# docker run --name some-guacamole --link some-guacd:guacd -e MYSQL_HOSTNAME=10.10.10.10 -e MYSQL_DATABASE=guacamole -e MYSQL_USER=guacamole -e MYSQL_PASSWORD='guacamole' -d -p 8080:8080 guacamole/guacamole:1.1.0-RC1}}

{{# docker ps -a}}
{{CONTAINER ID IMAGE                         COMMAND                CREATED        STATUS        PORTS          NAMES}}
{{b7e4d16aa766 guacamole/guacamole:1.1.0-RC1 ""/opt/guacamole/bin/…"" 13 seconds ago {color:#00875a}Up 13 seconds{color} 8080->8080/tcp some-guacamole}}
{{e145bb6006a2 guacamole/guacd:1.1.0-RC1     ""/bin/sh -c '/usr/lo…"" 3 minutes ago  Up 3 minutes  4822/tcp       some-guacd}}

{{# ps -ef | grep java}}
{{{color:#de350b}root{color} 24724 24706 7 16:01 ? 00:00:14 /docker-java-home/jre/bin/java -Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -classpath /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/usr/local/tomcat -Dcatalina.home=/usr/local/tomcat -Djava.io.tmpdir=/usr/local/tomcat/temp org.apache.catalina.startup.Bootstrap start}}","29/Jan/20 16:50;Jotam;OK, I made nice progress.
As 65534 user has {{/nonexistent}} as {{$HOME}} directory in the container, I gave him another one so that he can do the deployment, as required by [start.sh|https://github.com/apache/guacamole-client/blob/master/guacamole-docker/bin/start.sh] script.

{{# docker run --name some-guacamole --link some-guacd:guacd -e MYSQL_HOSTNAME=10.10.10.10 -e MYSQL_DATABASE=guacamole -e MYSQL_USER=guacamole -e MYSQL_PASSWORD='guacamole' -e HOME=/tmp -u 65534:65534 -p 8080:8080 guacamole/guacamole:1.1.0-RC1}}
{{{color:#DE350B}ln: failed to create symbolic link '/usr/local/tomcat/webapps/guacamole.war': Permission denied{color}}}

Still fails, but then the error is rather relevant, a permission one.
It's the very last step before catalina starts.
Perhaps we could then find a fix, or at least a workaround.","30/Jan/20 10:20;Jotam;Here's a fix !
https://github.com/apache/guacamole-client/pull/469","30/Jan/20 19:04;manolan; 

I'm not sure why this is still a problem. Perhaps I am missing something, but check these:

[https://github.com/docker-library/tomcat/issues/35]

[https://github.com/docker-library/tomcat/issues/68]

[https://github.com/docker-library/tomcat/issues/150]

 

It certainly should be possible to run as non-root. (And the solution *was* to change the permissions, rather than anything convoluted with the war file).","30/Jan/20 19:19;manolan; 

OK, digging further, we may be running with the wrong tomcat image.

 

If I follow things correctly, we are running with 8.5-jre8:
{code:java}
ARG TOMCAT_VERSION=8.5
ARG TOMCAT_JRE=jre8

...

# For the runtime image, we start with the official Tomcat distribution
FROM tomcat:${TOMCAT_VERSION}-${TOMCAT_JRE}
{code}
However, looking here [https://hub.docker.com/_/tomcat], that is not a supported tag. I believe it should be 8.5-jdk8. And looking at the build report for the issues I listed earlier, it seems to confirm that.

It seems that the jre8 tag was updated 8 months ago whereas the jdk8 tag was updated 8 days ago, so I assume jre8 is obsolete.

 ",,,,,,,
Radius Provider returns Group - like LDAP Provider,GUACAMOLE-792,13231924,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,drhy,drhy,07/May/19 04:53,26/Jan/20 19:30,17/Feb/21 11:14,,1.0.0,1.1.0,,,,guacamole-auth-radius,,,,,,3,features,,,,,"This Improvement would reduce admin for those of us who use Radius for authentication 
 against a Directory (in our case Microsoft Active Directory) with a database 
 provider that will be using Groups to mange connections, if Groups could be 
 used somehow. 

One possibility... 
 Radius Servers could be configured to return a Group name that matches a 
 Group in the database, by using the RADIUS Vendor-Specific attribute, set to 
 the desired Group name for that Server authentication rule. 
 In this wishful scenario the Radius provider would treat the Group name in 
 the same way the LDAP provider now appears to be doing with the resolution 
 of issue 715. 

Another possibility...
a property in guacamole.properties to tell guacamole that authentication by both the radius and ldap modules is required. This would ensure LDAP Group name retrieval after successful authentication by both the radius and ldap mdules.

(In our case, we need to use Radius instead of LDAP because of the 
 requirement to use MFA.) 
 [https://tools.ietf.org/html/rfc2865#page-47]
 Implies addition of guacamole.properties entries for the vendor-id and type. ",,drhy,lerou114,smith-ben,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,http://apache-guacamole-general-user-mailing-list.2363388.n4.nabble.com/Radius-Provider-returns-Group-like-LDAP-td5598.html,,,,,,,,,,9223372036854775807,,,2019-05-07 04:53:41.0,,,,,,,"0|z02g6w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Belgian Dutch Keyboard Support,GUACAMOLE-882,13256843,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Lesley,Lesley,16/Sep/19 10:36,15/Jan/20 14:24,17/Feb/21 11:14,,1.0.0,,,,,Documentation,guacamole-ext,RDP,,,,1,keyboard,keymap,layout,RDP,,"With US keyboard systems no problem. But with ""Belgium Dutch keyboard"" (point, not french) still an issue. (if i don't select a keyboard and set the remote server to US then it works fine but this should work seamlessly)

What are the best practices to create a .keymap file? How to read out the keyboard keys?

I can do it myself but cannot find where to start.

The current working .keymaps are here: [github|https://github.com/apache/guacamole-server/tree/master/src/protocols/rdp/keymaps] And i tried to search for a solution but still doesn't find an anwer in the quite a lot of search results on different sites/mailinglists.

Best regards.",debian,adroman,Lesley,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-01-15 14:24:12.278,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Jan 15 14:24:12 UTC 2020,,,,,,,"0|z06o5s:",9223372036854775807,,,,,,,,,,,,,,,,,"15/Jan/20 14:24;adroman;I'm also curious if there any guide for creating and installing keymap file (I need Russian layout).",,,,,,,,,,,,,,,,
Guacamole Rest API Documentation ,GUACAMOLE-872,13254927,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,samirchahine,samirchahine,05/Sep/19 07:03,27/Dec/19 03:55,17/Feb/21 11:14,,,,,,,Documentation,,,,,,2,pull-request-available,,,,,"I have created a new page for information regarding the access of the Guacamole API through a Rest Framework. 

In my search for a well documented list of api calls I was never able to find one, rather I broke apart the pre-built API to discover the endpoints necessary to make these functionalities possible.

 

This is the pull request: [https://github.com/apache/guacamole-manual/pull/123]",XML,haeringd,samirchahine,Txelu,vnick,,,,,,,,,,,,,0,0,,0%,0,0,,,,,,,,,"05/Sep/19 06:15;samirchahine;Screen Shot 2019-09-05 at 4.14.41 pm.png;https://issues.apache.org/jira/secure/attachment/12979521/Screen+Shot+2019-09-05+at+4.14.41+pm.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2019-12-04 18:27:22.696,,Updated the Documentation to include information regarding the endpoints available within the Guacamole API.,false,,,,,,,,,,Patch,,,,,,,,9223372036854775807,,,Wed Dec 04 18:27:22 UTC 2019,,,,,,,"0|z06cc0:",9223372036854775807,,,,,,,,,,,,,,,,,"04/Dec/19 18:27;vnick;[~samirchahine]: While I appreciate that getting this documentation may be higher priority for you, I've bumped the priority down to minor, as this priority represents the priority to the overall project and not to an individual user.",,,,,,,,,,,,,,,,
CAS global logout,GUACAMOLE-361,13094812,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Shirakaba,Shirakaba,15/Aug/17 17:31,03/Dec/19 01:32,17/Feb/21 11:14,,,,,,,guacamole-auth-cas,,,,,,5,,,,,,"It would be nice to have a configurable single sign-out option available when using CAS as the authentication method. For example to direct the Logout option in the menu to the CAS logout endpoint, to make sure that the Guacamole session, as well as the CAS session, are both ended.",,brodymac95,mjumper,Shirakaba,vnick,xia,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-393,,GUACAMOLE-680,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-08-15 23:12:56.501,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Dec 03 01:32:02 UTC 2019,,,,,,,"0|i3itdb:",9223372036854775807,,,,,,,,,,,,,,,,,"15/Aug/17 23:12;vnick;This has been requested before, and isn't necessarily the easiest thing to do in the current client, as there isn't any way in the code to override the logout method.  You can navigate to the cas/logout URL and that will sign you out of CAS and everything (including Guacamle) that might be signed in.

I can take a look and see what it would take to change this, but I'm guessing it would require some substantial changes to the base client code.","16/Aug/17 09:11;Shirakaba;Something that would be simple, yet effective in this case, is to have a configurable property like ""cas-logout-uri"" or possibly even a more generic ""logout-uri"", where one can configure an address the user will be redirected to when clicking Logout in the menu. If set to the CAS logout endpoint, Guacamole would first destroy the session and then redirect the user to the CAS logout page.","16/Aug/17 10:23;vnick;Sure, I understand - just saying that, first, it involves changes to the core Guacamole code, not just the CAS module, and, second, those changes have to be carefully considered.  It shouldn't be too difficult, I'd just like to get feedback from the other members of the project as to whether or not that's something they'd support seeing in Guacamole.","25/Sep/17 18:15;mjumper;I'm not too sure about ""overriding"" the logout mechanism, but hooking into logout is certainly an option we should explore. The Guacamole extension system doesn't currently provide a way for extensions to be informed that the user session is ending, or that the extension is being unloaded due to server shutdown. Adding such hooks would allow extensions to cleanup their internals, if necessary, and would allow the CAS extension to issue a request to the CAS logout endpoint.

Does CAS provide a logout endpoint that the server could ping when the Guacamole session is being closed?","28/Sep/17 16:41;vnick;{quote}
Does CAS provide a logout endpoint that the server could ping when the Guacamole session is being closed?
{quote}

Yep, by default you just append /logout to the end of the CAS base:
https://sso.example.com/cas/logout

And that ends your CAS session.  So, with the changes you just made, we should be able to do ""Single-Sign Out"" by redirecting over to the CAS Logout URL, which should invalidate the CAS session altogether.","01/Dec/19 00:35;xia;I took a stab at writing such a logout today and ran into a snag, which I'm guessing/hoping GUACAMOLE-680 will try to address.  I wrote a controller that deletes GUAC's localstorage objects, redirects to the CAS logout endpoint, and gets called when CASAuthenticatedUser.invalidated() is called.  For users who get the connections menu portion of the app, this logout works fine.  For a user with, for example a single RDP connection who eventually gets to the ""DISCONNECT"" dialog and chooses the Logout button...my endpoint is called, but it appears the browser has already been redirected (looks like it goes to ""/"") and begins to login (i.e. redirect to CAS) before I can log it out.   I'm guessing I'm blocked until GUACAMOLE-680 is done, unless anyone can point me in a direction I haven't considered...","02/Dec/19 00:19;vnick;[~xia]: Very nice!  Sounds like a great start to this!

Yeah, GUACAMOLE-680 may need to be finished before this.  If you want to submit the code you have as a PR we could definitely look over what you've done and see what needs to be reworked with regard to the redirect.  If it makes sense to do it as part of your pull request we can go that route, or maybe it'll help break -680 free.","02/Dec/19 03:18;xia;Thank you!  I'll get this one cleaned up (it's generally messy, but I'll also try to incorporate some of the guidance you provided from my last submission) and submit this one in the next day or two.","03/Dec/19 01:32;xia;Well, that was a mess!  :)   I had built it on top of the other code I was working on for groups, and when I separated it out...it broke!  Well, got it ""fixed"" and made a pull-request.  There's a bunch of things in this that ""seem to work"" but I don't yet fully understand.  I basically wrote code that mimic'd the login, but logs out instead.  As such, I've probably included a few too many things (empty credentials and the like)...all feedback graciously anticipated... just.please.don't.laugh...",,,,,,,,
Transfer of directory trees instead of just single files,GUACAMOLE-612,13179835,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,felix.wolfheimer,felix.wolfheimer,19/Aug/18 21:13,23/Aug/19 03:03,17/Feb/21 11:14,,,,,,,guacamole-client,guacamole-common,guacamole-common-js,,,,0,,,,,,"Currently, the file transfer feature in Guacamole allows only the transfer of single files. Although it's possible to create a zip archive, transfer the archive, and unpack on the remote side, this gets a bit cumbersome if the file transfer is needed often. The ability to transfer multiple files or even directory trees, would make the file transfer feature much more useful.",,felix.wolfheimer,pasik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-08-19 21:13:35.0,,,,,,,"0|i3x75r:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Mouse support for ssh,GUACAMOLE-798,13234218,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,akj88,akj88,20/May/19 07:34,12/Jul/19 05:20,17/Feb/21 11:14,,,,,,,SSH,Telnet,,,,,0,,,,,,"Mouse can be used in some of command-line applications such as htop. 

It would be nice if we could use mouse for these kinds of applications inside guacamole when connected to the remote node by ssh.

Thanks.",,akj88,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-05-20 07:34:17.0,,,,,,,"0|z02ubk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Italian translation update,GUACAMOLE-828,13241675,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,amenolo,amenolo,26/Jun/19 09:23,26/Jun/19 09:23,17/Feb/21 11:14,,1.0.0,,,,,guacamole-client,,,,,,0,,,,,,Going to fix and improve italian translation.,,amenolo,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-06-26 09:23:26.0,,,,,,,"0|z0446o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Automate aspects of schema update with Docker images,GUACAMOLE-777,13228807,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,develroo,develroo,18/Apr/19 09:17,18/Apr/19 17:05,17/Feb/21 11:14,,,,,,,guacamole-docker,,,,,,0,,,,,,"When pulling a newer guacamole  images from guacamole/guacamole:latest upon restart there is a critical DB error.

 

{{18-Apr-2019 09:08:16.895 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 4397 ms}}
{{09:09:04.896 [http-nio-8080-exec-4] ERROR o.a.g.rest.RESTExceptionMapper - Unexpected internal error: }}
{{### Error querying database.  Cause: org.postgresql.util.PSQLException: ERROR: relation ""guacamole_entity"" does not exist}}
{{  Position: 571}}
{{### The error may exist in org/apache/guacamole/auth/jdbc/user/UserMapper.xml}}
{{### The error may involve defaultParameterMap}}
{{### The error occurred while setting parameters}}
{{### SQL: SELECT             guacamole_user.user_id,             guacamole_entity.entity_id,             guacamole_entity.name,             password_hash,             password_salt,             password_date,             disabled,             expired,             access_window_start,             access_window_end,             valid_from,             valid_until,             timezone,             full_name,             email_address,             organization,             organizational_role,             MAX(start_date) AS last_active         FROM guacamole_user         JOIN guacamole_entity ON guacamole_user.entity_id = guacamole_entity.entity_id         LEFT JOIN guacamole_user_history ON guacamole_user_history.user_id = guacamole_user.user_id         WHERE             guacamole_entity.name = ?             AND guacamole_entity.type = 'USER'::guacamole_entity_type         GROUP BY guacamole_user.user_id, guacamole_entity.entity_id;          SELECT             guacamole_user_attribute.user_id,             guacamole_user_attribute.attribute_name,             guacamole_user_attribute.attribute_value         FROM guacamole_user_attribute         JOIN guacamole_user ON guacamole_user.user_id = guacamole_user_attribute.user_id         JOIN guacamole_entity ON guacamole_user.entity_id = guacamole_entity.entity_id         WHERE             guacamole_entity.name = ?             AND guacamole_entity.type = 'USER'::guacamole_entity_type}}
{{### Cause: org.postgresql.util.PSQLException: ERROR: relation ""guacamole_entity"" does not exist}}
{{  Position: 571}}

 

 

 

There ought to be some sort of sanity check when upgrading the DB schema.

 ",,develroo,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-04-18 12:22:08.536,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Apr 18 14:02:38 UTC 2019,,,,,,,"0|z01x0o:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Apr/19 09:44;develroo;Ok I see that there was a major DB change requiring and update of the schema. Explained [HERE|https://guacamole.apache.org/releases/1.0.0/#deprecation--compatibility-notes] however that schema update is not applied automatically but even when it is done manually an error still occurs.

 

{{18-Apr-2019 09:36:56.215 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 4377 ms}}
{{09:37:04.106 [http-nio-8080-exec-2] ERROR o.a.g.rest.RESTExceptionMapper - Unexpected internal error: }}
{{### Error querying database. Cause: org.postgresql.util.PSQLException: ERROR: permission denied for relation guacamole_entity}}
{{### The error may exist in org/apache/guacamole/auth/jdbc/user/UserMapper.xml}}
{{### The error may involve defaultParameterMap}}
{{### The error occurred while setting parameters}}
{{### SQL: SELECT guacamole_user.user_id, guacamole_entity.entity_id, guacamole_entity.name, password_hash, password_salt, password_date, disabled, expired, access_window_start, access_window_end, valid_from, valid_until, timezone, full_name, email_address, organization, organizational_role, MAX(start_date) AS last_active FROM guacamole_user JOIN guacamole_entity ON guacamole_user.entity_id = guacamole_entity.entity_id LEFT JOIN guacamole_user_history ON guacamole_user_history.user_id = guacamole_user.user_id WHERE guacamole_entity.name = ? AND guacamole_entity.type = 'USER'::guacamole_entity_type GROUP BY guacamole_user.user_id, guacamole_entity.entity_id; SELECT guacamole_user_attribute.user_id, guacamole_user_attribute.attribute_name, guacamole_user_attribute.attribute_value FROM guacamole_user_attribute JOIN guacamole_user ON guacamole_user.user_id = guacamole_user_attribute.user_id JOIN guacamole_entity ON guacamole_user.entity_id = guacamole_entity.entity_id WHERE guacamole_entity.name = ? AND guacamole_entity.type = 'USER'::guacamole_entity_type}}
{{### Cause: org.postgresql.util.PSQLException: ERROR: permission denied for relation guacamole_entity}}

 

 

How am I am supposed to upgrade the schema without rebuilding the database ?","18/Apr/19 10:00;develroo;Ok so I have to manually change the permissions on the DB as so.

guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_entity TO guacamole_user;

GRANT

guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_user_attribute TO guacamole_user;
GRANT
guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_user_group TO guacamole_user;
GRANT
guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_user_group_member TO guacamole_user;
GRANT
guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_user_group_permission TO guacamole_user;
GRANT
guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_connection_group_attribute TO guacamole_user;
GRANT
guacamole_db=# GRANT ALL PRIVILEGES ON TABLE guacamole_connection_attribute TO guacamole_user;
GRANT

 

This really should all be done in a sanity check when upgrading the docker image.

 ","18/Apr/19 12:22;vnick;A couple of notes for you.  First, regarding your issue with PostgreSQL specifically, the documentation on upgrading the DB has a note labeled ""Important"" that details exactly the issue you're seeing with the upgrade process:

http://guacamole.apache.org/doc/gug/jdbc-auth.html#idm46248438612160

Second, at a higher level, the process of granting permissions to tables is not handled within the schema scripts - either initial install or upgrade - provided with Guacamole.  The biggest reason for this is that we don't make any assumptions about what user account is going to be used to access the database.  We provide an example in the documentation, but that's up to you to set, and thus we don't provide that in any of the scripts.

As this relates to Docker installs, we don't do much with the DB specifically for Guacamole within the Docker scripts or images.  We configure the guacamole.properties entries, and provide the output of the script needed to create the database, but that's about it - even with a Docker install, it's still up to you to maintain the database, including schema updates and permissions management, as documented in the manual.

Finally, I can see one potential improvement out of this - it may be worthwhile to provide a schema version within the database and the database modules that can be checked between the two and provide some more friendly error messages when things don't match up.  I'm not sure this would have helped you in this situation, as it was a permissions issue and not a schema issue, but it seems schema mis-match comes up with enough frequency that this could be improved a bit.","18/Apr/19 12:38;develroo;Right I get that. But it is also a problem that when you are upgrading the docker image , which is independent of the postgres one, it does not do it automatically. I am positive it should be that the container needs to check: 
 * is it an existing installation?
 * check  the version of DB schema it is hooked up to.
 * take the credentials for that connection and factor it into an SQL schema update all at once.

 

Don't get me wrong it was comparatively easy to fix once I drilled down into what was happening, but the whole point about container images is that they are easy to install and maintain. 

I am kinda busy atm (this was an unnecessary time sink alas) but I will look at the docker image when I get and chance and see if I can't figure a sane way to upgrade the container with some sort of script.

 

Thanks.","18/Apr/19 13:47;vnick;{quote}
But it is also a problem that when you are upgrading the docker image , which is independent of the postgres one, it does not do it automatically. 
{quote}

Right - my point is that the Docker images for Guacamole deal strictly with Guacamole components, and very little with the database.  The same DB steps necessary for the native (non-Docker) install are required for the Docker install, since we're not managing the DB as a Guacamole container.

{quote}
but the whole point about container images is that they are easy to install and maintain.
{quote}

Yes, I agree.  Perhaps we can get to a point where we can automate that as part of the upgrade process, but that would likely require us forcing a particular DB user (or at least assuming a particular one is used by default) and writing the scripts around that user account, which would present other challenges to folks who decide not to use the default account, for whatever reason.  For the time being, the upgrade steps are documented within the documentation, including both the schema upgrade and the permissions issue that you ran into.

In the future it may be possible to improve the automation of the upgrade process, it just isn't something we've done, yet, and we've tried to document the require steps as best we can.","18/Apr/19 14:02;develroo;> In the future it may be possible to improve the automation of the upgrade process, it just isn't something we've done, yet, and we've tried to document the require steps as best we can.

 

Fairy nuff. I get what you are saying about virgin installs but when you have an existing install all the information you need to make your choices about which SQL script to launch is already there. If there was not already a valid DB connection you would not already have a valid install. I hope I am making myself clear.

 

Either way I am pretty sure adding a few sanity checks inside the container image should not be hard to do. As you can see I have already built some images myself and I can see how just putting a few sanity checks in start.sh would go a long way to solving this issue.

 

 ",,,,,,,,,,,
Allow JDBC URI Configuration,GUACAMOLE-766,13223598,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vnick,vnick,24/Mar/19 19:46,25/Mar/19 10:32,17/Feb/21 11:14,,,,,,,guacamole-auth-jdbc-mysql,guacamole-auth-jdbc-postgresql,guacamole-auth-jdbc-sqlserver,,,,0,,,,,,"Particularly with the pending addition of the URIGuacamoleProperty in GUACAMOLE-678, it would be nice to be able to have the JDBC modules configured via a URI rather than individual parameters.  This is reasonably common in other software packages that connect to a database, and might make configuration of Guacamole both simpler and more flexible.",,vnick,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-678,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-03-24 19:46:48.0,,,,,,,"0|z011bs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ctrl-alt-del hotkey to guacamole menu,GUACAMOLE-761,13223342,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,notspeedy,notspeedy,22/Mar/19 13:43,22/Mar/19 13:43,17/Feb/21 11:14,,1.0.0,,,,,guacamole-client,,,,,,0,,,,,,It would be convenient to add a ctrl-alt-del hotkey to the guacamole menu. This would come in helpful for chromebooks or any other devices that lag a standard keyboard. ,,notspeedy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://lists.apache.org/thread.html/9c57fb837dd79e7f4d09357283a0b2dce84a7f2e3affaa0c4c00b790@%3Cuser.guacamole.apache.org%3E,,,,,,,,,,9223372036854775807,,,2019-03-22 13:43:37.0,,,,,,,"0|z00zrk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Include guacd connection id in error messages displayed in browser,GUACAMOLE-752,13221475,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,darrenfoley,darrenfoley,13/Mar/19 17:37,13/Mar/19 19:43,17/Feb/21 11:14,,,,,,,guacamole-client,guacamole-server,libguac,,,,0,,,,,,"When multiple simultaneous connections are present, it can be difficult for admins to match up a browser error message being reported to them from an end user to errors in the guacd logs for troubleshooting. If the connection id shown in the guacd logs was exposed in browser error messages, this would become trivial.

 
{code:java}
guacd[1]: INFO: Creating new client for protocol ""rdp""
guacd[1]: INFO: Connection ID is ""$c186d87a-2951-49f7-b0d7-8ce59cb55183""
guacd[168]: INFO: Security mode: RDP
guacd[168]: INFO: Resize method: none
guacd[168]: INFO: User ""@3193d588-9446-4221-9116-f81bdc144da9"" joined connection ""$c186d87a-2951-49f7-b0d7-8ce59cb55183"" (1 users now present)
guacd[168]: INFO: Loading keymap ""base""
guacd[168]: INFO: Loading keymap ""en-us-qwerty""
guacd[168]: INFO: Unknown cliprdr event type: 0x5
guacd[168]: INFO: User ""@3193d588-9446-4221-9116-f81bdc144da9"" disconnected (0 users remain)
guacd[168]: INFO: Last user of connection ""$c186d87a-2951-49f7-b0d7-8ce59cb55183"" disconnected
guacd[168]: INFO: Internal RDP client disconnected
{code}
 

Something like this:

!image-2019-03-13-11-35-19-659.png!

 ",,darrenfoley,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/19 17:35;darrenfoley;image-2019-03-13-11-35-19-659.png;https://issues.apache.org/jira/secure/attachment/12962374/image-2019-03-13-11-35-19-659.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2019-03-13 18:30:52.903,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Mar 13 19:43:26 UTC 2019,,,,,,,"0|z00o88:",9223372036854775807,,,,,,,,,,,,,,,,,"13/Mar/19 18:30;vnick;I wonder if we could do this, but hide it by default - maybe make it an expandable section that could provide additional details, including the Connection ID and anything else we think might be relevant?","13/Mar/19 19:06;mjumper;Displaying some sort of unique identifier that would allow the administrator to align a specific error with the webapp logs and the guacd logs would be great. I don't know about using something internal to the protocol like guacd's connection ID, though. I'd lean more towards generating the unique ID on the webapp side whenever an error is handled, with the webapp additionally logging guacd's connection ID wherever relevant.

{quote}
!image-2019-03-13-11-35-19-659.png!
{quote}

Beware your Guacamole installation is very very old. Error messages haven't had this specific style since 0.9.3 at the latest, which was from 2014. You really should upgrade to a newer release.","13/Mar/19 19:43;darrenfoley;Yep, we have already upgraded to 0.9.13 and will be upgrading again soon.  I just screengrabbed from an older version (looks to be 0.9.9), as the issue is relevant for all versions.",,,,,,,,,,,,,,
Allow a way to right-click without browser context menu popping up,GUACAMOLE-544,13152487,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kbolino,kbolino,14/Apr/18 16:49,06/Mar/19 17:51,17/Feb/21 11:14,,,,,,,,,,,,,1,,,,,,"When using Apache Guacamole in Firefox on my corporate domain, and logged into a remote session, when I right click the browser context menu pops up and hides the remote session's context menu. I have to press ESC to clear it. This is a hassle, albeit not a major one.

Unfortunately, I cannot control this behavior. The Firefox configuration property {{dom.event.contextmenu.enabled}} is set to _false_ and is locked by policy. I was able to track down [this page|https://www.stigviewer.com/stig/mozilla_firefox/2014-07-03/finding/V-15986] which may explain the rationale. It is very unlikely that I would be able to get this changed by corporate IT.

I realize that there's probably nothing that can be done to directly address this issue, but it would be nice if there was a configurable workaround for it, like binding some mouse/key combination that doesn't trigger the browser context menu to right-clicking on the remote session.","Browser: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Firefox/52.0
Remote: CentOS Linux release 7.4.1708 (Core) ",copeland3300,kbolino,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-04-14 18:11:58.793,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Mar 06 17:51:56 UTC 2019,,,,,,,"0|i3sk4v:",9223372036854775807,,,,,,,,,,,,,,,,,"14/Apr/18 18:11;vnick;It's definitely worth a look, but I'm not optimistic about the chances of this helping you out.  In most situations, the Guacamole web app already captures the right-clicks and prevents the browser context menu from showing - if something is configured in the browser that blocks this and shows the browser's context menu, instead, there's little that can be done inside the web app to change or prevent this behavior that's not already being done.  Ultimately the operating system and the browser have final say over what events are captured locally and what are ignored.","05/Mar/19 15:36;copeland3300;I realize this is a bit of a necrobump, but I've been struggling with this for a while as well...

 

I'm also wondering if this has anything to do with Firefox ESR? I don't know what might be changed between standard FF and the ESR version. I mention this as I've only ever seen this happen on an ESR version.

 

Also, for what it's worth, my setting for {{dom.event.contextmenu.enabled}} is also set to false on the ESR versions I've used.

 

Update: after  a bit of testing, it does seem to be directly related to the {{dom.event.contextmenu.enabled}} setting. If I come up with anything helpful, I'll post it.","06/Mar/19 17:51;vnick;Thanks for the update, [~copeland3300].  Unfortunately, I'm still not sure there's really much that could be done from the Guacamole side to handle this.  I suppose we could check this setting and just ignore RMB clicks altogether when it is set to false, but I think that would cause more trouble than the issues it would resolve.

I'm open to other suggestions, here, it just seems like there might not be much that can be done when policies insist on locking down this setting and disabling overriding context menus.  Similar discussion is had, here:

https://forum.dhtmlx.com/t/using-oncontextmenu-how-to-prevent-firefoxs-context-menu/36892/7",,,,,,,,,,,,,,
RDP Keymap for Canadien Multilingual keyboards,GUACAMOLE-727,13214425,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mnantel,mnantel,07/Feb/19 17:41,07/Feb/19 19:14,17/Feb/21 11:14,,1.0.0,,,,,guacd,RDP,,,,,0,,,,,,"I am attaching a keymap for canadian multilingual keyboard format.

I've compiled it with 1.0.0 sources and it appears to work correctly for me.

Free free to incorporate...",,mnantel,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/19 17:41;mnantel;fr_ca_qwerty.keymap;https://issues.apache.org/jira/secure/attachment/12957939/fr_ca_qwerty.keymap",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2019-02-07 19:14:48.047,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Feb 07 19:14:48 UTC 2019,,,,,,,"0|yi0rag:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Feb/19 19:14;vnick;[~mnantel] Thanks for the contribution!  It would be great if you could contribute this by creating a pull request.  See:

https://github.com/apache/guacamole-server/blob/master/CONTRIBUTING
http://guacamole.apache.org/open-source/",,,,,,,,,,,,,,,,
Provide option for broadcasting input events across multiple connections,GUACAMOLE-724,13213379,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mjumper,mjumper,01/Feb/19 18:41,01/Feb/19 18:42,17/Feb/21 11:14,,,,,,,guacamole,,,,,,1,,,,,,"Server management sometimes requires broadcasting input events across multiple open terminals, effectively running the same commands across all terminals (while monitoring output) without also having to manually duplicate those commands.

Guacamole should support such interaction, providing some interface which allows a user to elect to have their input events broadcast across multiple connections. This naturally requires that some interface for displaying multiple connections exists, as specified by GUACAMOLE-723.",,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-02-01 18:41:49.0,,,,,,,"0|yi0kuw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extract Permission Management from JDBC Authentication Module,GUACAMOLE-617,13181148,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mjumper,vnick,25/Aug/18 19:15,19/Jan/19 01:55,17/Feb/21 11:14,,,,,,,guacamole-client,,,,,,1,,,,,,"With some of the recent developments to authentication extensions, it seems to be good time and idea to extract a bunch of the permissions management features from the JDBC module such that they are available to other modules.  These could either be relocated to the existing guacamole-ext module, or into some other, to-be-name, module that deals strictly in access control and permission management.",,dquirant,lucasmogari,mjumper,pasik,vnick,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-605,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-01-19 01:55:01.892,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Jan 19 01:55:01 UTC 2019,,,,,,,"0|i3xf87:",9223372036854775807,,,,,,,,,,,,,,,,,"19/Jan/19 01:55;dquirant;I just made the pull request with the new common library for the authentication module, the adaptation of the existing JDBC extensions and the new Morphia extension with MongoDB.",,,,,,,,,,,,,,,,
Configure order of authentication extensions being loaded in docker container,GUACAMOLE-706,13210184,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jolentes,jolentes,17/Jan/19 15:20,17/Jan/19 17:08,17/Feb/21 11:14,,1.1.0,,,,,guacamole-docker,,,,,,0,,,,,,"To combine authentication extension for RADIUS with database authentication extensions it is required to change the order of extensions being loaded. Since by default extensions are being loaded alphabetically and extensions are called in the order loaded, the name of the RADIUS authentication extension needs to be changed when the docker container is created.

*Solution:*

I propose that each auth extension introduces an environment variable that lets you define the name of the symbolic link created in the start script of the docker container.

{{RADIUS_EXT_LINKNAME=1-guacamole-auth-radius}}

The script adds the file extension .jar to the name to avoid an extension not being loaded at all.

That way you can influence the execution order of extensions.",,jolentes,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Jan 17 17:08:12 UTC 2019,,,,,,,"0|yi017k:",9223372036854775807,,,,,,,,,,,,,,,,,"17/Jan/19 17:08;jolentes;Example shown in this PR https://github.com/apache/guacamole-client/pull/358",,,,,,,,,,,,,,,,
Update Clipboard For All Connected Remotes,GUACAMOLE-690,13208047,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,taddeusz,taddeusz,07/Jan/19 15:25,07/Jan/19 15:25,17/Feb/21 11:14,,1.0.0,,,,,guacamole-client,,,,,,0,usability,,,,,"I've been testing 1.0.0-RC1 on my all-in-one Docker. I really like the new clipboard functionality. I'm not sure it's possible but the only improvement I can see is copying/pasting between remotes or updating the clipboard of connected non-focused remotes. With 1.0.0 when copying and pasting between remotes you still have to do the ""clipboard shuffle"".",,taddeusz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-01-07 15:25:53.0,,,,,,,"0|u00kyw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Proxy Hostname and Port to LDAP Extension,GUACAMOLE-577,13167413,Improvement,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,steve.alder.csx@gmail.com,steve.alder.csx@gmail.com,21/Jun/18 14:03,02/Jan/19 16:42,17/Feb/21 11:14,,,,,,,guacamole-auth-ldap,,,,,,0,,,,,,Add Proxy Hostname and Port to LDAP Extension,,mjumper,pasik,samsonusmc,steve.alder.csx@gmail.com,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-189,GUACAMOLE-168,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-06-22 16:41:47.896,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Jun 29 21:03:57 UTC 2018,,,,,,,"0|i3v3ef:",9223372036854775807,,,,,,,,,,,,,,,,,"22/Jun/18 16:41;mjumper;It makes sense to add this for the sake of completeness, as it's currently necessary for connecting to the X.Org driver, but can you describe your particular use case?","29/Jun/18 21:03;steve.alder.csx@gmail.com;In my case, I am using Guacamole to cross network boundaries.  Client lives in DMZ communicating with several guacd systems in different zones.  To make SSH connection to end system X, use guacd Y on port 12345.  Client's guacd cannot access system X via port 22, as it sits in DMZ.",,,,,,,,,,,,,,,
Enable loading configuration file from other locations than default,GUACAMOLE-667,13200612,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,andrzejdoro,andrzejdoro,26/Nov/18 16:16,27/Nov/18 09:57,17/Feb/21 11:14,,,,,,,guacd,,,,,,0,,,,,,"Currently, when the guacamole-server daemon starts (_src/guacd/daemon.c_) the configuration file is loaded ({{guacd_conf_load()}} in _src/guacd/conf-file.c_) but the path to the configuration file is fixed.

This path is read from {{GUACD_CONF_FILE}} variable, which is set to ""_/etc/guacamole/guacd.conf_"" during ./configure process.
{code:java}
./configure.ac:AC_DEFINE_UNQUOTED([GUACD_CONF_FILE], [""$guacd_conf""], [The full path to the guacd config file])
./configure:  guacd_conf=/etc/guacamole/guacd.conf
{code}
We propose to enable loading of the configuration file from the path provided (on the program startup) by the user.",,andrzejdoro,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-11-26 19:48:19.571,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Nov 27 09:57:16 UTC 2018,,,,,,,"0|s00vbs:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Nov/18 19:48;mjumper;Can you describe the use case behind this?","27/Nov/18 09:57;andrzejdoro;We think it's quite natural feature for many applications to point configuration file at program startup.

Use case is as follows:
 * we have few versions of configuration file (e.g. for test purposes)
 * we choose which configuration to use during program startup (rather then swapping _guacd.conf_ file each time)
 * user (tester) may not have permissions to ""_/etc/guacamole_"" directory

 ",,,,,,,,,,,,,,,
Password encryption,GUACAMOLE-558,13156107,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,gvannier@interdata.fr,gvannier@interdata.fr,30/Apr/18 13:21,08/Oct/18 01:35,17/Feb/21 11:14,,,,,,,guacamole-auth-jdbc,,,,,,0,,,,,,I suggest the abbility to encrypt connection password in the database to prevent security loss.,,arwelter,gvannier@interdata.fr,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-641,GUACAMOLE-581,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-817,,,,,,,,,,9223372036854775807,,,2018-04-30 13:21:50.0,,,,,,,"0|i3t6av:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
shell command extensions updated to support iPOJO,KARAF-555,12503317,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,aradzak,aradzak,04/Apr/11 17:30,15/Sep/18 16:36,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"it would be good if karaf's blueprint based command integration supported iPOJO.  At the moment, if you have an iPOJO meta.xml creating an instance and automatically managing aggregated dependencies, it's off in a corner and ignored.  The blueprint stuff spawns its own instance.

This integration could be as easy as adding a new attribute to the command's shell config xml so that in addition to specifying a class, you could also specify a specific instance that you'd like to have used.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,68451,,,2011-04-04 17:30:10.0,,,,,,,"0|i1ciif:",281130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make osgi:find-class a more useful command,KARAF-2508,12672983,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,amichai,amichai,09/Oct/13 08:50,15/Sep/18 16:35,17/Feb/21 11:14,,2.3.3,,,,,karaf,,,,,,1,,,,,,"I recently had to track down which bundle contains a certain class, and found the find-class command wanting. A few simple improvements would make it much more useful:

1. Add an --exact/-e option which doesn't automatically add asterisks at both ends of the string. In my case I was looking for the javax.jms.Connection class, and since the search is only on the last part of the name, this returned all classes in all packages which have the word Connection in their name, which added up to hundreds of results. with --exact I could look for what I want exactly, or choose to add asterisks at one or both ends explicitly in the search string if I wanted to.

2. Add a --local/-l option which adds BundleWiring.LISTRESOURCES_LOCAL to the listResources method call bitmask. With the current implementation, it returns both bundles containing the given class name and classes that import it from other bundles, which is useful in some cases. But with the --local option it could show only the bundles that actually contain the class (whether exported or not, unlike the exports command), which is far more useful in tracking down some classloading issues.

3. Add the bundle ID (at least) on the beginning of every printed line. This makes it amenable to grepping (without it a grep loses all bundle information, which is the whole point of using this command).

4. As a somewhat more complex alternative to #3, it would be nice if you could specify a fully qualified class name and not only the last part of the name. The command can split the search string around periods, pass the last part to listResources, then internally grep/match the full name. That would make it truly flexible in finding classes. Asterisks would have to be treated accordingly.

I think adding these options (#1-#3 are trivial implementations), or at least some of them, would make the command extremely useful when performing classloading diagnosis.
",,amichai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2015-07-09 10:00:43.001,,,false,,,,,,,,,,,,,,,,,,352606,,,Thu Jul 09 10:00:43 UTC 2015,,,,,,,"0|i1osk7:",352893,,,,,,,,,,,,,,,,,"09/Jul/15 10:00;gnodet;Do you think you could provide a patch for those enhancements ?",,,,,,,,,,,,,,,,
system-script : add templates to manage child instances,KARAF-4667,13000087,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,lb,lb,lb,25/Aug/16 17:11,15/Sep/18 05:24,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"As today the system script-templates  are mainly developed for root container, it would be nice to add some additional templates to manage child instances.

I will submit a PR",,lb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-08-25 17:11:21.0,,,,,,,"0|i32sqf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add isInstalled method in Feature interface,KARAF-3271,12747027,Improvement,Reopened,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,bradhoffman,bradhoffman,09/Oct/14 14:09,14/Sep/18 15:14,17/Feb/21 11:14,,3.0.3,,,,,karaf,,,,,,1,,,,,,"I am using org.apache.karaf.features.FeatureService to query all Features installed on the system.  After acquiring all the features I'd like to have feature.isInstalled() available.

Currently as a work around I'm calling listFeatures()/listRepositories() then afterwards making a call to featureService.isInstalled() for each feature.",,bradhoffman,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2014-10-09 14:16:04.028,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Oct 10 16:55:48 UTC 2014,,,,,,,"0|i20zkv:",9223372036854775807,,,,,,,,,,,,,,,,,"09/Oct/14 14:16;jbonofre;This method already exists. See https://git-wip-us.apache.org/repos/asf?p=karaf.git;a=blob_plain;f=features/core/src/main/java/org/apache/karaf/features/FeaturesService.java;hb=karaf-3.0.x:

{code}
boolean isInstalled(Feature f);
{code}

You can also directly list only installed features:

{code}
Feature[] listInstalledFeatures();
{code}
","09/Oct/14 14:35;bradhoffman;I am currently displaying a tree to my users that resembles the following.

Feature Repositories
   Feature Repo1
        Feature 1
        Feature 2 (installed)
   Feature Repo2
        Feature 3

Features
   Feature 1
   Feature 2 (installed)
   Feature 3


Because I want to display installed and uninstalled features side by side it would be most convenient for me to simply call listFeatures() and be able to know whether a feature is installed.  Instead I have to make multiple calls to the Service methods and in addition I have to create a FeatureComposite class to contain both Feature class and a isInstalled flag.

It seems that adding the isInstalled property to the Feature class would be relatively inexpensive for you to do.","10/Oct/14 16:50;jbonofre;Oh you mean a flag attribute on the Feature object.","10/Oct/14 16:55;bradhoffman;Correct",,,,,,,,,,,,,
removeRepository(URI) throws RepositoryNotFoundException,KARAF-3277,12747352,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,bradhoffman,bradhoffman,10/Oct/14 17:42,14/Sep/18 15:14,17/Feb/21 11:14,,3.0.3,,,,,karaf,,,,,,0,,,,,,The removeRepository(URI) doesn't throw an exception if a repository doesn't exist at the provided URI.,,bradhoffman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-10-10 17:42:24.0,,,,,,,"0|i211jb:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"parse a ""~/.karafrc"" type file on startup of the shell so users can define aliases in one place which work with any karaf installation",KARAF-736,12514027,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,jstrachan,jstrachan,14/Jul/11 08:35,14/Sep/18 08:37,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,Rather than tinkering with karaf/etc/shell.init.script it'd be good if we could add customisations into a file in the user home directory. Then if you upgrade karaf you don't have to tinker with the distro,,barthel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-07-14 10:01:35.231,,,false,,,,,,,,,,,,,,,,,,68065,,,Thu Jul 14 10:01:35 UTC 2011,,,,,,,"0|i1cip3:",281160,,,,,,,,,,,,,,,,,"14/Jul/11 10:01;jbonofre;It's a very good idea James. You already have the $HOME/.karaf folder containing the history. We can add a new file in the $HOME/.karaf folder to customization shared between all Karaf instances.",,,,,,,,,,,,,,,,
Support encrypted connection to the database for fail over configuration,KARAF-2045,12618515,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,muellerc,muellerc,02/Dec/12 22:17,14/Sep/18 08:36,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"See http://karaf.922171.n3.nabble.com/Using-database-locking-mechanism-for-Failover-td4026825.html

I will work on a patch in the next weeks...",,jbonofre,muellerc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/13 20:41;muellerc;KARAF-2045.patch;https://issues.apache.org/jira/secure/attachment/12574877/KARAF-2045.patch",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2012-12-13 06:38:48.924,,,false,,,,,,,,,,,,,,,,,,293333,,,Thu Mar 21 20:47:04 UTC 2013,,,,,,,"0|i0swsf:",166789,,,,,,,,,,,,,,,,,"13/Dec/12 06:38;jbonofre;FYI, I will create a more generic Jira, related to that.

As we did from the encryption of password in etc/users.properties, we should provide a more ""generic"" encryption service:
- all properties should support values which look like {CRYPT}foobar{CRYPT}.
- like this Karaf can ""detect"" encrypted values and decrypt when we use the property","13/Dec/12 09:27;muellerc;Hey JB,

this is something we need to (for PCI) if it's not available for all passwords at present (JMX password, ...).

But this JIRA address another issue we have.
We use the Karaf Master/Slave fail over mechanism. We use the jdbc lock mechanism (with Oracle). By default, Oracle (and I think the others too) doesn't use an encrypted connection. This means the user/password is sent in plain text from Karaf to the database. This is considered as insecure from our auditors.
A simple solution (at least for Oracle) is to be able to provide jdbc connection properties. Oracle support some properties to secure the connection.

With this JIRA, I would like to introduce a new property ""karaf.lock.jdbc.connection.properties"" in $KARAF_HOME/etc/system.properties to support this requirement.","21/Mar/13 20:41;muellerc;Patch for current trunk","21/Mar/13 20:47;muellerc;With this patch, we are able to encrypt our database connection to Oracle, which is a PCI DSS (Payment Card Industries Data Security Standards) requirement.
Note: Oracle doesn't support adding additional connection properties to its JDBC connection URL (like Derby, ... supports).

A sample configuration could look like this:
{code}
karaf.lock.jdbc.connection.properties=oracle.net.encryption_client=REQUIRED;oracle.net.encryption_types_client=(AES256, AES192, AES128,3DES168, RC4_256, RC4_128)
{code}",,,,,,,,,,,,,
Allow using system properties in config.properties,KARAF-1152,12538410,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,rodehav,rodehav,14/Jan/12 18:48,13/Sep/18 19:00,17/Feb/21 11:14,,2.2.5,,,,,karaf,,,,,,4,,,,,,"I would like to be able to use system properties when definining the location of my custom.properties, like this:

${optionals} =  ${commondir}/etc/custom.properties

Currently system properties cannot be used in config.properties. This has been discussed on Karaf user list:

http://karaf.922171.n3.nabble.com/Using-system-properties-in-config-properties-td3651603.html",,andrei.pozolotin,kai.reichert,lichtin,mitaes,rocketraman,rodehav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-08-25 01:24:27.68,,,false,,,,,,,,,,,,,,,,,,223916,,,Sun Aug 26 06:52:05 UTC 2012,,,,,,,"0|i1cizz:",281209,,,,,,,,,,,,,,,,,"25/Aug/12 01:24;andrei.pozolotin;http://karaf.922171.n3.nabble.com/Command-with-Multiple-Arguments-td4025749.html#a4025774","26/Aug/12 06:52;rodehav;Great that you're looking into this Andrei!",,,,,,,,,,,,,,,
Karaf EIK: not all repositories used for feature resolution,KARAF-3534,12775278,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,jochenw,jochenw,16/Feb/15 05:23,13/Sep/18 16:17,17/Feb/21 11:14,,eik-3.0.0,,,,,eik,,,,,,0,,,,,,"Repositories defined in org.ops4j.pax.url.mvn.cfg are read by Karaf EIK. However, for feature resolution, only the deploy and system folder are used in KarafLaunchUtils.java, function getJarDirectories.

It could help to also call the getJarDirectories function for other repositories defined in org.ops4j.pax.url.mvn.defaultRepositories, at least the local ones existing in the folder of the Karaf installation.

Additional smaller issue: .jars are currently read when resolving features, other files (e.g. web application bundles in .wars) are neglected.

A note: with the suggested addition, the upper limit of possible start levels is 100, since the Eclipse run configuration editor cannot handle start levels above this.","Eclipse Luna, Karaf 3.0.3, latest Karaf EIK from github",jochenw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-02-16 05:23:32.0,,,,,,,"0|i25nx3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support specifying RDP Session ID,GUACAMOLE-613,13179946,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Fadeev,Fadeev,20/Aug/18 11:58,03/Sep/18 10:18,17/Feb/21 11:14,,,,,,,RDP,,,,,,1,,,,,,"*The problem is:*

on Terminal Servers it is possible to create several sessions for the same user. When I reconnect, then server creates anoter session (second one) for me. When I reconnect again, it creates third session. Reconnect again - it returns to the first session... and so on...

I want to be reconnected to the same session.

*The solution:*

According to the rdp documentation (if I understood it correctly), it is possible to connect to specific session id.

[https://msdn.microsoft.com/en-us/library/cc240445.aspx]

in the section [2.2.1.3.5 Client Cluster Data (TS_UD_CS_CLUSTER)|https://msdn.microsoft.com/en-us/library/cc240514.aspx] is described that it is possible _“to request a connection to a given session identifier. ”._ Just need to pass RedirectedSessionID and set a flag REDIRECTED_SESSIONID_FIELD_VALID

Quote:

_“RedirectedSessionID (4 bytes): A 32-bit unsigned integer._ 

_If the REDIRECTED_SESSIONID_FIELD_VALID flag is set in the Flags field, then the RedirectedSessionID field contains a valid session identifier to which the client requests to connect""_

 ",,akj88,Fadeev,pasik,vnick,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-249,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-08-20 14:39:16.525,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Sep 03 10:18:29 UTC 2018,,,,,,,"0|i3x7uf:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Aug/18 14:39;vnick;Hmmm...do you know if the that session id is provided back to the RDP client in some part of the handshake?  Unless you wanted to statically set the session ID (which I'm guessing either isn't a good idea or isn't supported), you'd have to either have that handled automatically or know what it is in order to provide it back.  Seems like this should be handled internally.","20/Aug/18 15:53;Fadeev;[~nick.couchman@yahoo.com]

I have a service running on my server that provide to me a user-password before I initiate a connection, it also can retreive a session id(s) for this user.

{quote}

do you know if the that session id is provided back to the RDP client in some part of the handshake?

{quote}

I don't know, will check it out...","21/Aug/18 12:48;Fadeev;RDP server can send to the client PDU named ""*Save Session Info PDU*"" in the field type INFOTYPE_LOGON

[https://msdn.microsoft.com/en-us/library/cc240635.aspx]

There are two versions. ""Logon Info Version 1"" and ""Logon Info Version 2"":

[https://msdn.microsoft.com/en-us/library/cc240637.aspx]

[https://msdn.microsoft.com/en-us/library/cc240638.aspx]

Inside these structures _SessionId_ field exists.

To make server send this PDU to the client, a PDU named ""*Client Info PDU*"" ([https://msdn.microsoft.com/en-us/library/cc240474.aspx]) should be sent with the flag inside ""*Info Packet*"" set to ""*INFO_LOGONNOTIFY*"".

 

I am not an expert in FreeRDP, but looked into it, and there is some functions implemented named:
{code:java}
rdp_send_save_session_info

rdp_recv_save_session_info

rdp_recv_client_info

rdp_send_client_info{code}
I think it can be used.

 Field _settings->LogonNotify_ should be set to true

and _update->SaveSessionInfo_ is called when PDU is received.

 ","21/Aug/18 13:48;Fadeev;But it was added to FreeRDP support by

_commit 1b2b1c4ac14ac43f4e475488763d8659bd934eb6_
 _Author: David FORT <contact@hardening-consulting.com>_
 _Date:   Thu Feb 18 14:19:36 2016 +0100_

It is between the tags

_2018-08-01 15:27:31 +0200  (tag: 2.0.0-rc3)_
 _2018-04-11 13:25:31 +0200  (tag: 2.0.0-rc2)_
 _2017-11-28 15:26:30 +0100  (tag: 2.0.0-rc1)_
 _2017-07-24 10:46:54 +0200  (tag: 2.0.0-rc0)_
 _2017-03-13 13:46:23 +0100  (tag: 2.0.0-beta1+android11)_
 _*2017-03-03 14:41:11 +0100  (tag: 2.0.0-beta1+android10)*_
 _*2014-09-11 18:46:32 -0400  (tag: 1.2.0-beta1+android9)*_
 _2014-06-12 09:51:57 -0400  (tag: 1.2.0-beta1+android7)_
 _2013-07-10 01:00:21 -0700  (tag: 1.1.0-beta+2013071101)_
 _2013-05-22 05:21:52 -0700  (tag: 1.1.0-beta1+ios4, tag: 1.1.0-beta1+android5)_

 

Does guacamole support the latest FreeRdp? As I read before, the latest support version is *1.2.0-beta1+android9...*","22/Aug/18 13:42;vnick;{quote}
Does guacamole support the latest FreeRdp? As I read before, the latest support version is 1.2.0-beta1+android9...
{quote}

1.2.0 is the latest version that Guacamole supports.  There's a JIRA issue for adding the 2.0.0 support, but it is non-trivial, and isn't getting a lot of attention these days.  Mike had e-mailed and asked for help from the development community in pushing it along, but no one has taken up the challenge.","03/Sep/18 08:21;Fadeev;*Just FYI:*

Added RedirectSessionId option to guacamole server and then to rdp settings, but it did not work for me for some reason :( It still creates for me a new session.

Please take into account this moment, may be I did something wrong.

_P.S._ 

_Anyway, a flag in a group policies solved my problem:_

_Computer Configuration -> Administrative Templates -> Windows Components -> Remote Desctop Session Host -> Connections -> ""*Restrict Remote Desktop Services users to a single Remote Desctop Services session*""_","03/Sep/18 10:18;vnick;{quote}
Anyway, a flag in a group policies solved my problem:

Computer Configuration -> Administrative Templates -> Windows Components -> Remote Desctop Session Host -> Connections -> ""Restrict Remote Desktop Services users to a single Remote Desctop Services session""
{quote}

That group policy object will certainly have the effect of making sure that users always get reconnected to an existing session, since they will only ever have one session, but that's doesn't really solve the root issue of being able to reconnect to a specific session on a server that allows multiple logins.",,,,,,,,,,
Control caching of extension JS/CSS,GUACAMOLE-275,13065613,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,dborth@hatsize.com,dborth@hatsize.com,20/Apr/17 17:00,14/Aug/18 02:27,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"Guacamole combines the JS from extensions and rolls it into app.js. It then cache-busts by adding a version string to the app.js (eg: app.js?v=0.9.12-incubating). 

This works great for preventing a browser from serving up JS from older Guacamole code. But it does nothing to prevent the code from older extensions from being loaded. We change our extension periodically and there isn't always a new Guacamole version out. This can lead to backwards-incompatible changes breaking the application.

Can some sort of cache busting or expiration of some sort be added?

Preferably, in the ResourceServlet there'd be some new headers added, eg: Cache-Control: no-cache or at least an Expires header
",,dborth@hatsize.com,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-10-23 05:32:25.681,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Aug 14 02:27:04 UTC 2018,,,,,,,"0|i3dvun:",9223372036854775807,,,,,,,,,,,,,,,,,"23/Oct/17 05:32;mjumper;Disabling caching entirely, such as with ""Cache-Control: no-cache"", is definitely not an option. Adding an ""Expires"" header would mitigate things, but not necessarily solve them, as there would always be the chance that a new version of an extension could be deployed prior to cache expiration.

It should be possible to tie the caching of JS and CSS into the current version of that dynamically-generated resource (using a checksum rather than the version number, for example), but doing so would require filtering of {{index.html}} within the web application at runtime rather than during the build.","14/Aug/18 02:27;mjumper;Using ""Cache-Control: no-cache"" should actually be OK so long as we make proper use of E-Tags. We can achieve this through:

* Dynamically generating a unique, random token when the webapp is started.
* Filtering {{index.html}} at runtime, substituting that token where we previously would have placed the webapp version.
* Serving the filtered {{index.html}} with {{Cache-Control: no-cache}} and proper E-Tags, such that it will always be refreshed. Unnecessary transfer should still be avoided so long as the E-Tag matches, and in the case it doesn't (or the browser doesn't handle the E-Tag), the {{index.html}} file is tiny enough that the overhead should be negligible (~4K).

The various other resources can then be safely cached, relying on invalidation of {{index.html}} to cause a cascading refresh.",,,,,,,,,,,,,,,
Provide Guacamole.Status parameter for Guacamole.Object.requestInputStream,GUACAMOLE-603,13175517,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,krahujec,krahujec,30/Jul/18 10:01,30/Jul/18 12:45,17/Feb/21 11:14,,,,,,,guacamole-common-js,,,,,,0,api,javascript,,,,This would be useful for detecting failed read access request to the input stream.,,krahujec,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-07-30 10:01:21.0,,,,,,,"0|i3wgtz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Implement a ""connection event tracker"" note or comment",GUACAMOLE-537,13150367,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,magicfab,magicfab,05/Apr/18 16:00,27/Jun/18 20:33,17/Feb/21 11:14,,,,,,,guacamole-client,,,,,,0,,,,,,"I'd like to suggest implementing an optional ""connection event tracker"" to log a reference, note, comment or reason to connect when doing so.

This would be a question asked before each connection, where the user would have to indicate why the connection is being established,for logging purposes. This information would then be visible in the history report.

Windows servers implement this, I can't seem to be able to attach an image here, lots of example can be found doing an image search for ""windows shutdown event tracker"".",,magicfab,mjumper,pasik,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-221,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-04-06 02:12:34.798,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Apr 14 23:57:15 UTC 2018,,,,,,,"0|i3s74n:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Apr/18 02:12;mjumper;This seems the sort of thing that would be best served by an extension. The extension API does currently allow for the data associated with users, connections, sharing profiles, etc. to be augmented by other extensions through decoration with custom attributes. For something like what you describe to be possible, similar attributes would need to be available for history records.","14/Apr/18 23:57;vnick;I suspect this would also be dependent upon prompt support in the Guacamole Client (GUACAMOLE-221).",,,,,,,,,,,,,,,
avcodec_register_all deprecated,GUACAMOLE-561,13156989,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,ultima1252,ultima1252,03/May/18 22:38,04/May/18 01:32,17/Feb/21 11:14,,0.9.14,,,,,guacenc,,,,,,0,,,,,,"avcodec_register_all has been deprecated as of ffmpeg version 4.0[1]. A full build log of the error here [2].

 

[1] 

[https://github.com/FFmpeg/FFmpeg/blob/02ae52db87270715bb81ddb912a2e3968e973d1f/libavcodec/avcodec.h#L4085-L4086]

[2] [http://beefy10.nyi.freebsd.org/data/111i386-default/468901/logs/guacamole-server-0.9.14_2.log]",,ultima1252,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-05-03 22:38:22.0,,,,,,,"0|i3tbof:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When using RDP with NLA and the remote account password has expired/must be changed, users don't get any indication",GUACAMOLE-546,13152701,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,shauntarves,shauntarves,16/Apr/18 12:24,20/Apr/18 09:31,17/Feb/21 11:14,,0.9.14,,,,,guacd,,,,,,0,,,,,,"When attempting to connect to a remote machine over RDP, if the user's account password has expired or is marked as needing to be changed on next login, guacd encounters a generic failure and we have no way of knowing why login failed.

When logging into the same machine with the standard Remote Desktop client, you at least get an alert indicating what the problem is (see attached).

guacd logs don't offer any indication of the problem either. Please note that NLA *is enabled* on the remote machine if that affects anything. I do not know if this same issue exists when NLA is not enabled.

 

guacd log
{code:bash}
Apr 16 08:16:11 rahost guacd[1915]: Creating new client for protocol ""rdp""
Apr 16 08:16:11 rahost guacd[1915]: Connection ID is ""$22f1a2fe-629d-4ae5-93a3-66a94fd136db""
Apr 16 08:16:11 rahost guacd[29684]: Security mode: ANY
Apr 16 08:16:11 rahost guacd[29684]: Resize method: none
Apr 16 08:16:11 rahost guacd[29684]: User ""@319b7690-3ecf-481a-b581-d9561abaa701"" joined connection ""$22f1a2fe-629d-4ae5-93a3-
66a94fd136db"" (1 users now present)
Apr 16 08:16:11 rahost guacd[29684]: Loading keymap ""base""
Apr 16 08:16:11 rahost guacd[29684]: Loading keymap ""en-us-qwerty""
Apr 16 08:16:12 rahost guacd[29684]: Error connecting to RDP server
Apr 16 08:16:12 rahost guacd[29684]: User ""@319b7690-3ecf-481a-b581-d9561abaa701"" disconnected (0 users remain)
Apr 16 08:16:12 rahost guacd[29684]: Last user of connection ""$22f1a2fe-629d-4ae5-93a3-66a94fd136db"" disconnected
Apr 16 08:16:12 rahost guacd[1915]: Connection ""$22f1a2fe-629d-4ae5-93a3-66a94fd136db"" removed.
{code}",,shauntarves,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/18 12:21;shauntarves;Screen Shot 2018-04-16 at 8.12.47 AM.png;https://issues.apache.org/jira/secure/attachment/12919213/Screen+Shot+2018-04-16+at+8.12.47+AM.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2018-04-20 09:31:54.881,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Apr 20 09:31:54 UTC 2018,,,,,,,"0|i3slgf:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Apr/18 09:31;vnick;{quote}
Please note that NLA is enabled on the remote machine if that affects anything.
{quote}

This almost certainly is what's causing the issue, since NLA bundles the encryption/connection and authentication into a single step.  There have always been password change issues with NLA - even the RDP client picture you posted isn't really helpful in actually getting your password change if it has expired.  However, it looks like they're actually returning a specific error code that the RDP client makes use of, so we, too, should be able to track down that error code and provide a more descriptive error on the Guacamole side.",,,,,,,,,,,,,,,,
Installing Guacamole with Docker improvements,GUACAMOLE-374,13098642,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,svengo,svengo,30/Aug/17 19:42,14/Apr/18 23:53,17/Feb/21 11:14,,,,,,,guacamole-docker,,,,,,2,,,,,,"I installed guacamole as docker container for the first time. Great software! I followed the guide on [https://guacamole.incubator.apache.org/doc/gug/guacamole-docker.html]. There is a lot of unnecessary work to get the container up and running, here are some suggestions to improve the documentation:

# The link flag is a deprecated legacy feature of Docker. It may eventually be removed. [Legacy container links |https://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/]. It is no problem to get guacamole running with a user defined network.
# The database should be generated automatically on first run. The user and database could be automatically created by [mariadb|https://hub.docker.com/_/mariadb/].
# ...You should add mariadb as possible backend.
# Due to its complexity (three services) you should provide a {{docker-compose.yml}} file for use with [docker-compose|https://docs.docker.com/compose/]. This also creates an user defined network.

Here is an example {{docker-compose.yml}} for use with mariadb:


{noformat}
version: '3'

services:
  guacd:
    image: guacamole/guacd
    depends_on:
      - db

  guac:
    image: guacamole/guacamole
    ports:
      - 8080:8080
    depends_on:
      - db
      - guacd
    environment:
      - GUACD_HOSTNAME=guacd
      - MYSQL_PASSWORD=x
      - MYSQL_DATABASE=guacamole_db
      - MYSQL_USER=guacamole_user
      - MYSQL_HOSTNAME=db

  db:
    image: mariadb
    volumes:
      - /srv/docker/guacamole-mysql:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=x
      - MYSQL_PASSWORD=x
      - MYSQL_DATABASE=guacamole_db
      - MYSQL_USER=guacamole_user
{noformat}

I don't know why, but {{GUACD_HOSTNAME}} and {{MYSQL_HOSTNAME}} are needed (maybe a bug?)","sven@fangorn:~$ docker version
Client:
 Version:      17.06.1-ce
 API version:  1.30
 Go version:   go1.8.3
 Git commit:   874a737
 Built:        Thu Aug 17 22:51:12 2017
 OS/Arch:      linux/amd64

Server:
 Version:      17.06.1-ce
 API version:  1.30 (minimum version 1.12)
 Go version:   go1.8.3
 Git commit:   874a737
 Built:        Thu Aug 17 22:50:04 2017
 OS/Arch:      linux/amd64
 Experimental: false",eric.s.landry,mjumper,pasik,svengo,vnick,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-531,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-10-04 13:05:20.91,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Apr 11 00:52:00 UTC 2018,,,,,,,"0|i3jgsn:",9223372036854775807,,,,,,,,,,,,,,,,,"04/Oct/17 13:05;eric.s.landry;Here's mine with Postgres (Assuming a recent docker-ce/docker-compose)

Create the DB initialization script:
{noformat}
docker run --rm guacamole/guacamole /opt/guacamole/bin/initdb.sh --postgres > initdb.sql
{noformat}

In the same folder as the initdb.sql, create the docker-compose file:
{code:title=docker-compose.yml}
version: ""3""
services:
  postgres:
    image: postgres
    environment:
      POSTGRES_DB: guacamole_db
      POSTGRES_USER: guacamole_user
      POSTGRES_PASSWORD: guacamole_password
    volumes:
      - ./initdb.sql:/docker-entrypoint-initdb.d/initdb.sql
  guacd:
    image: guacamole/guacd
    expose:
      - 4822
  guacamole:
    image: guacamole/guacamole
    environment:
      GUACD_HOSTNAME: guacd
      GUACD_PORT: 4822
      POSTGRES_HOSTNAME: postgres
      POSTGRES_DATABASE: guacamole_db
      POSTGRES_USER: guacamole_user
      POSTGRES_PASSWORD: guacamole_password
    links:
      - postgres
      - guacd
    ports:
      - 8080:8080
{code}

Start docker-compose
{noformat}
docker-compose up
{noformat}
","07/Oct/17 14:21;svengo;Thank you, [~eric.s.landry]. docker-entrypoint-initdb.d is also supported by mariadb.","02/Feb/18 21:39;vnick;{quote}
...You should add mariadb as possible backend.
{quote}

Since MySQL and MariaDB are fully compatible, this, essentially, already exists.

{quote}
Due to its complexity (three services) you should provide a docker-compose.yml file for use with docker-compose. This also creates an user defined network.
{quote}

You're welcome to fork the repo, add the file, and open a pull request to get it merged.  That's likely to generate further discussion on the topic :-).

{quote}
I don't know why, but GUACD_HOSTNAME and MYSQL_HOSTNAME are needed (maybe a bug?)
{quote}

I believe this intentional, as the assumption is that Guacamole Client, guacd, and MySQL may all be run in different containers, and even on different hosts - therefore, you should probably specify where you're running those.","03/Feb/18 05:30;mjumper;{quote}
I believe this intentional, as the assumption is that Guacamole Client, guacd, and MySQL may all be run in different containers, and even on different hosts ...
{quote}

Yes, this is correct. And more to the point - it's bad practice to have a Docker image which contains multiple distinct services. Each service really should be a separate image.

Normally, you would combine the various images into a deployment (if you're going 100% Docker) through Docker links, or through exposing their ports and explicitly specifying the hostname/port for the required services. If you aren't using Docker across the board, this separation gives you the option to still use Docker where needed.

It's proper design, not a bug. ;)","11/Apr/18 00:52;vnick;Item 1 in the original list is covered by GUACAMOLE-531",,,,,,,,,,,,
On screen keyboard - added method to reset all pressed keys,GUACAMOLE-516,13142290,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jamhall,jamhall,03/Mar/18 17:51,04/Mar/18 19:23,17/Feb/21 11:14,,,,,,,guacamole-common-js,,,,,,0,,,,,,"Hello,

We are using your on screen keyboard in a project of ours (see attached screenshot) 

I have added a new method to release all of the currently pressed keys.

Problem: If you open the on screen keyboard, click the ALT key and then close the on screen keyboard, the ALT key is still marked as pressed and not released. Inside the machine, you have to press ALT again to release it. This method solves this issue.

Thank you for a great project!",,jamhall,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/18 17:50;jamhall;keyboard.png;https://issues.apache.org/jira/secure/attachment/12912890/keyboard.png",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2018-03-04 02:33:00.206,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Mar 04 13:55:32 UTC 2018,,,,,,,"0|i3qttz:",9223372036854775807,,,,,,,,,,,,,,,,,"03/Mar/18 17:54;jamhall;I haved opened a pull request: https://github.com/glyptodon/guacamole-client/pull/360","04/Mar/18 02:33;vnick;Thanks for the contribution!

{quote}
I haved opened a pull request: https://github.com/glyptodon/guacamole-client/pull/360
{quote}

Unfortunately that is the wrong place to open a pull request.  You need to be using the Apache repository:

https://github.com/apache/guacamole-client","04/Mar/18 12:15;jamhall;Done: [https://github.com/apache/guacamole-client/pull/261]

BTW, it would be really useful if guacamole-common-js was published as an NPM module. I raised this in an email I sent to the dev mailing list a couple a few weeks ago, but alas, I got no reply.

I have also created typescript definitions for guacamole-common-js: [https://github.com/ILLGrenoble/guacamole-common-js/blob/master/guacamole.d.ts]

I also have a guacamole test websocket server: [https://github.com/jamhall/guacamole-test-server]

And a guacamole angular5 component: [https://github.com/ILLGrenoble/ngx-remote-desktop]

I also have a SocketIO tunnel adapter (hasn't been released yet)

Please let me know if any of that is of interest to you :)

Thank you!","04/Mar/18 13:55;vnick;{quote}
BTW, it would be really useful if guacamole-common-js was published as an NPM module. I raised this in an email I sent to the dev mailing list a couple a few weeks ago, but alas, I got no reply.
{quote}

Sorry about the lack of response on the dev list.  I'm not familiar with the process, so pardon the ignorant question, but is there anything additional that would have to be done to the guacamole-common-js code to publish it as a NPM module?",,,,,,,,,,,,,
Implement Additional Load Balancing Algorithms,GUACAMOLE-322,13079494,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vnick,vnick,13/Jun/17 14:16,08/Feb/18 17:57,17/Feb/21 11:14,,,,,,,guacamole-client,,,,,,0,,,,,,"Now that the connection_weight field has been added, it makes sense to build out support for additional load balancing algorithms for the BALANCING connection group and allow users to choose which algorithm to use.

Guacamole currently supports Weighted Least Connection (and Least Connection, when weights are undefined or are equal).  I propose adding support for the following:
- Round Robin
- Weighted Round Robin
- Least Recently Used
- Weighted Least Recently Used

For (Weighted) Round Robin, the plan would be to look at all the connections in a group, order them by their id, and then have a DB field keep track of either the last one used or the next one to use (opinions?).

For (Weighted) Least Recently Used, it should be relatively easy to look at the connection history table and grab the oldest start_date field for a list of connections in the group, then calculate out from there.",,AlanBaban,kkellerowi,pasik,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-02-08 17:32:39.331,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Feb 08 17:57:57 UTC 2018,,,,,,,"0|i3g7sv:",9223372036854775807,,,,,,,,,,,,,,,,,"08/Feb/18 17:32;kkellerowi;We use DNS + NGINX for this.  NGINX http and stream(tcp) directives support most of what your asking for.  If you need more special use cases then you could consider integration lua script with NGINX (or install openresty) and that will get you the ability to do all sorts of fancy logic like look up routes in DB.","08/Feb/18 17:57;vnick;[~kkellerowi] Good to know, thank you.  I still think there are some advantages to implementing the load balancing inside of the Guacamole Client itself, rather than having something external do it.  You can accomplish some of those things with the tools you mentioned, but having it inside gives you a little bit more power and makes it a little simpler to implement.

My plan, at some point, when I get around to this, is to pull the load balancing out of the class where it currently resides and make some sort of utility-type class that handles all of the details of load balancing, including implementing each of the required algorithms, and providing ""prediction"" capabilities for the next connection, which is important when you get to things like parameter prompting in GUACAMOLE-221 where you need to know before you actually use/make a connection which connection will be chosen.",,,,,,,,,,,,,,,
Ensure GUAC_DATE/GUAC_TIME tokens match connection startDate,GUACAMOLE-61,12987922,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,adamperfecto,adamperfecto,08/Jul/16 20:46,07/Feb/18 04:24,17/Feb/21 11:14,,0.9.10-incubating,,,,,guacamole,guacamole-auth-jdbc,guacamole-ext,,,,0,,,,,,"The values of the ""GUAC_DATE"" and ""GUAC_TIME"" [parameter tokens|http://guacamole.incubator.apache.org/doc/gug/configuring-guacamole.html#parameter-tokens] implemented in GUACAMOLE-16 / [GUAC-1451|https://glyptodon.org/jira/browse/GUAC-1451] are not necessarily the same as startDate in the connection history table. This causes problems when keeping track of history records associated with session recordings.",,adamperfecto,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-16,GUACAMOLE-4,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-07-08 20:46:18.0,,,,,,,"0|i30q6f:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use Docker multi-stage build to create guacamole server image,GUACAMOLE-456,13123174,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,ceharris,ceharris,ceharris,06/Dec/17 11:59,04/Feb/18 15:01,17/Feb/21 11:14,,,,,,,guacamole-docker,,,,,,0,,,,,,"Since Docker CE 17.05 (edge) and 17.06 (stable), multi-stage builds can be used to create images using a different base images for build versus runtime. This will simplify the process of creating a runtime image for guacamole-server, and will improve build times by making much better use of the Docker's image layer cache.",,ceharris,pasik,starke.gardner,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-12-06 11:59:00.0,,,,,,,"0|i3nlmv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for Turkish language to the web application,GUACAMOLE-451,13122019,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,blackman,blackman,30/Nov/17 20:09,30/Nov/17 21:03,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"I have updated json for Turkish laguage.

Ps: Please add default language options on settings submenu.",,blackman,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Nov/17 20:13;blackman;tr.json;https://issues.apache.org/jira/secure/attachment/12900081/tr.json",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2017-11-30 20:35:16.519,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Nov 30 21:03:20 UTC 2017,,,,,,,"0|i3nelj:",9223372036854775807,,,,,,,,,,,,,,,,,"30/Nov/17 20:35;mjumper;{quote}
Ps: Please add default language options on settings submenu.
{quote}

This will actually happen automatically once a new language JSON is added. The language menu is populated with the ""NAME"" value of each language JSON present.","30/Nov/17 20:40;mjumper;[~blackman] - if you are familiar with git and/or GitHub, can you please open a pull request for adding your proposed {{tr.json}}? Ideally, what you would want to do here is:

# Add the proposed {{tr.json}} locally
# Build and test things, verifying that the Turkish language option does indeed appear and function
# Once things are confirmed, open a pull request for your changes, which we will then review for merge

See our contribution guidelines: https://github.com/apache/guacamole-client/blob/master/CONTRIBUTING

Thanks!","30/Nov/17 21:03;mjumper;I've also noticed that the name ""Guacamole"" has been replaced throughout the JSON with ""CLIENTLESS WEB VPN"", ""WEBVPN"", or just generically ""the server"", ""service"", etc. instead of ""the Guacamole server"". From the attached [^tr.json]:

{quote}
{code:javascript}
{
    
    ""NAME"" : ""Türkçe"",
    
    ""APP"" : {

        ""NAME""    : ""CLIENTLESS WEB VPN"",
        ...

    },

    ""CLIENT"" : {
        ...
        ""ERROR_TUNNEL_207""     : ""WEBVPN sunucu aktif değil.Daha sonra tekrar deneyiniz."",
        ""ERROR_TUNNEL_208""     : ""WEBVPN sunucu cevap vermiyor. Daha sonra tekrar deneyiniz."",
        ...
    },

    ...

}
{code}
{quote}

You are welcome to rebrand things downstream, but please restore the original branding for your contribution upstream.",,,,,,,,,,,,,,
Separate out the AngularJS Frontend,GUACAMOLE-59,12986910,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mjumper,mjumper,05/Jul/16 18:41,14/Nov/16 03:41,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"{panel:bgColor=#FFFFEE}
*The description of this issue was copied from [GUAC-1540|https://glyptodon.org/jira/browse/GUAC-1540], an issue in the JIRA instance used by the Guacamole project prior to its acceptance into the Apache Incubator.*

Comments, attachments, related issues, and history from prior to acceptance *have not been copied* and can be found instead at the original issue.
{panel}

Hi there, 

I just wanted to open up the discussion about how you think about this approach in general. If the angular side of the client side project would be separated out, it would be much easier to use it on another rest api, for example on other platforms.

We would like to provide you with a pull request if you're interested in this and open up new folder inside of guacamole-client. It would contain only the angular frontend and its dependencies.

Then we would create a separate pom and add the maven dependency to the guacamole frontend.

Why?

It would be possible to use the angular frontend outside of the java project and it's really easy to integrate into other ports of the web-frontend.",,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-1540,,,,,,,,,,9223372036854775807,,,2016-07-05 18:41:16.0,,,,,,,"0|i30jyf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hostname should be explicitly configured for RMI/JMX connections to work remotely with DHCP addresses,KARAF-1138,12537204,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,metatech,metatech,04/Jan/12 16:16,05/Jan/12 08:12,17/Feb/21 11:14,,,,,,,,,,,,,1,,,,,,"JVM RMI logic to auto-guess its own IP address does not work well with default hostname settings (IP obtained via DHCP, but defined in /etc/hosts as ""localhost"") on Linux. When trying to call JMX remotely from a different machine, the caller receives ""127.0.0.1"" as server address, with the error below.
A workaround is to define the system property ""java.rmi.server.hostname"" to the real hostname.

This can be easily automated by adding in the script bin/karaf the following lines :
{code}
    IP_LOOKUP=`getent hosts \`hostname\` | wc -l`
    if [ $IP_LOOKUP -eq 0 ]; then
        JAVA_OPTS=""$JAVA_OPTS -Djava.rmi.server.hostname=`hostname`""
    fi
{code}

Another solution is to define manually the property in $KARAF_HOME/etc/system.properties.

A third possibility is to extend the hinted solution in ActiveMQCommandSupport.java

{code}
smx@root> activemq:list --jmxurl service:jmx:rmi:///jndi/rmi://172.16.159.1:1099/karaf-root --jmxuser smx --jmxpassword smx
ERROR: java.lang.RuntimeException: Failed to execute list task. Reason: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: 
	java.net.ConnectException: Connection refused
java.lang.RuntimeException: Failed to execute list task. Reason: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: 
	java.net.ConnectException: Connection refused
	at org.apache.activemq.console.command.ListCommand.runTask(ListCommand.java:53)
	at org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:57)
	at org.apache.activemq.console.command.AbstractJmxCommand.execute(AbstractJmxCommand.java:316)
	at org.apache.activemq.karaf.commands.ActiveMQCommandSupport.doExecute(ActiveMQCommandSupport.java:46)
	at org.apache.karaf.shell.console.OsgiCommandSupport.execute(OsgiCommandSupport.java:38)
	at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)
	at org.apache.felix.gogo.runtime.shell.CommandProxy.execute(CommandProxy.java:50)
	at org.apache.felix.gogo.runtime.shell.Closure.execute(Closure.java:229)
	at org.apache.felix.gogo.runtime.shell.Closure.executeStatement(Closure.java:162)
	at org.apache.felix.gogo.runtime.shell.Pipe.run(Pipe.java:101)
	at org.apache.felix.gogo.runtime.shell.Closure.execute(Closure.java:79)
	at org.apache.felix.gogo.runtime.shell.CommandSessionImpl.execute(CommandSessionImpl.java:71)
	at org.apache.karaf.shell.console.jline.Console.run(Console.java:170)
	at java.lang.Thread.run(Thread.java:662)

Could not connect to JMX server.  This command requires that the remote JMX server be enabled.
This is typically done by adding the following JVM arguments: 
   -Dcom.sun.management.jmxremote.port=1099 -Dcom.sun.management.jmxremote.authenticate=false 
   -Dcom.sun.management.jmxremote.ssl=false 

The connection error was: java.net.ConnectException: Connection refused
{code}

http://forum.springsource.org/showthread.php?64670-Why-do-I-need-to-define-java-rmi-server-hostname&s=cd088bea049ead95d2cb3ff186babaef&p=219304#post219304
",ServiceMix 4.3,lichtin,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-01-04 16:37:00.696,,,false,,,,,,,,,,,,,,,,,,222713,,,Thu Jan 05 08:12:43 UTC 2012,,,,,,,"0|i1cj0n:",281212,,,,,,,,,,,,,,,,,"04/Jan/12 16:37;djencks;How does this relate to KARAF-1129?","05/Jan/12 08:12;metatech;KARAF-1129 is about exposing the RMI registry on a chosen network interface.
KARAF-1138 is related, but complementary :
The RMI registry acts as a ""UDDI"" and allows clients to send lookup requests for services and find their related IP and ports.
The RMI registry implementation has a too simplistic logic : a lookup response can contain ""localhost"" instead of a real hostname.",,,,,,,,,,,,,,,
Allow recusive variable references to be applied as substitution then assignment,KARAF-1070,12533422,Improvement,Reopened,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,earcam,earcam,01/Dec/11 10:39,02/Dec/11 14:28,17/Feb/21 11:14,,2.2.4,,,,,,,,,,,0,,,,,,"Hi,


I tried adding the following to custom.properties:

{noformat}
org.osgi.framework.bootdelegation = ${org.osgi.framework.bootdelegation}, org.bouncycastle.*
{noformat} 

In the hope that it would do substitution then assignment, but I get an illegal arg exception ""recursive variable reference: org.osgi.framework.bootdelegation""  (at org.apache.karaf.main.Main.substVars(Main.java:1201))

If the above were possible our custom distro would extend rather than overwrite the standard Karaf settings - which would make custom distros a bit more resilient (I'm somewhat fearful I'll miss a change in config, even when running diffs on the stock and custom cfg files).


(btw creating a custom distro is incredibly easy and a really cool feature, thanks)",,earcam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-12-01 10:59:19.817,,,false,,,,,,,,,,,,,,,,,,219150,,,Fri Dec 02 14:26:20 UTC 2011,,,,,,,"0|i1cj33:",281223,,,,,,,,,,,,,,,,,"01/Dec/11 10:59;pieber;the bootdelegation property between the system and custom file are already aggregated. There's no need for referencing them again.","01/Dec/11 12:22;earcam;Ah, thanks Andreas - guess it's better to ask this kind of thing on karaf users mailing list first rather than create spam jira tickets. Apologies for the spam!","02/Dec/11 14:26;earcam;Sorry to reopen this (I know the feature request doesn't match what I'm now reporting as a bug - if you'd prefer I can create a new ticket).

It looks like the property is overwritten not aggregated.

Steps to reproduce:
# Starting fresh:
{noformat}
wget http://www.apache.org/dyn/closer.cgi/karaf/2.2.4/apache-karaf-2.2.4.tar.gz
tar -xvzf apache-karaf-2.2.4.tar.gz
cd apache-karaf-2.2.4/
{noformat}
# Repeat with/without this next step, webconsole authentication depends on ""org.apache.karaf.jaas.boot"" being present
{noformat}
echo ""org.osgi.framework.bootdelegation = org.bouncycastle.*;"" >> etc/custom.properties
{noformat}

# In Karaf shell, install webconsole
{noformat}
./bin/karaf

features:install webconsole
{noformat}
# Attempt to login to webconsole, with the boodelegation in the custom.properties it will fail as it can't find org.apache.karaf.jaas.boot.ProxyLoginModule



",,,,,,,,,,,,,,
Make Thread in LocalConsole not a daemon thread,KARAF-51,12424235,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,adreghiciu,adreghiciu,29/Apr/09 22:49,08/Dec/10 09:50,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"When using the LocalConsole in Equinox without console, equinox will exit if their own console is not there (and is not there because we use GShell) unless there is a non daemon thread. So, just mark the created thread as non daemon thread.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2009-04-30 07:11:41.118,,,false,,,,,,,,,,,,,,,,,,146501,,,Wed Dec 08 09:50:05 UTC 2010,,,,,,,"0|i1ci6v:",281078,,,,,,,,,,,,,,,,,"30/Apr/09 07:11;gnodet;AFAIK, the thread is not a daemon thread.
See https://svn.apache.org/repos/asf/felix/trunk/karaf/gshell/gshell-core/src/main/java/org/apache/servicemix/kernel/gshell/core/LocalConsole.java

The init method have the following code:
{code}
new Thread(this, ""localShell"").start();
{code}","01/May/09 11:06;adreghiciu;It is strange. During my tests I changed the line you mention into:
{code}
Thread thread = new Thread(this, ""localShell"");
thread.setDaemon(false);
thread.start();
{code}

and the problem was gone. I know it is strange as by default the thread is not a daemon thread but maybe I miss something here.

More, I cannot test now as my whole testing infrastructure (the pax runner profile) is blocked by FELIX-1115.","01/May/09 11:16;karlpauls;The point is that threads inherit the daemon status from their parent (ie., the thread that created them). Unless you explicitly override using setDaemon. In felix, we settled for letting this happen as it seems the most flexible. Equinox will start with a daemon thread which makes all other threads be daemon by default. There is an equinox specific property to change this behavior. Probably, it is best to use that property instead of introducing a new one to karaf...","01/May/09 11:18;karlpauls;You have to tell equinox:

osgi.framework.activeThreadType=normal

why that is in the osgi namespace I have no idea :-(","01/May/09 11:24;adreghiciu;That is for sure a better idea. ","08/Dec/10 09:50;pieber;Isn't this fixed by now?",,,,,,,,,,,
Cleanup code duplication between admin / main or testing / main,KARAF-48,12455749,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,gnodet,gnodet,09/Feb/10 10:24,28/Jun/10 09:57,17/Feb/21 11:14,,,,,,,,,,,,,0,,,,,,"For example the subsitution code is duplicated in several locations:
  * org.apache.felix.karaf.testing.Helper
  * org.apache.felix.karaf.main.Main
  * org.apache.felix.karaf.admin.internal.InstanceImpl

The AdminServiceImpl contains duplicate infromation related to the storage file ...

It would be nice to have a separate maven module which would hold the necessary classes to access karaf information (loading properties, pid file, shutdown socket, etc...) so that it would be easier to interact with a karaf instance",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,146498,,,2010-02-09 10:24:35.0,,,,,,,"0|i1cib3:",281097,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create debug-remote runtime option to open remote debug port in J11.,KARAF-7006,13354731,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,ehogeweg,ehogeweg,26/Jan/21 18:06,12/Feb/21 07:22,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"Can you please create a Jira about that ?
 
I will do it for 4.3.1 ;)
 
Regards
JB



{quote}Le 26 janv. 2021 à 17:14, Erwin Hogeweg <[erwin.hogeweg@me.com|mailto:erwin.hogeweg@me.com]> a écrit :
JB,

{quote}OK, then, it’s ""normal"", as bin/inc is provisioned by karaf base Kar/feature ([https://github.com/apache/karaf/tree/master/assemblies/features/base]).{quote}Yes, I am aware of that.


{quote}So, if you want to change bin/inc, you have to create your own base containing bin/inc updated.{quote}Maybe we should define an additional run option, something like ‘bin/karaf debug-remote’. Just saying :-)
 
 
Cheers,
 
Erwin{quote}",,ehogeweg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-01-26 18:06:29.0,,,,,,,"0|z0n0f4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide better error messages to the user,GUACAMOLE-1260,13351319,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,user12319273,user12319273,10/Jan/21 18:14,10/Jan/21 18:25,17/Feb/21 11:14,,1.3.0,,,,,guacamole-client,guacamole-common,guacamole-server,guacd,,,0,error_message_improvement,error-feedback,errorhandling,error-handling,user-experience,"There are many possible reasons why a Guacamole connection may fail. Some of them are issues with the Guacamole server, while many of them are problems with the Remote Desktop Server the User wants to connect to. So far, the only way to find the error cause is to connect to the Server running the guacd daemon and read the logs. This gets even harder if the issue occurred in the past and isn't easily reproducible, or if the server is used by multiple users and multiple connections happen in parallel. Having no kind of error feedback to the user is suboptimal, as even some trivial cases like wrong username/password can't be recognized by the user.

To address these issues, I think it might be helpful to provide at least the error message to the user session trying to establish a connection. Similar to the feedback a regular Remote Desktop Application would give the user. Especially for users managing their own Remote Desktop endpoints (e.g. their regular Windows computer at work) such error messages might already help the user to sort the issue out by themselves. And even if the user can't solve the problem by themselves, they can at least provide this error message to an admin to get fast assistance.

I think this would improve error handling a lot, as many problems probably wouldn't even need to be raised to the administrator of the Guacamole Server, as users can solve them by themselves. No lengthy log-checking by the sysadmin to recognize the error cause would be needed. And for these errors that do need to be solved by an admin, the admin would already get a starting point by the error message the user got. And also for the user this is an improvement, as he doesn't have to wait for the sysadmin to get their issue sorted out in many cases.

Please tell me if I'm missing something. Otherwise, I think this would be a a huge imrovement to this awesome project! Thanks!

This might be related to
 * [GUACAMOLE-1047: Notify connecting client on unrecognized connection ID|https://issues.apache.org/jira/browse/GUACAMOLE-1047]
 * [GUACAMOLE-752: Include guacd connection id in error messages displayed in browser|https://issues.apache.org/jira/browse/GUACAMOLE-752]
 * And probably others, these were the ones I could find.","Guacamole 1.3.0, Debian 10, Apache Tomcat 9",user12319273,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2021-01-10 18:25:04.444,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Jan 10 18:25:04 UTC 2021,,,,,,,"0|z0mfdc:",9223372036854775807,,,,,,,,,,,,,,,,,"10/Jan/21 18:25;vnick;[~user12319273]: First, I think there is likely some room for improved error messages to the user throughout Guacamole, so I'm good with this issue...

However, to balance that, one thing we are conscious about throughout the application is the balance of giving the user enough information to know what to do versus providing administrative-level information to the user. There could be security implications for exposing too much information to the user, and, while this may make it easier for an administrator looking over the shoulder of a user having issues, it could also make it easier for an attacker to exploit or attack a system if the information provided is too verbose.

So, again, not to say there aren't areas that could be improved, but just something to keep in mind in moving forward with this issue.",,,,,,,,,,,,,,,,
"client.bat - Message ""Failed to get the session"" shown only for 1ms",KARAF-6958,13345783,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,jbonofre,Grim,Grim,14/Dec/20 06:48,14/Dec/20 08:48,17/Feb/21 11:14,,4.3.0,,,,,karaf,,,,,,0,user-experience,,,,,"If you use the windows-explorer intuitively to start the client.bat by double-click the client.bat file in the \bin\ directory the command-line of windows appears. This is very good and equates tomcat's start.bat, jboss and other servers. 

 

Unfortunately the window disappear without a readable message if no connection could be esablished to the karaf server. 

 

Workaround: If you append on the tail of the client.bat the line ""pause"" you will be able to the the message ""Failed to get the session"".","Windows

Windows-Explorer",Grim,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-14 07:04:11.822,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Dec 14 08:48:20 UTC 2020,,,,,,,"0|z0lh1c:",9223372036854775807,,,,,,,,,,,4.2.11,4.3.1,,,,,"14/Dec/20 07:04;jbonofre;Fair enough. I'm not a Windows big fan, but I will improve this ;)","14/Dec/20 08:48;Grim;Nor am I! Unfortunately I regression-test native windows apps too and are bound a bit on windows. ",,,,,,,,,,,,,,,
Update webapp dependencies to latest stable and compatible versions,GUACAMOLE-773,13226571,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,dateno1,dateno1,07/Apr/19 16:18,26/Jul/20 00:30,17/Feb/21 11:14,,1.0.0,,,,,guacamole-client,,,,,,0,,,,,,"Some of the dependencies of the Guacamole web application are quite old. Assuming newer versions can be used without breaking things, these dependencies should be updated.

This issue as originally reported noted specifically that the following JavaScript dependencies have newer releases:

* angular-translate
* angular-translate-interpolation-message-format
* angular-translate-loader-static-files
* Blob-polyfill
* Datalist-polyfill
* Lodash

It's unlikely that the above have security implications, particularly in the way they are used, but checking through them and anything else within the various {{pom.xml}} would be good. Java dependencies end up bundled, as well, and are far more critical.",,dateno1,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-04-07 16:44:09.675,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Apr 07 16:44:09 UTC 2019,,,,,,,"0|z01ja8:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Apr/19 16:44;mjumper;{quote}
Some JS files not newest
{quote}

Yes.

{quote}
it maybe can be cause security problem
{quote}

No, not in this case. That said, going forward, if you do believe you have found something with security implications, the place to report that is the private security@guacamole.apache.org, not the public JIRA. See:

http://guacamole.apache.org/security/",,,,,,,,,,,,,,,,
Update SAML documentation with more examples,GUACAMOLE-1143,13318518,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,jcpunk,jcpunk,21/Jul/20 16:38,21/Jul/20 17:01,17/Feb/21 11:14,,1.2.0,,,,,Documentation,,,,,,0,,,,,,"The SAML authentication documentation could benefit from some example within the doc.

 

For example

The 'callback' url could have some hints provided as admins may not know the result",,jcpunk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Jul 21 16:38:43 UTC 2020,,,,,,,"0|z0h21s:",9223372036854775807,,,,,,,,,,,,,,,,,"21/Jul/20 16:38;jcpunk;https://issues.apache.org/jira/browse/GUACAMOLE-103?focusedCommentId=17144449&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17144449",,,,,,,,,,,,,,,,
add Docker secrets support for LDAP properties,GUACAMOLE-1099,13310990,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,ss10sb,ss10sb,11/Jun/20 19:57,11/Jun/20 20:42,17/Feb/21 11:14,,,,,,,guacamole-auth-ldap,guacamole-docker,,,,,0,,,,,,"Added _FILE for:
 * LDAP_SEARCH_BIND_DN
 * LDAP_SEARCH_BIND_PASSWORD
 * LDAP_USER_BASE_DN
 * LDAP_CONFIG_BASE_DN
 * LDAP_GROUP_BASE_DN

Added SSL certificate support via LDAP_SSL_CERT_FILE (eg /run/secrets/ldap_cert) with keytool import for the file. It could probably use an exists check but it works :)

See pull request [521|[https://github.com/apache/guacamole-client/pull/521]]",,ss10sb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-06-11 19:57:56.0,,,,,,,"0|z0fruw:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve Russian OSK to be able to enter Latin symbols also,GUACAMOLE-1055,13301676,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,darksimpson,darksimpson,29/Apr/20 00:21,29/Apr/20 00:37,17/Feb/21 11:14,,,,,,,guacamole-client,guacamole-common-js,,,,,0,,,,,,"I have improved Russian OSK to be able to enter Latin symbols also:

[https://github.com/darksimpson/guacamole-client/commit/39a4c15a7a12885342c02ef83f0ca0442770ae49]

It is very important for Russian users to be able to enter Latin symbols because almost all of theirs have two keyboard layouts (Russian and US English) and swith between them frequently. And almost all users passwords are formed from Latin symbols. Many of my users have passwords formed from Latin and Russian symbols. To be able to use OSK in insecure environments to enter passwords, these users must be able to enter Latin and Russian symbols same time. I received many requests from my users about this and decided to improve OSK to be able to do what they want.",,darksimpson,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Apr 29 00:37:37 UTC 2020,,,,,,,"0|z0e6sg:",9223372036854775807,,,,,,,,,,,,,,,,,"29/Apr/20 00:37;darksimpson;Added pull reuest: [https://github.com/apache/guacamole-client/pull/502]",,,,,,,,,,,,,,,,
Enforce rate limit within TOTP,GUACAMOLE-990,13292311,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,graham00,graham00,18/Mar/20 01:19,19/Mar/20 14:36,17/Feb/21 11:14,,,,,,,guacamole-auth-totp,,,,,,0,,,,,,"Google's [libpam module|https://github.com/google/google-authenticator-libpam/blob/master/man/google-authenticator.1.md] has a rate limit option to prevent brute forcing.

Does Guacamole's TOTP have anything built-in that's introducing any sleep/delay in the code input loop?

It _seems_ like it doesn't from my clumsy attempts at testing this by just hammering the keyboard :) 

If that's true then it seems like this would potentially be easier to bypass than even the password itself. I might be butchering the napkin math here, but with a possible number range of 1 million (6 digits) and 30 seconds, assuming a WAN latency per attempt of 7ms, that would mean that on average, once a hacker broke a password, they could then break through the TOTP segment over a scripted 233 login attempts or so.

If there was even a plain old unconfigurable 1 second sleep/delay (or better yet, a continually increasing delay of n*1second based on past failure count in the current cycle) built in to the code input loop between attempts without even any added guacamole.properties options being introduced, I think this would basically handle the problem by pushing the possible average breakthrough time into unreasonable timelines.

Also, though this would be another issue, it seemed that incrementing totp-digits with v1.1.0 to 8 didn't result in 8 digits being displayed when I scanned the resulting barcode in google authenticator. The introductory user bit did specify 8 digits - just not the resulting google authenticator entry. That may just be a bug in google authenticator however - not sure as I haven't tested any other TOTP apps, but I thought I'd mention it.",,graham00,mjumper,tusharjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-03-18 02:16:06.049,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Mar 18 04:42:10 UTC 2020,,,,,,,"0|z0cmso:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Mar/20 02:16;mjumper;No, there is no built-in rate limiting around authentication. I would suggest deploying something like fail2ban if you wish to ensure brute force attempts are quickly squashed.

I definitely don't think that math is correct (with 1 million possible codes, you'd expect the odds of a correct guess to be 1 in 1 million, not 1 in 233), and you would have a rather limited amount of time in which to make those million guesses before the code changes, but it's not an unreasonable feature.

It may be possible to do this across the board at the webapp level, temporarily blocking auth requests from that particular IP if some threshold has been reached, however you can definitely already do that with fail2ban.","18/Mar/20 04:42;graham00;My 233 napkin math was with the assumption that an attacker would script out an attempt to hammer the totp input dialog as quickly as could be driven by their internet latency per attempt (7ms for instance), so 30 seconds * 1000 = 30000ms. 30000/7=4285 attempts per 30 seconds. And then 1000000/4285=~233 (on average of course...luck of the draw).

fail2ban would definitely work in terms of banning a single IP attacker trying to break the initial password (assuming it wasn't a spray attack and all), but does guacamole log something separately for a failure during the totp phase? In syslog all I see on each successive attempt to enter an incorrect totp code in syslog is the following:

tomcat9[1805]: 04:14:08.569 [http-nio-8080-exec-7] INFO o.a.g.r.auth.AuthenticationService - User ""username"" successfully authenticated from <IP>

I did try enabling debug logging via logback.xml, and I get a huge number of pages on each attempt, but when I filter by my IP I still just get the above along with some ""UserRecordMapper.insert"" which seems to just be recording a timestamp.

I guess perhaps I could set up fail2ban to ban based on too many successive _successes_ in a certain time period...might give that a shot tomorrow. It'd be nice if there was a distinct failure message in the log for the totp attempts though.

Another idea I had was perhaps trying rate limiting via an nginx proxy.

 

EDIT: fail2ban did work out for me in the end after a lot of testing, though a ramping delay loop in the totp phase would still be great to enhance security further (and particularly useful for anyone not setting up fail2ban with the totp phase in mind since one has to look for 'successes' in the logs and not failures to target it)",,,,,,,,,,,,,,,
VNC Scaling Not working properly,GUACAMOLE-733,13215302,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,amlamarra,amlamarra,12/Feb/19 18:44,30/Dec/19 12:28,17/Feb/21 11:14,,0.9.14,,,,,guacamole-client,VNC,,,,,1,vnc,,,,,"Hi there. I've been using Guacamole for a couple of years now (and love it!), but I've always had one issue. When connecting to a VNC server, the scaling of the window has always been a bit awkward to me. It's really difficult to get Guacamole to scale the display to 100%. I'm able to do so by following these steps:
 * Open the Guacamole menu (press Ctrl+Alt+Shift)
 * Uncheck ""Automatically fit to browser window"" under Display
 * Un-maxmize browser window
 * Check ""Automatically fit to browser window""
 * Uncheck ""Automatically fit to browser window""

Now I'm at 100%. But I can't maximize the browser window or it'll change (even though I have ""Automatically fit to browser window"" unchecked). It's a minor annoyance because the font is noticeably fuzzy when not at 100%.

Also, those zoom buttons don't work very well either. It only goes in increments of 10%. And if you're at 109% and zoom out, then you're set to 99%...","The VNC Server:
Ubuntu 16.04.5 LTS
TigerVNC",amlamarra,Lo,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-02-12 18:47:10.277,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Dec 30 12:28:54 UTC 2019,,,,,,,"0|yi0wow:",9223372036854775807,,,,,,,,,,,,,,,,,"12/Feb/19 18:47;vnick;Have you tried this in version 1.0.0, yet?  At least part of your issue, here, was fixed in 1.0.0, with a change to the Zoom mechanism that allows you to enter a zoom level manually instead of just using the plus/minus buttons.","12/Feb/19 18:52;amlamarra;I have not. And, admittedly, I didn't even realize 1.0.0 was out. I'll try that & report back.","15/Feb/19 20:36;amlamarra;I've upgraded everything to version 1.0.0 and now I can't initiate a VNC connection. I can still connect to the VNC server via a regular vncviewer client on my network. Guacamole, however, just gives me the error: ""The remote desktop server is currently unreachable. If the problem persists, please notify your system administrator or check your system logs.""

I was able to obtain the following relevant logs from catalina.out:
{noformat}
15:24:19.422 [http-nio-8080-exec-5] INFO o.a.g.tunnel.TunnelRequestService - User ""user"" connected to connection ""2"".
15:24:24.480 [Thread-34] INFO o.a.g.tunnel.TunnelRequestService - User ""user"" disconnected from connection ""2"". Duration: 5057 milliseconds
15:24:27.081 [http-nio-8080-exec-10] INFO o.a.g.tunnel.TunnelRequestService - User ""user"" connected to connection ""2"".
Exception in thread ""Thread-37"" java.lang.IllegalStateException: Message will not be sent because the WebSocket session has been closed
        at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:384)
        at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.startMessage(WsRemoteEndpointImplBase.java:341)15:24:27.207 [http-nio-8080-exec-2] INFO
        o.a.g.tunnel.TunnelRequestService - User ""user"" disconnected from connection ""2"". Duration: 125 milliseconds

        at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$TextMessageSendHandler.write(WsRemoteEndpointImplBase.java:759)
        at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:252)
        at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendString(WsRemoteEndpointImplBase.java:195)
        at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:37)
        at org.apache.guacamole.websocket.GuacamoleWebSocketTunnelEndpoint.sendInstruction(GuacamoleWebSocketTunnelEndpoint.java:152)
        at org.apache.guacamole.websocket.GuacamoleWebSocketTunnelEndpoint.access$200(GuacamoleWebSocketTunnelEndpoint.java:53)
        at org.apache.guacamole.websocket.GuacamoleWebSocketTunnelEndpoint$2.run(GuacamoleWebSocketTunnelEndpoint.java:253){noformat}
Also, I'm running Guacamole on a FreeNAS 11.2 iocage jail with Apache Tomcat & MariaDB.

Are there other logs I should be looking at to troubleshoot the issue?","16/Feb/19 18:03;vnick;guacd logs also might be helpful, and might be worth starting guacd in debug mode (-L debug) to get some more detailed logs.

However, the messages above look like perhaps something related to Websocket tunneling or something like that - are you using Tomcat with either Nginx or Apache httpd?","16/Feb/19 22:00;amlamarra;I started guacd in debug mode.

 
{noformat}
# guacd -L debug
guacd[20501]: INFO:    Guacamole proxy daemon (guacd) version 1.0.0 started
guacd[20501]: DEBUG:    Successfully bound socket to host 127.0.0.1, port 4822
guacd[20501]: DEBUG:    Exiting and passing control to PID 20502
guacd[20502]: DEBUG:    Exiting and passing control to PID 20503{noformat}
Only problem is, I don't know where the log files are kept. Where can I find that? Or what's the filename supposed to be? I did find the following messages in /var/log/messages when I tried launching a VNC session:
{noformat}
Feb 16 16:38:38 guacamole guacd[18568]: Unable to connect to VNC server.
Feb 16 16:38:43 guacamole guacd[18432]: Unable to shutdown internal socket for connection $349c6bf5-6e78-4159-a8f3-bff3fa870366. Corresponding process may remain running but inactive.{noformat}
I do have an Apache reverse proxy that exposes a different machine running Guacamole to the outside world. The relevant config in my Virtualhost is:
{noformat}
        <Location /guacamole/>
            Order allow,deny
            Allow from all
            ProxyPass http://192.168.1.41:8080/guacamole/ flushpackets=on
            ProxyPassReverse http://192.168.1.41:8080/guacamole/
        </Location>
        <Location /guacamole/websocket-tunnel>
            Order allow,deny
            Allow from all
            ProxyPass ws://192.168.1.41:8080/guacamole/websocket-tunnel
            ProxyPassReverse ws://192.168.1.41:8080/guacamole/websocket-tunnel
        </Location>{noformat}
However, I have the same issue when I connect directly to the Guacamole server while on the LAN.","17/Feb/19 13:48;vnick;{quote}
Only problem is, I don't know where the log files are kept. Where can I find that?
{quote}

By default they are sent to syslog (/var/log/messages, journalctl, etc.).  You can also start guacd in the foreground using the -f flag:

{code}
guacd -L debug -f
{code}

And then all of the output will be to stdout.  Doesn't sound like the proxy is to blame, so looks like, for whatever reason, guacd cannot contact the VNC server.  Is it the same guacd server - same network, same IP, etc.?  No firewall rules or anything like that to prevent connection?  Have you verified you can connect with a VNC client from the same system running guacd?

I'm not familiar with FreeBSD iocage jails, so I don't know what, if any, impact that would have upon the functionality.","18/Feb/19 20:26;amlamarra;I've verified that there are no firewalls in the way (as there shouldn't be as all I've changed was upgrading to v1.0.0). Both systems are on the same subnet. I am able to connect to the VNC server from another computer using a VNC client. Again, nothing has changed on the VNC server. I started guacd in the foreground as you suggested & got the following output:
{noformat}
guacd[7519]: INFO: Guacamole proxy daemon (guacd) version 1.0.0 started
guacd[7519]: DEBUG: Successfully bound socket to host 127.0.0.1, port 4822
guacd[7519]: INFO: Listening on host 127.0.0.1, port 4822
guacd[7519]: INFO: Creating new client for protocol ""vnc""
guacd[7519]: INFO: Connection ID is ""$77741580-0656-4a1a-80cd-c8173c6d680a""
guacd[7692]: INFO: Cursor rendering: local
guacd[7692]: DEBUG: Parameter ""swap-red-blue"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""read-only"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""color-depth"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""dest-port"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""encodings"" omitted. Using default value of ""zrle ultra copyrect hextile zlib corre rre raw"".
guacd[7692]: DEBUG: Parameter ""autoretry"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""reverse-connect"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""listen-timeout"" omitted. Using default value of 5000.
guacd[7692]: DEBUG: Parameter ""enable-audio"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""enable-sftp"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""sftp-hostname"" omitted. Using default value of ""192.168.1.11"".
guacd[7692]: DEBUG: Parameter ""sftp-port"" omitted. Using default value of ""22"".
guacd[7692]: DEBUG: Parameter ""sftp-username"" omitted. Using default value of """".
guacd[7692]: DEBUG: Parameter ""sftp-password"" omitted. Using default value of """".
guacd[7692]: DEBUG: Parameter ""sftp-passphrase"" omitted. Using default value of """".
guacd[7692]: DEBUG: Parameter ""sftp-root-directory"" omitted. Using default value of ""/"".
guacd[7692]: DEBUG: Parameter ""sftp-server-alive-interval"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""recording-name"" omitted. Using default value of ""recording"".
guacd[7692]: DEBUG: Parameter ""recording-exclude-output"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""recording-exclude-mouse"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""recording-include-keys"" omitted. Using default value of 0.
guacd[7692]: DEBUG: Parameter ""create-recording-path"" omitted. Using default value of 0.
guacd[7692]: INFO: User ""@dbdfdef5-43e6-4615-9592-01df5709f6a6"" joined connection ""$77741580-0656-4a1a-80cd-c8173c6d680a"" (1 users now present)
guacd[7692]: ERROR: Unable to connect to VNC server.
guacd[7692]: INFO: User ""@dbdfdef5-43e6-4615-9592-01df5709f6a6"" disconnected (0 users remain)
guacd[7692]: INFO: Last user of connection ""$77741580-0656-4a1a-80cd-c8173c6d680a"" disconnected
guacd[7692]: DEBUG: Requesting termination of client...
guacd[7692]: DEBUG: Client terminated successfully.
guacd[7519]: INFO: Connection ""$77741580-0656-4a1a-80cd-c8173c6d680a"" removed.
guacd[7519]: ERROR: Unable to shutdown internal socket for connection $77741580-0656-4a1a-80cd-c8173c6d680a. Corresponding process may remain running but inactive.
{noformat}
Not sure if those errors help.","25/Feb/19 22:21;amlamarra;I re-created the FreeNAS jail with v0.9.14 and the VNC connection works again. Not sure why it isn't working in v1.0.0...","24/Dec/19 14:43;Ilan2;I confirm that  Andrew's original report about scaling is relevant also in version 1.0.0. He has described it very accurately. The minute the rendered area allows Guacamole for scaling up, it does so regardless the state of the ""Automatically fit to browser window"" button. I would speculate that this is an issue of Guacamole client alone, even though my tests are made also with VNC server.  The quality of the displayed content (fuzzy fonts)  is critical for eye health.","30/Dec/19 12:28;amlamarra;Just as an update to my previous comment, I managed to get v1.0.0 to work in a FreeNAS jail. Still has this issue, though.",,,,,,,
Allow one or more users active sessions and history to be viewable by specified user,GUACAMOLE-460,13123969,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,Asaip,Asaip,10/Dec/17 08:38,14/Aug/19 01:45,17/Feb/21 11:14,,,,,,,,,,,,,1,,,,,,Allow admin to allow aceess to active session and history to another non-admin user. ,Any,Asaip,jcharaoui,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-08-14 01:45:59.184,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Aug 14 01:45:59 UTC 2019,,,,,,,"0|i3nqjb:",9223372036854775807,,,,,,,,,,,,,,,,,"14/Aug/19 01:45;vnick;At least part of this is contained in changes made in GUACAMOLE-360 - Admins now have the ability to join existing sessions.",,,,,,,,,,,,,,,,
Update remote clipboard while menu is open,GUACAMOLE-676,13203853,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,mtravers,mtravers,11/Dec/18 23:40,15/Dec/18 18:57,17/Feb/21 11:14,,0.9.14,,,,,guacamole,,,,,,0,,,,,,"When using the copy-and-paste feature, when text is entered into the sidebar text area it is not copied into the remote clipboard until the sidebar is closed. Only then can the text in the sidebar be pasted into the remote environment.

It would be nice to be able to paste into the remote environment without having to close the sidebar. Is it possible to get the remote clipboard updated without having to press cntrl-alt-shift to close the sidebar?

The remote I am using is Ubuntu 16.04 with vnc4server running.

Thanks!

 ","Ubuntu 16.04
vnc4server 4.1.1+xorg4.3.0-37.3ubuntu2",arijehcapa,mjumper,mtravers,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-12-15 18:56:28.933,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Dec 15 18:56:28 UTC 2018,,,,,,,"0|s01f60:",9223372036854775807,,,,,,,,,,,,,,,,,"15/Dec/18 18:56;mjumper;This is intentional behavior, not a bug. Updating the remote clipboard while the clipboard is being edited would result in O(N^2) data being sent over the course of the edit. For example, while typing ""Hello"" in the clipboard editor, the following clipboard updates would be sent:

# H
# He
# Hel
# Hell
# Hello

For small amounts of text, this is negligible, but if the content of the clipboard is already relatively large performance takes a noticeable hit.

The user needs to take some action to indicate that they are no longer editing the clipboard and the current contents can be safely sent to the remote side. Currently, that action is closing the menu. I can imagine this being modified to including a certain amount of time elapsing since the last edit or mouse events within the display, though whether that actually works in practice will depend on how quickly the remote desktop responds to updated clipboard contents. If the remote desktop handles mouse interaction before finishing its update of the clipboard, the user will unexpectedly paste the old clipboard contents.

Assuming doing so doesn't result in inconsistent behavior or performance issues, it's worth making the change. That said, this still seems a bit of a corner case, and with direct clipboard integration continuing to improve (see GUACAMOLE-559), I doubt the clipboard editor in the Guacamole menu will remain a significant part of most users' workflows.",,,,,,,,,,,,,,,,
allow @Command objects to implement Runnable - or have a @Run annotation on the method so that they don't have to extend Action to avoid runtime Karaf dependency,KARAF-154,12472350,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,jstrachan,jstrachan,24/Aug/10 10:30,15/Sep/18 16:36,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"It would be nice to be able to write commands using either the JDK's Runnable interface, or to use a @Run annotation (or @Execute or something) to mark the method which should be invoked when the command is run. 

This would mean that the only dependency on Karaf for writing commands would be annotations; so there would be no runtime class dependency; letting us embed karaf commands all over the place without folks worrying about adding another runtime dependency to their code",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2010-09-14 18:01:26.397,,,false,,,,,,,,,,,,,,,,,,146518,,,Fri Sep 17 08:50:56 UTC 2010,,,,,,,"0|i1cidb:",281107,,,,,,,,,,,,,,,,,"14/Sep/10 18:01;jgoodyear;Hi James, any update on this issue? We're discussing cutting a Karaf 2.1.0 release soon and I'd like to know if this issue may be worked on / resolved soon, otherwise we may push this one out to 2.2.0. Thanks :)","15/Sep/10 14:06;jstrachan;more of a future enhancement, lets defer it","17/Sep/10 08:50;jstrachan;turns out this is a fairly big refactor with not that much gain (it just lets you avoid the compile time dependency on karaf console); so going to defer a while :)",,,,,,,,,,,,,,
support injection of other kinds of collections for arguments / options,KARAF-153,12472349,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,jstrachan,jstrachan,24/Aug/10 10:18,15/Sep/18 16:36,17/Feb/21 11:14,,,,,,,karaf,,,,,,0,,,,,,"in some other languages and frameworks different collection types are used. For example, in Scala its preferable to use scala.collection.List for collections rather than java.util.List. 

So it would be awesome to be able to handle type conversion on collections of injection values. e.g.

{code:scala}
// this is Scala code
@Command(name = ""foo"", description = ""whatever"")
class FooCommand extends Action {
  @Argument(description = ""whatnot"")
  var args: List[String] = _
   ..
}
{code}

where args will be of type scala.collection.List but basically be equivalent to java.util.List semantically
  
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2010-09-14 18:04:12.692,,,false,,,,,,,,,,,,,,,,,,146517,,,Wed Sep 15 14:10:04 UTC 2010,,,,,,,"0|i1cidj:",281108,,,,,,,,,,,,,,,,,"14/Sep/10 18:04;jgoodyear;Hi James, any update on this issue? We're discussing cutting a Karaf 2.1.0 release soon and I'd like to know if this issue may be worked on / resolved soon, otherwise we may push this one out to 2.2.0. Thanks :) ","15/Sep/10 14:10;jstrachan;its a nice to have - lets defer",,,,,,,,,,,,,,,
"""Macro Recorder"" for patch installation",KARAF-890,12524410,Improvement,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,topping,topping,23/Sep/11 12:49,15/Sep/18 16:36,17/Feb/21 11:14,,,,,,,karaf,,,,,,1,,,,,,"I had this idea so I thought I would share it.  I don't believe I have the skills to implement it (yet), but thought I would at least get it out of my head so I don't forget it.

When applying changes to an instance that I would like to replicate across multiple nodes and/or otherwise notate the changes I made, it might be helpful to have something like a ""macro recorder"" that can monitor my changes, record them in a replay file, allow the file to be edited, and play the the file back.  Even in many nodes clustered in a single cluster (the changes should propagate), any changes would likely be tested in a test cluster first and that file committed to SCM, and the ability to apply the exact changes that were committed to SCM could provide the immediacy of the command-line with the reproducibility of a more structured environment.  

From an implementation perspective, if the actions of the different commands that change Karaf's state were firing events, it should be very simple to implement all this.  I think it would be good that the recorder automatically kept a list of macros rather than requiring special setup or explicit saving.  That way, macros could form ""quick notes"" whereby if someone was doing something they wanted to remember, they could just start the macro recorder, and when they stopped it, if they didn't do anything, it would still automatically persist their work until such time they did something with it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-09-28 04:05:33.149,,,false,,,,,,,,,,,,,,,,,,34393,,,Sun May 13 02:04:10 UTC 2012,,,,,,,"0|i1civr:",281190,,,,,,,,,,,,,,,,,"28/Sep/11 04:05;jbonofre;It sounds good. On Unix, screen -L (log mode) does quite the same: it's able to generate a ""script file"" by recording user actions.","28/Sep/11 09:59;pieber;nothing to add. Really great idea. Besides of the possibility to push this into the SCM it is also quite useful during developing. I often have situations where I need a clean karaf in a very specific state and it would be really useful starting karaf, exec the script and having it in a defined state...

--> +1 :-)","13/May/12 02:04;pieber;NO improvements or new features on micro release branches! I've set the target to 3.1.0.",,,,,,,,,,,,,,
Add SQLite module to guacamole-auth-jdbc,GUACAMOLE-415,13108971,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,vnick,vnick,vnick,12/Oct/17 16:40,19/Feb/18 01:55,17/Feb/21 11:14,,,,,,,guacamole-auth-jdbc,,,,,,1,,,,,,"Implementing a SQLite JDBC module.  Most of the work is done, just working out a few bugs/kinks in the code before doing a PR.",,MathiasM,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-10-12 16:40:49.0,,,,,,,"0|i3l75r:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support/workaround Glassfish' internal classloader behavior,GUACAMOLE-425,13111877,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,umut,umut,25/Oct/17 06:15,04/Feb/18 15:07,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"I tried deploy guacamole.war file to sun glassfish it throw a error. Is it possible to deploy it into sun glassfish?

command;
{noformat}
/opt/sun-glassfish/bin/asadmin deploy ~/guacamole.war 
{noformat}

error;
{noformat}
com.sun.enterprise.admin.cli.CommandException: remote failure: Exception while loading the app : java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: com.google.inject.CreationException: Guice creation errors:

1) An exception was caught and reported. Message: Unable to load class with name [org.apache.guacamole.tunnel.websocket.jetty8.RestrictedGuacamoleWebSocketTunnelServlet], reason: java.lang.RuntimeException: Unable to load class with name [org.apache.guacamole.tunnel.websocket.jetty8.GuacamoleWebSocketTunnelServlet], reason: java.lang.NoClassDefFoundError: org/eclipse/jetty/websocket/WebSocketServlet
  at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:133)

1 error


Command deploy failed.
{noformat}",,mjumper,umut,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/17 07:03;umut;guacamole_war_deploy.log;https://issues.apache.org/jira/secure/attachment/12894090/guacamole_war_deploy.log",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2017-10-25 06:22:33.567,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Oct 26 19:06:11 UTC 2017,,,,,,,"0|i3lo5r:",9223372036854775807,,,,,,,,,,,,,,,,,"25/Oct/17 06:22;mjumper;Is there anything else in the logs prior to this?

It's curious that it should be trying to load the Jetty 8 support for WebSocket, as the availability of the associated classes is specifically tested prior to attempting to do so:

https://github.com/apache/incubator-guacamole-client/blob/1c0ee41d0ecd5bc4a3550804b74b73b901e074c2/guacamole/src/main/java/org/apache/guacamole/tunnel/websocket/jetty8/WebSocketTunnelModule.java#L40-L56

Has your copy of Guacamole been modified in any way?","26/Oct/17 07:08;umut;I attached server log realated to deploy operations. 

I use guacamole.war which was downloaded from official web site of project, http://guacamole.incubator.apache.org/releases/0.9.13-incubating/.

Thanks for helping.","26/Oct/17 19:06;mjumper;It looks like the issue here is indeed Glassfish. Scrounging through the Glassfish code, I found [the code which produces that {{RuntimeException}}|http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.web/war-util/3.0/org/glassfish/web/loader/WebappClassLoader.java#944]:

{code:java}
...
            try {
                ...
            } catch (Throwable t) {
                String msg = rb.getString(
                    ""webappClassLoader.unableToLoadClass"");
                msg = MessageFormat.format(msg, name, t.toString());
                throw new RuntimeException(msg, t);
            }
...
{code}

Glassfish' internal class loader implementation has a blanket catch-all for any {{Throwable}} that isn't handled by the class loader itself, in this case a {{NoClassDefFoundError}}, which rethrows everything as a {{RuntimeException}}. This will mask all but a few exception classes, breaking any web application which relies on actually catching {{NoClassDefFoundError}}, such as Guacamole.

If newer versions of Glassfish suffer from the same problem, I guess we'll have to broaden the exception handling within the WebSocket support detection modules to defend against such things. In the meantime, using a different servlet container like Tomcat or Jetty should work great.",,,,,,,,,,,,,,
Allow root level of Guacamole interface to be modified via extensions,GUACAMOLE-315,13077106,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,mjumper,mjumper,04/Jun/17 02:16,22/Jan/18 20:32,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"Though GUACAMOLE-9 added support for modifying/patching HTML structure via extensions, that support relies on the templating system used by AngularJS for directives, and thus cannot be used for any part of the Guacamole interface not implemented using directives. This means that absolutely all parts of the Guacamole UI can be modified except the top/root level of the interface.

Lacking this support prevents extensions from adding things like notification services which would be best placed at the root level.",,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-06-04 02:16:25.0,,,,,,,"0|i3fupb:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a connection setting to share current session without link,GUACAMOLE-453,13122386,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,mlschuh,mlschuh,02/Dec/17 23:50,08/Jan/18 20:31,17/Feb/21 11:14,,,,,,,,,,,,,4,,,,,,"I'm working in a lot of environments where small teams are constantly collaborating and working together on the same remote connection. Session sharing and sharing profiles were an amazing addition that changed the way we work. It would be handy for sharing to be extended to have the ability for the following:

# User A logs into Guacamole and creates an RDP/VNC session to Computer A.
# User A asks User B for help. User A does not make a share link.
# User B logs in and can directly connect to the existing session from User A without a share link.

Theres a few different approaches that I could see this taking. Have a connection setting/share profile that's ""Always connect to an open session if one exists"" or ""Prompt to connect to an open session"". Or maybe a user can promote their current session to a Shared Session that appears in the connections list for other users (A shared link already does this in some fashion). I could even see it being a PIN or some other form of simple auth that can be easily typed to connect to an existing session. Maybe an indicator/dialog appearing for the current session member(s) to approve/deny someone joining the session.

The reason that shared links don't always work is that we're often times working between computers that have no direct access to one another (One doesn't have internet usually) but both can access the Guacamole server. In those situations, we are literally putting a text file with the share URL on a file server and then going to a different computer with internet access to send it out.",,abelmonte,Genokrad,mlschuh,tickietackie,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-12-02 23:50:41.0,,,,,,,"0|i3nguf:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Avoid taking up majority of available space with on-screen keyboard,GUACAMOLE-479,13129240,Improvement,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,amarjeetxc,amarjeetxc,08/Jan/18 13:38,08/Jan/18 18:51,17/Feb/21 11:14,,,,,,,guacamole,,,,,,0,,,,,,"I have opened on-screen keyboard which opened on the screen but covers most of the screen because of which RDP Screen size decreases too much. Why Would I use On-screen keyboard if I can't see RDP screen properly

Refer the screenshot.

It should be parallely aligned the RDP canvas.

Can't we make it draggable ?",,amarjeetxc,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jan/18 13:38;amarjeetxc;Keyboard_UI.PNG;https://issues.apache.org/jira/secure/attachment/12905090/Keyboard_UI.PNG",,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,2018-01-08 18:50:42.118,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jan 08 18:50:42 UTC 2018,,,,,,,"0|i3omw7:",9223372036854775807,,,,,,,,,,,,,,,,,"08/Jan/18 18:50;mjumper;Scaling and centering the display to fit the available space is intended behavior, not a bug. The fact that something is not done to prevent the display from becoming a postage stamp when the available space is very small is perhaps something that can be improved upon, but there is a specific issue type for such things.

{quote}
It should be parallely aligned the RDP canvas.
{quote}

What do you mean by this?

{quote}
Can't we make it draggable ?
{quote}

Anything can be made draggable. Whether that would be an improvement, and whether it would be a good solution in general, is another question.

I'm sure there is a way this behavior can be improved, however there will always be a case where either the display or the keyboard will end up impractically small.",,,,,,,,,,,,,,,,
