Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Log Work,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Blocked),Outward issue link (Blocker),Outward issue link (Blocker),Outward issue link (Dependency),Outward issue link (Duplicate),Outward issue link (Problem/Incident),Outward issue link (Reference),Outward issue link (Reference),Outward issue link (Required),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Outward issue link (dependent),Attachment,Attachment,Custom field (Affects version (Component)),Custom field (Attachment count),Custom field (Blog - New Blog Administrators),Custom field (Blog - New Blog PMC),Custom field (Blog - Write access),Custom field (Blog Administrator?),Custom field (Blogs - Admin for blog),Custom field (Blogs - Email Address),Custom field (Blogs - Existing Blog Access Level),Custom field (Blogs - Existing Blog Name),Custom field (Blogs - New Blog Write Access),Custom field (Blogs - Username),Custom field (Bug Category),Custom field (Bugzilla - Email Notification Address),Custom field (Bugzilla - List of usernames),Custom field (Bugzilla - PMC Name),Custom field (Bugzilla - Project Name),Custom field (Bugzilla Id),Custom field (Bugzilla Id),Custom field (Change Category),Custom field (Complexity),Custom field (Date of First Response),Custom field (Discovered By),Custom field (Docs Text),Custom field (Enable Automatic Patch Review),Custom field (Epic Link),Custom field (Estimated Complexity),Custom field (Evidence Of Open Source Adoption),Custom field (Evidence Of Registration),Custom field (Evidence Of Use On World Wide Web),Custom field (Existing GitBox Approval),Custom field (External issue ID),Custom field (External issue URL),Custom field (Fix version (Component)),Custom field (Flags),Custom field (Git Notification Mailing List),Custom field (Git Repository Import Path),Custom field (Git Repository Name),Custom field (Git Repository Type),Custom field (GitHub Options),Custom field (Github Integration),Custom field (Github Integrations - Other),Custom field (Global Rank),Custom field (INFRA - Subversion Repository Path),Custom field (Initial Confluence Contributors),Custom field (Last public comment date),Custom field (Level of effort),Custom field (Machine Readable Info),Custom field (New-TLP-TLPName),Custom field (Priority),Custom field (Project),Custom field (Protected Branch),Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Review Date),Custom field (Reviewer),Custom field (Severity),Custom field (Severity),Custom field (Skill Level),Custom field (Source Control Link),Custom field (Space Description),Custom field (Space Key),Custom field (Space Name),Custom field (Tags),Custom field (Target Version/s),Custom field (Target Version/s),Custom field (Test and Documentation Plan),Custom field (Testcase included),Custom field (Tester),Custom field (Workaround),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Add support for SSH certificates,GUACAMOLE-1290,13359007,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,m.passerini,m.passerini,17/Feb/21 08:17,17/Feb/21 08:25,17/Feb/21 11:13,,,,,SSH,,,,,,,,,0,,,,,"Guacamole does not work with SSH certificates. In order to log in with SSH certificates, one would need to include the public key, signed by the CA, in addition to the private key.

More documentation on how this works is provided here:

[https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/sec-using_openssh_certificate_authentication]

The feature was requested first on the user mailing list: [http://mail-archives.apache.org/mod_mbox/guacamole-user/202102.mbox/%3CCALKeL-OJB7FGxdoyekJW-G12-ppdRVJ%2BWs%3DTP%2BAingWcuZEdig%40mail.gmail.com%3E]

 ",,m.passerini,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Feb 17 08:25:15 UTC 2021,,,,,,,"0|z0nqs8:",9223372036854775807,,,,,,,,,,,,,,,,,"17/Feb/21 08:25;m.passerini;From what I saw in the code, it should be enough to add a public-key form in the guacamole-client, and modify the REST API of guacamole-server to include the public-key on that side as well. Then edit the logic in this section: [https://github.com/apache/guacamole-server/blob/master/src/common-ssh/key.c#L79] Currently the code is generating the public key from the private key. It should instead use the one provided by the user, if available. And do something like ""ssh -i privatekey -i publickey hostname"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add option to send key events instead of accessing the remote clipboard,GUACAMOLE-1282,13357175,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,lseki,lseki,05/Feb/21 20:44,05/Feb/21 20:53,17/Feb/21 11:13,,,,,guacamole,,,,,,,,,0,,,,,"Currently Guacamole relies on the VNC protocol's clipboard forwarding to send clipboard contents to the remote machine connected through VNC.

This does not work when the connection is to a QEMU/KVM guest machine through the QEMU/KVM built-in VNC server, as it does not have access to the guest machine's clipboard.

In such case, if a user wants to access the remote machine's clipboard, he/she needs to run a VNC server in the guest machine and ask the hypervisor's administrator to perform the necessary port redirection. This is not user friendly, and it's not always possible to do so.

It would be nice to have an option in Guacamole Menu (Ctrl+Alt+Shift) to toggle between sending the clipboard contents:

a) through VNC protocol's clipboard API; or

b) by sending keystrokes

This way, the user can choose to send keystroke events to the remote machine, and he/she will be able to paste clipboard contents on remote machines running as QEMU/KVM guests.

*Original discussion*

http://mail-archives.apache.org/mod_mbox/guacamole-user/202102.mbox/browser",,lseki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-02-05 20:44:12.0,,,,,,,"0|z0nfhc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add opentelemetry support,KARAF-7011,13355081,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,28/Jan/21 05:07,28/Jan/21 05:07,17/Feb/21 11:13,,,,,decanter,,,,,,,,,0,,,,,"opentelemetry is a framework pretty close in term of concepts to Decanter (we find collectors, exporters, etc). Decanter could support opentelemetry components.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-01-28 05:07:48.0,,,,,,,"0|z0n2ko:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add resources manager,KARAF-7010,13355000,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,27/Jan/21 18:20,27/Jan/21 18:20,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"The idea is to have a resources controller in karaf to ""allocate/control"" resources for each bundles (or features):
 * number of threads allocated for a bundle
 * % of CPU allocated for a bundle
 * % of memory (heap) allocated for a bundle",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-01-27 18:20:04.0,,,,,,,"0|z0n22o:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for X.Org,GUACAMOLE-168,13037292,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,mjumper,mjumper,mjumper,24/Jan/17 07:15,22/Jan/21 12:55,17/Feb/21 11:13,,,,,guacamole-client,guacamole-server,,,,,,,,26,,,,,"It's been frequently requested that we add support for a more efficient protocol like NX or X2Go. Though that sounds nice on the surface, and theoretically would allow us to leverage some of Guacamole's nicer protocol-level features, investigating deeper reveals:

# X2Go *is* NX - it uses the same protocol behind the scenes.
# NX isn't really a protocol - it is essentially a compressor for X11, and depends on the client having a local X11 server to handle the decompressed result.

Implementing support for either of these would thus involve implementing support for X11, which is crazy. *However:*

What about implementing a driver for the X.Org X11 server?

The X.Org server provides a driver abstraction layer which exposes access to windows (including their hierarchy) and pixmaps, much in the same way the Guacamole protocol provides nestable layers and buffers. If we were to implement a Guacamole driver for X.Org, we would be able to make much greater use Guacamole protocol features like client-side compositing. Operations which are typically expensive in VNC or RDP like window movement suddenly become simple, as they only involve updating the properties of a layer.

I have an experimental implementation of all this, built upon several other improvements which ended up being required. Work started several years ago, even before Guacamole was accepted into the Apache Incubator, but I think it's finally ready to move forward. I've been using it myself for roughly a month now, and so far so good.",,anegrea,arijehcapa,Astle,byymster,calvinmclean,cameronbraid,cspeckrun,director,fabio1299,fxchef,Ghost_Knight,gratuxri,hnz101,it2hand,jcpunk,jeredsutton_opstack,jkiel,kfiresmith,lyind,mathieu.brunot,mitchelltech5,mjumper,mlschuh,myset,netromnetrom,pasik,pgrod,pszabo,rleir,rupedelarupe,salia,sbooth,Suncatcher,todd.erickson@wwt.com,tridnguyen,troll,twa,vnick,xabier,xuruiqiang,,,,,,,,,,,,,,,,,,,GUACAMOLE-175,GUACAMOLE-177,GUACAMOLE-176,GUACAMOLE-178,GUACAMOLE-179,GUACAMOLE-180,GUACAMOLE-170,GUACAMOLE-169,GUACAMOLE-171,GUACAMOLE-172,GUACAMOLE-184,GUACAMOLE-185,GUACAMOLE-187,GUACAMOLE-189,"20/Jan/21 13:51;Ghost_Knight;00-guac.conf;https://issues.apache.org/jira/secure/attachment/13019069/00-guac.conf","20/Jan/21 13:51;Ghost_Knight;Xorg.0.log;https://issues.apache.org/jira/secure/attachment/13019068/Xorg.0.log",,2.0,,,,,,,,,,,,,,,,,,,,2017-01-25 19:24:44.423,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Jan 22 12:55:22 UTC 2021,,,,,,,"0|i39493:",9223372036854775807,,,,,,,,,,,,,,,,,"25/Jan/17 19:24;vnick;I'm not sure if this is related to this issue or not, but alongside this, and one of the reasons that X2Go and NX are nice, is session persistence.  This is currently difficult to do with VNC, as it requires that you have a specific port allocated for each user and that you somehow keep track of that port.  X2Go and NX implement a back-end that keeps track of user sessions and allows disconnecting and reconnecting without losing the state of the session.  This would be *really* nice, in addition to all of the obvious performance benefits...I'm just not sure it is within the scope of the Guacamole project itself, since that is more a function of those specific protocols (RDP, NX, X2Go, etc.).","26/Jan/17 03:40;mjumper;Yep - session management. Thankfully, that should be independent of the development of a Guacamole X.Org driver. I'm not sure it's out of scope for the project itself, but it's definitely out of scope for the initial implementation of the driver.

Once this is out of the way, we should definitely look into what would be necessary to layer reasonable session management on top of things.","08/May/17 05:41;Suncatcher;But would it be implemented within SSH (as X11 forwarding) or as a standalone protocol?","29/Jan/18 19:55;troll;Would it be (at least in principle) possible to translate OpenGL (GLX) to WebGL?","29/Jan/18 20:05;mjumper;{quote}
Would it be (at least in principle) possible to translate OpenGL (GLX) to WebGL?
{quote}

In principle, sure, however:

* For the initial implementation of X.Org support, no. We need to keep scope minimal. It's already a huge change.
* The more low-level each individual forwarded call gets, and the more frequently those calls occur, the less performant Guacamole will be. Passing through OpenGL as part of the protocol stream may not actually be as fast as you might think.
* With the continuing shift toward relying on cloud-based computing resources, offloading the heavy rendering to the client seems a step backwards. It would be nice to continue relying on the server to handle the main load with respect to rendering, such that applications that make heavy use of OpenGL can be usable even on platforms which otherwise could not hope to run such applications.
","30/Jan/18 00:04;troll;{quote}What about implementing a driver for the X.Org X11 server?

The X.Org server provides a driver abstraction layer which exposes access to windows (including their hierarchy) and pixmaps, much in the same way the Guacamole protocol provides nestable layers and buffers. If we were to implement a Guacamole driver for X.Org, we would be able to make much greater use Guacamole protocol features like client-side compositing.
{quote}
Pardon my ignorant question: isn't a X.Org driver an overkill? Won't a compositing WM provide the same features?","30/Jan/18 00:17;mjumper;{quote}
Pardon my ignorant question: isn't a X.Org driver an overkill?
{quote}

It seems a perfect fit, actually. Considering Guacamole as a display mechanism, it makes sense to have a driver for a network display (Guacamole) just as you would have a driver for a hardware display (graphics card).

{quote}
Won't a compositing WM provide the same features?
{quote}

Unless compositing window managers can be nested, no. This would sacrifice the user's ability to use their desktop environment of choice.","30/Jan/18 10:58;troll;{quote}Unless compositing window managers can be nested, no.
{quote}
Well, probably I shouldn't have written ""compositing WM"", but a ""compositor"". Compositors doesn't need to replace running WM.","30/Jan/18 19:33;mjumper;Within X.Org, the only compositors _are_ compositing window managers. If you're referring to Wayland, it's the reverse: window managers are compositors, there is no such thing as a window manager from the perspective of Wayland, and desktop environments typically provide their own compositors.

Writing a similar solution for Wayland, assuming compositors can be nested without losing direct access to the surfaces within the innermost compositor, would not necessarily be a bad idea in itself ... however we have an X.Org driver already written. It doesn't make sense to dump the driver when it's already working as well as it is, even if you think that Wayland might work, too.","30/Jan/18 19:58;troll;{quote}Within X.Org, the only compositors _are_ compositing window managers.{quote}
Ehm... I fell like there is some misunderstanding here. Not sure where exactly.
You wrote
{quote}This would sacrifice the user's ability to use their desktop environment of choice.{quote}
so I understood it as that you're thinking that user will have to replace her favourite DE/WM (i3wm, awesome etc.) by Guacamole compositing WM and she may be unhappy about that. But I'm looking at ArchLinux wiki page about [Xcompmgr|https://wiki.archlinux.org/index.php/Xcompmgr] and [Compton|https://wiki.archlinux.org/index.php/Compton] and if I understood their description correctly, you can run them with any other WM.


Anyway, a driver is indeed looks like a natural solution, so o'k.","30/Jan/18 20:04;mjumper;{quote}
... looking at ArchLinux wiki page about [Xcompmgr|https://wiki.archlinux.org/index.php/Xcompmgr] and [Compton|https://wiki.archlinux.org/index.php/Compton] and if I understood their description correctly, you can run them with any other WM.
{quote}

Interesting. I stand corrected.","31/Jan/18 13:28;troll;{quote}we have an X.Org driver already written{quote}
Feels stupid, but I can't find it. Could you give the link to its sources?","01/Feb/18 02:47;troll;{quote}Won't a compositing WM provide the same features?{quote}
I think I can answer my own question.
The X Composite Extension allows one to redirect window rendering to off-screen storage.
The X DAMAGE Extension allows one to get information about DAMAGEd (by painting) regions.
Compositing managers use either the X Rendering Extension (slow) or OpenGL (fast) to (re)draw the windows, add shadows, add transparency etc.
The off-screen window pixmaps are stored on the server and XRENDER/OpenGL has no problem accessing them. But the compositing manager doesn't have direct access to these pixmaps. -One may think about using MIT-SHM extension, but, if I understand it correctly, a driver has to support this extension and the dummy driver (what else would you use with remote rendering?) doesn't support MIT-SHM.-
MIT-SHM seem to work with dummy driver. However, it is not possible to access off-screen window pixmap. It is possible to create a shared image and copy from off-screen pixmap.
So it should be possible to implement this with compositing manager.
Advantage: probably easier to implement than a driver. No risk to crash X server.
Disadvantages: can't implement RENDER extension to render remotely. ","01/Feb/18 03:26;mjumper;{quote}
Could you give the link to its sources?
{quote}

Your best resource at the moment would be the mailing list thread which discusses testing the driver, the build process, etc.:

https://lists.apache.org/thread.html/5f4a5afa46dfcc974f254cc7bcf962d08e29b7af7459e3030b6f6448@%3Cuser.guacamole.apache.org%3E

The source, not being ready for merge/review yet, is on the ""xf86-video-guac"" branches of my forks on GitHub.","27/Feb/18 14:03;Astle;This is a great idea. I'd love nothing but to get a rid of xRDP to access my systems, it's historically been really unstable and has no 2FA ability or fail2ban. So thank you for your work.

I got this to build but I am definitely missing something.  I'm running a ""headless"" linux (CentOS/RHEL) container and I can't figure out how to start up X with this driver.  How does that happen?  ""init 5"" or whatever its systemd equiv. doesn't work.

I am assuming that needs to be running before you connect to the web gateway.  Am I correct?","13/Mar/18 17:24;rleir;My experience is with NoMachine NX client, connecting to a server across town. Response was snappy! Better than what I have seen of RDP. So I will be happy if we can get NX communications into Guac.

cheers – Rick","29/May/18 17:49;kfiresmith;This is fantastic news.  I would love to set this up on RHEL 7 as a replacement for TigerVNC on RHEL 6.  I'm going to test this as soon as a beta is available.  

My use-case is a large Active Directory environment with client endpoints on Windows, Mac, and Linux, who need to be able to either AD-login or GSSAPI SSO login to RHEL 7 timeshares for a Linux desktop GUI environment.  It sounds like running a Guacamole server directly on the RHEL 7 timeshare VM will provide this. 

 

Thanks so much for this work!","12/Nov/18 14:49;fabio1299;I'm trying to compile Guacamole with the X11 plugin on Ubuntu Server 18.04 LTS.

Whenever I run

    ._/configure --with-xorg-module-dir=/usr/lib/xorg/modules/_

It returns

    checking for XORG... no

In the config.log I find

    Package xorg-server was not found in the pkg-config search path. 
     Perhaps you should add the directory containing `xorg-server.pc' 
     to the PKG_CONFIG_PATH environment variable
     No package 'xorg-server' found

However I don't seem to be able to find the required package in the Ubuntu repositories.

Is there a list of all the dependencies needed to compile guacamole with the X.Org driver on Ubuntu 18.04?

{{Many thanks}}","15/Apr/19 15:29;jkiel;I'd like to give this x.org driver a shot, but I'm thoroughly confused on where to start.  Any up-to-date information on how to build guacamole with support for x.org?","25/Apr/20 05:18;salia;Are there any plans to merge X.org driver into guacd master and provide some basic documentation on how to use it? It would provide the best setup for headless Linux desktops (eg inside a container), currently having to run xrdp or vnc & reencoding to guac protocol is not fast enough for high screen resolutions. noVNC could be an alternative, but clipboard support is better in Guacamole and probably X.org driver would be more performant. ","22/Jul/20 13:13;Ghost_Knight;Are there any plans to continue this work?  I see that RHEL 8 is moving to Wayland as its default display server but XORG will still be available in its packages.","22/Jul/20 13:17;mitchelltech5;I would also like to see this work completed, please let me know if there are any updates to this issue","25/Aug/20 08:03;xuruiqiang;I installed guacamole server and client from these two addresses:
[https://github.com/mike-jumper/incubator-guacamole-server/tree/xf86-video-guac|https://github.com/mike-jumper/incubator-guacamole-server/tree/xf86-video-guac,]
[https://github.com/mike-jumper/incubator-guacamole-client/tree/xf86-video-guac]
Also, I installed mariadb and downloaded guacamole-auth-jdbc-1.0.0.tar.gz from the official website of guacamole.

Everything was executed according to the tutorial on the official website, but when I logged in, an error was reported:
{code:java}
//代码占位符
Aug 24 11:47:40 localhost server: 11:47:40.288 [http-bio-8080-exec-2] DEBUG o.a.g.rest.RESTExceptionMapper - Unexpected error in REST endpoint.
Aug 24 11:47:40 localhost server: java.lang.NoSuchFieldError: EMPTY_SET
Aug 24 11:47:40 localhost server: at org.apache.guacamole.auth.jdbc.sharing.user.SharedUser.getSharingProfilePermissions(SharedUser.java:150) ~[na:na]
Aug 24 11:47:40 localhost server: at org.apache.guacamole.rest.connectiongroup.ConnectionGroupTree.<init>(ConnectionGroupTree.java:361) ~[ConnectionGroupTree.class:na]
Aug 24 11:47:40 localhost server: at org.apache.guacamole.rest.connectiongroup.ConnectionGroupResource.getConnectionGroupTree(ConnectionGroupResource.java:110) ~[ConnectionGroupResource.class:na]
Aug 24 11:47:40 localhost server: at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_262]
Aug 24 11:47:40 localhost server: at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_262]
Aug 24 11:47:40 localhost server: at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_262]
Aug 24 11:47:40 localhost server: at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_262]{code}
Does any one know what went wrong ? thanks very much.","07/Dec/20 10:02;director;hello, I've been waiting for this a lot, any updates on this?","07/Dec/20 10:08;mjumper;Nope, I haven't had time to work on this specific piece of code in quite some time.

There was a recent post to the dev mailing list regarding whether outside contributions would be accepted for the WIP X.Org driver. Perhaps we should note that it's experimental and move forward with review+merge so that community involvement can be unblocked?","07/Dec/20 13:43;vnick;{quote}
There was a recent post to the dev mailing list regarding whether outside contributions would be accepted for the WIP X.Org driver. Perhaps we should note that it's experimental and move forward with review+merge so that community involvement can be unblocked?
{quote}

Yeah, I think this would open it up both to more testing and to potential improvements from the community.

++1","07/Dec/20 17:08;director;[~mjumper] 

Thats a fantastic idea, really really excited for it, you got your first tester, will test it on couple production machines","07/Dec/20 17:10;director;I mean really really excited.","09/Dec/20 23:04;cspeckrun;Hello, I was the one who posted recently on the dev mailing-list about outside contributions. I look forward to being able to submit a change for review and additionally I have some notes regarding how I set things up which might be useful to others who are interested in setting up for development or testing (though my setup might be non-standard).","19/Jan/21 20:13;Ghost_Knight;[~cspeckrun] I would be curious to go over your steps to stand this up.  I am having some difficulties getting the actual runtime pieces to work together.  Do you have a github repo somewhere with your steps?","19/Jan/21 21:51;cspeckrun;[~Ghost_Knight] I don't yet have a public repository with the things I've been experimenting with however I did upload my Dockerfile I use for building the guacamole-server/xf86-video-guac branch on a CentOS 7 container.

[https://github.com/apache/guacamole-server/pull/316#issuecomment-758321806]

Which pieces are you having difficulty with? I have been running an application along with Xorg within a container and so far there are only a few things which I have not gotten working properly:
 # PulseAudio - I think this is due to not having any actual sound device, it causes Xorg to crash. I don't have any interest in audio at the moment so I've simply ensured the library for pulseaudio is not installed so it won't get compiled in as an option.
 # Running Xorg in a container with only guacd driver requires that running the container enables device passthrough, so that the container can access a tty. I have a patch for the guacd driver to address this which I intend to submit once this is upstream.
 # The X server's RENDER extension - I think the xf86-video-guac branch is meant to support this however I was not able to get Java applications to render properly (which by default use xrender). This manifests as an application with mostly gray blocks instead of any UI, and was rather challenging to uncover the issue. In a simple non-Java test I tried running xeyes which by default also uses xrender and it does not appear to work properly, but does when disabling xrender. I think there's a bug related to xrender which likely only occurs when running within a minimally configured container. I haven't had time to dig deeper into this yet but I planned to file an issue with my findings once this lands upstream then continue experimenting/investigating for a fix. For Java applications this can be worked around by passing a specific flag to not use xrender though I think the flag is deprecated/invalid past Java 11. Not using xrender I think results in performance degradation but I don't yet have anything to make valid comparisons against, just my understanding of what xrender is.","20/Jan/21 13:51;Ghost_Knight;[~cspeckrun] 

I have gotten past the build step just fine with all of the Xorg flags showing 'True'

My runtime looks like this:
`/usr/bin/X :0 -novtswitch -sharevts -nolisten tcp +extension MIT-SHM -seat 1`

`guacd -l 5900 -b 0.0.0.0 -L debug -f``

 

And then when I try to connect I see this in the logs:

```

guacd[169]: INFO: Creating new client for protocol ""xorg""
guacd[169]: INFO: Connection ID is ""$5f65747b-c5c7-471e-8fa6-85cb5eb067e3""
guacd[171]: WARNING: Support for protocol ""xorg"" is not installed
guacd[171]: DEBUG: Requesting termination of client...
guacd[171]: DEBUG: Client terminated successfully.
guacd[169]: INFO: Connection ""$5f65747b-c5c7-471e-8fa6-85cb5eb067e3"" removed.

 

```

 

What piece of this puzzle am I missing?  I attached my [^Xorg.0.log] and [^00-guac.conf] just incase I missed something there.","20/Jan/21 14:55;vnick;[~Ghost_Knight]: Can you show what connection parameters you're using? The way the Xorg driver works you should be pointing your guacd connection to the Xorg driver directly, I believe, and not starting guacd on a certain port. My understanding is that the Xorg driver effectively replaces guacd completely when making connections. So, based on the configuration you provided you should point either your guacamole.properties file, or the connection-specific guacd settings to localhost port 4823.","20/Jan/21 15:11;Ghost_Knight;[~vnick]  HA! That did it.  Thank you!  I made the 00-guac.conf point to the port I wanted and its showing my stuff now :)

Thank you!","22/Jan/21 12:55;Ghost_Knight;So I have this working, but in my GPU accelerated container the guac driver replaces the nvidia driver for the primary X server. Do I need to run a secondary X server and use VirtualGL to achieve acceleration now?"
Globally Prevent AutoRefresh Cascade on Feature Install,KARAF-6953,13345174,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,kbrooks,kbrooks,10/Dec/20 01:35,10/Jan/21 03:51,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"In a production environment, accidentally refreshing an existing feature or bundle could be problematic.
As an existing example, the activemq-client feature depends on the activemq-osgi bundle. The activemq-osgi bundle has many optional, wildcard imports. See here: https://github.com/apache/activemq/blob/master/activemq-osgi/pom.xml I believe that this may have been the underlying cause of http://mail-archives.apache.org/mod_mbox/karaf-user/201710.mbox/%3C0a12ea34-9b9e-5a18-a711-e66625240dcf@nanthrax.net%3E

In this example, if a new feature is installed which updates an existing com.fasterxml.jackson service or includes a new com.fasterxml.jackson service, activemq is refreshed, causing quite a bit of fall out. Existing brokers are destroyed, transitive dependencies are refreshed, including web/jetty.
The interruption in service and potential for data loss is bad, but this could get even worse if the refresh causes downstream runtime errors, of which, may not be realized immediately.

I acknowledge that there is a command line option to prevent this behavior, however, it requires the command line and it relies on human input.

I'd like to prevent users from shooting themselves in the foot...

The kar installation service has configuration exposed that could work in this scenario (noAutoRefreshBundles), but would need to be transplanted into the features installation service.
Alternatively, we could abstract one level and introduce the notion of default or mandatory option values. This approach would be fairly flexible, would be easier to fit into the featuresBoot process, and could solve other yet-to-be-seen use cases.",,githubbot,jbonofre,kbrooks,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-11 13:10:58.913,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Jan 10 03:51:38 UTC 2021,,,,,,,"0|z0lda8:",9223372036854775807,,,,,,,,,,,,,,,,,"10/Dec/20 01:51;kbrooks;Yet another alternative is to permit feature definitions to dictate installation options, like noAutoRefreshBundles.","11/Dec/20 13:10;jbonofre;First, I'm fully agree with you and I'm working on improving this area.

That's three options here:
 # short term: we can disable auto refresh by configuration, but I prefer point 3 (see later)
 # short term: instead of using features service, we can use static distribution
 # mid term: I've created a new ""simple"" features service, without the resolver. It's simpler than the current one, more predictable and deterministic and actually faster.
 # mid term: I'm working on Karaf 5 PoC where I remove the notion of features (replaced by extension).","08/Jan/21 06:18;githubbot;jbonofre opened a new pull request #1287:
URL: https://github.com/apache/karaf/pull/1287


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","08/Jan/21 07:07;githubbot;daniellas commented on a change in pull request #1287:
URL: https://github.com/apache/karaf/pull/1287#discussion_r553776168



##########
File path: features/core/src/main/java/org/apache/karaf/features/FeaturesService.java
##########
@@ -42,6 +42,7 @@
     long DEFAULT_SCHEDULE_DELAY = 250;
     int DEFAULT_SCHEDULE_MAX_RUN = 9;
     long DEFAULT_REPOSITORY_EXPIRATION = 60000; // 1 minute
+    boolean DEFAULT_AUTO_REFRESH = false;

Review comment:
       Does it change current default setting?




----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","08/Jan/21 07:13;githubbot;daniellas commented on a change in pull request #1287:
URL: https://github.com/apache/karaf/pull/1287#discussion_r553776168



##########
File path: features/core/src/main/java/org/apache/karaf/features/FeaturesService.java
##########
@@ -42,6 +42,7 @@
     long DEFAULT_SCHEDULE_DELAY = 250;
     int DEFAULT_SCHEDULE_MAX_RUN = 9;
     long DEFAULT_REPOSITORY_EXPIRATION = 60000; // 1 minute
+    boolean DEFAULT_AUTO_REFRESH = false;

Review comment:
       Does it change current default setting?




----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","08/Jan/21 14:48;githubbot;k-brooks commented on pull request #1287:
URL: https://github.com/apache/karaf/pull/1287#issuecomment-756793487


   Thanks!


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","10/Jan/21 03:51;githubbot;k-brooks commented on pull request #1287:
URL: https://github.com/apache/karaf/pull/1287#issuecomment-756793487


   Thanks!


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support OSGi R7 JSON configuration format,KARAF-6680,13298727,New Feature,Reopened,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,olli,olli,16/Apr/20 07:14,05/Jan/21 15:37,17/Feb/21 11:13,,,,4.3.0,karaf,,,,,,,,,0,,,,,"The new [Configurator Specification|https://osgi.org/specification/osgi.cmpn/7.0.0/service.configurator.html] introduced a JSON format for configurations which should be supported.",,cjonas,githubbot,jbonofre,jira-bot,olli,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SLING-8888,SLING-8990,,,,,,KARAF-6676,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-16 07:38:33.028,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Jan 05 15:37:47 UTC 2021,,,,,,,"0|z0doyg:",9223372036854775807,,,,,,,,,,,,,,,,,"16/Apr/20 07:38;jbonofre;There's already a Jira about that.","16/Apr/20 07:44;githubbot;oliverlietz commented on pull request #1098: KARAF-6680 Support OSGi R7 JSON configuration format
URL: https://github.com/apache/karaf/pull/1098
 
 
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","16/Apr/20 07:56;olli;[~jbonofre], Do you mean KARAF-6378?","16/Apr/20 08:10;olli;Initial support added for features in [PR 1098|https://github.com/apache/karaf/pull/1098]. The {{FeatureConfigInstaller}} should be refactored. There should be a util/service for reading/writing configurations.","25/Apr/20 05:51;githubbot;jbonofre commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-619326638


   @oliverlietz can you update to released version of Felix CM JSon or do you want me to do it ? Thanks !


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","25/Apr/20 13:55;githubbot;oliverlietz commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-619383278


   @jbonofre, Felix CM JSON updated to 1.0.2


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","26/Apr/20 05:24;githubbot;jbonofre commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-619484517


   Thanks. Unfortunately, the feature verify fails (the framework feature can't be resolved). Let me take a look.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","26/Apr/20 09:33;githubbot;oliverlietz commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-619517894


   @jbonofre See [SLING-9218](https://issues.apache.org/jira/browse/SLING-9218), framework feature resolved after upgrading Sling Commons Johnzon to 1.2.2 which is still under vote. My full Karaf build is still running executing integration tests right now.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","26/Apr/20 11:24;githubbot;oliverlietz commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-619533208


   @jbonofre [Sling Commons Johnzon 1.2.2](https://search.maven.org/artifact/org.apache.sling/org.apache.sling.commons.johnzon/1.2.2/jar) is now on Central.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","26/Apr/20 11:26;githubbot;oliverlietz edited a comment on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-619533208


   @jbonofre [Sling Commons Johnzon 1.2.2](https://repo1.maven.org/maven2/org/apache/sling/org.apache.sling.commons.johnzon/1.2.2/) is now on Central.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","03/May/20 04:59;githubbot;jbonofre commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-623054270


   retest this please


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","06/Sep/20 05:50;jbonofre;I'm resuming the work on this one, sorry for the delay.","07/Oct/20 15:46;githubbot;jbonofre commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-705025048


   I don't think it's a good idea to add this directly in the `framework` feature, it should be optional as some users don't care about json support. I would rather create a separate feature in standard and create a service in config.
   I actually have a big refactoring on the features coming, including this kind of change.


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","08/Oct/20 10:02;jbonofre;There are two things here:
 * support of Configurator internally to bundle (OSGI-INF/configurator)
 * support of json format in config located in etc folder and provisioning via features

I will create two PRs about that.","13/Oct/20 08:10;githubbot;jbonofre opened a new pull request #1222:
URL: https://github.com/apache/karaf/pull/1222


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","16/Oct/20 11:47;githubbot;jbonofre closed pull request #1098:
URL: https://github.com/apache/karaf/pull/1098


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","16/Oct/20 11:47;githubbot;jbonofre commented on pull request #1098:
URL: https://github.com/apache/karaf/pull/1098#issuecomment-709997339


   Superseeded by #1222 


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","18/Oct/20 08:06;olli;[~jbonofre], I had a quick look into the current snapshot. Looks like {{~}} and {{.cfg.json}} as described in [Configurations|https://sling.apache.org/documentation/bundles/configuration-installer-factory.html#configurations-1] are not (yet) supported, right?","18/Oct/20 11:03;jbonofre;PR is not yet merged so snapshot doesn’t include it yet. It should work out of the box and the suffix is directly json (not cfg.json). ","18/Oct/20 15:36;jira-bot;Commit efd74460c5ea8f2c9fe7e3562e62714c0616a3c8 in karaf's branch refs/heads/master from jbonofre
[ https://gitbox.apache.org/repos/asf?p=karaf.git;h=efd7446 ]

[KARAF-6680] Add json support in etc configuration
","18/Oct/20 15:36;githubbot;jbonofre merged pull request #1222:
URL: https://github.com/apache/karaf/pull/1222


   


----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.

For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","18/Oct/20 15:36;jira-bot;Commit fe3460551a2793706b40e2bbefb6afc824bc8634 in karaf's branch refs/heads/master from Jean-Baptiste Onofré
[ https://gitbox.apache.org/repos/asf?p=karaf.git;h=fe34605 ]

Merge pull request #1222 from jbonofre/JSON_CFG

[KARAF-6680] Add json support in etc configuration","30/Oct/20 23:29;olli;[~jbonofre], The code does not handle factory configurations with {{~}} properly. I see e.g. repeating {{org.apache.karaf.config.core - 4.3.0 | Updating configuration from org.apache.sling.jcr.repoinit.RepositoryInitializer~sling_readall.json}}.","13/Nov/20 16:56;jbonofre;[~olli] let me try with a factory (AFAIR I tested it).","05/Jan/21 15:37;olli;[~jbonofre], Should I look into it and come up with a PR? AFAIR my original PR took care of both {{~}} and {{-}}.",,,,,,,,,,
Provide asm and spifly features,KARAF-6905,13339395,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,olli,olli,08/Nov/20 19:00,24/Dec/20 06:16,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"_asm_ and _spifly_ are common features used by e.g. Jetty and Groovy.

{noformat}
  <!-- asm -->
  <feature name=""asm"" version=""${project.version}"">
    <bundle>mvn:org.ow2.asm/asm/9.0</bundle>
    <bundle>mvn:org.ow2.asm/asm-analysis/9.0</bundle>
    <bundle>mvn:org.ow2.asm/asm-commons/9.0</bundle>
    <bundle>mvn:org.ow2.asm/asm-util/9.0</bundle>
    <bundle>mvn:org.ow2.asm/asm-tree/9.0</bundle>
  </feature>
  <!-- spifly -->
  <feature name=""spifly"" version=""${project.version}"">
    <bundle>mvn:org.apache.aries.spifly/org.apache.aries.spifly.dynamic.bundle/1.3.2</bundle>
    <!-- dependencies -->
    <bundle dependency=""true"">mvn:org.apache.aries/org.apache.aries.util/1.1.3</bundle>
    <feature version=""${project.version}"">asm</feature>
  </feature>
{noformat}",,jbonofre,olli,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SLING-9893,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-11-09 05:09:07.781,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Nov 09 05:09:07 UTC 2020,,,,,,,"0|z0kdog:",9223372036854775807,,,,,,,,,,,4.3.1,,,,,,"09/Nov/20 05:09;jbonofre;+1, that's part of {{specs}} features repo (already planned).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add encryption example,KARAF-6969,13346887,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,19/Dec/20 04:05,19/Dec/20 04:05,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-12-19 04:05:22.0,,,,,,,"0|z0lnuo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add encrypt/decrypt configadmin plugin,KARAF-6968,13346886,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,19/Dec/20 04:00,19/Dec/20 04:00,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Similar to the configadmin plugin we have for sys properties and env variables, I will add a plugin dealing with encryption.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-12-19 04:00:20.0,,,,,,,"0|z0lnug:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add client-side clipboard support for images,GUACAMOLE-55,12982550,New Feature,Reopened,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,mjumper,mjumper,24/Jun/16 02:42,18/Dec/20 20:20,17/Feb/21 11:13,,,,,guacamole,,,,,,,,,0,,,,,"The Guacamole clipboard currently only supports text, even though the protocol has been written to support arbitrary data. The Guacamole interface should be modified such that users can copy/paste image data, which will be received by the backend (and handled when supported).",,anegrea,githubbot,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-05-04 22:09:30.917,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-1547,,,,,,,,,,9223372036854775807,,,Fri May 04 22:36:31 UTC 2018,,,,,,,"0|i300e7:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Jul/16 23:22;mjumper;For the sake of scope, I've removed the server-side portion of this task. Best that this not block things, and that effort be focused purely on stabilizing what we have.","21/Aug/16 04:10;mjumper;Partially reverted by GUACAMOLE-82. We need to revisit this post-release.","04/May/18 22:09;vnick;I saw something related to this in the recent changes in GUACAMOLE-569, I believe.  Should this be completely fixed, or is there still work that needs to be done to get images working?","04/May/18 22:15;mjumper;GUACAMOLE-559? There is still work to be done. The changes for GUACAMOLE-559 only explicitly use the text portion of the API, as that's the only part of the API currently implemented by Chrome, and we should still add support for images / rich text to the clipboard interface in the menu.","04/May/18 22:36;vnick;Yeah, 559 was it.  Okay, just wanted to make sure.  I got a prompt the last time I opened Chrome to ask if I wanted to allow images to be copied to the clipboard.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add bundle verify goal,KARAF-6962,13345868,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,14/Dec/20 14:06,14/Dec/20 14:06,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"When creating a bundle, most of the time, we can see some ""bad"" headers (in the MANIFEST) only when we actually deploy the bundle in Karaf.

The karaf-maven-plugin provides the verify on a feature to validate a feature.

We could provide a similar goal but for bundle this time, reporting the required import and verifying this import in regards of a descriptor file (listing the expected imports).",,jbonofre,serge712,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-12-14 14:06:49.0,,,,,,,"0|z0lhk8:",9223372036854775807,,,,,,,,,,,4.2.11,4.3.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add flat feature service,KARAF-6820,13323506,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,19/Aug/20 07:46,14/Dec/20 07:06,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"I'm experimenting an alternate feature resolver using a ""flat"" resolution, ""just"" executing what's define in the features description.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-6425,,KARAF-6953,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-08-19 07:46:43.0,,,,,,,"0|z0hwp4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add hazelcast related shell commands/MBeans,KARAF-1356,12550640,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,12/Apr/12 08:32,09/Oct/20 04:11,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"As we plan to remove the org.apache.karaf.cellar.instance.cfg file (to only use hazelcast.xml), it makes sense to provide shell commands/MBeans to directly get information about the local running Hazelcast instance.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,235504,,,2012-04-12 08:32:57.0,,,,,,,"0|i0loz3:",124696,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide exit alias and improve shell:logout command,KARAF-1379,12551604,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,19/Apr/12 11:15,09/Oct/20 04:11,17/Feb/21 11:13,,2.2.6,,,karaf,,,,,,,,,0,,,,,"Currently, the shell:logout command allow to exit from Karaf shell.

The problem is that it kills the Karaf process (shell:logout is called with CRTL-D).

shell:logout should not kill the main Karaf process (the shutdown command is dedicated for that) and an exit alias to shell:logout could be interesting.",,barthel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,236412,,,2012-04-19 11:15:13.0,,,,,,,"0|i1cj67:",281237,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add more Cellar webconsole plugins,KARAF-2282,12643823,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,21/Apr/13 16:03,09/Oct/20 04:08,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"Currently, the Cellar WebConsole plugin only provides a cluster groups view.

It makes sense to provide more views like nodes, cluster features, etc.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,324190,,,2013-04-21 16:03:14.0,,,,,,,"0|i1jxkn:",324535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add P2 repositories support,KARAF-2284,12643827,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,21/Apr/13 16:40,09/Oct/20 04:08,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"Eclipse P2 repositories and Karaf features are ""close"" in terms of concepts and provisioning.
In order to improve the Karaf adoption for Eclipse users, we should provide Eclipse P2 repositories support (and for instance a MOJO goal to convert P2 to Features, etc).",,bschuhmann,jbonofre,lichtin,setya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,324194,,,2013-04-21 16:40:33.0,,,,,,,"0|i1jxlj:",324539,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configuration Handling of deployed artifacts,KARAF-2441,12663171,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,death-knight,death-knight,12/Aug/13 08:55,09/Oct/20 04:07,17/Feb/21 11:13,,3.0.0,,,karaf,,,,,,,,,0,,,,,"Bundling an application as a _.kar_ artifact containing the application-specific configuration yields the following problem if deploying it at the customer site:
* deploying a _.kar_ will install all contained features including the configuration - this is not an ""install"" this will install + start all bundles part of the features

Due to that the application will run with possibly wrong configuration if started for the first time - well one could of course create/deploy all configuration by hand (seems tedious though and IMHO goes against the concept of having a single artifact containing everything neccessary to run the application).

The other problem is configuration management when updating the application - currently one can only replace configuration if defining a _configFile_ node in the _features.xml_ (it is not possible to add(/remove) single entries). Working with a _config_ node gives more control, however the configuration is not backed by a file thus not a usable approach to manage configuration for a customer running the OSGI application.

...in essence I was wondering about the intended configration management for real world applications. IMHO it should be possible to configure a .kar bundled OSGI application prior to launching it.",-,death-knight,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,343172,,,2013-08-12 08:55:57.0,,,,,,,"0|i1n6k7:",343476,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cellar cluster centralized MBeans,KARAF-2544,12677402,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,04/Nov/13 16:47,09/Oct/20 04:07,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"When we use Cellar with other projects (especially Camel, CXF, ActiveMQ, etc), it would be great that Cellar would be able to get metrics for these projects.

We can have two kinds of metrics:
- access to the metrics from one node (using cluster:metrics node objectname for instance)
- access to a cluster value (for instance average for long/int/float/double, string values, etc), using cluster:metrics objectname",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,356777,,,2013-11-04 16:47:35.0,,,,,,,"0|i1pi7z:",357067,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add new operations in the SecurityMBean,KARAF-2614,12683272,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,07/Dec/13 10:35,09/Oct/20 04:06,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"With the new RBAC and groups features that we added, we also added a MBean where we find the canInvoke() operation to know if an user/role can perform an operation.

This MBean object name is org.apache.karaf:type=security,area=jmx.

It would make sense to provide another area where we can administrate the realms, users, groups, roles, as we can do with the {{jaas:*}} commands.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,362524,,,2013-12-07 10:35:58.0,,,,,,,"0|i1qhnj:",362818,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GenerateDescriptorMojo does not resolve conflicts,KARAF-2630,12685144,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,mwinkels,mwinkels,17/Dec/13 10:32,09/Oct/20 04:06,17/Feb/21 11:13,,3.0.0.RC1,,,karaf,,,,,,,,,0,,,,,"When a feature project has two different versions of a dependency in its graph, both versions are included in the generated feature.xml

e.g.:

DependencyTree:
{code}...
 |     +- org.activiti:activiti-engine:jar:5.15-SNAPSHOT:compile
 |     |  +- org.activiti:activiti-bpmn-converter:jar:5.15-SNAPSHOT:compile
 |     |  |  +- org.activiti:activiti-bpmn-model:jar:5.15-SNAPSHOT:compile
 |     |  |  |  +- (org.apache.commons:commons-lang3:jar:3.1:compile - omitted for duplicate)
 |     |  |  |  \- (org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile - version managed from 1.9.9; omitted for duplicate)
 |     |  |  +- (org.slf4j:slf4j-api:jar:1.7.5:provided - version managed from 1.7.2; scope managed from compile; omitted for duplicate)
 |     |  |  +- (org.slf4j:jcl-over-slf4j:jar:1.7.2:compile - omitted for duplicate)
 |     |  |  \- (org.apache.commons:commons-lang3:jar:3.1:compile - omitted for duplicate)
 |     |  +- org.apache.commons:commons-email:jar:1.2:compile
 |     |  |  +- javax.mail:mail:jar:1.4.1:provided (scope managed from compile)
 |     |  |  |  \- (javax.activation:activation:jar:1.1.1:provided - version managed from 1.1; scope managed from compile; omitted for duplicate)
 |     |  |  \- javax.activation:activation:jar:1.1.1:provided
 |     |  +- org.apache.commons:commons-lang3:jar:3.1:compile
 |     |  +- org.mybatis:mybatis:jar:3.2.2:compile
 |     |  +- (org.springframework:spring-beans:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |     |  +- joda-time:joda-time:jar:2.1:compile
 |     |  +- org.slf4j:slf4j-api:jar:1.7.5:provided
 |     |  \- org.slf4j:jcl-over-slf4j:jar:1.7.2:compile
 |     |     \- (org.slf4j:slf4j-api:jar:1.7.5:provided - version managed from 1.7.2; scope managed from compile; omitted for duplicate)
 |     \- org.activiti:activiti-spring:jar:5.14:compile
 |        +- (org.activiti:activiti-engine:jar:5.14:compile - omitted for conflict with 5.15-SNAPSHOT)
 |        +- (org.springframework:spring-context:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |        +- (org.springframework:spring-jdbc:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |        +- (org.springframework:spring-tx:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |        +- (org.apache.commons:commons-lang3:jar:3.1:compile - omitted for duplicate)
 |        +- org.springframework:spring-orm:jar:3.2.4.RELEASE:provided (version managed from 3.1.2.RELEASE; scope managed from compile)
 |        |  +- (aopalliance:aopalliance:jar:1.0:provided - scope managed from compile; omitted for duplicate)
 |        |  +- (org.springframework:spring-beans:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |        |  +- (org.springframework:spring-core:jar:3.2.4.RELEASE:provided - version managed from 3.0.7.RELEASE; scope managed from compile; omitted for duplicate)
 |        |  +- (org.springframework:spring-jdbc:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |        |  \- (org.springframework:spring-tx:jar:3.2.4.RELEASE:provided - version managed from 3.1.2.RELEASE; scope managed from compile; omitted for duplicate)
 |        +- commons-dbcp:commons-dbcp:jar:1.4:compile
 |        |  \- commons-pool:commons-pool:jar:1.5.4:compile
 |        +- (org.slf4j:slf4j-api:jar:1.7.5:provided - version managed from 1.7.2; scope managed from compile; omitted for duplicate)
 |        \- (org.slf4j:jcl-over-slf4j:jar:1.7.2:compile - omitted for duplicate)
...{code}

generated feature.xml:
{code}...
        <bundle>mvn:org.activiti/activiti-engine/5.15-SNAPSHOT</bundle>
        <bundle>mvn:org.activiti/activiti-bpmn-converter/5.15-SNAPSHOT</bundle>
        <bundle>mvn:org.activiti/activiti-bpmn-model/5.15-SNAPSHOT</bundle>
        <bundle>mvn:org.apache.commons/commons-lang3/3.1</bundle>
        <bundle>mvn:org.codehaus.jackson/jackson-core-asl/1.9.13</bundle>
        <bundle>mvn:org.slf4j/slf4j-api/1.7.5</bundle>
        <bundle>mvn:org.slf4j/jcl-over-slf4j/1.7.2</bundle>
        <bundle>mvn:org.apache.commons/commons-email/1.2</bundle>
        <bundle>wrap:mvn:javax.mail/mail/1.4.1</bundle>
        <bundle>wrap:mvn:javax.activation/activation/1.1.1</bundle>
        <bundle>mvn:org.mybatis/mybatis/3.2.2</bundle>
        <bundle>wrap:mvn:org.springframework/spring-beans/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:org.springframework/spring-core/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:commons-logging/commons-logging/1.1.1</bundle>
        <bundle>mvn:joda-time/joda-time/2.1</bundle>
        <bundle>mvn:org.activiti/activiti-spring/5.14</bundle>
        <bundle>mvn:org.activiti/activiti-engine/5.14</bundle>
        <bundle>mvn:org.activiti/activiti-bpmn-converter/5.14</bundle>
        <bundle>mvn:org.activiti/activiti-bpmn-model/5.14</bundle>
        <bundle>wrap:mvn:org.springframework/spring-context/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:org.springframework/spring-aop/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:aopalliance/aopalliance/1.0</bundle>
        <bundle>wrap:mvn:org.springframework/spring-expression/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:org.springframework/spring-jdbc/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:org.springframework/spring-tx/3.2.4.RELEASE</bundle>
        <bundle>wrap:mvn:org.springframework/spring-orm/3.2.4.RELEASE</bundle>
        <bundle>mvn:commons-dbcp/commons-dbcp/1.4</bundle>
        <bundle>mvn:commons-pool/commons-pool/1.5.4</bundle>
...{code}
so org.activiti/activiti-engine appears twice in feature.xml, once for 5.15-SNAPSHOT and once for 5.14.",,mwinkels,panneerpst,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Dec/13 10:36;mwinkels;karaf-2630.patch;https://issues.apache.org/jira/secure/attachment/12619077/karaf-2630.patch",,,1.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,364221,,,Wed Dec 18 12:08:22 UTC 2013,,,,,,,"0|i1qs33:",364521,,,,,,,,,,,,,,,,,"17/Dec/13 10:36;mwinkels;This patch uses the standard NearestVersionConflictResolver to do conflict resolution.","18/Dec/13 12:08;mwinkels;Maybe this is a feature and not a bug ;-).
I understand that you want to be able to load to versions of the same jar in a deployment. Wouldn't it however be strange to have two versions in the same feature?
Anyway, for a maven user it is kind of strange not to resolve conflicts the way maven does.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a CXF Service Registry to list all endpoints/operations available on a cluster,KARAF-3004,12716819,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,27/May/14 14:37,09/Oct/20 04:02,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"When using Cellar, it would be great to be able to ""list"" all CXF services (SOAP/REST) in addition of the HTTP servlets (we have another Jira about that).

The purpose would be to propose a global view about all the CXF resources available on the different nodes of the cluster.

It would be great to also provide some kind of support of WS-Discovery and provide a way for the clients to request the ""cluster"" (any node).

Related to that, it would be great to extend the WebConsole with a plugin for that, etc.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,395027,,,2014-05-27 14:37:07.0,,,,,,,"0|i1w0in:",395162,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a Camel Service/Endpoint Registry in the cluster,KARAF-3005,12716821,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,27/May/14 14:47,09/Oct/20 04:02,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"When deploying Camel routes in a Cellar cluster, it would be great to be able to list all routes running in the cluster (on all nodes), and list the different endpoint used.

It would be great to directly leverage the camel-hazelcast component not in an explicit way but in an implicit way by defining some ""points"" where we can go to another point in the cluster (on another route), for instance using an Camel Cellar interceptor.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,395029,,,2014-05-27 14:47:14.0,,,,,,,"0|i1w0j3:",395164,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a command (and MBean) to check the status of a node resource compare with the cluster,KARAF-4194,12921889,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,15/Dec/15 07:44,09/Oct/20 03:49,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"Even if we have cluster:sync command, it would be nice to have a command to check if the resource is up to date on the node with the cluster.",,jbonofre,shyrkov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Jan 13 12:41:09 UTC 2017,,,,,,,"0|i2pw9j:",9223372036854775807,,,,,,,,,,,,,,,,,"13/Jan/17 12:41;jbonofre;Related to that, it would be great to have a status/progress bar when installing a resource on the cluster.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a callback on resources installation to know if the installation succeeded on a node,KARAF-4195,12921898,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,15/Dec/15 08:37,09/Oct/20 03:49,17/Feb/21 11:13,,,,,cellar,,,,,,,,,1,,,,,"Right now, Cellar uses ""fire and forgot"" pattern when installing a resource on the cluster. It would be great to have kind of callbacks to know if the installation of a resource.",,jbonofre,shyrkov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Jul 10 19:33:44 UTC 2016,,,,,,,"0|i2pwbj:",9223372036854775807,,,,,,,,,,,,,,,,,"10/Jul/16 19:33;jbonofre;Generally speaking, an alternative would be to use a {{Command}} instead of a generic {{Event}}. I gonna experiment a bit.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add feature:tree command,KARAF-4224,12922844,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,17/Dec/15 20:30,09/Oct/20 03:48,17/Feb/21 11:13,,,,,karaf,,,,,,,,,2,,,,,"As we have bundle:tree, it would be helpful to provide feature:tree to display the complete features relationship.",,jbonofre,maggu2810,matteor,mitaes,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-12-17 20:30:35.0,,,,,,,"0|i2q25j:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generic discovery service,KARAF-4245,12924953,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,lb,lb,30/Dec/15 21:19,09/Oct/20 03:48,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"I'm wondering if it would make sense to extend current discovery service to make it more generic and shareable among other services that need discovery capabilities. 

This may be achieved by adding some filtering capability to discoverMembers i.e. 

Collection<DiscoveredMember> discoverMembers(String domain)

How domain is used is implementation dependant (labels for kubernetes, path for etcd, etc). Domain used by karaf clustering may be then defined in hazelcast's service configuration file or wherever it make sense.

It would also be useful to have additional info about the discovery services like all the kubernetes label or any additional attribute associated with the discovered service.
",,lb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-12-30 21:19:46.0,,,,,,,"0|i2qf2v:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Decanter agent to send collected data to Decanter REST API,KARAF-4265,12929484,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,12/Jan/16 12:59,09/Oct/20 03:47,17/Feb/21 11:13,,,,,decanter,,,,,,,,,0,,,,,"As explained in KARAF-4221, Decanter will provide a REST API Collector, allowing to receive collected data (JSON), send to the dispatcher/appenders.

In order to use Decanter ""outside of OSGi"", it makes sense to provide an agent able to run in any Java middleware (and why not other agents to different middlewares/technologies) and send data to the Decanter REST API collector.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Aug 01 15:09:33 UTC 2016,,,,,,,"0|i2r6mn:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Aug/16 15:09;jbonofre;We have different alternatives now to create ""out of the box"" Decanter agent: socket or REST.

The purpose is to simply provide the agent that could be installed like:

{code}
-javaagent:<agent_directory_full_path>/decanter-javaagent.jar
{code}

and will automatically start a JMX and log collectors for instance, with a socket or REST appender.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add eventadmin event when a MBean operation is performed,KARAF-4435,12952802,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,23/Mar/16 12:46,09/Oct/20 03:46,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"When an user performs a shell command, an eventadmin event is generated. For instance, the log:log FOO command results the following event:

{code}
event.topics:org/apache/karaf/shell/console/EXECUTING
subject:Subject:
        Principal: UserPrincipal[karaf]
        Principal: RolePrincipal[viewer]
        Principal: GroupPrincipal[admingroup]
        Principal: RolePrincipal[manager]
        Principal: RolePrincipal[admin]
        Principal: RolePrincipal[systembundles]
command:log:log FOO
timestamp:1458736883278
{code}

Thanks to that we can audit the actions performed by an user.

It would be great to provide similar behaviors for the MBean operations, in order to audit actions performed via the JMX layer.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-03-23 12:46:01.0,,,,,,,"0|i2v373:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Apache Ignite support,KARAF-4793,13013765,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,20/Oct/16 06:38,09/Oct/20 03:45,17/Feb/21 11:13,,,,,cellar,,,,,,,,,2,,,,,"As an alternative to Hazelcast, Cellar could support Apache Ignite.",,fpapon,jbonofre,pklinef,steve.lombardi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-07-17 23:08:31.768,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jul 17 23:08:31 UTC 2017,,,,,,,"0|i354wf:",9223372036854775807,,,,,,,,,,,,,,,,,"17/Jul/17 23:08;steve.lombardi;[~jbonofre] Has this been started? Would you like any help? ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add feature:tree command/MBean (like bundle:tree-show),KARAF-5408,13107181,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,05/Oct/17 09:34,09/Oct/20 03:27,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,,,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-10-05 09:34:08.0,,,,,,,"0|i3kwon:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a Cellar system agent able to download/bootstrap/control Karaf/JVM,KARAF-5393,13105333,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,27/Sep/17 08:20,08/Oct/20 14:35,17/Feb/21 11:13,,,,,cellar,,,,,,,,,1,,,,,,,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-09-27 08:20:59.0,,,,,,,"0|i3kldj:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend Karaf scheduler in cluster mode,KARAF-5483,13118478,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,15/Nov/17 09:06,08/Oct/20 14:34,17/Feb/21 11:13,,,,,cellar,karaf,,,,,,,,1,,,,,"Karaf provides a convenient scheduler service. This scheduler is ""mono"" instance. It would be great to extend this with Cellar to have a scheduler sync on the cluster (as we have in Quartz scheduler with a shared database for instance).",,ancoron,fpapon,jbonofre,tomq42,tonit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-07-03 09:25:18.577,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Nov 07 07:40:27 UTC 2018,,,,,,,"0|i3mssn:",9223372036854775807,,,,,,,,,,,,,,,,,"03/Jul/18 09:25;tonit;What is the intended solution to this? I learned that since Karaf 4.1.5 we have KARAF-5558 (Quartz configuration now possible externally).

Now, since karaf scheduler excludes certain packages used by quartz ""org.quartz.impl.jdbcjobstore.JobStoreTX"", such as [https://github.com/apache/karaf/blob/karaf-4.1.5/scheduler/pom.xml#L67] this will not be supported (intentionally?).

Thats why i came here. What is the best (most practical?) way to approach this ticket? 

1. At first glance, Karaf Cellar might want to provide its own ""JobStore"" so that you don't need to rely on the JDBC solution.

2. The other question is why we don't ""fix"" karaf scheduler imports (optionals) to make JobStoreTx work. (not sure if it is good anyway).

WDYT?

 ","13/Jul/18 11:41;tonit;Hey [~jbonofre] just a quick ""wave hands"". Any opinion on this?","30/Sep/18 07:15;jbonofre;Hi Toni. Sorry for my late answer on this  one. I did the change on the Karaf Scheduler especially to be able to use Cellar  as a distributed JobStore (via a  Hazelcast distributed map).","12/Oct/18 12:23;tomq42;[~jbonofre] Out of interest, where might I find this? I've been looking through cellar and can't find any obvious references in the code or commit log. If I understand this right, you've put something in that somehow enables a quartz JobStore that uses Hazelcast?","07/Nov/18 07:40;ancoron;You mean something like this?
* https://github.com/FlavioF/quartz-scheduler-hazelcast-jobstore

\\
There also was a proposal for Hazelcast a few years ago:
* https://hazelcast.atlassian.net/wiki/spaces/COM/pages/33915267/HEP+5+-+Quartz+JobStore+Integration
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Cellar update alerter,KARAF-5499,13120196,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,22/Nov/17 10:54,08/Oct/20 14:34,17/Feb/21 11:13,,,,,decanter,,,,,,,,,1,,,,,"In order to dynamically scale a Cellar cluster,  it would be great to have an alerter interacting with Cellar (to create new instance for instance).",,fpapon,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-11-22 10:54:33.0,,,,,,,"0|i3n3d3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Apache Skywalking integration,KARAF-6008,13197590,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,10/Nov/18 16:55,08/Oct/20 14:22,17/Feb/21 11:13,,,,,decanter,karaf,,,,,,,,0,,,,,,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-11-10 16:55:33.0,,,,,,,"0|s00ctc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide cache service,KARAF-6017,13200035,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,22/Nov/18 10:30,08/Oct/20 14:22,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"Similar to the scheduler feature we have in Karaf (façading quartz), we could provide a cache service (façading ehcache).",,jbonofre,keal_,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-11-22 10:30:48.0,,,,,,,"0|s00rrs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Be able to have a failover mechanism for bundle/config/feature deployment in Cellar,KARAF-6122,13212533,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,29/Jan/19 12:52,08/Oct/20 14:20,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"The idea is to target the deployment on a cluster, but be able to deploy only on one node. If the node fails, the deployment should be enabled on another node.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-01-29 12:52:53.0,,,,,,,"0|yi0fnc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add cluster camel actions in Cellar,KARAF-6126,13212845,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,30/Jan/19 15:46,08/Oct/20 14:20,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,"As we have the {{cluster:http-list}} command for servlets, it would be helpful to have  ""optionally"" Camel context and routes ""tooling"" on the cluster.
The purpose is to be able to list the routes from the different Cellar nodes (with their location) and be able to ""control"" the routes (start/stop/...).",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-01-30 15:46:16.0,,,,,,,"0|yi0hko:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add export/import feature of cluster status,KARAF-6145,13214633,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,08/Feb/19 14:26,08/Oct/20 14:20,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,Add a feature to dump (as a json for instance) the cellar status. This json can be upload to rebuild the cluster.,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-02-08 14:26:19.0,,,,,,,"0|yi0sko:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve shell reflection capabilities,KARAF-5757,13159966,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,17/May/18 08:50,08/Oct/20 14:14,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"Writing karaf scripts can be very tedious when dealing with reflection and classes.
 It needs to be simplified a lot.
 Below is a script definining a command to create a service tracker:
{code:java}
create-tracker = {
	trackingContext = $1
	trackedClass = $2
	serviceAdded = $3
	serviceRemoved = $4
	shellClassLoader = (($.session class) getClassLoader)
	arrayClass = ($shellClassLoader loadClass java.lang.reflect.Array)
	handler = {
		proxy = $1
		method = $2
		arguments = $3
		name = ($method name)
		# echo ""Invoking $name""
		if { $name equals ""addingService"" } \
		then {
			ref = ($arrayClass get $arguments 0)
			svc = ($.context getService $ref)
			$serviceAdded execute $.commandSession [ $svc ]
			$svc
		} elif { $name equals ""removedService"" } \
		then {
			ref = ($arrayClass get $arguments 0)
			svc = ($arrayClass get $arguments 1)
			$serviceRemoved execute $.commandSession [ $svc ]
			$.context ungetService $ref
		}
	}
	# create handler
	customizerClass = ($shellClassLoader loadClass org.osgi.util.tracker.ServiceTrackerCustomizer)
	array = ([ $customizerClass ] toArray ($arrayClass newInstance ""java.lang.Class"" 1))
	proxyClass = ($shellClassLoader loadClass java.lang.reflect.Proxy)
	customizer = ($proxyClass newProxyInstance $shellClassLoader $array $handler)
	# create tracker
	trackerClass = ($shellClassLoader loadClass org.osgi.util.tracker.ServiceTracker)
	constructor = ($trackerClass constructor org.osgi.framework.BundleContext java.lang.String org.osgi.util.tracker.ServiceTrackerCustomizer)
	if { ""java.lang.Class"" equals ($trackedClass class) } \
	then {
		trackedClass = ($trackedClass name)
	}
	tracker = ($constructor newInstance $trackingContext $trackedClass $customizer)
	$tracker
}

tracker = (create-tracker $.context ""org.osgi.service.cm.ManagedService"" { s = (($1 class) toString); echo ""service-added $s"" } { s = (($1 class) toString); echo ""service-removed $s"" })
$tracker open true
{code}
Also, the Gogo Runtime expander does not support subscripts in java arrays. It has to be a {{List}}. This should be fixed, see [https://github.com/apache/felix/blob/trunk/gogo/runtime/src/main/java/org/apache/felix/gogo/runtime/Expander.java#L1483].

Conversion from list to array would be needed too.

In order to be more user-friendly, we need helper methods to define a context class loader, load classes (the String -> Class conversion needs to leverage it).",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-05-17 08:51:59.818,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu May 17 15:56:54 UTC 2018,,,,,,,"0|i3ttmv:",9223372036854775807,,,,,,,,,,,,,,,,,"17/May/18 08:51;jbonofre;Big +1, that's a great idea !","17/May/18 15:56;gnodet;The 3 gogo fixes lead to the following now, it's a bit easier to read, though not awesome. Not sure what to improve.
{code}
create-tracker = {
	trackingContext = $1 ; trackedClass = $2 ; serviceAdded = $3 ; serviceRemoved = $4
	handler = {
		proxy = $1 ; method = $2 ; arguments = $3
		name = ($method name)
		# echo ""Invoking $name""
		if { $name equals ""addingService"" } \
		then {
			ref = ${arguments[0]}
			svc = ($.context getService $ref)
			$serviceAdded execute $.commandSession [ $svc ]
			$svc
		} elif { $name equals ""removedService"" } \
		then {
			ref = ${arguments[0]} ; svc = ${arguments[1]}
			$serviceRemoved execute $.commandSession [ $svc ]
			$.context ungetService $ref
		}
	}
	# create handler
	shellClassLoader = ($.commandSession classLoader)
	customizerClass = ($shellClassLoader loadClass org.osgi.util.tracker.ServiceTrackerCustomizer)
	proxyClass = ($shellClassLoader loadClass java.lang.reflect.Proxy)
	customizer = ($proxyClass newProxyInstance $shellClassLoader [ $customizerClass ] $handler)
	# create tracker
	if { ""java.lang.Class"" equals ($trackedClass class) } \
	then {
		trackedClass = ($trackedClass name)
	}
	tracker = (new org.osgi.util.tracker.ServiceTracker $trackingContext $trackedClass $customizer)
	$tracker
}

tracker = (create-tracker $.context ""org.osgi.service.cm.ManagedService"" { s = (($1 class) toString); echo ""service-added $s"" } { s = (($1 class) toString); echo ""service-removed $s"" })
$tracker open true
{code}",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactore Maven plugin to provide CLI/Gradle/Maven,KARAF-6148,13214925,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,11/Feb/19 06:29,08/Oct/20 14:12,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,cli,gradle,maven,,"Instead of directly leveraging Maven, it would make sense to use a {{Runnable}} for the goal and then easily ""wrap"" as CLI, Gradle, and Maven plugins.",,georgec,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-6473,,KARAF-6473,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-02-11 06:29:24.0,,,,,,,"0|yi0udc:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add tooling to easily create docker image, archive, uber jar, etc",KARAF-6149,13214927,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,11/Feb/19 06:39,08/Oct/20 14:11,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,cli,gradle,maven,,"The {{assembly}} plugin creates {{zip}} or {{tar.gz}} archives for a distribution.
Relative to simplifying the assembly, it would also make sense to directly create docker image, dockerfile, openimage, ... directly from the plugin (maybe leveraging jib plugin).
This should be wrapped from CLI/Gradle/Maven.",,georgec,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-6473,,KARAF-6473,KARAF-6236,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun May 17 05:46:31 UTC 2020,,,,,,,"0|yi0uds:",9223372036854775807,,,,,,,,,,,,,,,,,"17/May/20 05:46;jbonofre;That's also part of Karaf DevX.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve features repository generation,KARAF-6150,13214928,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,11/Feb/19 06:42,08/Oct/20 14:11,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"If we already have the features generate Maven plugin, the descriptor generation is almost basic. The idea is to give more visibility (maybe using a response file/CLI as JSON) to generate more advanced pattern or better leverage the user code.
 
I'm thinking about some annotations on {{package-info.java}} describing the features needed.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-02-11 06:42:37.0,,,,,,,"0|yi0ue0:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create ClassLoader that recognize bundle-classpath in case of no OSGi usage e.g. shell/shell.bat,KARAF-6460,13262843,New Feature,In Progress,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,a.vasilev,a.vasilev,17/Oct/19 11:54,08/Oct/20 13:59,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,offline,shell,,,Jars which have embedded jars in them and Bundle-ClassPath are not loaded properly in no OSGi environment. If I try to use such jars with <karav_home>/bin/shell it seems that embedded jars  are not loaded in the classpath. ,,a.vasilev,githubbot,jbonofre,jira-bot,riconeubauer,svogt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-10-17 12:00:02.852,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Nov 06 13:52:35 UTC 2019,,,,,,,"0|z07ork:",9223372036854775807,,,,,,,,,,,,,,,,,"17/Oct/19 12:00;jbonofre;{{shell}} is specific to some commands/features. It has not been designed to be used in any context. What's your use case there ?","17/Oct/19 12:07;jbonofre;As discussed on Slack, I have a better understanding of the user case: provide bundles containing Karaf shell commands with dependencies in `Bundle-ClassPath` header.","17/Oct/19 12:12;svogt;We have a bunch of tools from our old JBoss based product which we needed to be ported to Karaf. Some of them should also be available when the instance is offline or cannot be started (maintenance tools like changing datasource configs or exporting stuff from internal datastructure or providing diagnostics information).

For now we ported them to be commands and currently those are only available when the instance is running. We wanted to make them available in shell but the first command Aleks looked at uses a bundle with embedded artifacts. Hence this request (Aleks would also provide a PR if in general that is an acceptable feature request). 

We are aware that {{shell}} is NOT an OSGi environment so we know that there is no DS / SCR / etc. stuff, but plain old service locator and only Karaf shell ""@Reference"" will work. ","17/Oct/19 12:18;jbonofre;Understood, thanks for the details.","24/Oct/19 06:38;githubbot;avasilev commented on pull request #973: [KARAF-6460] Create ClassLoader that recognize bundle-classpath in ca…
URL: https://github.com/apache/karaf/pull/973
 
 
   …se of no OSGi usage e.g. shell/shell.bat
   
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","01/Nov/19 15:29;githubbot;jbonofre commented on pull request #973: [KARAF-6460] Create ClassLoader that recognize bundle-classpath in ca…
URL: https://github.com/apache/karaf/pull/973
 
 
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org
","01/Nov/19 15:29;jira-bot;Commit 9d652bcfa0a05a7dec018b7cc842e8f8142363fc in karaf's branch refs/heads/master from Aleksandar Vasilev
[ https://gitbox.apache.org/repos/asf?p=karaf.git;h=9d652bc ]

[KARAF-6460] Create ClassLoader that recognize bundle-classpath in case of no OSGi usage e.g. shell/shell.bat
","01/Nov/19 15:29;jira-bot;Commit bb7419582a8dd88f54e22115eb565ae589c8321c in karaf's branch refs/heads/master from Jean-Baptiste Onofré
[ https://gitbox.apache.org/repos/asf?p=karaf.git;h=bb74195 ]

Merge pull request #973 from avasilev/KARAF-6460

[KARAF-6460] Create ClassLoader that recognize bundle-classpath in ca…","01/Nov/19 15:29;jira-bot;Commit bb7419582a8dd88f54e22115eb565ae589c8321c in karaf's branch refs/heads/master from Jean-Baptiste Onofré
[ https://gitbox.apache.org/repos/asf?p=karaf.git;h=bb74195 ]

Merge pull request #973 from avasilev/KARAF-6460

[KARAF-6460] Create ClassLoader that recognize bundle-classpath in ca…","01/Nov/19 15:30;jira-bot;Commit 3c21921a2172071d72b8d6c24c64976ee735d33a in karaf's branch refs/heads/karaf-4.2.x from Aleksandar Vasilev
[ https://gitbox.apache.org/repos/asf?p=karaf.git;h=3c21921 ]

[KARAF-6460] Create ClassLoader that recognize bundle-classpath in case of no OSGi usage e.g. shell/shell.bat

(cherry picked from commit 9d652bcfa0a05a7dec018b7cc842e8f8142363fc)
","06/Nov/19 13:52;a.vasilev;Enhancing ClassLoader to load jars in jars leads to slowing down the app. After some profiling I found out that finding an resource constantly opens inner jars stream to look for the resource which makes the shell behave really slow if we have a lot of jars and jars inside the jars. After loading which is slow the execution time for my test is taking around 3 mins.

To speed it up I suggest that we drop the enhancement and extracts the jars in temp folder on first run. This would take in my test case with about 1000 jars and ~400 inner jars ~8 sec and for traversing on second run about 1-3 sec (I check if jar is already in the temp folder and do not extract it if it is there).  After that loading time the execution time is instant.

What do you think? Shell I prepare new PR? Do you mind naming the folder inside %KARAF_TEMP%?",,,,,,,,,,,,,,,,,,,,,,,,
Add option to start child instances when the instances service is starting,KARAF-6576,13277734,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,06/Jan/20 16:51,08/Oct/20 13:52,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"As discussed with Tim on the mailing list, an option to start all child instances when the root instance/instance service starts would be helpful (especially when using in docker).

Accordingly, the child instances should be stopped when the instance service stops.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-01-06 16:51:22.0,,,,,,,"0|z0a868:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a managed service to create realm and login modules,KARAF-6592,13278933,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,12/Jan/20 16:34,08/Oct/20 13:51,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"In order to avoid dependency to blueprint to create JAAS realm and login modules, we can use a managed factory to configure this.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-01-12 16:34:19.0,,,,,,,"0|z0af94:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce feature configuration to ignore effective capability in the resolver,KARAF-6605,13281152,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,23/Jan/20 10:00,08/Oct/20 13:48,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"The specification says:
The OSGi framework resolver only considers Capabilities without an effective directive or effective:=resolve. Capabilities with other values for the effective directive can be considered by an external agent.
 The effectiveness active is a convention commonly used for situations that do not need to be resolved by the OSGi framework but are relevant in using the resolver for assembling applications.
The feature resolver considers the capability as a strong requirement, whatever if it's effective or not.

I think it makes sense to consider this capability requirement for the build, but runtime could consider effective capability as optional.

It would be great to either update the features resolver that way or add a configuration in org.apache.karaf.features.cfg defining strong or optional requirement for effective cap.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-01-23 10:00:43.0,,,,,,,"0|z0asjk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add configuration/command to bind a servlet/webbundle to a connector,KARAF-6632,13290255,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,07/Mar/20 06:30,08/Oct/20 13:28,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"By default, servlet/webbundle/webapplication bind to all Pax Web connectors.

It's possible to bind one application to a specific connector using:
{code:java}
Web-Connector: foo {code}
However, it means modify or wrap an existing application.

It would be great to be able to define that by configuration and shell commands.",,jbonofre,maggu2810,svs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-6633,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-03-07 06:30:52.0,,,,,,,"0|z0ca3s:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add gs, s3, hdfs artifacts location support",KARAF-6777,13314487,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,Anant-netent,Anant-netent,01/Jul/20 14:04,06/Sep/20 05:44,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Hi,

We are using following karaf -maven plugin to build our karaf project, also we are using google buckets as artifactory repository.

 

<dependency>
 <groupId>org.apache.karaf.tooling</groupId>
 <artifactId>karaf-maven-plugin</artifactId>
 <version>4.3.0.RC1</version>
</dependency>

 

 

While executing this plugin it is not able to recognize gs protocol which is used to access artifacts from google buckets(gs://bucket-name)

Getting follwing error:
java.net.MalformedURLException: unknown protocol: gs
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:618)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:508)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:457)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenRepositoryURL.<init> (MavenRepositoryURL.java:191)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenConfigurationImpl.getRepositories (MavenConfigurationImpl.java:318)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.selectRepositories (AetherBasedResolver.java:406)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:618)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:600)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:567)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.MavenDownloadTask.download (MavenDownloadTask.java:47)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run (AbstractRetryableDownloadTask.java:60)
Step #0 - ""Maven integration tests"": at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
Step #0 - ""Maven integration tests"": at java.util.concurrent.FutureTask.run (FutureTask.java:266)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201 (ScheduledThreadPoolExecutor.java:180)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:293)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
Step #0 - ""Maven integration tests"": at java.lang.Thread.run (Thread.java:748)
Step #0 - ""Maven integration tests"": [ERROR] invalid repository URLs
Step #0 - ""Maven integration tests"": java.net.MalformedURLException: unknown protocol: gs
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:618)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:508)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:457)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenRepositoryURL.<init> (MavenRepositoryURL.java:191)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenConfigurationImpl.getRepositories (MavenConfigurationImpl.java:318)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.selectRepositories (AetherBasedResolver.java:406)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:618)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:600)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:567)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.MavenDownloadTask.download (MavenDownloadTask.java:47)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run (AbstractRetryableDownloadTask.java:60)
Step #0 - ""Maven integration tests"": at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
Step #0 - ""Maven integration tests"": at java.util.concurrent.FutureTask.run (FutureTask.java:266)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201 (ScheduledThreadPoolExecutor.java:180)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:293)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
Step #0 - ""Maven integration tests"": at java.lang.Thread.run (Thread.java:748)
Step #0 - ""Maven integration tests"": [ERROR] invalid repository URLs
Step #0 - ""Maven integration tests"": java.net.MalformedURLException: unknown protocol: gs
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:618)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:508)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:457)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenRepositoryURL.<init> (MavenRepositoryURL.java:191)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenConfigurationImpl.getRepositories (MavenConfigurationImpl.java:318)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.selectRepositories (AetherBasedResolver.java:406)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:618)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:600)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:567)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.MavenDownloadTask.download (MavenDownloadTask.java:47)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run (AbstractRetryableDownloadTask.java:60)
Step #0 - ""Maven integration tests"": at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
Step #0 - ""Maven integration tests"": at java.util.concurrent.FutureTask.run (FutureTask.java:266)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201 (ScheduledThreadPoolExecutor.java:180)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:293)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
Step #0 - ""Maven integration tests"": at java.lang.Thread.run (Thread.java:748)
Step #0 - ""Maven integration tests"": [WARNING] Error resolving artifact org.ops4j.pax.web:pax-web-features:xml:features:7.0.0: [Could not find artifact org.ops4j.pax.web:pax-web-features:xml:features:7.0.0]
Step #0 - ""Maven integration tests"": java.io.IOException: Error resolving artifact org.ops4j.pax.web:pax-web-features:xml:features:7.0.0: [Could not find artifact org.ops4j.pax.web:pax-web-features:xml:features:7.0.0]
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:720)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:659)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve[ERROR] invalid repository URLs
Step #0 - ""Maven integration tests"": java.net.MalformedURLException: unknown protocol: gs
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:618)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:508)
Step #0 - ""Maven integration tests"": at java.net.URL.<init> (URL.java:457)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenRepositoryURL.<init> (MavenRepositoryURL.java:191)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.config.MavenConfigurationImpl.getRepositories (MavenConfigurationImpl.java:318)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.selectRepositories (AetherBasedResolver.java:406)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:618)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:600)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:567)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.MavenDownloadTask.download (MavenDownloadTask.java:47)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run (AbstractRetryableDownloadTask.java:60)
Step #0 - ""Maven integration tests"": at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
Step #0 - ""Maven integration tests"": at java.util.concurrent.FutureTask.run (FutureTask.java:266)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201 (ScheduledThreadPoolExecutor.java:180)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:293)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
Step #0 - ""Maven integration tests"": at java.lang.Thread.run (Thread.java:748)
Step #0 - ""Maven integration tests"": (AetherBasedResolver.java:600)
Step #0 - ""Maven integration tests"": at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve (AetherBasedResolver.java:567)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.MavenDownloadTask.download (MavenDownloadTask.java:47)
Step #0 - ""Maven integration tests"": at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run (AbstractRetryableDownloadTask.java:60)
Step #0 - ""Maven integration tests"": at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
Step #0 - ""Maven integration tests"": at java.util.concurrent.FutureTask.run (FutureTask.java:266)
Step #0 - ""Maven integration tests"": at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201 (ScheduledThreadPoolExecutor.java:180)
Step #0 - ""Maven integration tests"": [ERROR] invalid repository URLs",,Anant-netent,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-09-06 05:27:34.258,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Sep 06 05:44:27 UTC 2020,,,,,,,"0|z0gddk:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Sep/20 05:27;jbonofre;This is not really a bug as gs/s3/hdfs are not standard Maven storage. It's more a new feature to support pluggable filesystem storage. I think it makes more sense to include this in DevX (work in progress). Thanks for the proposal.","06/Sep/20 05:31;Anant-netent;Thanks, It would be really nice if we add support for these protocols, as i believe these are heavily used these days.

 ","06/Sep/20 05:33;jbonofre;Agree. IMHO, these protocols are used for file storage, but not sure directly as artifacts storage (most of the time, the storage is ""façade"" with a artifacts repository manager like Nexus, Artifactory, Archiva, Karaf Cave, ...).

However, it makes sense, I will add this.","06/Sep/20 05:37;Anant-netent;Thanks [~jbonofre] .  Any tentative timeline for this on when it can be released?","06/Sep/20 05:39;jbonofre;My priority for the coming weeks is Karaf 4.3.0 and 4.2.10, and the bucket is already pretty large ;)

Reasonably, I can work on something ~ October as part of DevX roadmap.","06/Sep/20 05:44;Anant-netent;Awesome! It would be great if we can get this by Oct-Nov.  Thanks in advance.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for TLS-PSK mutual authentication,GUACAMOLE-28,12971329,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Major,,,mjumper,mjumper,19/May/16 23:00,21/Jul/20 19:02,17/Feb/21 11:13,,,,,,,,,,,,,,1,,,,,"{panel:bgColor=#FFFFEE}
*The description of this issue was copied from [GUAC-1344|https://glyptodon.org/jira/browse/GUAC-1344], an issue in the JIRA instance used by the Guacamole project prior to its acceptance into the Apache Incubator.*


Comments, attachments, related issues, and history from prior to acceptance *have not been copied* and can be found instead at the original issue.
{panel}

Given that the authorization is done by the guacamole-client (java) component, there seem to be a need for mutual authentication between guacd and its clients so not anyone could use guacd but only authenticated peers (especially when they do not run on the same machine).

This could allow to have guacd with one internal leg to communicate with the servers and one leg on DMZ on which is accepts guacd clients but only authenticated ones.

I've been working on adding support for TLS-PSK with the openssl library to the guacd server side component (as first step) and would like to share this and to possibly integrate it if fit (PR will follow).

Thanks for this great and opened software.",,jcpunk,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-1344,,,,,,,,,,9223372036854775807,,,2016-05-19 23:00:06.0,,,,,,,"0|i2y8rj:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add archaius configuration backend feature,KARAF-6513,13266761,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,07/Nov/19 08:23,07/Nov/19 08:23,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Archaius is a configuration backend usable via a set of API. It's well set for the cloud.

My idea is to implement a Karaf {{ConfigRepository}} service using Archaius backend.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-11-07 08:23:02.0,,,,,,,"0|z08ch4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add the posibility to sign / encrypt bundles,KARAF-6436,13259064,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,julian.feinauer,julian.feinauer,26/Sep/19 13:56,29/Sep/19 14:14,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"It should have a possibilty to lock a Karaf instance to only accept bundles that are signed / encrypted with a predefined key.
This would allow a certain protection for the deployed bundles and application as not any user code can be deployed but only certified one.

*Definition of Done:*
We are able to configure a Karaf instance with a key / certificate and it then only accepts bundles that are signed / encrypted with a suitable key / certificate.

There was a short discussion about the matter in the Slack channel with [~JB0000000000001] and [~cschneider] on 09/26/19 in #karaf:

{noformat}
Christian Schneider 15:33
You might experiment with a hook that only allows signed bundles.
So at least you can implement a mandatory code check as you can control the signing
Julian Feinauer 15:34
@Christian Schneider Is there already an implementation for that? For this sign checking stuff
This would fit nicely into the karaf ecosystem
JB Onofré 15:37
@Julian Feinauer we have this, but not in Karaf directly
@Julian Feinauer it could be part of the security/encryption feature
{noformat}
",,jbonofre,julian.feinauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-09-29 14:14:32.885,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Sep 29 14:14:32 UTC 2019,,,,,,,"0|z071u8:",9223372036854775807,,,,,,,,,,,,,,,,,"29/Sep/19 14:14;jbonofre;Almost all is ready, just adding/merging the signing service.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Be able to enable the artifact transport on Cellar,KARAF-6187,13219978,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,06/Mar/19 16:54,07/Mar/19 06:30,17/Feb/21 11:13,,,,,cellar,,,,,,,,,0,,,,,,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Mar 07 06:30:41 UTC 2019,,,,,,,"0|z00f14:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Mar/19 06:30;jbonofre;The idea is to optionally add artifact (as {{byte[]}}) in the {{BundleClusterEvent}} to transport between nodes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add diag webconsole plugin,KARAF-3193,12737441,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,28/Aug/14 13:16,16/Sep/18 04:43,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"The bundle:diag command (and other diag:* commands) is helpful for end user to get some details about the current bundle state.

It would be helpful to provide a ""Diagnostic"" view on the Karaf WebConsole, providing the same information as in the commands.",,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-08-28 13:16:41.0,,,,,,,"0|i1zfsn:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
KarafMock allowing to test blueprint config files or class annoted,KARAF-532,12502378,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,cmoulliard,cmoulliard,25/Mar/11 13:13,16/Sep/18 04:34,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Some OSGI projects requires that we have OSGI platform running to test them (ex : Aries Blueprint). Karaf project does not provide any Mock component for doing that and so it is not possible to make tests about Blueprint using a java Unit test + spring. 

http://aries.15396.n3.nabble.com/Using-Aries-outside-OSGi-Container-Using-Aries-like-SpringApplicationContext-td2721343.html

We could create a mock component to allow that. Spring DM project has created a Mock class (http://static.springsource.org/osgi/docs/1.2.1/reference/html-single/#testing:mocks) that we could reuse but the approach followed by Eclipse Virgo could be more clever. They have created Stubs classes (http://wiki.eclipse.org/Virgo/Test) registering through interfaces the OSGI classes of the frameworks who can be used in unit test. 

Question : Who should be the owner of that (karaf or aries) ?

Charles",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,68450,,,2011-03-25 13:13:31.0,,,,,,,"0|i1cij3:",281133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce feature to handle start/client/stop in the testframework,KARAF-1049,12532841,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,pieber,pieber,pieber,27/Nov/11 18:11,16/Sep/18 04:34,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,Currently it is not possible to make use of the start/client/stop scripts in the karaf test-framework. Though this could be implemented similar to the client scripts. This one is required to finally fix KARAF-1006.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,218574,,,2011-11-27 18:11:49.0,,,,,,,"0|i1cj3z:",281227,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add markdown format support in the command helper plugin,KARAF-1717,12603224,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,iocanel,iocanel,13/Aug/12 11:54,16/Sep/18 04:34,17/Feb/21 11:13,,2.3.0,,,karaf,,,,,,,,,0,,,,,"It would be neat, if our cmd helper plugin could produce files that could use the markdown (md) format.",,iocanel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,258212,,,2012-08-13 11:54:24.0,,,,,,,"0|i0ko7r:",118740,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add feature-generate-doc mojo,KARAF-3194,12737748,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,29/Aug/14 08:39,16/Sep/18 04:34,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"In order to generate a documentation on the resources containing:
- the feature description
- the feature transitive features
- the feature bundles
- the feature configs

it would be great to have karaf:feature-generate-doc as we have karaf:commands-generate-doc mojo.",,jbonofre,jeanphiphi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2014-08-29 08:39:54.0,,,,,,,"0|i1zh7j:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support Equinox Console,KARAF-1802,12606851,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,mitaes,mitaes,10/Sep/12 10:07,15/Sep/18 16:36,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Consider integration of new Equinox console (based on Felix Gogo) into the Karaf console.

Equinox Commands currently provided by: *org.eclipse.equinox.console_1.0.0.v20120522-1841.jar*",,mitaes,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,245501,,,2012-09-10 10:07:03.0,,,,,,,"0|i06b7b:",34748,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
provide a text entry option with remembered default values for 'wizard' like commands,KARAF-220,12474917,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jstrachan,jstrachan,23/Sep/10 09:58,15/Sep/18 16:36,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"For example, imagine a command line ""mvn release:prepare"" or imagine a simple command which creates a new Java source file using some kind of template. You might want to allow folks to specify the package name to use, or release number to use for a command using an option. But if the option isn't supplied you might want to prompt the user with a guessed default value - which may well be fine most of the time, so users can just type 'enter' to accept the default, or provide a new value.

e.g..

imagine a ""foo create mdb"" command which creates a Message Driven Bean java class. If the user types the following in the console....

{code}
$ foo create mdb bar
Creating Message Driven Bean  class Bar
package: [org.acme.foo]: _
{code}

if the user hits enter, then the default value is accepted otherwise they can enter the value. Just like with ""mvn release"" where the plugin guesses decent values for all the options.

Lets say the user enters ""org.acme.foo.mdb"" as the value then creates another MDB...

{code}
$ foo create mdb bar
Creating Message Driven Bean  class Bar
package: [org.acme.foo]: org.acme.foo.mdb
Created MDB in org.acme.foo.mdb.Bar

$ foo create mdb another
package: [org.acme.foo.mdb]: _
{code}

Here the system has remembered what the user typed for an option so it can be defaulted in the next time.

So given all the nice injection & annotations stuff in the Karaf console; I'm wondering if we can reuse the same options to from inside the execution of a command, be able to ask the user for an option (if it was not specified in the original command line) showing a default value - which if required can also be saved using the User Preferences stuff.

something along the line of...

public interface EntryForm {
  public boolean promptUser(Action action, String optionName, String prompt);
}

with maybe a separate API for use when the users response should be remembered in UserPreferences for next time the user executes a similar command.

A great use case for the 'remembering' is when we create commands which code generate XML or Java code into a directory or package; which will likely remain the same for a project, but we may generate multiple instances of the same kind of thing. e.g. like creating entities or controllers in Rails, creating RouteBuilders in Camel or whatever

UserPreferences stuff here:
http://download.oracle.com/javase/1.5.0/docs/guide/preferences/index.html",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,146521,,,2010-09-23 09:58:27.0,,,,,,,"0|i1cic7:",281102,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use a history file per instance when possible,KARAF-1381,12551607,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,19/Apr/12 11:23,15/Sep/18 16:35,17/Feb/21 11:13,,,,,karaf,,,,,,,,,2,,,,,"Currently, all instances launched with the same system user share the same history file ($USER/.karaf/history), so we got the commands runned on another instance.

A workaround is to use -Dkaraf.history property to use a history file specific to each instance. However, the user has to change the startup configuration to add this property.

When the instances are clearly identified (root, foobar, other, etc), Karaf could store the history file in a dedicated location by default, for instance:

$USER/.karaf/history.root
$USER/.karaf/history.foobar
$USER/.karaf/history.other",,cschneider,jbonofre,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-05-15 11:47:55.309,,,false,,,,,,,,,,,,,,,,,,236415,,,Tue May 29 13:12:00 UTC 2012,,,,,,,"0|i06ba7:",34761,,,,,,,,,,,,,,,,,"15/May/12 11:47;cschneider;Can we move this to 3.1.0 ?","15/May/12 11:50;jbonofre;+1","29/May/12 13:12;gnodet;I was going to suggest to put it in the data dir, but I'm thinking how much i use the history after reinstalling karaf, so that would be a bad idea.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ability to intercept CommandSession.close() to clean up shared resource before disconnect,KARAF-2048,12618539,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,danttran,danttran,03/Dec/12 08:31,15/Sep/18 16:35,17/Feb/21 11:13,,2.3.0,,,karaf,,,,,,,,,0,,,,,detailed discussion is at http://karaf.922171.n3.nabble.com/Intercepting-Karaf-s-CommandSession-close-td4026883.html,,danttran,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,293372,,,2012-12-03 08:31:19.0,,,,,,,"0|i0szbj:",167199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Execute native commands from the shell,KARAF-2054,12623385,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,11/Dec/12 13:57,15/Sep/18 16:35,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"In some ""Unix shell"" (vim, lftp, etc), it's possible to execute native commands using the ! character.

It could be interesting to execute system commands from the shell. For instance, something like:

karaf@root> !ls etc
karaf@root> !uptime

Of course, this feature could be disable in etc/org.apache.karaf.shell.cfg file.",,c.vanfleteren,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2013-07-08 20:00:42.326,,,false,,,,,,,,,,,,,,,,,,297082,,,Mon Jul 08 20:00:42 UTC 2013,,,,,,,"0|i14l8f:",234904,,,,,,,,,,,,,,,,,"08/Jul/13 20:00;c.vanfleteren;Isn't this what shell:exec does now?

Combined with the new alias feature, you can now do 
{code}
shell:alias '! = {shell:exec $args}'
! uptime

{code}

Note, there needs to be a space, otherwise jline tries to use event expansion.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a command to show bundles with split packages,KARAF-2382,12657528,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,12/Jul/13 21:50,15/Sep/18 16:35,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,,,jbonofre,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,337749,,,2013-07-12 21:50:07.0,,,,,,,"0|i1m98v:",338071,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a karaf-enterprise-repository,KARAF-726,12513678,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,11/Jul/11 14:22,15/Sep/18 05:30,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"We have already a longer description of this feature here:

https://cwiki.apache.org/confluence/display/KARAF/Karaf+Enterprise+Repository

In addition there are also some discussions on the mailinglist about this but I couldn't find the link right now :(",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-07-11 14:28:39.704,,,false,,,,,,,,,,,,,,,,,,65860,,,Sat Aug 06 09:46:22 UTC 2011,,,,,,,"0|i1cipr:",281163,,,,,,,,,,,,,,,,,"11/Jul/11 14:28;jbonofre;We should really define the scope. Apache Archiva also works to turn it as a complete EBR.
Apache ACE also ships Felix BundleRepository to provide a simple OBR.

It makes sense to provide a simple EBR in Karaf but we should keep in mind to be very plug and play to be able to use Archiva or ACE OBR as backend.","11/Jul/11 14:36;pieber;Taking a look again at the wiki entry I don't think that it has to be such complex at all (see the wiki: ""could be a simple xml file""). I think for a first shot (3.0.0.RC1) and to get some valuable feedback we should keep this really simple and maybe really rely on an easy xml file on our servers for now.

WDYT?","11/Jul/11 14:40;jbonofre;Yeah, agree, it would be a good first step. For 3.1.0, we can think about Karaf Cave which aim to be a complete OBR/EBR abstraction layer and a simple OBR when no backend is provided.","14/Jul/11 12:17;jbonofre;As discussed this morning, enterprise features repository could be the first part of the Karaf Cave sub-project.

Karaf Cave aim to be an OBR/EBR, with extension for Karaf features support.
We can start by leveraging Felix BundleRepository and add Karaf enterprise features support.","16/Jul/11 07:16;pieber;Since we've decided to vote on the issues (which to include in 3.0) and I can't vote on my own issues I have to do it this way: +1 for including this one into 3.0 :-)","06/Aug/11 09:46;pieber;another point which should be considered during this issue if this doesn't provide us a way to get rid of the <repository> tag in the features.xml. IMHO this tag is quite problematic since it forbids to upgrade some features independent of the ""main feature file"" although it would work. An alternative solution may be to reference other repositories via the enterprise repository using a range. For example:

Instead of...

{code}
<repository>mvn:org.jclouds.karaf/feature/1.0.0/xml/features</repository>
{code}

...we may use something like... 

{code}
<repository id=""org.jclouds.karaf"" version=""[1,2) />
{code}

WDYT?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ability to retrieve a available list of a specific maven artifact's versions via ( with given groupId and artifactId ) ,KARAF-688,12511553,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,pieber,danttran,danttran,26/Jun/11 07:26,15/Sep/18 05:26,17/Feb/21 11:13,,2.2.1,,,karaf,,,,,,,,,0,,,,,"Details discussion is here

http://karaf.922171.n3.nabble.com/Ability-to-retrieve-a-available-list-of-a-specific-maven-artifact-s-versions-via-with-given-groupId--td2989285.html

Basically I have  a karaf base agent which I'd like to get the agent to periodically polling maven repos to check for available upgrade version. This requested feature is crucial for my work","windows/linix,java 6",danttran,pieber,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/14 22:22;danttran;KARAF-688-2.diff;https://issues.apache.org/jira/secure/attachment/12630397/KARAF-688-2.diff","16/Jul/11 03:37;danttran;KARAF-688.diff;https://issues.apache.org/jira/secure/attachment/12486708/KARAF-688.diff",,2.0,,,,,,,,,,,,,,,,,,,,2012-08-29 09:58:42.034,,,false,,,,,,,,,,,,,,,,,,62777,,,Fri Feb 21 23:57:22 UTC 2014,,,,,,,"0|i1cir3:",281169,,,,,,,,,,,,,,,,,"12/Jul/11 02:48;danttran;In order to determine available versions under groupId/artifactId

I would like to propose to enhancement to the current mvn URL format:
 
   - original format: mvn-uri := 'mvn:' [ repository-url '!' ] group-id '/' artifact-id [ '/' [version] [ '/' [type] [ '/' classifier ] ] ] ]
 
  - new format: mvn-uri := 'mvn:' [ repository-url '!' ] group-id '/' artifact-id [ '/' [version] [ '/' [type] [ '/' classifier ] '/' [fileName] ] ] ] ]
 
original api for this is  http://ops4j1.jira.com/wiki/display/paxurl/Mvn+Protocol
 
So 
 
for mvn:groupId/artifactId///metadata.xml indiates we want metadata.xml file under groupId/artifactId
 
Thoughts?


","16/Jul/11 03:37;danttran;the first crack to allow download any file did not go well so we settle for only getting maven-metadata.xml ( this is truely what we after)

Please advice on the attached patch karaf-688.diff","03/Sep/11 15:46;danttran;fixed is checked in at https://github.com/dantran/org.ops4j.pax.url/tree/url-1.2.x","29/Aug/12 09:58;pieber;I'll give this a shot within this week","30/Aug/12 03:17;danttran;since pax-url-mvn 1.2.x is retired any way, it is best for pax-url team to provide a service retrieve a list of available version key a pair of groupId/artifactId for 1.5.x to be ready for karaf 3.0

thanks ","21/Feb/14 22:22;danttran;added another patch same content but using relative path for ease of patching the source tree. It works with url-1.3.6 url-1.3.7","21/Feb/14 23:57;danttran;I created an issue at https://ops4j1.jira.com/browse/PAXURL-247 to get more attention",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add systemd journal logging support,KARAF-5275,13090558,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,vorburger,vorburger,27/Jul/17 16:39,15/Sep/18 05:24,17/Feb/21 11:13,,4.0.9,,,karaf,,,,,,,,,0,,,,,"KARAF-3858 introduced systemd support in the wrapper.

But (unless I'm missing something), Karaf cannot yet log to the systemd journal, out of the box?

https://github.com/bwaldvogel/log4j-systemd-journal-appender is a project which seems to make this easy. Would a contribution to Karaf to include this external library in the distribution and have an example configuration in etc/org.ops4j.pax.logging.cfg be welcome?

Or am I getting this all wrong, and this needs to go into OPS4j's PAX Logging, first? Duh...",,bwaldvogel,vorburger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://bugzilla.redhat.com/show_bug.cgi?id=1475951,,,,,,,,,,9223372036854775807,,,Thu Jul 27 17:21:58 UTC 2017,,,,,,,"0|i3i3hz:",9223372036854775807,,,,,,,,,,,,,,,,,"27/Jul/17 17:21;vorburger;Started looking at the Pax Logging side of things.. https://groups.google.com/d/msg/ops4j/wFC_C36T-hM/v3cBKJFABQAJ ...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace JSW with YAJSW,KARAF-5853,13175565,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jbonofre,jbonofre,jbonofre,30/Jul/18 14:09,15/Sep/18 05:24,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"For a while now, we are stuck with a old Tanuki JavaServiceWrapper version due to license issue (Tanuki JSW changed from Apache to GPL license, which is a Category X license for a Apache project).

As a replacement to Tanuki JSW, I will experiment the switch to YAJSW (http://yajsw.sourceforge.net/). YAJSW is release under the Apache license.",,jbonofre,raboczi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-2734,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-07-30 14:09:36.0,,,,,,,"0|i3wh4n:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add post feature installation triggers,KARAF-201,12474085,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,14/Sep/10 15:54,14/Sep/18 15:14,17/Feb/21 11:13,,,,,karaf,,,,,,,,,2,,,,,"Something like:

{code}
<script trigger=""post"">
    // do anything using gogo commands

</script>
{code}

The result could be displayed to the user so that the installation could give him some information (manual steps, or whatever), though it may need a separate element.",,achim_nierbeck,cschneider,olli,rubytuesdaydono,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-09-05 09:54:09.438,,,false,,,,,,,,,,,,,,,,,,62706,,,Mon Feb 06 13:50:09 UTC 2017,,,,,,,"0|i1cicf:",281103,,,,,,,,,,,,,,,,,"05/Sep/11 09:54;pieber;It is, but it has also one disadvantage. The echo would print every time the feature is installed which is also during karaf startup at a customer. And I don't think that they would like to see this message each time. I think we also have to add a switch to do things in those feature-scripts based on the ""surrounding"". If they are installed via features.cfg or directly via the console.
","09/Nov/11 21:04;jbonofre;It makes sense to have pre trigger.

It's a MUST HAVE for Karaf 3.0.","06/Feb/17 10:19;cschneider;Do we really still need this? After all bundles can also do actions once they become active. So I think we can already do this without a new element for features.","06/Feb/17 10:25;olli;I would like to have a standard mechanism to run pre-/post- install, uninstall and update tasks (full lifecycle) for features (not limited to gogo commands) for e.g. database migrations.","06/Feb/17 10:34;cschneider;You can already do this in an Activator or DS / blueprint callbacks. By putting this code in a bundle you make sure it can run in any OSGi environment.","06/Feb/17 10:47;olli;That's a lot of boilerplate to do some work depending on feature lifecycle (I'm not interested in _any_ OSGi environment but Karaf with Features only). Though having a common _OSGi Task API_ sounds interesting.","06/Feb/17 12:25;cschneider;A simple way to do this is to couple it with a service that encapsulates a resource. For example if you have a db then the common resource is the DataSource. So I think the right place to run automatic migration scripts would be the service that provides the DataSource. The service could make sure the migration scripts are run before the DataSource is published. 

In OSGi there is already a really good system to express dependencies using capabilities and services. So I think we can implement this in a good way without touching the feature mechanism.

If you are interested we can look into providing database migration hooks in pax-jdbc-config which I think would be a good place for this. 
","06/Feb/17 12:29;achim_nierbeck;hmm ... for DB migration you might also want to take a look at [PAX Warp|http://ops4j.github.io/pax/warp/0.7.0/index.html]","06/Feb/17 12:39;cschneider;I sent a discuss mail on ops4j about database migration https://groups.google.com/d/topic/ops4j/C2dIkkcl5Uw/discussion. Would this work for you?
","06/Feb/17 13:28;olli;Sorry, no. Database migration was an example and it could be any task. In my case it is a [Java Content Repository (JCR)|http://jackrabbit.apache.org/jcr/jcr-api.html], concretely [Apache Jackrabbit Oak|https://jackrabbit.apache.org/oak/] (Oak runs with Tar, Mongo or RDBMS _backend_). _On top_ of Oak sits [Sling|https://sling.apache.org] and provides services to access resources (from Oak but not only). Now you install applications _on top_ of Sling and in some cases you need to transform, add, remove or move existing content before these applications are installed (updated) – this is a concrete example close to database migration but I can imagine more use cases.","06/Feb/17 13:36;cschneider;What I wanted to express is that for each persistence technology you will have some central resource that can provide a good hook for doing migration tasks. 
Karaf features are only used for the first start of karaf. If you restart karaf then there is only the ordinary bundle startup. 
So I think it would not be a good practice to use the feature service at all for migration scripts. Instead hook into the resources that channel access to your persistence layer and make sure the migration is finished before the resource is made available to other bundles.
","06/Feb/17 13:50;olli;That won't work as the service providing resources is shared by different applications and IMHO the feature lifecycle is the best place to hook into when you manage (install, uninstall, update)  applications (set of bundles, features and configurations) with Karaf Features.",,,,,,,,,,,,,,,,,,,,,,,
Feature <config/> tag should support merge/overwrite,KARAF-1046,12532760,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,25/Nov/11 21:06,14/Sep/18 15:14,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"Currently, when installing a feature, the content of <config/> tag is not overwritten if already exist.

<config/> tag could support an attribute like merge or overwrite to define how to deal with existing configuration.",,stibi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-03-22 09:32:31.488,,,false,,,,,,,,,,,,,,,,,,218493,,,Mon Mar 26 03:56:15 UTC 2012,,,,,,,"0|i1cj4f:",281229,,,,,,,,,,,,,,,,,"22/Mar/12 09:32;cschneider;Can we move this to 3.1?","22/Mar/12 12:30;achim_nierbeck;+1 for 3.1
","26/Mar/12 03:56;pieber;+1 for 3.1; doesn't sound too critical for me.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
It Should Be Possible To Define Whether obr Bundles Are Started and Their Start Level On a Per Feature Basis,KARAF-1760,12604528,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gcollins,gcollins,22/Aug/12 22:37,14/Sep/18 15:14,17/Feb/21 11:13,,2.2.9,,,karaf,,,,,,,,,0,,,,,"This is related to this thread:

http://karaf.922171.n3.nabble.com/A-Basic-OBR-Question-td4025744.html

In summary, if you have defined an obr resolver for a feature, it should be possible to indicate as part of the feature the start-level and the start flag for each obr resolved bundle.

As this may mean a change to the feature schema, this would likely need to be done for a 3.x or later release.",,gcollins,lichtin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,308532,,,2012-08-22 22:37:56.0,,,,,,,"0|i1cji7:",281291,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow to mark features as 'aggregate' features,KARAF-1957,12612835,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,raulvk,raulvk,20/Oct/12 15:36,14/Sep/18 15:14,17/Feb/21 11:13,,2.2.9,2.3.0,,karaf,,,,,,,,,0,,,,,"When creating features descriptors, one would typically cross-reference features in two cases:

* to express dependency => when feature A depends on feature B and feature C
* to express aggregation => when you want to provide a single 'entry point' to install the entire application, i.e. feature A is a conglomerate of feature B and feature C

If you're after the second use case, Karaf has a shortcoming: uninstalling feature A won't automatically uninstall feature B and C.

This makes a lot of sense, so I wouldn't change this behaviour. However, it would be nice to be able to mark a feature as an aggregate, so Karaf will know in what cases it makes sense to uninstall referenced features.

A simplified example:

{code}
<feature name=""A"" aggregate=""true"">
  <feature>B</feature>
  <feature>C</feature>
</feature>
{code}",,raulvk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,250107,,,2012-10-20 15:36:26.0,,,,,,,"0|i0apc7:",60378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add pax-scanner & full pax-url support to paxexam-karaf,KARAF-1946,12612359,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,18/Oct/12 04:46,14/Sep/18 12:39,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Pax Url & Pax Scanner are not fully supported by now. Nevertheless, adding those would make the handling by ways easier. Also the internal dependency management might be handled by this method.

The original issue was https://github.com/openengsb/labs-paxexam-karaf/issues/21",,pieber,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,249469,,,2012-10-18 04:46:32.0,,,,,,,"0|i0aeov:",58653,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support to paxexam-karaf to attach jvm weavers to the process started,KARAF-1944,12612357,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,18/Oct/12 04:41,14/Sep/18 12:39,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"There is no way to attach JVM weavers to the process started and so no way to hook the shutdown of the JVM.

The original issue was https://github.com/openengsb/labs-paxexam-karaf/issues/12",,pieber,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,249467,,,2012-10-18 04:41:30.0,,,,,,,"0|i0aeof:",58651,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
paxexam-karaf doesn't support to customize test probe,KARAF-1947,12612362,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,18/Oct/12 05:03,14/Sep/18 12:39,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"It is a common use case that we customize the test probe to add some resources files for testing. But current paxexam-karaf doesn't support it out of box.

The original issue was https://github.com/openengsb/labs-paxexam-karaf/issues/22",,pieber,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/12 05:06;pieber;FAILING_TEST_CASE.patch.txt;https://issues.apache.org/jira/secure/attachment/12549641/FAILING_TEST_CASE.patch.txt",,,1.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,249472,,,Thu Oct 18 05:06:16 UTC 2012,,,,,,,"0|i0aepj:",58656,,,,,,,,,,,,,,,,,"18/Oct/12 05:04;pieber;Thanks to [~njiang] for the failling test case. It might need some minor adaptions to the new namespaces, but should otherwise still ""work""","18/Oct/12 05:06;pieber;OK, I removed the file to make sure nobody thinks of it as a fix to the problem. it's only the test case showing it up, but NOT fixing it",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support to paxexam-karaf to support scanDir option for KarafTestContainer,KARAF-1945,12612358,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,18/Oct/12 04:43,14/Sep/18 12:39,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"It's often useful to include all the bundles which are located in the target directory into the integration tests. The easiest way to do this is to use scanDir provision option
{code}
scanDir(""target"").filter(""*.jar"")
{code}
Unfortunately, it does not supported by KarafTestContainer

The original issue was located at https://github.com/openengsb/labs-paxexam-karaf/issues/20",,pieber,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,249468,,,Thu Oct 18 04:44:03 UTC 2012,,,,,,,"0|i0aeon:",58652,,,,,,,,,,,,,,,,,"18/Oct/12 04:44;pieber;OK, that one is kind of tricky and requires kind of a bigger refactoring of the internal parts. It will be required to add the scanner packages, which would/should therefore also change the current way urls/links are handled. This should definitely simplify parts of the code. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support to paxexam-karaf for testng,KARAF-1943,12612356,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,18/Oct/12 04:40,14/Sep/18 12:39,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Add support for testng besides the current junit support.

The original issue was https://github.com/openengsb/labs-paxexam-karaf/issues/5",,pieber,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,249466,,,2012-10-18 04:40:15.0,,,,,,,"0|i0aeo7:",58650,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add ""conflicts"" configuration into features.xml",KARAF-368,12495142,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,10/Jan/11 16:35,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"I'm coding at pax-wicket right now and find the following ""problem"": 

In the following features.xml...

{code}
  <!-- Departmentstore example suite provided with paxwicket -->
  <feature name=""departmentstore"" version=""0.6.0-SNAPSHOT"">
    <feature version=""0.6.0-SNAPSHOT"">web</feature>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore/departmentstore-model/0.6.0-SNAPSHOT</bundle>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore.view/departmentstore-view-about/0.6.0-SNAPSHOT</bundle>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore.view/departmentstore-view-application/0.6.0-SNAPSHOT</bundle>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore.view/departmentstore-view-floor/0.6.0-SNAPSHOT</bundle>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore.view/departmentstore-view-franchisee/0.6.0-SNAPSHOT</bundle>
  </feature>
  <feature name=""departmentstore-basic"" version=""0.6.0-SNAPSHOT"">
    <feature version=""0.6.0-SNAPSHOT"">web</feature>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore/departmentstore-service-basic/0.6.0-SNAPSHOT</bundle>
  </feature>
  <feature name=""departmentstore-alternative"" version=""0.6.0-SNAPSHOT"">
    <feature version=""0.6.0-SNAPSHOT"">web</feature>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore/departmentstore-service-alternative/0.6.0-SNAPSHOT</bundle>
  </feature>
{code}

... I have the problem that both, departmentstore-basic and departmentstore-alternative depend on web AND departmentstore; but they ""conflict"" with each other. I know that we can't detect such a situation automatically BUT it would be cool to do something like the following

{code}
  <feature name=""departmentstore-basic"" version=""0.6.0-SNAPSHOT"">
    <feature version=""0.6.0-SNAPSHOT"">web</feature>
    <feature version=""0.6.0-SNAPSHOT"" conflicts=true>departmentstore-alternative</feature>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore/departmentstore-service-basic/0.6.0-SNAPSHOT</bundle>
  </feature>
  <feature name=""departmentstore-alternative"" version=""0.6.0-SNAPSHOT"">
    <feature version=""0.6.0-SNAPSHOT"">web</feature>
    <feature version=""0.6.0-SNAPSHOT"" conflicts=true>departmentstore-basic</feature>
    <bundle>mvn:org.ops4j.pax.wicket.samples.departmentstore/departmentstore-service-alternative/0.6.0-SNAPSHOT</bundle>
  </feature>
{code}

If I have departmentstore-basic install now and I do a...

{code}
feature:install departmentstore-alternative
{code}

...something like the following should happen automatically...

{code}
features:uninstall departmentstore-basic
features:install departmentstore-alternative
{code}

For one feature this is maybe trivial but think you 20 departmentstore implementations. This will require you to look up which is currently installed, uninstall it and then install the new one...

WDYT?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,68436,,,2011-01-10 16:35:33.0,,,,,,,"0|i1cifj:",281117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a KarafContainer similar to what we have with CamelContainer to start a karaf instance within a project and register components,KARAF-531,12502375,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,cmoulliard,cmoulliard,25/Mar/11 12:58,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Containers exist for a lot of different standards like EJB, JPA, Camel, Spring, Web and allow to provide a scope and a boundary for the project itself. Karaf does not provide this feature and in consequence reduce the possibilities in an integration test to test our bundles on Karaf. This is why I suggest that we create this container for testing purpose (at beginning) and could be extended to setup/configure the platform. This container will allow to proxy pax-exam(2) and facilitate the configuration of our tests using also karaf tooling helper class. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,68449,,,2011-03-25 12:58:30.0,,,,,,,"0|i1cijb:",281134,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support of snmp4j,KARAF-787,12515568,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,jgoodyear,jbonofre,jbonofre,27/Jul/11 19:54,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"Currently, the only way to monitor Karaf is using the JMX layer.

To be able to monitor Karaf using pure administration and monitoring tool (like Nagios for instance), it could be helpful to provide support of SNMP (at least as a bridge to the JMX layer).

snmp4j (http://www.snmp4j.org/) provides support of SNMP in Java.

It could be interesting to see if we can use snmp4j in Karaf to provide SNMP support.",,barthel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-07-27 20:35:10.149,,,false,,,,,,,,,,,,,,,,,,66739,,,Thu Oct 20 17:37:39 UTC 2011,,,,,,,"0|i1cimf:",281148,,,,,,,,,,,,,,,,,"27/Jul/11 20:35;jgoodyear;snmp4j is available from the following maven repo:
https://server.oosnmp.net/dist/release/org/snmp4j/snmp4j/1.11.3/","27/Jul/11 20:40;jgoodyear;A good tutorial on setting up a Linux server with SNMP support and Nagios to monitor the traps generated on said server:
http://assets.nagios.com/downloads/nagiosxi/docs/Monitoring_Linux_Using_SNMP.pdf","28/Jul/11 07:20;achim_nierbeck;it's always possible to use log4j as sender of snmp :-)
","28/Jul/11 07:26;jbonofre;I'm thinking more about a trap in Karaf, with a community publication :)","28/Jul/11 07:41;achim_nierbeck;yeah, just wanted to point out that it's already possible using log4j :-)","28/Jul/11 10:46;jgoodyear;It's also ASL 2.0, may be well worth looking into, thanks for the head's up Achim
http://code.google.com/p/log4j-snmp-trap-appender/","20/Oct/11 17:28;cschneider;We should also consider using the OSGi notification service:
http://www.osgi.org/javadoc/r4v42/info/dmtree/notification/NotificationService.html

As it is a standard other frameworks like Camel and CXF could also use it","20/Oct/11 17:37;jgoodyear;Added a discussion page to our wiki for collecting use cases around SNMP support.

https://cwiki.apache.org/confluence/display/KARAF/SNMP+Discussion",,,,,,,,,,,,,,,,,,,,,,,,,,,
Add subsystem support for applications deployment,KARAF-2283,12643826,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,21/Apr/13 16:38,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"With OSGi r5, and new Aries version, we have support of subsystems.",,earcam,jbonofre,menousek,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,324193,,,2013-04-21 16:38:49.0,,,,,,,"0|i1jxlb:",324538,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""Live Editing"" in OSGi with Karaf and EIK",KARAF-1255,12545841,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,pieber,pieber,09/Mar/12 13:13,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,3,gsoc2012,,,,"The base idea behind all of this is to have ""jrebel for osgi"". Which means you can life edit a class and the containing bundle should be automatically redeployed to the OSGi engine.

Karaf (and it's related projects) provide interesting features like ""dev:watch"" and exploded bundles which could in theory allow automatic redeployment of bundles you're editing in; the moment you save a class in eclipse.

There are various possibilities how this could be implemented. The most interesting solution is one which works (a) fast and (b) could be integrated into every IDE.",,alexey_r,asookazian,jbonofre,ntanh1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-03-09 13:15:51.6,,,false,,,,,,,,,,,,,,,,,,231024,,,Mon Jun 08 21:50:23 UTC 2015,,,,,,,"0|i1cj87:",281246,,,,,,,,,,,,,,,,,"09/Mar/12 13:15;jbonofre;+1","14/Mar/12 16:37;pkriens;Please take a look at bndtools","14/Mar/12 18:20;pieber;@bndtools: I did so and gave it a look.

Basically good approach. Though, I'm missing the following points:

(a) maven integration
(b) karaf integration

Maybe it's ""enough"" to add EIK and m2e support (well, this will still be more than enough work for gsoc I think)","14/Mar/12 18:42;jbonofre;bndtools looks really interesting but I'm agree with Andreas.

Why having a bndtools integration in EIK ? It could be cool ;)","06/Apr/12 18:30;alexey_r;I would like to see that as well :)","08/Jun/15 21:50;asookazian;+1, when will this feature be prioritized for dev/test/release?

I've used JRebel in the past with JBoss and it's a very useful tool (javaagent) for maximizing productivity.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"provide MBean access to the spring, blueprint (& one day CDI) status of bundles",KARAF-1501,12557454,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jstrachan,jstrachan,24/May/12 14:47,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"Right now the BundleStateMBean.listBundles() MBean method returns pretty much all the status and fields of the bundles - apart from the spring/blueprint/cdi status (as shown with osgi:list for example).

We either need a new MBean - or to expose these extra fields in the BundleStateMBean.listBundles() MBean method call too.",,jstrachan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,308526,,,2012-05-24 14:47:46.0,,,,,,,"0|i1cjfj:",281279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add timestamp of the artifact (bundle/feature/config) deployment,KARAF-3872,12846905,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,22/Jul/15 14:21,14/Sep/18 08:35,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"For instance, with bundle, when using SNAPSHOT, we don't really know what artifact we deployed: it could be different from the actual location. So bundle:update will update the bundle from the location.
It would be great to have the timestamp of the deployed artifact to see if the ""latest"" one or not.",,dvdgsng,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2015-07-22 14:21:49.0,,,,,,,"0|i2hk27:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate a licenses usage report,KARAF-4734,13007625,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jeanphi,jeanphi,26/Sep/16 16:24,26/Sep/16 16:24,17/Feb/21 11:13,,4.0.6,,,,,,,,,,,,1,,,,,"We build our applications using the Karaf Maven plugin. Each application has an assembly which uses ad'hoc features.

We would like to have a way to find out all the licenses used for an application (including Karaf ones).

At present time we manually create a fake Maven project with a pom which has all dependencies of the application features. Then we use project-info-reports:dependencies on that fake project.

Could also be useful to generate that pom automatically from the features in order to execute whatever useful plugin.",,jeanphi,sebas10000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2016-09-26 16:24:49.0,,,,,,,"0|i34367:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
custom.properties should have option to add system packages *without* overriding defaults,KARAF-4689,13001794,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,thully,thully,31/Aug/16 19:09,16/Sep/16 05:58,17/Feb/21 11:13,,3.0.8,4.0.6,,,,,,,,,,,0,,,,,"In custom.properties, we can specify a value for org.osgi.framework.system.packages.extra to add our own system packages above and beyond those in the default Karaf distribution. However, by using this option we override the default value in config.properties. Could a new option be added that would add additional packages for a custom distribution without overriding the default? It seems clumsy to have to copy all the default packages from config.properties to custom.properties...",,jbonofre,shyrkov,thully,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-09-16 05:58:41.752,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Sep 16 05:58:41 UTC 2016,,,,,,,"0|i33393:",9223372036854775807,,,,,,,,,,,,,,,,,"16/Sep/16 05:58;jbonofre;I will try but in a {{custom.properties}} property, you can use value from another property, as we do for {{jre}}.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide Decanter ActiveMQ Logging Interceptor collector,KARAF-3902,12852268,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jbonofre,jbonofre,05/Aug/15 15:35,19/Oct/15 07:46,17/Feb/21 11:13,,,,,decanter,,,,,,,,,0,,,,,It would be great to provide a Decanter ActiveMQ Logging Interceptor (http://activemq.apache.org/logging-interceptor.html) collector. It will collect ActiveMQ events and send to the Decanter appenders/SLA checker.,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Oct 19 07:46:29 UTC 2015,,,,,,,"0|i2id9r:",9223372036854775807,,,,,,,,,,,,,,,,,"19/Oct/15 07:46;jbonofre;We can use the loggingBrokerPlugin with the decanter-collector-log. As for CXF, I will provide an alternative providing a native ActiveMQ Decanter plugin to send directly to the dispatcher.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add annotation based security to the Karaf role based security framework,KARAF-2570,12678738,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,cschneider,cschneider,12/Nov/13 07:28,16/Jun/15 15:49,17/Feb/21 11:13,,3.0.0.RC1,,,,,,,,,,,,1,,,,,Allow the usage of Annotations like @RolesAllowed to protect services.,,cschneider,mansour,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2015-06-16 07:48:42.424,,,false,,,,,,,,,,,,,,,,,,358105,,,Tue Jun 16 15:49:27 UTC 2015,,,,,,,"0|i1pqe7:",358395,,,,,,,,,,,,,,,,,"16/Jun/15 07:48;mansour;not sure if this is done directly in Karaf, or through OpenJPA. ","16/Jun/15 07:59;cschneider;Why do you think openjpa would be a good match. Btw. I agree that we maybe should not do it in karaf.","16/Jun/15 08:12;mansour;Sorry, I mean OpenEJB, but by mistake wrote OpenJPA.

OpenEJB has support for role base security already. Personally, when I
am developing, I use either spring or OpenEJB for DI, scope
management, security , transaction management .... etc.
So a lot of this funcitonality is offered by external containers, and
the skills available for these containers is high compared to karaf.
If it is my call, I will spend the resources maintaining the
integration with other containers, rather than trying to duplicate all
these functionality.
I would focus on getting Karaf to play nicely with enterprise
technologies. That's all.

So to answer your question, scoping is the answer !
I can not recall if the latest OpenEJB supported by karaf (4.5.2) has
role based security.




On Tue, Jun 16, 2015 at 12:00 PM, Christian Schneider (JIRA)
","16/Jun/15 14:44;cschneider;I already added authorization support to blueprint.

So doing the same for the CDI containers makes sense. For karaf I think this would mean the pax-cdi integration. So the containers would be openwebbeans and weld.
I am not sure if they already support authorization but it would be great if it works and is well integrated with karaf.","16/Jun/15 15:49;cschneider;I already added authorization support to blueprint.

So doing the same for the CDI containers makes sense. For karaf I think this would mean the pax-cdi integration. So the containers would be openwebbeans and weld.
I am not sure if they already support authorization but it would be great if it works and is well integrated with karaf.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Support Eclipse p2 repositories, feature.xml, .target platforms.",KARAF-941,12527394,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,idcmp,idcmp,17/Oct/11 05:35,31/May/15 16:05,17/Feb/21 11:13,,2.2.3,,,,,,,,,,,,5,eclipse,gsoc2012,,,"Unless I'm mistaken Karaf would turn instantly into a powerhouse if it could leverage Eclipse' p2 abilities.  Specifying a p2 repository and handing Karaf an Eclipse feature.xml file (or the URL to a jar with a feature.xml in it) and/or a .target file would make for amazing deployment integration.
",,maurice_71,setya,shomeier,snowch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-10-18 09:36:51.994,,,false,,,,,,,,,,,,,,,,,,87575,,,Tue Oct 18 09:36:51 UTC 2011,,,,,,,"0|i1ciuv:",281186,,,,,,,,,,,,,,,,,"18/Oct/11 09:36;jbonofre;It sounds good. I think that we will need to enhance some Pax * project to leverage p2 abilitie, and the Karaf features service to support Eclipse feature.xml.
The Kar deployer/service should also be enhance to be able to lookup jar file containing Eclipse feature.xml file).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Capability to alter versions in features and bundles,KARAF-1497,12556982,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,raulvk,raulvk,23/May/12 11:24,24/May/12 04:11,17/Feb/21 11:13,,2.2.7,,,,,,,,,,,,1,,,,,"OSGi offers a solid solution to the legendary problem of {{dependency hell}} in Java, through the use of explicit version numbers and version ranges in MANIFESTs.

Unfortunately, it requires a lot of developer re-education to understand how to use version ranges their library bundles. It's common to find bundles with too narrow version ranges or fixed version numbers. In the real world of Open Source, not everyone is fully conscious of OSGi concepts and the impact of version numbers.

The maven-bundle-plugin expresses imports with version ranges by default, which takes much of the problem away.

In practice, we may know that a bundle X even though importing package A with fixed version 1.2, it will work reliably with version 1.3 of package A. Right now, I think that our only way out is to repackage the bundle altering the MANIFEST.

It'd be neat if Karaf provides functionality to *alter/re-adjust/correct* version definitions for package imports in bundles.

Moreover, we should be able to alter versions in bundle and feature references from within Karaf features.

The latter helps tremendously in the inter-connected world of Open Source, where, for example, Camel and AMQ are using one another, are grouped in ServiceMix and CXF also uses them!

Imagine the following scenario, testing Camel 2.10-SNAPSHOT on Karaf (provided that the correct feature repos are registered):

{code}
> feature:install camel/2.10-SNAPSHOT
> feature:install activemq/5.6.0
> feature:install activemq-camel/5.6.0
{code}

The last instruction complains that camel-jms/2.9.2 is not found. Wouldn't it be awesome if the user could alter the feature definition from within the shell to reference camel-jms/2.10-SNAPSHOT, instead of tampering with the local features descriptor and refreshing it?

In my head, the command would look like:

{code}
> feature:edit activemq-camel/5.6.0
> feature:version-alter --feature camel-jms [2.9.2,2.10]
> feature:update
{code}

(resembling the config shell constructs)
",,davsclaus,raulvk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2012-05-24 04:08:19.721,,,false,,,,,,,,,,,,,,,,,,308527,,,Thu May 24 04:11:31 UTC 2012,,,,,,,"0|i1cjfr:",281280,,,,,,,,,,,,,,,,,"24/May/12 04:08;davsclaus;Yeah it also seems like the activemq-camel feature file, should be [2.9,3) in the version range. 
http://search.maven.org/remotecontent?filepath=org/apache/activemq/activemq-karaf/5.6.0/activemq-karaf-5.6.0-features.xml

","24/May/12 04:11;davsclaus;I logged AMQ-3859",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need a new system bundle to load up a set of pair of keystore/trustore via <jaas:config>,KARAF-738,12514310,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,danttran,danttran,16/Jul/11 06:52,14/May/12 16:03,17/Feb/21 11:13,,2.2.2,,,,,,,,,,,,3,,,,,details discussion is here http://karaf.922171.n3.nabble.com/Proposal-Need-a-new-system-bundle-to-load-up-a-set-of-pair-of-keystore-trustore-via-lt-jaas-config-g-td3174148.html,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,KARAF-541,,,,,,,,,,,,,,,,,,,,,,"17/Jul/11 20:48;danttran;keystores.zip;https://issues.apache.org/jira/secure/attachment/12486777/keystores.zip",,,1.0,,,,,,,,,,,,,,,,,,,,2011-07-16 07:15:13.083,,,false,,,,,,,,,,,,,,,,,,67765,,,Mon Jul 18 01:42:35 UTC 2011,,,,,,,"0|i1ciov:",281159,,,,,,,,,,,,,,,,,"16/Jul/11 07:15;pieber;+1; tbh I have a requirement right now where I will need exactly this feature :)","16/Jul/11 07:18;jbonofre;It makes sense for me. We just have to keep in mind that it should be fully configurable and flexible.","16/Jul/11 18:00;danttran;instead of creating a brand new system bundle, does it make sense to just load the desired keystores under o.a.k.jaas.cfg?","17/Jul/11 20:51;danttran;I attached the initial implementation ( keystores.zip). What missing are  to add this bundle to startup.properties together to jaas bunbles.  and the karaf assembly need a pair of default key and trustore","17/Jul/11 23:17;danttran;there seems to a race condition where karaf's management bundle seems not able to detect the keystores created by the new proposed system bundle. However If I debug management bundle at startup, it works. 

So how do I can make sure management bundle to start only after new propposed system bundle completes its initialization?","18/Jul/11 01:42;danttran;by putting management's init into sleep for 5 sec.  It works. So there is definitely a race condition",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate Karaf and GlassFish,KARAF-927,12526643,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,jeanphi,jeanphi,11/Oct/11 10:55,26/Oct/11 15:36,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"Integrate Karaf and GlassFish to merge best of both worlds, best OSGi base + JavaEE = KarafEE :)",,iocanel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-10-11 11:03:47.94,,,false,,,,,,,,,,,,,,,,,,59108,,,Wed Oct 26 15:36:22 UTC 2011,,,,,,,"0|i1civb:",281188,,,,,,,,,,,,,,,,,"11/Oct/11 11:03;gnodet;I'd think that's exactly the goal of Geronimo, so I'm not sure we want to redo the work in Karaf.","11/Oct/11 11:11;jbonofre;The idea of KarafEE is really interesting. But, as Guillaume said, an alternative already exists with Geronimo. Geronimo already uses Karaf to provide Java EE application server.

However, on the same area, TomEE (Tomcat + OpenEJB) is an alternative to Geronimo.

So, why not integrate parts of Glassfish as Karaf enterprise features/profile to provide KarafEE.

Maybe we can start a discussion on dev mailing list.","11/Oct/11 11:26;jeanphi;Geronimo 3 is JavaEE6 compliant. Is it clustered? Does it have all nice web configuration and features of GlassFish?

But the problem is more than, for several reasons, GlassFish might me chosen. GlassFish is Open Source too and there is no obvious reason why Karaf should avoid integration with it. Karaf isn't tied to Geronimo isn't it?

So, why not using Geronimo experience to push Karaf to another JavaEE implementation?","18/Oct/11 09:09;iocanel;Karaf is not tied to Geronimo. Geronimo uses Karaf, but Karaf does not use parts of Geronimo.
I am not sure what you mean by integrate Karaf with Glassfish. The only combination I can think of is running Glassfish on top of Karaf, which should be quite fun. Could you please tell us a bit more about what you have in mind?","18/Oct/11 10:37;jeanphi;What I have in mind is to have both, no matter technical aspect.

Now, on the technical aspect, it seems better to have GlassFish running on top of Karaf as you said. GlassFish runs by default over Felix. It can also run over Equinox. So, let's run it over Karaf :)","26/Oct/11 15:17;iocanel;I like the idea, however I think that this is out of Karaf scope, since the target is to have Glassfish use Karaf and not the other way around.
By that I mean that it should be implemented either at the Glassfish side or as an external project. I would gladly help on any of these approaches.","26/Oct/11 15:36;jeanphi;Great!

It is a bit out of scope, but not that much. It seems there is a bootstrap mechanism for Felix/Equinox to run GlassFish in.

Why not creating this bootstrap for Karaf?",,,,,,,,,,,,,,,,,,,,,,,,,,,,
A better 'feature-assembly' plugin,KARAF-165,12472507,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,adrian.trenaman,adrian.trenaman,adrian.trenaman,25/Aug/10 17:42,08/Dec/10 10:16,17/Feb/21 11:13,,2.1.0,,,,,,,,,,,,5,,,,,"

Create an improved Maven feature-assembly plugin. Right now, to make a feature I've got to add almost a hundred lines of Maven verbage to my pom.xml in order to assemble a feature. I've got to use the attach-artifact goal of the org.codehaus.mojo/build-helper-maven-plugin to deploy my features file into Maven. I've got to use the add-features-to-repo goal from the org.apache.karaf.tooling/features-maven-plugin to suck down all the dependent bundles. I've got to a whole load of other stuff to perform the packaging to .tar.gz and .zip. The problem here is that I'm using a whole load of generic plugins to do a very specific job, and I'm having to tell the plugins what to do instead of telling them what I want done. I'd prefer to have a single more declarative plugin to do this. It might look like this:  

{code:xml}
			<plugin>
				<groupId>org.apache.karaf.tooling</groupId>
				<artifactId>feature-assembly-plugin</artifactId>
				<version>2.2.0</version>
				<executions>
					<execution>
						<id>create-repo</id>
						<phase>generate-resources</phase>
						<goals>
							<goal>create-repo</goal>
						</goals>
						<configuration>
							<!-- Specify the feature file to use. -->
							<featureFile>file:${basedir}/target/classes/features.xml</featureFile>
	
							<!-- Specify what features to include. This is actually optional: if no features
								are specified, then include all features in the file by default. --> 
							<features>
								<feature>feature-a</feature>
							</features>
						</configuration>
					</execution>
				</executions>
			</plugin>
{code}

The plugin should produce a .tar.gz and .zip file, containing the feature descriptor (and all dependent descriptors) and all bundles (and dependent bundles)in a Maven-style directory, similar to the system/ directory currently used in Karaf. Note that this plugin doesn't need you to list out all the feature repositories / descriptors that your feature file may transitively include - it will detect these dependencies at runtime and work out the details.",,cjmayoral,scott.oster,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2010-08-27 05:28:25.251,,,false,,,,,,,,,,,,,,,,,,146519,,,Wed Dec 08 10:16:20 UTC 2010,,,,,,,"0|i1cicv:",281105,,,,,,,,,,,,,,,,,"27/Aug/10 05:28;cmoulliard;Hi Ade,

Is this maven plugin not doing what you want -->

{code}
            <plugin>
                <groupId>org.apache.karaf.tooling</groupId>
                <artifactId>features-maven-plugin</artifactId>
                <version>${karaf.version}</version>
                <executions>
                    <execution>
                        <id>add-features-to-repo</id>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>add-features-to-repo</goal>
                        </goals>
                        <configuration>
                            <descriptors>
                                <descriptor>mvn:org.apache.karaf/apache-karaf/${karaf.version}/xml/features</descriptor>
                                <descriptor>mvn:org.apache.servicemix.nmr/apache-servicemix-nmr/${servicemix.nmr.version}/xml/features</descriptor>
                                <descriptor>file:${basedir}/target/classes/camel-features.xml</descriptor>
                                <descriptor>file:${basedir}/target/classes/ode-features.xml</descriptor>
                                <descriptor>file:${basedir}/target/classes/features.xml</descriptor>
                            </descriptors>
                            <features>
                                <feature>jbi-cluster</feature>
                                <feature>web</feature>
                                <feature>cxf-nmr</feature>
                                <feature>cxf-osgi</feature>
                                <feature>camel-activemq</feature>  
                                <!-- ServiceMix components -->
                                <feature>servicemix-cxf-bc</feature>
                                <feature>servicemix-file</feature>
                                <feature>servicemix-ftp</feature>
                                <feature>servicemix-http</feature>
                                <feature>servicemix-jms</feature>
                                <feature>servicemix-mail</feature>
                                <feature>servicemix-bean</feature>
                                <feature>servicemix-camel</feature>
                                <feature>servicemix-cxf-se</feature>
                                <feature>servicemix-drools</feature>
                                <feature>servicemix-eip</feature>
                                <feature>servicemix-osworkflow</feature>
                                <feature>servicemix-quartz</feature>
                                <feature>servicemix-scripting</feature>
                                <feature>servicemix-validation</feature>
                                <feature>servicemix-saxon</feature>
                                <feature>servicemix-wsn2005</feature>
                                <feature>servicemix-snmp</feature>
                                <feature>servicemix-vfs</feature>
                                <feature>servicemix-smpp</feature>
                            </features>
                            <repository>target/features-repo</repository>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

{code}","27/Aug/10 05:33;cmoulliard;To be complete, we need also this property in the plugin

 <repository>target/features-repo</repository> ","27/Aug/10 05:55;adrian.trenaman;This plugin is just the start of what I would like to see. Right now, the current feature has the following problems: 

* You've got to recursively figure out the repositories and then add them as descriptors to this plugin configuration
* You've got to list all the features you want incuded
* You've got to specify the target repository (I'd prefer a well known name or convention)
* This plugin will put all the bundles in the target repository, but not the features file itself!
* This plugin doesn't go the full distance and create a .tar.gz and .zip file, with the contents of the XML files suitably transformed for Linux/Windows ending.

As a result, you end up having to do a lot of work by hand in the POM (almost 100 lines of Maven) in order to create an assembly. I'm raising this issue because I think that this plugin could be a lot smarter, and do more, for less! ","27/Aug/10 09:33;cmoulliard;Hi Ade,

* You've got to recursively figure out the repositories and then add them as descriptors to this plugin configuration
* You've got to list all the features you want incuded
>>> Using recursion is interesting but means also that all the features defined in a feature file will be added even if you don't want them. Sometimes, a feature file refers to another feature repository and can potentially create cycling dependency (In this case, this is not important I think).

* You've got to specify the target repository (I'd prefer a well known name or convention)
>>> What do you want to do which is not implemented in the existing karaf tooling plugin (target repo can be what you want --> target/myProject) ?

* This plugin will put all the bundles in the target repository, but not the features file itself!
>>> This is a bit ""tirer par les cheveux"" but you can add the feature file in the feature file like this :

    <feature name=""karaf-features"" version=""2.0.0"">
        <bundle>mvn:org.apache.karaf/apache-karaf/2.0.0/xml/features</bundle>
    </feature>

and call using the maven plugin the feature --> <feature>karaf-features</feature>

Regards,

Charles ","27/Aug/10 13:10;adrian.trenaman;Thanks for the input Charles! 

I actually do want to be able to recursively pull down whatever dependencies I need: I just want to pull down the features in my own feature file, and then just dependent features from any other repositories. So, if I have a camel route in a bundle that needs camel-core and camel-jms, then I'd like to pull down these features as well with ease. 

I get your point that, right now, I have full control over naming my repository. Thing is, my goal is to make this REALLY SIMPLE. So, if we can get away without having to ask that the developer makes a decision about naming, but instead uses a well known convention by default, then I'm all for it. 

Love the hack about adding the feature repository as a feature! Still though, for me, it is a hack and our user shouldn't have to do it. 

Please understand my motivations. I know that right now I can do everything I want to with a whole load of Maven plugins! That's exactly the problem though: I just want this assembly packaging to be easier, and not require screenfuls of Maven to acheive.  
","08/Dec/10 06:44;pieber;ok, the name of this issue is quite general but the specific request is already fixed, isn't it?","08/Dec/10 10:16;adrian.trenaman;As far as I know, this has not yet been fixed - we still have to do tons of Maven verbage to create zipped up features repositories. A related issue around the ability to deploy Karaf Archives has been done (I did the code back in late September); however, we still should get this plugin in place.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ability to create a master / slave configuration at the container level (pointing to the same data dir) using the admin shell,KARAF-25,12424075,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,28/Apr/09 18:06,28/Jun/10 09:56,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,146484,,,2009-04-28 18:06:46.0,,,,,,,"0|i1ci8n:",281086,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Enhance features maven plugin to support deployment / undeployment of features, html generation and create a few archetypes",KARAF-23,12424057,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Major,,,gnodet,gnodet,28/Apr/09 16:16,28/Jun/10 09:56,17/Feb/21 11:13,,,,,,,,,,,,,,3,,,,,"Enhance the features maven plugin (http://svn.apache.org/repos/asf/servicemix/maven-plugins/features-maven-plugin) to support :

1) Deployment / undeployment of features,
2) Generate html page about features : see http://fusesource.com/forums/message.jspa?messageID=2005#2005 for the suggestion
3) Creation a few archetypes:

    * one for creating a custom smx kernel distribution + a set of
      features (like what we do for our distributions).
    * one for creating a feature descriptor automatically generated
      using the maven plugin we already have + upload in the maven repo. Ideally, the descriptor should be created from the user pom.xml profile file or (pom.xml files if the user has created a parent pom.xml with modules)
    * one for creating a manually written feature descriptor + upload in
      the maven repo

The two last archetypes should reference our maven plugin so that they
could be easily installed / uninstalled to a running (or not) smx4
kernel instance using maven.

Remark : this ticket has been created following discussions exchanged in the forum of SMX : http://www.nabble.com/forum/ViewPost.jtp?post=22285345&framed=y",,cathodion,scott.oster,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,146482,,,Tue Apr 28 16:23:27 UTC 2009,,,,,,,"0|i1ci8v:",281087,,,,,,,,,,,,,,,,,"28/Apr/09 16:23;gnodet;Edell Nolan:

I have been working on creating an archetype to generate a feature descriptor automatically if you add in dependencies into a pom.xml file - our maven features plugin does this already and I have the archetype working. But I have a question around having multiple pom.xml files in that you have a root pom and serveral modules. if you then attempt to run this from the root - I get the impression you are looking for a features.xml file that would have covered all the module poms.xml files. so that it will add the features for all dependencies in all the sub modules

Is this the case ? or should it be that you just generate the features.xml for each module individually ?

============
Charles Mouillard:

Personally, I prefer to have one feature file generated when we have a parent pom with several slave pom (= modules). 

============
Guillaume Nodet:

I'm not sure that this is a good idea to generate the features file from the parent pom in case you have modules that are not really part of the feature, like an assembly of something like that.

============
Edell Nolan:

I was thinking about this a little more and I think it should just be based on one feature.xml file per pom.xml with its dependencies.
You can always have one directory that will list all your dependencies and use this to create your features.xml file.

I will get this in today hopefully.

============
Charles Mouillard:

Most of the time, when you work on a OSGI project, you will create in eclipse several eclipse projects, one by bundle. So, it makes sense to create a parent pom pointing to the different modules / bundles and to have one global features file.

Here is an example of what I do manually to deploy all my bundles :

<features>
<feature name=""reportincident"" version=""1.0"">
<feature>camel-core</feature>
<feature>camel-spring</feature>
<feature>camel-osgi</feature>
<feature>camel-bindy</feature>
<feature>server</feature>
<bundle>mvn:org.apache.camel.example/reportincident.domain/1.0-SNAPSHOT</bundle>
<bundle>mvn:org.apache.camel.example/reportincident.service/1.0-SNAPSHOT</bundle>
<bundle>mvn:org.apache.camel.example/reportincident.interfaces/1.0-SNAPSHOT</bundle>
</feature>

reportincident.domain = maven project = bundle = eclipse project

===============
Edell Nolan:

Ok The way this currently works is that you would have one pom that would list dependencies on

camel-core, camel-spring etc so this will generate your features.xml file - Also if you wish - it will indicate what other bundles it requires for classes that you may have not depended on and you can supply this list in a properties file so it will include dependent bundles for you as well.

I will do up an example: that we did for our distribution of camel in servicemix. 

===============
Edell Nolan:

Attaching a patch - you will need the latest of the features maven plugin or change the version in the generated pom
It depends on

<features.maven.plugin.version>1.1-SNAPSHOT</features.maven.plugin.version>
<servicemix.kernel.version>1.1.0-SNAPSHOT</servicemix.kernel.version>

Example here : if you run

Step1 :
C:\edell-features>mvn archetype:create -DarchetypeGroupId=org.apache.servicemix.tooling -DarchetypeArtifactId=servicemix-features-descriptor -DgroupId=org.apache.servicemix.edell -DartifactId=org.apache.servicemix.testCamel.features -DarchetypeVersion=2008.01-SNAPSHOT -DremoteRepositories=REPO_LOCATION

This will generate the following directory structure

org.apache.servicemix.testCamel.features
-> pom.xml
-> src/main/resources/bundle.properties

If you run mvn install => this will result in a features.xml file with nothing in it.

<?xml version=""1.0"" encoding=""UTF-8""?>
<features>
</features>

Step 2:
Your next step is to add your dependencies into the pom.xml file
so if I added

<dependencies>
<dependency>
<groupId>org.apache.camel</groupId>
<artifactId>camel-core</artifactId>
<version>1.5.0</version>
</dependency>
</dependencies>

This will result in target/classes/feature.xml file

<?xml version=""1.0"" encoding=""UTF-8""?>
<features>
<feature name='camel-core'>
<bundle>mvn:org.apache.camel/camel-core/1.5.0</bundle>
</feature>
</features>

But it will also hint in the output about dependant bundles

eg.
[WARNING] Unable to find suitable bundle for dependency javax.activation (0.0.
0) (required by camel-core)
[WARNING] Unable to find suitable bundle for dependency javax.xml.bind (0.0.0)
(required by camel-core)
[WARNING] Unable to find suitable bundle for dependency javax.xml.bind.annotat
ion (0.0.0) (required by camel-core)

Step 3:

You can add the dependant bundles to your bundle.properties file

So you get a resulting feature.xml file

<?xml version=""1.0"" encoding=""UTF-8""?>
<features>
<feature name='camel-core'>
<bundle>mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.jaxb-api-2.1/1.2.0</bundle>
<bundle>mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.activation-api-1.1/1.2.0</bundle>
<bundle>mvn:org.apache.camel/camel-core/1.5.0</bundle>
</feature>
</features>

================
Edell Nolan:

You need to apply the patch to the servicemix-archetypes project. 

================
Charles Mouillard:

Many thanks. I will try to have a look this afternoon or tomorrow. 

================
Edell Nolan:

I am going to create sub-tasks for each of the above archetypes etc 

================
Charles Mouillard:

Question : Do you filter the dependencies when generating the feature.xml to allow add the dependencies with scope = runtime ? It makes no sense to put in the feature file dependency only used for testing, by plugin and only compilation ?

================
Charles Mouillard:

Hi Edell,

How can I test on my PC the patch ? 

================
Edell Nolan:

Hi,

You need to apply this patch to the latest of Servicemix archetypes => https://svn.apache.org/repos/asf/servicemix/archetypes/trunk

You may also need to do an update to the plugins as I fixed one/two bugs for NPE in the features plugin.

Then attempt to create an archetype like I have described above - this patch curently only goes as far as generating your features.xml file.

For the uploading - which is really installing everything in the features.xml - I am currently working on this part.

Does this help ?

Edell.

==============
Charles Mouillard:

I hope. I thought that the patch should be applied here : http://svn.apache.org/repos/asf/servicemix/maven-plugins/features-maven-plugin. I will add it to where you propose and test.

Can you answer to my previous question : Do you filter dependencies .... ?

==============
Edell Nolan:

Hi,

No it doesn't appear to scope=runtime - I will look into this.

Edell.

==============
Charles Mouillard:

Edell,

The level of the packaging of the pom.xml created is pom. Is it correct or should it be bundle ?
By the way, it should be interesting to add directly the maven-felix plugin in the pom because the code generated will be deployed as a bundle in SMX 

==============
Charles Mouillard:

Edell,

It should be interesting that the plugin works also with pom where <module> are defined.

This could be very helpful because the feature file generated could be the sum of the features file created for each pom sub-project. Therefore, we have only one file to use to deploy our application containing different bundles (dao, domain, services, web, ...

Name of the project : ReportIncident (= parent pom)
module : dao
module : domain
module : service

For each module, we have a feature file.

When we launch mvn install (parent pom), the report incident feature file is generated and contains :

<features
<feature name='dao'/>
<feature name='domain'/>
<feature name='service'/>

<feature name='dao version='A.0-SNAPSHOT'>
<bundle>mvn:org.apache.camel.example/reportincident.dao/1.0-SNAPSHOT</bundle>
<bundle>mvn:org.apache.camel/camel-core/1.6.0</bundle>
<mvn: .....>
</feature>

...

</features>",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move guacamole-auth-json into the main project.,GUACAMOLE-1218,13341827,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,mjumper,grintor,grintor,20/Nov/20 17:42,11/Feb/21 18:46,17/Feb/21 11:13,,,,1.4.0,Documentation,guacamole-client,,,,,,,,1,,,,,"guacamole-auth-json is so nice! I started to dump some major time into starting to develop a custom auth extension which would have ended up as basically this but worse, only to stumble across it just in time. Why not distribute it as a binary and document it on the website with the other first-class citizen extensions? ",,grintor,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-11-20 17:44:49.145,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Jan 05 18:34:06 UTC 2021,,,,,,,"0|z0ksoo:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Nov/20 17:44;vnick;[~grintor]: I'm in favor of this. I'm not sure if [~mjumper] has a particular reason for keeping it separate at this point, but it seems like many people have started to find it useful and contribute to it.","20/Nov/20 19:26;mjumper;I don't think there's any reason on the Glyptodon side why we wouldn't do this, and I seem to remember there being an older JIRA issue for doing just that. I'll bring it up internally and (presumably) open a PR.

There was a very recent contribution to guacamole-auth-json which could complicate things, as the guacamole-auth-json extension is currently MIT-licensed. Glyptodon certainly can agree to donate things over as Apache-licensed, but I think we'll have to reach out to that contributor to make sure he agrees that his contribution can go the same route.","20/Nov/20 19:58;mjumper;I've found the old JIRA issue: https://jira.glyptodon.com/browse/GUAC-1482 (""Discuss (and possibly merge) encrypted HMAC-driven authentication extension"")

There was no reason cited _not_ to do this. The issue was simply closed as a part of the JIRA cleanup when the overall Guacamole project initially moved from Glyptodon to Apache, and from then on was just off the radar.

Just finished discussing this on the Glyptodon side and there are no objections to moving forward. I think we just need to sign a software grant, send that in to the ASF, and open a PR. For the sake of simplicity, we should probably do that with the version of the code just prior to the contributor PR that I mentioned earlier, and then ask that said contributor re-contribute that PR against the guacamole-client version of the source tree.","05/Jan/21 16:34;grintor;I'm glad you agree. I see the recent contributor you mentioned; Bojan Zelic. Were you able to get in touch with them? If not, I can try to reach out.","05/Jan/21 18:34;mjumper;Yes, all that has moved forward without issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for RDP touch events (RDPEI),GUACAMOLE-1204,13338288,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,mjumper,jackconiunctio,jackconiunctio,01/Nov/20 11:02,06/Feb/21 21:37,17/Feb/21 11:13,,,,,Documentation,guacamole-common-js,libguac,RDP,,,,,,0,,,,,"When connecting to an RDP server using Guacamole on a touch-enabled device, touch events are translated into mouse events according to the selected mouse emulation mode. This is intentional, but could be improved for those RDP servers that support touch events by adding support for the RDPEI channel.

The RDP protocol has specific support for multi-touch events via RDPEI. Adding support for this channel would allow Guacamole to pass through client-side touch events, allowing normal and direct touch interaction with remote applications that support touch.",,jackconiunctio,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-11-01 18:06:36.533,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Nov 02 12:47:29 UTC 2020,,,,,,,"0|z0k6uw:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Nov/20 18:06;mjumper;{quote}
... a Android Tablet with the latest version of the os ...
{quote}

What specific tablet, what specific version of the OS, what browser, and what specific version of that browser?

{quote}
I studied the Mouse.js file, made some changes, but still no effect.
{quote}

What changes and why did you try making them?

{quote}
How to solve this?
{quote}

That will depend on what is happening here, assuming there is a bug. Testing myself on an Android device, things appear to be working correctly: I can pan and zoom around the display as normal, tap to click, etc. That said, I'm not sure I understand what you are trying to do and what you are expecting to happen when you do it.

What do you mean by ""no panning, no swiping""? You are touching the screen and expecting the Guacamole display to pan around? Or you are expecting that behavior from applications _within_ the remote desktop?","01/Nov/20 19:17;jackconiunctio;Hi Mike, thank you for replying. Sorry that I wasn't clear at the start of this topic.

Specific tablet:: Samsung Galaxy Tab S6 SM-T860
Specific version of the OS: Android 10, Kernel 4.14.117-19479728
Browser: Chrome
Version of Chrome: 86.0.4240.110

This is what I changed in Mouse.js

788 /**
 789 * Whether a gesture is known to be in progress. If false, touch events
 790 * will be ignored.
 791 *
 792 * @private
 793 */
 794 var gesture_in_progress = true;

I altered the value 'false' into 'true'. Expected that it wouldn't ignore the touch events anymore.

I set up this guacamole server to connect to my ubuntu desktop (20.10-01 LTS with Mate as window manager) with XRDP . With the RD client app provided bij the Play store the connection is just what it has to be. When I use Guacamole to connect it is not. 
In this desktop I intend to visit my serverpage with the Chrome browser in kiosmode, Actually, I configured the session with an auto startup of the webpage (Moodle) in kiosmode. Then it looks like a normal page. There is just a huge difference between the usual way of scrolling and moving the page (like with the RD client), I can't move the page with my fingers, like an average webpage does on my tablet. When I use the keyboard and mouse there are no limitations, everything works fine, except for the touchscreen. Is this more clear to you?

 ","01/Nov/20 20:42;mjumper;{quote}
I altered the value 'false' into 'true'. Expected that it wouldn't ignore the touch events anymore.
...
In this desktop I intend to visit my serverpage with the Chrome browser in kiosmode, Actually, I configured the session with an auto startup of the webpage (Moodle) in kiosmode. Then it looks like a normal page. There is just a huge difference between the usual way of scrolling and moving the page (like with the RD client), I can't move the page with my fingers, like an average webpage does on my tablet. When I use the keyboard and mouse there are no limitations, everything works fine, except for the touchscreen. Is this more clear to you?
{quote}

I think there is a misunderstanding here with respect to touch events. Within the remote desktop session, everything is still a mouse. There are no touch events as far as the remote desktop session is concerned. This is not because a flag is set that tells Guacamole not to pass through touch events; it is because there are no touch events sent by Guacamole to the remote desktop whatsoever. The browser within that remote desktop is not going to be aware that you are interacting with it using touch.

To allow mouse-driven remote desktop to work through touch devices, Guacamole implements mouse emulation via touch events. This allows you to click, use the scroll wheel, etc. despite not actually having a mouse locally:

http://guacamole.apache.org/doc/gug/using-guacamole.html#touch-mouse

The traditional panning, pinching, etc. gestures will affect Guacamole's display, not the applications _within_ that display.","02/Nov/20 12:47;jackconiunctio;Hi Mike, thank you very much for your reply. I understand what you mean. Still, why does the mousescroll function not work? Scrolling is enough so my students, can scroll through the page. I tried with two and three fingers but still no effect.

I consider to reinstall Guacamole since this configuation is for development only. And probably the server specs are insufficient? Next week I‘ll build my new server it‘s a giant. So I‘ll be back by that time.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for multi-monitor connections,GUACAMOLE-288,13067690,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,slava1,slava1,28/Apr/17 13:37,01/Feb/21 22:58,17/Feb/21 11:13,,,,,guacamole-client,guacamole-server,,,,,,,,11,,,,,"Hello,

I'm wondering if multi monitor support for RDP (and maybe even VNC?) is on Guacamole's roadmap?  Currently, when we RDP to a workstation with multiple displays, we only see the primary display.  Can't find any options in the connection settings to configure multiple monitors.

I've found a ticket on the old Jira where a developer suggested it may be a trivial fix that involves adding a few flags and then the ticket went quite in 2015...so just wondering if this feature is in fact being added and if there is any ETA for it?

Thank you",,copeland3300,danielm2,delard,drhy,eikoe,graimi,igvazal,kano90,leema,lightspeed,lucasmogari,mjumper,pasik,rabe,robins,slava1,vnick,vtbose_rsi,vwguac,xia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-04-28 23:06:23.29,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Feb 01 22:58:55 UTC 2021,,,,,,,"0|i3e8nr:",9223372036854775807,,,,,,,,,,,,,,,,,"28/Apr/17 23:06;mjumper;{quote}
I'm wondering if multi monitor support for RDP (and maybe even VNC?) is on Guacamole's roadmap?
{quote}

The short answer is that this JIRA _is_ the roadmap.

To check whether something is on the Guacamole's roadmap, take a quick search through currently-open issues in JIRA. If something you're looking for isn't present, then the next step is to create an issue requesting that feature, as you have just done.

{quote}
I've found a ticket on the old Jira where a developer suggested it may be a trivial fix that involves adding a few flags and then the ticket went quite in 2015.
{quote}

I doubt that this will be as trivial as implied by that suggestion. Few features boil down to, simply, mapping things to FreeRDP flags. I haven't looked into the level of support within the FreeRDP library, but my main worry would be in how Guacamole should expose those multiple displays to the user.

For multi-monitor support to work well, users would need to be able to:

# Interact with the large, multi-monitor remote desktop despite having only one local monitor.
# Interact with the multi-monitor remote desktop spanning their local multi-monitor setup.

How the above could be achieved is not immediately clear.","29/Nov/19 07:00;leema;[~mjumper] Is multi monitor support addressed in latest version of Guacamole?","29/Nov/19 16:59;vnick;[~leema]: As you can see by the status of the request, it has not been addressed, yet :-).

Also, from Mike's last comment, it isn't even agreed that this change will be addressed.","02/Dec/19 04:43;leema;[~vnick] Since i could see multiple tickets around this multi monitor support, wanted to confirm on the status.

Thanks for confirming.","04/Mar/20 22:29;drhy;@vnick Re your 29/Apr/17 post, in my limited experience of vanilla Microsoft RDP, any remote Windows computer (irrespective of the number of its monitors) can provide a multi-monitor experience if you have multiple local monitors. But if you only have one local monitor Windows RDP won't allow any form of multi-monitor experience.

I've just added my vote :)

-David","29/Apr/20 18:27;danielm2;The very Difficult way around this we've found for now is to manually Stretch a web browser on the users machine they connect from (example a laptop with an external monitor)  across both screens. This is not always easy as windows only allows Maximize on 1 screen.  Once your browser is BIG as you can stretch it, then you connect. Or control-alt-shift Disconnect/Reconnect if you're already connected. This will in effect give you 1 large screen. Also I believe only certain versions of windows workstation allow you to connect RDP using multiple monitor (ie enterprise , and not just PRO) so really the multi monitor is up to the browser at this point.

Although perhaps a way to Merge 2 sessions into 1 where you'd have a LEFT and a RIGHT session 1 each connected to each screen remotely may work, but again, the local windows version may need to support that.

 

-danielm","03/May/20 02:44;vnick;The challenge, here, is in the steps to negotiating multi-monitor support between the client (web browser) and the remote server.  Thinking through this at a high level, we need to:
* Be able to detect multiple available monitors via the web browser (this _might_ be possible with the Presentation API, but I'm not certain about that and how much of it is exposed down to the JS layers).
* Report multiple monitors to the guacd side (this shouldn't be too hard, but means adding this piece of the handshake to the protocol).
* Have guacd negotiate multi-monitor support with the remote side (probably doable, at least in the case of RDP)
* Launch multiple browser windows on the available monitors (again, _might_ be possible with Presentation API, but at the very least non-trivial)
* Ensure that the ordering and orientation of monitors is consistent (probably doable, but not trivial).
* Make sure we don't break things for folks wanting single-monitor support in the meantime - which probably means allowing users to specify (maybe through Preferences) which monitors they want to use...again, doable, but not trivial.
* Figure out what to do with protocols where multi-monitor support is not quite as native as RDP - so, for instance, on SSH, do we always stick to a single monitor, do we try to open multiple terminals on multiple monitors, or...?","21/May/20 20:51;copeland3300;[~danielm2], I had actually never thought about doing it this way, and while I agree it's not the simplest work around, it actually works pretty well.

Good suggestion!

Another way I've done it in the past is to open two (or more) browser windows and log in via RDP as two or more different users. Again, it's a bit clunky, but works OK.

 

Specifically for RDP, I think the way to handle would be to spawn additional browser windows via a clickable links in the ctrl+shift+alt menu for each additional monitor specified as a part of the guac config. That way you wouldn't have to worry about client side detection of capabilities.

Actually this might be useful even when the client in a single screen environment  since you'd be able to control your screens as tiles and do a little more than windows will let you do in terms of tiling your applications. It would also let you tile things that might require full screen. 

Ultimately the issue boils down to if the machine you're connecting to will support multiple monitors. I feel like maybe the other parts are doable.

 

Not sure how to handle this with VNC though. SSH you can just open multiple tabs or browser windows and do multiple sessions that way.","01/Feb/21 22:18;kano90;Are there any news?
In freerdp i can receive multimonitor content so guacamole should split these streams into to individual frames- or am i thinking to simple?","01/Feb/21 22:58;vnick;[~kano90]: No, no news - the JIRA issues will get updated if and when people have time to work on them.

And, yes, it is a little more complicated with a web browser to implement multi-monitor support, even if the underlying RDP library supports it. Currently Guacamole uses the available browser window space as the dimensions for the available screen area that it uses to display the remote connection.

Implementing multi-monitor support in Guacamole would, first, require the ability to detect whether or not the client has multiple monitors attached. This isn't quite as straight-forward as it sounds - there's no easy/built-in way in JavaScript to just query the number of monitors attached. Chrome 66 introduced the Presentation API, which _might_ be able to help with this; however, that doesn't map 1-to-1 in terms of enabling multi-monitor display - in fact, using the presentation API would likely just mean ""sending"" the Guacamole display over to a different screen, and not spanning across multiple monitors.

You could have the user configure/specify multiple monitors, but this would likely end up a very clunky/manual process that would require the user to do things like specify the location and dimension(s) of the monitors. Hardly the ""seamless"" experience we're going for.

So, in the meantime, you have a couple of options:
* Stretch the browser window across multiple monitors, so that Guacamole sees the dimensions of the total of both (all) monitors. Yes, this is clunky.
* Open multiple windows on multiple monitors and make separate connections. Obviously this isn't the same as having true multiple monitors.",,,,,,,,,,,,,,,,,,,,,,,,,
Support for WebUSB,GUACAMOLE-522,13143293,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,vnick,vnick,07/Mar/18 18:26,25/Jan/21 17:03,17/Feb/21 11:13,,,,,guacamole-client,guacd,,,,,,,,3,,,,,"The WebUSB API is out and starting to get some cross-browser adoption, but, not surprisingly, being led by Chrome.  It would be really interesting to add this capability to Guacamole - the ability to pass through supported USB devices from the browser to the remote system.  Should be possible with RDP, and also maybe with SSH using sockets?

Anyway, throwing this out there on the list.",,iuselinux07,mjumper,pasik,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-03-07 20:57:32.181,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jan 25 17:03:49 UTC 2021,,,,,,,"0|i3r013:",9223372036854775807,,,,,,,,,,,,,,,,,"07/Mar/18 20:57;mjumper;++1

We should definitely do this. I personally do not have much subject level knowledge on the WebUSB API and the internals of USB, but I expect first steps here would be to begin outlining the nature of this support and any necessary protocol changes.

As an aside, it's interesting that things like audio input and USB are increasingly well-supported by browsers, while things like an actually useful clipboard API and permission scheme remain the holy grail.","25/Jan/21 17:03;iuselinux07;Any updates on this? I'm in dire need being able to log into remote systems with smart cards. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add option to the vnc protocol to disable remote input,GUACAMOLE-1267,13353344,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,stefan.esq,stefan.esq,19/Jan/21 19:17,20/Jan/21 11:57,17/Feb/21 11:13,,,,,Documentation,VNC,,,,,,,,0,,,,,"For security reasons it can be a required feature to have remote input disabled when using the VNC protocol (e.g. on remote costumer facing terminals, self service terminals etc).

 

Suggested solution is to add a setting ""disable-server-input"" which when set will send a message to the VNC client asking to disable the input.",,stefan.esq,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2021-01-19 19:17:44.0,,,,,,,"0|z0mruo:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for SPICE protocol,GUACAMOLE-261,13060589,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,mjumper,mjumper,31/Mar/17 07:27,18/Jan/21 19:20,17/Feb/21 11:13,,,,,,,,,,,,,,10,,,,,"{panel:bgColor=#FFFFEE}
*The description of this issue was copied from [GUAC-124|https://glyptodon.org/jira/browse/GUAC-124], an issue in the JIRA instance used by the Guacamole project prior to its acceptance into the Apache Incubator.*

Comments, attachments, related issues, and history from prior to acceptance *have not been copied* and can be found instead at the original issue.
{panel}

SPICE is becoming quite popular, and is available as part of KVM. Guacamole should add support.

http://www.spice-space.org/",,coolie17,jcpunk,jeredsutton_opstack,jwedgeco,kfiresmith,kronenpj,mjumper,oscar.segarra@gmail.com,Spiceman,vnick,xabier,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-02-10 08:06:41.861,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-124,,,,,,,,,,9223372036854775807,,,Mon Jan 18 19:20:51 UTC 2021,,,,,,,"0|i3d1gv:",9223372036854775807,,,,,,,,,,,,,,,,,"10/Feb/18 08:06;Spiceman;Hello since 2013 GUAC-124 no issue . why ?? Possible or not possible your websockify is maybe not compatible. I think is very important to guacamole to support this spice protocol. Severals virtualisations solutions choose spice to have a really good user experience, RHEV openstack etc.. Don't miss That.

 ","10/Feb/18 08:15;Spiceman;can you tell me how to contact the main integrators developing guacamole, I have a very promising open source project or guacamole would have a place and significant visibility","10/Feb/18 08:33;mjumper;{quote}
... I think is very important to guacamole to support this spice protocol.
{quote}

SPICE is not as helpful with respect to Guacamole as you might think. The other protocols already supported by Guacamole are more widely used, and the Guacamole stack actually functions to accelerate those protocols providing the network connection from Guacamole to those servers is fast (ideally local).

{quote}
... since 2013 GUAC-124 no issue . why ?? ...
{quote}

This issue continues to be open as the intent to add this support is there, but it is unlikely to be started any time soon because:

# It is a much lower priority relative to other open issues.
# It is significantly more complex than almost all other open issues, including those which are higher priority.
# It is unlikely to produce a benefit significantly beyond what is currently provided due to Guacamole's existing acceleration layer.

{quote}
Possible or not possible your websockify is maybe not compatible
{quote}

This statement does not make sense.

{quote}
can you tell me how to ...
{quote}

If you have a question regarding Guacamole, please use the mailing lists:

http://guacamole.apache.org/support/#mailing-lists

JIRA (like other bug trackers) is meant for reporting issues and for discussing the development surrounding those issues. It's not meant as a general forum.","10/Feb/18 08:53;Spiceman;spice is much more powerful than any other protocol to give a real user experience the refresh rate 1080 60fps you can aim multimedia content in all fluency and compared to RDP it does not require expensive licensing CALs. Do not see it is a mistake, when your websocket he does not tolerate it in the state I tested it so it's not a nonsense.

when you use the protocol rdp with guacamole to connect to a windows machine you are obliged to acquire CAL RDS to be in the legality with respect to the licensing of microsoft. this cost and not negligible.

finally brief you took your decision and it is a pity, nonetheless very nice work for the project guacamole","10/Feb/18 17:31;vnick;{quote}
spice is much more powerful than any other protocol to give a real user experience the refresh rate 1080 60fps you can aim multimedia content in all fluency and compared to RDP it does not require expensive licensing CALs.
{quote}

Clearly you feel very passionate about this, and we would welcome the contribution to the project if you have the desire, ability, and time to implement it.  Otherwise you'll have to wait until it becomes a higher priority for the project and/or someone else undertakes it.

{quote}
Possible or not possible your websockify is maybe not compatible.
{quote}

{quote}
Do not see it is a mistake, when your websocket he does not tolerate it in the state I tested it so it's not a nonsense.
{quote}

Just because you tried connecting to a SPICE server with Guacamole and it didn't work does not mean that it is ""not compatible.""  This is a question of implementation - the Guacamole Server (guacd) has to have support added to it to translate the SPICE protocol into the Guacamole protocol so that it can be used by a Guacamole-compatible client.  Adding this support is not trivial.

{quote}
when you use the protocol rdp with guacamole to connect to a windows machine you are obliged to acquire CAL RDS to be in the legality with respect to the licensing of microsoft. this cost and not negligible.
{quote}

This is getting a little off-topic, but...while CAL RDS licenses are not negligible in cost, there are plenty of people willing to pay for them.  Furthermore, if you want a single Windows system with multiple remote desktop users, RDS and Citrix are the only ways (that I know of) to accomplish this - otherwise, even with SPICE, you are limited to a single user per Windows system.  You can, of course, use a VDI model - however, if you're familiar with Microsoft licensing, you know that in order to *legally* license VDI (including using VNC or SPICE) you are required to purchase Windows 7/8/10 Enterprise under certain agreements and maintain Software Assurance on those licenses.  I've purchase both, and VDI+Windows Enterprise is more expensive than Windows Server+RDS.

{quote}
finally brief you took your decision and it is a pity...
{quote}

I am sure that SPICE will eventually be added to Guacamole, but, as with any piece of software, commercial or open source, Guacamole focuses time/effort/resources where the demand for features is higher, and SPICE hasn't come up all that often.","29/May/18 17:17;kfiresmith;Hi Folks,

I signed up with an account on this Jira to +1 this RFE.  It would be super nice to put Guacamole in between timeshare VMs and Active-Directory-leveraged user accounts for full X11 sessions delivered thru any browser.

 

 ","29/May/18 17:38;vnick;[~kfiresmith] Thanks for adding your voice to this.  At the moment no one has risen to the challenge of implementing this, so there's no estimate on when it will be done.","29/May/18 17:41;mjumper;{quote}
... for full X11 sessions delivered thru any browser.
{quote}

What about GUACAMOLE-168? SPICE would be nice, but it's not a requirement for support for X11.","29/May/18 17:50;kfiresmith;[~mike.jumper] - oh wow awesome, this sounds like exactly what I need.  I'll post about my use-case on the on GUACAMOLE-168.","29/Feb/20 14:56;kronenpj;[~mjumper] - Looking at your previous comments I'm confused as to whether this RFE is talking about replacing the internal guacamole protocol or implementing a new client feature alongside VNC, RDP, etc. I would like to see the latter implemented to access KVM consoles. Granted, I don't have a clue how to do it, so I'm adding my +1 to the request for a new client protocol. :)","29/Feb/20 15:41;vnick;[~kronenpj]: The goal is to add the ability for Guacamole to connect to remote systems via the SPICE protocol (as a client), *NOT* to replace the Guacamole protocol with the SPICE protocol.

I've started in to attempt to implement it a handful of times and never really made it very far.  I have a small clue how to do it, and I'm sure it would vastly improve my knowledge of the internals of Guacamole, but I've always been pulled away onto other tasks before I can make it very far.  Thanks for voting on it!","07/Jan/21 20:02;vnick;Well, I'm taking a wild stab at this, now. We'll see how far I get. I've got a lot of the initial code plumbed out - things like settings, channels, etc. Now it's just a matter of implementing the various details. It's different enough from the other protocols that I'm not entirely certain how easy it'll be.","18/Jan/21 16:09;vnick;[~mjumper]: I was digging back into this issue, trying to get SPICE support implemented, and banging my head against the wall in a couple of places. After searching back through some issues, I stumbled across the Glyptodon JIRA issue tracker for this, and it seems like you may have hit the same issues several years ago.

It seems that, after I call spice_session_connect(), the main SPICE channel gets created, but it never proceeds beyond that - no TCP traffic goes out to the SPICE server, no additional channels are created, and no additional event handlers are called. If I use spice_session_open_fd(), I seem to get some additional progress, but then have to implement manual connections of the sockets. Did you ever get anything working with spice_session_connect()?

Also, as I was looking through the Glyptodon JIRA issue, it appears that you may have hit some challenges that required a fork of the SPICE glib library and implementation of additional signal handlers within that? Am I reading that correctly?

Any chance you have the old source code stashed somewhere?","18/Jan/21 16:56;mjumper;I think I did have something basic working - I'll take a look. If I did, the branch is definitely somewhere.

Yes, the main issues I ran into were in the high-level nature of the library. Features of the SPICE protocol which would have translated nicely into corresponding features of the Guacamole protocol were kept internal, so any graphical operations optimized by SPICE would be effectively un-optimized before getting to guac. We get a primary surface, dirty rects, and that's it.","18/Jan/21 17:08;vnick;Thanks [~mjumper]. Ugh, almost sounds like the best route to go would just be to write an internal library to handle the SPICE protocol details? Documentation for the protocol itself seems pretty thorough [1], and the spice-glib API seems a little rough, at best.

[1] - https://www.spice-space.org/spice-protocol.html","18/Jan/21 17:31;mjumper;The spice-glib API is pretty decent IMHO (and documented!), just very high level.

Feedback from the spice library folks when I initially discussed the limitations of the library and the possible need for us to implement our own was that spice is complex and doing so is not recommended.

The library seems to provide mechanisms for handling the connection process and providing our own file descriptors. Perhaps we could:

# Hook into low-level communication by providing our own file descriptors.
# Filter the data coming through those file descriptors, interpreting only the small subset of spice messages needed to add context to dirty rects.
","18/Jan/21 19:20;vnick;{quote}
The spice-glib API is pretty decent IMHO (and documented!), just very high level.

Feedback from the spice library folks when I initially discussed the limitations of the library and the possible need for us to implement our own was that spice is complex and doing so is not recommended.
{quote}

Fair enough - I'll take your word (and theirs) on this and try to re-focus on using the spice-glib library. My experience thus far is that, yes, documentation is high-level for most things, and completely lacking for some things (for example, using the spice_session_open_fd() function it tells you that you need to capture the ""open-fd"" channel event...and that's about it).

{quote}
The library seems to provide mechanisms for handling the connection process and providing our own file descriptors. Perhaps we could:

# Hook into low-level communication by providing our own file descriptors.
# Filter the data coming through those file descriptors, interpreting only the small subset of spice messages needed to add context to dirty rects.
{quote}

Okay, I'll head in this direction and see what I can come up with. If you dig up the code you had working, let me know - seems like it would be helpful in uncovering some things you may have already been through so I don't have to completely repeat history (though it'd probably be a valuable experience for me).",,,,,,,,,,,,,,,,,,
Implement SAML Single Logout,GUACAMOLE-1266,13353035,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,michaelmiklis,michaelmiklis,18/Jan/21 09:39,18/Jan/21 13:36,17/Feb/21 11:13,,,,,guacamole,,,,,,,,,1,,,,,"The SAML Authentication Extension does not seem to have a logout function built in. This will result in a loop. Steps to reproduce:
 * connect to guacamole ULR
 * Automatic redirect to IDP Signin Page happens
 * login via SAML IDP to Guacamole
 * Click Logoff in Guacamole
 * Redirect to Guacamole Start-Page happens
 * Redirect to IDP Signin Page
 * User gets signed in automatically as the session on the IDP is still existing

 

The correct behaviour must be:
 * connect to guacamole ULR
 * Automatic redirect to IDP Signin Page happens
 * login via SAML IDP to Guacamole
 * Click Logoff in Guacamole
 * *Redirecting to configured IDP Logoff URL*
 * *IDP destroys session and redirects to Guacamole start page*
 * Redirect to IDP Signin Page
 * User gets signed in automatically as the session on the IDP is still existing",,michaelmiklis,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-519,,,GUACAMOLE-680,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2021-01-18 13:36:53.239,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jan 18 13:36:53 UTC 2021,,,,,,,"0|z0mpy8:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Jan/21 11:42;michaelmiklis;Same problem like openid. A very similar approach in SAML","18/Jan/21 13:36;vnick;[~michaelmiklis]: As with the other SLO requests, I do not consider this a bug, but an improvement in the extension. The Logout functionality has not been implemented across any of the SSO extensions. Once GUACAMOLE-680 is done we can provide the SLO mechanisms across several of the extensions.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add stats to Guacamole,GUACAMOLE-1223,13342671,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kangaroo22,kangaroo22,25/Nov/20 18:23,18/Jan/21 03:12,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"I would love to see some kind of basic ""stats"" in Guacamole.  To give you an idea what I'm looking for:
 * how many connections are in use right now (without me scrolling through all the active screens and counting them manually)?
 * how many connections today total?
 * what is the maximum number of simultaneous connections today?
 * maximum number of connections this week, this month, this year?
 * maybe even being able to look at the number of connections per hour?
 * or maybe even drilling right down to a particular host and seeing how often that host is being used? and for how long?

I'm sure there are other stats that could be included as well.

It would be nice if you could configure how long they stay around as well. ",,kangaroo22,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-11-26 01:29:06.812,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Nov 26 01:29:06 UTC 2020,,,,,,,"0|z0kxv4:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Nov/20 01:29;vnick;My initial thought is that such a dashboard could be created as an extension module, and could leverage all of the existing data provided by the APIs in order to generate the graphs - that is, I'm not sure you'd actually need to track anything different than what is already being tracked today to generate these sorts of statistics - at least, not most of them. Assuming you're using the JDBC module, historical connection data is already stored within tables in the database, including start/stop time of the connection, the user accessing the connection, and the connection they used. This should allow you to generate things like total number of connections within a certain day, week, month, year, or custom timeframe, along with min/max/median/mean sorts of things.

The current active connections can also be obtained, again, assuming you're using the JDBC module, so that seems very doable with the current REST endpoints.

So, it's really a matter of:
* Finding/using a good JavaScript graphing library.
* Tracking down all of the REST calls that would need to be made (really, just calling existing AngularJS functions to retrieve active and historical data).
* Allowing a user to select the stats they want to see and do things like adjust date range.
* Doing the math to compute the values and graphing them.
* Finding a good place in the UI to stick it (I'm thinking either Home screen or Settings page).

Overall I like the idea as an install-able extension module, and think it's probably reasonable straight-forward to accomplish.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add configuratin option to specify WOL port,GUACAMOLE-1245,13348128,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vieri,vieri,28/Dec/20 13:30,18/Jan/21 02:46,17/Feb/21 11:13,,,,1.4.0,guacamole,,,,,,,,,0,,,,,"Please add an option to specify wake-on-lan port as commented in ML:

http://mail-archives.apache.org/mod_mbox/guacamole-user/202012.mbox/browser",,vieri,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-12-28 13:30:04.0,,,,,,,"0|z0lvi8:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NAS-IP-Adress should be configurable,GUACAMOLE-1252,13348892,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,mboehm21,mboehm21,04/Jan/21 08:41,18/Jan/21 02:41,17/Feb/21 11:13,,1.3.0,,1.4.0,Documentation,guacamole-auth-radius,,,,,,,,0,,,,,"This change introduced the functionality to read the ip address from the OS and write it to the NAS IP address of the RADIUS protocol.

However, this is not a proper solution when Guacamole runs in Docker as in this case the virtual internal IP address is used.

As discussed in the mailing-list, I propose to make it configurable from where the NAS IP address should be fetched, either automatically from the OS or manually from a config parameter (or not at all).",,mboehm21,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2021-01-04 14:16:58.642,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jan 04 14:16:58 UTC 2021,,,,,,,"0|z0m080:",9223372036854775807,,,,,,,,,,,,,,,,,"04/Jan/21 14:16;vnick;Pull requests have been opened for this change:
https://github.com/apache/guacamole-client/pull/586
https://github.com/apache/guacamole-manual/pull/157",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
use existing Seed on LDAP Atribute  to validate OTP,GUACAMOLE-1161,13324533,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,germcg,germcg,25/Aug/20 19:11,18/Jan/21 02:30,17/Feb/21 11:13,,1.2.0,,,guacamole-auth-totp,,,,,,,,,0,,,,,"due to an integration of our identity manager with guacamole OTP we test the seed used in guacamole ( base32 ) is the same as the seed in guacamole for otp validation.

we test replacing in mysql this seed and works perfectly. 

so

there is any way to tell the OTP to query the LDAP atribute to get the seed? could be a new feature or any way to get this on current version?

 

Regards",,germcg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-08-25 19:11:26.0,,,,,,,"0|z0i30w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for Polish keyboard layout,GUACAMOLE-604,13175739,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,krogac,krogac,31/Jul/18 05:25,09/Jan/21 02:27,17/Feb/21 11:13,,,,,RDP,,,,,,,,,0,,,,,Connection RDP not support Polish keyboard layout.,,krogac,szporwolik,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-12-26 21:15:01.622,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Dec 29 13:24:15 UTC 2020,,,,,,,"0|i3wi73:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Dec/19 21:15;vnick;[~krogac]: If you have any familiarity with the layout it would be helpful if you'd be willing to take a stab at it.","02/Dec/20 10:38;szporwolik;[~vnick]: I can help with the information about Polish layout, would be nice to have the Polish letters passed through :)","28/Dec/20 23:49;vnick;Thanks [~szporwolik], this would be great, as I don't know anything about Polish keyboard layouts. The RDP keyboard layouts are in the following directory:

https://github.com/apache/guacamole-server/tree/master/src/protocols/rdp/keymaps

If you look at some of the existing ones you can get an idea of how the layouts work and maybe generate one for the Polish keyboard. The best way to contribute the Polish layout is to fork the guacamole-server repository, create a branch, make the changes, and then create a pull request.","29/Dec/20 13:24;szporwolik;The polish layout is described at:

[http://kbdlayout.info/kbdpl1]

With the following mapping:

[http://kbdlayout.info/kbdpl1/download/klc]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support storage of sensitive data within key vaults,GUACAMOLE-641,13189981,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,mjumper,mjumper,mjumper,08/Oct/18 01:28,30/Dec/20 20:57,17/Feb/21 11:13,,,,,Documentation,guacamole-client,,,,,,,,1,,,,,"Guacamole currently provides multiple storage mechanisms for connection data, but generally relies on the security of the server(s) hosting those mechanisms to guard sensitive data. The same goes for the contents of {{guacamole.properties}}. With the widespread availability of vault services providing secure storage and retrieval of sensitive data, it would be useful if Guacamole could dynamically retrieve sensitive data from these vaults, including:

* Sensitive connection data that may otherwise be stored directly in a database.
* Sensitive configuration information that may otherwise need to be stored directly in {{guacamole.properties}}.",,mjumper,nico564122,pasik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-524,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Oct 08 01:58:45 UTC 2018,,,,,,,"0|i3yxbz:",9223372036854775807,,,,,,,,,,,,,,,,,"08/Oct/18 01:48;mjumper;With the changes from GUACAMOLE-524, this is very doable. I currently have a working POC with a similar layout to guacamole-auth-jdbc (a base implementation supporting multiple providers), with initial support for Azure Key Vault:

https://github.com/mike-jumper/guacamole-client/tree/key-vault

Authentication with Azure (and handling of the actual response) is currently stubbed out until I can get the necessary authorization on the test instance. Also up in the air is whether the {{KeyVaultClient}} should be per-request or pooled...","08/Oct/18 01:58;mjumper;Pooling could be achieved with https://commons.apache.org/proper/commons-pool/apidocs/org/apache/commons/pool2/impl/GenericObjectPool.html",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for rich text clipboard to RDP,GUACAMOLE-420,13110211,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,cbosys,cbosys,18/Oct/17 06:48,18/Dec/20 20:20,17/Feb/21 11:13,,,,,guacamole,RDP,,,,,,,,0,,,,,"Guacamole's RDP support currently implements clipboard for ""UTF-16"" and ""CP1252"" formats. These clipboard formats don't allow to copy/paste of formatted content, whereas rich text does.
",,cbosys,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-55,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-10-18 07:11:27.637,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Oct 18 07:11:27 UTC 2017,,,,,,,"0|i3lean:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Oct/17 07:11;mjumper;The Guacamole protocol inherently supports arbitrary formats (including HTML). In general, the server-side portion of this is incredibly simple. It's the client side where the complexity lies, mainly in working around the way each browser has an entirely different way of translating text into HTML (are newlines represented with {{<br>}}? implied with {{<div>}}? what about {{<p>}}?) and not breaking handling of normal text.

See GUACAMOLE-55 for the work-in-progress simpler case of just adding support for images, and:

* GUACAMOLE-82
* GUACAMOLE-128
* GUACAMOLE-310

for issues/regressions which resulted from that initial attempt, resulting in GUACAMOLE-55 being almost entirely reverted.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow TOTP to be disabled by group membership,GUACAMOLE-1219,13341903,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jph,jph,21/Nov/20 11:08,21/Nov/20 14:50,17/Feb/21 11:13,,1.2.0,,,Documentation,guacamole-auth-totp,,,,,,,,0,patch,totp,,,"The TOTP Authenticator Plugin currently does not allow configuration.

The patch which is included in this ticket adds the following functionality:
 # Introduces a new configuration option:
totp-disabled-group
Members of the given group will have TOTP disabled. If the configuration is left blank, TOTP usage is enforced.
 # Adds the functionality in the code

 

Review & Feedback is appreciated. Especially the correct usage of the API for retrieving group membership.

 ",,jph,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/20 11:03;jph;guacamole-totp-manual.patch;https://issues.apache.org/jira/secure/attachment/13015777/guacamole-totp-manual.patch","21/Nov/20 11:03;jph;guacamole-totp-source.patch;https://issues.apache.org/jira/secure/attachment/13015776/guacamole-totp-source.patch",,2.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,Patch,,,,,,,,9223372036854775807,,,Sat Nov 21 14:50:15 UTC 2020,,,,,,,"0|z0kt5k:",9223372036854775807,,,,,,,,,,,,,,,,,"21/Nov/20 14:50;jph;I just managed to put a pull request on github:

 

[https://github.com/apache/guacamole-client/pull/577]

[https://github.com/apache/guacamole-manual/pull/151]

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
reverse lookup of feature by bundle,KARAF-2495,12672004,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,jdr0887,jdr0887,02/Oct/13 18:57,09/Oct/20 04:07,17/Feb/21 11:13,,2.3.2,,,karaf,,,,,,,,,2,,,,,"Lookup feature from bundle information.  Where did a particular bundle come from?   Similar to how ""features:info <feature>"" lists the bundles, but the reverse.",,jdr0887,lichtin,wjmcdonald,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,351630,,,2013-10-02 18:57:09.0,,,,,,,"0|i1omkf:",351918,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jms:send command with headers capabiliities,KARAF-3153,12732912,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,johan.lelan,johan.lelan,08/Aug/14 19:25,09/Oct/20 04:01,17/Feb/21 11:13,,,,,,,,,,,,,,0,features,,,,"It should be nice to send (via jms:send) a body and a list of headers values.
Now, we only could sent a content (body) but, in real world, headers are used to route every message to its destination. ",,jbonofre,johan.lelan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2014-08-08 19:27:58.927,,,false,,,,,,,,,,,,,,,,,,410940,,,Fri Aug 08 19:27:58 UTC 2014,,,,,,,"0|i1yp8f:",410933,,,,,,,,,,,,,,,,,"08/Aug/14 19:27;jbonofre;Good idea. I agree.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Groovy and groovysh integration into Karaf console,KARAF-5202,13079170,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,djouvin,djouvin,12/Jun/17 10:04,09/Oct/20 03:36,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,Groovy,Groovysh,Karaf,ShellCommands,"The idea is to integrate Groovy into Karaf as an alternative scripting and/or interactive shell language. Since Groovysh also uses JLine, integration is quite easy (pass the current Jline console/session instance to Groovysh at construction time). There are some class loading issues though since Groovy uses sometimes the TCCL even when we instruct it to use a given class loader (I opened a Groovy JIRA issue about that).

The Groovysh shell then would allow to get OSGi service reference or Blueprint/Spring context references, or execute Karaf commands. Groovysh has a very nice command completion feature that enable to discover any objet (including OSGi service instance) API at runtime, which makes it very easy to play with in a dynamic environment like Karaf. In addition, its native closures and set operations, and very concise syntaxe, facilitates its use as a shell replacement.

This open nice possibilites like exploratory programming on a live running Karaf instance, scripting, tests or analysis, etc.

Another common use case is to modify a not yet parameterized value in a Blueprint or Spring context at runtime (you can browse or access the Blueprint context components, and reinstaciate them or inject properties).
",,djouvin,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-06-12 12:12:28.597,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jun 12 16:17:08 UTC 2017,,,,,,,"0|i3g5sv:",9223372036854775807,,,,,,,,,,,,,,,,,"12/Jun/17 12:12;jbonofre;Can you provide some use cases/samples ? Thanks !","12/Jun/17 14:15;djouvin;Here is the help of the prototype implementation I have produced:

{noformat}
ServiceMix-5.0.0:7412003A@root> groovy --help
DESCRIPTION
        sncf:groovy

        Run an interactive Groovy session (use "":exit"" to return to Karaf console)

SYNTAX
        sncf:groovy [options]

OPTIONS
        --command, -c
                Execute the given Groovy command, without entering interactive shell
                Exclusive with the -s (--script) and -l (--load) options
        --help
                Display this help message
        --enable-package-loading
                Enable packages pre-loading (disabled by default since very slow in OSGi)
        --reset-shell
                Reset the Groovysh shell (new instance)
        --reference, -r
                Resolve and assign OSGi service(s) in Groovy shell variables, in the form
                serviceName1=serviceInterface1(ldapFilter1),serviceName2=serviceInterface2(ldapFilter2),...
                The LDAP filter is optional. Only the best matching service found is returned.
        --import, -i
                Imports the specified packages or classes into Groovy, in the form qualifiedName1,qualifiedName2,...
        --load, -l
                Execute the given Groovy script list, in the form scriptUrlOrPath1,scriptUrlOrPath2,... by loading them to an interactive Groovy shell
                Equivalent to the Groovy :load command. Exclusive with -c (--command) and -s (--script) options
        --variable, -v
                Import specific Karaf variables in Groovy shell, in the form variableName1,variableName2,...
        --script, -s
                Execute the given Groovy script, in a separate Groovy dedicated (non interactive) interpreter
                Exclusive with -c (--command) and -l (--load) options
{noformat}
","12/Jun/17 14:48;djouvin;Exemple session 1 (extracted from a live session in a ServbiceMix instance):

Enter Groovy interactive shell, then get a reference to a CXF Bus service (the default one), then check the ID of that bus, and get the list of interceptors and their IDs. Then remove the logging interceptor. Then shutdown the bus and restart the bus.

Then get a CXF bus named bus-siri (using service properties), and play with it.

{noformat}
ServiceMix-5.0.0:7412003A@root> groovy -r bus=org.apache.cxf.Bus
groovy:000> bus.
doInitializeInternal()         getExtension(                  hasExtensionByName(            initialize()
loadAdditionalFeatures()   run()                          setExtension(                  shutdown(
shutdown()                     blueprintContainer         bundleContext              features
id                         inFaultInterceptors            inInterceptors                 outFaultInterceptors
outInterceptors                properties                     state
groovy:000> bus.id
===> bus-halles-icv
groovy:000> bus.inInterceptors
===> [org.apache.cxf.ws.policy.PolicyInInterceptor@e6cffa6, org.apache.cxf.interceptor.LoggingInInterceptor@3713a669]
groovy:000> bus.inInterceptors*.id
===> [org.apache.cxf.ws.policy.PolicyInInterceptor, org.apache.cxf.interceptor.LoggingInInterceptor]
groovy:000> bus.inInterceptors.removeAll { it.id == 'org.apache.cxf.interceptor.LoggingInInterceptor' }
===> [org.apache.cxf.ws.policy.PolicyInInterceptor@e6cffa6]
groovy:000> bus.state
===> RUNNING
groovy:000>bus.shutdown()
===> null
groovy:000>bus.run()
===> null

groovy:000> :os busSiri org.apache.cxf.Bus (cxf.bus.id=bus-siri)
===> org.apache.cxf.bus.blueprint.BlueprintBus@60891a68
groovy:000> // alternative methode: using getOsgiService closure
===> true
groovy:000> busSiri = getOsgiService('org.apache.cxf.Bus', '(cxf.bus.id=bus-siri)')
===> org.apache.cxf.bus.blueprint.BlueprintBus@60891a68
(...)
{noformat}
","12/Jun/17 15:07;djouvin;Exemple session 2 (also extracted from a ServiceMix 5.0.0 console = Karaf 2.3.4)

Grab a Blueprint context from bundle ActiveMQ, then play with it.

{noformat}
ServiceMix-5.0.0:7412003A@root> groovy
groovy:000> :karaf list -s|grep -i activemq
[  82] [Active     ] [Created     ] [       ] [   50] org.apache.activemq.activemq-osgi (5.9.0)
[  83] [Active     ] [Created     ] [       ] [   50] activemq-karaf (5.9.0)
[  96] [Active     ] [            ] [       ] [   50] org.apache.activemq.activeio-core (3.1.4)
[ 101] [Active     ] [Created     ] [       ] [   50] activemq-service (5.0.0)
groovy:000> :bp amqBP activemq-service
===> org.apache.aries.blueprint.container.BlueprintContainerImpl@61c9708f
groovy:000> amqBP.componentIds
===> [blueprintContainer, blueprintBundle, blueprintBundleContext, blueprintConverter, activemqConnectionFactory, pooledConnectionFactory, jmsXaPoolConnectionFactory, jmsXaConnectionFactory, resourceManager, osgiJtaTransactionManager, .component-1, .component-2, .ext-26, org.apache.aries.managedObjectManager, .cm-39]
groovy:000> amqRM = amqBP.getComponentInstance 'resourceManager'
===> org.apache.activemq.pool.ActiveMQResourceManager@6afcda3d
groovy:000> amqRM.
recoverResource()    connectionFactory    password             resourceName         transactionManager
userName
groovy:000> amqRM.resourceName
===> activemq.amq-broker
(...)
{noformat}


","12/Jun/17 16:08;djouvin;Exemple session 3, to illustrate how to pass variables from Karaf console session to Groovy session, and vice versa.

Enter Groovy interactive session, passing the current bundle list as a variable (implicitly then explicitly).
Then get the number of bundles who's name start with {{org.apache}} and access it back from the Karaf session.

{noformat}
ServiceMix-5.0.0:7412003A@root> bundles = ($.context bundles)
(...)
ServiceMix-5.0.0:7412003A@root> groovy
ggroovy:000> karafContext*.key
===> [TERM, karaf.lastException, APPLICATION, LINES, _GROOVYSH_LOADER, SCOPE, PROMPT, bundles, ARGUMENTS_LIST, COLUMNS, USER, cluster]
groovy:000> karafContext.bundles.length
===> 282
groovy:000> :x
0
ServiceMix-5.0.0:7412003A@root> groovy -v bundles
groovy:000> bundles.length
===> 282
groovy:000> n = bundles.count { it.symbolicName.startsWith 'org.apache' }
===> 182
groovy:000> :x
0
ServiceMix-5.0.0:7412003A@root> $groovyContext get n
182
{noformat}
","12/Jun/17 16:17;djouvin;Here is the help from the Groovy side, including help on the 3 OSGi and Karaf related Groovy commands introduced in my prototype implementation ({{:osgi-service}}, {{:blueprint}} and {{:karaf}}).

The 2 first commands (prefixed with {{get}} and in camel-case), are also available as Groovy closures (accessible from the current Groovysh session binding).

{noformat}
groovy:000> :help

Available commands:
  :help          (:h ) Display this help message
  ?              (:? ) Alias to: :help
  :exit          (:x ) Exit the shell
  :quit          (:q ) Alias to: :exit
  import         (:i ) Import a class into the namespace
  :display       (:d ) Display the current buffer
  :clear         (:c ) Clear the buffer and reset the prompt counter
  :show          (:S ) Show variables, classes or imports
  :inspect       (:n ) Inspect a variable or the last result with the GUI object browser
  :purge         (:p ) Purge variables, classes, imports or preferences
  :edit          (:e ) Edit the current buffer
  :load          (:l ) Load a file or URL into the buffer
  .              (:. ) Alias to: :load
  :save          (:s ) Save the current buffer to a file
  :record        (:r ) Record the current session to a file
  :history       (:H ) Display, manage and recall edit-line history
  :alias         (:a ) Create an alias
  :set           (:= ) Set (or list) preferences
  :register      (:rc) Register a new command with the shell
  :doc           (:D ) Open a browser window displaying the doc for the argument
  :osgi-service  (:os) Resolve an OSGi service and assign it to a variable
  :blueprint     (:bp) Resolve a blueprint container and assign it to a variable
  :karaf         (:k ) Executes a Karaf command (from current Karaf session)

For help on a specific command type:
    :help command

groovy:000> :help :karaf

usage: :karaf [<arg1> [<arg2> [...]]]

Executes a Karaf command from the current Karaf session.Arguments are passed through without specific
 (un)escaping or (un)quoting that may happen atGroovy or Karaf side. A trick is to escape double-quoted
 arguments in single-quotes and vice versa.

groovy:000> :help :osgi-service

usage: :osgi-service <variableName> <serviceInterface> [<ldapFilter>]

Resolve the best matching OSGi service with the given interface, (i.e. with the highest ranking and,
 if equal, lowest ID), possibly using the given LDAP filter if any, and bind it a local variable

groovy:000> :help :blueprint

usage: :blueprint <variableName> <bundleSymbolicName> [<bundleVersion>]

Resolves the blueprint container OSGi service for the given bundle  symbolic name (and version
 if specified), and binds it to a shell variable.
{noformat}
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add client IP filtering to ssh shell,KARAF-6012,13198683,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,amichai,amichai,15/Nov/18 17:49,08/Oct/20 14:22,17/Feb/21 11:13,,4.2.0,,,karaf,,,,,,,,,0,,,,,"It would be great if one could add a simple setting to the karaf ssh shell configuration that defines which remote IPs are allowed to access the ssh shell.

If you want to have the most security out of the box, you can make the default setting localhost only, but that's up for debate (usability vs security).",,amichai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-11-15 17:49:27.0,,,,,,,"0|s00jjk:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cave:repository-artifact-promote - Move an artifact from one repository to another in the same instance of Cave,KARAF-6780,13314946,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,paulsp,paulsp,03/Jul/20 20:34,08/Oct/20 14:17,17/Feb/21 11:13,,,,,cave,,,,,,,,,0,,,,,"My instance of Cave is hosting a ""Quality"" and a ""Production"" repository.  I would like to move an artifact from the ""Quality"" repository to the ""Production"" repository once quality testing is complete.

Jean-Baptiste Onofre mention a command like ""cave:repository-artifact-promote"" to promote an artifact from one repository to another would be a nice enhancement, thus this request.

Until the enhancement is implemented, I am using the following workaround:
 * Add the ""Quality"" repository as a maven repository to the Karaf instance using the following command (Note: the command needs to be executed once per Karaf instance):
     maven:repository-add -id quality [http://localhost:8181/cave/repository/quality/]  
 * Use the command ""cave:repository-artifact-add production ..."" to add artifacts to the ""Production"" repository
 * Use the command ""cave:repository-artifact-delete quality ..."" to remove artifacts to the ""Quality"" repository

See KARAF-6778 related to .md5 and .sha1 related files when deleting artifacts ",karaf 4.2.9,paulsp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-07-03 20:34:23.0,,,,,,,"0|z0gg2g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add SQL Server support to Docker image,GUACAMOLE-1173,13326532,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,starke.gardner,starke.gardner,08/Sep/20 17:29,09/Sep/20 13:16,17/Feb/21 11:13,,,,,guacamole-docker,,,,,,,,,0,,,,,"It does not look like there is support for sqlserver in the start.sh script on the guacamole-client docker container.

 

[https://github.com/apache/guacamole-client/blob/master/guacamole-docker/bin/start.sh]

 ",,mjumper,starke.gardner,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-09-08 23:45:06.065,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Sep 09 13:16:53 UTC 2020,,,,,,,"0|z0ifco:",9223372036854775807,,,,,,,,,,,,,,,,,"08/Sep/20 23:45;mjumper;{quote}
It does not look like there is support for sqlserver in the start.sh script on the guacamole-client docker container.
{quote}

Indeed, there isn't - the image currently only supports MySQL and PostgreSQL:

http://guacamole.apache.org/doc/1.2.0/gug/guacamole-docker.html#guacamole-docker-image

Adding support for this would also require bundling a SQL Server JDBC driver, not just supporting the needed variables.","09/Sep/20 13:16;starke.gardner;It seems distribution is a permitted use under the license.


https://github.com/microsoft/mssql-jdbc/blob/dev/mssql-jdbc_auth_LICENSE

 

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add in ""Gateway Transport type"" setting for RD Gateway",GUACAMOLE-1167,13325655,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,bored_programmer,bored_programmer,02/Sep/20 02:08,02/Sep/20 02:08,17/Feb/21 11:13,,1.2.0,,,guacamole-server,,,,,,,,,0,features,,,,"The option to adjust the rdp gateway transport type is missing from the Remote Desktop Gateway Parameters section.

The option in freerdp is /gt:

/gt:[rpc|http|auto] Gateway transport type

 

I am able to connect to rd gateway server if I'm using the /gt:rpc option, but can't using guac. If you believe I should be able to without this, then please let me know.

 

Here is my sanitized command:

xfreerdp /g:rdgateway.server.com:443 /gu:user /gd:abcdf /gp:pass /v:host /gt:rpc

 

 ",,bored_programmer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,172800,172800,,0%,172800,172800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,Patch,,,,,,,,9223372036854775807,,,2020-09-02 02:08:45.0,,,,,,,"0|z0i9xs:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support new video codecs with guacenc,GUACAMOLE-974,13288447,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,sreid,sreid,29/Feb/20 13:51,24/Jun/20 21:49,17/Feb/21 11:13,,,,,guacenc,,,,,,,,,1,,,,,"Guacenc currently supports mpeg4 in an m4v container. Given the web-based nature of guacenc, I think it makes sense that it should at least support the common codecs and containers; namely: H.264 in an MP4 container and VP8 in a webm container.

 

This is blocked by GUACAMOLE-465 and GUACAMOLE-973. 465 provides the needed dependency libavformat to facilitate this functionality and 973 provides output file specification, which is required to determine the container format.",,sarva77,sreid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-02-29 13:51:38.0,,,,,,,"0|z0c10g:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support specified input and output file names with guacenc,GUACAMOLE-973,13288446,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,sreid,sreid,29/Feb/20 13:47,24/Jun/20 21:44,17/Feb/21 11:13,,,,,guacenc,,,,,,,,,0,,,,,"Currently, the guacenc utility takes a list of input files, but assumes their output file names and output file extension. Guacenc should support a second set of arguments that takes a specified input filename and a specified output filename without removing the original interface guacenc has always supported.",,sreid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-974,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-02-29 13:47:39.0,,,,,,,"0|z0c108:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for PowerShell Remoting Protocol,GUACAMOLE-1102,13311802,New Feature,Reopened,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,leo87las,leo87las,16/Jun/20 19:07,18/Jun/20 05:13,17/Feb/21 11:13,,,,,guacamole-server,,,,,,,,,0,,,,,"PowerShell provides its own remoting protocol layered on top of WinRM. Similar to Guacamole's existing support for SSH and telnet, support should be added for establishing PowerShell connections to Windows servers.

Implementing may depend on a PSRP client library materializing somewhere in the open source community. Until such a library exists, it's unlikely to be practical to implement the needed support, and users needing access to PowerShell on Windows servers via Guacamole should leverage SSH instead.",,leo87las,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-06-16 19:14:05.124,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Jun 18 05:08:43 UTC 2020,,,,,,,"0|z0fwug:",9223372036854775807,,,,,,,,,,,,,,,,,"16/Jun/20 19:14;vnick;[~leo87las]: You may need to provide a little more detail on what you mean by each of these.
* Add multiple roles of user permissions, such as auditing role - I'm assuming by this you mean the ability for a non-admin user to see things like connection history?  See GUACAMOLE-460.
* Add support for PowerShell - I've no idea what you mean, here.  I'm a little biased because I think PowerShell is the worst possible excuse for a scripting language EVER invented, but, setting my bias aside, I still don't know what you mean by this.  Are you talking about some sort of PowerShell-based module for interacting with the REST API for things like session management, user management, etc.?  Or something else?
* Provide way to see recorded videos within guacamole webpage - This has also been requested in the past (GUACAMOLE-462), and the biggest challenge here is that the guacd portion of Guacamole that does the actual recording doesn't ""know"" anything about the administrative controls that Guacamole Client has - things like users, groups, connections, connection permissions, etc.  So, there's no solid way to associate the recording produced by guacd with the session opened on the Guacamole Client side.  The best way to do this at present would be to use Parameter Tokens to name each of the recording files in a way or place them in a directory that helps associate the user, IP, connection, etc., with the recording.","17/Jun/20 11:10;leo87las;thank you  nick, 
 * multiple roles : yes  i mean non-admin users like ability to view history,manage connections,..,etc.
 * support for powershell: i mean ability to manage core windows servers with powershell like ""PowerShell Web Access"" .     
   I realy value guidance you provide.","17/Jun/20 12:33;vnick;[~leo87las]: Thanks for the clarification.  Regarding both multiple roles and seeing recorded videos, see the issues I mentioned, as I think those will cover those use-cases.

Regarding the PowerShell support, yes, that helps.  I'm a little on the fence about whether we'd consider that something in scope for this project - on the one hand, it seems very similar to things like Kubernetes and SSH support; on the other hand, it seems like taking Guacamole in the direction of a more general remote access tool and not the ""Clientless Remote Desktop"" that it is meant to be.

Setting side the question of whether that would be in-scope or not, I suspect that such a change would require a great deal of work, and would also depend upon the types of libraries and APIs available in the PowerShell code that Microsoft has released.  I also have a fear that whatever libraries and APIs are available would require also pulling in Microsoft's .NET Core libraries.

In the meantime, my usual practice is to install SSH on Windows servers and access them over SSH - and as Microsoft continues work on SSH for Windows, I'd suggest that might be a better path in general for Guacamole access to Windows Core servers than trying to put PowerShell support into Guacamole.  But I'm open to the discussion :-).

https://github.com/PowerShell/Win32-OpenSSH/releases","17/Jun/20 17:59;mjumper;The PowerShell suggestion is valid, IMHO, as there is a PowerShell Remoting Protocol which it would make sense to support just as we support SSH. This may not currently be practical, as there doesn't appear to be a PSRP client library anywhere, and we would need to implement the entire thing ourselves. I did find a ""PSRP-Client-Library"" project within the PowerShell github repo, but it does not look promising:

https://github.com/PowerShell/PSRP-Client-Library

As Nick suggests, as PowerShell can be used via SSH, that would be the best way forward if you need this functionality. Nothing needs to be changed or implemented within Guacamole for that to work, and I expect it should work quite well.","17/Jun/20 18:14;vnick;{quote}
Nothing needs to be changed or implemented within Guacamole for that to work, and I expect it should work quite well.
{quote}

From my experience using PowerShell over SSH, the only issue I've run into is that the SSH implementation doesn't really handle varying terminal widths very well - it tends to be very picky about having terminals sized to the old ""cmd"" settings, and using more customized values tends to result in very odd behavior when the lines wrap.  I suspect this has been reported somewhere along the way, and that they'll work it out, eventually, but it can make for a interesting experience trying to use PS over SSH :-).","17/Jun/20 18:15;vnick;{quote}
I did find a ""PSRP-Client-Library"" project within the PowerShell github repo, but it does not look promising:
{quote}

That may be the understatement of the year...they committed the README.md two years ago...with not much content.  LoL.","18/Jun/20 05:08;mjumper;With the other parts of this being duplicates of GUACAMOLE-460 and GUACAMOLE-462, I will rephrase the issue to be specific to PowerShell support.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
allow notifications tab on Guacamole main screen,GUACAMOLE-1080,13307291,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kangaroo22,kangaroo22,25/May/20 20:01,15/Jun/20 19:12,17/Feb/21 11:13,,,,,,,,,,,,,,1,,,,,"I would like if Guacamole had an option to enable a ""notifications"" or ""notices"" section on the main screen between RECENT CONNECTIONS and ALL CONNECTIONS.  It would be nice if Guacamole could read this information from a configurable file on the system.  Here, I could include messages like:

""05/24/2000 10:00 AM - Hosts 1-50 are reserved for class X right now - but hosts 51-100 are available.""
""05/24/2000 10:00 AM - Hosts in the Windows group are presently unavailable. We are presently investigating the cause."" 

 

 ",,kangaroo22,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-05-25 23:26:01.594,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jun 15 19:12:57 UTC 2020,,,,,,,"0|z0f54g:",9223372036854775807,,,,,,,,,,,,,,,,,"25/May/20 23:26;vnick;This is definitely something that could be accomplished with a custom extension.  I'm not sure that it's something we would consider putting into the mainline client, but certainly very doable with an extension.","26/May/20 00:32;kangaroo22;Do you have an extension that adds anything to that screen  that I could use as a start point to understand how to do this? I suspect it's easy if you understand the underlying system.

It would be great if there was a repository of these extensions. I'm sure there's a lot you could do.

 ","26/May/20 00:36;vnick;{quote}
Do you have an extension that adds anything to that screen  that I could use as a start point to understand how to do this? I suspect it's easy if you understand the underlying system.
{quote}

The QuickConnect extension does exactly this, inserting HTML at the top of the All Connections section:

https://github.com/apache/guacamole-client/blob/master/extensions/guacamole-auth-quickconnect/src/main/resources/templates/quickconnectField.html

http://guacamole.apache.org/doc/gug/guacamole-ext.html

{quote}
It would be great if there was a repository of these extensions. I'm sure there's a lot you could do.
{quote}

Yeah, I've actually thought it would be cool to put together a repo dedicated entirely to community extensions.  The possibilities for what you can do with them is quite broad - it's a very well-designed system, and one which I make no claim to!","26/May/20 14:58;kangaroo22;I spent some time looking at the quickconnect code, but there are so many pieces (albeit small) to make an extension work, and I just don't have the time to figure it all out, let alone not having Java or Tomcat webapp knowledge.  I will have to do without this extension for now unless someone reading this builds one in the future.  I suspect it's actually pretty trivial because there's really not much to it - it's just pretty printing messages.","15/Jun/20 14:01;kangaroo22;I had some time to get back to this.  I managed to add a ""NOTIFICATIONS"" section to the Guacamole main page.  Obviously if I placed the messages in the ""html"" file that is bundled with the extension, that wouldn't be very useful.  I need to read the messages from a file.  I need to do that every time the page is loaded so that the messages will be current.  Now, it would be ideal if I could insert a PHP call into the HTML fragment that adds the notifications section which would read from a file, and add properly formatted notifications.  I don't think that's possible? The QuickConnect plugin has buttons, but it doesn't generate dynamic output.  Can you please give me an example of what I could insert into the plugin which generates dynamic output.  I can then try to figure out the rest.

It would be great if the guacamole-ext section of the documentation could provide more details and examples.  I'm sure a lot can be done if someone knows how.","15/Jun/20 18:56;mjumper;{quote}
Now, it would be ideal if I could insert a PHP call into the HTML fragment that adds the notifications section which would read from a file, and add properly formatted notifications.  I don't think that's possible?
{quote}

No, not exactly. That's a very PHP way of looking at things, but not how things work in this case. It is true that older web applications often relied on dynamically generating HTML through a server-side template language like PHP. Guacamole does not do this, instead leveraging JavaScript and REST services. The dynamic interface that you see when you use Guacamole is the result of a static, JavaScript-driven page interacting with a REST API.

Guacamole's extension API supports exposure of arbitrary REST resources, and you could certainly use that to expose a service that generates HTML dynamically, but this would be bad practice. It would be better to use the same pattern that is already used by the Guacamole interface: static HTML and JavaScript that communicates with a REST service.

Extensions normally accomplish this through combining the following:

* Altering existing HTML content through special HTML ""patches"": http://guacamole.apache.org/doc/gug/guacamole-ext.html#ext-patch-html
* Adding their own JavaScript to the existing JavaScript of the webapp: http://guacamole.apache.org/doc/gug/guacamole-ext.html#ext-manifest
* Exposing custom REST services as needed (for their additional JavaScript to consume): http://guacamole.apache.org/doc/gug/guacamole-ext.html#ext-rest-resources","15/Jun/20 19:12;kangaroo22;Thanks, Mike.  I knew I unfortunately didn't have any luck using PHP! :)

I used the ""Altering existing HTML content through special HTML patches"" process to add the ""NOTIFICATIONS"" section to the page.

Following REST, would I then need to have a listener that listens to a command requesting ""notifications"" on the server, then it returns the notifications.  I guess javascript on the page reads the notifications and formats them accordingly?   Is that how things should work? I haven't worked with anything like this before.

Do you have any examples? The only examples I have of guacamole-ext are either too simple (replacing the logo), or too different (authentication extensions).  If you have any other in between examples you can send my way, I can try to understand them, and implement what I'm after.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Limit Guacamole shared connection to local users,GUACAMOLE-1095,13310641,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kangaroo22,kangaroo22,10/Jun/20 12:26,10/Jun/20 12:26,17/Feb/21 11:13,,,,,guacamole,,,,,,,,,0,,,,,"Guacamole allows sharing of connections to anyone with the sharing URL.  I would like to be able to limit shares to users who can login to my Guacamole installation.  The user could share the link with anyone, but when the user clicks on the link, the standard Guacamole login box should pop up, then the share would be active.",,kangaroo22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-06-10 12:26:22.0,,,,,,,"0|z0fpps:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add LDAP support for nested user groups,GUACAMOLE-954,13284381,New Feature,Reopened,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,darkl0rd,darkl0rd,10/Feb/20 17:46,30/May/20 18:11,17/Feb/21 11:13,,,,,guacamole-auth-ldap,,,,,,,,,4,,,,,"As described below, the current LDAP support will query user group membership, but only immediate membership. Unlike the database auth, nested user groups are not supported. Support for nested user groups should be added.

Note that while Active Directory supports a specific filter for retrieving recursive group memberships, leveraging that would need to be done carefully. Other LDAP servers may not support that filter, and an alternative, standards-conforming mechanism would need to be used by default. If it is possible to automatically detect that the LDAP server supports this, that would be ideal. Another option might be to provide some mechanism for overriding the filter that Guacamole will use to determine membership.",,darkl0rd,fabricef,jmiles,jrs287,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-02-10 20:18:38.444,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Feb 10 20:29:33 UTC 2020,,,,,,,"0|z0bc6o:",9223372036854775807,,,,,,,,,,,,,,,,,"10/Feb/20 18:22;darkl0rd;I noticed this issue was closed, due to it being marked as a duplicate of GUACAMOLE-708. However, even though this issue seems to be implementing what I am referring to, I'm still somewhat confused as to how this did work in the past – A while ago I raised GUACAMOLE-920, prior to the official 1.1.0 release, in which this functionality was in some shape of form available.","10/Feb/20 18:24;darkl0rd;What I am after is the functionality which was implemented as part of GUACAMOLE-715.

Group exists in MySQL, User exists in LDAP but not in MySQL.","10/Feb/20 18:53;darkl0rd;It seems the problem is that nested LDAP groups do not work.","10/Feb/20 20:18;mjumper;The LDAP support does not recursively query LDAP memberships. It's not so much that nested LDAP groups do not work as that's not a feature that's currently provided.","10/Feb/20 20:29;darkl0rd;OK, noted. Implementing support for nested groups is, at least in the world of AD, relatively simple as per [https://docs.microsoft.com/en-us/windows/win32/adsi/search-filter-syntax]

I personally use this in several places (e.g. Apache) to support Nested Groups, which in an organisation are very common. The way to configure the search filter is like such:

memberof:*1.2.840.113556.1.4.1941:*=CN=whatever,OU=ou,dc=your,dc=lan

{{}}
|1.2.840.113556.1.4.1941|*LDAP_MATCHING_RULE_IN_CHAIN*|This rule is limited to filters that apply to the DN. This is a special ""extended"" match operator that walks the chain of ancestry in objects all the way to the root until it finds a match.|",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HA in Guacamole,GUACAMOLE-283,13066599,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,TdSN,TdSN,25/Apr/17 07:21,27/May/20 10:50,17/Feb/21 11:13,,,,,guacamole-client,guacamole-server,,,,,,,,4,,,,,"A great feature for guacamole would be high availability both on the client (mainly) and on the server.

In the client the ideal would be to be able to at least be able to block by the number of simultaneous connections even having an environment with several vms or containers.

I currently have an environment with 3 guacamole servers with Tomcat 8 running behind a HAPROXY. But I lose the block by simultaneous connection (I charge my clients for simultaneous connection) and I can not give up having more than one vm, because if one falls I lose all. It would also be great if the user does not need to log in again if they go to another server (session permanence). Today I work with hundreds of simultaneous users from different places.

It would also be very good to be able to separate the client from the server and be able to work on HA on the server as well.

My Environment:
3x Guacamole server and client: 0.9.12
Database and Authentication: MySQL (another vm)
File Server: SFTP (another vm)

I alread commented this on:
https://issues.apache.org/jira/browse/GUACAMOLE-189",,AlanBaban,Giaco9,jcpunk,jfranko90,lorengordon,malagoli,michaelbarkdoll,mjumper,pasik,Rajesh35,TdSN,viatoriche,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-07-15 13:33:58.026,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun May 12 00:07:39 UTC 2019,,,,,,,"0|i3e1xb:",9223372036854775807,,,,,,,,,,,,,,,,,"21/Jun/17 15:14;TdSN;I see this related old post on old Jira

https://glyptodon.org/jira/browse/GUAC-1057

I think is an way to do this on webclient app.

","15/Jul/17 13:33;AlanBaban;HI 
would you be able to share the HAproxy setting please?
i have few instances of Guacamole in LB mode, when enabled i get a blank page.
note: i am not sharing mysql database between the instances at the moment.
Thanks in advance","15/Jul/17 16:57;TdSN;My HAProxy is on Pfsense firewall.

 Automaticaly generated, dont edit manually.
# Generated on: 2017-05-15 00:05
global
	maxconn			10000
	stats socket /tmp/haproxy.socket level admin
	uid			80
	gid			80
	nbproc			1
	chroot			/tmp/haproxy_chroot
	daemon
	server-state-file /tmp/haproxy_server_state

listen HAProxyLocalStats
	bind 127.0.0.1:2200 name localstats
	mode http
	stats enable
	stats refresh 30
	stats admin if TRUE
	stats uri /haproxy/haproxy_stats.php?haproxystats=1
	timeout client 5000
	timeout connect 5000
	timeout server 5000

frontend App1-Azure
	bind			MYIP:8080 name MYIP:8080   
	mode			http
	log			global
	option			dontlog-normal
	option			http-server-close
	option			forwardfor
	acl https ssl_fc
	http-request set-header		X-Forwarded-Proto http if !https
	http-request set-header		X-Forwarded-Proto https if https
	maxconn			10000
	timeout client		30000
	default_backend BackendApp1Azure_http_ipvANY

backend BackendApp1Azure_http_ipvANY
	mode			http
	log			global
	stats			enable
	stats			uri /haproxy?stats
	stats			realm .
	balance			source
	timeout connect		3000000
	timeout server		300000
	retries			3
	fullconn 2000
	server			App_DR_3_IP_15 192.168.33.15:8080 check inter 2000  weight 2 
	server			App_DR_2_IP_4 192.168.33.4:8080 check inter 2000  weight 2 
	server			App_DR_1_IP_7 192.168.33.7:8080 check inter 2000  weight 2","15/Jul/17 18:08;AlanBaban;thanks for this Thiago..
does that mean your guac is publicly available and behind pfsense firewall?
just need to get my head around it, as my instances are publicly available behind paloalto firewalls - which doesn't have HAproxy functionality therefore i have an ubuntu server running HAproxy.

also, do you have all instances connected to the same backend database?

thanks Thiago

Alan Baban ","15/Jul/17 21:30;TdSN;Yes publicly availabe.

Same backend.

In simple way:

1-FrontEnd (NGINX) Public IP with proxy
2- PFSENSE with HAPROXY
3- Load Balance with 3 app guacamole tomcat with guacd too.
4- 1 MySQL Database

But if 1 server goes down, all clients on this server lost their connection and authentication.
I can´t implemented all servers in pointing to one guacamole server because if this server goes down all my clients goes down. I don´t know how to resolve this big problem to me, and now I opened this ticket to HA in Gaucamole server and webapp.","16/Jul/17 10:56;AlanBaban;I see, that's what I am trying to investigate as well.
At the moment I have issue of blank page when load balances. Would probably think of session aggregation between the instances.
However I am not using NGinx as frontend. Is it straight forward? Would you please share the config, and where does it sit on the network? Is it running on Ubuntu?
I will share my findings as we progress ","17/Jul/17 02:35;vnick;To implement this properly, the Guacamole Client code would have to be changed such that active connections are stored somewhere in a shared location that can be accessed by all servers participating in the front-end cluster.  Two possibilities come to mind:
* Track active connections in the database - perhaps even using the existing history table (make it so that connections that are inserted with a start date and no end date are active, or add a boolean isActive field).
* Use some sort of shared/distributed caching mechanism (Hazelcast, memcached come to mind) where multiple systems could access the data, without actually writing it to a database.

The first option is simpler to implement, maintain, and configure; the second option would probably scale better from a performance perspective.","17/Jul/17 08:14;AlanBaban;thanks Nick for commenting on this.
i can see the first option achievable with little bit of work. as i now have load balancing working with HAproxy.
is there any more information on this you can share - or any articles you are aware off?

Thanks 
Alan Baban ","22/Jul/17 04:15;TdSN;Hi Nick,

Thanks a lot for your sharing.

I studied Hazelcast, but can´t worked for me. It´s to expensive an Enterprise license for us.

I need to know how to do this High Availability by the cache option. I am not a developer, only a sysadmin.....

And the server, how to do this? Is possible?","09/Jan/19 11:25;Rajesh35;Hi All,

Do some one can able to sort out how we can setup the HA in the Gucamole setup with the apache tomcat with Mysql DB Connector. 

Rajesh M 
","09/Jan/19 11:25;Rajesh35;Hi All,

Do some one can able to sort out how we can setup the HA in the Gucamole setup with the apache tomcat with Mysql DB Connector. 

Rajesh M 
","09/Jan/19 11:36;vnick;[~Rajesh35] The status on this JIRA issue has not changed, so nothing has been done with this, yet.  If you have a question about configuring Guacamole, the mailing lists are the better place to have those discussions.","10/May/19 19:15;michaelbarkdoll;Hi [~nick.couchman@yahoo.com],

Can I be of any assistance on helping with this feature request?","11/May/19 21:15;mjumper;[~michaelbarkdoll], by all means! :) Contributions are welcome.

Did you have anything specific in mind with respect to approach?","12/May/19 00:07;michaelbarkdoll;Hi [~mike.jumper],

Well, I'm hoping to first attach a remote debugger to my tomcat server to try and help fix a bug that I reported related to a balancing connection group.  Once, I'm a bit more familiar with the code base I was thinking about trying to help with this feature request.

I'm interested in the memcached option that Nick was talking about ""Use some sort of shared/distributed caching mechanism (Hazelcast, memcached come to mind) where multiple systems could access the data, without actually writing it to a database.""

I'm rather new to the idea and structure of your project and memcached, so I'm sure there would be a large learning curve on my end.  However, I see this feature request is 2 years+ out so maybe it is something I can accomplish with a bit of work.

I have access to some code examples of using memcached using spymemcached as a dependency inside maven from ""Getting Started with Memcached"" on packtpub.  Their examples look like you'd need to run some type of controller container.  So, that is the route I was initially planning to utilize, but I'm open to directions and trying to help form what you're looking to accomplish.

 ",,,,,,,,,,,,,,,,,,,,
allow limit number of concurrent  logins for organizational groups,GUACAMOLE-1079,13307290,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kangaroo22,kangaroo22,25/May/20 19:58,26/May/20 13:42,17/Feb/21 11:13,,,,,guacamole,,,,,,,,,0,,,,,"Concurrency limits apply only to balanced groups.  This is the way Guacamole works right now.  I'm using organizational groups for a variety of reasons.  I would still like to limit the number of simultaneous logins in an organizational group.
 
My lists of reasons for using organizational group:
 
1) I've seen cases where-by a student connects to a system that looks to be available to Guacamole, but there are underlying issues with that system so it's not *really* available.  For example, on one Windows system, it would accept a username and password, and hang in the login process because there was some temporary issue with networking (resolved after a reboot).  There have been other similar problems as well.  Because that system was ""available"", Guacamole doesn't know it's not really available.  As a result, a student would get that system when logging in and would potentially be stuck with that system.  With organizational group, the student could try one system, see it doesn't work, and then try the next system which likely will be fine.  It's not ideal, but it makes sense to me.
 
2)  This second scenario likely doesn't affect many people.  I need to be able to reserve certain systems for certain classes at certain times.  Even though there are say, 100 systems in one group, maybe I may need to reserve 10, 40, or 50 of them at different times.  The rest of the systems are available for everyone.  Since the amount of systems to be reserved differs based on the students in the class, and course requirements, it's difficult to build a group specifically for the hosts to be reserved (without playing the game of moving hosts into different groups for the duration of the reservation - something that I definitely considered doing, but would rather not do).  With a balanced group, if the user gets a system in the group that they are not allowed to access at this point in time - a system that is up and available in every other way - they will be stuck, even though there may be 50 other systems they can use!  I understand that the systems in the balanced group are all supposed to be available to the user.  I can't guarantee that.  At least if I use an organizational group, I can pop up a message that says - ""Sorry - you can't use host 1-50 right now , but host 51-100"" are available for your use.  With a balanced group, they would be stuck.  
 
 
3) Another unique scenario that affects me is one that I mentioned on the Guac mailing list before.  This is the case where I had users in one of my initially balanced groups logging into guac with their individual AD credentials, but then guac would login to xrdp with one common user (""user"").  This environment is setup a certain way, and configuration reset between logins.  I had an issue here where-by because the login via xrdp was the same on all systems, if a user was disconnected from one session, someone else could connect and take over their session.  One way that was recommended to me to solve this problem was by terminating disconnected sessions.  Given the nature of the environment (ie. that the student will lose their work if the environment resets), I didn't have the heart to logout disconnected sessions.   I fixed the identical user issue by allowing logins from these AD accounts into the system, but then switching the ""common"" user during the login session.   Now, if a user was disconnected, another user couldn't come along and get *their* session, but they *could* come along and get their *host* (because on another discussion, I understood that Guacamole allows another user to connect to a host with a disconnected session).  I dealt with this problem by making it so that it only allows the user who disconnected from the session to reconnect.  If a different user connects to that host, it tells them that the system is presently unavailable and with a list of other hosts that are available.  It gives 10 minutes for the original user to come back before terminating the session (and keeps their data which I can restore separately if they come back later).   With a balanced group, if a user tries to connect to a host with a disconnected session, even if other systems were available, they wouldn't be able to connect to them.
 
4) With balanced groups, I believe at least the history shows the user as connecting to the ""balanced group"" name and not the individual host within the group.  I already have to deal with vague requests like ""my machine is not working properly"".  It makes it harder for me to debug.  By using the organization group, the history shows me where the user was logged in.  It saves extra back and forth with the user trying to figure out which machine they were using - a detail they probably forgot anyway.
 
I understand that all of these scenarios are not necessarily the typical use case.  I am submitting this here as a placeholder.  Maybe other people will have similar requests.",,jcharaoui,kangaroo22,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-05-26 01:05:40.217,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue May 26 13:42:58 UTC 2020,,,,,,,"0|z0f548:",9223372036854775807,,,,,,,,,,,,,,,,,"26/May/20 01:05;vnick;{quote}Concurrency limits apply only to balanced groups.
 ...
{quote}
Just a clarification, here - concurrency limits apply only to _connections made directly to_ balanced groups - they do not apply to connections made directly to individual connections within balanced groups.

As mentioned on the list[1], implementing the functionality requested, here, would be a relatively fundamental change in the way attributes are applied, basically making those attributes filter down to the underlying connections and connection groups in a way that currently does not happen at all within the Guacamole Client interface. Also, as I mentioned, I'm not opposed, just want to make sure that it's understood that the change being requested here is *not* as simple as saying ""just apply the same limits to organizational groups as are already applied to balancing groups.""

If we decide to go this route, I wonder if the most sane thing to do would be to introduce a third type of connection group, rather than modifying how either of the existing groups works?

[1] - [http://mail-archives.apache.org/mod_mbox/guacamole-user/202005.mbox/%3Cem90944368-0d96-41aa-a088-fb530bcd18bb%40desktop-n3440sj%3E]","26/May/20 13:42;kangaroo22;When you have the time, I'm interested in hearing your thoughts on what this third type of connection group could potentially be....",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for chromium keyboard lock allowing for system keys and shortcuts,GUACAMOLE-989,13292307,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,acplex,acplex,18/Mar/20 00:36,21/May/20 17:49,17/Feb/21 11:13,,,,,,,,,,,,,,2,,,,,"When accessing guacamole in a browser it would be great to have full RDP-like keyboard key and shortcut access. It is very easy to perform actions by special shortcuts (ie, Windows+Key, Alt+Tab) local PC instead of the intended remote PC as well as CTRL key shortcuts on the local browser instead of the remote browser. Another problem is closing the guacamole tab by accident via Ctrl+F4 (I've done this several times!). Some similar issues were voiced in GUACAMOLE-121 regarding CTRL+W.

Please add support for Chromium's system keyboard lock API which allows a rich keyboard experience in full screen mode (you hold ESC for 2 seconds to exit). This would allow using special keys and shortcuts that we use habitually, and habits are hard to break. So why break them? Instead add keyboard lock functionality.

Main page: [https://www.chromestatus.com/feature/5642959835889664]

W3C Spec: [https://wicg.github.io/keyboard-lock/]",,acplex,Delemas,odairmun,Toff,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-19 15:11:19.83,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu May 21 17:44:53 UTC 2020,,,,,,,"0|z0cmrs:",9223372036854775807,,,,,,,,,,,,,,,,,"19/Apr/20 15:11;Toff;I've made a small user script implementing this.

It adds a simple overlay button to go full screen and call the keyboard lock.

It is nice to be able to use most shortcuts again in RDP :)

[https://gist.github.com/toff/ab1ba901dc663297af1fb4b8e630d899]

 

 ","29/Apr/20 18:25;Delemas;This currently tagged as minor, and it doesn't really help me but it is the first attempt to actually fix an issue that drives me batty when using guacamole.  Please consider raising the priority.  The issues this addresses is crippling end users trying to use guacamole.
End users shouldn't need to consider custom browser compiles only to not have critical UI issues when using guacamole.
Basically the browser intercepts something destined to my text editor and does unwanted things.
The worst of which is CTRL w which in many text editor normally deletes a word which I try to use all the time.
Of course Firefox promptly destroys my session closing my guacamole tab in my browser. 
During the switch to web extension addons Firefox disabled all the addons which used to allow customization of keyboard short cuts.
 One currently has to hack the browser code or worse recompile it to get a browser without the CTRL w. 
If we can get chromium working with Toff's  FullScreenGrabKeyboard.user.js  to ""lock"" the keyboard, we may be able nudge Firefox development hard enough that ""this works properly in chromium please fix this use case"" and they might actually do it.","29/Apr/20 19:08;vnick;[~Delemas]: I understand that it is a bigger deal for you and your user base.  The priority is based on the priority for the project, overall, and we have several other things we're trying to finish up for the 1.2.0 release that trump this in terms of priority.

Also, this feature is based on a very new feature in Chrome (and _maybe_ other browsers), and is unlikely to be supported on many of the browsers that people accessing Guacamole would use.  So, while I totally agree that it would be a great feature to have implemented and I'm happy to see it added, I have trouble making it a major or critical priority.","29/Apr/20 19:13;vnick;Also, looking at the code proposed by [~Toff], this would be dependent upon GUACAMOLE-124, as we would have to programmatically know that we were going into Full Screen mode before locking the keyboard.  I would be opposed to a change that locks the keyboard by default as soon as the client starts - this would defeat several things, like the hidden menu (Ctrl-Alt-Shift) that are core designs of Guacamole.","29/Apr/20 19:15;Delemas;[~vnick] Understood the priorities are different. 
 I will be very glad when a packaged guacamole 1.2.0 built against packaged freerdp 2.0 is released. All these snapshot releases built using bash scripts are highly unmaintainable. 
 Please realize from an end user usability point of view, in my opinion, I would tag it critical.
 I realize that is one user opinion.

Really the intercept is needed outside of full screen mode too but the first step is replicating a fix of any sort even if I have to compile a custom browser to do that.
 My dream is to have a check box on guacamole  CTRL ALT SHIFT screen that says intercept all allowable keyboard input for this tab except CTRL ALT SHIFT. That would solve so many problems above and beyond CTRL w.

[~Toff] I've dusted off a Chromium browser just to attempt to use your FullScreenGrabKeyboard.user.js.
 I'm sick of losing sessions every time I delete a word when using Firefox.
 Apparently Tampermonkey does exist for Chromium as well.
 Are you installing FullScreenGrabKeyboard.user.js into guacamole 1.1 directly or are you injecting using Tampermonkey or something similar to apply it?","29/Apr/20 19:40;vnick;{quote}
I will be very glad when a packaged guacamole 1.2.0 built against packaged freerdp 2.0 is released. All these snapshot releases built using bash scripts are highly unmaintainable.
{quote}

Yeah, if you're using it in any sort of a production environment I'd stick with the released code - 1.1.0 - for the time being.  We are working on 1.2.0, and we're already piling up the issues and fixes for 1.3.0 to follow that.  But, I think everyone's day jobs have gotten busier lately, so it's been hard to fit in the time to contribute and review.

{quote}
Really the intercept is needed outside of full screen mode too but the first step is replicating a fix of any sort even if I have to compile a custom browser to do that.
My dream is to have a check box on guacamole  CTRL ALT SHIFT screen that says intercept all allowable keyboard input for this tab except CTRL ALT SHIFT. That would solve so many problems above and beyond CTRL w.
{quote}

I wouldn't be opposed to some sort of option within the hidden menu that enables the keyboard lock and then closes the hidden menu.  This seems reasonable.","29/Apr/20 19:57;Toff;[~Delemas] I use ViolentMonkey to inject the script into guacamole.

Go to your guacamole login page, click on the ViolentMonkey icon, then click the ""+"" to create new script, keep the ""@match"" line.

Copy/paste the script, adjust the ""@match"" line, save and then reload page.

You now have a small button in the top/left corner.

Sometimes I forget to click on it BEFORE login, and then I get in to a new empty session with a different resolution :( I wish it would just resize the screen.

And I'm a Firefox user but I can't live without shortcuts in RDP.","30/Apr/20 15:51;vnick;So, for all of you out there watching this issue and hoping for magic, please be aware that it's more complicated than just going into full screen and enabling keyboard lock.  This may capture *some* keys or key combos that would otherwise propagate down to the browser or system, but it won't capture *all* of them.  The documentation specifically talks about System Handlers:

https://wicg.github.io/keyboard-lock/#system-key-press-handler

The gist of it is that the browser *cannot* stop the underlying platform from handling certain key press sequences, and so in order to get those system-level key presses to be allowed to lock into Chrome you will have to do some level of configuration/registration/modification at the system-level.  In my testing on XFCE on Fedora, Alt-Tab is still intercepted by the window manager and results in the standard Alt-Tab behavior, and that key press is not passed through to the Guacamole connection.

And, lest someone ask if we can add code/plugin/extension to Guacamole to help with these system-level registrations, my inclination is no, that is not something we'd be interested in doing, as it defeats the nature of a ""client-less"" remote desktop system that Guacamole is designed to be.

So, we can give it our best shot and enable the keyboard lock via either menu item or full screen (after GUACAMOLE-124 is merged), but please be aware of the limitations of this feature.  Or, if there's something more that I'm missing in all this, please feel free to offer your input and guidance.","30/Apr/20 16:06;vnick;In case anyone is interested I've added the menu item for this in the Guacamole Hidden menu (Ctrl-Shift-Alt) and opened a Pull Request against the master branch.  I'd welcome any testing or comments on the code - if there's something I missed, or if your testing does show that it actually captures more keys than before, that feedback would be appreciated.

https://github.com/apache/guacamole-client/pull/505","30/Apr/20 17:13;Delemas;[~Toff] that FullScreenGrabKeyboard.user.js is awesome! It captures the CTRL w which was driving me batty and keeps Chrome from getting it.
 Honestly I don't care about the other hotkeys as things like alt-tab are not destructive to the session. I use CTRL w all the time and now I can still type normally.
I retested this and both an xrdp based Ubuntu 18.04 connections and a Windows 10 VM RDP work. First time I used Windows the little FS icon didn't appear but it is there now.
 [~vnick] I would love to try that pull but I'm still hamstringed by the lack of a 1.2.0 release tar. I will try it eventually.
 I am building a new guac 1.2.0 VM where I upgraded to Ubuntu 20.04 to get the new Tomcat. 
 Upgrading my OS I ended up with an upgraded database but in an environment that guac 1.1.0 cannot connect to. Once the guac 1.2.0 gets posted I believe I should be able get the database driver to work.","30/Apr/20 18:48;vnick;[~Delemas]
{quote}
I would love to try that pull but I'm still hamstringed by the lack of a 1.2.0 release tar. I will try it eventually.
I am building a new guac 1.2.0 VM where I upgraded to Ubuntu 20.04 to get the new Tomcat.
Upgrading my OS I ended up with an upgraded database but in an environment that guac 1.1.0 cannot connect to. Once the guac 1.2.0 gets posted I believe I should be able get the database driver to work.
{quote}

Understood.  This feature won't be in the 1.2.0 release - it'll be in 1.3.0.  We'll release a 1.2.0 release tar when we release 1.2.0 - it isn't ready, yet.","20/May/20 13:45;odairmun;I reinforce the request for priority in this change of shortcut keys. We are losing a lot of usability.","20/May/20 16:02;vnick;[~odairmun]:
Thank you for your input.  A few points:
* However, I have already attempted an implementation and have asked for people to try it out.  I have no feedback on it, yet.
* I also continue to question how valuable this will really be, since even the Chromium Keyboard Lock will not prevent the operating system from intercepting key combinations.
* That said, I believe it is likely we will implement it in some form or another (maybe not exactly as it is today), but it will not be in the 1.2.0 release.","20/May/20 17:01;odairmun;Understood. With ALT + TAB I will gain enormous productivity in my environment. Can I implement this?","20/May/20 18:10;vnick;[~odairmun]: In my testing, Alt-Tab was not captured by the keyboard lock, and was still intercepted by the client operating system (not passed through to the remote system).","20/May/20 18:21;odairmun;How do I implement?","20/May/20 18:41;vnick;[~odairmun]: I'm not sure what you're asking.  If you're asking how to capture Alt-Tab and send it to the remote system, I don't think it is possible - the client operating system will always intercept the Alt-Tab key combo and will not pass it through to the browser, so it cannot be intercepted by the keyboard lock API.

If you mean, how do you implement the changes I have made, you need to clone the git repo and then merge the pull request mentioned above, and build the client code.  You can then deploy the resulting WAR file (guacamole/target/guacamole-1.2.0.war) and test it out.","20/May/20 19:06;odairmun;thanks, i will download your change.","21/May/20 11:58;Toff;I've used Guacamole more with my user script (sorry Nick it's a bit more involved to rebuild Guacamole and it must be done server side).

For me, remote Alt+Tab works on both Windows 10 + Chrome and Ubuntu 18.04 + Gnome flashback + Chromium.

I've noticed an important thing while testing on my local network, your site must be using https or you must add the flag {color:#000000}--unsafely-treat-insecure-origin-as-secure=""http://example.com""{color} when launching Chrome. Without this, keyboard.lock will fail.{color:#000000}
{color}

Also the Guacamole hidden menu on Ctrl+Alt+Shift works correctly even with keyboard.lock.","21/May/20 13:09;vnick;Thanks, [~Toff].  There may be some connection between entering full-screen mode and enabling keylock that allows some of the key combinations to work as expected.  I'm definitely using HTTPS, and I tried combinations of full-screen and windowed mode, and didn't really see a change in behavior.  What I did not try was disabling the Alt-Tab key combo on my window manager (XFCE), but I don't know that this is a practical test, since requiring everyone to disable on their client sort of defeats the purpose of the entire exercise :-).","21/May/20 16:47;odairmun;Sorry, I didn't quite understand. What you said is that ALT + TAB should already work normally? I am using HTTPS with invalid certificate. How could you adjust?","21/May/20 17:25;acplex;According to all of the documentation for Keyboard Lock, Alt+Tab and other system key combinations are designed to work. It was basically built for this exact purpose, so it not working would be a bug or configuration problem vs expected behavior.

From [https://www.chromestatus.com/feature/5642959835889664|https://www.chromestatus.com/feature/5642959835889664)]:
{quote}While in fullscreen, this API allows apps to receive keys that are normally handled by the system or the browser like Cmd/Alt-Tab, or Esc.
{quote}
From [https://github.com/WICG/keyboard-lock/blob/gh-pages/explainer.md|https://github.com/WICG/keyboard-lock/blob/gh-pages/explainer.md)]:
{quote}All the browser and OS shortcuts, such as Cmd/Alt+Tab should be used to switch windows on the remote computer, while Escape can be used to cancel a command.
{quote}
From [https://wicg.github.io/keyboard-lock/]:
{quote}Some examples of the keys that may be required are Escape, Alt+Tab, Cmd+`, and Ctrl+N.

By default, these keys are not available to the web application because they are captured by the browser or the underlying operating system. The Keyboard Lock API enables websites to capture and use all available keys allowed by the OS.
{quote}","21/May/20 17:44;Toff;[~odairmun] : what are you testing ?

If you testing Nick's patch you also need to use : [https://github.com/apache/guacamole-client/pull/470]

Because you need to go full screen for keyboard lock to work.

Also you should see the message ""Press and hold Esc to exit fullscreen"" and not ""Press F11 to exit fullscreen"".

I'm not sure it will work with an invalid certificate.

EDIT : it works on [https://expired.badssl.com/]",,,,,,,,,,,,
Add support for querying multiple LDAP servers,GUACAMOLE-957,13284581,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,wolfaba,wolfaba,11/Feb/20 13:30,20/May/20 20:21,17/Feb/21 11:13,,,,,guacamole-auth-ldap,,,,,,,,,1,,,,,"Hello,

we have configured guacamole with postgresql (for configuration) and LDAP (for authentication only) in version 1.0.0. The LDAP server are 3 Windows AD servers.

We have configured guacamole LDAP auth with {noformat}
ldap-hostname: SERVER1 SERVER2 SERVER3
{noformat}

During authentication, guacamole connects to first server. If the connection fails, it connectes to seconds server and if this connection fails to, it connects to the third server. It works great in guacamole 1.0.0. But the version 1.0.0 has problem with LDAP groups.

So we have updated to 1.1.0. But in this configuration the multiple LDAP hosts are incorrectly parsed and login does not work with ""Invalid login"" on login page and following error message in the log {noformat}
13:21:24.339 [http-nio-8080-exec-16] ERROR o.a.g.a.ldap.LDAPConnectionService - Binding with the LDAP server at ""SERVER1 SERVER2 SERVER3"" as user ""bind-dn"" failed: ERR_04121_CANNOT_RESOLVE_HOSTNAME Cannot connect to the server, Hostname 'SERVER1 SERVER2 SERVER3' could not be resolved.
13:21:24.340 [http-nio-8080-exec-16] ERROR o.a.g.a.l.AuthenticationProviderService - Unable to bind using search DN ""bind-dn""
13:21:24.342 [http-nio-8080-exec-16] WARN  o.a.g.r.auth.AuthenticationService - Authentication attempt from [10.0.48.1, 127.0.0.1] for user ""ad.user@domain"" failed.
{noformat}

Could you verify this issue? Is there some other possible format for multiple hostnames in *ldap-hostname* attribute? I have already tried to use "","" (comma) instead of space and to use LDAP URI format, but nothing works.

Thank you for you answer.

Regards,

Robert Wolf.
",,bgarlock,mjumper,wolfaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-02-11 18:01:27.359,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed May 20 20:21:00 UTC 2020,,,,,,,"0|z0bdf4:",9223372036854775807,,,,,,,,,,,,,,,,,"11/Feb/20 18:01;mjumper;The {{ldap-hostname}} parameter takes a single hostname. It's not a bug; that property does not accept multiple values.","11/Feb/20 18:05;wolfaba;Hello Mike,

in the version 1.0.0 I could write multiple hostnames and if I blocked the first server (using iptables -I OUTPUT -j REJECT -d SERVER1) guacamole has used the SERVER2. And same for SERVER3 if both SERVER1 and SERVER2 were inaccessible.

Could you find out, what LDAP library/functions does v1.0.0 use and what the v1.1.0? There must be some change.

If this is not supported anymore, is there any other possibility to enter multiple LDAP servers?

Thank you.","11/Feb/20 18:09;mjumper;{quote}
Could you find out, what LDAP library/functions does v1.0.0 use and what the v1.1.0? There must be some change.
{quote}

http://guacamole.apache.org/releases/1.1.0/#migration-to-the-apache-directory-api

{quote}
If this is not supported anymore, is there any other possibility to enter multiple LDAP servers?
{quote}

It was never supported. If what you were doing was working before, what you were relying on was undocumented behavior that even we were unaware of. It was not an intentional feature.","11/Feb/20 18:19;wolfaba;{quote}It was never supported. If what you were doing was working before, what you were relying on was undocumented behavior that even we were unaware of. It was not an intentional feature.{quote}
OK, thank you :D Then *new feature* is correct :) Thank you for implementing (y)","20/May/20 20:21;bgarlock;This would be a very welcome feature for when we need to patch our AD servers and reboot them, which currently causes a brief outage for end users authenticating.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Connexion availability schedule,GUACAMOLE-1062,13303389,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jcharaoui,jcharaoui,07/May/20 13:09,07/May/20 13:25,17/Feb/21 11:13,,1.1.0,,,guacamole,,,,,,,,,1,,,,,"We'd love to be able to specify, for a given connection or connection group, an hourly timeframe (eg. 2PM to 4PM) during which the connection may be used. A number of minutes before the end of the time slot, the user would receive a message of imminent disconnection. If the user stays connected, then at the end of the time slot the user is simply disconnected automatically.

Our specific use case is to provide remote access to student labs during the present COVID-19 pandemic. These labs are to be used in the context of remote teaching. The challenge is that more than one group of teacher/students are to share the same lab and set of machines.

We need to be able to manage the timeslots for which each users are able to access the machines, otherwise we worry that at the beginning of any given remote class, students from other groups may already be occupying a number of machines. We could do this by creating multiple connexion groups with different schedules, using the same hostnames/machines, and assign access to those connections accordingly.

There's already the ability to limit access per user account, but this isn't ideal as it would prevent users from using any other connection (eg. to free-access labs without a class schedule) outside those limits.",,Foobar64,jcharaoui,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-05-07 13:09:40.0,,,,,,,"0|z0eh20:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
vnc clipboard support unicode,GUACAMOLE-1043,13300325,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,lxmlxm,lxmlxm,22/Apr/20 17:29,23/Apr/20 13:44,17/Feb/21 11:13,,1.1.0,,,VNC,,,,,,,,,0,,,,,"as tigervnc server now support full unicode with clipboard in version 1.10.1

 

when set clipboard to utf-8 in guacamole, it will still in mass when paste

 

how to support Unicode clipboard in  guacamole",,lxmlxm,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-22 19:17:32.329,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Apr 23 13:44:26 UTC 2020,,,,,,,"0|z0dygg:",9223372036854775807,,,,,,,,,,,,,,,,,"22/Apr/20 19:17;vnick;With VNC support in Guacamole, the underlying libvncserver/libvncclient libraries have to support this functionality, as well, so it may be more than just adding the feature to Guacamole.","23/Apr/20 04:17;lxmlxm;reference to tigervnc's release note `The clipboard now supports full Unicode in the native viewer, WinVNC and Xvnc/libvnc.so`","23/Apr/20 13:44;vnick;See:
https://github.com/LibVNC/x11vnc/issues/77

At present it does not look like the LibVNC libraries support encoding other than Latin-1.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
enable concept of global policy enforcement to restrict options,GUACAMOLE-1010,13296397,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,jhaar,jhaar,06/Apr/20 01:46,06/Apr/20 12:23,17/Feb/21 11:13,,,,,guacamole-auth-jdbc,,,,,,,,,0,,,,,"guacamole already has lots of options available to everyone who can create/edit connection profiles - in particular ""device redirection"".

This enables organizations who want to restrict things to do so - but only if they remove the option for end-users to create new connections. ie orgs have to go complete ""nanny state"" mode and remove all versatility from users.

How about if you enabled an ""admin only"" mode where options could be disabled globally within guacd.conf, and then only accounts with full admin privs could even see them? Then when other users with ""create"" access go to create/edit a connector, those options don't even show up - thereby stopping them from using them. I think the sections named ""Remote Desktop Gateway"", ""Device Redirection"", ""Preconnection PDU / Hyper-V"", ""CONCURRENCY LIMITS"", ""LOAD BALANCING"", ""GUACAMOLE PROXY PARAMETERS"", ""Screen Recording"" and ""SFTP"" all should be disable-able. That would allow orgs to allow individuals the flexibility of being able to create their own connectors, but restrict their options to a level the org is comfortable with - and with those areas not even showing up to the end-user, it would improve ease of use (you have to know quite a bit for most of those options to even make sense).

Also, clipboard itself should really be a ""device redirection"" option too. I think clipboard in a connection profile should able to be configured as bidirectional (browser<=>server), or browser=>server only (server<=>server should always be allowed)

 

Thanks for listening!

 

Jason",,jhaar,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-06 12:21:57.331,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Apr 06 12:21:57 UTC 2020,,,,,,,"0|z0dasw:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Apr/20 12:21;vnick;[~jhaar]: Thanks for the detailed description - we'll definitely consider whether this seems like something that would have value to add to the Client.  I can definitely see your use-cases, there, so I'm not opposed to it on the surface - it'll probably depend on the priority of other issues and if anyone has time to work on it.

Regarding one of your points, you mention the ability to adjust clipboard functionality - this has actually already been implemented in the git repo and is due out in the next version - see GUACAMOLE-381.  In addition to that, the feature to selectively disable file uploads and downloads should also be in the next version, as covered in GUACAMOLE-474.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Docker: Allow configuring Tomcat's RemoteIPValve,GUACAMOLE-1005,13295709,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,gabibbo97,gabibbo97,02/Apr/20 06:51,02/Apr/20 14:00,17/Feb/21 11:13,,1.1.0,,,guacamole-client,,,,,,,,,1,features,,,,"Currently there is no easy way in Docker environments to set up the RemoteIPValve as indicated in [https://guacamole.apache.org/doc/gug/proxying-guacamole.html]

 

Correctly setting this variable allows to correctly perform access logging and allows to avoid the ""Connection already in use by this user."" error.

I already have the code available on [https://github.com/gabibbo97/charts/blob/5686c34ca599edebaa5e65599f0fcb211faf5c2f/charts/guacamole/scripts/setup-proxy-valve.sh#L4] and the code is almost a copy of the script mentioned there.

 

Code PR: [https://github.com/apache/guacamole-client/pull/489]

Docs PR: [https://github.com/apache/guacamole-manual/pull/130]",,DouglasHeriot,gabibbo97,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-02 14:00:13.369,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Apr 02 14:00:13 UTC 2020,,,,,,,"0|z0d73c:",9223372036854775807,,,,,,,,,,,,,,,,,"02/Apr/20 14:00;DouglasHeriot;I just solved this last week by mapping that xml file as a single file volume over the top of the default one. (yuck)

This looks like a much better solution!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for x11vnc -ncache,GUACAMOLE-963,13286105,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,kenzierocks,kenzierocks,18/Feb/20 21:56,18/Feb/20 22:30,17/Feb/21 11:13,,,,,VNC,,,,,,,,,0,,,,,"I would like Guacamole to support x11vnc's {{-ncache}} option.

In my mind there are two possible ways to do this: either allowing users to crop out sections of the connection (they would still need to be persisted in the VNC client's memory, though this does save on network transmission to the Guacamole client); or allow users to scale the view by _width_ rather than _height_. The latter would implicitly hide the ncache space off-screen if the width of the screen matches that of the other screen, though it wouldn't work very well if they aren't the same.",,kenzierocks,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-421,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-02-18 22:00:27.075,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Tue Feb 18 22:00:27 UTC 2020,,,,,,,"0|z0bmts:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Feb/20 22:00;mjumper;Guacamole's protocol supports client-side bitmap caching. It would be better to either allocate an off-screen buffer the size of the cache required by X11VNC, thus keeping the display the expected size (easier), or dynamically translate the copies to/from the X11VNC cache area into separate buffer copies (which would likely have better memory performance).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Init DB with custom Admin password,GUACAMOLE-907,13275304,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mathieu.brunot,mathieu.brunot,18/Dec/19 18:19,18/Dec/19 18:20,17/Feb/21 11:13,,1.0.0,,,guacamole-auth-jdbc-mysql,guacamole-auth-jdbc-postgresql,guacamole-auth-jdbc-sqlserver,,,,,,,0,,,,,"The initdb.sh script currently displays the content of the init scripts for the selected database type.

It would be nice if we could have more options for this script, for instance allowing to set the guacadmin password to something else.",,mathieu.brunot,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-12-18 18:19:47.0,,,,,,,"0|z09t6w:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Serbian translation,GUACAMOLE-881,13256759,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mnikolic,mnikolic,15/Sep/19 22:32,15/Sep/19 22:32,17/Feb/21 11:13,,,,,guacamole,guacamole-auth-cas,guacamole-auth-duo,guacamole-auth-jdbc,guacamole-auth-ldap,guacamole-auth-openid,guacamole-auth-radius,guacamole-auth-totp,,0,,,,,"Add Serbian language support to the guacamole-client.

 

Serbian language uses both Cyrillic and Latin scripts, so two translation should be provided, sr-cyrl and sr-latn.

 

 

 ",,mnikolic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2019-09-15 22:32:07.0,,,,,,,"0|z06nn4:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for TN5250 terminal,GUACAMOLE-860,13248694,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,Niubbo75,Niubbo75,03/Aug/19 02:59,19/Aug/19 01:40,17/Feb/21 11:13,,,,,Telnet,Terminal,,,,,,,,0,features,,,,"In a scenario to give the possibility to work on IBM AS400 with all function keys working properly, there is the need to have Emulator 5250, the ""simple"" telnet could not support all the functions required to work properly on AS400",IBM AS400,Niubbo75,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-08-18 22:04:31.368,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Aug 19 01:40:43 UTC 2019,,,,,,,"0|z05avs:",9223372036854775807,,,,,,,,,,,,,,,,,"18/Aug/19 22:04;vnick;I'm continuing to spend time working on this as I have opportunity.  One of the things that has become clear as I've worked on this is that TN5250 is not so much an extension of the Telnet protocol as it is another protocol (SNA) encapsulated within the Telnet protocol.  It appears that many AS/400 systems provide some compatibility for Telnet when you connect from a standard client, but connecting from a true TN5250 emulator involves negotiation of the TN5250 protocol, at which point telnet is simply the transport used for actually getting the 5250 data between the AS/400 and the client.

Furthermore, the TN5250 protocol does some pretty interesting things.  I have a packet capture or two I'll try to attach, here, although I need to sanitize them a bit, but, whereas standard SSH and Telnet terminals write line-by-line and tend to clear and redraw the screen, TN5250 actually sends instructions for placing certain items at certain rows and columns on the screen.  So, implementing this in Guacamole is going to mean some more specific and direct manipulation of the terminal.

TN5250 also has exactly two sizes of screen - 24 x 80 and 27 x 132.  There's no dynamic sizing, and no other sizes.  There are a variety of monochrome and color options of these sizes, specified in the RFC linked above, but the sizes are fixed.

Finally, TN5250 does not use ASCII for its character set, it uses EBCDIC, so some amount of translation will need to be done between writing standard ASCII characters and emulating the IBM codepages.

None of this is to say it isn't worth doing - I actually think it would be really nice to have this as part of Guacamole, and I'll keeping hacking away at it.  It's just a little more involved than I first imagined :-).","19/Aug/19 01:40;Niubbo75;Thanks Nick! I'm not able to help you coding but I can help you testing it when you're ready to do. I can share with you an IBM AS/400 to let you check if all works ok, just let me know when you need it. :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for U2F Authentication,GUACAMOLE-839,13243288,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,bmachek,bmachek,05/Jul/19 04:21,05/Jul/19 15:22,17/Feb/21 11:13,,,,,guacamole-client,,,,,,,,,0,,,,,"Implement Universal 2nd Factor authentication support, which appears to be a hardware key mechanism.",,bmachek,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-07-05 12:10:56.441,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Jul 05 15:22:04 UTC 2019,,,,,,,"0|z04e48:",9223372036854775807,,,,,,,,,,,,,,,,,"05/Jul/19 12:10;vnick;I have not seen any requests for or conversations about implementing support for it at this point.","05/Jul/19 15:22;vnick;From what I see online, it looks like this is probably some form of certificate-based authentication, similar to a Smart Card or the like, so my guess would be that adding x509 authentication support to Guacamole would also cover this, and from that point would be a matter of O/S and Browser support for talking to the U2F device.

It is worth noting that this can probably be done, already, in Guacamole, through other mechanisms - SSO, in particular.  It's quite possible CAS supports this, already (not certain on that), and any other SSO systems also supported by Guacamole would likely be able to give this support.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Per-user SSH key,GUACAMOLE-426,13111963,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,deepwather,deepwather,25/Oct/17 13:43,22/Jun/19 20:22,17/Feb/21 11:13,,,,,guacamole-auth-jdbc,,,,,,,,,1,,,,,"Currently guacamole does not allow having each user with his/her private ssh-key and username defined.

I was thinking about a possible solution. Briefly, it goes like this: 
There would be an additional entry in the user settings, where each user can define his/her private ssh-key.  
There should also be an override option for the current user mapped to a specific server. 

I attached a possible graphical implementation.  

Technically, I have the idea to check the following upon each new session opening: 
If the override option is set and the specific user credentials username and specific ssh-key are valid, then I would replace the default username and the ssh-keys string with the values specified by the user settings.",,deepwather,marcodigioia,mjumper,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-96,,,,,,,,,,,,,,,,,,,,"25/Oct/17 13:37;deepwather;Guacamole_new_feature.png;https://issues.apache.org/jira/secure/attachment/12893941/Guacamole_new_feature.png",,,1.0,,,,,,,,,,,,,,,,,,,,2017-10-26 02:28:14.65,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Jun 22 20:22:36 UTC 2019,,,,,,,"0|i3loof:",9223372036854775807,,,,,,,,,,,,,,,,,"26/Oct/17 02:28;mjumper;Part of what I'm working on with GUACAMOLE-96 involves allowing extensions to interact, and for things like the JDBC auth to serve as arbitrary storage for data provided by other extensions. If that works as expected, that should allow this sort of thing to be provided via an extension as well.","03/Feb/18 22:54;vnick;This issue depends on GUACAMOLE-96, which enables the JDBC extension to store arbitrary information for other extensions.  Since that's now implemented (mostly), that should make room for this to continue on - as soon as someone has time to work on it :-).","17/Jun/19 17:32;marcodigioia;Hi, 

any feedback about this new feature? 

This feature could be very convenient for AWS connections.

I'm using Guacamole for AWS access on EC2 instances on my company. 

thank you","21/Jun/19 21:31;vnick;No, nothing, yet.  Mike has some stuff in the works that allows secrets to be stored in the Azure Key Vault, but I'm not sure how much that'll help out with this issue.  There's been some other talk about it, but we're focusing on some other priorities for the 1.1.0 release.","22/Jun/19 20:22;mjumper;The token injecting convenience classes from those changes would likely help. An injected parameter token is exactly how an extension like the one proposed here would dynamically provide the user's SSH key to the extension configuring the connection.

The key vault support would actually already provide exactly this, as long as it's sufficient for an administrator to be the one maintaining the keys. It allows for arbitrary tokens to be mapped to arbitrary credentials stored in a vault, including on a per-user basis. The recent support for parameter token substitution using LDAP attributes would also provide this if the user's private key can be stored within LDAP.

If part of the idea here is that users will specify their own keys, rather than an administrator controlling each user's key, then that aspect is probably worthy of its own, separate issue. The user preferences interface is not currently dynamic in the same way as the user editor presented to an administrator.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for ED25519 SSH keys,GUACAMOLE-746,13219016,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,nicoulaj,nicoulaj,01/Mar/19 20:58,01/Mar/19 21:54,17/Feb/21 11:13,,,,,guacd,SSH,,,,,,,,0,,,,,"ED25519 keys are supported by OpenSSH since version 6.5 (https://www.openssh.com/txt/release-6.5), it would be great if Guacamole supported using it.",Docker official images 1.0.0,nicoulaj,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-03-01 21:53:09.686,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Mar 01 21:53:09 UTC 2019,,,,,,,"0|z00954:",9223372036854775807,,,,,,,,,,,,,,,,,"01/Mar/19 21:03;nicoulaj;Looks like libssh2 supports it since [this commit|https://github.com/libssh2/libssh2/commit/03092292597ac601c3f9f0c267ecb145dda75e4e], but it is not released yet.","01/Mar/19 21:53;vnick;As with GUACAMOLE-745, I believe this is an upstream issue and not anything that requires any changes to Guacamole.  The Docker images will support it at such time as libssh2 releases a version with the support and the upstream distribution adopts it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tunnel Connections over SSH,GUACAMOLE-312,13076112,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mjumper,mjumper,31/May/17 07:21,11/Feb/19 13:23,17/Feb/21 11:13,,,,,VNC,,,,,,,,,16,,,,,"{panel:bgColor=#FFFFEE}
*The description of this issue was copied from [GUAC-223|https://glyptodon.org/jira/browse/GUAC-223], an issue in the JIRA instance used by the Guacamole project prior to its acceptance into the Apache Incubator.*

Comments, attachments, related issues, and history from prior to acceptance *have not been copied* and can be found instead at the original issue.
{panel}

It would be useful to provide access to VNC over SSH as an option.",,bmullan,bogdansv,calvinmclean,david_j_baird,gratuxri,jcpunk,jeredsutton_opstack,l.krempler,magicfab,mjumper,rbsmith,thewizard,traylenator,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-05-31 15:16:06.368,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-223,,,,,,,,,,9223372036854775807,,,Sun Jan 27 23:54:16 UTC 2019,,,,,,,"0|i3fokn:",9223372036854775807,,,,,,,,,,,,,,,,,"31/May/17 07:22;mjumper;The original issue description is rather terse, but the idea is clearly to allow for VNC connections to be established through an SSH tunnel established by Guacamole's VNC client during the connection process.","31/May/17 15:16;vnick;I guess one question/comment would be: is there any reason to keep this specific to VNC, or does it make sense to allow any/all protocols to be tunneled over SSH?  VNC is definitely one that comes up commonly, as it lacks built-in encryption, but I think it isn't too terribly uncommon that people tunnel RDP over SSH, and with X.org support coming, I'm sure that will be one that people also want to tunnel over SSH.  Seems like making it available for all protocols could be useful??","16/Aug/17 09:47;bmullan;I for one would agree with Nick's comment.

In my use-case...  for container desktop access & pulseaudio.

Pulseaudio supports network sound by loading Pulseaudio's TCP module.
 
example:
added line in the Host OS (host for the containers) ... /etc/pulse/default.pa -or- on linux when using xrdp in ... /etc/xrdp/pulse/default.pa:

*load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1;10.0.3.0/24*

the above tells the Host pulseaudio server to allow TCP connections from the Host itself (127.0.0.1) but also from the container network (10.0.3.0/24).   Thus containers which have not sound device themselves can redirect all sound/audio to the pulseaudio server of the Host OS .

If guacamole can pick that up then containers will be sound enabled.. which right now is a problem without much added configuration _*for docker/lxc/lxd*_ etc.

Being able to redirect pulseaudio's Port 4713 via SSH might be one way to accomodate this for user sessions with contianers.?
","25/Jan/19 18:07;mjumper;While historically we haven't been able to progress on this due to libvncclient not providing an arbitrary transport, it looks like this may be doable with libvncclient after all. Checking the various connection functions implemented as part of libvncclient, all seem to simply assign a file descriptor to {{client->sock}}. We may be able to have more control over the way connections are established if we avoid using {{rfbInitClient()}} and instead invoke the various other functions that {{rfbInitClient()}} itself uses to connect.

Assuming the above is a stable approach, libssh2 can be leveraged to provide the tunnel, with the actual I/O being handled through read/write calls to libssh2 within some thread handling read/write to a socketpair associated with libvncclient's {{client->sock}}.","26/Jan/19 01:31;vnick;I was thinking it would doable by having libssh2 stand up a port-forward, and then redirecting the traffic through that port forward.  There's nothing built-in to libssh2 to handle the port forwarding - it would have to be coded using, most likely, the same socket approach you mention, here, but doing so would allow for forwarding without worrying about whether the VNC (or RDP, or Telnet) library supported sockets, right?","27/Jan/19 01:46;mjumper;No, it needs to be doable without having to have something actually listen on a new TCP socket on the Guacamole server. Having new ports open would be potentially dangerous (the VNC server that is intended to be protected behind SSH would be temporarily exposed each time a connection is established), and dynamically allocating available ports would probably prove to be brittle.

Dynamically creating a UNIX domain socket in some configurable directory in the filesystem would be OK, as access to that socket would be restricted by filesystem permissions and we can lock those down, but taking full control over the transport within the VNC support and keeping it absolutely 100% internal would be best.

If someone were to throw this together quickly for their own purposes in an extension (like discussed recently on the mailing list), dynamically allocating temporary SSH port forwards could be reasonable, but I don't think it should be our approach in Guacamole itself.","27/Jan/19 21:47;vnick;{quote}
Having new ports open would be potentially dangerous (the VNC server that is intended to be protected behind SSH would be temporarily exposed each time a connection is established), and dynamically allocating available ports would probably prove to be brittle.
{quote}

Yeah, good points, there.  I didn't even think about having the port unprotected on the guacd server.

{quote}
Dynamically creating a UNIX domain socket in some configurable directory in the filesystem would be OK, as access to that socket would be restricted by filesystem permissions and we can lock those down, but taking full control over the transport within the VNC support and keeping it absolutely 100% internal would be best.
{quote}

UNIX sockets would interesting, but, yes, being able to control it from within the VNC connection using a socket is probably best.

{quote}
If someone were to throw this together quickly for their own purposes in an extension (like discussed recently on the mailing list), dynamically allocating temporary SSH port forwards could be reasonable, but I don't think it should be our approach in Guacamole itself.
{quote}

An extension would be interesting - might have to see if I can do something like that, if for no other reason than to just try it out, but, I agree, if we add something core to the code to do the forwarding it should be based off of an integration of libssh to libvnc.  Any idea if the other libraries for other protocols would support something similar (FreeRDP, libtelnet, even libssh2 for ssh-in-ssh)?","27/Jan/19 23:54;vnick;{quote}
If someone were to throw this together quickly for their own purposes in an extension (like discussed recently on the mailing list), dynamically allocating temporary SSH port forwards could be reasonable, but I don't think it should be our approach in Guacamole itself.
{quote}

So, if you did this in an extension, how would you handle the guacd side of setting up the SSH connection?  I'm guessing this shouldn't require modifications to guacd, or would it?",,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow Header Module to Call Logout URL,GUACAMOLE-679,13204694,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,vnick,vnick,vnick,15/Dec/18 22:36,24/Jan/19 14:02,17/Feb/21 11:13,,,,,guacamole-auth-header,,,,,,,,,3,,,,,"The guacamole-auth-header module could add support for the ability to call a URL to trigger a logout, similar to Single Sign Out for CAS and OpenID.",,igor-sweet,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-361,,,GUACAMOLE-680,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-12-15 22:36:39.0,,,,,,,"0|u000js:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Urdu Language support,GUACAMOLE-660,13198409,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mkhan,mkhan,14/Nov/18 17:53,13/Jan/19 21:33,17/Feb/21 11:13,,,,,guacamole-client,,,,,,,,,0,,,,,Add Urdu Language Support,,mkhan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"mike-jumper commented on issue #340: GUACAMOLE-660: Add Urdu Language Support
URL: https://github.com/apache/guacamole-client/pull/340#issuecomment-453867532
 
 
   OK - things look generally good code-wise, but I'm seeing a few issues when testing this new support. Most appear to be unexpected results of RTL text.
   
   1. The icon indicating a field used for searching/filtering is still left-justified despite RTL text direction. 
   
      ![filter-icon-left-side-1](https://user-images.githubusercontent.com/4632905/51090828-1d13fc80-1737-11e9-9015-9f5443eed486.png)
   
      ![filter-icon-left-side-2](https://user-images.githubusercontent.com/4632905/51090824-1c7b6600-1737-11e9-97e3-4ccae070512c.png)
   
   2. The text of the connection status dialog is still left-justified despite RTL text direction.
   
      ![connection-status-dialog-text-left-justified](https://user-images.githubusercontent.com/4632905/51090823-1c7b6600-1737-11e9-9a12-dc88ea0c5520.png)
   
   3. When Urdu is selected, the pagination buttons point weirdly inward.
   
      ![pagination-buttons-point-weirdly](https://user-images.githubusercontent.com/4632905/51090825-1c7b6600-1737-11e9-861b-c27eac41bd26.png)
   
   4. Connection duration is still in English (and backwards due to RTL).
   
      ![durations-in-english](https://user-images.githubusercontent.com/4632905/51090826-1c7b6600-1737-11e9-9f87-3a318c463506.png)
   
   5. Connection lists are still left-justified despite RTL text direction, and the expand button and tree lines for connection hierarchies is misaligned.
   
       ![expand-button-tree-lines-misaligned](https://user-images.githubusercontent.com/4632905/51090827-1d13fc80-1737-11e9-84a6-8dac05517ddf.png)
   
   6. The menu icons are on the left side of the text despite RTL text direction.
   
      ![menu-icons-left-side](https://user-images.githubusercontent.com/4632905/51090829-1d13fc80-1737-11e9-9f91-bae99a5694b8.png)
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org
;13/Jan/19 21:33;githubbot;600",,0,600,,,0,600,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Nov 14 18:19:18 UTC 2018,,,,,,,"0|s00huo:",9223372036854775807,,,,,,,,,,,,,,,,,"14/Nov/18 18:19;mkhan;Hi all,

I am a native Urdu speaker and am currently working on this translation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow specifying connection timeout,GUACAMOLE-600,13175343,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,vnick,vnick,28/Jul/18 15:32,05/Jan/19 20:30,17/Feb/21 11:13,,,,,RDP,SSH,Telnet,VNC,,,,,,0,,,,,"This came up in a mailing list discussion, specifically related to SSH connections, but seems like it would be useful across all of the protocols to allow the connection to specify the timeout in making the connection.  For environments where connections are expected to happen rapidly this can reduce delays if something is wrong; for environments that may experience larger delays it can avoid errors when the connection is expected to take a longer amount of time to establish.",,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,http://mail-archives.apache.org/mod_mbox/guacamole-user/201807.mbox/%3CCABi2%3DfX6GebVqwWBdELD7HLJ9epv%2BO%3DFC1h933851pE-RjdQtg%40mail.gmail.com%3E,,,,,,,,,,9223372036854775807,,,Sat Jan 05 20:30:21 UTC 2019,,,,,,,"0|i3wfrb:",9223372036854775807,,,,,,,,,,,,,,,,,"05/Jan/19 20:30;vnick;FWIW, I'm ont sure this is going to be feasible in VNC and RDP connections.  SSH and Telnet are pretty straight-forward, as they use the standard socket library for opening the connections, and there are methods available for handling timeouts with those libraries.  Because the VNC and RDP connections abstract this to their respective libraries, there isn't really much way to control this.  It also seems that, with FreeRDP specifically, the developers have rejected requests to allow timeout to be specified:

https://github.com/FreeRDP/FreeRDP/issues/4723

We could try to integrate this timeout support into the auto-reconnect, but since Guacamole Client handles that internally, I'm not sure there's really much point?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Feature Request - add Admin ability to force all Users to change Password,GUACAMOLE-665,13199603,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,bmullan,bmullan,20/Nov/18 13:21,25/Nov/18 21:30,17/Feb/21 11:13,,,,,guacamole,,,,,,,,,0,,,,,"I've been thinking about this and would like to ask if there had been any thought to an Admin option/command to Force all users to change their Guacamole Passwords on next login?

Given all the site hacking events reported every month it _would seem to be a good idea for Guacamole in the event a large Guacamole installation was compromised somehow._

 ",,bmullan,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-11-20 18:53:08.404,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Nov 25 21:30:03 UTC 2018,,,,,,,"0|s00p6g:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Nov/18 18:53;vnick;I'm not necessarily opposed to some way to accomplish this in the admin interface, but I will point out that it should be very doable via a SQL script - basically just:

{code}
UPDATE guacamole_users SET expired='t';
{code}

would effectively accomplish this.","20/Nov/18 21:02;bmullan;Thanks for the reply.  Perhaps admins would use that but in a larger
organization there may be several & not all may have admin on the sql and
guacamole


","25/Nov/18 21:30;vnick;[~bmullan] That's a fair point.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Credential Profiles,GUACAMOLE-581,13168137,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,MommaLongNips,MommaLongNips,25/Jun/18 19:55,08/Oct/18 01:36,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"Is it possible to have Groups with username and password and have the servers under that group inherit the permissions from the parent?

 

Might also be useful to have children inherit permissions from an account instead of parent(For instance if different users have different logons to devices). ",,mjumper,MommaLongNips,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,GUACAMOLE-641,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-06-25 20:05:21.794,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Mon Jun 25 21:21:29 UTC 2018,,,,,,,"0|i3v7mn:",9223372036854775807,,,,,,,,,,,,,,,,,"25/Jun/18 20:05;mjumper;{quote}
Is it possible to have Groups with username and password and have the servers under that group inherit the permissions from the parent?
{quote}

What do you mean by servers inheriting permissions?

{quote}
Might also be useful to have children inherit permissions from an account instead of parent(For instance if different users have different logons to devices).
{quote}

This does not make sense to me. Can you rephrase? What are you trying to achieve at a high level?","25/Jun/18 20:13;MommaLongNips;I mean't that connections could inherit credentials(Not permissions, sorry) from their parent. So if I login to 100+ servers will all the same User/Pass, I could enter it once on the group, and set the connections to inherit credentials from the group.

 

As for the second part, the use case here is we are an MSP(Managed Services Provider). We have hundreds of servers that 10+ users login to, but we all have unique credentials. If the connection could inherit the username and password from my account(I could set my preferred username and password in my settings) and use those credentials to connect to the server. A lot of pieces of software achieve this by using credential profiles. For instance I could create a profile that I specifically use just for networking devices, another profile that I use for windows servers. Then when connecting I can simply click the set of credentials I want to login with.","25/Jun/18 20:17;mjumper;It sounds like both of the cases you describe would be satisfied if there were some means to define such ""credential profiles"".","25/Jun/18 21:21;MommaLongNips;That is correct!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend the karaf console commands by a wizard,KARAF-780,12515512,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,bonomat,bonomat,27/Jul/11 10:54,15/Sep/18 16:36,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,"It would be great if the karaf console would support some kind of wizards to lead the user input through a series of well-defined steps:

The reason why I call it wizard is that steps can depend on its previous steps, let's have the following example:
karaf@root>service:create exampleService ...
Depending on the entered service type (here exampleService) several different subsequent options are possible, in this example, the user has to enter additional attributes to create the service, like an ID, name, ....
It would be great if it is possible to lead the user through the creation of this service using a wizard.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-07-27 11:58:33.761,,,false,,,,,,,,,,,,,,,,,,65023,,,Mon Aug 15 10:23:38 UTC 2011,,,,,,,"0|i1cin3:",281151,,,,,,,,,,,,,,,,,"27/Jul/11 11:58;jbonofre;Hi Philipp, 

could you provide more detail ?
For instance, by wizard, you mean a wizard to do features:addurl + features:install, for instance, something like:

karaf@root> wizard:feature-install
Where the features descriptor is located ? 
What's the feature name ?
Confirm: install feature (yes/no)

Is it what you expect ?","27/Jul/11 13:12;pieber;One interesting option here might be to let the console do this automatically. E.g. if option a. and b. are required but none (or only one was entered) we can ask for them presenting the help entry? Not the most beautiful solution but might be easier than providing a complete new ""wizzard command abstraction"". Would this be sufficient?","27/Jul/11 13:33;bonomat;@ Jean-Baptiste Onofré: something like that would be great,
The background of this is that i want to instanciate or edit services at runtime  ","15/Aug/11 08:34;bonomat;Edited because of the discussion on the mailing list ( see http://karaf.922171.n3.nabble.com/Extend-the-karaf-commands-by-a-wizard-td3223630.html)","15/Aug/11 10:23;gmazza;If I understand the request correctly, the title of this JIRA is effectively ""Create a wizard for the service:create command"". ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shell command shell:wc should be able to return an Integer.,KARAF-5065,13059147,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,weule@7b5.de,weule@7b5.de,25/Mar/17 14:56,15/Sep/18 16:34,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,Karaf command can return Java Objects. shell:wc should be able to return an Integer (or an array of integers) to be processed by an „If {...} {...}” shell command or be assigned to a variable.,,weule@7b5.de,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-03-25 14:56:51.0,,,,,,,"0|i3cskv:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MongoDB JAAS LoginModule,KARAF-3450,12768154,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,niels.bertram,niels.bertram,16/Jan/15 23:36,15/Sep/18 05:45,17/Feb/21 11:13,,2.3.9,3.0.1,,karaf,,,,,,,,,0,,,,,"I wrote a JAAS authentication LoginModule that is backed by MongoDB as an alternative to the current Karaf JAAS modules.

I still need to add encryption support, some advanced mongodb configuration features and some better unit testing but in its current form it is fully functional including a working BackingEngine.

Please let me know if there is appetite from Karaf to absorb this JAAS module.

Full source code incl. a rudimentary CXF REST service that uses the mongo based user realm can be found here:

https://github.com/bertramn/karaf-jaas-mongo-module.git",,jbonofre,niels.bertram,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-01-27 16:52:49.226,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Jan 27 16:52:49 UTC 2016,,,,,,,"0|i24h9j:",9223372036854775807,,,,,,,,,,,,,,,,,"27/Jan/16 16:52;jbonofre;Thanks for the contribution ! I gonna review it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide an OSGi UserAdmin service on top of our JAAS security mechanism,KARAF-361,12494942,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,iocanel,gnodet,gnodet,07/Jan/11 13:47,14/Sep/18 08:37,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,This would allow people using the standard OSGi service to manage users / roles.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-01-13 14:31:14.174,,,false,,,,,,,,,,,,,,,,,,68429,,,Thu Jan 13 14:31:14 UTC 2011,,,,,,,"0|i1cifz:",281119,,,,,,,,,,,,,,,,,"13/Jan/11 14:31;achim_nierbeck;you might take a look at pax-useradmin service if it fits your needs :)

http://www.ops4j.org/projects/pax/useradmin/index.html",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Jasypt config admin property with reload strategy.,KARAF-1254,12545418,New Feature,In Progress,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,jgoodyear,joed,joed,06/Mar/12 22:40,14/Sep/18 08:36,17/Feb/21 11:13,,,,,karaf,,,,,,,,,0,,,,,,,jbonofre,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Mar/12 22:41;joed;jamie.patch;https://issues.apache.org/jira/secure/attachment/12517327/jamie.patch",,,1.0,,,,,,,,,,,,,,,,,,,,2012-03-06 23:18:48.605,,,false,,,,,,,,,,,,,,,,,,230604,,,Wed Dec 19 14:03:32 UTC 2012,,,,,,,"0|i168ef:",244493,,,,,,,,,,,,,,,,,"06/Mar/12 23:18;jgoodyear;Thanks for the patch Johan, I'm reviewing and will check it in :)","07/Mar/12 00:03;jgoodyear;Still reviewing - I'm going to add in ASL license comment to cmencrypt.xml and cmencrypt.xsd. ","07/Mar/12 03:30;jgoodyear;Review update: We're investigating an error with ""testPlaceholder"" during builds with the patch applied. When this issue is resolved we should be able to apply an updated patch.

Error message:
 testPlaceholder(org.apache.karaf.jaas.jasypt.handler.EncryptablePropertyPlaceholderTest): Gave up waiting for service (&(objectClass=java.lang.String)(encoded=*))","07/Mar/12 22:11;jgoodyear;This feature looks like it'd be really useful on the 2.2.x branch as well, would you like to submit a patch for that branch as well?","19/Dec/12 13:48;jbonofre;I would prefer to keep this new feature for Karaf 2.3.x and 3.0.x.","19/Dec/12 14:03;jbonofre;Let see if we can include it in 2.2.11, I think this feature could be interesting for 2.2.x users as well.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Guacamole-Morphia Extension for Extension Guacamole-MongoDB support,GUACAMOLE-605,13175920,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,dquirant,dquirant,31/Jul/18 18:29,25/Aug/18 19:17,17/Feb/21 11:13,,,,,,,,,,,,,,1,,,,,"Extension implementation based on the existing ones of jdbc.
Replacing the MyBatis persistence manager with Morphia.
Mapping of entities in Morphia mode and adaptation of queries with criteria used by Morphia.
Guacamole-MongoDB extension that uses the Guacamole-Morphia extension to access the MongoDB documents.",,CarroCarrillo,dquirant,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2018-07-31 20:04:48.657,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Fri Aug 24 17:10:24 UTC 2018,,,,,,,"0|i3wjbb:",9223372036854775807,,,,,,,,,,,,,,,,,"31/Jul/18 20:04;vnick;Looking forward to it!
:-D","18/Aug/18 15:06;dquirant;I have a functional version using a MongoDB database.
I have included the Apache license in all files.
I have to review the documentation to be able to upload a first version.

I'm not clear how and where I have to upload the code.
The created extension will replace the jdbc extension for SQL databases, so a part of the code has been duplicated. I want to review this part and create a common package for the jdbc extension and the Mongo extension, in this way we will avoid duplicate code and it will be easier to maintain.","18/Aug/18 15:26;vnick;First, per the contribution guidelines, make sure that your code:
* Follows the style guidelines: http://guacamole.apache.org/guac-style/
* Is properly documented with JavaDoc comments.

I've not participated in very many open source projects, but I've seen a decent amount of code, and a lot of them are pretty relaxed about style and documentation.  Guacamole (and probably ASF in general) is not - we try very, very hard to maintain consistent style and documentation across the code.  The more you have done in advance of a Pull Request, the quicker/easier the pull request will go.  It may seem nit-picky or trivial or dictatorial, but it is tremendously valuable for readability and collaboration in a project like this.

For an authentication extension like this, here's what I would suggest:
# Make sure you have a Github.com account, and fork the https://github.com/apache/guacamole-client repository.
# In your forked copy of the repository, create a branch with a name descriptive of your extension
# Commit the changes for your extension to the new branch in your copy of the repo.  Remember, per the contribution guidelines, all commit messages need to be tagged with this JIRA issue (GUACAMOLE-605: Your commit message here).
# Once all changes are committed, create a Pull Request against the Apache Github repository.
# Prepare yourself for the review process.  Your code will probably be reviewed by more than one person, and it will be a pretty detailed review.  There will likely be several iterations of the reviewers requesting changes, you updating the code and committing, and another review cycle.

Looking forward to seeing it - I think this will be a great addition to the code!","23/Aug/18 18:43;dquirant;Nick Couchman thanks for the info.

I already have the code prepared, I will give one last review and create the repository in github.","24/Aug/18 17:10;dquirant;I created the pull request with the branch created from the fork.
I have left a README.md inside the extensions / guacamole-auth-morphia directory with the necessary information for the configuration of the extension.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
vCenter Authentication Extension,GUACAMOLE-591,13174796,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,vnick,vnick,26/Jul/18 11:08,26/Jul/18 11:08,17/Feb/21 11:13,,,,,guacamole-client,,,,,,,,,0,,,,,"It would be really interesting to create a vCenter extension that did the following:
* Logged in Guacamole based on vCenter credentials
* Enumerated virtual machines accessible to the logged-in user.
* For any accessible VMs, look up guest O/S network information provided by VMware Tools and create a connection based on the O/S and network information of that VM.
* Organize everything in a hierarchy that matches the vCenter hierarchy.",,pasik,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2018-07-26 11:08:36.0,,,,,,,"0|i3wcdr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide API support for downloading/uploading Guacamole protocol streams via HTTP,GUACAMOLE-331,13081208,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,krahujec,krahujec,20/Jun/17 19:05,21/Feb/18 14:34,17/Feb/21 11:13,,,,,guacamole-common,,,,,,,,,0,,,,,"Downloading/uploading files over http tunnel is extremely slow (200 kB/s maximum), even though we are present in local network. Tested with both the custom and official clients pointing at the same guacd instance (container).Here is source code for downloading files:


{code:JavaScript}
$("".management table"").on(""click"", "".fs-file"", function(){
	var that = this;

	var filename = $("".management tbody"").children().eq(that.rowIndex - 1).find("".name"").html();
	var requestFile = $(""#path"").html() + filename;

	if ($.inArray(requestFile, window.downloading) != -1)
		return false;

	$("".management tbody"").children().eq(that.rowIndex - 1).children().eq(1).addClass(""downloading"");

	window.downloading.push(requestFile);

	window.fs.obj.requestInputStream(requestFile, function(stream, mimetype){
		stream.sendAck(""Ready"", Guacamole.Status.Code.SUCCESS);

		var reader = new Guacamole.BlobReader(stream, mimetype);

		removeSearch();
		reader.onend = function(){
			var blob = reader.getBlob();
			blobDownload(blob, filename, requestFile);
		}
	});

});
{code}



We have also tried the official guacamole client, however there appeared to be no such problem.","Ubuntu 16.04 Tomcat (custom guacamole client), Fedora 25 (guacd instances in lxd containers)",krahujec,mjumper,rvecchio,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2017-06-20 19:24:25.843,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Feb 21 14:34:41 UTC 2018,,,,,,,"0|i3gid3:",9223372036854775807,,,,,,,,,,,,,,,,,"20/Jun/17 19:24;vnick;Okay, a couple of questions for you:
- You say there is no such problem in the official Guacamole client, which leverages the same guacamole-common and guacamole-common-js code as you're using for the custom client, so why do you say this is a major bug in the guacamole-common code?  Seems if it's working fine in the official client, the common code is probably okay??
- Can you provide some further specifications on testing, particularly differences between the custom code and the official client?  You say Ubuntu 16.04 for the custom code, and Fedora 25 for the guacd instances, but were you running the official guacamole client on Fedora 25?  Or did you install that into Ubuntu 16.04?  Were both the custom client and the official client pointed at the same guacd instances in both cases?
- What browser(s) did you test, on what platforms, and was the slow speed observation the same across all browsers/platforms you tested on the client?

-Nick","20/Jun/17 20:12;krahujec;* Sorry, my bad. I will change it.
* Absolutely. Client has been forked from the latest guacamole-example project. Changes were mostly cosmetic (e.g. custom upload bar and clipboard management). File download is done via BlobReader (see the code above). 
Also new tunnel connection is done like this:
{code:javascript}
tunnel = new Guacamole.HTTPTunnel(""tunnel"");
window.guac = new Guacamole.Client(tunnel);
{code}

Both official and custom clients were running on the host machine (that is Ubuntu 16.04), and unmodified guacd server instances were running in the lxd containers (Fedora 25). And yes, both clients were pointed at the same guacd instance (container).
* Latest versions of Firefox (Ubuntu 16.04, macOS Sierra), Chrome/Chromium (Ubuntu 16.04, macOS Sierra), Safari (macOS Sierra) and MS Edge (Windows 10)","23/Oct/17 06:15;mjumper;So, this is unlikely to be an issue with the HTTP tunnel, as the effective bandwidth of file transfers mitigated by JavaScript is inherently limited, but rather due to the lack of a common API-level implementation of the file transfer mechanism used by the Guacamole webapp. The Guacamole webapp is not actually handling file transfer in the same way that you are in this case.

The reason the Guacamole webapp's file transfers are so much faster is that it implements a REST service which allows the client to request the file stream to be intercepted. A special object on the server then selectively grabs the {{blob}} instructions for that stream, decodes them, and allows the resulting stream to be read via normal HTTP. Since this stream can be downloaded using browser-native mechanisms (rather than being assembled client-side, block-by-block, in memory), the transfer is about as fast as things can get.

The way this stream intercepting works is non-trivial, and doesn't lend itself well to being part of the common API. It may be possible, but at the moment I'm not sure how it could be done in a way which is independent of the web application being built.","20/Feb/18 21:28;rvecchio;{quote}The way this stream intercepting works is non-trivial, and doesn't lend itself well to being part of the common API.
{quote}
Hi Michael

I’m trying to bring this very interesting download feature into our implementation of the Guacamole application.

So far I managed to implement our rest services and replicated the TunnelResource/StreamResource classes that instantiate a UserTunnel intercepting the requested stream on the Guacamole tunnel.

So far so good, I can see the rest request coming to the server, for example right after a print operation, the stream intercept begins but after the first ack (with an OK status) nothing happens :(

By comparing this behavior with the native Guacamole application behavior, the difference is that on the latter I can see a number of blob instructions processed and sent to the output stream after the first ack... instead in my case the stream waits forever to be read.

Can you give me some hints on what I’m doing wrong?

Thank you

Ruggero ","21/Feb/18 10:32;rvecchio;Hi Michael

I found what was going wrong in my implementation and I would like to share in case it's useful to others.

First of all some details that I forgot to mention: our implementation is based on Guacamole v. 0.9.14

The server is based on Ubuntu v. 16.04 and has been installed by following the very good blog by Chase Wright: [https://www.chasewright.com/guacamole-with-mysql-on-ubuntu/]

Our client has been created by following the instructions given in the Guacamole Manual and at this time we only handle HTTP connections, not WebSockets.

The client, in the onfile delegate creates an iframe, appends it to the DOM and sets its src property with an url to the rest service that will handle the stream download request.

The native Guacamole application is handling this rest service in the following classes: TunnelResource and StreamResource 

As I mentioned in my previous comment, it is necessary to instantiate a UserTunnel object that inherits from StreamInterceptingTunnel. This kind of tunnel will wrap around the existing and given Guacamole tunnel. This object makes use of a StreamInterceptingFilter object in order to filter the instructions referring to the given stream (the resource being downloaded) out of the instructions flowing on the tunnel.

The StreamInterceptingTunnel instantiates an object of the type OutputStreamInterceptingFilter. As the name may suggest, this is a special output stream that reads the instructions from the tunnel, converts them in blob chunks and writes the chunks on the given response output stream.

My problem was here, in the GuacamoleInstruction handleBlob(GuacamoleInstruction instruction) method

This method got invoked the first time, received the first chunk and then, by default, delegated the client to send an ack instruction in order to notify the correct processing of the blob instruction. For some reasons that I still have to discover, the client javascript is not receiving this notification and never sends the ack. By not doing so, the stream download process interrupts.

Fortunately the notification delegated to the client is an option and in order to make it work I could simply activate the other possible option: to notify the ack instruction directly from the server, inside the handleBlob method itself.

Best regards

Ruggero

 ","21/Feb/18 14:34;rvecchio;Another update for Michael

In class: OutputStreamInterceptingFilter

Method: private GuacamoleInstruction handleBlob(GuacamoleInstruction instruction)

By making the following change:

//return new GuacamoleInstruction(""blob"", index, """");
return new GuacamoleInstruction(""blob"", index, DatatypeConverter.printBase64Binary(blob));

 

Now I get the onblob notification client side.

Could it be an issue related to buffers or discarded instructions?

 

Regards

Ruggero",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gaucenc should allow input via stdin,GUACAMOLE-466,13125677,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,sreid,sreid,18/Dec/17 17:31,04/Feb/18 15:01,17/Feb/21 11:13,,,,,guacenc,,,,,,,,,0,,,,,"Guacenc should allow stdin to be used as an input source so that processes can pipe data into guacenc. 

A typical Linux convention is to reserve a single ""-"" character to mean ""read from stdin, not a file"" to processes. wget, gpg, cat, tar and many others all use this convention. Allowing guacenc to use it as well would make guacenc a more useful utility in the Guacamole project",Linux x64,jgmann,sreid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-12-18 17:31:50.0,,,,,,,"0|i3o10f:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for selecting different display qualities,GUACAMOLE-37,12972878,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,frode,frode,frode,25/May/16 21:56,04/Feb/18 14:48,17/Feb/21 11:13,,,,,guacamole-client,guacamole-common-js,guacamole-server,,,,,,,2,,,,,"The current adaptive encoding greatly reduces bandwidth usage and improves the user experience.

It would be great to be able to choose different quality settings for a user inside a Guacamole session, in cases where a user is in a low bandwidth/high latency environment.

Example quality options could be:
High: PNG (normal) / JPEG q90 (adaptive)
Medium: JPEG q90 (normal) / JPEG q60 (adaptive)
Low: JPEG q60 (normal) / JPEG q40 (adaptive)

This feature would involve:
- add UI to select quality
- API to guacamole-server to control quality setting
- plumbing for quality settings in guacamole-server
- handle separate qualities per user (because of session sharing)
- repair of lower quality areas of the screen (from adaptive encoding) with higher quality refresh",,frode,mjumper,pasik,tickietackie,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2016-05-26 03:46:33.759,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu May 26 15:25:12 UTC 2016,,,,,,,"0|i2yib3:",9223372036854775807,,,,,,,,,,,,,,,,,"26/May/16 03:46;mjumper;{quote}
Medium: JPEG q90 (normal) / JPEG q60 (adaptive)
Low: JPEG q60 (normal) / JPEG q40 (adaptive)
{quote}

What about the case where PNG is far smaller than JPEG?

High-contrast, low-complexity graphics tend to be pretty common in most desktop applications, and they compress very poorly with JPEG yet very well with PNG. If we assume that JPEG will always outperform PNG, we may end up actually making things worse.","26/May/16 03:51;mjumper;I also have some possibly-relevant experimental changes implementing dynamic quality settings for lossy-encoded updates: https://github.com/apache/incubator-guacamole-server/compare/apache:ec93a29...glyptodon:765e05d

Interested to hear your thoughts.","26/May/16 15:03;frode;Right. The JPEG path would still be subject to the PNG optimality algorithm, where this would be picked up. Even at the lowest quality setting, PNGs meeting these conditions will be smaller. It will also provide remedy to the issue where terminal windows are hard to read when with lossy compression.","26/May/16 15:25;frode;This I like!

Optimally, the dynamic quality selection would be for both ""normal"" and ""lossy"" encoded updates.
Going down this path, there should be a UI for selecting dynamic quality settings or manual.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
See recordings by clicking on history record ,GUACAMOLE-462,13123971,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,Asaip,Asaip,10/Dec/17 08:45,10/Dec/17 23:17,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,Just by clicking on history record user having access to the history record could see the recording of the session.,Any,Asaip,igor-sweet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-12-10 08:45:45.0,,,,,,,"0|i3nqjr:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for RemoteFX,GUACAMOLE-377,13101526,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Minor,,,mjumper,mjumper,12/Sep/17 03:06,12/Sep/17 03:09,17/Feb/21 11:13,,,,,RDP,,,,,,,,,3,,,,,"{panel:bgColor=#FFFFEE}
*This issue was moved from [GUAC-721|https://glyptodon.org/jira/browse/GUAC-721], an issue in the JIRA instance used by the Guacamole project prior to its acceptance into the Apache Incubator.*

Comments, attachments, related issues, and history from prior to acceptance *have not been copied* and can be found instead at the original issue.
{panel}

[As discussed on the mailing lists|https://lists.apache.org/thread.html/3ee71fcd3bc4040ccfb5d6b4a035803056bd4d829c3b8d1848ecb434@%3Cuser.guacamole.apache.org%3E], Guacamole currently lacks support for RemoteFX, although the library leveraged for low-level RDP support (FreeRDP) does have this support. RemoteFX is important when it comes to forwarding accelerated graphics over RDP, and the same support should be added to Guacamole.

Lacking API documentation for FreeRDP, this will naturally involve walking through the source of FreeRDP's own client implementation to determine what needs to be called and how.",,amarjeetxc,jeff.langan@eastporter.k12.in.us,mathieu.brunot,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,https://glyptodon.org/jira/browse/GUAC-721,,,,,,,,,,9223372036854775807,,,2017-09-12 03:06:37.0,,,,,,,"0|i3jy2f:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
feature:install feature:uninstall without any error,KARAF-5066,13059148,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,weule@7b5.de,weule@7b5.de,25/Mar/17 15:02,26/Mar/17 19:54,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"feature:install and feature:uninstall are generating errors if the feature is still installed or uninstalled resp. Karaf scripts are ended by this error. An option should tell the commands to ignore the error and scripts are more robust.

As an alternative, a new command feature:is-installed returning a Boolean should be implemented for
if { feature:is-installed xxx } { feature:uninstall xxx }
if {(  feature:is-installed xxx ) equals false } { feature:install xxx }
",,weule@7b5.de,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14400,14400,,0%,14400,14400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2017-03-25 15:02:44.0,,,,,,,"0|i3csl3:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create an Apache Karaf badge allowing developers a way to brand Karaf powered/derived projects.,KARAF-611,12506355,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Minor,,,jgoodyear,jgoodyear,06/May/11 01:13,11/Jul/11 09:03,17/Feb/21 11:13,,,,,,,,,,,,,,1,,,,,"Create an Apache Karaf badge allowing developers a way to brand Karaf powered/derived projects.

It's been discussed on the Karaf dev list that we could create a ""Karaf Powered"", or similar, branding logo/slogan. This could be used by developers to help foster awareness of Karaf's presence in their projects (this is in addition to our current logo). As with any branding related work we'll have to ensure it adheres to established guidelines. There were several great ideas presented in the discussion thread, but there is always room for more. Once we have a variety to choose from we may call a vote to select our 'karaf powered' badge. 

Discussion on Karaf dev email list:
http://karaf.922171.n3.nabble.com/PROPOSAL-Create-a-Karaf-badge-or-slogan-for-projects-that-build-on-our-platform-to-indicate-Karaf-s--td2884397.html",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-07-11 07:43:33.929,,,false,,,,,,,,,,,,,,,,,,68465,,,Mon Jul 11 09:03:05 UTC 2011,,,,,,,"0|i1citj:",281180,,,,,,,,,,,,,,,,,"11/Jul/11 07:43;jbonofre;I added the following logo (high/low resolution):

http://maven.nanthrax.net/goodies/karaf/karaf-powered-low.png
http://maven.nanthrax.net/goodies/karaf/karaf-powered-high.png

If it's OK, I'm going to add this on the Karaf website.","11/Jul/11 09:03;pieber;+1",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Automatically rebuild Docker images,GUACAMOLE-1229,13344425,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,foxbrownbread,foxbrownbread,06/Dec/20 13:07,06/Dec/20 15:39,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"The {{guacamole/guacamole}} and {{guacamole/guacd}} Docker images are normally built only as part of the release process. Since these images depend on packages outside of Apache Guacamole (such as Tomcat and various distro-maintained libraries), it would be better if these images were automatically rebuilt to pull in any updates to dependencies.",,foxbrownbread,mjumper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-12-06 15:34:03.415,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sun Dec 06 15:34:03 UTC 2020,,,,,,,"0|z0l8og:",9223372036854775807,,,,,,,,,,,,,,,,,"06/Dec/20 15:34;mjumper;{quote}
it seems like the latest image on dockerhub is 5 months old so no fix for the latest CVE-2020-17527 is included.

Is there any chance we see a fix in the near future?
{quote}

Yes. It's looking like the issues within scope of 1.3.0 are wrapping up, and a 1.3.0 release would mean new Docker images.

That said, an image rebuild would be sufficient to pick up any updates to ancestor images like the Tomcat image. If you need something sooner, I'd say just build the image yourself locally (the relevant Dockerfile is part of each git repository) or just deploy without Docker.

We build these images as part of the release process, but it's probably worth looking into automated image rebuilds. I'll keep this issue open as an anchor for that improvement to processes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
guacd docker container support for ssl,GUACAMOLE-1121,13314740,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,jcpunk,jcpunk,02/Jul/20 16:16,02/Jul/20 16:16,17/Feb/21 11:13,,,,,guacd-docker,,,,,,,,,0,,,,,"The guacd docker container doesn't have a clear method for injecting SSL certificates.

 

For sites where the web interface needs to communicate with guacd over a non-private connection, full encryption would be very handy.

 

Adding the ability to use `-C` and `-K` automatically would be very helpful.",,jcpunk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,2020-07-02 16:16:56.0,,,,,,,"0|z0geso:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Norwegian keymap,GUACAMOLE-968,13287012,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,Mikael Hansson,Mikael Hansson,22/Feb/20 21:06,08/May/20 01:38,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,The Norwegian keyboard differs slightly from both the Danish and the Swedish. ,,Mikael Hansson,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-04-02 19:55:52.962,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Thu Apr 02 19:55:52 UTC 2020,,,,,,,"0|z0bsf4:",9223372036854775807,,,,,,,,,,,,,,,,,"02/Apr/20 19:55;vnick;[~Mikael Hansson]: If you're able to contribute anything to this, that would be great - we're not always familiar with the various keymaps, so it's hard to implement.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
New Command - feature:watch,KARAF-6601,13280145,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,tdriessen,tdriessen,17/Jan/20 14:37,18/Jan/20 12:01,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,features,,,,"A new command that should be added to the karaf console: feature:watch

It's the feature counterpart to bundle:watch and watches not only one bundle, but a whole feature for updates.

Rational: When adding a new dependency to a bundle that is watched by karaf, then usually the resolver complains about a missing dependency. The usual workflow for a developer is then:
 * refresh feature repositories
 * refresh feature

In order to streamline this workflow there should be a command that, given a feature, watches all bundles/resources of it and if something changes executes those two commands.

 

Benefit: One is not confronted with ugly resolver error messages ;) , faster development workflow.",,jbonofre,jfeinauer,julian.feinauer,tdriessen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2020-01-17 14:41:01.452,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Jan 18 12:01:56 UTC 2020,,,,,,,"0|z0amc0:",9223372036854775807,,,,,,,,,,,,,,,,,"17/Jan/20 14:41;julian.feinauer;If nobody minds I would try to do this...","18/Jan/20 06:28;jbonofre;I don't think it's a good idea. I would rather do feature-repo:watch + bundle:watch. Or does it mean you want to trigger feature:update ?

Watching feature-repo efficiently can be challenging but possible.

 ","18/Jan/20 11:54;tdriessen;Maybe I should detail the idea in general and talk about what the command should do instead of how I would call it, so that you could point us in the right direction and maybe point out possible problems with it:

(I'm pretty new to Karaf, so maybe I got some things wrong. Correct me if that's the case ;))

When I am developing a feature, then I create a feature.xml that defines all the bundles/features/repositories upon which my feature relies like this 

 
{code:java}
<features name=""features"" xmlns=""http://karaf.apache.org/xmlns/features/v1.4.0"">    <repository>somerepo</repository>
 <feature name=""feature-impl"" description=""${project.name}"" version=""${project.version}"">
 <feature>http-whiteboard</feature>
 <bundle dependency=""true"">dependency1</bundle>
 <bundle dependency=""true"">wrap:wrappedDependency$Bundle-SymbolicName=mydep.${dep.version}</bundle>
 <bundle>bundleUnderDevelopment</bundle>
 </feature>
</features>
{code}
 

During development I would love to just set a watch on this file, as well as on all bundles under development (probably those within the feature and with a snapshot version), so that I don't have to reload anything in Karaf when I'm doing one of the following actions:
 * adding/removing/changing a repository in feature.xml
 * adding/removing/changing a feature in feature.xml
 * adding/removing/changing a (wrapped) dependency in feature.xml
 * adding/removing/changing a bundle in feature.xml or in local .m2 repo

Of course this would still lead to resolver errors when I'm defining an inconsistent setup within my feature.xml, but as long as that setup is correct I would not need to deal with resolver errors at all and probably would have a better streamlined development workflow.

WDYT?

 ","18/Jan/20 12:01;jfeinauer;I like the idea and I guess the implementation could be similar to bundle watch. I'm trying to do a first implementation of it as example. @jbonofre I agree with you that feature repo watch makes more sense than feature watch alone (and does a red fresh then). ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add autocomplete attributes to inputs,GUACAMOLE-550,13153986,New Feature,In Progress,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,vnick,vnick,vnick,20/Apr/18 09:59,25/Dec/19 18:42,17/Feb/21 11:13,,,,,,,,,,,,,,0,,,,,"I see this suggestion show up in the Chrome Developer Tools window periodically, and figured I'd create a JIRA issue for it.  We should add autocomplete to the various input fields to control whether or not we expect the browsers to keep track of information for those fields, including storing credentials within the browser's password save function if desired.",,mjumper,mkhan,vnick,welyqrson,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/19 16:08;mjumper;chrome-autocomplete-warning.png;https://issues.apache.org/jira/secure/attachment/12972881/chrome-autocomplete-warning.png",,,1.0,,,,,,,,,,,,,,,,,,,,2019-06-24 23:51:22.6,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Wed Jun 26 17:20:17 UTC 2019,,,,,,,"0|i3stbj:",9223372036854775807,,,,,,,,,,,,,,,,,"24/Jun/19 23:51;mkhan;Hi Nick

I was interested in working on this issue. I have not been able to reproduce this suggestion that you point out on Chrome Developer Tools. Can you kindly share some snippets and/or describe where you see the suggestion?

I not well aware of how the autocomplete attribute works so I will definitely look into that and naturally the next phase should include discussing where the attribute needs to be turned on or not.

Thanks","25/Jun/19 16:09;mjumper;[~mkhan], I think you need to enable the ""Verbose"" log level to see the warning. Once that's done, the following appears in the dev tools console for any page with a password field, regardless of whether that field is involved with login or with connection configuration:

!chrome-autocomplete-warning.png!

For reference, the link in the warning resolves to:

https://www.chromium.org/developers/design-documents/create-amazing-password-forms

","26/Jun/19 17:20;mkhan;After looking into the autocomplete attribute more closely, what we found is that setting the attribute to ""off"" on password fields, does not deter modern browsers from asking the user's if they want their passwords saved. As a result, when a user does actually save a password, browsers like Chrome autofills fields in any page that have a username and a password field.

One way that can be avoided is to set the autocomplete property of password fields to ""new-password"". This way, at the very least, the unwanted password fields will not be auto-filled. There might be more suitable solution for this and for that reason I believe there needs to be some sort of discussion regarding what type of autocomplete values need to be used.

For reference:
https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Display message of the day when logging in to guacamole,GUACAMOLE-842,13244755,New Feature,Open,GUACAMOLE,Guacamole,software,mjumper,"<p>Apache Guacamole is a <strong>clientless remote desktop gateway</strong>. It supports
standard protocols like VNC, RDP, and SSH.</p>

<p>We call it <em>clientless</em> because no plugins or client software are required.</p>

<p>Once Guacamole is installed on a server, all you need to access your desktops is a web browser.</p>",https://guacamole.apache.org,Trivial,,,bhose,bhose,13/Jul/19 13:08,13/Jul/19 17:38,17/Feb/21 11:13,,1.0.0,,,guacamole-client,,,,,,,,,0,features,,,,"Would be good to have an option to set a message of the day (MOTD) to be displayed when a user logs in, e.g. for announcing maintenance works. Could be implemented via settings for admins.",,bhose,vnick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2019-07-13 13:25:03.854,,,false,,,,,,,,,,,,,,,,,,9223372036854775807,,,Sat Jul 13 17:38:49 UTC 2019,,,,,,,"0|z04n28:",9223372036854775807,,,,,,,,,,,,,,,,,"13/Jul/19 13:25;vnick;You can already do this to some degree using the built-in ability to customize the interface:

http://guacamole.apache.org/doc/gug/guacamole-ext.html

You can brand the interface, add content to the pages (including the login page), and extend the functionality of the interface.  There may still be some additional stuff to implement, here, but you might give that a look and see if it does what you're wanting.","13/Jul/19 17:38;bhose;Yes, we use branding, but this is not exactly what I suggest. If you want let users know whats going on (like announcing maintenance), it would be very helpful to enter such message via the web interface rather than changing html- and css-files, zipping into a JAR file and all this via the Linux command line. Not every admin is a great web developer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add log:stash command,KARAF-359,12494936,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,pieber,pieber,07/Jan/11 12:23,15/Sep/18 16:36,17/Feb/21 11:13,,,,,karaf,,,,,,,,,1,,,,,"When I trace down a problem I make extensive use of log:display. Basically it works really great, but sometimes I would wish to see only the log between my latest action and the next log:display

Something like

{code}
log:stash
// DO ACTION HERE
log:display (shows all the log happend between the last log:stash and the time I do log:display)
log:stash clear (remove the marker set by log:stash)
{code}

IMHO we could use the syntax of git stash here mostly. Named stashes could be an extension to this feature but I don't think it's required.",,rubytuesdaydono,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-01-07 12:31:16.28,,,false,,,,,,,,,,,,,,,,,,68428,,,Wed May 16 19:36:32 UTC 2012,,,,,,,"0|i1cig7:",281120,,,,,,,,,,,,,,,,,"07/Jan/11 12:31;gnodet;I usually do the following:

> log:clear ; another action ; log display

It's usually sufficient for my needs.","08/Jan/11 07:47;pieber;Yes, log:clear does the job (mostly), but the difference to log:stash would be that log:stash affects the -n param of log:display. Limiting it to the number of log-statements between stash and stash clear which can be above the e.g. default 500 line limit.","15/Apr/11 01:32;karafman;This is just a work-around, but you may try connecting to your Karaf instance with a client, and then (using the 3.0.0 version of log:display) type log:display <package-name> right before you do your thing on your karaf console.  This will allow you to view only those items affecting the package you are testing.","13/May/12 02:28;pieber;According to semvers.org no non-bug-fixes should be handled on micro release branches","16/May/12 19:36;rubytuesdaydono;http://semver.org/
what a great way to structure version numbers!  thank you for the reference.  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Set Priority for InfoProvider,KARAF-779,12515509,New Feature,Open,KARAF,Karaf,software,jbonofre,,http://karaf.apache.org,Trivial,,,bonomat,bonomat,27/Jul/11 10:43,15/Sep/18 16:36,17/Feb/21 11:13,,2.2.2,,,karaf,,,,,,,,,0,,,,,"It is possible to extend the karaf info command with custom information and it would be great to define the priority it, e.g. if the info should be added at the top or bottom of the list.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,2011-07-27 13:01:11.735,,,false,,,,,,,,,,,,,,,,,,43656,,,Sat Jul 30 13:52:57 UTC 2011,,,,,,,"0|i1cinb:",281152,,,,,,,,,,,,,,,,,"27/Jul/11 13:01;jbonofre;For bundle, we added OSGI-INF/bundle.info file providing a synopsis about the bundle.

Currently, commands (using Felix Gogo) use the description attribute of the annotation. It's only one row and without support of special ASCII characters (like bold, color, etc).

Could you share what do you have in mind ?
Is a file OSGI-INF/commands-info/${command}.info look good to you to provide extra informations (which could be formatted) ?","27/Jul/11 13:40;bonomat;No, i was thinking about the info command, which is currently printing out some information about karaf, jvm, ... see karaf-209 .
This can be extended by exporting a service which implement the infoService interface.
But this custom info is added at the bottom of the list and it would be great to have it at the top.","30/Jul/11 13:52;gmazza;It's not just top or bottom--since you can have multiple sources of custom info data you'll probably want the ability to arrange the multiple sources as well.

Perhaps a priority level should be added to both the Karaf-Info manifest entry and the InfoProvider interface (the two ways to add custom information right now).

There are many ways to do the priority numbering.  Here's one possibility: the current Karaf default info would have always have a priority of zero, anything you want ""on top"" would have a negative priority number (the more negative, the more ""on top""), anything you'd want at the bottom would have a positive priority number (the larger the number the more at the bottom.)  If not provided, the default priority level for any custom info would be ""1"", meaning it's placed at the end of the standard info.  Further the specific ordering of any custom info sharing the same priority is undefined -- customs infos with the same priority can go in any order alongside other custom infos that share the same priority level.

With just one person requesting this, the above is quite possibly overkill. OTOH this is functionality that enhances Karaf's branding capabilities.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
